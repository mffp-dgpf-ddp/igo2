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0g7MENBN0hDLFVBQVUsU0FBQyxrQkFDVixVQUFVLEVBQUUsTUFBTSxjQUNuQjs4SEFDSTtBQUFDO0FBQW1CO0FBQ1UsWUFYWixvQkFBb0I7QUFBSSxZQUV0QyxhQUFhO0FBQUc7QUFBRzs7Ozs7OzhHQVNtQjtBQUFDO0FBQzVDO0FBQXFCLElBRHZCLG1DQUFzRDtBQUN4RDtBQUFRO0FBQWlCO0FBRXBCO0FBQVEsSUFGWCxpQ0FBZ0M7QUFDbEM7QUFDTztBQUNFO0FBQWdCO0FBQVEsSUFBN0IsNkNBQWlEO0FBQUM7QUFDL0M7QUFBaUI7QUFBZ0I7QUFFdkMsSUFGRyx1Q0FBb0M7QUFDeEM7QUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBFcnJvclJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb24sIE5vdGlmaWNhdGlvbnNTZXJ2aWNlLCBOb3RpZmljYXRpb25UeXBlfSBmcm9tICdhbmd1bGFyMi1ub3RpZmljYXRpb25zJztcblxuaW1wb3J0IHsgQ29uZmlnU2VydmljZSB9IGZyb20gJy4uLy4uL2NvbmZpZy9jb25maWcuc2VydmljZSc7XG5cbmltcG9ydCB7IE1lc3NhZ2UsIE1lc3NhZ2VPcHRpb25zIH0gZnJvbSAnLi9tZXNzYWdlLmludGVyZmFjZSc7XG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gJy4vbWVzc2FnZS5lbnVtJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgTWVzc2FnZVNlcnZpY2Uge1xuICBwdWJsaWMgbWVzc2FnZXMkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxNZXNzYWdlW10+KFtdKTtcbiAgcHJpdmF0ZSBvcHRpb25zOiBNZXNzYWdlT3B0aW9ucztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG5vdGlmaWNhdGlvblNlcnZpY2U6IE5vdGlmaWNhdGlvbnNTZXJ2aWNlLFxuICAgIHByaXZhdGUgY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZVxuICApIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmNvbmZpZ1NlcnZpY2UuZ2V0Q29uZmlnKCdtZXNzYWdlJykgfHwge307XG4gIH1cblxuICBzaG93RXJyb3IoaHR0cEVycm9yOiBIdHRwRXJyb3JSZXNwb25zZSkge1xuICAgIGh0dHBFcnJvci5lcnJvci5jYXVnaHQgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzLmVycm9yKGh0dHBFcnJvci5lcnJvci5tZXNzYWdlLCBodHRwRXJyb3IuZXJyb3IudGl0bGUpO1xuICB9XG5cbiAgbWVzc2FnZShtZXNzYWdlOiBNZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlcyQubmV4dCh0aGlzLm1lc3NhZ2VzJC52YWx1ZS5jb25jYXQoW21lc3NhZ2VdKSk7XG5cbiAgICBtZXNzYWdlLm9wdGlvbnMgPSBtZXNzYWdlLm9wdGlvbnMgfHwge307XG4gICAgbWVzc2FnZSA9IHRoaXMuaGFuZGxlVGVtcGxhdGUobWVzc2FnZSk7XG5cbiAgICBsZXQgbm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb247XG4gICAgaWYgKG1lc3NhZ2UudGV4dCkge1xuICAgICAgbm90aWZpY2F0aW9uID0gdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlLmNyZWF0ZShcbiAgICAgICAgbWVzc2FnZS50aXRsZSxcbiAgICAgICAgbWVzc2FnZS50ZXh0LFxuICAgICAgICAobWVzc2FnZS50eXBlIGFzIGFueSkgYXMgTm90aWZpY2F0aW9uVHlwZSxcbiAgICAgICAgbWVzc2FnZS5vcHRpb25zXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAobWVzc2FnZS5odG1sKSB7XG4gICAgICBpZiAoIW1lc3NhZ2UuaWNvbikge1xuICAgICAgICBtZXNzYWdlLm9wdGlvbnMudGhlQ2xhc3MgPSBtZXNzYWdlLm9wdGlvbnMudGhlQ2xhc3NcbiAgICAgICAgICA/IG1lc3NhZ2Uub3B0aW9ucy50aGVDbGFzcyArICcgbm9JY29uJ1xuICAgICAgICAgIDogJ25vSWNvbic7XG4gICAgICB9XG5cbiAgICAgIG5vdGlmaWNhdGlvbiA9IHRoaXMubm90aWZpY2F0aW9uU2VydmljZS5odG1sKFxuICAgICAgICBtZXNzYWdlLmh0bWwsXG4gICAgICAgIChtZXNzYWdlLnR5cGUgYXMgYW55KSBhcyBOb3RpZmljYXRpb25UeXBlLFxuICAgICAgICBtZXNzYWdlLm9wdGlvbnNcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobWVzc2FnZS5pY29uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuYWRkSWNvbihub3RpZmljYXRpb24sIG1lc3NhZ2UuaWNvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbjtcbiAgfVxuXG4gIHN1Y2Nlc3ModGV4dDogc3RyaW5nLCB0aXRsZT86IHN0cmluZywgb3B0aW9uczogYW55ID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlKHtcbiAgICAgIHRleHQsXG4gICAgICB0aXRsZSxcbiAgICAgIGljb246IG9wdGlvbnMuaWNvbiB8fCAnY2hlY2snLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHR5cGU6IE1lc3NhZ2VUeXBlLlNVQ0NFU1NcbiAgICB9KTtcbiAgfVxuXG4gIGVycm9yKHRleHQ6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcsIG9wdGlvbnM6IGFueSA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZSh7XG4gICAgICB0ZXh0LFxuICAgICAgdGl0bGUsXG4gICAgICBpY29uOiBvcHRpb25zLmljb24gfHwgJ2Vycm9yX291dGxpbmUnLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHR5cGU6IE1lc3NhZ2VUeXBlLkVSUk9SXG4gICAgfSk7XG4gIH1cblxuICBpbmZvKHRleHQ6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcsIG9wdGlvbnM6IGFueSA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZSh7XG4gICAgICB0ZXh0LFxuICAgICAgdGl0bGUsXG4gICAgICBpY29uOiBvcHRpb25zLmljb24gfHwgJ2luZm9fb3V0bGluZScsXG4gICAgICBvcHRpb25zLFxuICAgICAgdHlwZTogTWVzc2FnZVR5cGUuSU5GT1xuICAgIH0pO1xuICB9XG5cbiAgYWxlcnQodGV4dDogc3RyaW5nLCB0aXRsZT86IHN0cmluZywgb3B0aW9uczogYW55ID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlKHtcbiAgICAgIHRleHQsXG4gICAgICB0aXRsZSxcbiAgICAgIGljb246IG9wdGlvbnMuaWNvbiB8fCAnYWNjZXNzX2FsYXJtJyxcbiAgICAgIG9wdGlvbnMsXG4gICAgICB0eXBlOiBNZXNzYWdlVHlwZS5BTEVSVFxuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlKGlkPzogc3RyaW5nKSB7XG4gICAgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlLnJlbW92ZShpZCk7XG4gIH1cblxuICBwcml2YXRlIGFkZEljb24obm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb24sIGljb246IHN0cmluZykge1xuICAgIC8vIFRoZXJlIGlzIG5vIHdheSB0byBhZGQgYW4gaWNvbiB0byBhIG5vdGlmaWNhdGlvbiB3aGVuIHJlYXRpbmdcbiAgICAvLyBpdCBzbyB3ZSBzaW1wbHkgc2V0IGl0IG9uIHRoZSBub3RpZmljYXRpb24gZGlyZWN0bHkuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mbGF1Yy9hbmd1bGFyMi1ub3RpZmljYXRpb25zL2lzc3Vlcy8xNjVcbiAgICBub3RpZmljYXRpb24uaWNvbiA9IGBcbiAgICAgIDxtYXQtaWNvbiBjbGFzcz1cIm1hdGVyaWFsLWljb25zIG1hdC1pY29uIG1hdC1saXN0LWF2YXRhclwiIHN2Z0ljb249XCIke2ljb259XCI+XG4gICAgICA8L21hdC1pY29uPmA7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRlbXBsYXRlKG1lc3NhZ2U6IE1lc3NhZ2UpOiBNZXNzYWdlIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy50ZW1wbGF0ZSB8fCBtZXNzYWdlLmh0bWwpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cblxuICAgIGxldCBodG1sID0gdGhpcy5vcHRpb25zLnRlbXBsYXRlO1xuICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoJyR7dGV4dH0nLCBtZXNzYWdlLnRleHQpO1xuICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoJyR7dGl0bGV9JywgbWVzc2FnZS50aXRsZSk7XG4gICAgaHRtbCA9IGh0bWwucmVwbGFjZSgnJHtpY29ufScsIG1lc3NhZ2UuaWNvbik7XG5cbiAgICBtZXNzYWdlLmh0bWwgPSBodG1sO1xuICAgIG1lc3NhZ2UudGV4dCA9IHVuZGVmaW5lZDtcbiAgICBtZXNzYWdlLnRpdGxlID0gdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UuaWNvbiA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufVxuIl19                                                                             