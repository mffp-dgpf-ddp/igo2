(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./dist/igo-lib/auth/fesm5/igo2-auth.js":
/*!**********************************************!*\
  !*** ./dist/igo-lib/auth/fesm5/igo2-auth.js ***!
  \**********************************************/
/*! exports provided: AuthFormComponent, AuthService, LoggedGuard, AuthGuard, AdminGuard, ProfilsGuard, AuthInterceptor, ProtectedDirective, TokenService, AuthRoutingModule, IgoAuthModule, ɵd, ɵa, ɵb, ɵc */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthFormComponent", function() { return AuthFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthService", function() { return AuthService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoggedGuard", function() { return LoggedGuard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthGuard", function() { return AuthGuard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdminGuard", function() { return AdminGuard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProfilsGuard", function() { return ProfilsGuard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthInterceptor", function() { return AuthInterceptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProtectedDirective", function() { return ProtectedDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TokenService", function() { return TokenService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthRoutingModule", function() { return AuthRoutingModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAuthModule", function() { return IgoAuthModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵd", function() { return AuthFacebookComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵa", function() { return AuthFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵb", function() { return AuthGoogleComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵc", function() { return AuthInternComponent; });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _igo2_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @igo2/utils */ "./dist/igo-lib/utils/fesm5/igo2-utils.js");
/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jwt-decode */ "./node_modules/jwt-decode/lib/index.js");
/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jwt_decode__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");












/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TokenService = /** @class */ (function () {
    function TokenService(injector) {
        this.injector = injector;
    }
    /**
     * @param {?} token
     * @return {?}
     */
    TokenService.prototype.set = /**
     * @param {?} token
     * @return {?}
     */
    function (token) {
        localStorage.setItem(this.tokenKey, token);
    };
    /**
     * @return {?}
     */
    TokenService.prototype.remove = /**
     * @return {?}
     */
    function () {
        localStorage.removeItem(this.tokenKey);
    };
    /**
     * @return {?}
     */
    TokenService.prototype.get = /**
     * @return {?}
     */
    function () {
        return localStorage.getItem(this.tokenKey);
    };
    /**
     * @return {?}
     */
    TokenService.prototype.decode = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var token = this.get();
        if (!token) {
            return;
        }
        return jwt_decode__WEBPACK_IMPORTED_MODULE_2___default()(token);
    };
    /**
     * @return {?}
     */
    TokenService.prototype.isExpired = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var jwt = this.decode();
        /** @type {?} */
        var currentTime = new Date().getTime() / 1000;
        if (jwt && currentTime < jwt.exp) {
            return false;
        }
        return true;
    };
    Object.defineProperty(TokenService.prototype, "tokenKey", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var config = this.injector.get(_igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"]);
            this.options = config.getConfig('auth') || {};
            return this.options.tokenKey;
        },
        enumerable: true,
        configurable: true
    });
    TokenService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    TokenService.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Injector"] }
    ]; };
    /** @nocollapse */ TokenService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["defineInjectable"])({ factory: function TokenService_Factory() { return new TokenService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_angular_core__WEBPACK_IMPORTED_MODULE_5__["INJECTOR"])); }, token: TokenService, providedIn: "root" });
    return TokenService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AuthService = /** @class */ (function () {
    function AuthService(http, tokenService, config, languageService, router) {
        this.http = http;
        this.tokenService = tokenService;
        this.config = config;
        this.languageService = languageService;
        this.router = router;
        this.authenticate$ = new rxjs__WEBPACK_IMPORTED_MODULE_0__["BehaviorSubject"](undefined);
        this.anonymous = false;
        this.options = this.config.getConfig('auth') || {};
        this.authenticate$.next(this.authenticated);
    }
    /**
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    AuthService.prototype.login = /**
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    function (username, password) {
        /** @type {?} */
        var myHeader = new _angular_common_http__WEBPACK_IMPORTED_MODULE_7__["HttpHeaders"]();
        myHeader.append('Content-Type', 'application/json');
        /** @type {?} */
        var body = JSON.stringify({
            username: username,
            password: this.encodePassword(password)
        });
        return this.loginCall(body, myHeader);
    };
    /**
     * @param {?} token
     * @param {?} type
     * @return {?}
     */
    AuthService.prototype.loginWithToken = /**
     * @param {?} token
     * @param {?} type
     * @return {?}
     */
    function (token, type) {
        /** @type {?} */
        var myHeader = new _angular_common_http__WEBPACK_IMPORTED_MODULE_7__["HttpHeaders"]();
        myHeader.append('Content-Type', 'application/json');
        /** @type {?} */
        var body = JSON.stringify({
            token: token,
            typeConnection: type
        });
        return this.loginCall(body, myHeader);
    };
    /**
     * @return {?}
     */
    AuthService.prototype.loginAnonymous = /**
     * @return {?}
     */
    function () {
        this.anonymous = true;
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["of"])(true);
    };
    /**
     * @return {?}
     */
    AuthService.prototype.logout = /**
     * @return {?}
     */
    function () {
        this.anonymous = false;
        this.tokenService.remove();
        this.authenticate$.next(false);
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["of"])(true);
    };
    /**
     * @return {?}
     */
    AuthService.prototype.isAuthenticated = /**
     * @return {?}
     */
    function () {
        return !this.tokenService.isExpired();
    };
    /**
     * @return {?}
     */
    AuthService.prototype.getToken = /**
     * @return {?}
     */
    function () {
        return this.tokenService.get();
    };
    /**
     * @return {?}
     */
    AuthService.prototype.decodeToken = /**
     * @return {?}
     */
    function () {
        if (this.isAuthenticated()) {
            return this.tokenService.decode();
        }
        return false;
    };
    /**
     * @return {?}
     */
    AuthService.prototype.goToRedirectUrl = /**
     * @return {?}
     */
    function () {
        if (!this.router) {
            return;
        }
        /** @type {?} */
        var redirectUrl = this.redirectUrl || this.router.url;
        if (redirectUrl === this.options.loginRoute) {
            /** @type {?} */
            var homeRoute = this.options.homeRoute || '/';
            this.router.navigateByUrl(homeRoute);
        }
        else if (redirectUrl) {
            this.router.navigateByUrl(redirectUrl);
        }
    };
    /**
     * @return {?}
     */
    AuthService.prototype.getUserInfo = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = this.options.url + '/info';
        return this.http.get(url);
    };
    /**
     * @return {?}
     */
    AuthService.prototype.getProfils = /**
     * @return {?}
     */
    function () {
        return this.http.get(this.options.url + "/profils");
    };
    /**
     * @param {?} user
     * @return {?}
     */
    AuthService.prototype.updateUser = /**
     * @param {?} user
     * @return {?}
     */
    function (user) {
        /** @type {?} */
        var url = this.options.url;
        return this.http.patch(url, JSON.stringify(user));
    };
    /**
     * @private
     * @param {?} password
     * @return {?}
     */
    AuthService.prototype.encodePassword = /**
     * @private
     * @param {?} password
     * @return {?}
     */
    function (password) {
        return _igo2_utils__WEBPACK_IMPORTED_MODULE_1__["Base64"].encode(password);
    };
    Object.defineProperty(AuthService.prototype, "logged", {
        // authenticated or anonymous
        get: 
        // authenticated or anonymous
        /**
         * @return {?}
         */
        function () {
            return this.authenticated || this.isAnonymous;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthService.prototype, "isAnonymous", {
        get: /**
         * @return {?}
         */
        function () {
            return this.anonymous;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthService.prototype, "authenticated", {
        get: /**
         * @return {?}
         */
        function () {
            return this.isAuthenticated();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * @param {?} body
     * @param {?} headers
     * @return {?}
     */
    AuthService.prototype.loginCall = /**
     * @private
     * @param {?} body
     * @param {?} headers
     * @return {?}
     */
    function (body, headers) {
        var _this = this;
        return this.http
            .post(this.options.url + "/login", body, { headers: headers })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["tap"])((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.tokenService.set(data.token);
            /** @type {?} */
            var tokenDecoded = _this.decodeToken();
            if (tokenDecoded && tokenDecoded.user && tokenDecoded.user.locale) {
                _this.languageService.setLanguage(tokenDecoded.user.locale);
            }
            _this.authenticate$.next(true);
        })));
    };
    AuthService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    AuthService.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_7__["HttpClient"] },
        { type: TokenService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["LanguageService"] },
        { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Optional"] }] }
    ]; };
    /** @nocollapse */ AuthService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["defineInjectable"])({ factory: function AuthService_Factory() { return new AuthService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_angular_common_http__WEBPACK_IMPORTED_MODULE_7__["HttpClient"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(TokenService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_10__["LanguageService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"], 8)); }, token: AuthService, providedIn: "root" });
    return AuthService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AuthFormComponent = /** @class */ (function () {
    function AuthFormComponent(auth, config, router) {
        this.auth = auth;
        this.config = config;
        this.router = router;
        this._backgroundDisable = true;
        this._hasAlreadyConnectedDiv = true;
        this._hasLogoutDiv = true;
        this._showAlreadyConnectedDiv = false;
        this._showLogoutDiv = false;
        this.visible = true;
        this.options = this.config.getConfig('auth') || {};
        this.visible = Object.getOwnPropertyNames(this.options).length !== 0;
    }
    Object.defineProperty(AuthFormComponent.prototype, "backgroundDisable", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.isLogoutRoute || this.isLogoutRoute) {
                return false;
            }
            return this._backgroundDisable;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._backgroundDisable = value.toString() === 'true';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthFormComponent.prototype, "hasAlreadyConnectedDiv", {
        get: /**
         * @return {?}
         */
        function () {
            return this._hasAlreadyConnectedDiv;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._hasAlreadyConnectedDiv = value.toString() === 'true';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthFormComponent.prototype, "hasLogoutDiv", {
        get: /**
         * @return {?}
         */
        function () {
            return this._hasLogoutDiv;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._hasLogoutDiv = value.toString() === 'true';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthFormComponent.prototype, "showAlreadyConnectedDiv", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.isLogoutRoute) {
                return this.hasAlreadyConnectedDiv;
            }
            return this._showAlreadyConnectedDiv;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._showAlreadyConnectedDiv = value.toString() === 'true';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthFormComponent.prototype, "showLogoutDiv", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.isLogoutRoute) {
                return this.hasLogoutDiv;
            }
            return this._showLogoutDiv;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._showLogoutDiv = value.toString() === 'true';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AuthFormComponent.prototype, "showLoginDiv", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.isLogoutRoute) {
                return true;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AuthFormComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.analyzeRoute();
        this.getName();
    };
    /**
     * @return {?}
     */
    AuthFormComponent.prototype.login = /**
     * @return {?}
     */
    function () {
        this.auth.goToRedirectUrl();
        this.getName();
    };
    /**
     * @return {?}
     */
    AuthFormComponent.prototype.logout = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.auth.logout().subscribe((/**
         * @return {?}
         */
        function () {
            _this.user = undefined;
            if (_this.router) {
                if (_this.options.logoutRoute) {
                    _this.router.navigate([_this.options.logoutRoute]);
                }
                else if (_this.options.homeRoute) {
                    _this.router.navigate([_this.options.homeRoute]);
                }
            }
        }));
    };
    /**
     * @return {?}
     */
    AuthFormComponent.prototype.home = /**
     * @return {?}
     */
    function () {
        if (this.router && this.options.homeRoute) {
            this.router.navigate([this.options.homeRoute]);
        }
    };
    /**
     * @private
     * @return {?}
     */
    AuthFormComponent.prototype.getName = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.auth.decodeToken()) {
            /** @type {?} */
            var tokenDecoded = this.auth.decodeToken();
            this.user = {
                name: tokenDecoded.user.firstName || tokenDecoded.user.sourceId
            };
        }
    };
    /**
     * @private
     * @return {?}
     */
    AuthFormComponent.prototype.analyzeRoute = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.router) {
            return;
        }
        this.router.events
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["filter"])((/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return event instanceof _angular_router__WEBPACK_IMPORTED_MODULE_4__["NavigationStart"]; })))
            .subscribe((/**
         * @param {?} changeEvent
         * @return {?}
         */
        function (changeEvent) {
            if (changeEvent.url) {
                /** @type {?} */
                var currentRoute = changeEvent.url;
                /** @type {?} */
                var logoutRoute = _this.options.logoutRoute;
                /** @type {?} */
                var loginRoute = _this.options.loginRoute;
                _this.isLogoutRoute = currentRoute === logoutRoute;
                _this.isLoginRoute = currentRoute === loginRoute;
                if (_this.isLogoutRoute) {
                    _this.auth.logout();
                }
            }
        }));
    };
    AuthFormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Component"], args: [{
                    selector: 'igo-auth-form',
                    template: "<div *ngIf=\"visible\">\r\n  <div *ngIf=\"!auth.logged && backgroundDisable\" class=\"backgroundDisable\"></div>\r\n\r\n  <div *ngIf=\"!auth.logged && showLoginDiv\" class=\"login center-block\">\r\n    <h1>{{'igo.auth.connection' | translate}}</h1>\r\n\r\n    <igo-auth-google\r\n      *ngIf=\"options.google && options.google.enabled !== false\"\r\n      (login)=\"login()\">\r\n    </igo-auth-google>\r\n    <igo-auth-facebook\r\n      *ngIf=\"options.facebook && options.facebook.enabled !== false\"\r\n      (login)=\"login()\">\r\n    </igo-auth-facebook>\r\n    <igo-auth-intern\r\n      *ngIf=\"!options.intern || options.intern.enabled !== false\"\r\n      [allowAnonymous]=\"options.allowAnonymous\"\r\n      (login)=\"login()\">\r\n    </igo-auth-intern>\r\n  </div>\r\n\r\n  <div *ngIf=\"auth.logged && showAlreadyConnectedDiv\" class=\"login center-block\">\r\n    <p>{{'igo.auth.welcome' |\u00A0translate: user}}</p>\r\n    <button mat-raised-button type=\"button\" (click)=\"logout()\">{{'igo.auth.signOut' |\u00A0translate}}</button>\r\n  </div>\r\n\r\n  <div *ngIf=\"showLogoutDiv\" class=\"login center-block\">\r\n    <p>{{'igo.auth.deconnection' |\u00A0translate}}</p>\r\n    <button *ngIf=\"options.homeRoute\" mat-raised-button type=\"button\" (click)=\"home()\">{{'igo.auth.home' |\u00A0translate}}</button>\r\n  </div>\r\n\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_5__["ChangeDetectionStrategy"].Default,
                    styles: [":host{z-index:999}div.login{z-index:200;width:90%;min-width:360px;max-width:600px;padding:25px 50px;border:1px solid #888;background-color:#fff}.center-block{position:fixed;top:20%;left:50%;-webkit-transform:translate(-50%,0);transform:translate(-50%,0)}.backgroundDisable{position:fixed;top:0;left:0;background:#000;opacity:.8;z-index:100;height:100%;width:100%}"]
                }] }
    ];
    /** @nocollapse */
    AuthFormComponent.ctorParameters = function () { return [
        { type: AuthService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Optional"] }] }
    ]; };
    AuthFormComponent.propDecorators = {
        backgroundDisable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Input"] }],
        hasAlreadyConnectedDiv: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Input"] }],
        hasLogoutDiv: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Input"] }],
        showAlreadyConnectedDiv: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Input"] }],
        showLogoutDiv: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Input"] }]
    };
    return AuthFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AuthInternComponent = /** @class */ (function () {
    function AuthInternComponent(auth, fb) {
        this.auth = auth;
        this._allowAnonymous = true;
        this.error = '';
        this.login = new _angular_core__WEBPACK_IMPORTED_MODULE_5__["EventEmitter"]();
        this.form = fb.group({
            username: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_8__["Validators"].required],
            password: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_8__["Validators"].required]
        });
    }
    Object.defineProperty(AuthInternComponent.prototype, "allowAnonymous", {
        get: /**
         * @return {?}
         */
        function () {
            return this._allowAnonymous;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._allowAnonymous = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} values
     * @return {?}
     */
    AuthInternComponent.prototype.loginUser = /**
     * @param {?} values
     * @return {?}
     */
    function (values) {
        var _this = this;
        this.auth.login(values.username, values.password).subscribe((/**
         * @return {?}
         */
        function () {
            _this.login.emit(true);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.error = error.error.message;
        }));
        return false;
    };
    /**
     * @return {?}
     */
    AuthInternComponent.prototype.loginAnonymous = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.auth.loginAnonymous().subscribe((/**
         * @return {?}
         */
        function () {
            _this.login.emit(true);
        }));
    };
    AuthInternComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Component"], args: [{
                    selector: 'igo-auth-intern',
                    template: "<form [formGroup]=\"form\" role=\"form\" (ngSubmit)=\"loginUser(form.value)\">\r\n  <div>\r\n    <mat-form-field class=\"full-width\">\r\n      <input matInput required placeholder=\"{{'igo.auth.user' | translate}}\" formControlName=\"username\">\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div>\r\n    <mat-form-field class=\"full-width\">\r\n      <input matInput required type=\"password\" placeholder=\"{{'igo.auth.password' | translate}}\" formControlName=\"password\">\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <button mat-raised-button type=\"submit\" [disabled]=\"!form.valid\">{{'igo.auth.login' | translate}}</button>\r\n  <button *ngIf=\"allowAnonymous\" mat-raised-button type=\"button\" (click)=\"loginAnonymous()\">{{'igo.auth.accessAnonymous' | translate }}</button>\r\n  <div *ngIf=\"error\">\r\n    <br/>\r\n    <font size=\"3\" color=\"red\">{{error}}</font>\r\n  </div>\r\n</form>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_5__["ChangeDetectionStrategy"].Default,
                    styles: [".full-width{width:100%}"]
                }] }
    ];
    /** @nocollapse */
    AuthInternComponent.ctorParameters = function () { return [
        { type: AuthService },
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_8__["FormBuilder"] }
    ]; };
    AuthInternComponent.propDecorators = {
        allowAnonymous: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Input"] }],
        login: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Output"] }]
    };
    return AuthInternComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AuthFacebookComponent = /** @class */ (function () {
    function AuthFacebookComponent(authService, config, appRef) {
        this.authService = authService;
        this.config = config;
        this.appRef = appRef;
        this.login = new _angular_core__WEBPACK_IMPORTED_MODULE_5__["EventEmitter"]();
        this.options = this.config.getConfig('auth.facebook') || {};
        if (this.options.apiKey) {
            this.loadSDKFacebook();
        }
    }
    /**
     * @private
     * @return {?}
     */
    AuthFacebookComponent.prototype.subscribeEvents = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        ((/** @type {?} */ (window))).FB.Event.subscribe('auth.statusChange', (/**
         * @param {?} rep
         * @return {?}
         */
        function (rep) {
            _this.statusChangeCallback(rep);
        }));
    };
    /**
     * @private
     * @param {?} response
     * @return {?}
     */
    AuthFacebookComponent.prototype.statusChangeCallback = /**
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        if (response.status === 'connected') {
            /** @type {?} */
            var accessToken = response.authResponse.accessToken;
            this.loginFacebook(accessToken);
        }
    };
    /**
     * @private
     * @param {?} token
     * @return {?}
     */
    AuthFacebookComponent.prototype.loginFacebook = /**
     * @private
     * @param {?} token
     * @return {?}
     */
    function (token) {
        var _this = this;
        this.authService.loginWithToken(token, 'facebook').subscribe((/**
         * @return {?}
         */
        function () {
            _this.appRef.tick();
            _this.login.emit(true);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    AuthFacebookComponent.prototype.loadSDKFacebook = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (document.getElementById('facebook-jssdk')) {
            return;
        }
        /** @type {?} */
        var urlSDK = 'https://connect.facebook.net/fr_CA/sdk.js#xfbml=1&version=v2.9';
        /** @type {?} */
        var fjs = document.getElementsByTagName('script')[0];
        /** @type {?} */
        var js = document.createElement('script');
        js.id = 'facebook-jssdk';
        js.src = urlSDK + "&appId=" + this.options.apiKey;
        js.onload = (/**
         * @return {?}
         */
        function () {
            _this.subscribeEvents();
        });
        fjs.parentNode.insertBefore(js, fjs);
    };
    AuthFacebookComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Component"], args: [{
                    selector: 'igo-auth-facebook',
                    template: "<div scope=\"public_profile,email\"\r\n     class=\"fb-login-button\" data-max-rows=\"1\" data-size=\"large\"\r\n     data-button-type=\"continue_with\" data-show-faces=\"false\"\r\n     data-auto-logout-link=\"false\" data-use-continue-as=\"false\">\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_5__["ChangeDetectionStrategy"].OnPush,
                    styles: [".fb-login-button{padding:10px 0}"]
                }] }
    ];
    /** @nocollapse */
    AuthFacebookComponent.ctorParameters = function () { return [
        { type: AuthService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["ApplicationRef"] }
    ]; };
    AuthFacebookComponent.propDecorators = {
        login: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Output"] }]
    };
    return AuthFacebookComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AuthGoogleComponent = /** @class */ (function () {
    function AuthGoogleComponent(authService, config, appRef) {
        this.authService = authService;
        this.config = config;
        this.appRef = appRef;
        this.login = new _angular_core__WEBPACK_IMPORTED_MODULE_5__["EventEmitter"]();
        this.options = this.config.getConfig('auth.google') || {};
        if (this.options.apiKey && this.options.clientId) {
            this.loadSDKGoogle();
            this.loadPlatform();
        }
    }
    /**
     * @return {?}
     */
    AuthGoogleComponent.prototype.handleSignInClick = /**
     * @return {?}
     */
    function () {
        ((/** @type {?} */ (window))).gapi.auth2.getAuthInstance().signIn();
    };
    /**
     * @return {?}
     */
    AuthGoogleComponent.prototype.handleSignOutClick = /**
     * @return {?}
     */
    function () {
        ((/** @type {?} */ (window))).gapi.auth2.getAuthInstance().signOut();
    };
    /**
     * @private
     * @return {?}
     */
    AuthGoogleComponent.prototype.handleClientLoad = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        ((/** @type {?} */ (window))).gapi.load('client:auth2', (/**
         * @return {?}
         */
        function () { return _this.initClient(); }));
    };
    /**
     * @private
     * @return {?}
     */
    AuthGoogleComponent.prototype.initClient = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        ((/** @type {?} */ (window))).gapi.client
            .init({
            apiKey: this.options.apiKey,
            clientId: this.options.clientId,
            discoveryDocs: [
                'https://people.googleapis.com/$discovery/rest?version=v1'
            ],
            scope: 'profile'
        })
            .then((/**
         * @return {?}
         */
        function () {
            _this.handleSignOutClick();
            ((/** @type {?} */ (window))).gapi.auth2.getAuthInstance().isSignedIn.listen((/**
             * @param {?} rep
             * @return {?}
             */
            function (rep) {
                _this.updateSigninStatus(rep);
            }));
        }));
    };
    /**
     * @private
     * @param {?} isSignedIn
     * @return {?}
     */
    AuthGoogleComponent.prototype.updateSigninStatus = /**
     * @private
     * @param {?} isSignedIn
     * @return {?}
     */
    function (isSignedIn) {
        if (isSignedIn) {
            this.loginGoogle(((/** @type {?} */ (window))).gapi.client.getToken().access_token);
        }
    };
    /**
     * @private
     * @param {?} token
     * @return {?}
     */
    AuthGoogleComponent.prototype.loginGoogle = /**
     * @private
     * @param {?} token
     * @return {?}
     */
    function (token) {
        var _this = this;
        this.authService.loginWithToken(token, 'google').subscribe((/**
         * @return {?}
         */
        function () {
            _this.appRef.tick();
            _this.login.emit(true);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    AuthGoogleComponent.prototype.loadSDKGoogle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var fjs = document.getElementsByTagName('script')[0];
        /** @type {?} */
        var js = document.createElement('script');
        js.id = 'google-jssdk';
        js.src = 'https://apis.google.com/js/api.js';
        js.onload = (/**
         * @return {?}
         */
        function () {
            _this.handleClientLoad();
        });
        fjs.parentNode.insertBefore(js, fjs);
    };
    /**
     * @private
     * @return {?}
     */
    AuthGoogleComponent.prototype.loadPlatform = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var fjs = document.getElementsByTagName('script')[0];
        /** @type {?} */
        var js = document.createElement('script');
        js.id = 'google-platform';
        js.src = 'https://apis.google.com/js/platform.js';
        fjs.parentNode.insertBefore(js, fjs);
    };
    AuthGoogleComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Component"], args: [{
                    selector: 'igo-auth-google',
                    template: "<div class=\"g-signin2 google-login-button\" data-height=\"40\" data-width=\"265\" data-longtitle=\"true\">\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_5__["ChangeDetectionStrategy"].OnPush,
                    styles: [".google-login-button{padding:10px 0}"]
                }] }
    ];
    /** @nocollapse */
    AuthGoogleComponent.ctorParameters = function () { return [
        { type: AuthService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["ApplicationRef"] }
    ]; };
    AuthGoogleComponent.propDecorators = {
        login: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Output"] }]
    };
    return AuthGoogleComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LoggedGuard = /** @class */ (function () {
    function LoggedGuard(authService, config, router) {
        this.authService = authService;
        this.config = config;
        this.router = router;
    }
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    LoggedGuard.prototype.canActivate = /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    function (route, state) {
        if (this.authService.logged) {
            return true;
        }
        this.authService.redirectUrl = state.url;
        /** @type {?} */
        var authConfig = this.config.getConfig('auth');
        if (authConfig && authConfig.loginRoute) {
            this.router.navigateByUrl(authConfig.loginRoute);
        }
        return false;
    };
    LoggedGuard.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    LoggedGuard.ctorParameters = function () { return [
        { type: AuthService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"] }
    ]; };
    /** @nocollapse */ LoggedGuard.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["defineInjectable"])({ factory: function LoggedGuard_Factory() { return new LoggedGuard(Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(AuthService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"])); }, token: LoggedGuard, providedIn: "root" });
    return LoggedGuard;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AuthGuard = /** @class */ (function () {
    function AuthGuard(authService, config, router) {
        this.authService = authService;
        this.config = config;
        this.router = router;
    }
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    AuthGuard.prototype.canActivate = /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    function (route, state) {
        if (this.authService.authenticated) {
            return true;
        }
        this.authService.redirectUrl = state.url;
        /** @type {?} */
        var authConfig = this.config.getConfig('auth');
        if (authConfig && authConfig.loginRoute) {
            this.router.navigateByUrl(authConfig.loginRoute);
        }
        return false;
    };
    AuthGuard.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    AuthGuard.ctorParameters = function () { return [
        { type: AuthService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"] }
    ]; };
    /** @nocollapse */ AuthGuard.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["defineInjectable"])({ factory: function AuthGuard_Factory() { return new AuthGuard(Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(AuthService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"])); }, token: AuthGuard, providedIn: "root" });
    return AuthGuard;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AdminGuard = /** @class */ (function () {
    function AdminGuard(authService, config, router) {
        this.authService = authService;
        this.config = config;
        this.router = router;
    }
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    AdminGuard.prototype.canActivate = /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    function (route, state) {
        /** @type {?} */
        var token = this.authService.decodeToken();
        if (token && token.user && token.user.isAdmin) {
            return true;
        }
        this.authService.redirectUrl = state.url;
        /** @type {?} */
        var authConfig = this.config.getConfig('auth');
        if (authConfig && authConfig.loginRoute) {
            this.router.navigateByUrl(authConfig.loginRoute);
        }
        return false;
    };
    AdminGuard.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    AdminGuard.ctorParameters = function () { return [
        { type: AuthService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"] }
    ]; };
    /** @nocollapse */ AdminGuard.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["defineInjectable"])({ factory: function AdminGuard_Factory() { return new AdminGuard(Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(AuthService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"])); }, token: AdminGuard, providedIn: "root" });
    return AdminGuard;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ProfilsGuard = /** @class */ (function () {
    function ProfilsGuard(authService, config, router) {
        this.authService = authService;
        this.config = config;
        this.router = router;
    }
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    ProfilsGuard.prototype.canActivate = /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    function (route, state) {
        var _this = this;
        return this.authService.getProfils().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["map"])((/**
         * @param {?} profils
         * @return {?}
         */
        function (profils) {
            /** @type {?} */
            var authConfig = _this.config.getConfig('auth');
            if (profils &&
                profils.some((/**
                 * @param {?} v
                 * @return {?}
                 */
                function (v) { return authConfig.profilsGuard.indexOf(v) !== -1; }))) {
                return true;
            }
            _this.authService.redirectUrl = state.url;
            if (authConfig && authConfig.loginRoute) {
                _this.router.navigateByUrl(authConfig.loginRoute);
            }
            return false;
        })));
    };
    ProfilsGuard.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ProfilsGuard.ctorParameters = function () { return [
        { type: AuthService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"] }
    ]; };
    /** @nocollapse */ ProfilsGuard.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["defineInjectable"])({ factory: function ProfilsGuard_Factory() { return new ProfilsGuard(Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(AuthService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"])); }, token: ProfilsGuard, providedIn: "root" });
    return ProfilsGuard;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AuthInterceptor = /** @class */ (function () {
    function AuthInterceptor(config, tokenService) {
        this.config = config;
        this.tokenService = tokenService;
        this.trustHosts = [];
        this.trustHosts = this.config.getConfig('auth.trustHosts') || [];
        this.trustHosts.push(window.location.hostname);
    }
    /**
     * @param {?} req
     * @param {?} next
     * @return {?}
     */
    AuthInterceptor.prototype.intercept = /**
     * @param {?} req
     * @param {?} next
     * @return {?}
     */
    function (req, next) {
        /** @type {?} */
        var token = this.tokenService.get();
        /** @type {?} */
        var element = document.createElement('a');
        element.href = req.url;
        if (!token && this.trustHosts.indexOf(element.hostname) === -1) {
            return next.handle(req);
        }
        /** @type {?} */
        var authHeader = "Bearer " + token;
        /** @type {?} */
        var authReq = req.clone({
            headers: req.headers.set('Authorization', authHeader)
        });
        return next.handle(authReq);
    };
    AuthInterceptor.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    AuthInterceptor.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"] },
        { type: TokenService }
    ]; };
    /** @nocollapse */ AuthInterceptor.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["defineInjectable"])({ factory: function AuthInterceptor_Factory() { return new AuthInterceptor(Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_10__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_5__["inject"])(TokenService)); }, token: AuthInterceptor, providedIn: "root" });
    return AuthInterceptor;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ProtectedDirective = /** @class */ (function () {
    function ProtectedDirective(authentication, el) {
        if (!authentication.isAuthenticated()) {
            el.nativeElement.parentNode.removeChild(el.nativeElement);
        }
    }
    ProtectedDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["Directive"], args: [{
                    selector: '[igoProtected]'
                },] }
    ];
    /** @nocollapse */
    ProtectedDirective.ctorParameters = function () { return [
        { type: AuthService },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["ElementRef"] }
    ]; };
    return ProtectedDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var routes = [
    { path: 'login', component: AuthFormComponent },
    { path: 'logout', component: AuthFormComponent }
];
var AuthRoutingModule = /** @class */ (function () {
    function AuthRoutingModule() {
    }
    AuthRoutingModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["NgModule"], args: [{
                    imports: [_angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterModule"].forChild(routes)],
                    exports: [_angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterModule"]],
                    providers: []
                },] }
    ];
    return AuthRoutingModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAuthModule = /** @class */ (function () {
    function IgoAuthModule() {
    }
    /**
     * @return {?}
     */
    IgoAuthModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoAuthModule,
            providers: [
                {
                    provide: _angular_common_http__WEBPACK_IMPORTED_MODULE_7__["HTTP_INTERCEPTORS"],
                    useClass: AuthInterceptor,
                    multi: true
                }
            ]
        };
    };
    IgoAuthModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_5__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_6__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_8__["ReactiveFormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_9__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_9__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_9__["MatButtonModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_10__["IgoLanguageModule"]
                    ],
                    declarations: [
                        AuthFormComponent,
                        AuthGoogleComponent,
                        AuthInternComponent,
                        AuthFacebookComponent,
                        ProtectedDirective
                    ],
                    exports: [AuthFormComponent, ProtectedDirective]
                },] }
    ];
    return IgoAuthModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */



//# sourceMappingURL=igo2-auth.js.map

/***/ }),

/***/ "./dist/igo-lib/common/fesm5/igo2-common.js":
/*!**************************************************!*\
  !*** ./dist/igo-lib/common/fesm5/igo2-common.js ***!
  \**************************************************/
/*! exports provided: IgoActionModule, IgoActionbarModule, IgoBackdropModule, IgoClickoutModule, IgoCloneModule, IgoCollapsibleModule, IgoConfirmDialogModule, IgoContextMenuModule, IgoCustomHtmlModule, IgoDrapDropModule, IgoDynamicComponentModule, IgoDynamicOutletModule, IgoFlexibleModule, IgoFormModule, IgoFormFormModule, IgoFormFieldModule, IgoFormGroupModule, IgoEntityModule, IgoEntitySelectorModule, IgoEntityTableModule, IgoImageModule, IgoJsonDialogModule, IgoKeyValueModule, IgoListModule, IgoPanelModule, IgoSidenavModule, IgoSpinnerModule, IgoStopPropagationModule, IgoTableModule, IgoToolModule, IgoToolboxModule, IgoWidgetModule, IgoWidgetOutletModule, IgoWorkspaceModule, IgoWorkspaceSelectorModule, IgoWorkspaceWidgetOutletModule, ActionbarMode, ActionStore, BackdropComponent, ClickoutDirective, ClonePipe, CollapsibleComponent, CollapseDirective, ConfirmDialogComponent, ConfirmDialogService, ContextMenuDirective, CustomHtmlComponent, SanitizeHtmlPipe, DragAndDropDirective, DynamicComponent, DynamicComponentService, formControlIsRequired, getDefaultErrorMessages, getControlErrorMessage, getAllFormFields, FormService, FormFieldService, FormFieldComponent, EntityOperationType, EntityTableColumnRenderer, EntityTableScrollBehavior, EntityTableSelectionState, getEntityProperty, getEntityId, getEntityTitle, getEntityTitleHtml, getEntityIcon, getEntityRevision, EntityStore, EntityStateManager, EntityStoreWatcher, EntityTransaction, EntityView, EntitySelectorComponent, EntityTableComponent, FlexibleComponent, SecureImagePipe, JsonDialogComponent, JsonDialogService, KeyValuePipe, ListComponent, ListItemDirective, PanelComponent, SidenavShimDirective, SpinnerComponent, SpinnerActivityDirective, StopPropagationDirective, StopDropPropagationDirective, TableComponent, TableDatabase, TableDataSource, TableActionColor, ToolService, ToolComponent, Toolbox, Widget, WidgetService, WorkspaceStore, Workspace, WorkspaceSelectorComponent, ɵb, ɵa, ɵc, ɵd, ɵe, ɵg, ɵf, ɵh, ɵi, ɵj, ɵl, ɵk, ɵm, ɵn, ɵo, ɵz, ɵbd, ɵbc, ɵp, ɵs, ɵu, ɵv, ɵq, ɵw, ɵx, ɵt, ɵr, ɵy, ɵbe, ɵbg, ɵbh, ɵbf, ɵbi, ɵbj, ɵbk, ɵbl, ɵbm, ɵbn, ɵba, ɵbb, ɵbo, ɵbr, ɵbq, ɵbp, ɵbt, ɵbs, ɵbu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoActionModule", function() { return IgoActionModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoActionbarModule", function() { return IgoActionbarModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoBackdropModule", function() { return IgoBackdropModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoClickoutModule", function() { return IgoClickoutModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoCloneModule", function() { return IgoCloneModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoCollapsibleModule", function() { return IgoCollapsibleModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoConfirmDialogModule", function() { return IgoConfirmDialogModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoContextMenuModule", function() { return IgoContextMenuModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoCustomHtmlModule", function() { return IgoCustomHtmlModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoDrapDropModule", function() { return IgoDrapDropModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoDynamicComponentModule", function() { return IgoDynamicComponentModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoDynamicOutletModule", function() { return IgoDynamicOutletModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFlexibleModule", function() { return IgoFlexibleModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFormModule", function() { return IgoFormModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFormFormModule", function() { return IgoFormFormModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFormFieldModule", function() { return IgoFormFieldModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFormGroupModule", function() { return IgoFormGroupModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoEntityModule", function() { return IgoEntityModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoEntitySelectorModule", function() { return IgoEntitySelectorModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoEntityTableModule", function() { return IgoEntityTableModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoImageModule", function() { return IgoImageModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoJsonDialogModule", function() { return IgoJsonDialogModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoKeyValueModule", function() { return IgoKeyValueModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoListModule", function() { return IgoListModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoPanelModule", function() { return IgoPanelModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoSidenavModule", function() { return IgoSidenavModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoSpinnerModule", function() { return IgoSpinnerModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoStopPropagationModule", function() { return IgoStopPropagationModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoTableModule", function() { return IgoTableModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoToolModule", function() { return IgoToolModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoToolboxModule", function() { return IgoToolboxModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoWidgetModule", function() { return IgoWidgetModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoWidgetOutletModule", function() { return IgoWidgetOutletModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoWorkspaceModule", function() { return IgoWorkspaceModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoWorkspaceSelectorModule", function() { return IgoWorkspaceSelectorModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoWorkspaceWidgetOutletModule", function() { return IgoWorkspaceWidgetOutletModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActionbarMode", function() { return ActionbarMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActionStore", function() { return ActionStore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BackdropComponent", function() { return BackdropComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClickoutDirective", function() { return ClickoutDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClonePipe", function() { return ClonePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CollapsibleComponent", function() { return CollapsibleComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CollapseDirective", function() { return CollapseDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfirmDialogComponent", function() { return ConfirmDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfirmDialogService", function() { return ConfirmDialogService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuDirective", function() { return ContextMenuDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomHtmlComponent", function() { return CustomHtmlComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SanitizeHtmlPipe", function() { return SanitizeHtmlPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DragAndDropDirective", function() { return DragAndDropDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicComponent", function() { return DynamicComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicComponentService", function() { return DynamicComponentService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formControlIsRequired", function() { return formControlIsRequired; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDefaultErrorMessages", function() { return getDefaultErrorMessages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getControlErrorMessage", function() { return getControlErrorMessage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAllFormFields", function() { return getAllFormFields; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormService", function() { return FormService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormFieldService", function() { return FormFieldService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormFieldComponent", function() { return FormFieldComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityOperationType", function() { return EntityOperationType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityTableColumnRenderer", function() { return EntityTableColumnRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityTableScrollBehavior", function() { return EntityTableScrollBehavior; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityTableSelectionState", function() { return EntityTableSelectionState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEntityProperty", function() { return getEntityProperty; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEntityId", function() { return getEntityId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEntityTitle", function() { return getEntityTitle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEntityTitleHtml", function() { return getEntityTitleHtml; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEntityIcon", function() { return getEntityIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEntityRevision", function() { return getEntityRevision; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityStore", function() { return EntityStore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityStateManager", function() { return EntityStateManager; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityStoreWatcher", function() { return EntityStoreWatcher; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityTransaction", function() { return EntityTransaction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityView", function() { return EntityView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntitySelectorComponent", function() { return EntitySelectorComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EntityTableComponent", function() { return EntityTableComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FlexibleComponent", function() { return FlexibleComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SecureImagePipe", function() { return SecureImagePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JsonDialogComponent", function() { return JsonDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JsonDialogService", function() { return JsonDialogService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeyValuePipe", function() { return KeyValuePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListComponent", function() { return ListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListItemDirective", function() { return ListItemDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PanelComponent", function() { return PanelComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SidenavShimDirective", function() { return SidenavShimDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpinnerComponent", function() { return SpinnerComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpinnerActivityDirective", function() { return SpinnerActivityDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StopPropagationDirective", function() { return StopPropagationDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StopDropPropagationDirective", function() { return StopDropPropagationDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableComponent", function() { return TableComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableDatabase", function() { return TableDatabase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableDataSource", function() { return TableDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableActionColor", function() { return TableActionColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToolService", function() { return ToolService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToolComponent", function() { return ToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Toolbox", function() { return Toolbox; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Widget", function() { return Widget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WidgetService", function() { return WidgetService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkspaceStore", function() { return WorkspaceStore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Workspace", function() { return Workspace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkspaceSelectorComponent", function() { return WorkspaceSelectorComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵb", function() { return ActionbarItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵa", function() { return ActionbarComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵc", function() { return BackdropComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵd", function() { return ClickoutDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵe", function() { return ClonePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵg", function() { return CollapseDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵf", function() { return CollapsibleComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵh", function() { return ConfirmDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵi", function() { return ConfirmDialogService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵj", function() { return ContextMenuDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵl", function() { return CustomHtmlComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵk", function() { return SanitizeHtmlPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵm", function() { return DragAndDropDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵn", function() { return DynamicOutletComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵo", function() { return DynamicComponentService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵz", function() { return EntitySelectorComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbd", function() { return EntityTableRowDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbc", function() { return EntityTableComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵp", function() { return FlexibleComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵs", function() { return FormFieldSelectComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵu", function() { return FormFieldTextComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵv", function() { return FormFieldTextareaComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵq", function() { return FormFieldComponent$1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵw", function() { return FormGroupComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵx", function() { return FormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵt", function() { return FormFieldComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵr", function() { return FormFieldService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵy", function() { return FormService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbe", function() { return SecureImagePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbg", function() { return JsonDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbh", function() { return JsonDialogService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbf", function() { return KeyValuePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbi", function() { return ListItemDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbj", function() { return ListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbk", function() { return PanelComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbl", function() { return SidenavShimDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbm", function() { return SpinnerActivityDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbn", function() { return SpinnerComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵba", function() { return StopDropPropagationDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbb", function() { return StopPropagationDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbo", function() { return TableComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbr", function() { return ToolService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbq", function() { return toolSlideInOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbp", function() { return ToolboxComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbt", function() { return WidgetService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbs", function() { return WidgetOutletComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbu", function() { return WorkspaceWidgetOutletComponent; });
/* harmony import */ var _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/cdk/portal */ "./node_modules/@angular/cdk/esm5/portal.es5.js");
/* harmony import */ var _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/cdk/overlay */ "./node_modules/@angular/cdk/esm5/overlay.es5.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var typy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typy */ "./node_modules/typy/lib/index.js");
/* harmony import */ var typy__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typy__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_cdk_collections__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/cdk/collections */ "./node_modules/@angular/cdk/esm5/collections.es5.js");
/* harmony import */ var _angular_cdk_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/cdk/table */ "./node_modules/@angular/cdk/esm5/table.es5.js");
/* harmony import */ var _igo2_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @igo2/utils */ "./dist/igo-lib/utils/fesm5/igo2-utils.js");
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/animations */ "./node_modules/@angular/animations/fesm5/animations.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");


















/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var EntityOperationType = {
    Insert: 'Insert',
    Update: 'Update',
    Delete: 'Delete',
};
/** @enum {string} */
var EntityTableColumnRenderer = {
    Default: 'Default',
    HTML: 'HTML',
    UnsanitizedHTML: 'UnsanitizedHTML',
    Icon: 'Icon',
    ButtonGroup: 'ButtonGroup',
};
/** @enum {string} */
var EntityTableScrollBehavior = {
    Auto: 'auto',
    Instant: 'instant',
    Smooth: 'smooth',
};
/** @enum {string} */
var EntityTableSelectionState = {
    None: 'None',
    All: 'All',
    Some: 'Some',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Get an entity's named property. Nested properties are supported
 * with the dotted notation. (i.e 'author.name')
 *
 * Note: this method is a 'best attempt' at getting an entity's property.
 * It fits the most common cases but you might need to explicitely define
 * a property getter when using an EntityStore, for example.
 * @param {?} entity Entity
 * @param {?} property Property name
 * @return {?} Property value
 */
function getEntityProperty(entity, property) {
    return typy__WEBPACK_IMPORTED_MODULE_3___default()(entity, property).safeObject;
}
/**
 * Get an entity's id. An entity's id can be one of:
 * 'entity.meta.id', 'entity.meta.idProperty' or 'entity.id'.
 *
 * Note: See the note in the 'getEntityProperty' documentation.
 * @param {?} entity Entity
 * @return {?} Entity id
 */
function getEntityId(entity) {
    /** @type {?} */
    var meta = ((/** @type {?} */ (entity))).meta || {};
    return meta.id ? meta.id : getEntityProperty(entity, meta.idProperty || 'id');
}
/**
 * Get an entity's title. An entity's title can be one of:
 * 'entity.meta.title', 'entity.meta.titleProperty' or 'entity.title'.
 * @param {?} entity Entity
 * @return {?} Entity title
 */
function getEntityTitle(entity) {
    /** @type {?} */
    var meta = ((/** @type {?} */ (entity))).meta || {};
    return meta.title ? meta.title : getEntityProperty(entity, meta.titleProperty || 'title');
}
/**
 * Get an entity's HTML title. An entity's HTML title can be one of:
 * 'entity.meta.titleHtml', 'entity.meta.titleHtmlProperty' or 'entity.titleHtml'.
 * @param {?} entity Entity
 * @return {?} Entity HTML title
 */
function getEntityTitleHtml(entity) {
    /** @type {?} */
    var meta = ((/** @type {?} */ (entity))).meta || {};
    return meta.titleHtml ? meta.titleHtml : getEntityProperty(entity, meta.titleHtmlProperty || 'titleHtml');
}
/**
 * Get an entity's icon. An entity's icon can be one of:
 * 'entity.meta.icon', 'entity.meta.iconProperty' or 'entity.icon'.
 * @param {?} entity Entity
 * @return {?} Entity icon
 */
function getEntityIcon(entity) {
    /** @type {?} */
    var meta = ((/** @type {?} */ (entity))).meta || {};
    return meta.icon ? meta.icon : getEntityProperty(entity, meta.iconProperty || 'icon');
}
/**
 * Get an entity's revision.
 * @param {?} entity Entity
 * @return {?} Entity revision
 */
function getEntityRevision(entity) {
    /** @type {?} */
    var meta = ((/** @type {?} */ (entity))).meta || {};
    return meta.revision || 0;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This class is used to track a store's entities state
 * @template E, S
 */
var  /**
 * This class is used to track a store's entities state
 * @template E, S
 */
EntityStateManager = /** @class */ (function () {
    function EntityStateManager(options) {
        if (options === void 0) { options = {}; }
        /**
         * State index
         */
        this.index = new Map();
        /**
         * Change emitter
         */
        this.change$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["ReplaySubject"](1);
        this.store = options.store ? options.store : undefined;
        this.getKey = options.getKey
            ? options.getKey
            : (this.store ? this.store.getKey : getEntityId);
        this.next();
    }
    /**
     * Clear state
     */
    /**
     * Clear state
     * @return {?}
     */
    EntityStateManager.prototype.clear = /**
     * Clear state
     * @return {?}
     */
    function () {
        if (this.index.size > 0) {
            this.index.clear();
            this.next();
        }
    };
    /**
     * Get an entity's state
     * @param entity Entity
     * @returns State
     */
    /**
     * Get an entity's state
     * @param {?} entity Entity
     * @return {?} State
     */
    EntityStateManager.prototype.get = /**
     * Get an entity's state
     * @param {?} entity Entity
     * @return {?} State
     */
    function (entity) {
        return (/** @type {?} */ ((this.index.get(this.getKey(entity)) || {})));
    };
    /**
     * Set an entity's state
     * @param entity Entity
     * @param state State
     */
    /**
     * Set an entity's state
     * @param {?} entity Entity
     * @param {?} state State
     * @return {?}
     */
    EntityStateManager.prototype.set = /**
     * Set an entity's state
     * @param {?} entity Entity
     * @param {?} state State
     * @return {?}
     */
    function (entity, state$$1) {
        this.setMany([entity], state$$1);
    };
    /**
     * Set many entitie's state
     * @param entitie Entities
     * @param state State
     */
    /**
     * Set many entitie's state
     * @param {?} entities
     * @param {?} state State
     * @return {?}
     */
    EntityStateManager.prototype.setMany = /**
     * Set many entitie's state
     * @param {?} entities
     * @param {?} state State
     * @return {?}
     */
    function (entities, state$$1) {
        var _this = this;
        entities.forEach((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) {
            _this.index.set(_this.getKey(entity), Object.assign({}, state$$1));
        }));
        this.next();
    };
    /**
     * Set state of all entities that already have a state. This is not
     * the same as setting the state of all the store's entities.
     * @param state State
     */
    /**
     * Set state of all entities that already have a state. This is not
     * the same as setting the state of all the store's entities.
     * @param {?} state State
     * @return {?}
     */
    EntityStateManager.prototype.setAll = /**
     * Set state of all entities that already have a state. This is not
     * the same as setting the state of all the store's entities.
     * @param {?} state State
     * @return {?}
     */
    function (state$$1) {
        var _this = this;
        Array.from(this.index.keys()).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            _this.index.set(key, Object.assign({}, state$$1));
        }));
        this.next();
    };
    /**
     * Update an entity's state
     * @param entity Entity
     * @param changes State changes
     */
    /**
     * Update an entity's state
     * @param {?} entity Entity
     * @param {?} changes State changes
     * @param {?=} exclusive
     * @return {?}
     */
    EntityStateManager.prototype.update = /**
     * Update an entity's state
     * @param {?} entity Entity
     * @param {?} changes State changes
     * @param {?=} exclusive
     * @return {?}
     */
    function (entity, changes, exclusive) {
        if (exclusive === void 0) { exclusive = false; }
        this.updateMany([entity], changes, exclusive);
    };
    /**
     * Update many entitie's state
     * @param entitie Entities
     * @param changes State changes
     */
    /**
     * Update many entitie's state
     * @param {?} entities
     * @param {?} changes State changes
     * @param {?=} exclusive
     * @return {?}
     */
    EntityStateManager.prototype.updateMany = /**
     * Update many entitie's state
     * @param {?} entities
     * @param {?} changes State changes
     * @param {?=} exclusive
     * @return {?}
     */
    function (entities, changes, exclusive) {
        var _this = this;
        if (exclusive === void 0) { exclusive = false; }
        if (exclusive === true) {
            return this.updateManyExclusive(entities, changes);
        }
        entities.forEach((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) {
            /** @type {?} */
            var state$$1 = Object.assign({}, _this.get(entity), changes);
            _this.index.set(_this.getKey(entity), state$$1);
        }));
        this.next();
    };
    /**
     * Reversee an entity's state
     * @param entity Entity
     * @param keys State keys to reverse
     */
    /**
     * Reversee an entity's state
     * @param {?} entity Entity
     * @param {?} keys State keys to reverse
     * @return {?}
     */
    EntityStateManager.prototype.reverse = /**
     * Reversee an entity's state
     * @param {?} entity Entity
     * @param {?} keys State keys to reverse
     * @return {?}
     */
    function (entity, keys) {
        this.reverseMany([entity], keys);
    };
    /**
     * Reverse many entitie's state
     * @param entitie Entities
     * @param keys State keys to reverse
     */
    /**
     * Reverse many entitie's state
     * @param {?} entities
     * @param {?} keys State keys to reverse
     * @return {?}
     */
    EntityStateManager.prototype.reverseMany = /**
     * Reverse many entitie's state
     * @param {?} entities
     * @param {?} keys State keys to reverse
     * @return {?}
     */
    function (entities, keys) {
        var _this = this;
        entities.forEach((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) {
            /** @type {?} */
            var currentState = _this.get(entity);
            /** @type {?} */
            var changes = keys.reduce((/**
             * @param {?} acc
             * @param {?} key
             * @return {?}
             */
            function (acc, key) {
                acc[key] = currentState[key] || false;
                return acc;
            }), {});
            /** @type {?} */
            var reversedChanges = _this.reverseChanges(changes);
            /** @type {?} */
            var state$$1 = Object.assign({}, currentState, reversedChanges);
            _this.index.set(_this.getKey(entity), state$$1);
        }));
        this.next();
    };
    /**
     * Update state of all entities that already have a state. This is not
     * the same as updating the state of all the store's entities.
     * @param changes State
     */
    /**
     * Update state of all entities that already have a state. This is not
     * the same as updating the state of all the store's entities.
     * @param {?} changes State
     * @return {?}
     */
    EntityStateManager.prototype.updateAll = /**
     * Update state of all entities that already have a state. This is not
     * the same as updating the state of all the store's entities.
     * @param {?} changes State
     * @return {?}
     */
    function (changes) {
        var _this = this;
        /** @type {?} */
        var allKeys = this.getAllKeys();
        Array.from(allKeys).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            /** @type {?} */
            var state$$1 = Object.assign({}, _this.index.get(key), changes);
            _this.index.set(key, state$$1);
        }));
        this.next();
    };
    /**
     * When some state changes are flagged as 'exclusive', reverse
     * the state of all other entities. Changes are reversable when
     * they are boolean.
     * @param entitie Entities
     * @param changes State changes
     */
    /**
     * When some state changes are flagged as 'exclusive', reverse
     * the state of all other entities. Changes are reversable when
     * they are boolean.
     * @private
     * @param {?} entities
     * @param {?} changes State changes
     * @return {?}
     */
    EntityStateManager.prototype.updateManyExclusive = /**
     * When some state changes are flagged as 'exclusive', reverse
     * the state of all other entities. Changes are reversable when
     * they are boolean.
     * @private
     * @param {?} entities
     * @param {?} changes State changes
     * @return {?}
     */
    function (entities, changes) {
        var _this = this;
        /** @type {?} */
        var reverseChanges = this.reverseChanges(changes);
        /** @type {?} */
        var keys = entities.map((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) { return _this.getKey(entity); }));
        /** @type {?} */
        var allKeys = new Set(keys.concat(Array.from(this.getAllKeys())));
        allKeys.forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            /** @type {?} */
            var state$$1 = _this.index.get(key) || (/** @type {?} */ ({}));
            if (keys.indexOf(key) >= 0) {
                _this.index.set(key, Object.assign({}, state$$1, changes));
            }
            else {
                _this.index.set(key, Object.assign({}, state$$1, reverseChanges));
            }
        }));
        this.next();
    };
    /**
     * Compute a 'reversed' version of some state changes.
     * Changes are reversable when they are boolean.
     * @param changes State changes
     * @returns Reversed state changes
     */
    /**
     * Compute a 'reversed' version of some state changes.
     * Changes are reversable when they are boolean.
     * @private
     * @param {?} changes State changes
     * @return {?} Reversed state changes
     */
    EntityStateManager.prototype.reverseChanges = /**
     * Compute a 'reversed' version of some state changes.
     * Changes are reversable when they are boolean.
     * @private
     * @param {?} changes State changes
     * @return {?} Reversed state changes
     */
    function (changes) {
        return Object.entries(changes).reduce((/**
         * @param {?} reverseChanges
         * @param {?} bunch
         * @return {?}
         */
        function (reverseChanges, bunch) {
            var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__read"])(bunch, 2), changeKey = _a[0], value = _a[1];
            if (typeof value === typeof true) {
                reverseChanges[changeKey] = !value;
            }
            return reverseChanges;
        }), {});
    };
    /**
     * Return all the keys in that state and in the store it's bound to, if any.
     * @returns Set of keys
     */
    /**
     * Return all the keys in that state and in the store it's bound to, if any.
     * @private
     * @return {?} Set of keys
     */
    EntityStateManager.prototype.getAllKeys = /**
     * Return all the keys in that state and in the store it's bound to, if any.
     * @private
     * @return {?} Set of keys
     */
    function () {
        /** @type {?} */
        var storeKeys = this.store ? Array.from(this.store.index.keys()) : [];
        return new Set(Array.from(this.index.keys()).concat(storeKeys));
    };
    /**
     * Emit 'change' event
     */
    /**
     * Emit 'change' event
     * @private
     * @return {?}
     */
    EntityStateManager.prototype.next = /**
     * Emit 'change' event
     * @private
     * @return {?}
     */
    function () {
        this.change$.next();
    };
    return EntityStateManager;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * An entity view streams entities from an observable source. These entities
 * can be filtered or sorted without affecting the source. A view can also
 * combine data from multiple sources, joined together.
 * @template E, V
 */
var  /**
 * An entity view streams entities from an observable source. These entities
 * can be filtered or sorted without affecting the source. A view can also
 * combine data from multiple sources, joined together.
 * @template E, V
 */
EntityView = /** @class */ (function () {
    function EntityView(source$) {
        this.source$ = source$;
        /**
         * Observable stream of values
         */
        this.values$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]([]);
        /**
         * Whether this view has been lifted
         */
        this.lifted = false;
        /**
         * Join clauses
         */
        this.joins = [];
        /**
         * Observable of a filter clause
         */
        this.filter$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        /**
         * Observable of a sort clause
         */
        this.sort$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        /**
         * Number of entities
         */
        this.count$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](0);
        /**
         * Whether the store is empty
         */
        this.empty$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](true);
    }
    Object.defineProperty(EntityView.prototype, "count", {
        get: /**
         * @return {?}
         */
        function () { return this.count$.value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityView.prototype, "empty", {
        get: /**
         * @return {?}
         */
        function () { return this.empty$.value; },
        enumerable: true,
        configurable: true
    });
    /**
     * Get all the values
     * @returns Array of values
     */
    /**
     * Get all the values
     * @return {?} Array of values
     */
    EntityView.prototype.all = /**
     * Get all the values
     * @return {?} Array of values
     */
    function () {
        return this.values$.value;
    };
    /**
     * Observe all the values
     * @returns Observable of values
     */
    /**
     * Observe all the values
     * @return {?} Observable of values
     */
    EntityView.prototype.all$ = /**
     * Observe all the values
     * @return {?} Observable of values
     */
    function () {
        return this.values$;
    };
    /**
     * Get the first value that respects a criteria
     * @returns A value
     */
    /**
     * Get the first value that respects a criteria
     * @param {?} clause
     * @return {?} A value
     */
    EntityView.prototype.firstBy = /**
     * Get the first value that respects a criteria
     * @param {?} clause
     * @return {?} A value
     */
    function (clause) {
        return this.values$.value.find(clause);
    };
    /**
     * Observe the first value that respects a criteria
     * @returns Observable of a value
     */
    /**
     * Observe the first value that respects a criteria
     * @param {?} clause
     * @return {?} Observable of a value
     */
    EntityView.prototype.firstBy$ = /**
     * Observe the first value that respects a criteria
     * @param {?} clause
     * @return {?} Observable of a value
     */
    function (clause) {
        return this.values$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["map"])((/**
         * @param {?} values
         * @return {?}
         */
        function (values) { return values.find(clause); })));
    };
    /**
     * Get all the values that respect a criteria
     * @returns Array of values
     */
    /**
     * Get all the values that respect a criteria
     * @param {?} clause
     * @return {?} Array of values
     */
    EntityView.prototype.manyBy = /**
     * Get all the values that respect a criteria
     * @param {?} clause
     * @return {?} Array of values
     */
    function (clause) {
        return this.values$.value.filter(clause);
    };
    /**
     * Observe all the values that respect a criteria
     * @returns Observable of values
     */
    /**
     * Observe all the values that respect a criteria
     * @param {?} clause
     * @return {?} Observable of values
     */
    EntityView.prototype.manyBy$ = /**
     * Observe all the values that respect a criteria
     * @param {?} clause
     * @return {?} Observable of values
     */
    function (clause) {
        return this.values$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["map"])((/**
         * @param {?} values
         * @return {?}
         */
        function (values) { return values.filter(clause); })));
    };
    /**
     * Clear the filter and sort and unsubscribe from the source
     */
    /**
     * Clear the filter and sort and unsubscribe from the source
     * @return {?}
     */
    EntityView.prototype.clear = /**
     * Clear the filter and sort and unsubscribe from the source
     * @return {?}
     */
    function () {
        this.filter(undefined);
        this.sort(undefined);
    };
    /**
     * @return {?}
     */
    EntityView.prototype.destroy = /**
     * @return {?}
     */
    function () {
        if (this.values$$ !== undefined) {
            this.values$$.unsubscribe();
        }
        this.clear();
    };
    /**
     * Join another source to the stream (chainable)
     * @param clause Join clause
     * @returns The view
     */
    /**
     * Join another source to the stream (chainable)
     * @param {?} clause Join clause
     * @return {?} The view
     */
    EntityView.prototype.join = /**
     * Join another source to the stream (chainable)
     * @param {?} clause Join clause
     * @return {?} The view
     */
    function (clause) {
        if (this.lifted === true) {
            throw new Error('This view has already been lifted, therefore, no join is allowed.');
        }
        this.joins.push(clause);
        return this;
    };
    /**
     * Filter values (chainable)
     * @param clause Filter clause
     * @returns The view
     */
    /**
     * Filter values (chainable)
     * @param {?} clause Filter clause
     * @return {?} The view
     */
    EntityView.prototype.filter = /**
     * Filter values (chainable)
     * @param {?} clause Filter clause
     * @return {?} The view
     */
    function (clause) {
        this.filter$.next(clause);
        return this;
    };
    /**
     * Sort values (chainable)
     * @param clauseSort clause
     * @returns The view
     */
    /**
     * Sort values (chainable)
     * @param {?} clause
     * @return {?} The view
     */
    EntityView.prototype.sort = /**
     * Sort values (chainable)
     * @param {?} clause
     * @return {?} The view
     */
    function (clause) {
        this.sort$.next(clause);
        return this;
    };
    /**
     * Create the final observable
     * @returns Observable
     */
    /**
     * Create the final observable
     * @return {?} Observable
     */
    EntityView.prototype.lift = /**
     * Create the final observable
     * @return {?} Observable
     */
    function () {
        var _this = this;
        this.lifted = true;
        /** @type {?} */
        var source$ = this.joins.length > 0 ? this.liftJoinedSource() : this.liftSource();
        this.values$$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_14__["combineLatest"])(source$, this.filter$, this.sort$)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["skip"])(1), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["debounceTime"])(25))
            .subscribe((/**
         * @param {?} bunch
         * @return {?}
         */
        function (bunch) {
            var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__read"])(bunch, 3), _values = _a[0], filter$$1 = _a[1], sort = _a[2];
            /** @type {?} */
            var values = _this.processValues(_values, filter$$1, sort);
            _this.setValues(values);
        }));
    };
    /**
     * Create the source observable when no joins are defined
     * @returns Observable
     */
    /**
     * Create the source observable when no joins are defined
     * @private
     * @return {?} Observable
     */
    EntityView.prototype.liftSource = /**
     * Create the source observable when no joins are defined
     * @private
     * @return {?} Observable
     */
    function () {
        return (/** @type {?} */ ((/** @type {?} */ (this.source$))));
    };
    /**
     * Create the source observable when joins are defined
     * @returns Observable
     */
    /**
     * Create the source observable when joins are defined
     * @private
     * @return {?} Observable
     */
    EntityView.prototype.liftJoinedSource = /**
     * Create the source observable when joins are defined
     * @private
     * @return {?} Observable
     */
    function () {
        var _this = this;
        /** @type {?} */
        var sources$ = [this.source$, rxjs__WEBPACK_IMPORTED_MODULE_14__["combineLatest"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__spread"])(this.joins.map((/**
             * @param {?} join
             * @return {?}
             */
            function (join) { return join.source; }))))];
        return rxjs__WEBPACK_IMPORTED_MODULE_14__["combineLatest"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__spread"])(sources$)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["map"])((/**
         * @param {?} bunch
         * @return {?}
         */
        function (bunch) {
            var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__read"])(bunch, 2), entities = _a[0], joinData = _a[1];
            return entities.reduce((/**
             * @param {?} values
             * @param {?} entity
             * @return {?}
             */
            function (values, entity) {
                /** @type {?} */
                var value = _this.computeJoinedValue(entity, joinData);
                if (value !== undefined) {
                    values.push(value);
                }
                return values;
            }), []);
        })));
    };
    /**
     * Apply joins to a source's entity and return the final value
     * @returns Final value
     */
    /**
     * Apply joins to a source's entity and return the final value
     * @private
     * @param {?} entity
     * @param {?} joinData
     * @return {?} Final value
     */
    EntityView.prototype.computeJoinedValue = /**
     * Apply joins to a source's entity and return the final value
     * @private
     * @param {?} entity
     * @param {?} joinData
     * @return {?} Final value
     */
    function (entity, joinData) {
        /** @type {?} */
        var value = (/** @type {?} */ (entity));
        /** @type {?} */
        var joinIndex = 0;
        while (value !== undefined && joinIndex < this.joins.length) {
            value = this.joins[joinIndex].reduce(value, joinData[joinIndex]);
            joinIndex += 1;
        }
        return (/** @type {?} */ (value));
    };
    /**
     * Filter and sort values before streaming them
     * @param values Values
     * @param filter Filter clause
     * @param sort Sort clause
     * @returns Filtered and sorted values
     */
    /**
     * Filter and sort values before streaming them
     * @private
     * @param {?} values Values
     * @param {?} filter Filter clause
     * @param {?} sort Sort clause
     * @return {?} Filtered and sorted values
     */
    EntityView.prototype.processValues = /**
     * Filter and sort values before streaming them
     * @private
     * @param {?} values Values
     * @param {?} filter Filter clause
     * @param {?} sort Sort clause
     * @return {?} Filtered and sorted values
     */
    function (values, filter$$1, sort) {
        values = values.slice(0);
        values = this.filterValues(values, filter$$1);
        values = this.sortValues(values, sort);
        return values;
    };
    /**
     * Filter values
     * @param values Values
     * @param filter Filter clause
     * @returns Filtered values
     */
    /**
     * Filter values
     * @private
     * @param {?} values Values
     * @param {?} clause
     * @return {?} Filtered values
     */
    EntityView.prototype.filterValues = /**
     * Filter values
     * @private
     * @param {?} values Values
     * @param {?} clause
     * @return {?} Filtered values
     */
    function (values, clause) {
        if (clause === undefined) {
            return values;
        }
        return values.filter((/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return clause(value); }));
    };
    /**
     * Sort values
     * @param values Values
     * @param sort Sort clause
     * @returns Sorted values
     */
    /**
     * Sort values
     * @private
     * @param {?} values Values
     * @param {?} clause
     * @return {?} Sorted values
     */
    EntityView.prototype.sortValues = /**
     * Sort values
     * @private
     * @param {?} values Values
     * @param {?} clause
     * @return {?} Sorted values
     */
    function (values, clause) {
        if (clause === undefined) {
            return values;
        }
        return values.sort((/**
         * @param {?} v1
         * @param {?} v2
         * @return {?}
         */
        function (v1, v2) {
            return _igo2_utils__WEBPACK_IMPORTED_MODULE_10__["ObjectUtils"].naturalCompare(clause.valueAccessor(v1), clause.valueAccessor(v2), clause.direction);
        }));
    };
    /**
     * @private
     * @param {?} values
     * @return {?}
     */
    EntityView.prototype.setValues = /**
     * @private
     * @param {?} values
     * @return {?}
     */
    function (values) {
        this.values$.next(values);
        /** @type {?} */
        var count = values.length;
        /** @type {?} */
        var empty = count === 0;
        this.count$.next(count);
        this.empty$.next(empty);
    };
    return EntityView;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * An entity store class holds any number of entities
 * as well as their state. It can be observed, filtered and sorted and
 * provides methods to insert, update or delete entities.
 * @template E, S
 */
var  /**
 * An entity store class holds any number of entities
 * as well as their state. It can be observed, filtered and sorted and
 * provides methods to insert, update or delete entities.
 * @template E, S
 */
EntityStore = /** @class */ (function () {
    function EntityStore(entities, options) {
        if (options === void 0) { options = {}; }
        var _this = this;
        /**
         * Observable of the raw entities
         */
        this.entities$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]([]);
        /**
         * Number of entities
         */
        this.count$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](0);
        /**
         * Whether the store is empty
         */
        this.empty$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](true);
        this._pristine = true;
        this.getKey = options.getKey ? options.getKey : getEntityId;
        this.getProperty = options.getProperty ? options.getProperty : getEntityProperty;
        this.state = new EntityStateManager({ store: this });
        this.view = new EntityView(this.entities$);
        this.stateView = new EntityView(this.view.all$()).join({
            source: this.state.change$,
            reduce: (/**
             * @param {?} entity
             * @return {?}
             */
            function (entity) {
                return { entity: entity, state: _this.state.get(entity) };
            })
        });
        this.view.lift();
        this.stateView.lift();
        if (entities.length > 0) {
            this.load(entities);
        }
        else {
            this._index = this.generateIndex(entities);
        }
    }
    Object.defineProperty(EntityStore.prototype, "count", {
        get: /**
         * @return {?}
         */
        function () { return this.count$.value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityStore.prototype, "empty", {
        get: /**
         * @return {?}
         */
        function () { return this.empty$.value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityStore.prototype, "index", {
        /**
         * Store index
         */
        get: /**
         * Store index
         * @return {?}
         */
        function () { return this._index; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityStore.prototype, "pristine", {
        /**
         * Store index
         */
        get: /**
         * Store index
         * @return {?}
         */
        function () { return this._pristine; },
        enumerable: true,
        configurable: true
    });
    /**
     * Get an entity from the store by key
     * @param key Key
     * @returns Entity
     */
    /**
     * Get an entity from the store by key
     * @param {?} key Key
     * @return {?} Entity
     */
    EntityStore.prototype.get = /**
     * Get an entity from the store by key
     * @param {?} key Key
     * @return {?} Entity
     */
    function (key) {
        return this.index.get(key);
    };
    /**
     * Get all entities in the store
     * @returns Array of entities
     */
    /**
     * Get all entities in the store
     * @return {?} Array of entities
     */
    EntityStore.prototype.all = /**
     * Get all entities in the store
     * @return {?} Array of entities
     */
    function () {
        return this.entities$.value;
    };
    /**
     * Set this store's entities
     * @param entities Entities
     */
    /**
     * Set this store's entities
     * @param {?} entities Entities
     * @param {?=} pristine
     * @return {?}
     */
    EntityStore.prototype.load = /**
     * Set this store's entities
     * @param {?} entities Entities
     * @param {?=} pristine
     * @return {?}
     */
    function (entities, pristine) {
        if (pristine === void 0) { pristine = true; }
        this._index = this.generateIndex(entities);
        this._pristine = pristine;
        this.next();
    };
    /**
     * Clear the store's entities but keep the state and views intact.
     * Views won't return any data but future data will be subject to the
     * current views filter and sort
     */
    /**
     * Clear the store's entities but keep the state and views intact.
     * Views won't return any data but future data will be subject to the
     * current views filter and sort
     * @return {?}
     */
    EntityStore.prototype.softClear = /**
     * Clear the store's entities but keep the state and views intact.
     * Views won't return any data but future data will be subject to the
     * current views filter and sort
     * @return {?}
     */
    function () {
        if (this.index && this.index.size > 0) {
            this.index.clear();
            this._pristine = true;
            this.next();
        }
        else if (this.index) {
            this.updateCount();
        }
    };
    /**
     * Clear the store's entities, state and views
     */
    /**
     * Clear the store's entities, state and views
     * @return {?}
     */
    EntityStore.prototype.clear = /**
     * Clear the store's entities, state and views
     * @return {?}
     */
    function () {
        this.stateView.clear();
        this.view.clear();
        this.state.clear();
        this.softClear();
    };
    /**
     * @return {?}
     */
    EntityStore.prototype.destroy = /**
     * @return {?}
     */
    function () {
        this.stateView.destroy();
        this.view.destroy();
        this.clear();
    };
    /**
     * Insert an entity into the store
     * @param entity Entity
     */
    /**
     * Insert an entity into the store
     * @param {?} entity Entity
     * @return {?}
     */
    EntityStore.prototype.insert = /**
     * Insert an entity into the store
     * @param {?} entity Entity
     * @return {?}
     */
    function (entity) {
        this.insertMany([entity]);
    };
    /**
     * Insert many entities into the store
     * @param entities Entities
     */
    /**
     * Insert many entities into the store
     * @param {?} entities Entities
     * @return {?}
     */
    EntityStore.prototype.insertMany = /**
     * Insert many entities into the store
     * @param {?} entities Entities
     * @return {?}
     */
    function (entities) {
        var _this = this;
        entities.forEach((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) { return _this.index.set(_this.getKey(entity), entity); }));
        this._pristine = false;
        this.next();
    };
    /**
     * Update or insert an entity into the store
     * @param entity Entity
     */
    /**
     * Update or insert an entity into the store
     * @param {?} entity Entity
     * @return {?}
     */
    EntityStore.prototype.update = /**
     * Update or insert an entity into the store
     * @param {?} entity Entity
     * @return {?}
     */
    function (entity) {
        this.updateMany([entity]);
    };
    /**
     * Update or insert many entities into the store
     * @param entities Entities
     */
    /**
     * Update or insert many entities into the store
     * @param {?} entities Entities
     * @return {?}
     */
    EntityStore.prototype.updateMany = /**
     * Update or insert many entities into the store
     * @param {?} entities Entities
     * @return {?}
     */
    function (entities) {
        var _this = this;
        entities.forEach((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) { return _this.index.set(_this.getKey(entity), entity); }));
        this._pristine = false;
        this.next();
    };
    /**
     * Delete an entity from the store
     * @param entity Entity
     */
    /**
     * Delete an entity from the store
     * @param {?} entity Entity
     * @return {?}
     */
    EntityStore.prototype.delete = /**
     * Delete an entity from the store
     * @param {?} entity Entity
     * @return {?}
     */
    function (entity) {
        this.deleteMany([entity]);
    };
    /**
     * Delete many entities from the store
     * @param entities Entities
     */
    /**
     * Delete many entities from the store
     * @param {?} entities Entities
     * @return {?}
     */
    EntityStore.prototype.deleteMany = /**
     * Delete many entities from the store
     * @param {?} entities Entities
     * @return {?}
     */
    function (entities) {
        var _this = this;
        entities.forEach((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) { return _this.index.delete(_this.getKey(entity)); }));
        this._pristine = false;
        this.next();
    };
    /**
     * Generate a complete index of all the entities
     * @param entities Entities
     * @returns Index
     */
    /**
     * Generate a complete index of all the entities
     * @private
     * @param {?} entities Entities
     * @return {?} Index
     */
    EntityStore.prototype.generateIndex = /**
     * Generate a complete index of all the entities
     * @private
     * @param {?} entities Entities
     * @return {?} Index
     */
    function (entities) {
        var _this = this;
        /** @type {?} */
        var entries = entities.map((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) { return [_this.getKey(entity), entity]; }));
        return new Map((/** @type {?} */ (entries)));
    };
    /**
     * Push the index's entities into the entities$ observable
     */
    /**
     * Push the index's entities into the entities$ observable
     * @private
     * @return {?}
     */
    EntityStore.prototype.next = /**
     * Push the index's entities into the entities$ observable
     * @private
     * @return {?}
     */
    function () {
        this.entities$.next(Array.from(this.index.values()));
        this.updateCount();
    };
    /**
     * Update the store's count and empty
     */
    /**
     * Update the store's count and empty
     * @private
     * @return {?}
     */
    EntityStore.prototype.updateCount = /**
     * Update the store's count and empty
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var count = this.index.size;
        /** @type {?} */
        var empty = count === 0;
        this.count$.next(count);
        this.empty$.next(empty);
    };
    return EntityStore;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This class is used to synchronize a component's changes
 * detection with an EntityStore changes. For example, it is frequent
 * to have a component subscribe to a store's selected entity and, at the same time,
 * this component provides a way to select an entity with, let's say, a click.
 *
 * This class automatically handles those case and triggers the compoent's
 * change detection when needed.
 *
 * Note: If the component observes the store's stateView, a workspace is
 * probably not required because the stateView catches any changes to the
 * entities and their state.
 * @template E
 */
var  /**
 * This class is used to synchronize a component's changes
 * detection with an EntityStore changes. For example, it is frequent
 * to have a component subscribe to a store's selected entity and, at the same time,
 * this component provides a way to select an entity with, let's say, a click.
 *
 * This class automatically handles those case and triggers the compoent's
 * change detection when needed.
 *
 * Note: If the component observes the store's stateView, a workspace is
 * probably not required because the stateView catches any changes to the
 * entities and their state.
 * @template E
 */
EntityStoreWatcher = /** @class */ (function () {
    function EntityStoreWatcher(store, cdRef) {
        /**
         * Component inner state
         */
        this.innerStateIndex = new Map();
        this.setChangeDetector(cdRef);
        this.setStore(store);
    }
    /**
     * @return {?}
     */
    EntityStoreWatcher.prototype.destroy = /**
     * @return {?}
     */
    function () {
        this.setChangeDetector(undefined);
        this.setStore(undefined);
    };
    /**
     * Bind this workspace to a store and start watching for changes
     * @param store Entity store
     */
    /**
     * Bind this workspace to a store and start watching for changes
     * @param {?=} store Entity store
     * @return {?}
     */
    EntityStoreWatcher.prototype.setStore = /**
     * Bind this workspace to a store and start watching for changes
     * @param {?=} store Entity store
     * @return {?}
     */
    function (store) {
        if (store === undefined) {
            this.teardownObservers();
            this.innerStateIndex.clear();
            this.store = undefined;
            return;
        }
        this.setStore(undefined);
        this.store = store;
        this.setupObservers();
        this.detectChanges();
    };
    /**
     * Bind this workspace to a component's change detector
     * @param cdRef Change detector
     */
    /**
     * Bind this workspace to a component's change detector
     * @param {?=} cdRef Change detector
     * @return {?}
     */
    EntityStoreWatcher.prototype.setChangeDetector = /**
     * Bind this workspace to a component's change detector
     * @param {?=} cdRef Change detector
     * @return {?}
     */
    function (cdRef) {
        this.cdRef = cdRef;
    };
    /**
     * Set up observers on a store's entities and their state
     * @param store Entity store
     */
    /**
     * Set up observers on a store's entities and their state
     * @private
     * @return {?}
     */
    EntityStoreWatcher.prototype.setupObservers = /**
     * Set up observers on a store's entities and their state
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.teardownObservers();
        this.entities$$ = this.store.entities$
            .subscribe((/**
         * @param {?} entities
         * @return {?}
         */
        function (entities) { return _this.onEntitiesChange(entities); }));
        this.state$$ = this.store.state.change$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["skip"])(1))
            .subscribe((/**
         * @return {?}
         */
        function () { return _this.onStateChange(); }));
    };
    /**
     * Teardown store observers
     */
    /**
     * Teardown store observers
     * @private
     * @return {?}
     */
    EntityStoreWatcher.prototype.teardownObservers = /**
     * Teardown store observers
     * @private
     * @return {?}
     */
    function () {
        if (this.entities$$ !== undefined) {
            this.entities$$.unsubscribe();
        }
        if (this.state$$ !== undefined) {
            this.state$$.unsubscribe();
        }
        this.entities$$ = undefined;
        this.state$$ = undefined;
    };
    /**
     * When the entities change, always trigger the changes detection
     */
    /**
     * When the entities change, always trigger the changes detection
     * @private
     * @param {?} entities
     * @return {?}
     */
    EntityStoreWatcher.prototype.onEntitiesChange = /**
     * When the entities change, always trigger the changes detection
     * @private
     * @param {?} entities
     * @return {?}
     */
    function (entities) {
        this.detectChanges();
    };
    /**
     * When the entities state change, trigger the change detection
     * only if the component has not handled these changes yet. For example,
     * the component might have initiated thoses changes itself.
     */
    /**
     * When the entities state change, trigger the change detection
     * only if the component has not handled these changes yet. For example,
     * the component might have initiated thoses changes itself.
     * @private
     * @return {?}
     */
    EntityStoreWatcher.prototype.onStateChange = /**
     * When the entities state change, trigger the change detection
     * only if the component has not handled these changes yet. For example,
     * the component might have initiated thoses changes itself.
     * @private
     * @return {?}
     */
    function () {
        var e_1, _a;
        /** @type {?} */
        var changesDetected = false;
        /** @type {?} */
        var storeIndex = this.store.state.index;
        /** @type {?} */
        var innerIndex = this.innerStateIndex;
        if (storeIndex.size !== innerIndex.size) {
            changesDetected = this.detectChanges();
        }
        /** @type {?} */
        var storeKeys = Array.from(storeIndex.keys());
        try {
            for (var storeKeys_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__values"])(storeKeys), storeKeys_1_1 = storeKeys_1.next(); !storeKeys_1_1.done; storeKeys_1_1 = storeKeys_1.next()) {
                var key = storeKeys_1_1.value;
                /** @type {?} */
                var storeValue = storeIndex.get(key);
                /** @type {?} */
                var innerValue = innerIndex.get(key);
                if (changesDetected === false) {
                    if (innerValue === undefined) {
                        changesDetected = this.detectChanges();
                    }
                    else if (!_igo2_utils__WEBPACK_IMPORTED_MODULE_10__["ObjectUtils"].objectsAreEquivalent(storeValue, innerValue)) {
                        changesDetected = this.detectChanges();
                    }
                }
                this.innerStateIndex.set(key, Object.assign({}, storeValue));
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (storeKeys_1_1 && !storeKeys_1_1.done && (_a = storeKeys_1.return)) _a.call(storeKeys_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    /**
     * Trigger the change detection of the workspace is bound to a change detector
     */
    /**
     * Trigger the change detection of the workspace is bound to a change detector
     * @private
     * @return {?}
     */
    EntityStoreWatcher.prototype.detectChanges = /**
     * Trigger the change detection of the workspace is bound to a change detector
     * @private
     * @return {?}
     */
    function () {
        if (this.cdRef !== undefined) {
            this.cdRef.detectChanges();
        }
        return true;
    };
    return EntityStoreWatcher;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This class holds a reference to the insert, update and delete
 * operations performed on a store. This is useful to commit
 * these operations in a single pass or to cancel them.
 */
var  /**
 * This class holds a reference to the insert, update and delete
 * operations performed on a store. This is useful to commit
 * these operations in a single pass or to cancel them.
 */
EntityTransaction = /** @class */ (function () {
    function EntityTransaction(options) {
        if (options === void 0) { options = {}; }
        this._inCommitPhase = false;
        this.getKey = options.getKey ? options.getKey : getEntityId;
        this.operations = new EntityStore([], {
            getKey: (/**
             * @param {?} operation
             * @return {?}
             */
            function (operation) { return operation.key; })
        });
    }
    Object.defineProperty(EntityTransaction.prototype, "empty", {
        /**
         * Whether there are pending operations
         */
        get: /**
         * Whether there are pending operations
         * @return {?}
         */
        function () { return this.operations.entities$.value.length === 0; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityTransaction.prototype, "inCommitPhase", {
        /**
         * Whether thise store is in commit phase
         */
        get: /**
         * Whether thise store is in commit phase
         * @return {?}
         */
        function () { return this._inCommitPhase; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    EntityTransaction.prototype.destroy = /**
     * @return {?}
     */
    function () {
        this.operations.destroy();
    };
    /**
     * Insert an entity into a store. If no store is specified, an insert
     * operation is still created but the transaction won't add the new
     * entity to the store.
     * @param current The entity to insert
     * @param store Optional: The store to insert the entity into
     * @param meta Optional: Any metadata on the operation
     */
    /**
     * Insert an entity into a store. If no store is specified, an insert
     * operation is still created but the transaction won't add the new
     * entity to the store.
     * @param {?} current The entity to insert
     * @param {?=} store Optional: The store to insert the entity into
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    EntityTransaction.prototype.insert = /**
     * Insert an entity into a store. If no store is specified, an insert
     * operation is still created but the transaction won't add the new
     * entity to the store.
     * @param {?} current The entity to insert
     * @param {?=} store Optional: The store to insert the entity into
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    function (current, store, meta) {
        /** @type {?} */
        var existingOperation = this.getOperationByEntity(current);
        if (existingOperation !== undefined) {
            this.removeOperation(existingOperation);
        }
        this.doInsert(current, store, meta);
    };
    /**
     * Update an entity in a store. If no store is specified, an update
     * operation is still created but the transaction won't update the
     * entity into the store.
     * @param previous The entity before update
     * @param current The entity after update
     * @param store Optional: The store to update the entity into
     * @param meta Optional: Any metadata on the operation
     */
    /**
     * Update an entity in a store. If no store is specified, an update
     * operation is still created but the transaction won't update the
     * entity into the store.
     * @param {?} previous The entity before update
     * @param {?} current The entity after update
     * @param {?=} store Optional: The store to update the entity into
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    EntityTransaction.prototype.update = /**
     * Update an entity in a store. If no store is specified, an update
     * operation is still created but the transaction won't update the
     * entity into the store.
     * @param {?} previous The entity before update
     * @param {?} current The entity after update
     * @param {?=} store Optional: The store to update the entity into
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    function (previous, current, store, meta) {
        /** @type {?} */
        var existingOperation = this.getOperationByEntity(current);
        if (existingOperation !== undefined) {
            this.removeOperation(existingOperation);
            if (existingOperation.type === EntityOperationType.Insert) {
                this.doInsert(current, store, meta);
                return;
            }
        }
        this.doUpdate(previous, current, store, meta);
    };
    /**
     * Delete an entity from a store. If no store is specified, a delete
     * operation is still created but the transaction won't remove the
     * entity from the store.
     * @param previous The entity before delete
     * @param store Optional: The store to delete the entity from
     * @param meta Optional: Any metadata on the operation
     */
    /**
     * Delete an entity from a store. If no store is specified, a delete
     * operation is still created but the transaction won't remove the
     * entity from the store.
     * @param {?} previous The entity before delete
     * @param {?=} store Optional: The store to delete the entity from
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    EntityTransaction.prototype.delete = /**
     * Delete an entity from a store. If no store is specified, a delete
     * operation is still created but the transaction won't remove the
     * entity from the store.
     * @param {?} previous The entity before delete
     * @param {?=} store Optional: The store to delete the entity from
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    function (previous, store, meta) {
        /** @type {?} */
        var existingOperation = this.getOperationByEntity(previous);
        if (existingOperation !== undefined) {
            this.removeOperation(existingOperation);
            if (existingOperation.type === EntityOperationType.Insert) {
                if (store !== undefined) {
                    store.delete(previous);
                }
                return;
            }
        }
        this.doDelete(previous, store, meta);
    };
    /**
     * Commit operations the transaction. This method doesn't do much
     * in itself. The handler it receives does the hard work and it's
     * implementation is left to the caller. This method simply wraps
     * the handler into an error catching mechanism to update
     * the transaction afterward. The caller needs to subscribe to this
     * method's output (observable) for the commit to be performed.
     * @param operations Operations to commit
     * @param handler Function that handles the commit operation
     * @returns The handler output (observable)
     */
    /**
     * Commit operations the transaction. This method doesn't do much
     * in itself. The handler it receives does the hard work and it's
     * implementation is left to the caller. This method simply wraps
     * the handler into an error catching mechanism to update
     * the transaction afterward. The caller needs to subscribe to this
     * method's output (observable) for the commit to be performed.
     * @param {?} operations Operations to commit
     * @param {?} handler Function that handles the commit operation
     * @return {?} The handler output (observable)
     */
    EntityTransaction.prototype.commit = /**
     * Commit operations the transaction. This method doesn't do much
     * in itself. The handler it receives does the hard work and it's
     * implementation is left to the caller. This method simply wraps
     * the handler into an error catching mechanism to update
     * the transaction afterward. The caller needs to subscribe to this
     * method's output (observable) for the commit to be performed.
     * @param {?} operations Operations to commit
     * @param {?} handler Function that handles the commit operation
     * @return {?} The handler output (observable)
     */
    function (operations, handler) {
        var _this = this;
        this._inCommitPhase = true;
        return handler(this, operations)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["catchError"])((/**
         * @return {?}
         */
        function () { return Object(rxjs__WEBPACK_IMPORTED_MODULE_14__["of"])(new Error()); })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["tap"])((/**
         * @param {?} result
         * @return {?}
         */
        function (result) {
            if (result instanceof Error) {
                _this.onCommitError(operations);
            }
            else {
                _this.onCommitSuccess(operations);
            }
        })));
    };
    /**
     * Commit all the operations of the transaction.
     * @param handler Function that handles the commit operation
     * @returns The handler output (observable)
     */
    /**
     * Commit all the operations of the transaction.
     * @param {?} handler Function that handles the commit operation
     * @return {?} The handler output (observable)
     */
    EntityTransaction.prototype.commitAll = /**
     * Commit all the operations of the transaction.
     * @param {?} handler Function that handles the commit operation
     * @return {?} The handler output (observable)
     */
    function (handler) {
        /** @type {?} */
        var operations = this.getOperationsInCommit();
        return this.commit(operations, handler);
    };
    /**
     * Rollback this transaction
     */
    /**
     * Rollback this transaction
     * @return {?}
     */
    EntityTransaction.prototype.rollback = /**
     * Rollback this transaction
     * @return {?}
     */
    function () {
        this.rollbackOperations(this.operations.all());
    };
    /**
     * Rollback specific operations
     */
    /**
     * Rollback specific operations
     * @param {?} operations
     * @return {?}
     */
    EntityTransaction.prototype.rollbackOperations = /**
     * Rollback specific operations
     * @param {?} operations
     * @return {?}
     */
    function (operations) {
        var e_1, _a;
        this.checkInCommitPhase();
        /** @type {?} */
        var operationsFactory = (/**
         * @return {?}
         */
        function () { return new Map([
            [EntityOperationType.Delete, []],
            [EntityOperationType.Update, []],
            [EntityOperationType.Insert, []]
        ]); });
        /** @type {?} */
        var storesOperations = new Map();
        try {
            // Group operations by store and by operation type.
            // Grouping operations allows us to revert them in bacth, thus, triggering
            // observables only one per operation type.
            for (var operations_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__values"])(operations), operations_1_1 = operations_1.next(); !operations_1_1.done; operations_1_1 = operations_1.next()) {
                var operation = operations_1_1.value;
                /** @type {?} */
                var store = operation.store;
                if (operation.store === undefined) {
                    continue;
                }
                /** @type {?} */
                var storeOperations = storesOperations.get(store);
                if (storeOperations === undefined) {
                    storeOperations = operationsFactory();
                    storesOperations.set(store, storeOperations);
                }
                storeOperations.get(operation.type).push(operation);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (operations_1_1 && !operations_1_1.done && (_a = operations_1.return)) _a.call(operations_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        Array.from(storesOperations.keys()).forEach((/**
         * @param {?} store
         * @return {?}
         */
        function (store) {
            /** @type {?} */
            var storeOperations = storesOperations.get(store);
            /** @type {?} */
            var deletes = storeOperations.get(EntityOperationType.Delete);
            store.insertMany(deletes.map((/**
             * @param {?} _delete
             * @return {?}
             */
            function (_delete) { return _delete.previous; })));
            /** @type {?} */
            var updates = storeOperations.get(EntityOperationType.Update);
            store.updateMany(updates.map((/**
             * @param {?} _update
             * @return {?}
             */
            function (_update) { return _update.previous; })));
            /** @type {?} */
            var inserts = storeOperations.get(EntityOperationType.Insert);
            store.deleteMany(inserts.map((/**
             * @param {?} _insert
             * @return {?}
             */
            function (_insert) { return _insert.current; })));
        }));
        this.operations.deleteMany(operations);
        this._inCommitPhase = false;
    };
    /**
     * Clear this transaction
     * @todo Raise event and synchronize stores?
     */
    /**
     * Clear this transaction
     * \@todo Raise event and synchronize stores?
     * @return {?}
     */
    EntityTransaction.prototype.clear = /**
     * Clear this transaction
     * \@todo Raise event and synchronize stores?
     * @return {?}
     */
    function () {
        this.operations.clear();
        this._inCommitPhase = false;
    };
    /**
     * Merge another transaction in this one
     * @param transaction Another transaction
     */
    /**
     * Merge another transaction in this one
     * @param {?} transaction Another transaction
     * @return {?}
     */
    EntityTransaction.prototype.mergeTransaction = /**
     * Merge another transaction in this one
     * @param {?} transaction Another transaction
     * @return {?}
     */
    function (transaction) {
        var _this = this;
        this.checkInCommitPhase();
        /** @type {?} */
        var operations = transaction.operations.all();
        operations.forEach((/**
         * @param {?} operation
         * @return {?}
         */
        function (operation) {
            _this.addOperation(operation);
        }));
    };
    /**
     * Create an insert operation and add an entity to the store
     * @param current The entity to insert
     * @param store Optional: The store to insert the entity into
     * @param meta Optional: Any metadata on the operation
     */
    /**
     * Create an insert operation and add an entity to the store
     * @private
     * @param {?} current The entity to insert
     * @param {?=} store Optional: The store to insert the entity into
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    EntityTransaction.prototype.doInsert = /**
     * Create an insert operation and add an entity to the store
     * @private
     * @param {?} current The entity to insert
     * @param {?=} store Optional: The store to insert the entity into
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    function (current, store, meta) {
        this.addOperation({
            key: this.getKey(current),
            type: EntityOperationType.Insert,
            previous: undefined,
            current: current,
            store: store,
            meta: meta
        });
        if (store !== undefined) {
            store.insert(current);
        }
    };
    /**
     * Create an update operation and update an entity into the store
     * @param previous The entity before update
     * @param current The entity after update
     * @param store Optional: The store to update the entity into
     * @param meta Optional: Any metadata on the operation
     */
    /**
     * Create an update operation and update an entity into the store
     * @private
     * @param {?} previous The entity before update
     * @param {?} current The entity after update
     * @param {?=} store Optional: The store to update the entity into
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    EntityTransaction.prototype.doUpdate = /**
     * Create an update operation and update an entity into the store
     * @private
     * @param {?} previous The entity before update
     * @param {?} current The entity after update
     * @param {?=} store Optional: The store to update the entity into
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    function (previous, current, store, meta) {
        this.addOperation({
            key: this.getKey(current),
            type: EntityOperationType.Update,
            previous: previous,
            current: current,
            store: store,
            meta: meta
        });
        if (store !== undefined) {
            store.update(current);
        }
    };
    /**
     * Create a delete operation and delete an entity from the store
     * @param previous The entity before delete
     * @param store Optional: The store to delete the entity from
     * @param meta Optional: Any metadata on the operation
     */
    /**
     * Create a delete operation and delete an entity from the store
     * @private
     * @param {?} previous The entity before delete
     * @param {?=} store Optional: The store to delete the entity from
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    EntityTransaction.prototype.doDelete = /**
     * Create a delete operation and delete an entity from the store
     * @private
     * @param {?} previous The entity before delete
     * @param {?=} store Optional: The store to delete the entity from
     * @param {?=} meta Optional: Any metadata on the operation
     * @return {?}
     */
    function (previous, store, meta) {
        this.addOperation({
            key: this.getKey(previous),
            type: EntityOperationType.Delete,
            previous: previous,
            current: undefined,
            store: store,
            meta: meta
        });
        if (store !== undefined) {
            store.delete(previous);
        }
    };
    /**
     * Remove committed operations from store
     * @param operations Commited operations
     * @todo Raise event and synchronize stores?
     */
    /**
     * Remove committed operations from store
     * \@todo Raise event and synchronize stores?
     * @private
     * @param {?} operations Commited operations
     * @return {?}
     */
    EntityTransaction.prototype.resolveOperations = /**
     * Remove committed operations from store
     * \@todo Raise event and synchronize stores?
     * @private
     * @param {?} operations Commited operations
     * @return {?}
     */
    function (operations) {
        this.operations.deleteMany(operations);
    };
    /**
     * On commit success, resolve commited operations and exit commit phase
     * @param operations Commited operations
     */
    /**
     * On commit success, resolve commited operations and exit commit phase
     * @private
     * @param {?} operations Commited operations
     * @return {?}
     */
    EntityTransaction.prototype.onCommitSuccess = /**
     * On commit success, resolve commited operations and exit commit phase
     * @private
     * @param {?} operations Commited operations
     * @return {?}
     */
    function (operations) {
        this.resolveOperations(operations);
        this._inCommitPhase = false;
    };
    /**
     * On commit error, abort transaction
     * @param operations Commited operations
     */
    /**
     * On commit error, abort transaction
     * @private
     * @param {?} operations Commited operations
     * @return {?}
     */
    EntityTransaction.prototype.onCommitError = /**
     * On commit error, abort transaction
     * @private
     * @param {?} operations Commited operations
     * @return {?}
     */
    function (operations) {
        this._inCommitPhase = false;
    };
    /**
     * Add an operation to the operations store
     * @param operation Operation to add
     */
    /**
     * Add an operation to the operations store
     * @private
     * @param {?} operation Operation to add
     * @return {?}
     */
    EntityTransaction.prototype.addOperation = /**
     * Add an operation to the operations store
     * @private
     * @param {?} operation Operation to add
     * @return {?}
     */
    function (operation) {
        this.checkInCommitPhase();
        this.operations.insert(operation);
        this.operations.state.update(operation, { added: true });
    };
    /**
     * Remove an operation from the operations store
     * @param operation Operation to remove
     */
    /**
     * Remove an operation from the operations store
     * @private
     * @param {?} operation Operation to remove
     * @return {?}
     */
    EntityTransaction.prototype.removeOperation = /**
     * Remove an operation from the operations store
     * @private
     * @param {?} operation Operation to remove
     * @return {?}
     */
    function (operation) {
        this.checkInCommitPhase();
        this.operations.delete(operation);
        this.operations.state.update(operation, { added: false });
    };
    /**
     * Get the any existing operation an entity
     * @param entity Entity
     * @returns Either an insert, update or delete operation
     */
    /**
     * Get the any existing operation an entity
     * @private
     * @param {?} entity Entity
     * @return {?} Either an insert, update or delete operation
     */
    EntityTransaction.prototype.getOperationByEntity = /**
     * Get the any existing operation an entity
     * @private
     * @param {?} entity Entity
     * @return {?} Either an insert, update or delete operation
     */
    function (entity) {
        return this.operations.get(this.getKey(entity));
    };
    /**
     * Get all the operations to commit
     * @returns Operations to commit
     */
    /**
     * Get all the operations to commit
     * @private
     * @return {?} Operations to commit
     */
    EntityTransaction.prototype.getOperationsInCommit = /**
     * Get all the operations to commit
     * @private
     * @return {?} Operations to commit
     */
    function () {
        return this.operations.stateView
            .manyBy((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            return value.state.added === true;
        }))
            .map((/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return value.entity; }));
    };
    /**
     * Check if the transaction is in the commit phase and throw an error if it is
     */
    /**
     * Check if the transaction is in the commit phase and throw an error if it is
     * @private
     * @return {?}
     */
    EntityTransaction.prototype.checkInCommitPhase = /**
     * Check if the transaction is in the commit phase and throw an error if it is
     * @private
     * @return {?}
     */
    function () {
        if (this.inCommitPhase === true) {
            throw new Error('This transaction is in the commit phase. Cannot complete this operation.');
        }
    };
    return EntityTransaction;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var EntitySelectorComponent = /** @class */ (function () {
    function EntitySelectorComponent(cdRef) {
        this.cdRef = cdRef;
        /**
         * The selected entity
         * \@internal
         */
        this.selected$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        /**
         * The current multi select option text
         * \@internal
         */
        this.multiText$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        this.multiSelectValue = { id: 'IGO_MULTI_SELECT' };
        /**
         * Title accessor
         */
        this.titleAccessor = getEntityTitle;
        /**
         * Text to display when nothing is selected
         */
        this.emptyText = undefined;
        /**
         * Wheter selecting many entities is allowed
         */
        this.multi = false;
        /**
         * Text to display for the select all option
         */
        this.multiAllText = 'All';
        /**
         * Text to display for the select none option
         */
        this.multiNoneText = 'None';
        /**
         * Event emitted when the selection changes
         */
        this.selectedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    /**
     * Create a store watcher and subscribe to the selected entity
     * @internal
     */
    /**
     * Create a store watcher and subscribe to the selected entity
     * \@internal
     * @return {?}
     */
    EntitySelectorComponent.prototype.ngOnInit = /**
     * Create a store watcher and subscribe to the selected entity
     * \@internal
     * @return {?}
     */
    function () {
        var _this = this;
        this.watcher = new EntityStoreWatcher(this.store, this.cdRef);
        this.selected$$ = this.store.stateView
            .manyBy$((/**
         * @param {?} record
         * @return {?}
         */
        function (record) { return record.state.selected === true; }))
            .subscribe((/**
         * @param {?} records
         * @return {?}
         */
        function (records) {
            /** @type {?} */
            var entities = records.map((/**
             * @param {?} record
             * @return {?}
             */
            function (record) { return record.entity; }));
            _this.onSelectFromStore(entities);
        }));
    };
    /**
     * Unsubscribe to the selected entity and destroy the store watcher
     * @internal
     */
    /**
     * Unsubscribe to the selected entity and destroy the store watcher
     * \@internal
     * @return {?}
     */
    EntitySelectorComponent.prototype.ngOnDestroy = /**
     * Unsubscribe to the selected entity and destroy the store watcher
     * \@internal
     * @return {?}
     */
    function () {
        this.watcher.destroy();
        this.selected$$.unsubscribe();
    };
    /**
     * On selection change, update the store's state and emit an event
     * @internal
     */
    /**
     * On selection change, update the store's state and emit an event
     * \@internal
     * @param {?} event
     * @return {?}
     */
    EntitySelectorComponent.prototype.onSelectionChange = /**
     * On selection change, update the store's state and emit an event
     * \@internal
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var values = event.value instanceof Array ? event.value : [event.value];
        /** @type {?} */
        var multiSelect = values.find((/**
         * @param {?} _value
         * @return {?}
         */
        function (_value) { return _value === _this.multiSelectValue; }));
        /** @type {?} */
        var entities = values.filter((/**
         * @param {?} _value
         * @return {?}
         */
        function (_value) { return _value !== _this.multiSelectValue; }));
        if (multiSelect !== undefined) {
            if (entities.length === this.store.count) {
                entities = [];
            }
            else if (entities.length < this.store.count) {
                entities = this.store.all();
            }
        }
        if (entities.length === 0) {
            this.store.state.updateAll({ selected: false });
        }
        else {
            this.store.state.updateMany(entities, { selected: true }, true);
        }
        /** @type {?} */
        var value = this.multi ? entities : event.value;
        this.selectedChange.emit({ selected: true, value: value });
    };
    /**
     * @private
     * @param {?} entities
     * @return {?}
     */
    EntitySelectorComponent.prototype.onSelectFromStore = /**
     * @private
     * @param {?} entities
     * @return {?}
     */
    function (entities) {
        if (this.multi === true) {
            this.selected$.next(entities);
        }
        else {
            /** @type {?} */
            var entity = entities.length > 0 ? entities[0] : undefined;
            this.selected$.next(entity);
        }
        this.updateMultiToggleWithEntities(entities);
    };
    /**
     * @private
     * @param {?} entities
     * @return {?}
     */
    EntitySelectorComponent.prototype.updateMultiToggleWithEntities = /**
     * @private
     * @param {?} entities
     * @return {?}
     */
    function (entities) {
        if (entities.length === this.store.count && this.multiText$.value !== this.multiNoneText) {
            this.multiText$.next(this.multiNoneText);
        }
        else if (entities.length < this.store.count && this.multiText$.value !== this.multiAllText) {
            this.multiText$.next(this.multiAllText);
        }
    };
    EntitySelectorComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-entity-selector',
                    template: "<mat-form-field class=\"igo-entity-selector\">\r\n  <mat-select\r\n    [value]=\"selected$ | async\"\r\n    [multiple]=\"multi\"\r\n    [placeholder]=\"placeholder\"\r\n    (selectionChange)=\"onSelectionChange($event)\">\r\n    <mat-option *ngIf=\"emptyText !== undefined\">{{emptyText}}</mat-option>\r\n    <mat-option *ngIf=\"multi === true\" [value]=\"multiSelectValue\">{{multiText$ | async}}</mat-option>\r\n    <ng-template ngFor let-entity [ngForOf]=\"store.view.all$() | async\">\r\n      <mat-option [value]=\"entity\">\r\n        {{titleAccessor(entity)}}\r\n      </mat-option>\r\n    </ng-template>\r\n  </mat-select>\r\n</mat-form-field>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: ["mat-form-field{width:100%}"]
                }] }
    ];
    /** @nocollapse */
    EntitySelectorComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectorRef"] }
    ]; };
    EntitySelectorComponent.propDecorators = {
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        titleAccessor: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        emptyText: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        multi: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        multiAllText: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        multiNoneText: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        selectedChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return EntitySelectorComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var EntityTableComponent = /** @class */ (function () {
    function EntityTableComponent(cdRef) {
        this.cdRef = cdRef;
        /**
         * Reference to the column renderer types
         * \@internal
         */
        this.entityTableColumnRenderer = EntityTableColumnRenderer;
        /**
         * Reference to the selection states
         * \@internal
         */
        this.entityTableSelectionState = EntityTableSelectionState;
        /**
         * Observable of the selection,s state
         * \@internal
         */
        this.selectionState$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        /**
         * Scroll behavior on selection
         */
        this.scrollBehavior = EntityTableScrollBehavior.Auto;
        /**
         * Event emitted when an entity (row) is clicked
         */
        this.entityClick = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        /**
         * Event emitted when an entity (row) is selected
         */
        this.entitySelectChange = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(EntityTableComponent.prototype, "headers", {
        /**
         * Table headers
         * @internal
         */
        get: /**
         * Table headers
         * \@internal
         * @return {?}
         */
        function () {
            /** @type {?} */
            var columns = this.template.columns
                .filter((/**
             * @param {?} column
             * @return {?}
             */
            function (column) { return column.visible !== false; }))
                .map((/**
             * @param {?} column
             * @return {?}
             */
            function (column) { return column.name; }));
            if (this.selectionCheckbox === true) {
                columns = ['selectionCheckbox'].concat(columns);
            }
            return columns;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityTableComponent.prototype, "dataSource", {
        /**
         * Data source consumable by the underlying material table
         * @internal
         */
        get: /**
         * Data source consumable by the underlying material table
         * \@internal
         * @return {?}
         */
        function () { return this.store.view.all$(); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityTableComponent.prototype, "selection", {
        /**
         * Whether selection is supported
         * @internal
         */
        get: /**
         * Whether selection is supported
         * \@internal
         * @return {?}
         */
        function () { return this.template.selection || false; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityTableComponent.prototype, "selectionCheckbox", {
        /**
         * Whether a selection checkbox should be displayed
         * @internal
         */
        get: /**
         * Whether a selection checkbox should be displayed
         * \@internal
         * @return {?}
         */
        function () { return this.template.selectionCheckbox || false; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityTableComponent.prototype, "selectMany", {
        /**
         * Whether selection many entities should eb supported
         * @internal
         */
        get: /**
         * Whether selection many entities should eb supported
         * \@internal
         * @return {?}
         */
        function () { return this.template.selectMany || false; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EntityTableComponent.prototype, "fixedHeader", {
        /**
         * Whether selection many entities should eb supported
         * @internal
         */
        get: /**
         * Whether selection many entities should eb supported
         * \@internal
         * @return {?}
         */
        function () { return this.template.fixedHeader === undefined ? true : this.template.fixedHeader; },
        enumerable: true,
        configurable: true
    });
    /**
     * Track the selection state to properly display the selection checkboxes
     * @internal
     */
    /**
     * Track the selection state to properly display the selection checkboxes
     * \@internal
     * @return {?}
     */
    EntityTableComponent.prototype.ngOnInit = /**
     * Track the selection state to properly display the selection checkboxes
     * \@internal
     * @return {?}
     */
    function () {
        var _this = this;
        this.selection$$ = this.store.stateView
            .manyBy$((/**
         * @param {?} record
         * @return {?}
         */
        function (record) { return record.state.selected === true; }))
            .subscribe((/**
         * @param {?} records
         * @return {?}
         */
        function (records) {
            _this.selectionState$.next(_this.computeSelectionState(records));
        }));
    };
    /**
     * When the store change, create a new watcher
     * @internal
     */
    /**
     * When the store change, create a new watcher
     * \@internal
     * @param {?} changes
     * @return {?}
     */
    EntityTableComponent.prototype.ngOnChanges = /**
     * When the store change, create a new watcher
     * \@internal
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var store = changes.store;
        if (store && store.currentValue !== store.previousValue) {
            if (this.watcher !== undefined) {
                this.watcher.destroy();
            }
            this.watcher = new EntityStoreWatcher(this.store, this.cdRef);
        }
    };
    /**
     * Unbind the store watcher
     * @internal
     */
    /**
     * Unbind the store watcher
     * \@internal
     * @return {?}
     */
    EntityTableComponent.prototype.ngOnDestroy = /**
     * Unbind the store watcher
     * \@internal
     * @return {?}
     */
    function () {
        if (this.watcher !== undefined) {
            this.watcher.destroy();
        }
        this.selection$$.unsubscribe();
    };
    /**
     * Trigger a refresh of thre table. This can be useful when
     * the data source doesn't emit a new value but for some reason
     * the records need an update.
     * @internal
     */
    /**
     * Trigger a refresh of thre table. This can be useful when
     * the data source doesn't emit a new value but for some reason
     * the records need an update.
     * \@internal
     * @return {?}
     */
    EntityTableComponent.prototype.refresh = /**
     * Trigger a refresh of thre table. This can be useful when
     * the data source doesn't emit a new value but for some reason
     * the records need an update.
     * \@internal
     * @return {?}
     */
    function () {
        this.cdRef.detectChanges();
    };
    /**
     * On sort, sort the store
     * @param event Sort event
     * @internal
     */
    /**
     * On sort, sort the store
     * \@internal
     * @param {?} event Sort event
     * @return {?}
     */
    EntityTableComponent.prototype.onSort = /**
     * On sort, sort the store
     * \@internal
     * @param {?} event Sort event
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var direction = event.direction;
        /** @type {?} */
        var column = this.template.columns
            .find((/**
         * @param {?} c
         * @return {?}
         */
        function (c) { return c.name === event.active; }));
        if (direction === 'asc' || direction === 'desc') {
            this.store.view.sort({
                valueAccessor: (/**
                 * @param {?} entity
                 * @return {?}
                 */
                function (entity) { return _this.getValue(entity, column); }),
                direction: direction
            });
        }
        else {
            this.store.view.sort(undefined);
        }
    };
    /**
     * When an entity is clicked, emit an event
     * @param entity Entity
     * @internal
     */
    /**
     * When an entity is clicked, emit an event
     * \@internal
     * @param {?} entity Entity
     * @return {?}
     */
    EntityTableComponent.prototype.onRowClick = /**
     * When an entity is clicked, emit an event
     * \@internal
     * @param {?} entity Entity
     * @return {?}
     */
    function (entity) {
        this.entityClick.emit(entity);
    };
    /**
     * When an entity is selected, select it in the store and emit an event. Even if
     * "many" is set to true, this method always select a single, exclusive row. Selecting
     * multiple rows should be achieved by using the checkboxes.
     * @param entity Entity
     * @internal
     */
    /**
     * When an entity is selected, select it in the store and emit an event. Even if
     * "many" is set to true, this method always select a single, exclusive row. Selecting
     * multiple rows should be achieved by using the checkboxes.
     * \@internal
     * @param {?} entity Entity
     * @return {?}
     */
    EntityTableComponent.prototype.onRowSelect = /**
     * When an entity is selected, select it in the store and emit an event. Even if
     * "many" is set to true, this method always select a single, exclusive row. Selecting
     * multiple rows should be achieved by using the checkboxes.
     * \@internal
     * @param {?} entity Entity
     * @return {?}
     */
    function (entity) {
        if (this.selection === false) {
            return;
        }
        // Selecting a
        this.store.state.update(entity, { selected: true }, true);
        this.entitySelectChange.emit({ added: [entity] });
    };
    /**
     * Select or unselect all rows at once. On select, emit an event.
     * @param toggle Select or unselect
     * @internal
     */
    /**
     * Select or unselect all rows at once. On select, emit an event.
     * \@internal
     * @param {?} toggle Select or unselect
     * @return {?}
     */
    EntityTableComponent.prototype.onToggleRows = /**
     * Select or unselect all rows at once. On select, emit an event.
     * \@internal
     * @param {?} toggle Select or unselect
     * @return {?}
     */
    function (toggle) {
        if (this.selection === false) {
            return;
        }
        this.store.state.updateAll({ selected: toggle });
        if (toggle === true) {
            this.entitySelectChange.emit({ added: [this.store.view.all()] });
        }
    };
    /**
     * When an entity is toggled, select or unselect it in the store. On select,
     * emit an event.
     * @param toggle Select or unselect
     * @param entity Entity
     * @internal
     */
    /**
     * When an entity is toggled, select or unselect it in the store. On select,
     * emit an event.
     * \@internal
     * @param {?} toggle Select or unselect
     * @param {?} entity Entity
     * @return {?}
     */
    EntityTableComponent.prototype.onToggleRow = /**
     * When an entity is toggled, select or unselect it in the store. On select,
     * emit an event.
     * \@internal
     * @param {?} toggle Select or unselect
     * @param {?} entity Entity
     * @return {?}
     */
    function (toggle, entity) {
        if (this.selection === false) {
            return;
        }
        /** @type {?} */
        var exclusive = toggle === true && !this.selectMany;
        this.store.state.update(entity, { selected: toggle }, exclusive);
        if (toggle === true) {
            this.entitySelectChange.emit({ added: [entity] });
        }
    };
    /**
     * Compute the selection state
     * @returns Whether all, some or no rows are selected
     * @internal
     */
    /**
     * Compute the selection state
     * \@internal
     * @private
     * @param {?} selectedRecords
     * @return {?} Whether all, some or no rows are selected
     */
    EntityTableComponent.prototype.computeSelectionState = /**
     * Compute the selection state
     * \@internal
     * @private
     * @param {?} selectedRecords
     * @return {?} Whether all, some or no rows are selected
     */
    function (selectedRecords) {
        /** @type {?} */
        var states = EntityTableSelectionState;
        /** @type {?} */
        var selectionCount = selectedRecords.length;
        return selectionCount === 0 ?
            states.None :
            (selectionCount === this.store.view.count ? states.All : states.Some);
    };
    /**
     * Whether a column is sortable
     * @param column Column
     * @returns True if a column is sortable
     * @internal
     */
    /**
     * Whether a column is sortable
     * \@internal
     * @param {?} column Column
     * @return {?} True if a column is sortable
     */
    EntityTableComponent.prototype.columnIsSortable = /**
     * Whether a column is sortable
     * \@internal
     * @param {?} column Column
     * @return {?} True if a column is sortable
     */
    function (column) {
        /** @type {?} */
        var sortable = column.sort;
        if (sortable === undefined) {
            sortable = this.template.sort === undefined ? false : this.template.sort;
        }
        return sortable;
    };
    /**
     * Whether a row is should be selected based on the underlying entity state
     * @param entity Entity
     * @returns True if a row should be selected
     * @internal
     */
    /**
     * Whether a row is should be selected based on the underlying entity state
     * \@internal
     * @param {?} entity Entity
     * @return {?} True if a row should be selected
     */
    EntityTableComponent.prototype.rowIsSelected = /**
     * Whether a row is should be selected based on the underlying entity state
     * \@internal
     * @param {?} entity Entity
     * @return {?} True if a row should be selected
     */
    function (entity) {
        /** @type {?} */
        var state$$1 = this.store.state.get(entity);
        return state$$1.selected ? state$$1.selected : false;
    };
    /**
     * Method to access an entity's values
     * @param entity Entity
     * @param column Column
     * @returns Any value
     * @internal
     */
    /**
     * Method to access an entity's values
     * \@internal
     * @param {?} entity Entity
     * @param {?} column Column
     * @return {?} Any value
     */
    EntityTableComponent.prototype.getValue = /**
     * Method to access an entity's values
     * \@internal
     * @param {?} entity Entity
     * @param {?} column Column
     * @return {?} Any value
     */
    function (entity, column) {
        if (column.valueAccessor !== undefined) {
            return column.valueAccessor(entity);
        }
        if (this.template.valueAccessor !== undefined) {
            return this.template.valueAccessor(entity, column.name);
        }
        return this.store.getProperty(entity, column.name);
    };
    /**
     * Return the type of renderer of a column
     * @param column Column
     * @returns Renderer type
     * @internal
     */
    /**
     * Return the type of renderer of a column
     * \@internal
     * @param {?} column Column
     * @return {?} Renderer type
     */
    EntityTableComponent.prototype.getColumnRenderer = /**
     * Return the type of renderer of a column
     * \@internal
     * @param {?} column Column
     * @return {?} Renderer type
     */
    function (column) {
        if (column.renderer !== undefined) {
            return column.renderer;
        }
        return EntityTableColumnRenderer.Default;
    };
    /**
     * Return the table ngClass
     * @returns ngClass
     * @internal
     */
    /**
     * Return the table ngClass
     * \@internal
     * @return {?} ngClass
     */
    EntityTableComponent.prototype.getTableClass = /**
     * Return the table ngClass
     * \@internal
     * @return {?} ngClass
     */
    function () {
        return {
            'igo-entity-table-with-selection': this.selection
        };
    };
    /**
     * Return a header ngClass
     * @returns ngClass
     * @internal
     */
    /**
     * Return a header ngClass
     * \@internal
     * @return {?} ngClass
     */
    EntityTableComponent.prototype.getHeaderClass = /**
     * Return a header ngClass
     * \@internal
     * @return {?} ngClass
     */
    function () {
        /** @type {?} */
        var func = this.template.headerClassFunc;
        if (func instanceof Function) {
            return func();
        }
        return {};
    };
    /**
     * Return a row ngClass
     * @param entity Entity
     * @returns ngClass
     * @internal
     */
    /**
     * Return a row ngClass
     * \@internal
     * @param {?} entity Entity
     * @return {?} ngClass
     */
    EntityTableComponent.prototype.getRowClass = /**
     * Return a row ngClass
     * \@internal
     * @param {?} entity Entity
     * @return {?} ngClass
     */
    function (entity) {
        /** @type {?} */
        var func = this.template.rowClassFunc;
        if (func instanceof Function) {
            return func(entity);
        }
        return {};
    };
    /**
     * Return a row ngClass
     * @param entity Entity
     * @param column Column
     * @returns ngClass
     * @internal
     */
    /**
     * Return a row ngClass
     * \@internal
     * @param {?} entity Entity
     * @param {?} column Column
     * @return {?} ngClass
     */
    EntityTableComponent.prototype.getCellClass = /**
     * Return a row ngClass
     * \@internal
     * @param {?} entity Entity
     * @param {?} column Column
     * @return {?} ngClass
     */
    function (entity, column) {
        /** @type {?} */
        var cls = {};
        /** @type {?} */
        var tableFunc = this.template.cellClassFunc;
        if (tableFunc instanceof Function) {
            Object.assign(cls, tableFunc(entity, column));
        }
        /** @type {?} */
        var columnFunc = column.cellClassFunc;
        if (columnFunc instanceof Function) {
            Object.assign(cls, columnFunc(entity));
        }
        return cls;
    };
    /**
     * When a button is clicked
     * @param func Function
     * @param entity Entity
     * @internal
     */
    /**
     * When a button is clicked
     * \@internal
     * @param {?} clickFunc
     * @param {?} entity Entity
     * @return {?}
     */
    EntityTableComponent.prototype.onButtonClick = /**
     * When a button is clicked
     * \@internal
     * @param {?} clickFunc
     * @param {?} entity Entity
     * @return {?}
     */
    function (clickFunc, entity) {
        if (typeof clickFunc === 'function') {
            clickFunc(entity);
        }
    };
    EntityTableComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-entity-table',
                    template: "<div class=\"table-container\">\r\n  <table\r\n    mat-table\r\n    matSort\r\n    [ngClass]=\"getTableClass()\"\r\n    [dataSource]=\"dataSource\"\r\n    (matSortChange)=\"onSort($event)\">\r\n\r\n    <ng-container matColumnDef=\"selectionCheckbox\" class=\"mat-cell-checkbox\">\r\n      <th mat-header-cell *matHeaderCellDef>\r\n        <ng-container *ngIf=\"selectMany\">\r\n          <ng-container *ngIf=\"selectionState$ | async as selectionState\">\r\n            <mat-checkbox (change)=\"onToggleRows($event.checked)\"\r\n                          [checked]=\"selectionState === entityTableSelectionState.All\"\r\n                          [indeterminate]=\"selectionState === entityTableSelectionState.Some\">\r\n            </mat-checkbox>\r\n          </ng-container>\r\n        </ng-container>\r\n      </th>\r\n      <td mat-cell *matCellDef=\"let entity\">\r\n        <mat-checkbox (click)=\"$event.stopPropagation()\"\r\n                      (change)=\"onToggleRow($event.checked, entity)\"\r\n                      [checked]=\"rowIsSelected(entity)\">\r\n        </mat-checkbox>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <ng-container [matColumnDef]=\"column.name\" *ngFor=\"let column of template.columns\">\r\n      <ng-container *ngIf=\"columnIsSortable(column)\">\r\n        <th mat-header-cell *matHeaderCellDef mat-sort-header>\r\n          {{column.title}}\r\n        </th>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"!columnIsSortable(column)\">\r\n        <th mat-header-cell *matHeaderCellDef>\r\n          {{column.title}}\r\n        </th>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"getColumnRenderer(column) as columnRenderer\">\r\n        <ng-container *ngIf=\"columnRenderer === entityTableColumnRenderer.Default\">\r\n            <td mat-cell *matCellDef=\"let entity\" class=\"mat-cell-text\"\r\n              [ngClass]=\"getCellClass(entity, column)\">\r\n              {{getValue(entity, column)}}\r\n            </td>\r\n          </ng-container>\r\n          <ng-container *ngIf=\"columnRenderer === entityTableColumnRenderer.HTML\">\r\n            <td mat-cell *matCellDef=\"let entity\" class=\"mat-cell-text\"\r\n              [ngClass]=\"getCellClass(entity, column)\"\r\n              [innerHTML]=\"getValue(entity, column)\">\r\n            </td>\r\n          </ng-container>\r\n          <ng-container *ngIf=\"columnRenderer === entityTableColumnRenderer.UnsanitizedHTML\">\r\n              <td mat-cell *matCellDef=\"let entity\" class=\"mat-cell-text\"\r\n                [ngClass]=\"getCellClass(entity, column)\"\r\n                [innerHTML]=\"getValue(entity, column) | sanitizeHtml\">\r\n              </td>\r\n            </ng-container>\r\n          <ng-container *ngIf=\"columnRenderer === entityTableColumnRenderer.Icon\">\r\n            <td mat-cell *matCellDef=\"let entity\" class=\"mat-cell-text\"\r\n              [ngClass]=\"getCellClass(entity, column)\">\r\n              <mat-icon svgIcon=\"{{getValue(entity, column)}}\"></mat-icon>\r\n            </td>\r\n          </ng-container>\r\n          <ng-container *ngIf=\"columnRenderer === entityTableColumnRenderer.ButtonGroup\">\r\n            <td mat-cell *matCellDef=\"let entity\" class=\"mat-cell-text\"\r\n              [ngClass]=\"getCellClass(entity, column)\">\r\n              <span *ngFor=\"let button of getValue(entity, column)\">\r\n                <button *ngIf=\"button.style === 'mat-icon-button'\"\r\n                  igoStopPropagation\r\n                  mat-icon-button\r\n                  [color]=\"button.color\"\r\n                  (click)=\"onButtonClick(button.click, entity)\">\r\n                  <mat-icon svgIcon=\"{{button.icon}}\"></mat-icon>\r\n                </button>\r\n                <button *ngIf=\"button.style !== 'mat-icon-button'\"\r\n                  igoStopPropagation\r\n                  mat-mini-fab\r\n                  [color]=\"button.color\"\r\n                  (click)=\"onButtonClick(button.click, entity)\">\r\n                  <mat-icon svgIcon=\"{{button.icon}}\"></mat-icon>\r\n                </button>\r\n              </span>\r\n            </td>\r\n          </ng-container>\r\n      </ng-container>\r\n    </ng-container>\r\n\r\n    <tr\r\n      mat-header-row\r\n      *matHeaderRowDef=\"headers; sticky: fixedHeader;\"\r\n      [ngClass]=\"getHeaderClass()\">\r\n    </tr>\r\n    <tr\r\n      mat-row\r\n      igoEntityTableRow\r\n      *matRowDef=\"let entity; columns: headers;\"\r\n      [scrollBehavior]=\"scrollBehavior\"\r\n      [ngClass]=\"getRowClass(entity)\"\r\n      [selection]=\"selection\"\r\n      [selected]=\"rowIsSelected(entity)\"\r\n      (select)=\"onRowSelect(entity)\"\r\n      (click)=\"onRowClick(entity)\">\r\n    </tr>\r\n\r\n  </table>\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{width:100%;height:100%;display:block}:host.table-compact ::ng-deep .mat-checkbox .mat-checkbox-ripple,:host.table-compact tr.mat-header-row{height:36px}:host.table-compact ::ng-deep .mat-checkbox .mat-checkbox-ripple,:host.table-compact tr.mat-row{height:28px}.table-container{display:flex;flex-direction:column;height:100%;overflow:auto;flex:1 1 auto}.mat-cell-text{overflow:hidden;word-wrap:break-word}entity-table table.igo-entity-table-with-selection tr:hover{-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd;cursor:pointer}table button{margin:7px}"]
                }] }
    ];
    /** @nocollapse */
    EntityTableComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectorRef"] }
    ]; };
    EntityTableComponent.propDecorators = {
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        template: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        scrollBehavior: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        entityClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        entitySelectChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return EntityTableComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var ActionbarMode = {
    Dock: 'dock',
    Overlay: 'overlay',
    Context: 'context',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * The class is a specialized version of an EntityStore that stores
 * actions.
 */
var  /**
 * The class is a specialized version of an EntityStore that stores
 * actions.
 */
ActionStore = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__extends"])(ActionStore, _super);
    function ActionStore() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Update actions availability. That means disabling or enabling some
     * actions based on the conditions they define.
     */
    /**
     * Update actions availability. That means disabling or enabling some
     * actions based on the conditions they define.
     * @return {?}
     */
    ActionStore.prototype.updateActionsAvailability = /**
     * Update actions availability. That means disabling or enabling some
     * actions based on the conditions they define.
     * @return {?}
     */
    function () {
        /** @type {?} */
        var availables = [];
        /** @type {?} */
        var unavailables = [];
        this.entities$.value.forEach((/**
         * @param {?} action
         * @return {?}
         */
        function (action) {
            /** @type {?} */
            var conditions = action.conditions || [];
            /** @type {?} */
            var args = action.conditionArgs || [];
            /** @type {?} */
            var available = conditions.every((/**
             * @param {?} condition
             * @return {?}
             */
            function (condition) {
                return condition.apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__spread"])(args));
            }));
            available ? availables.push(action) : unavailables.push(action);
        }));
        if (unavailables.length > 0) {
            this.state.updateMany(unavailables, {
                disabled: true,
                active: false
            });
        }
        if (availables.length > 0) {
            this.state.updateMany(availables, {
                disabled: false
            });
        }
    };
    return ActionStore;
}(EntityStore));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * A list of action buttons.
 * This component can be displayed in one of two way: 'dock' or 'overlay'
 */
var ActionbarComponent = /** @class */ (function () {
    function ActionbarComponent(cdRef, overlay) {
        var _this = this;
        this.cdRef = cdRef;
        this.overlay = overlay;
        /**
         * Reference to the ActionbarMode enum for use in the template
         * \@internal
         */
        this.actionbarMode = ActionbarMode;
        /**
         * Whether the actionbar is collapsed (Dock mode)
         * \@internal
         */
        this.collapsed = false;
        /**
         * Toggle collapse action (Dock)
         * \@internal
         */
        this.toggleCollapseAction = {
            id: 'actionbar_toggle',
            icon: 'dots-vertical',
            handler: (/**
             * @return {?}
             */
            function () {
                _this.collapsed = !_this.collapsed;
            })
        };
        /**
         * Actionbar mode
         */
        this.mode = ActionbarMode.Dock;
        /**
         * Whether a toggle button should be displayed (Dock mode)
         */
        this.withToggleButton = false;
        /**
         * Whether a the actionbar should display buttons horizontally
         */
        this.horizontal = false;
        /**
         * Color
         */
        this.color = 'default';
        /**
         * Whether action titles are displayed
         */
        this.withTitle = true;
        /**
         * Whether action icons are displayed
         */
        this.withIcon = true;
        /**
         * Overlay X position
         */
        this.xPosition = 'before';
        /**
         * Overlay X position
         */
        this.yPosition = 'above';
        this._overlayClass = '';
        /**
         * Function to add class to item actionbar
         */
        this.itemClassFunc = ActionbarComponent.defaultItemClassFunc;
    }
    Object.defineProperty(ActionbarComponent.prototype, "overlayClass", {
        get: /**
         * @return {?}
         */
        function () {
            return [this._overlayClass, 'igo-actionbar-overlay'].join(' ');
        },
        /**
         * Class to add to the actionbar overlay
         */
        set: /**
         * Class to add to the actionbar overlay
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._overlayClass = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActionbarComponent.prototype, "withTitleClass", {
        /**
         * @ignore
         */
        get: /**
         * @ignore
         * @return {?}
         */
        function () {
            return this.withTitle;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActionbarComponent.prototype, "withIconClass", {
        /**
         * @ignore
         */
        get: /**
         * @ignore
         * @return {?}
         */
        function () {
            return this.withIcon;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActionbarComponent.prototype, "horizontalClass", {
        /**
         * @ignore
         */
        get: /**
         * @ignore
         * @return {?}
         */
        function () {
            return this.horizontal;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} action
     * @return {?}
     */
    ActionbarComponent.defaultItemClassFunc = /**
     * @param {?} action
     * @return {?}
     */
    function (action) {
        return {};
    };
    /**
     * @internal
     */
    /**
     * \@internal
     * @param {?} changes
     * @return {?}
     */
    ActionbarComponent.prototype.ngOnChanges = /**
     * \@internal
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var store = changes.store;
        if (store && store.currentValue !== store.previousValue) {
            if (this.watcher !== undefined) {
                this.watcher.destroy();
            }
            this.watcher = new EntityStoreWatcher(this.store, this.cdRef);
        }
    };
    /**
     * @internal
     */
    /**
     * \@internal
     * @return {?}
     */
    ActionbarComponent.prototype.ngOnDestroy = /**
     * \@internal
     * @return {?}
     */
    function () {
        this.watcher.destroy();
    };
    /**
     * Invoke the action handler
     * @internal
     */
    /**
     * Invoke the action handler
     * \@internal
     * @param {?} action
     * @return {?}
     */
    ActionbarComponent.prototype.onTriggerAction = /**
     * Invoke the action handler
     * \@internal
     * @param {?} action
     * @return {?}
     */
    function (action) {
        /** @type {?} */
        var args = action.args || [];
        action.handler.apply(action, Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__spread"])(args));
    };
    ActionbarComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-actionbar',
                    template: "<mat-list *ngIf=\"mode === actionbarMode.Dock\">\r\n\r\n  <igo-actionbar-item\r\n    *ngIf=\"withToggleButton\"\r\n    color=\"accent\"\r\n    [withTitle]=\"false\"\r\n    [withIcon]=\"true\"\r\n    [color]=\"color\"\r\n    [disabled]=\"store.view.empty\"\r\n    [action]=\"toggleCollapseAction\"\r\n    (trigger)=\"onTriggerAction(toggleCollapseAction)\">\r\n  </igo-actionbar-item>\r\n\r\n  <ng-template *ngIf=\"!collapsed\" ngFor let-action [ngForOf]=\"store.view.all$() | async\">\r\n    <igo-actionbar-item\r\n      [ngClass]=\"itemClassFunc(action)\"\r\n      color=\"accent\"\r\n      [withTitle]=\"withTitle\"\r\n      [withIcon]=\"withIcon\"\r\n      [color]=\"color\"\r\n      [disabled]=\"store.state.get(action).disabled\"\r\n      [action]=\"action\"\r\n      (trigger)=\"onTriggerAction(action)\">\r\n    </igo-actionbar-item>\r\n  </ng-template>\r\n</mat-list>\r\n\r\n<div *ngIf=\"mode === actionbarMode.Overlay\">\r\n  <button\r\n    mat-icon-button\r\n    [matMenuTriggerFor]=\"actionbarMenu\"\r\n    [disabled]=\"store.view.empty\">\r\n    <mat-icon svgIcon=\"dots-horizontal\"></mat-icon>\r\n  </button>\r\n\r\n  <mat-menu\r\n    #actionbarMenu=\"matMenu\"\r\n    class=\"igo-compact-menu igo-no-min-width-menu\"\r\n    overlapTrigger=\"true\"\r\n    [xPosition]=\"xPosition\"\r\n    [yPosition]=\"yPosition\"\r\n    [class]=\"overlayClass\">\r\n\r\n    <mat-list>\r\n      <ng-template ngFor let-action [ngForOf]=\"store.view.all$() | async\">\r\n        <igo-actionbar-item\r\n          color=\"accent\"\r\n          [withTitle]=\"withTitle\"\r\n          [withIcon]=\"withIcon\"\r\n          [color]=\"color\"\r\n          [disabled]=\"store.state.get(action).disabled\"\r\n          [action]=\"action\"\r\n          (trigger)=\"onTriggerAction(action)\">\r\n        </igo-actionbar-item>\r\n      </ng-template>\r\n    </mat-list>\r\n  </mat-menu>\r\n</div>\r\n<mat-card *ngIf=\"mode === actionbarMode.Context\" class=\"context-menu-card mat-elevation-z4\">\r\n  <mat-list>\r\n      <ng-template ngFor let-action [ngForOf]=\"store.view.all$() | async\">\r\n          <igo-actionbar-item\r\n            color=\"accent\"\r\n            [withTitle]=\"withTitle\"\r\n            [withIcon]=\"withIcon\"\r\n            [color]=\"color\"\r\n            [disabled]=\"store.state.get(action).disabled\"\r\n            [action]=\"action\"\r\n            (trigger)=\"onTriggerAction(action)\">\r\n          </igo-actionbar-item>\r\n        <br/>\r\n      </ng-template>\r\n  </mat-list>\r\n</mat-card>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{display:block;height:100%;overflow:auto;position:relative}button{margin:4px}mat-list{padding-top:0}:host.horizontal{max-width:100%;overflow:hidden}:host.horizontal mat-list{width:auto;white-space:nowrap}:host.horizontal igo-actionbar-item{display:inline-block}:host ::ng-deep .mat-list .mat-list-item .mat-list-text>*{white-space:normal;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;max-height:36px;line-height:18px;-webkit-line-clamp:2}:host ::ng-deep .mat-list-base .mat-list-item.mat-list-item-with-avatar{height:46px}:host ::ng-deep .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content{display:-webkit-flex;height:46px;padding:3px}:host ::ng-deep .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content>mat-icon{padding:8px}igo-actionbar-item ::ng-deep mat-list-item [mat-list-avatar]{height:auto;width:40px}igo-actionbar-item ::ng-deep mat-list-item:hover{cursor:pointer}.context-menu-card{padding:8px 3px;margin:10px}"]
                }] }
    ];
    /** @nocollapse */
    ActionbarComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectorRef"] },
        { type: _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_1__["Overlay"] }
    ]; };
    ActionbarComponent.propDecorators = {
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        mode: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        withToggleButton: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        horizontal: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        withTitle: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        withIcon: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        xPosition: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        yPosition: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        overlayClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        itemClassFunc: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        withTitleClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostBinding"], args: ['class.with-title',] }],
        withIconClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostBinding"], args: ['class.with-icon',] }],
        horizontalClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostBinding"], args: ['class.horizontal',] }]
    };
    return ActionbarComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * An action button
 */
var ActionbarItemComponent = /** @class */ (function () {
    function ActionbarItemComponent() {
        /**
         * Color
         */
        this.color = 'default';
        /**
         * Whether the action title is displayed
         */
        this.withTitle = true;
        /**
         * Whether the action icon is displayed
         */
        this.withIcon = true;
        /**
         * Whether the action is disabled
         */
        this.disabled = false;
        /**
         * Event emitted when the action button is clicked
         */
        this.trigger = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(ActionbarItemComponent.prototype, "title", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () { return this.action.title; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActionbarItemComponent.prototype, "tooltip", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () { return this.action.tooltip || this.title; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActionbarItemComponent.prototype, "icon", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () { return this.action.icon; },
        enumerable: true,
        configurable: true
    });
    /**
     * When the action button is clicked, emit the 'trigger' event but don't
     * invoke the action handler. This is handled by the parent component.
     * @internal
     */
    /**
     * When the action button is clicked, emit the 'trigger' event but don't
     * invoke the action handler. This is handled by the parent component.
     * \@internal
     * @return {?}
     */
    ActionbarItemComponent.prototype.onClick = /**
     * When the action button is clicked, emit the 'trigger' event but don't
     * invoke the action handler. This is handled by the parent component.
     * \@internal
     * @return {?}
     */
    function () {
        if (this.disabled === true) {
            return;
        }
        this.trigger.emit(this.action);
    };
    ActionbarItemComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-actionbar-item',
                    template: "<mat-list-item\r\n  matTooltipClass=\"actionbarItemTooltip\"\r\n  matTooltipShowDelay=\"500\"\r\n  [matTooltip]=\"tooltip | translate\"\r\n  [ngClass]=\"{'igo-actionbar-item-disabled': disabled}\"\r\n  (click)=\"onClick()\">\r\n  <button *ngIf=\"withIcon\"\r\n    mat-list-avatar\r\n    mat-icon-button\r\n    [color]=\"color\"\r\n    [disabled]=\"disabled\">\r\n    <mat-icon *ngIf=\"withIcon\" svgIcon=\"{{icon}}\"></mat-icon>\r\n  </button>\r\n  <h4 *ngIf=\"withTitle\" matLine>{{title | translate}}</h4>\r\n</mat-list-item>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: ["mat-list-item.igo-actionbar-item-disabled{color:rgba(0,0,0,.26);cursor:default!important}"]
                }] }
    ];
    /** @nocollapse */
    ActionbarItemComponent.ctorParameters = function () { return []; };
    ActionbarItemComponent.propDecorators = {
        action: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        withTitle: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        withIcon: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        trigger: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return ActionbarItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoActionbarModule = /** @class */ (function () {
    function IgoActionbarModule() {
    }
    IgoActionbarModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_6__["IgoLanguageModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatMenuModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatListModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatCardModule"]
                    ],
                    exports: [ActionbarComponent],
                    declarations: [ActionbarComponent, ActionbarItemComponent]
                },] }
    ];
    return IgoActionbarModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoActionModule = /** @class */ (function () {
    function IgoActionModule() {
    }
    IgoActionModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        IgoActionbarModule
                    ],
                    exports: [
                        IgoActionbarModule
                    ],
                    declarations: [],
                    providers: []
                },] }
    ];
    return IgoActionModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var BackdropComponent = /** @class */ (function () {
    function BackdropComponent() {
    }
    Object.defineProperty(BackdropComponent.prototype, "shown", {
        get: /**
         * @return {?}
         */
        function () {
            return this._shown;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._shown = value;
        },
        enumerable: true,
        configurable: true
    });
    BackdropComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-backdrop',
                    template: "<div [ngClass]=\"{'igo-backdrop-shown': shown}\"></div>\r\n",
                    styles: [":host>div{position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(100,100,100,.5);z-index:2;display:none}:host>div.igo-backdrop-shown{display:block}"]
                }] }
    ];
    /** @nocollapse */
    BackdropComponent.ctorParameters = function () { return []; };
    BackdropComponent.propDecorators = {
        shown: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return BackdropComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoBackdropModule = /** @class */ (function () {
    function IgoBackdropModule() {
    }
    /**
     * @return {?}
     */
    IgoBackdropModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoBackdropModule,
            providers: []
        };
    };
    IgoBackdropModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"]],
                    declarations: [BackdropComponent],
                    exports: [BackdropComponent]
                },] }
    ];
    return IgoBackdropModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ClickoutDirective = /** @class */ (function () {
    function ClickoutDirective(el) {
        this.el = el;
        this.clickout = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    /**
     * @param {?} event
     * @param {?} target
     * @return {?}
     */
    ClickoutDirective.prototype.handleMouseClick = /**
     * @param {?} event
     * @param {?} target
     * @return {?}
     */
    function (event, target) {
        if (!target) {
            return;
        }
        if (!this.el.nativeElement.contains(target)) {
            this.clickout.emit(event);
        }
    };
    ClickoutDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoClickout]'
                },] }
    ];
    /** @nocollapse */
    ClickoutDirective.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ElementRef"] }
    ]; };
    ClickoutDirective.propDecorators = {
        clickout: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        handleMouseClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['document:click', ['$event', '$event.target'],] }]
    };
    return ClickoutDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoClickoutModule = /** @class */ (function () {
    function IgoClickoutModule() {
    }
    /**
     * @return {?}
     */
    IgoClickoutModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoClickoutModule,
            providers: []
        };
    };
    IgoClickoutModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [ClickoutDirective],
                    exports: [ClickoutDirective]
                },] }
    ];
    return IgoClickoutModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ClonePipe = /** @class */ (function () {
    function ClonePipe() {
    }
    /**
     * @param {?} value
     * @param {?=} args
     * @return {?}
     */
    ClonePipe.prototype.transform = /**
     * @param {?} value
     * @param {?=} args
     * @return {?}
     */
    function (value, args) {
        if (value === undefined) {
            return value;
        }
        if (value instanceof Array) {
            return value.map((/**
             * @param {?} obj
             * @return {?}
             */
            function (obj) { return Object.assign(Object.create(obj), obj); }));
        }
        else {
            return Object.assign(Object.create(value), value);
        }
    };
    ClonePipe.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Pipe"], args: [{
                    name: 'clone'
                },] }
    ];
    return ClonePipe;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoCloneModule = /** @class */ (function () {
    function IgoCloneModule() {
    }
    /**
     * @return {?}
     */
    IgoCloneModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoCloneModule,
            providers: []
        };
    };
    IgoCloneModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [ClonePipe],
                    exports: [ClonePipe]
                },] }
    ];
    return IgoCloneModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var CollapseDirective = /** @class */ (function () {
    function CollapseDirective(renderer, el) {
        this.renderer = renderer;
        this.el = el;
        this._collapsed = false;
        this.toggle = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(CollapseDirective.prototype, "target", {
        get: /**
         * @return {?}
         */
        function () {
            return this._target;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._target = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CollapseDirective.prototype, "collapsed", {
        get: /**
         * @return {?}
         */
        function () {
            return this._collapsed;
        },
        set: /**
         * @param {?} collapsed
         * @return {?}
         */
        function (collapsed) {
            collapsed ? this.collapseTarget() : this.expandTarget();
            this._collapsed = collapsed;
            this.toggle.emit(collapsed);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    CollapseDirective.prototype.click = /**
     * @return {?}
     */
    function () {
        this.collapsed = !this.collapsed;
    };
    /**
     * @private
     * @return {?}
     */
    CollapseDirective.prototype.collapseTarget = /**
     * @private
     * @return {?}
     */
    function () {
        this.renderer.addClass(this.target, 'igo-collapsed');
        this.renderer.addClass(this.el.nativeElement, 'collapsed');
    };
    /**
     * @private
     * @return {?}
     */
    CollapseDirective.prototype.expandTarget = /**
     * @private
     * @return {?}
     */
    function () {
        this.renderer.removeClass(this.target, 'igo-collapsed');
        this.renderer.removeClass(this.el.nativeElement, 'collapsed');
    };
    CollapseDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoCollapse]'
                },] }
    ];
    /** @nocollapse */
    CollapseDirective.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Renderer2"] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ElementRef"] }
    ]; };
    CollapseDirective.propDecorators = {
        target: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        collapsed: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        toggle: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        click: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['click',] }]
    };
    return CollapseDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var CollapsibleComponent = /** @class */ (function () {
    function CollapsibleComponent() {
        this._title = '';
        this._collapsed = false;
    }
    Object.defineProperty(CollapsibleComponent.prototype, "title", {
        get: /**
         * @return {?}
         */
        function () {
            return this._title;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._title = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CollapsibleComponent.prototype, "collapsed", {
        get: /**
         * @return {?}
         */
        function () {
            return this._collapsed;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._collapsed = value;
        },
        enumerable: true,
        configurable: true
    });
    CollapsibleComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-collapsible',
                    template: "<mat-list-item>\r\n  <mat-icon\r\n    svgIcon=\"chevron-up\" \r\n    class=\"igo-chevron\"\r\n    mat-list-avatar\r\n    igoCollapse\r\n    [target]=\"content\"\r\n    [collapsed]=\"collapsed\">\r\n  </mat-icon>\r\n  <h4 matLine>{{title}}</h4>\r\n</mat-list-item>\r\n\r\n<div #content>\r\n  <ng-content></ng-content>\r\n</div>\r\n",
                    styles: [":host>>>.mat-list .mat-list-item.mat-list-avatar{height:auto;width:auto;padding:0}mat-list-item{overflow:hidden}"]
                }] }
    ];
    /** @nocollapse */
    CollapsibleComponent.ctorParameters = function () { return []; };
    CollapsibleComponent.propDecorators = {
        title: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        collapsed: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return CollapsibleComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoCollapsibleModule = /** @class */ (function () {
    function IgoCollapsibleModule() {
    }
    /**
     * @return {?}
     */
    IgoCollapsibleModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoCollapsibleModule,
            providers: []
        };
    };
    IgoCollapsibleModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [_angular_material__WEBPACK_IMPORTED_MODULE_7__["MatIconModule"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatListModule"]],
                    declarations: [CollapsibleComponent, CollapseDirective],
                    exports: [CollapsibleComponent, CollapseDirective]
                },] }
    ];
    return IgoCollapsibleModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ConfirmDialogComponent = /** @class */ (function () {
    function ConfirmDialogComponent(dialogRef) {
        this.dialogRef = dialogRef;
    }
    ConfirmDialogComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-confirm-dialog',
                    template: "<h2 mat-dialog-title>{{'igo.common.confirmDialog.title' |\u00A0translate}}</h2>\r\n<div mat-dialog-content>{{confirmMessage}}</div>\r\n<div mat-dialog-actions>\r\n  <button mat-button color=\"primary\" (click)=\"dialogRef.close(true)\">{{'igo.common.confirmDialog.confirmBtn' | translate}}</button>\r\n  <button mat-button (click)=\"dialogRef.close(false)\">{{'igo.common.confirmDialog.cancelBtn' |\u00A0translate}}</button>\r\n</div>\r\n",
                    styles: ["h2{margin:5px 0 10px}div[mat-dialog-content]{max-width:200px}div[mat-dialog-actions]{margin:10px 0 0}"]
                }] }
    ];
    /** @nocollapse */
    ConfirmDialogComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatDialogRef"] }
    ]; };
    return ConfirmDialogComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ConfirmDialogService = /** @class */ (function () {
    function ConfirmDialogService(dialog) {
        this.dialog = dialog;
    }
    /**
     * @param {?} message
     * @return {?}
     */
    ConfirmDialogService.prototype.open = /**
     * @param {?} message
     * @return {?}
     */
    function (message) {
        /** @type {?} */
        var dialogRef = this.dialog.open(ConfirmDialogComponent, {
            disableClose: false
        });
        dialogRef.componentInstance.confirmMessage = message;
        return dialogRef.afterClosed();
    };
    ConfirmDialogService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"] }
    ];
    /** @nocollapse */
    ConfirmDialogService.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatDialog"] }
    ]; };
    return ConfirmDialogService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoConfirmDialogModule = /** @class */ (function () {
    function IgoConfirmDialogModule() {
    }
    /**
     * @return {?}
     */
    IgoConfirmDialogModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoConfirmDialogModule,
            providers: []
        };
    };
    IgoConfirmDialogModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [_angular_material__WEBPACK_IMPORTED_MODULE_7__["MatButtonModule"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatDialogModule"], _igo2_core__WEBPACK_IMPORTED_MODULE_6__["IgoLanguageModule"]],
                    declarations: [ConfirmDialogComponent],
                    exports: [ConfirmDialogComponent],
                    providers: [ConfirmDialogService],
                    entryComponents: [ConfirmDialogComponent]
                },] }
    ];
    return IgoConfirmDialogModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextMenuDirective = /** @class */ (function () {
    function ContextMenuDirective(overlay, viewContainerRef, elementRef) {
        this.overlay = overlay;
        this.viewContainerRef = viewContainerRef;
        this.elementRef = elementRef;
        this.menuPosition = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    /**
     * @param {?} __0
     * @return {?}
     */
    ContextMenuDirective.prototype.onContextMenu = /**
     * @param {?} __0
     * @return {?}
     */
    function (_a) {
        var _this = this;
        var x = _a.x, y = _a.y;
        this.close();
        event.preventDefault();
        this.menuPosition.emit({ x: x, y: y });
        this.overlayRef = null;
        /** @type {?} */
        var positionStrategy = this.overlay
            .position()
            .flexibleConnectedTo({ x: x, y: y })
            .withPositions([
            {
                originX: 'end',
                originY: 'bottom',
                overlayX: 'start',
                overlayY: 'top'
            }
        ]);
        this.overlayRef = this.overlay.create({
            positionStrategy: positionStrategy,
            scrollStrategy: this.overlay.scrollStrategies.close()
        });
        this.overlayRef.attach(new _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_0__["TemplatePortal"](this.menuContext, this.viewContainerRef, {
            $implicit: undefined
        }));
        this.sub = Object(rxjs__WEBPACK_IMPORTED_MODULE_14__["fromEvent"])(document, 'click')
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["filter"])((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            /** @type {?} */
            var clickTarget = (/** @type {?} */ (event.target));
            _this.close();
            return (!!_this.overlayRef &&
                !_this.overlayRef.overlayElement.contains(clickTarget));
        })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["take"])(1))
            .subscribe((/**
         * @return {?}
         */
        function () { return _this.close(); }));
        this.sub = Object(rxjs__WEBPACK_IMPORTED_MODULE_14__["fromEvent"])(document, 'contextmenu')
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["filter"])((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            /** @type {?} */
            var clickTarget = (/** @type {?} */ (event.target));
            if (clickTarget &&
                !_this.elementRef.nativeElement.contains(clickTarget) &&
                !_this.overlayRef.overlayElement.contains(clickTarget)) {
                return true;
            }
            else {
                event.preventDefault();
            }
        })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["take"])(1))
            .subscribe((/**
         * @return {?}
         */
        function () { return _this.close(); }));
    };
    /**
     * @return {?}
     */
    ContextMenuDirective.prototype.close = /**
     * @return {?}
     */
    function () {
        if (this.overlayRef) {
            this.overlayRef.dispose();
            this.overlayRef = null;
        }
    };
    ContextMenuDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoContextMenu]'
                },] }
    ];
    /** @nocollapse */
    ContextMenuDirective.ctorParameters = function () { return [
        { type: _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_1__["Overlay"] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ViewContainerRef"] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ElementRef"] }
    ]; };
    ContextMenuDirective.propDecorators = {
        menuContext: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"], args: ['igoContextMenu',] }],
        menuPosition: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        onContextMenu: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['contextmenu', ['$event'],] }]
    };
    return ContextMenuDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoContextMenuModule = /** @class */ (function () {
    function IgoContextMenuModule() {
    }
    /**
     * @return {?}
     */
    IgoContextMenuModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoContextMenuModule,
            providers: []
        };
    };
    IgoContextMenuModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [ContextMenuDirective],
                    exports: [ContextMenuDirective]
                },] }
    ];
    return IgoContextMenuModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var CustomHtmlComponent = /** @class */ (function () {
    function CustomHtmlComponent() {
        this._html = '';
    }
    Object.defineProperty(CustomHtmlComponent.prototype, "html", {
        get: /**
         * @return {?}
         */
        function () {
            return this._html;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._html = value;
        },
        enumerable: true,
        configurable: true
    });
    CustomHtmlComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-custom-html',
                    template: "<div class=\"custom-html\" [innerHTML]=\"html | sanitizeHtml \"></div>\r\n",
                    styles: [".custom-html{padding:20px}"]
                }] }
    ];
    /** @nocollapse */
    CustomHtmlComponent.ctorParameters = function () { return []; };
    CustomHtmlComponent.propDecorators = {
        html: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return CustomHtmlComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var SanitizeHtmlPipe = /** @class */ (function () {
    function SanitizeHtmlPipe(_sanitizer) {
        this._sanitizer = _sanitizer;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    SanitizeHtmlPipe.prototype.transform = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        return this._sanitizer.bypassSecurityTrustHtml(v);
    };
    SanitizeHtmlPipe.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Pipe"], args: [{ name: 'sanitizeHtml' },] }
    ];
    /** @nocollapse */
    SanitizeHtmlPipe.ctorParameters = function () { return [
        { type: _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__["DomSanitizer"] }
    ]; };
    return SanitizeHtmlPipe;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoCustomHtmlModule = /** @class */ (function () {
    function IgoCustomHtmlModule() {
    }
    /**
     * @return {?}
     */
    IgoCustomHtmlModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoCustomHtmlModule
        };
    };
    IgoCustomHtmlModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatButtonModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_6__["IgoLanguageModule"]
                    ],
                    exports: [SanitizeHtmlPipe, CustomHtmlComponent],
                    declarations: [SanitizeHtmlPipe, CustomHtmlComponent]
                },] }
    ];
    return IgoCustomHtmlModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var DragAndDropDirective = /** @class */ (function () {
    function DragAndDropDirective() {
        this.allowedExtensions = [];
        this.filesDropped = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.filesInvalid = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.background = 'inherit';
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    DragAndDropDirective.prototype.onDragOver = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        evt.preventDefault();
        evt.stopPropagation();
        this.background = '#999';
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    DragAndDropDirective.prototype.onDragLeave = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        evt.preventDefault();
        evt.stopPropagation();
        this.background = 'inherit';
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    DragAndDropDirective.prototype.onDrop = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        evt.preventDefault();
        evt.stopPropagation();
        this.background = 'inherit';
        /** @type {?} */
        var filesObj = this.validExtensions(evt);
        if (filesObj.valid.length) {
            this.filesDropped.emit(filesObj.valid);
        }
        if (filesObj.invalid.length) {
            this.filesInvalid.emit(filesObj.invalid);
        }
    };
    /**
     * @private
     * @param {?} evt
     * @return {?}
     */
    DragAndDropDirective.prototype.validExtensions = /**
     * @private
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        var e_1, _a;
        /** @type {?} */
        var files = evt.dataTransfer.files;
        /** @type {?} */
        var filesObj = {
            valid: [],
            invalid: []
        };
        if (files.length > 0) {
            try {
                for (var files_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__values"])(files), files_1_1 = files_1.next(); !files_1_1.done; files_1_1 = files_1.next()) {
                    var file = files_1_1.value;
                    /** @type {?} */
                    var ext = file.name.split('.')[file.name.split('.').length - 1];
                    if (this.allowedExtensions.length === 0 ||
                        (this.allowedExtensions.lastIndexOf(ext) !== -1 &&
                            file.size !== 0)) {
                        filesObj.valid.push(file);
                    }
                    else {
                        filesObj.invalid.push(file);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (files_1_1 && !files_1_1.done && (_a = files_1.return)) _a.call(files_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        return filesObj;
    };
    DragAndDropDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoDragAndDrop]'
                },] }
    ];
    DragAndDropDirective.propDecorators = {
        allowedExtensions: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        filesDropped: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        filesInvalid: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        background: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostBinding"], args: ['style.background',] }],
        onDragOver: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['dragover', ['$event'],] }],
        onDragLeave: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['dragleave', ['$event'],] }],
        onDrop: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['drop', ['$event'],] }]
    };
    return DragAndDropDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoDrapDropModule = /** @class */ (function () {
    function IgoDrapDropModule() {
    }
    /**
     * @return {?}
     */
    IgoDrapDropModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoDrapDropModule,
            providers: []
        };
    };
    IgoDrapDropModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [DragAndDropDirective],
                    exports: [DragAndDropDirective]
                },] }
    ];
    return IgoDrapDropModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This class is used in the DynamicComponentOutlet component. It holds
 * a reference to a component factory and can render that component
 * in a target element on demand. It's also possible to set inputs
 * and to subscribe to outputs.
 * @template C
 */
var  /**
 * This class is used in the DynamicComponentOutlet component. It holds
 * a reference to a component factory and can render that component
 * in a target element on demand. It's also possible to set inputs
 * and to subscribe to outputs.
 * @template C
 */
DynamicComponent = /** @class */ (function () {
    function DynamicComponent(componentFactory) {
        this.componentFactory = componentFactory;
        /**
         * Subscriptions to the component's outputs. Those need
         * to be unsubscribed when the component is destroyed.
         */
        this.subscriptions = [];
        /**
         * Component inputs
         */
        this.inputs = {};
        /**
         * Subscribers to the component's outputs
         */
        this.subscribers = {};
    }
    /**
     * Render the component to a target element.
     * Set it's inputs and subscribe to it's outputs.
     * @param target Target element
     */
    /**
     * Render the component to a target element.
     * Set it's inputs and subscribe to it's outputs.
     * @param {?} target Target element
     * @return {?}
     */
    DynamicComponent.prototype.setTarget = /**
     * Render the component to a target element.
     * Set it's inputs and subscribe to it's outputs.
     * @param {?} target Target element
     * @return {?}
     */
    function (target) {
        this.target = target;
        this.componentRef = target.createComponent(this.componentFactory);
        this.updateInputs(this.inputs);
        this.updateSubscribers(this.subscribers);
    };
    /**
     * Destroy this component. That means, removing from it's target
     * element and unsubscribing to it's outputs.
     */
    /**
     * Destroy this component. That means, removing from it's target
     * element and unsubscribing to it's outputs.
     * @return {?}
     */
    DynamicComponent.prototype.destroy = /**
     * Destroy this component. That means, removing from it's target
     * element and unsubscribing to it's outputs.
     * @return {?}
     */
    function () {
        if (this.target !== undefined) {
            this.target.clear();
        }
        if (this.componentRef !== undefined) {
            this.componentRef.destroy();
            this.componentRef = undefined;
        }
        this.unsubscribeAll();
    };
    /**
     * Update the component inputs. This is an update so any
     * key not defined won't be overwritten.
     */
    /**
     * Update the component inputs. This is an update so any
     * key not defined won't be overwritten.
     * @param {?} inputs
     * @return {?}
     */
    DynamicComponent.prototype.updateInputs = /**
     * Update the component inputs. This is an update so any
     * key not defined won't be overwritten.
     * @param {?} inputs
     * @return {?}
     */
    function (inputs) {
        this.inputs = inputs;
        if (this.componentRef === undefined) {
            return;
        }
        /** @type {?} */
        var instance = this.componentRef.instance;
        /** @type {?} */
        var allowedInputs = this.componentFactory.inputs;
        allowedInputs.forEach((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var key = value.propName;
            if (inputs.hasOwnProperty(key)) {
                instance[key] = inputs[key];
            }
        }));
        if (typeof ((/** @type {?} */ (instance))).onUpdateInputs === 'function') {
            ((/** @type {?} */ (instance))).onUpdateInputs();
        }
    };
    /**
     * Update the component subscribers. This is an update so any
     * key not defined won't be overwritten.
     */
    /**
     * Update the component subscribers. This is an update so any
     * key not defined won't be overwritten.
     * @param {?} subscribers
     * @return {?}
     */
    DynamicComponent.prototype.updateSubscribers = /**
     * Update the component subscribers. This is an update so any
     * key not defined won't be overwritten.
     * @param {?} subscribers
     * @return {?}
     */
    function (subscribers) {
        var _this = this;
        this.subscribers = subscribers;
        if (this.componentRef === undefined) {
            return;
        }
        /** @type {?} */
        var instance = this.componentRef.instance;
        /** @type {?} */
        var allowedSubscribers = this.componentFactory.outputs;
        allowedSubscribers.forEach((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var key = value.propName;
            if (subscribers.hasOwnProperty(key)) {
                /** @type {?} */
                var emitter_1 = instance[key];
                /** @type {?} */
                var subscriber = subscribers[key];
                if (Array.isArray(subscriber)) {
                    subscriber.forEach((/**
                     * @param {?} _subscriber
                     * @return {?}
                     */
                    function (_subscriber) {
                        _this.subscriptions.push(emitter_1.subscribe(_subscriber));
                    }));
                }
                else {
                    _this.subscriptions.push(emitter_1.subscribe(subscriber));
                }
            }
        }));
    };
    /**
     * Unsubscribe to all outputs.
     */
    /**
     * Unsubscribe to all outputs.
     * @private
     * @return {?}
     */
    DynamicComponent.prototype.unsubscribeAll = /**
     * Unsubscribe to all outputs.
     * @private
     * @return {?}
     */
    function () {
        this.subscriptions.forEach((/**
         * @param {?} s
         * @return {?}
         */
        function (s) { return s.unsubscribe(); }));
        this.subscriptions = [];
    };
    return DynamicComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service to creates DynamicComponent instances from base component classes
 */
var DynamicComponentService = /** @class */ (function () {
    function DynamicComponentService(resolver) {
        this.resolver = resolver;
    }
    /**
     * Creates a DynamicComponent instance from a base component class
     * @param componentCls The component class
     * @returns DynamicComponent instance
     */
    /**
     * Creates a DynamicComponent instance from a base component class
     * @param {?} componentCls The component class
     * @return {?} DynamicComponent instance
     */
    DynamicComponentService.prototype.create = /**
     * Creates a DynamicComponent instance from a base component class
     * @param {?} componentCls The component class
     * @return {?} DynamicComponent instance
     */
    function (componentCls) {
        /** @type {?} */
        var factory = this.resolver.resolveComponentFactory((/** @type {?} */ (componentCls)));
        return new DynamicComponent(factory);
    };
    DynamicComponentService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    DynamicComponentService.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ComponentFactoryResolver"] }
    ]; };
    /** @nocollapse */ DynamicComponentService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["defineInjectable"])({ factory: function DynamicComponentService_Factory() { return new DynamicComponentService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_angular_core__WEBPACK_IMPORTED_MODULE_13__["ComponentFactoryResolver"])); }, token: DynamicComponentService, providedIn: "root" });
    return DynamicComponentService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var DynamicOutletComponent = /** @class */ (function () {
    function DynamicOutletComponent(dynamicComponentService, cdRef) {
        this.dynamicComponentService = dynamicComponentService;
        this.cdRef = cdRef;
        /**
         * The dynamic component inputs
         */
        this.inputs = {};
        /**
         * The subscribers to the dynamic component outputs
         */
        this.subscribers = {};
    }
    /**
     * If the dynamic component changes, create it.
     * If the inputs or subscribers change, update the current component's
     * inputs or subscribers.
     * @internal
     */
    /**
     * If the dynamic component changes, create it.
     * If the inputs or subscribers change, update the current component's
     * inputs or subscribers.
     * \@internal
     * @param {?} changes
     * @return {?}
     */
    DynamicOutletComponent.prototype.ngOnChanges = /**
     * If the dynamic component changes, create it.
     * If the inputs or subscribers change, update the current component's
     * inputs or subscribers.
     * \@internal
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var component = changes.component;
        /** @type {?} */
        var inputs = changes.inputs;
        /** @type {?} */
        var subscribers = changes.subscribers;
        /** @type {?} */
        var eq = _igo2_utils__WEBPACK_IMPORTED_MODULE_10__["ObjectUtils"].objectsAreEquivalent;
        if (component && component.currentValue !== component.previousValue) {
            this.createComponent(component.currentValue);
        }
        else {
            /** @type {?} */
            var inputsAreEquivalents = inputs && eq(inputs.currentValue || {}, inputs.previousValue || {});
            /** @type {?} */
            var subscribersAreEquivalents = subscribers &&
                eq(subscribers.currentValue || {}, subscribers.previousValue || {});
            if (inputsAreEquivalents === false) {
                this.updateInputs();
            }
            if (subscribersAreEquivalents === false) {
                this.updateSubscribers();
            }
        }
        this.cdRef.detectChanges();
    };
    /**
     * Destroy the dynamic component and all it's subscribers
     * @internal
     */
    /**
     * Destroy the dynamic component and all it's subscribers
     * \@internal
     * @return {?}
     */
    DynamicOutletComponent.prototype.ngOnDestroy = /**
     * Destroy the dynamic component and all it's subscribers
     * \@internal
     * @return {?}
     */
    function () {
        if (this.dynamicComponent) {
            this.dynamicComponent.destroy();
        }
    };
    /**
     * Create a  DynamicComponent out of the component class and render it.
     * @internal
     */
    /**
     * Create a  DynamicComponent out of the component class and render it.
     * \@internal
     * @private
     * @param {?} component
     * @return {?}
     */
    DynamicOutletComponent.prototype.createComponent = /**
     * Create a  DynamicComponent out of the component class and render it.
     * \@internal
     * @private
     * @param {?} component
     * @return {?}
     */
    function (component) {
        if (this.dynamicComponent !== undefined) {
            this.dynamicComponent.destroy();
        }
        this.dynamicComponent =
            component instanceof DynamicComponent
                ? component
                : this.dynamicComponentService.create(component);
        this.renderComponent();
    };
    /**
     * Create and render the dynamic component. Set it's inputs and subscribers
     * @internal
     */
    /**
     * Create and render the dynamic component. Set it's inputs and subscribers
     * \@internal
     * @private
     * @return {?}
     */
    DynamicOutletComponent.prototype.renderComponent = /**
     * Create and render the dynamic component. Set it's inputs and subscribers
     * \@internal
     * @private
     * @return {?}
     */
    function () {
        this.updateInputs();
        this.updateSubscribers();
        this.dynamicComponent.setTarget(this.target);
    };
    /**
     * Update the dynamic component inputs. This is an update so any
     * key not defined won't be overwritten.
     * @internal
     */
    /**
     * Update the dynamic component inputs. This is an update so any
     * key not defined won't be overwritten.
     * \@internal
     * @private
     * @return {?}
     */
    DynamicOutletComponent.prototype.updateInputs = /**
     * Update the dynamic component inputs. This is an update so any
     * key not defined won't be overwritten.
     * \@internal
     * @private
     * @return {?}
     */
    function () {
        this.dynamicComponent.updateInputs(this.inputs);
    };
    /**
     * Update the dynamic component subscribers. This is an update so any
     * key not defined won't be overwritten.
     * @internal
     */
    /**
     * Update the dynamic component subscribers. This is an update so any
     * key not defined won't be overwritten.
     * \@internal
     * @private
     * @return {?}
     */
    DynamicOutletComponent.prototype.updateSubscribers = /**
     * Update the dynamic component subscribers. This is an update so any
     * key not defined won't be overwritten.
     * \@internal
     * @private
     * @return {?}
     */
    function () {
        this.dynamicComponent.updateSubscribers(this.subscribers);
    };
    DynamicOutletComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-dynamic-outlet',
                    template: "<ng-template #target></ng-template>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{display:block;width:100%;height:100%}"]
                }] }
    ];
    /** @nocollapse */
    DynamicOutletComponent.ctorParameters = function () { return [
        { type: DynamicComponentService },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectorRef"] }
    ]; };
    DynamicOutletComponent.propDecorators = {
        component: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        inputs: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        subscribers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        target: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ViewChild"], args: ['target', { read: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ViewContainerRef"] },] }]
    };
    return DynamicOutletComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoDynamicOutletModule = /** @class */ (function () {
    function IgoDynamicOutletModule() {
    }
    IgoDynamicOutletModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"]
                    ],
                    exports: [
                        DynamicOutletComponent
                    ],
                    declarations: [
                        DynamicOutletComponent
                    ]
                },] }
    ];
    return IgoDynamicOutletModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoDynamicComponentModule = /** @class */ (function () {
    function IgoDynamicComponentModule() {
    }
    IgoDynamicComponentModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        IgoDynamicOutletModule
                    ],
                    exports: [
                        IgoDynamicOutletModule
                    ],
                    providers: [
                        DynamicComponentService
                    ]
                },] }
    ];
    return IgoDynamicComponentModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var FlexibleComponent = /** @class */ (function () {
    function FlexibleComponent(el, mediaService) {
        this.el = el;
        this.mediaService = mediaService;
        this._initial = '0';
        this._collapsed = '0';
        this._expanded = '100%';
        this._initialMobile = this.expanded;
        this._collapsedMobile = this.collapsed;
        this._expandedMobile = this.expanded;
        this._direction = 'column';
        this._state = 'initial';
    }
    Object.defineProperty(FlexibleComponent.prototype, "initial", {
        get: /**
         * @return {?}
         */
        function () {
            return this._initial;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._initial = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlexibleComponent.prototype, "collapsed", {
        get: /**
         * @return {?}
         */
        function () {
            return this._collapsed;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._collapsed = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlexibleComponent.prototype, "expanded", {
        get: /**
         * @return {?}
         */
        function () {
            return this._expanded;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._expanded = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlexibleComponent.prototype, "initialMobile", {
        get: /**
         * @return {?}
         */
        function () {
            return this._initialMobile;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._initialMobile = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlexibleComponent.prototype, "collapsedMobile", {
        get: /**
         * @return {?}
         */
        function () {
            return this._collapsedMobile;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._collapsedMobile = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlexibleComponent.prototype, "expandedMobile", {
        get: /**
         * @return {?}
         */
        function () {
            return this._expandedMobile;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._expandedMobile = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlexibleComponent.prototype, "direction", {
        get: /**
         * @return {?}
         */
        function () {
            return this._direction;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._direction = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlexibleComponent.prototype, "state", {
        get: /**
         * @return {?}
         */
        function () {
            return this._state;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            var _this = this;
            /** @type {?} */
            var sizes = {
                initial: this.initial,
                collapsed: this.collapsed,
                expanded: this.expanded
            };
            /** @type {?} */
            var media = this.mediaService.media$.value;
            if (media === 'mobile') {
                Object.assign(sizes, {
                    initial: this.initialMobile,
                    collapsed: this.collapsedMobile,
                    expanded: this.expandedMobile
                });
            }
            /** @type {?} */
            var size = sizes[value];
            if (size !== undefined) {
                this.setSize(size);
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this._state = value;
                }), FlexibleComponent.transitionTime);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FlexibleComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.el.nativeElement.className += this.direction;
        // Since this component supports different sizes
        // on mobile, force a redraw when the media changes
        this.mediaService.media$.subscribe((/**
         * @param {?} media
         * @return {?}
         */
        function (media) { return (_this.state = _this.state); }));
    };
    /**
     * @private
     * @param {?} size
     * @return {?}
     */
    FlexibleComponent.prototype.setSize = /**
     * @private
     * @param {?} size
     * @return {?}
     */
    function (size) {
        this._state = 'transition';
        if (this.direction === 'column') {
            this.main.nativeElement.style.height = size;
        }
        else if (this.direction === 'row') {
            this.main.nativeElement.style.width = size;
        }
    };
    FlexibleComponent.transitionTime = 250;
    FlexibleComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-flexible',
                    template: "<div #flexibleMain class=\"igo-flexible-main {{state}} {{direction}}\">\r\n  <div class=\"igo-container\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>\r\n<div class=\"igo-flexible-fill\">\r\n  <div>\r\n  \t<div class=\"igo-container\">\r\n      <ng-content select=\"[igoFlexibleFill]\"></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                    styles: [":host{display:flex;height:100%;width:100%}:host.column{flex-direction:column}:host.row{flex-direction:row}.igo-flexible-main{flex:0 0 auto;overflow:hidden}.igo-flexible-main.column{transition:height .25s ease-in}.igo-flexible-main.row{transition:width .25s ease-in}.igo-flexible-fill>div{position:absolute;top:0;bottom:0;left:0;right:0}.igo-container{width:calc(100% - 2 * 5px);height:100%;padding:5px 0;margin:0 5px;overflow:hidden;position:relative}::ng-deep .igo-flexible-fill{flex:1 1 auto;overflow:hidden;position:relative}::ng-deep .igo-content{height:100%;width:100%;overflow:auto}::ng-deep igo-panel{height:100%}"]
                }] }
    ];
    /** @nocollapse */
    FlexibleComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ElementRef"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_6__["MediaService"] }
    ]; };
    FlexibleComponent.propDecorators = {
        main: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ViewChild"], args: ['flexibleMain',] }],
        initial: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        collapsed: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        expanded: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        initialMobile: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        collapsedMobile: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        expandedMobile: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        direction: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        state: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return FlexibleComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoFlexibleModule = /** @class */ (function () {
    function IgoFlexibleModule() {
    }
    /**
     * @return {?}
     */
    IgoFlexibleModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoFlexibleModule,
            providers: []
        };
    };
    IgoFlexibleModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [FlexibleComponent],
                    exports: [FlexibleComponent]
                },] }
    ];
    return IgoFlexibleModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} control
 * @return {?}
 */
function formControlIsRequired(control) {
    if (control.validator) {
        /** @type {?} */
        var validator = control.validator((/** @type {?} */ ({})));
        if (validator && validator.required) {
            return true;
        }
    }
    if (((/** @type {?} */ (control))).controls) {
        /** @type {?} */
        var requiredControl = Object.keys(((/** @type {?} */ (control))).controls).find((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            return formControlIsRequired(((/** @type {?} */ (control))).controls[key]);
        }));
        return requiredControl !== undefined;
    }
    return false;
}
/**
 * @return {?}
 */
function getDefaultErrorMessages() {
    return {
        required: 'igo.common.form.errors.required'
    };
}
/**
 * @param {?} control
 * @param {?} messages
 * @return {?}
 */
function getControlErrorMessage(control, messages) {
    /** @type {?} */
    var errors = control.errors || {};
    /** @type {?} */
    var errorKeys = Object.keys(errors);
    /** @type {?} */
    var errorMessages = errorKeys
        .map((/**
     * @param {?} key
     * @return {?}
     */
    function (key) { return messages[key]; }))
        .filter((/**
     * @param {?} message
     * @return {?}
     */
    function (message) { return message !== undefined; }));
    return errorMessages.length > 0 ? errorMessages[0] : '';
}
/**
 * @param {?} form
 * @return {?}
 */
function getAllFormFields(form) {
    return form.groups.reduce((/**
     * @param {?} acc
     * @param {?} group
     * @return {?}
     */
    function (acc, group) {
        return acc.concat(group.fields);
    }), [].concat(form.fields));
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * A configurable form
 */
var FormComponent = /** @class */ (function () {
    function FormComponent() {
        /**
         * Event emitted when the form is submitted
         */
        this.submitForm = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(FormComponent.prototype, "hasButtons", {
        get: /**
         * @return {?}
         */
        function () {
            return this.buttons.nativeElement.children.length !== 0;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Is the entity or the template change, recreate the form or repopulate it.
     * @internal
     */
    /**
     * Is the entity or the template change, recreate the form or repopulate it.
     * \@internal
     * @param {?} changes
     * @return {?}
     */
    FormComponent.prototype.ngOnChanges = /**
     * Is the entity or the template change, recreate the form or repopulate it.
     * \@internal
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var formData = changes.formData;
        if (formData && formData.currentValue !== formData.previousValue) {
            if (formData.currentValue === undefined) {
                this.clear();
            }
            else {
                this.setData(formData.currentValue);
            }
        }
    };
    /**
     * Transform the form data to a feature and emit an event
     * @param event Form submit event
     * @internal
     */
    /**
     * Transform the form data to a feature and emit an event
     * \@internal
     * @return {?}
     */
    FormComponent.prototype.onSubmit = /**
     * Transform the form data to a feature and emit an event
     * \@internal
     * @return {?}
     */
    function () {
        this.submitForm.emit(this.getData());
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    FormComponent.prototype.setData = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.form.fields.forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            field.control.setValue(typy__WEBPACK_IMPORTED_MODULE_3___default()(data, field.name).safeObject);
        }));
        this.form.groups.forEach((/**
         * @param {?} group
         * @return {?}
         */
        function (group) {
            group.fields.forEach((/**
             * @param {?} field
             * @return {?}
             */
            function (field) {
                field.control.setValue(typy__WEBPACK_IMPORTED_MODULE_3___default()(data, field.name).safeObject);
            }));
        }));
    };
    /**
     * @private
     * @return {?}
     */
    FormComponent.prototype.getData = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var data = {};
        getAllFormFields(this.form).forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            _this.updateDataWithFormField(data, field);
        }));
        return data;
    };
    /**
     * @private
     * @param {?} data
     * @param {?} field
     * @return {?}
     */
    FormComponent.prototype.updateDataWithFormField = /**
     * @private
     * @param {?} data
     * @param {?} field
     * @return {?}
     */
    function (data, field) {
        /** @type {?} */
        var control = field.control;
        if (!control.disabled) {
            data[field.name] = control.value;
        }
    };
    /**
     * Clear form
     */
    /**
     * Clear form
     * @private
     * @return {?}
     */
    FormComponent.prototype.clear = /**
     * Clear form
     * @private
     * @return {?}
     */
    function () {
        this.form.control.reset();
    };
    FormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-form',
                    template: "\r\n<form\r\n  [formGroup]=\"form.control\"\r\n  (ngSubmit)=\"onSubmit()\">\r\n  <div class=\"igo-form-body\" [ngClass]=\"{'igo-form-body-with-buttons': hasButtons}\">\r\n    <div class=\"igo-form-content\">\r\n      <ng-content></ng-content>\r\n    </div>\r\n    <div #buttons class=\"igo-form-buttons\">\r\n      <ng-content select=\"[formButtons]\"></ng-content>\r\n    </div>\r\n  </div>\r\n</form>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{display:block}form{width:100%;height:100%}.igo-form-body,.igo-form-content{height:100%}.igo-form-body-with-buttons .igo-form-content{height:calc(100% - 56px)}.igo-form-content{display:flex}"]
                }] }
    ];
    /** @nocollapse */
    FormComponent.ctorParameters = function () { return []; };
    FormComponent.propDecorators = {
        form: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        formData: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        submitForm: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        buttons: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ViewChild"], args: ['buttons',] }]
    };
    return FormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoFormFormModule = /** @class */ (function () {
    function IgoFormFormModule() {
    }
    IgoFormFormModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_5__["ReactiveFormsModule"]
                    ],
                    exports: [
                        FormComponent,
                        _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_5__["ReactiveFormsModule"]
                    ],
                    declarations: [
                        FormComponent
                    ]
                },] }
    ];
    return IgoFormFormModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service where all available form fields are registered.
 */
var FormFieldService = /** @class */ (function () {
    function FormFieldService() {
    }
    /**
     * @param {?} type
     * @param {?} component
     * @return {?}
     */
    FormFieldService.register = /**
     * @param {?} type
     * @param {?} component
     * @return {?}
     */
    function (type, component) {
        FormFieldService.fields[type] = component;
    };
    /**
     * Return field component by type
     * @param type Field type
     * @returns Field component
     */
    /**
     * Return field component by type
     * @param {?} type Field type
     * @return {?} Field component
     */
    FormFieldService.prototype.getFieldByType = /**
     * Return field component by type
     * @param {?} type Field type
     * @return {?} Field component
     */
    function (type) {
        return FormFieldService.fields[type];
    };
    FormFieldService.fields = {};
    FormFieldService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    FormFieldService.ctorParameters = function () { return []; };
    /** @nocollapse */ FormFieldService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["defineInjectable"])({ factory: function FormFieldService_Factory() { return new FormFieldService(); }, token: FormFieldService, providedIn: "root" });
    return FormFieldService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var FormService = /** @class */ (function () {
    function FormService(formBuilder) {
        this.formBuilder = formBuilder;
    }
    /**
     * @param {?} fields
     * @param {?} groups
     * @return {?}
     */
    FormService.prototype.form = /**
     * @param {?} fields
     * @param {?} groups
     * @return {?}
     */
    function (fields, groups) {
        /** @type {?} */
        var control = this.formBuilder.group({});
        fields.forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            control.addControl(field.name, field.control);
        }));
        groups.forEach((/**
         * @param {?} group
         * @return {?}
         */
        function (group) {
            control.addControl(group.name, group.control);
        }));
        return { fields: fields, groups: groups, control: control };
    };
    /**
     * @param {?} config
     * @param {?} fields
     * @return {?}
     */
    FormService.prototype.group = /**
     * @param {?} config
     * @param {?} fields
     * @return {?}
     */
    function (config, fields) {
        /** @type {?} */
        var options = config.options || {};
        /** @type {?} */
        var control = this.formBuilder.group({});
        fields.forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            control.addControl(field.name, field.control);
        }));
        control.setValidators(options.validator);
        return (/** @type {?} */ (Object.assign({}, config, { fields: fields, control: control })));
    };
    /**
     * @param {?} config
     * @return {?}
     */
    FormService.prototype.field = /**
     * @param {?} config
     * @return {?}
     */
    function (config) {
        /** @type {?} */
        var options = config.options || {};
        /** @type {?} */
        var state$$1 = Object.assign({ value: '' }, {
            disabled: options.disabled
        });
        /** @type {?} */
        var control = this.formBuilder.control(state$$1);
        control.setValidators(options.validator);
        return (/** @type {?} */ (Object.assign({ type: 'text' }, config, { control: control })));
    };
    /**
     * @param {?} config
     * @param {?} partial
     * @return {?}
     */
    FormService.prototype.extendFieldConfig = /**
     * @param {?} config
     * @param {?} partial
     * @return {?}
     */
    function (config, partial) {
        /** @type {?} */
        var options = Object.assign({}, config.options || {}, partial.options || {});
        /** @type {?} */
        var inputs = Object.assign({}, config.inputs || {}, partial.inputs || {});
        /** @type {?} */
        var subscribers = Object.assign({}, config.subscribers || {}, partial.subscribers || {});
        return Object.assign({}, config, { options: options, inputs: inputs, subscribers: subscribers });
    };
    FormService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    FormService.ctorParameters = function () { return [
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormBuilder"] }
    ]; };
    /** @nocollapse */ FormService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["defineInjectable"])({ factory: function FormService_Factory() { return new FormService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormBuilder"])); }, token: FormService, providedIn: "root" });
    return FormService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} type
 * @return {?}
 */
function FormFieldComponent(type) {
    return (/**
     * @param {?} compType
     * @return {?}
     */
    function (compType) {
        FormFieldService.register(type, compType);
    });
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This component renders the proper form input based on
 * the field configuration it receives.
 */
var FormFieldComponent$1 = /** @class */ (function () {
    function FormFieldComponent$$1(formFieldService) {
        this.formFieldService = formFieldService;
    }
    Object.defineProperty(FormFieldComponent$$1.prototype, "fieldOptions", {
        get: /**
         * @return {?}
         */
        function () {
            return this.field.options || {};
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormFieldComponent$$1.prototype.getFieldComponent = /**
     * @return {?}
     */
    function () {
        return this.formFieldService.getFieldByType(this.field.type || 'text');
    };
    /**
     * @return {?}
     */
    FormFieldComponent$$1.prototype.getFieldInputs = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var errors = this.fieldOptions.errors || {};
        return Object.assign({
            placeholder: this.field.title,
            disableSwitch: this.fieldOptions.disableSwitch || false
        }, Object.assign({}, this.field.inputs || {}), {
            formControl: this.field.control,
            errors: Object.assign({}, getDefaultErrorMessages(), errors)
        });
    };
    /**
     * @return {?}
     */
    FormFieldComponent$$1.prototype.getFieldSubscribers = /**
     * @return {?}
     */
    function () {
        return Object.assign({}, this.field.subscribers || {});
    };
    FormFieldComponent$$1.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-form-field',
                    template: "\r\n\r\n<ng-container *ngIf=\"field !== undefined\">\r\n  <igo-dynamic-outlet\r\n    [component]=\"getFieldComponent()\"\r\n    [inputs]=\"getFieldInputs()\"\r\n    [subscribers]=\"getFieldSubscribers()\">\r\n  </igo-dynamic-outlet>\r\n</ng-container>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: ["::ng-deep mat-form-field{width:100%}::ng-deep .igo-form-disable-switch{margin-right:8px}"]
                }] }
    ];
    /** @nocollapse */
    FormFieldComponent$$1.ctorParameters = function () { return [
        { type: FormFieldService }
    ]; };
    FormFieldComponent$$1.propDecorators = {
        field: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return FormFieldComponent$$1;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This component renders a select field
 */
var FormFieldSelectComponent = /** @class */ (function () {
    function FormFieldSelectComponent() {
        this.disabled$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](false);
        /**
         * Wheter a disable switch should be available
         */
        this.disableSwitch = false;
    }
    Object.defineProperty(FormFieldSelectComponent.prototype, "choices", {
        /**
         * Select input choices
         */
        set: /**
         * Select input choices
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value instanceof rxjs__WEBPACK_IMPORTED_MODULE_14__["Observable"]) {
                this.choices$ = value;
            }
            else {
                this.choices$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_14__["of"])(value);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormFieldSelectComponent.prototype, "required", {
        /**
         * Whether the field is required
         */
        get: /**
         * Whether the field is required
         * @return {?}
         */
        function () {
            return formControlIsRequired(this.formControl);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormFieldSelectComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.disabled$.next(this.formControl.disabled);
    };
    /**
     * Get error message
     */
    /**
     * Get error message
     * @return {?}
     */
    FormFieldSelectComponent.prototype.getErrorMessage = /**
     * Get error message
     * @return {?}
     */
    function () {
        return getControlErrorMessage(this.formControl, this.errors);
    };
    /**
     * @return {?}
     */
    FormFieldSelectComponent.prototype.onDisableSwitchClick = /**
     * @return {?}
     */
    function () {
        this.toggleDisabled();
    };
    /**
     * @private
     * @return {?}
     */
    FormFieldSelectComponent.prototype.toggleDisabled = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var disabled = !this.disabled$.value;
        if (disabled === true) {
            this.formControl.disable();
        }
        else {
            this.formControl.enable();
        }
        this.disabled$.next(disabled);
    };
    FormFieldSelectComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-form-field-select',
                    template: "<mat-form-field>\r\n  <mat-select\r\n    [required]=\"required\"\r\n    [placeholder]=\"placeholder\"\r\n    [formControl]=\"formControl\">\r\n    <mat-option *ngFor=\"let choice of choices$ | async\" [value]=\"choice.value\">\r\n      {{choice.title}}\r\n    </mat-option>\r\n  </mat-select>\r\n  <mat-icon\r\n    *ngIf=\"disableSwitch === true\"\r\n    class=\"igo-form-disable-switch\"\r\n    [svgIcon]=\"(disabled$ | async) === true ? 'checkbox-blank-outline' : 'checkbox-marked-outline'\"\r\n    (click)=\"onDisableSwitchClick()\"\r\n    matPrefix>\r\n  </mat-icon>\r\n  <mat-error *ngIf=\"formControl.errors\">{{getErrorMessage() | translate}}</mat-error>\r\n</mat-form-field>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    FormFieldSelectComponent.propDecorators = {
        formControl: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        choices: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        errors: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        disableSwitch: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    /**
     * This component renders a select field
     */
    FormFieldSelectComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__decorate"])([
        FormFieldComponent('select')
    ], FormFieldSelectComponent);
    return FormFieldSelectComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This component renders a text field
 */
var FormFieldTextComponent = /** @class */ (function () {
    function FormFieldTextComponent() {
        this.disabled$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](false);
        /**
         * Wheter a disable switch should be available
         */
        this.disableSwitch = false;
    }
    Object.defineProperty(FormFieldTextComponent.prototype, "required", {
        /**
         * Whether the field is required
         */
        get: /**
         * Whether the field is required
         * @return {?}
         */
        function () {
            return formControlIsRequired(this.formControl);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormFieldTextComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.disabled$.next(this.formControl.disabled);
    };
    /**
     * Get error message
     */
    /**
     * Get error message
     * @return {?}
     */
    FormFieldTextComponent.prototype.getErrorMessage = /**
     * Get error message
     * @return {?}
     */
    function () {
        return getControlErrorMessage(this.formControl, this.errors);
    };
    /**
     * @return {?}
     */
    FormFieldTextComponent.prototype.onDisableSwitchClick = /**
     * @return {?}
     */
    function () {
        this.toggleDisabled();
    };
    /**
     * @private
     * @return {?}
     */
    FormFieldTextComponent.prototype.toggleDisabled = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var disabled = !this.disabled$.value;
        if (disabled === true) {
            this.formControl.disable();
        }
        else {
            this.formControl.enable();
        }
        this.disabled$.next(disabled);
    };
    FormFieldTextComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-form-field-text',
                    template: "<mat-form-field>\r\n  <input\r\n    matInput\r\n    [required]=\"required\"\r\n    [placeholder]=\"placeholder\"\r\n    [formControl]=\"formControl\">\r\n  <mat-icon\r\n    *ngIf=\"disableSwitch === true\"\r\n    class=\"igo-form-disable-switch\"\r\n    [svgIcon]=\"(disabled$ | async) === true ? 'checkbox-blank-outline' : 'checkbox-marked-outline'\"\r\n    (click)=\"onDisableSwitchClick()\"\r\n    matPrefix>\r\n  </mat-icon>\r\n  <mat-error *ngIf=\"formControl.errors\">{{getErrorMessage() | translate}}</mat-error>\r\n</mat-form-field>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    FormFieldTextComponent.propDecorators = {
        formControl: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        errors: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        disableSwitch: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    /**
     * This component renders a text field
     */
    FormFieldTextComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__decorate"])([
        FormFieldComponent('text')
    ], FormFieldTextComponent);
    return FormFieldTextComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This component renders a textarea field
 */
var FormFieldTextareaComponent = /** @class */ (function () {
    function FormFieldTextareaComponent() {
        this.disabled$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](false);
        /**
         * Wheter a disable switch should be available
         */
        this.disableSwitch = false;
    }
    Object.defineProperty(FormFieldTextareaComponent.prototype, "required", {
        /**
         * Whether the field is required
         */
        get: /**
         * Whether the field is required
         * @return {?}
         */
        function () {
            return formControlIsRequired(this.formControl);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormFieldTextareaComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.disabled$.next(this.formControl.disabled);
    };
    /**
     * Get error message
     */
    /**
     * Get error message
     * @return {?}
     */
    FormFieldTextareaComponent.prototype.getErrorMessage = /**
     * Get error message
     * @return {?}
     */
    function () {
        return getControlErrorMessage(this.formControl, this.errors);
    };
    /**
     * @return {?}
     */
    FormFieldTextareaComponent.prototype.onDisableSwitchClick = /**
     * @return {?}
     */
    function () {
        this.toggleDisabled();
    };
    /**
     * @private
     * @return {?}
     */
    FormFieldTextareaComponent.prototype.toggleDisabled = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var disabled = !this.disabled$.value;
        if (disabled === true) {
            this.formControl.disable();
        }
        else {
            this.formControl.enable();
        }
        this.disabled$.next(disabled);
    };
    FormFieldTextareaComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-form-field-textarea',
                    template: "<mat-form-field>\r\n  <textarea\r\n    matInput\r\n    [required]=\"required\"\r\n    [placeholder]=\"placeholder\"\r\n    [formControl]=\"formControl\">\r\n  </textarea>\r\n  <mat-icon\r\n    *ngIf=\"disableSwitch === true\"\r\n    class=\"igo-form-disable-switch\"\r\n    [svgIcon]=\"(disabled$ | async) === true ? 'checkbox-blank-outline' : 'checkbox-marked-outline'\"\r\n    (click)=\"onDisableSwitchClick()\"\r\n    matPrefix>\r\n  </mat-icon>\r\n  <mat-error *ngIf=\"formControl.errors\">{{getErrorMessage() | translate}}</mat-error>\r\n</mat-form-field>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    FormFieldTextareaComponent.propDecorators = {
        formControl: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        errors: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        disableSwitch: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    /**
     * This component renders a textarea field
     */
    FormFieldTextareaComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__decorate"])([
        FormFieldComponent('textarea')
    ], FormFieldTextareaComponent);
    return FormFieldTextareaComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoFormFieldModule = /** @class */ (function () {
    function IgoFormFieldModule() {
    }
    IgoFormFieldModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_5__["ReactiveFormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatSelectModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_6__["IgoLanguageModule"],
                        IgoDynamicOutletModule
                    ],
                    exports: [
                        FormFieldComponent$1,
                        FormFieldSelectComponent,
                        FormFieldTextComponent,
                        FormFieldTextareaComponent
                    ],
                    declarations: [
                        FormFieldComponent$1,
                        FormFieldSelectComponent,
                        FormFieldTextComponent,
                        FormFieldTextareaComponent
                    ]
                },] }
    ];
    return IgoFormFieldModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * A configurable form, optionnally bound to an entity
 * (for example in case of un update). Submitting that form
 * emits an event with the form data but no other operation is performed.
 */
var FormGroupComponent = /** @class */ (function () {
    function FormGroupComponent() {
    }
    Object.defineProperty(FormGroupComponent.prototype, "formControl", {
        /**
         * Form group control
         */
        get: /**
         * Form group control
         * @return {?}
         */
        function () { return this.group.control; },
        enumerable: true,
        configurable: true
    });
    /**
     * Return the number of columns a field should occupy.
     * The maximum allowed is 2, even if the field config says more.
     * @param field Field
     * @returns Number of columns
     * @internal
     */
    /**
     * Return the number of columns a field should occupy.
     * The maximum allowed is 2, even if the field config says more.
     * \@internal
     * @param {?} field Field
     * @return {?} Number of columns
     */
    FormGroupComponent.prototype.getFieldColSpan = /**
     * Return the number of columns a field should occupy.
     * The maximum allowed is 2, even if the field config says more.
     * \@internal
     * @param {?} field Field
     * @return {?} Number of columns
     */
    function (field) {
        /** @type {?} */
        var colSpan = 2;
        /** @type {?} */
        var options = field.options || {};
        if (options.cols && options.cols > 0) {
            colSpan = Math.min(options.cols, 2);
        }
        return colSpan;
    };
    /**
     * Return the number of columns a field should occupy.
     * The maximum allowed is 2, even if the field config says more.
     * @param field Field
     * @returns Number of columns
     * @internal
     */
    /**
     * Return the number of columns a field should occupy.
     * The maximum allowed is 2, even if the field config says more.
     * \@internal
     * @param {?} field Field
     * @return {?} Number of columns
     */
    FormGroupComponent.prototype.getFieldNgClass = /**
     * Return the number of columns a field should occupy.
     * The maximum allowed is 2, even if the field config says more.
     * \@internal
     * @param {?} field Field
     * @return {?} Number of columns
     */
    function (field) {
        var _a;
        /** @type {?} */
        var colspan = this.getFieldColSpan(field);
        return _a = {}, _a["igo-form-field-colspan-" + colspan] = true, _a;
    };
    /**
     * Get error message
     */
    /**
     * Get error message
     * @return {?}
     */
    FormGroupComponent.prototype.getErrorMessage = /**
     * Get error message
     * @return {?}
     */
    function () {
        /** @type {?} */
        var options = this.group.options || {};
        return getControlErrorMessage(this.formControl, options.errors || {});
    };
    FormGroupComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-form-group',
                    template: "<div\r\n  *ngIf=\"group && group.fields.length > 0\"\r\n  class=\"igo-form-group-fields\">\r\n  <div\r\n    *ngFor=\"let field of group.fields\"\r\n    class=\"igo-form-field-wrapper\"\r\n    [ngClass]=\"getFieldNgClass(field)\">\r\n    <igo-form-field [field]=\"field\"></igo-form-field>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"igo-form-group-extra-content\">\r\n  <ng-content></ng-content>\r\n</div>\r\n\r\n<mat-error *ngIf=\"formControl.errors\">{{getErrorMessage() | translate}}</mat-error>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{width:100%;height:100%;display:block;overflow:auto;padding:10px 5px}.igo-form-field-wrapper{display:inline-block;padding:0 5px}.igo-form-field-colspan-2{width:100%}.igo-form-field-colspan-1{width:50%}"]
                }] }
    ];
    /** @nocollapse */
    FormGroupComponent.ctorParameters = function () { return []; };
    FormGroupComponent.propDecorators = {
        group: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        errors: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return FormGroupComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoFormGroupModule = /** @class */ (function () {
    function IgoFormGroupModule() {
    }
    IgoFormGroupModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatFormFieldModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_6__["IgoLanguageModule"],
                        IgoFormFieldModule
                    ],
                    exports: [
                        FormGroupComponent
                    ],
                    declarations: [
                        FormGroupComponent
                    ]
                },] }
    ];
    return IgoFormGroupModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoFormModule = /** @class */ (function () {
    function IgoFormModule() {
    }
    IgoFormModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        IgoFormGroupModule,
                        IgoFormFieldModule
                    ],
                    exports: [
                        IgoFormFormModule,
                        IgoFormGroupModule,
                        IgoFormFieldModule
                    ],
                    declarations: [],
                    providers: [
                        FormService,
                        FormFieldService
                    ],
                    entryComponents: [
                        FormFieldSelectComponent,
                        FormFieldTextComponent,
                        FormFieldTextareaComponent
                    ]
                },] }
    ];
    return IgoFormModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoEntitySelectorModule = /** @class */ (function () {
    function IgoEntitySelectorModule() {
    }
    IgoEntitySelectorModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatSelectModule"]
                    ],
                    exports: [EntitySelectorComponent],
                    declarations: [EntitySelectorComponent]
                },] }
    ];
    return IgoEntitySelectorModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var StopDropPropagationDirective = /** @class */ (function () {
    function StopDropPropagationDirective() {
    }
    /**
     * @param {?} event
     * @return {?}
     */
    StopDropPropagationDirective.prototype.onDrop = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.preventDefault();
        event.stopPropagation();
    };
    StopDropPropagationDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoStopDropPropagation]'
                },] }
    ];
    StopDropPropagationDirective.propDecorators = {
        onDrop: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['drop', ['$event'],] }]
    };
    return StopDropPropagationDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var StopPropagationDirective = /** @class */ (function () {
    function StopPropagationDirective() {
    }
    /**
     * @param {?} event
     * @return {?}
     */
    StopPropagationDirective.prototype.onClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
    };
    StopPropagationDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoStopPropagation]'
                },] }
    ];
    StopPropagationDirective.propDecorators = {
        onClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['click', ['$event'],] }]
    };
    return StopPropagationDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoStopPropagationModule = /** @class */ (function () {
    function IgoStopPropagationModule() {
    }
    /**
     * @return {?}
     */
    IgoStopPropagationModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoStopPropagationModule,
            providers: []
        };
    };
    IgoStopPropagationModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [StopDropPropagationDirective, StopPropagationDirective],
                    exports: [StopDropPropagationDirective, StopPropagationDirective]
                },] }
    ];
    return IgoStopPropagationModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Directive that handles an entity table row click and selection.
 */
var EntityTableRowDirective = /** @class */ (function () {
    function EntityTableRowDirective(renderer, el) {
        this.renderer = renderer;
        this.el = el;
        /**
         * Whether a row supports selection
         */
        this.selection = false;
        /**
         * Whether clicking a row should select it (if selection is true)
         */
        this.selectOnClick = true;
        /**
         * Whether the selected row should be highlighted
         */
        this.highlightSelection = true;
        this._selected = false;
        /**
         * Scroll behavior on selection
         */
        this.scrollBehavior = EntityTableScrollBehavior.Auto;
        /**
         * Event emitted when a row is selected
         */
        this.select = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(EntityTableRowDirective.prototype, "selected", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selected;
        },
        /**
         * Whether a row is selected
         */
        set: /**
         * Whether a row is selected
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this.selection === false) {
                return;
            }
            if (value === this._selected) {
                return;
            }
            this.toggleSelected(value);
            this.scroll();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * When a row is clicked, select it if it's supported
     * @ignore
     */
    /**
     * When a row is clicked, select it if it's supported
     * @ignore
     * @return {?}
     */
    EntityTableRowDirective.prototype.onClick = /**
     * When a row is clicked, select it if it's supported
     * @ignore
     * @return {?}
     */
    function () {
        if (this.selection === false || this.selectOnClick === false) {
            return;
        }
        this.toggleSelected(true);
        this.select.emit(this);
    };
    /**
     * Select a row and add or remove the selected class from it
     * @param selected Whether the row should be selected
     */
    /**
     * Select a row and add or remove the selected class from it
     * @private
     * @param {?} selected Whether the row should be selected
     * @return {?}
     */
    EntityTableRowDirective.prototype.toggleSelected = /**
     * Select a row and add or remove the selected class from it
     * @private
     * @param {?} selected Whether the row should be selected
     * @return {?}
     */
    function (selected) {
        this._selected = selected;
        if (selected === true) {
            this.addCls(EntityTableRowDirective.selectedCls);
            if (this.highlightSelection === true) {
                this.addCls(EntityTableRowDirective.highlightedCls);
            }
        }
        else {
            this.removeCls(EntityTableRowDirective.selectedCls);
            this.removeCls(EntityTableRowDirective.highlightedCls);
        }
    };
    /**
     * Scroll to the selected row
     */
    /**
     * Scroll to the selected row
     * @private
     * @return {?}
     */
    EntityTableRowDirective.prototype.scroll = /**
     * Scroll to the selected row
     * @private
     * @return {?}
     */
    function () {
        if (this._selected === true) {
            this.el.nativeElement.scrollIntoView({
                behavior: this.scrollBehavior,
                block: 'center',
                inline: 'center'
            });
        }
    };
    /**
     * Add the selected CSS class
     */
    /**
     * Add the selected CSS class
     * @private
     * @param {?} cls
     * @return {?}
     */
    EntityTableRowDirective.prototype.addCls = /**
     * Add the selected CSS class
     * @private
     * @param {?} cls
     * @return {?}
     */
    function (cls) {
        this.renderer.addClass(this.el.nativeElement, cls);
    };
    /**
     * Remove the selected CSS class
     */
    /**
     * Remove the selected CSS class
     * @private
     * @param {?} cls
     * @return {?}
     */
    EntityTableRowDirective.prototype.removeCls = /**
     * Remove the selected CSS class
     * @private
     * @param {?} cls
     * @return {?}
     */
    function (cls) {
        this.renderer.removeClass(this.el.nativeElement, cls);
    };
    /**
     * Class added to a selected row
     */
    EntityTableRowDirective.selectedCls = 'igo-entity-table-row-selected';
    /**
     * Class added to a highlighted row
     */
    EntityTableRowDirective.highlightedCls = 'igo-entity-table-row-highlighted';
    EntityTableRowDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoEntityTableRow]'
                },] }
    ];
    /** @nocollapse */
    EntityTableRowDirective.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Renderer2"] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ElementRef"] }
    ]; };
    EntityTableRowDirective.propDecorators = {
        selection: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        selectOnClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        highlightSelection: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        selected: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        scrollBehavior: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        select: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        onClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['click',] }]
    };
    return EntityTableRowDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoEntityTableModule = /** @class */ (function () {
    function IgoEntityTableModule() {
    }
    IgoEntityTableModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatTableModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatSortModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatCheckboxModule"],
                        IgoStopPropagationModule,
                        IgoCustomHtmlModule
                    ],
                    exports: [
                        EntityTableComponent
                    ],
                    declarations: [
                        EntityTableComponent,
                        EntityTableRowDirective
                    ]
                },] }
    ];
    return IgoEntityTableModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoEntityModule = /** @class */ (function () {
    function IgoEntityModule() {
    }
    IgoEntityModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"]
                    ],
                    exports: [
                        IgoEntitySelectorModule,
                        IgoEntityTableModule
                    ],
                    declarations: []
                },] }
    ];
    return IgoEntityModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var SecureImagePipe = /** @class */ (function () {
    function SecureImagePipe(http) {
        this.http = http;
    }
    /**
     * @param {?} url
     * @return {?}
     */
    SecureImagePipe.prototype.transform = /**
     * @param {?} url
     * @return {?}
     */
    function (url) {
        return this.http
            .get(url, {
            headers: {
                activityInterceptor: 'false'
            },
            responseType: 'blob'
        })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["switchMap"])((/**
         * @param {?} blob
         * @return {?}
         */
        function (blob) {
            return new rxjs__WEBPACK_IMPORTED_MODULE_14__["Observable"]((/**
             * @param {?} observer
             * @return {?}
             */
            function (observer) {
                /** @type {?} */
                var reader = new FileReader();
                reader.readAsDataURL(blob);
                reader.onloadend = (/**
                 * @return {?}
                 */
                function () {
                    observer.next(reader.result);
                });
            }));
        })));
    };
    SecureImagePipe.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Pipe"], args: [{
                    name: 'secureImage'
                },] }
    ];
    /** @nocollapse */
    SecureImagePipe.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClient"] }
    ]; };
    return SecureImagePipe;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoImageModule = /** @class */ (function () {
    function IgoImageModule() {
    }
    /**
     * @return {?}
     */
    IgoImageModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoImageModule,
            providers: []
        };
    };
    IgoImageModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [SecureImagePipe],
                    exports: [SecureImagePipe]
                },] }
    ];
    return IgoImageModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var KeyValuePipe = /** @class */ (function () {
    function KeyValuePipe() {
    }
    /**
     * @param {?} value
     * @param {?=} args
     * @return {?}
     */
    KeyValuePipe.prototype.transform = /**
     * @param {?} value
     * @param {?=} args
     * @return {?}
     */
    function (value, args) {
        /** @type {?} */
        var keyValues = [];
        Object.getOwnPropertyNames(value).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            return keyValues.push({ key: key, value: value[key] });
        }));
        return keyValues;
    };
    KeyValuePipe.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Pipe"], args: [{
                    name: 'keyvalue'
                },] }
    ];
    return KeyValuePipe;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoKeyValueModule = /** @class */ (function () {
    function IgoKeyValueModule() {
    }
    /**
     * @return {?}
     */
    IgoKeyValueModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoKeyValueModule,
            providers: []
        };
    };
    IgoKeyValueModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [KeyValuePipe],
                    exports: [KeyValuePipe]
                },] }
    ];
    return IgoKeyValueModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var JsonDialogComponent = /** @class */ (function () {
    function JsonDialogComponent(dialogRef) {
        this.dialogRef = dialogRef;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    JsonDialogComponent.prototype.isObject = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        return typeof val === 'object' && !Array.isArray(val);
    };
    /**
     * @param {?} baseKey
     * @param {?} key
     * @return {?}
     */
    JsonDialogComponent.prototype.getKey = /**
     * @param {?} baseKey
     * @param {?} key
     * @return {?}
     */
    function (baseKey, key) {
        return (baseKey ? baseKey + '.' : '') + key;
    };
    JsonDialogComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-json-dialog',
                    template: "<h1 mat-dialog-title>{{ title }}</h1>\r\n\r\n<div mat-dialog-content>\r\n  <ng-container *ngTemplateOutlet=\"loopObject;context:{ obj: data }\"></ng-container>\r\n\r\n  <ng-template #loopObject let-obj='obj' let-baseKey='baseKey'>\r\n    <ng-container *ngFor=\"let property of obj | keyvalue\">\r\n      <ng-container *ngIf=\"ignoreKeys.indexOf(getKey(baseKey, property.key)) === -1\">\r\n\r\n        <ng-container *ngIf=\"isObject(property.value); else notObject\">\r\n          <ng-container *ngTemplateOutlet=\"loopObject;context:{ obj: property.value, baseKey: getKey(baseKey, property.key) }\"></ng-container>\r\n        </ng-container>\r\n\r\n        <ng-template #notObject>\r\n          <p><span><b>{{getKey(baseKey, property.key)}}</b> : </span><span class=\"propertyValue\" [innerHtml]=\"property.value\"></span></p>\r\n        </ng-template>\r\n\r\n      </ng-container>\r\n    </ng-container>\r\n  </ng-template>\r\n</div>\r\n\r\n<div mat-dialog-actions>\r\n  <button mat-button color=\"primary\"\r\n          (click)=\"dialogRef.close(false)\">\r\n    OK\r\n  </button>\r\n</div>\r\n"
                }] }
    ];
    /** @nocollapse */
    JsonDialogComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatDialogRef"] }
    ]; };
    return JsonDialogComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var JsonDialogService = /** @class */ (function () {
    function JsonDialogService(dialog) {
        this.dialog = dialog;
    }
    /**
     * @param {?} title
     * @param {?} data
     * @param {?=} ignoreKeys
     * @return {?}
     */
    JsonDialogService.prototype.open = /**
     * @param {?} title
     * @param {?} data
     * @param {?=} ignoreKeys
     * @return {?}
     */
    function (title, data, ignoreKeys) {
        /** @type {?} */
        var dialogRef = this.dialog.open(JsonDialogComponent, {
            disableClose: false
        });
        dialogRef.componentInstance.data = data;
        dialogRef.componentInstance.title = title;
        dialogRef.componentInstance.ignoreKeys = ignoreKeys;
        return dialogRef.afterClosed();
    };
    JsonDialogService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"] }
    ];
    /** @nocollapse */
    JsonDialogService.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatDialog"] }
    ]; };
    return JsonDialogService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoJsonDialogModule = /** @class */ (function () {
    function IgoJsonDialogModule() {
    }
    /**
     * @return {?}
     */
    IgoJsonDialogModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoJsonDialogModule
        };
    };
    IgoJsonDialogModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatButtonModule"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatDialogModule"], IgoKeyValueModule],
                    exports: [JsonDialogComponent],
                    declarations: [JsonDialogComponent],
                    entryComponents: [JsonDialogComponent],
                    providers: [JsonDialogService]
                },] }
    ];
    return IgoJsonDialogModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ListItemDirective = /** @class */ (function () {
    function ListItemDirective(renderer, el) {
        this.renderer = renderer;
        this.el = el;
        this._color = 'primary';
        this._focused = false;
        this._selected = false;
        this._disabled = false;
        this.beforeSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.beforeFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.beforeUnselect = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.beforeUnfocus = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.beforeDisable = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.beforeEnable = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.focus = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.unfocus = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.select = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.unselect = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.disable = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.enable = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(ListItemDirective.prototype, "color", {
        get: /**
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._color = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListItemDirective.prototype, "focused", {
        get: /**
         * @return {?}
         */
        function () {
            return this._focused;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === this._focused) {
                return;
            }
            if (this.disabled) {
                return;
            }
            value ? this.beforeFocus.emit(this) : this.beforeUnfocus.emit(this);
            this._focused = value;
            this.toggleSelectedClass();
            value ? this.focus.emit(this) : this.unfocus.emit(this);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListItemDirective.prototype, "selected", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selected;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === this._selected) {
                return;
            }
            if (this.disabled) {
                return;
            }
            value ? this.beforeSelect.emit(this) : this.beforeUnselect.emit(this);
            this._selected = value;
            this._focused = value;
            this.toggleSelectedClass();
            value ? this.select.emit(this) : this.unselect.emit(this);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListItemDirective.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === this._disabled) {
                return;
            }
            if (value === true) {
                this.selected = false;
            }
            value ? this.beforeDisable.emit(this) : this.beforeEnable.emit(this);
            this._disabled = value;
            this.toggleDisabledClass();
            value ? this.disable.emit(this) : this.enable.emit(this);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ListItemDirective.prototype.onClick = /**
     * @return {?}
     */
    function () {
        this.selected = true;
    };
    /**
     * @return {?}
     */
    ListItemDirective.prototype.getOffsetTop = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var padding = 5;
        return this.el.nativeElement.offsetTop - padding;
    };
    /**
     * @private
     * @return {?}
     */
    ListItemDirective.prototype.toggleSelectedClass = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.focused || this.selected) {
            this.addCls(ListItemDirective.selectedCls);
        }
        else {
            this.removeCls(ListItemDirective.selectedCls);
        }
    };
    /**
     * @private
     * @return {?}
     */
    ListItemDirective.prototype.toggleDisabledClass = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.disabled) {
            this.addCls(ListItemDirective.disabledCls);
        }
        else {
            this.removeCls(ListItemDirective.disabledCls);
        }
    };
    /**
     * @private
     * @param {?} cls
     * @return {?}
     */
    ListItemDirective.prototype.addCls = /**
     * @private
     * @param {?} cls
     * @return {?}
     */
    function (cls) {
        this.renderer.addClass(this.el.nativeElement, cls);
    };
    /**
     * @private
     * @param {?} cls
     * @return {?}
     */
    ListItemDirective.prototype.removeCls = /**
     * @private
     * @param {?} cls
     * @return {?}
     */
    function (cls) {
        this.renderer.removeClass(this.el.nativeElement, cls);
    };
    ListItemDirective.selectedCls = 'igo-list-item-selected';
    ListItemDirective.disabledCls = 'igo-list-item-disabled';
    ListItemDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoListItem]'
                },] }
    ];
    /** @nocollapse */
    ListItemDirective.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Renderer2"] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ElementRef"] }
    ]; };
    ListItemDirective.propDecorators = {
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        focused: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        selected: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        beforeSelect: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        beforeFocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        beforeUnselect: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        beforeUnfocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        beforeDisable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        beforeEnable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        focus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        unfocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        select: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        unselect: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        disable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        enable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        onClick: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['click',] }]
    };
    return ListItemDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ListComponent = /** @class */ (function () {
    function ListComponent(el) {
        this.el = el;
        this._navigation = true;
        this._selection = true;
        this.subscriptions = [];
    }
    Object.defineProperty(ListComponent.prototype, "navigation", {
        get: /**
         * @return {?}
         */
        function () {
            return this._navigation;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._navigation = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListComponent.prototype, "selection", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selection;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._selection = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListComponent.prototype, "selectedItem", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectedItem;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.focusedItem = value;
            this._selectedItem = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListComponent.prototype, "focusedItem", {
        get: /**
         * @return {?}
         */
        function () {
            return this._focusedItem;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._focusedItem = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} event
     * @return {?}
     */
    ListComponent.prototype.handleKeyboardEvent = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        // It would be nice to be able to unsubscribe to the event
        // completely but until ES7 this won't be possible because
        // document events are not observables
        if (this.navigationEnabled) {
            if (event.keyCode === 38 || event.keyCode === 40) {
                event.preventDefault();
                this.navigate(event.keyCode);
            }
            else if (event.keyCode === 13) {
                this.select(this.focusedItem);
            }
        }
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.enableNavigation();
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.listItems.length) {
            this.init();
        }
        this.listItems$$ = this.listItems.changes.subscribe((/**
         * @param {?} items
         * @return {?}
         */
        function (items) { return _this.init(); }));
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.listItems$$.unsubscribe();
    };
    /**
     * @param {?=} item
     * @return {?}
     */
    ListComponent.prototype.focus = /**
     * @param {?=} item
     * @return {?}
     */
    function (item) {
        if (!this.selection) {
            return;
        }
        this.unfocus();
        // We need to make this check because dynamic
        // lists such as in the search results list may fail
        if (item !== undefined) {
            item.focused = true;
        }
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.unfocus = /**
     * @return {?}
     */
    function () {
        if (this.focusedItem !== undefined) {
            this.focusedItem.focused = false;
        }
        this.focusedItem = undefined;
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.focusNext = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var items = this.listItems.toArray();
        /** @type {?} */
        var item;
        /** @type {?} */
        var disabled = true;
        /** @type {?} */
        var index = this.getFocusedIndex();
        if (index === undefined) {
            index = -1;
        }
        while (disabled && index < items.length - 1) {
            index += 1;
            item = items[index];
            disabled = item.disabled;
        }
        if (item !== undefined) {
            this.focus(item);
        }
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.focusPrevious = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var items = this.listItems.toArray();
        /** @type {?} */
        var item;
        /** @type {?} */
        var disabled = true;
        /** @type {?} */
        var index = this.getFocusedIndex();
        while (disabled && index > 0) {
            index -= 1;
            item = items[index];
            disabled = item.disabled;
        }
        if (item !== undefined) {
            this.focus(item);
        }
    };
    /**
     * @param {?=} item
     * @return {?}
     */
    ListComponent.prototype.select = /**
     * @param {?=} item
     * @return {?}
     */
    function (item) {
        if (!this.selection) {
            return;
        }
        this.unselect();
        if (item !== undefined) {
            item.selected = true;
        }
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.unselect = /**
     * @return {?}
     */
    function () {
        this.unfocus();
        if (this.selectedItem !== undefined) {
            this.selectedItem.selected = false;
        }
        this.selectedItem = undefined;
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.enableNavigation = /**
     * @return {?}
     */
    function () {
        if (this.navigation) {
            this.navigationEnabled = true;
        }
    };
    /**
     * @return {?}
     */
    ListComponent.prototype.disableNavigation = /**
     * @return {?}
     */
    function () {
        this.navigationEnabled = false;
    };
    /**
     * @param {?} item
     * @return {?}
     */
    ListComponent.prototype.scrollToItem = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        this.el.nativeElement.scrollTop = item.getOffsetTop();
    };
    /**
     * @private
     * @return {?}
     */
    ListComponent.prototype.init = /**
     * @private
     * @return {?}
     */
    function () {
        this.subscribe();
        this.selectedItem = this.findSelectedItem();
        this.focusedItem = this.findFocusedItem();
        this.enableNavigation();
    };
    /**
     * @private
     * @return {?}
     */
    ListComponent.prototype.subscribe = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.unsubscribe();
        this.listItems.toArray().forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            _this.subscriptions.push(item.beforeSelect.subscribe((/**
             * @param {?} item2
             * @return {?}
             */
            function (item2) {
                return _this.handleItemBeforeSelect(item2);
            })));
            _this.subscriptions.push(item.select.subscribe((/**
             * @param {?} item2
             * @return {?}
             */
            function (item2) {
                return _this.handleItemSelect(item2);
            })));
            _this.subscriptions.push(item.beforeFocus.subscribe((/**
             * @param {?} item2
             * @return {?}
             */
            function (item2) {
                return _this.handleItemBeforeFocus(item2);
            })));
            _this.subscriptions.push(item.focus.subscribe((/**
             * @param {?} item2
             * @return {?}
             */
            function (item2) {
                return _this.handleItemFocus(item2);
            })));
        }), this);
    };
    /**
     * @private
     * @return {?}
     */
    ListComponent.prototype.unsubscribe = /**
     * @private
     * @return {?}
     */
    function () {
        this.subscriptions.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        function (sub) { return sub.unsubscribe(); }));
        this.subscriptions = [];
    };
    /**
     * @private
     * @param {?} item
     * @return {?}
     */
    ListComponent.prototype.handleItemBeforeFocus = /**
     * @private
     * @param {?} item
     * @return {?}
     */
    function (item) {
        if (item !== this.focusedItem) {
            this.unselect();
        }
    };
    /**
     * @private
     * @param {?} item
     * @return {?}
     */
    ListComponent.prototype.handleItemFocus = /**
     * @private
     * @param {?} item
     * @return {?}
     */
    function (item) {
        this.focusedItem = item;
    };
    /**
     * @private
     * @param {?} item
     * @return {?}
     */
    ListComponent.prototype.handleItemBeforeSelect = /**
     * @private
     * @param {?} item
     * @return {?}
     */
    function (item) {
        if (item !== this.focusedItem) {
            this.unselect();
        }
    };
    /**
     * @private
     * @param {?} item
     * @return {?}
     */
    ListComponent.prototype.handleItemSelect = /**
     * @private
     * @param {?} item
     * @return {?}
     */
    function (item) {
        this.selectedItem = item;
    };
    /**
     * @private
     * @return {?}
     */
    ListComponent.prototype.findSelectedItem = /**
     * @private
     * @return {?}
     */
    function () {
        return this.listItems.toArray().find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.selected; }));
    };
    /**
     * @private
     * @return {?}
     */
    ListComponent.prototype.findFocusedItem = /**
     * @private
     * @return {?}
     */
    function () {
        return this.listItems.toArray().find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.focused; }));
    };
    /**
     * @private
     * @return {?}
     */
    ListComponent.prototype.getFocusedIndex = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        return this.listItems
            .toArray()
            .findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item === _this.focusedItem; }));
    };
    /**
     * @private
     * @param {?} key
     * @return {?}
     */
    ListComponent.prototype.navigate = /**
     * @private
     * @param {?} key
     * @return {?}
     */
    function (key) {
        switch (key) {
            case 38:
                this.focusPrevious();
                break;
            case 40:
                this.focusNext();
                break;
            default:
                break;
        }
    };
    ListComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-list',
                    template: "<mat-list\r\n  igoClickout\r\n  [ngClass]=\"{'selectable': selection}\"\r\n  (clickout)=\"disableNavigation()\"\r\n  (click)=\"enableNavigation()\">\r\n  <ng-content></ng-content>\r\n</mat-list>\r\n",
                    styles: [":host{display:block;height:100%;overflow:auto;position:static}mat-list{padding-top:0}:host>>>.mat-list .mat-list-item .mat-list-text>*{white-space:normal;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;max-height:36px;line-height:18px;-webkit-line-clamp:2}:host>>>.mat-list .mat-list-item.mat-list-item-avatar .mat-list-item-content{display:-webkit-flex;height:46px;padding:3px}:host>>>.mat-list .mat-list-item.mat-list-item-avatar{height:46px}:host>>>.mat-list .mat-list-item.mat-list-item-avatar .mat-list-item-content>mat-icon{padding:8px}:host>>>[igolistitem] mat-list-item [mat-list-avatar]{height:auto;width:40px}:host mat-list.selectable>>>[igolistitem]:not(.igo-list-item-disabled) mat-list-item:hover{cursor:pointer}:host>>>[igolistitem]:focus{outline:0}"]
                }] }
    ];
    /** @nocollapse */
    ListComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ElementRef"] }
    ]; };
    ListComponent.propDecorators = {
        navigation: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        selection: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        listItems: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ContentChildren"], args: [ListItemDirective, { descendants: true },] }],
        handleKeyboardEvent: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['document:keydown', ['$event'],] }]
    };
    return ListComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoListModule = /** @class */ (function () {
    function IgoListModule() {
    }
    /**
     * @return {?}
     */
    IgoListModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoListModule,
            providers: []
        };
    };
    IgoListModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatIconModule"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatListModule"], IgoClickoutModule],
                    declarations: [ListItemDirective, ListComponent],
                    exports: [ListItemDirective, ListComponent]
                },] }
    ];
    return IgoListModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var PanelComponent = /** @class */ (function () {
    function PanelComponent() {
        this._withHeader = true;
    }
    Object.defineProperty(PanelComponent.prototype, "title", {
        get: /**
         * @return {?}
         */
        function () {
            return this._title;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._title = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PanelComponent.prototype, "withHeader", {
        get: /**
         * @return {?}
         */
        function () {
            return this._withHeader;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._withHeader = value;
        },
        enumerable: true,
        configurable: true
    });
    PanelComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-panel',
                    template: "<div *ngIf=\"withHeader\" class=\"igo-panel-header\" title=\"\">\r\n  <h3>\r\n    <ng-content select=\"[panelLeftButton]\"></ng-content>\r\n    <div class=\"igo-panel-title\">\r\n      {{title}}\r\n      <ng-content select=\"[panelHeader]\"></ng-content>\r\n    </div>\r\n    <ng-content select=\"[panelRightButton]\"></ng-content>\r\n  </h3>\r\n</div>\r\n<div class=\"igo-panel-content\" title=\"\">\r\n  <ng-content></ng-content>\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{display:block}.igo-panel-header{height:46px;padding:3px;text-align:center}.igo-panel-header h3{margin:0;height:40px}.igo-panel-header>>>[panelleftbutton]{float:left;margin-right:-40px}.igo-panel-header>>>[panelrightbutton]{float:right}.igo-panel-content{overflow:auto}:host.igo-panel-with-header .igo-panel-content{height:calc(100% - 46px)}:host:not(.igo-panel-with-header) .igo-panel-content{height:100%}.igo-panel-title{display:block;width:calc(100% - 80px);margin-left:40px;height:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;line-height:40px;float:left}"]
                }] }
    ];
    /** @nocollapse */
    PanelComponent.ctorParameters = function () { return []; };
    PanelComponent.propDecorators = {
        title: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        withHeader: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostBinding"], args: ['class.igo-panel-with-header',] }]
    };
    return PanelComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoPanelModule = /** @class */ (function () {
    function IgoPanelModule() {
    }
    IgoPanelModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"]
                    ],
                    exports: [
                        PanelComponent
                    ],
                    declarations: [
                        PanelComponent
                    ]
                },] }
    ];
    return IgoPanelModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * <igoSidenavShim> directive.
 *
 * This directive prevents a material sidenav with mode="side"
 * from focusing an element after it's closed
 */
var SidenavShimDirective = /** @class */ (function () {
    function SidenavShimDirective(component, renderer) {
        this.renderer = renderer;
    }
    /**
     * @return {?}
     */
    SidenavShimDirective.prototype.onOpen = /**
     * @return {?}
     */
    function () {
        this.focusedElement = (/** @type {?} */ (document.activeElement));
    };
    /**
     * @return {?}
     */
    SidenavShimDirective.prototype.onCloseStart = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var focusedElement = (/** @type {?} */ (document.activeElement));
        if (focusedElement !== this.focusedElement) {
            this.blurElement = this.focusedElement;
        }
        else {
            this.blurElement = undefined;
        }
    };
    /**
     * @return {?}
     */
    SidenavShimDirective.prototype.onClose = /**
     * @return {?}
     */
    function () {
        if (this.blurElement) {
            this.renderer.selectRootElement(this.blurElement).blur();
        }
        this.blurElement = undefined;
        this.focusedElement = undefined;
    };
    SidenavShimDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoSidenavShim]'
                },] }
    ];
    /** @nocollapse */
    SidenavShimDirective.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatSidenav"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Self"] }] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Renderer2"] }
    ]; };
    SidenavShimDirective.propDecorators = {
        onOpen: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['open', ['$event'],] }],
        onCloseStart: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['close-start', ['$event'],] }],
        onClose: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['close', ['$event'],] }]
    };
    return SidenavShimDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoSidenavModule = /** @class */ (function () {
    function IgoSidenavModule() {
    }
    /**
     * @return {?}
     */
    IgoSidenavModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoSidenavModule,
            providers: []
        };
    };
    IgoSidenavModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [SidenavShimDirective],
                    exports: [SidenavShimDirective]
                },] }
    ];
    return IgoSidenavModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var SpinnerComponent = /** @class */ (function () {
    function SpinnerComponent() {
        this.shown$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](false);
    }
    Object.defineProperty(SpinnerComponent.prototype, "shown", {
        get: /**
         * @return {?}
         */
        function () { return this.shown$.value; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this.shown$.next(value); },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    SpinnerComponent.prototype.show = /**
     * @return {?}
     */
    function () {
        this.shown = true;
    };
    /**
     * @return {?}
     */
    SpinnerComponent.prototype.hide = /**
     * @return {?}
     */
    function () {
        this.shown = false;
    };
    SpinnerComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-spinner',
                    template: "<div\r\n  [ngClass]=\"{'igo-spinner-container': true, 'igo-spinner-shown': (shown$ | async)}\">\r\n  <div class=\"igo-spinner-background\"></div>\r\n  <mat-progress-spinner diameter=\"40\" mode=\"indeterminate\"></mat-progress-spinner>\r\n</div>\r\n",
                    styles: [".igo-spinner-container{display:none;pointer-events:none}.igo-spinner-container.igo-spinner-shown{display:block}mat-progress-spinner{height:40px;width:40px;border-radius:50%}.igo-spinner-background{height:36px;width:36px;border-radius:50%;border:4px solid #fff;position:absolute;top:2px;left:2px}"]
                }] }
    ];
    /** @nocollapse */
    SpinnerComponent.ctorParameters = function () { return []; };
    SpinnerComponent.propDecorators = {
        shown: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return SpinnerComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * A directive to bind a SpinnerComponent to the activity service.
 * The activity service tracks any HTTP request and this directive
 * will display the spinner it's attached to when the activity counter
 * is greater than 0.
 */
var SpinnerActivityDirective = /** @class */ (function () {
    function SpinnerActivityDirective(spinner, activityService) {
        this.spinner = spinner;
        this.activityService = activityService;
    }
    /**
     * Subscribe to the activity service counter and display the spinner
     * when it's is greater than 0.
     * @internal
     */
    /**
     * Subscribe to the activity service counter and display the spinner
     * when it's is greater than 0.
     * \@internal
     * @return {?}
     */
    SpinnerActivityDirective.prototype.ngOnInit = /**
     * Subscribe to the activity service counter and display the spinner
     * when it's is greater than 0.
     * \@internal
     * @return {?}
     */
    function () {
        var _this = this;
        this.counter$$ = this.activityService.counter$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["debounceTime"])(50))
            .subscribe((/**
         * @param {?} count
         * @return {?}
         */
        function (count) {
            count > 0 ? _this.spinner.show() : _this.spinner.hide();
        }));
    };
    /**
     * Unsubcribe to the activity service counter.
     * @internal
     */
    /**
     * Unsubcribe to the activity service counter.
     * \@internal
     * @return {?}
     */
    SpinnerActivityDirective.prototype.ngOnDestroy = /**
     * Unsubcribe to the activity service counter.
     * \@internal
     * @return {?}
     */
    function () {
        this.counter$$.unsubscribe();
    };
    SpinnerActivityDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoSpinnerActivity]',
                    providers: [SpinnerComponent]
                },] }
    ];
    /** @nocollapse */
    SpinnerActivityDirective.ctorParameters = function () { return [
        { type: SpinnerComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Self"] }] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_6__["ActivityService"] }
    ]; };
    return SpinnerActivityDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoSpinnerModule = /** @class */ (function () {
    function IgoSpinnerModule() {
    }
    IgoSpinnerModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatProgressSpinnerModule"]],
                    declarations: [SpinnerActivityDirective, SpinnerComponent],
                    exports: [SpinnerActivityDirective, SpinnerComponent]
                },] }
    ];
    return IgoSpinnerModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TableDatabase = /** @class */ (function () {
    function TableDatabase(data) {
        /**
         * Stream that emits whenever the data has been modified.
         */
        this.dataChange = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]([]);
        if (data) {
            this.dataChange.next(data);
        }
    }
    Object.defineProperty(TableDatabase.prototype, "data", {
        get: /**
         * @return {?}
         */
        function () {
            return this.dataChange.value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} data
     * @return {?}
     */
    TableDatabase.prototype.set = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.dataChange.next(data);
    };
    /**
     * @param {?} item
     * @return {?}
     */
    TableDatabase.prototype.add = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        /** @type {?} */
        var copiedData = this.data.slice();
        copiedData.push(item);
        this.set(copiedData);
    };
    /**
     * @param {?} item
     * @return {?}
     */
    TableDatabase.prototype.remove = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        /** @type {?} */
        var copiedData = this.data.slice();
        /** @type {?} */
        var index = copiedData.indexOf(item);
        copiedData.splice(index, 1);
        this.set(copiedData);
    };
    return TableDatabase;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TableDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__extends"])(TableDataSource, _super);
    function TableDataSource(_database, _model, _sort) {
        var _this = _super.call(this) || this;
        _this._database = _database;
        _this._model = _model;
        _this._sort = _sort;
        _this._filterChange = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]('');
        return _this;
    }
    Object.defineProperty(TableDataSource.prototype, "filter", {
        get: /**
         * @return {?}
         */
        function () {
            return this._filterChange.value;
        },
        set: /**
         * @param {?} filter
         * @return {?}
         */
        function (filter$$1) {
            this._filterChange.next(filter$$1);
        },
        enumerable: true,
        configurable: true
    });
    // Connect function called by the table to retrieve one stream containing
    // the data to render.
    // Connect function called by the table to retrieve one stream containing
    // the data to render.
    /**
     * @return {?}
     */
    TableDataSource.prototype.connect = 
    // Connect function called by the table to retrieve one stream containing
    // the data to render.
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this._database) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_14__["merge"])([]);
        }
        /** @type {?} */
        var displayDataChanges = [
            this._database.dataChange,
            this._filterChange,
            this._sort.sortChange
        ];
        return rxjs__WEBPACK_IMPORTED_MODULE_14__["merge"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__spread"])(displayDataChanges)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["map"])((/**
         * @return {?}
         */
        function () {
            return _this.getFilteredData(_this._database.data);
        })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["map"])((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            return _this.getSortedData(data);
        })));
    };
    /**
     * @return {?}
     */
    TableDataSource.prototype.disconnect = /**
     * @return {?}
     */
    function () { };
    /**
     * @param {?} data
     * @return {?}
     */
    TableDataSource.prototype.getFilteredData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (!this.filter) {
            return data;
        }
        return data.slice().filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var searchStr = _this._model.columns
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.filterable; }))
                .map((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return _igo2_utils__WEBPACK_IMPORTED_MODULE_10__["ObjectUtils"].resolve(item, c.name); }))
                .join(' ')
                .toLowerCase();
            return searchStr.indexOf(_this.filter.toLowerCase()) !== -1;
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    TableDataSource.prototype.getSortedData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (!this._sort.active || this._sort.direction === '') {
            return data;
        }
        return data.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var propertyA = _igo2_utils__WEBPACK_IMPORTED_MODULE_10__["ObjectUtils"].resolve(a, _this._sort.active);
            /** @type {?} */
            var propertyB = _igo2_utils__WEBPACK_IMPORTED_MODULE_10__["ObjectUtils"].resolve(b, _this._sort.active);
            return _igo2_utils__WEBPACK_IMPORTED_MODULE_10__["ObjectUtils"].naturalCompare(propertyB, propertyA, _this._sort.direction);
        }));
    };
    return TableDataSource;
}(_angular_cdk_table__WEBPACK_IMPORTED_MODULE_9__["DataSource"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {number} */
var TableActionColor = {
    primary: 0,
    accent: 1,
    warn: 2,
};
TableActionColor[TableActionColor.primary] = 'primary';
TableActionColor[TableActionColor.accent] = 'accent';
TableActionColor[TableActionColor.warn] = 'warn';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TableComponent = /** @class */ (function () {
    function TableComponent() {
        this._hasFIlterInput = true;
        this.selection = new _angular_cdk_collections__WEBPACK_IMPORTED_MODULE_8__["SelectionModel"](true, []);
        this.select = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(TableComponent.prototype, "database", {
        get: /**
         * @return {?}
         */
        function () {
            return this._database;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._database = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableComponent.prototype, "model", {
        get: /**
         * @return {?}
         */
        function () {
            return this._model;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._model = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableComponent.prototype, "hasFilterInput", {
        get: /**
         * @return {?}
         */
        function () {
            return this._hasFIlterInput;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._hasFIlterInput = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TableComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.dataSource = new TableDataSource(this.database, this.model, this.sort);
        if (this.model) {
            this.displayedColumns = this.model.columns
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.displayed !== false; }))
                .map((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.name; }));
            if (this.model.selectionCheckbox) {
                this.displayedColumns.unshift('selectionCheckbox');
            }
            if (this.model.actions && this.model.actions.length) {
                this.displayedColumns.push('action');
            }
        }
        this.selection.changed.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.select.emit(e); }));
    };
    /**
     * @return {?}
     */
    TableComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.filter) {
            Object(rxjs__WEBPACK_IMPORTED_MODULE_14__["fromEvent"])(this.filter.nativeElement, 'keyup')
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["debounceTime"])(150), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["distinctUntilChanged"])())
                .subscribe((/**
             * @return {?}
             */
            function () {
                if (!_this.dataSource) {
                    return;
                }
                _this.dataSource.filter = _this.filter.nativeElement.value;
            }));
        }
    };
    /**
     * @param {?} change
     * @return {?}
     */
    TableComponent.prototype.ngOnChanges = /**
     * @param {?} change
     * @return {?}
     */
    function (change) {
        if (change.database) {
            this.dataSource = new TableDataSource(this.database, this.model, this.sort);
            this.selection.clear();
        }
    };
    /**
     * @param {?} colorId
     * @return {?}
     */
    TableComponent.prototype.getActionColor = /**
     * @param {?} colorId
     * @return {?}
     */
    function (colorId) {
        return TableActionColor[colorId];
    };
    /**
     * @param {?} row
     * @param {?} key
     * @return {?}
     */
    TableComponent.prototype.getValue = /**
     * @param {?} row
     * @param {?} key
     * @return {?}
     */
    function (row, key) {
        return _igo2_utils__WEBPACK_IMPORTED_MODULE_10__["ObjectUtils"].resolve(row, key);
    };
    /** Whether the number of selected elements matches the total number of rows. */
    /**
     * Whether the number of selected elements matches the total number of rows.
     * @return {?}
     */
    TableComponent.prototype.isAllSelected = /**
     * Whether the number of selected elements matches the total number of rows.
     * @return {?}
     */
    function () {
        /** @type {?} */
        var numSelected = this.selection.selected.length;
        /** @type {?} */
        var numRows = this.database.data.length;
        return numSelected === numRows;
    };
    /** Selects all rows if they are not all selected; otherwise clear selection. */
    /**
     * Selects all rows if they are not all selected; otherwise clear selection.
     * @return {?}
     */
    TableComponent.prototype.masterToggle = /**
     * Selects all rows if they are not all selected; otherwise clear selection.
     * @return {?}
     */
    function () {
        var _this = this;
        this.isAllSelected()
            ? this.selection.clear()
            : this.database.data.forEach((/**
             * @param {?} row
             * @return {?}
             */
            function (row) { return _this.selection.select(row); }));
    };
    /**
     * @param {?} event
     * @param {?} action
     * @param {?} row
     * @return {?}
     */
    TableComponent.prototype.handleClickAction = /**
     * @param {?} event
     * @param {?} action
     * @param {?} row
     * @return {?}
     */
    function (event, action, row) {
        event.stopPropagation();
        action.click(row);
    };
    TableComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-table',
                    template: "<div class='table-box'>\r\n  <div class='table-header' *ngIf=\"hasFilterInput\">\r\n    <mat-form-field floatPlaceholder='never'>\r\n      <input matInput #filter [placeholder]=\"'igo.common.table.filter' | translate\">\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div class='table-container'>\r\n    <table mat-table #table [dataSource]='dataSource' matSort>\r\n\r\n      <!-- Checkbox Column -->\r\n      <ng-container matColumnDef=\"selectionCheckbox\">\r\n        <th mat-header-cell *matHeaderCellDef>\r\n          <mat-checkbox (change)=\"$event ? masterToggle() : null\"\r\n                        [checked]=\"selection.hasValue() && isAllSelected()\"\r\n                        [indeterminate]=\"selection.hasValue() && !isAllSelected()\">\r\n          </mat-checkbox>\r\n        </th>\r\n        <td mat-cell *matCellDef=\"let row\">\r\n          <mat-checkbox (click)=\"$event.stopPropagation()\"\r\n                        (change)=\"$event ? selection.toggle(row) : null\"\r\n                        [checked]=\"selection.isSelected(row)\">\r\n          </mat-checkbox>\r\n        </td>\r\n      </ng-container>\r\n\r\n      <ng-container [matColumnDef]='column.name' *ngFor='let column of model.columns'>\r\n        <ng-container *ngIf='column.sortable'>\r\n          <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column.title}} </th>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf='!column.sortable'>\r\n          <th mat-header-cell *matHeaderCellDef> {{column.title}} </th>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"!column.html; else cellHTML\">\r\n          <td mat-cell *matCellDef='let row' class=\"mat-cell-text\"\r\n            [ngClass]=\"model.cellClassFunc ? model.cellClassFunc(row, column) : {}\">\r\n            {{getValue(row, column.name)}}\r\n          </td>\r\n        </ng-container>\r\n\r\n        <ng-template #cellHTML>\r\n          <td mat-cell *matCellDef='let row' class=\"mat-cell-text\"\r\n            [ngClass]=\"model.cellClassFunc ? model.cellClassFunc(row, column) : {}\"\r\n            [innerHTML]=\"getValue(row, column.name)\">\r\n          </td>\r\n        </ng-template>\r\n      </ng-container>\r\n\r\n      <!-- Action Column -->\r\n      <ng-container matColumnDef='action'>\r\n        <th mat-header-cell *matHeaderCellDef></th>\r\n        <td mat-cell *matCellDef='let row'>\r\n          <button *ngFor='let action of model.actions'\r\n          mat-mini-fab\r\n          [color]='getActionColor(action.color)'\r\n          (click)='handleClickAction($event, action, row)'>\r\n            <mat-icon svgIcon=\"{{action.icon}}\"></mat-icon>\r\n          </button>\r\n        </td>\r\n      </ng-container>\r\n\r\n      <tr mat-header-row *matHeaderRowDef='displayedColumns;'></tr>\r\n      <tr mat-row\r\n        *matRowDef='let row; columns: displayedColumns;'\r\n        [ngClass]=\"model.rowClassFunc ? model.rowClassFunc(row) : {}\"\r\n        (click)=\"selection.toggle(row)\">\r\n      </tr>\r\n\r\n    </table>\r\n  </div>\r\n\r\n</div>\r\n",
                    styles: [":host{width:100%;height:100%;display:block}.table-container{display:flex;flex-direction:column;height:100%;overflow:auto;flex:1 1 auto}.table-box{height:100%;display:flex;flex-direction:column}.table-header{min-height:64px;max-width:500px;display:flex;flex:0 1 auto;align-items:baseline;padding:8px 24px 0;font-size:20px;justify-content:space-between}tr[mat-header-row],tr[mat-row]{height:60px}.mat-cell-text{overflow:hidden;word-wrap:break-word}td[mat-cell]{padding-right:15px}th.mat-header-cell{padding-right:5px}button{margin-right:10px}"]
                }] }
    ];
    TableComponent.propDecorators = {
        database: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        model: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        hasFilterInput: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        select: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        filter: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ViewChild"], args: ['filter',] }],
        sort: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ViewChild"], args: [_angular_material__WEBPACK_IMPORTED_MODULE_7__["MatSort"],] }]
    };
    return TableComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoTableModule = /** @class */ (function () {
    function IgoTableModule() {
    }
    /**
     * @return {?}
     */
    IgoTableModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoTableModule,
            providers: []
        };
    };
    IgoTableModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormsModule"],
                        _angular_cdk_table__WEBPACK_IMPORTED_MODULE_9__["CdkTableModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatTableModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatSortModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatCheckboxModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_6__["IgoLanguageModule"]
                    ],
                    declarations: [TableComponent],
                    exports: [TableComponent]
                },] }
    ];
    return IgoTableModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service where runtime tool configurations are registered
 */
var ToolService = /** @class */ (function () {
    function ToolService() {
    }
    /**
     * @param {?} tool
     * @return {?}
     */
    ToolService.register = /**
     * @param {?} tool
     * @return {?}
     */
    function (tool) {
        ToolService.tools[tool.name] = tool;
    };
    /**
     * Return a tool
     * @param name Tool name
     * @returns tool Tool
     */
    /**
     * Return a tool
     * @param {?} name Tool name
     * @return {?} tool Tool
     */
    ToolService.prototype.getTool = /**
     * Return a tool
     * @param {?} name Tool name
     * @return {?} tool Tool
     */
    function (name) {
        return ToolService.tools[name];
    };
    /**
     * Return all tools
     * @returns tTols
     */
    /**
     * Return all tools
     * @return {?} tTols
     */
    ToolService.prototype.getTools = /**
     * Return all tools
     * @return {?} tTols
     */
    function () {
        return Object.values(ToolService.tools);
    };
    ToolService.tools = {};
    ToolService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ToolService.ctorParameters = function () { return []; };
    /** @nocollapse */ ToolService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["defineInjectable"])({ factory: function ToolService_Factory() { return new ToolService(); }, token: ToolService, providedIn: "root" });
    return ToolService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service where all available tools and their component are registered.
 */
var  /**
 * Service where all available tools and their component are registered.
 */
Toolbox = /** @class */ (function () {
    function Toolbox(options) {
        if (options === void 0) { options = {}; }
        this.options = options;
        /**
         * Observable of the active tool
         */
        this.activeTool$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        /**
         * Ordered list of tool names to display in a toolbar
         */
        this.toolbar$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]([]);
        /**
         * Active tool history. Useful for activating the previous tool.
         */
        this.activeToolHistory = [];
        /**
         * Tool store
         */
        this.store = new EntityStore([], {
            getKey: (/**
             * @param {?} tool
             * @return {?}
             */
            function (tool) { return tool.name; })
        });
        this.setToolbar(options.toolbar);
        this.initStore();
    }
    Object.defineProperty(Toolbox.prototype, "tools$", {
        get: /**
         * @return {?}
         */
        function () {
            return this.store.entities$;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Destroy the toolbox
     */
    /**
     * Destroy the toolbox
     * @return {?}
     */
    Toolbox.prototype.destroy = /**
     * Destroy the toolbox
     * @return {?}
     */
    function () {
        this.activeTool$$.unsubscribe();
        this.store.destroy();
    };
    /**
     * Return a tool
     * @param name Tool name
     * @returns tool Tool
     */
    /**
     * Return a tool
     * @param {?} name Tool name
     * @return {?} tool Tool
     */
    Toolbox.prototype.getTool = /**
     * Return a tool
     * @param {?} name Tool name
     * @return {?} tool Tool
     */
    function (name) {
        return this.store.get(name);
    };
    /**
     * Return all tools
     * @returns Array of tools
     */
    /**
     * Return all tools
     * @return {?} Array of tools
     */
    Toolbox.prototype.getTools = /**
     * Return all tools
     * @return {?} Array of tools
     */
    function () {
        return this.store.all();
    };
    /**
     * Set tool configurations
     * @param tools Tools
     */
    /**
     * Set tool configurations
     * @param {?} tools Tools
     * @return {?}
     */
    Toolbox.prototype.setTools = /**
     * Set tool configurations
     * @param {?} tools Tools
     * @return {?}
     */
    function (tools) {
        this.store.load(tools);
    };
    /**
     * Set toolbar
     * @param toolbar A list of tool names
     */
    /**
     * Set toolbar
     * @param {?} toolbar A list of tool names
     * @return {?}
     */
    Toolbox.prototype.setToolbar = /**
     * Set toolbar
     * @param {?} toolbar A list of tool names
     * @return {?}
     */
    function (toolbar) {
        this.toolbar$.next(toolbar || []);
    };
    /**
     * Activate a tool (and deactivate other tools)
     * @param name Tool name
     * @param options Tool options
     */
    /**
     * Activate a tool (and deactivate other tools)
     * @param {?} name Tool name
     * @param {?=} options Tool options
     * @return {?}
     */
    Toolbox.prototype.activateTool = /**
     * Activate a tool (and deactivate other tools)
     * @param {?} name Tool name
     * @param {?=} options Tool options
     * @return {?}
     */
    function (name, options) {
        if (options === void 0) { options = {}; }
        /** @type {?} */
        var tool = this.getTool(name);
        if (tool === undefined) {
            return;
        }
        this.store.state.update(tool, { active: true, options: options }, true);
    };
    /**
     * Activate the previous tool, if any
     */
    /**
     * Activate the previous tool, if any
     * @return {?}
     */
    Toolbox.prototype.activatePreviousTool = /**
     * Activate the previous tool, if any
     * @return {?}
     */
    function () {
        if (this.activeToolHistory.length <= 1) {
            this.deactivateTool();
            return;
        }
        var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__read"])(this.activeToolHistory.splice(-2, 2), 2), previous = _a[0], current = _a[1];
        this.activateTool(previous);
    };
    /**
     * Deactivate the active tool
     */
    /**
     * Deactivate the active tool
     * @return {?}
     */
    Toolbox.prototype.deactivateTool = /**
     * Deactivate the active tool
     * @return {?}
     */
    function () {
        this.clearActiveToolHistory();
        this.store.state.updateAll({ active: false });
    };
    /**
     * Initialize the tool store and start observing the active tool
     */
    /**
     * Initialize the tool store and start observing the active tool
     * @private
     * @return {?}
     */
    Toolbox.prototype.initStore = /**
     * Initialize the tool store and start observing the active tool
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.store = new EntityStore([], {
            getKey: (/**
             * @param {?} entity
             * @return {?}
             */
            function (entity) { return entity.name; })
        });
        this.activeTool$$ = this.store.stateView
            .firstBy$((/**
         * @param {?} record
         * @return {?}
         */
        function (record) { return record.state.active === true; }))
            .subscribe((/**
         * @param {?} record
         * @return {?}
         */
        function (record) {
            if (record === undefined) {
                _this.setActiveTool(undefined);
                return;
            }
            /** @type {?} */
            var tool = record.entity;
            /** @type {?} */
            var options = Object.assign({}, tool.options || {}, record.state.options || {});
            _this.setActiveTool(Object.assign({}, tool, { options: options }));
        }));
    };
    /**
     * Set the active tool and update the tool history
     * @param tool Tool
     */
    /**
     * Set the active tool and update the tool history
     * @private
     * @param {?} tool Tool
     * @return {?}
     */
    Toolbox.prototype.setActiveTool = /**
     * Set the active tool and update the tool history
     * @private
     * @param {?} tool Tool
     * @return {?}
     */
    function (tool) {
        this.activeTool$.next(tool);
        if (tool === undefined) {
            this.clearActiveToolHistory();
        }
        else {
            this.activeToolHistory = this.activeToolHistory
                .filter((/**
             * @param {?} name
             * @return {?}
             */
            function (name) { return name !== tool.name; }))
                .concat([tool.name]);
        }
    };
    /**
     * Clear the tool history
     */
    /**
     * Clear the tool history
     * @private
     * @return {?}
     */
    Toolbox.prototype.clearActiveToolHistory = /**
     * Clear the tool history
     * @private
     * @return {?}
     */
    function () {
        this.activeToolHistory = [];
    };
    return Toolbox;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?=} speed
 * @param {?=} type
 * @return {?}
 */
function toolSlideInOut(speed, type) {
    if (speed === void 0) { speed = '300ms'; }
    if (type === void 0) { type = 'ease-in-out'; }
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_11__["trigger"])('toolSlideInOut', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_11__["state"])('enter', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_11__["style"])({
            transform: 'translate3d(0, 0, 0)'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_11__["transition"])('void => enter', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_11__["animate"])(speed + ' ' + type))
    ]);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ToolboxComponent = /** @class */ (function () {
    function ToolboxComponent() {
        /**
         * Observable of the active tool
         */
        this.activeTool$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        /**
         * Store of actions that toggle tools
         */
        this.actionStore = new ActionStore([]);
        /**
         * Observable of he anmation state
         */
        this.animation$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]('none');
        /**
         * Observable of the toolbar
         */
        this.toolbar$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]([]);
        /**
         * Observable of the ongoing animation. This is useful when
         * multiple animations are triggered at once i.e. when the user clicks
         * too fast on different actions
         */
        this.animating$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](false);
        /**
         * Whether the toolbox should animate the first tool entering
         */
        this.animate = false;
    }
    Object.defineProperty(ToolboxComponent.prototype, "toolbarWithTitle", {
        /**
         * Whether the Toolbar should display actions' titles
         */
        get: /**
         * Whether the Toolbar should display actions' titles
         * @return {?}
         */
        function () {
            return this.activeTool$.value === undefined;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Initialize the toolbar and subscribe to the active tool
     * @internal
     */
    /**
     * Initialize the toolbar and subscribe to the active tool
     * \@internal
     * @return {?}
     */
    ToolboxComponent.prototype.ngOnInit = /**
     * Initialize the toolbar and subscribe to the active tool
     * \@internal
     * @return {?}
     */
    function () {
        var _this = this;
        this.toolbar$$ = this.toolbox.toolbar$.subscribe((/**
         * @param {?} toolbar
         * @return {?}
         */
        function (toolbar) {
            return _this.onToolbarChange(toolbar);
        }));
        this.activeTool$$ = this.toolbox.activeTool$.subscribe((/**
         * @param {?} tool
         * @return {?}
         */
        function (tool) {
            return _this.onActiveToolChange(tool);
        }));
    };
    /**
     * Unsubscribe to the active tool and destroy the action store
     * @internal
     */
    /**
     * Unsubscribe to the active tool and destroy the action store
     * \@internal
     * @return {?}
     */
    ToolboxComponent.prototype.ngOnDestroy = /**
     * Unsubscribe to the active tool and destroy the action store
     * \@internal
     * @return {?}
     */
    function () {
        this.toolbar$$.unsubscribe();
        this.activeTool$$.unsubscribe();
        this.actionStore.destroy();
    };
    /**
     * Track the starting animation
     * @internal
     */
    /**
     * Track the starting animation
     * \@internal
     * @return {?}
     */
    ToolboxComponent.prototype.onAnimationStart = /**
     * Track the starting animation
     * \@internal
     * @return {?}
     */
    function () {
        this.animating$.next(true);
    };
    /**
     * Untrack the completed animation
     * @internal
     */
    /**
     * Untrack the completed animation
     * \@internal
     * @return {?}
     */
    ToolboxComponent.prototype.onAnimationComplete = /**
     * Untrack the completed animation
     * \@internal
     * @return {?}
     */
    function () {
        this.animating$.next(false);
    };
    /**
     * Return a tool's inputs
     * @param tool Tool
     * @returns Tool inputs
     * @internal
     */
    /**
     * Return a tool's inputs
     * \@internal
     * @param {?} tool Tool
     * @return {?} Tool inputs
     */
    ToolboxComponent.prototype.getToolInputs = /**
     * Return a tool's inputs
     * \@internal
     * @param {?} tool Tool
     * @return {?} Tool inputs
     */
    function (tool) {
        return tool.options || {};
    };
    Object.defineProperty(ToolboxComponent.prototype, "actionBarItemClassFunc", {
        /**
         * Get Action bar item class function
         * @internal
         */
        get: /**
         * Get Action bar item class function
         * \@internal
         * @return {?}
         */
        function () {
            var _this = this;
            return (/**
             * @param {?} tool
             * @return {?}
             */
            function (tool) {
                if (!_this.toolbox.activeTool$.value) {
                    return;
                }
                return { 'tool-actived': tool.id === _this.toolbox.activeTool$.value.name };
            });
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Initialize an action store
     * @param toolbar Toolbar
     */
    /**
     * Initialize an action store
     * @private
     * @param {?} toolbar Toolbar
     * @return {?}
     */
    ToolboxComponent.prototype.onToolbarChange = /**
     * Initialize an action store
     * @private
     * @param {?} toolbar Toolbar
     * @return {?}
     */
    function (toolbar) {
        this.setToolbar(toolbar);
    };
    /**
     * Activate a tool and trigger an animation or not
     * @param tool Tool to activate
     */
    /**
     * Activate a tool and trigger an animation or not
     * @private
     * @param {?} tool Tool to activate
     * @return {?}
     */
    ToolboxComponent.prototype.onActiveToolChange = /**
     * Activate a tool and trigger an animation or not
     * @private
     * @param {?} tool Tool to activate
     * @return {?}
     */
    function (tool) {
        var _this = this;
        if (!this.animate) {
            this.setActiveTool(tool);
            return;
        }
        this.onAnimate((/**
         * @return {?}
         */
        function () { return _this.setActiveTool(tool); }));
    };
    /**
     * Set the active tool
     * @param tool Tool to activate
     */
    /**
     * Set the active tool
     * @private
     * @param {?} tool Tool to activate
     * @return {?}
     */
    ToolboxComponent.prototype.setActiveTool = /**
     * Set the active tool
     * @private
     * @param {?} tool Tool to activate
     * @return {?}
     */
    function (tool) {
        if (tool === undefined) {
            this.actionStore.state.updateAll({ active: false });
        }
        else {
            /** @type {?} */
            var action = this.actionStore.get(tool.name);
            if (action !== undefined) {
                this.actionStore.state.update(action, { active: true }, true);
            }
        }
        this.activeTool$.next(tool);
        if (this.animate) {
            this.animation$.next('enter');
        }
    };
    /**
     * Initialize the toolbar
     */
    /**
     * Initialize the toolbar
     * @private
     * @param {?} toolbar
     * @return {?}
     */
    ToolboxComponent.prototype.setToolbar = /**
     * Initialize the toolbar
     * @private
     * @param {?} toolbar
     * @return {?}
     */
    function (toolbar) {
        var _this = this;
        /** @type {?} */
        var actions = toolbar.reduce((/**
         * @param {?} acc
         * @param {?} toolName
         * @return {?}
         */
        function (acc, toolName) {
            /** @type {?} */
            var tool = _this.toolbox.getTool(toolName);
            if (tool === undefined) {
                return acc;
            }
            acc.push({
                id: tool.name,
                title: tool.title,
                icon: tool.icon,
                // iconImage: tool.iconImage,
                tooltip: tool.tooltip,
                args: [tool, _this.toolbox],
                handler: (/**
                 * @param {?} _tool
                 * @param {?} _toolbox
                 * @return {?}
                 */
                function (_tool, _toolbox) {
                    _toolbox.activateTool(_tool.name);
                })
            });
            return acc;
        }), []);
        this.actionStore.load(actions);
        this.toolbar$.next(toolbar);
    };
    /**
     * Observe the ongoing animation and ignore any incoming animation
     * while one is still ongoing.
     * @param callback Callback to execute when the animation completes
     */
    /**
     * Observe the ongoing animation and ignore any incoming animation
     * while one is still ongoing.
     * @private
     * @param {?} callback Callback to execute when the animation completes
     * @return {?}
     */
    ToolboxComponent.prototype.onAnimate = /**
     * Observe the ongoing animation and ignore any incoming animation
     * while one is still ongoing.
     * @private
     * @param {?} callback Callback to execute when the animation completes
     * @return {?}
     */
    function (callback) {
        var _this = this;
        this.unAnimate();
        this.animating$$ = this.animating$.subscribe((/**
         * @param {?} animation
         * @return {?}
         */
        function (animation) {
            if (!animation) {
                callback.call(_this);
                _this.unAnimate();
            }
        }));
    };
    /**
     * Stop observing an animation when it's complete
     */
    /**
     * Stop observing an animation when it's complete
     * @private
     * @return {?}
     */
    ToolboxComponent.prototype.unAnimate = /**
     * Stop observing an animation when it's complete
     * @private
     * @return {?}
     */
    function () {
        if (this.animating$$) {
            this.animating$$.unsubscribe();
        }
    };
    ToolboxComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-toolbox',
                    template: "<igo-actionbar\r\n  *ngIf=\"(toolbar$ | async).length > 0\"\r\n  [store]=\"actionStore\"\r\n  [withIcon]=\"true\"\r\n  [withTitle]=\"toolbarWithTitle\"\r\n  [horizontal]=\"false\"\r\n  [itemClassFunc]=\"actionBarItemClassFunc\">\r\n</igo-actionbar>\r\n\r\n<div\r\n  *ngIf=\"activeTool$ | async as tool\"\r\n  class=\"igo-tool-container\"\r\n  [ngClass]=\"{'igo-tool-container-with-toolbar': !actionStore.empty, 'igo-tool-container-with-animation': animate}\"\r\n  [@toolSlideInOut]=\"animation$ | async\"\r\n  (@toolSlideInOut.start)=\"onAnimationStart()\"\r\n  (@toolSlideInOut.done)=\"onAnimationComplete()\">\r\n\r\n  <igo-dynamic-outlet\r\n    [component]=\"tool.component\"\r\n    [inputs]=\"getToolInputs(tool)\">\r\n  </igo-dynamic-outlet>\r\n\r\n</div>\r\n",
                    animations: [toolSlideInOut()],
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{display:block;position:relative;overflow:hidden;width:100%;height:100%}.igo-tool-container{position:absolute;top:0;bottom:0;left:0;right:0}.igo-tool-container-with-animation{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.igo-tool-container-with-toolbar{left:51px}igo-actionbar{height:100%}igo-actionbar.with-title{width:100%;overflow:auto}igo-actionbar:not(.with-title){width:48px;overflow:hidden;-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd}igo-actionbar ::ng-deep igo-actionbar-item.tool-actived ::ng-deep mat-list-item{background-color:#e0e0e0}igo-dynamic-outlet{overflow:auto}"]
                }] }
    ];
    ToolboxComponent.propDecorators = {
        toolbox: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        animate: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return ToolboxComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoToolboxModule = /** @class */ (function () {
    function IgoToolboxModule() {
    }
    IgoToolboxModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        IgoActionModule,
                        IgoDynamicComponentModule
                    ],
                    exports: [
                        ToolboxComponent
                    ],
                    declarations: [
                        ToolboxComponent
                    ]
                },] }
    ];
    return IgoToolboxModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoToolModule = /** @class */ (function () {
    function IgoToolModule() {
    }
    /**
     * @return {?}
     */
    IgoToolModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoToolModule,
            providers: [
                ToolService
            ]
        };
    };
    IgoToolModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"]
                    ],
                    exports: [
                        IgoToolboxModule
                    ],
                    declarations: []
                },] }
    ];
    return IgoToolModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This component dynamically renders a widget. It also subscribes
 * to the widget's 'cancel' and 'complete' events and destroys it
 * when any of those event is emitted.
 */
var WidgetOutletComponent = /** @class */ (function () {
    function WidgetOutletComponent() {
        var _this = this;
        /**
         * Widget subscribers to 'cancel' and 'complete'
         * \@internal
         */
        this.baseSubscribers = {
            cancel: (/**
             * @param {?} event
             * @return {?}
             */
            function (event) { return _this.onCancel(event); }),
            complete: (/**
             * @param {?} event
             * @return {?}
             */
            function (event) { return _this.onComplete(event); })
        };
        /**
         * Widget subscribers
         */
        this.subscribers = {};
        /**
         * Event emitted when the widget emits 'complete'
         */
        this.complete = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        /**
         * Event emitted when the widget emits 'cancel'
         */
        this.cancel = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    /**
     * Destroy the current widget and all it's inner subscriptions
     * @internal
     */
    /**
     * Destroy the current widget and all it's inner subscriptions
     * \@internal
     * @return {?}
     */
    WidgetOutletComponent.prototype.ngOnDestroy = /**
     * Destroy the current widget and all it's inner subscriptions
     * \@internal
     * @return {?}
     */
    function () {
        this.destroyWidget();
    };
    /**
     * Get the effective subscribers. That means a combination of the base
     * subscribers and any subscriber given as input.
     * @returns Combined subscribers
     * @internal
     */
    /**
     * Get the effective subscribers. That means a combination of the base
     * subscribers and any subscriber given as input.
     * \@internal
     * @return {?} Combined subscribers
     */
    WidgetOutletComponent.prototype.getEffectiveSubscribers = /**
     * Get the effective subscribers. That means a combination of the base
     * subscribers and any subscriber given as input.
     * \@internal
     * @return {?} Combined subscribers
     */
    function () {
        var _this = this;
        /** @type {?} */
        var subscribers = Object.assign({}, this.subscribers);
        // Base subscribers
        Object.keys(this.baseSubscribers).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            /** @type {?} */
            var subscriber = subscribers[key];
            /** @type {?} */
            var baseSubscriber = _this.baseSubscribers[key];
            if (subscriber !== undefined) {
                subscribers[key] = (/**
                 * @param {?} event
                 * @return {?}
                 */
                function (event) {
                    subscriber(event);
                    baseSubscriber(event);
                });
            }
            else {
                subscribers[key] = baseSubscriber;
            }
        }));
        return subscribers;
    };
    /**
     * When the widget emits 'cancel', propagate that event and destroy
     * the widget
     */
    /**
     * When the widget emits 'cancel', propagate that event and destroy
     * the widget
     * @private
     * @param {?} event
     * @return {?}
     */
    WidgetOutletComponent.prototype.onCancel = /**
     * When the widget emits 'cancel', propagate that event and destroy
     * the widget
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.cancel.emit(event);
        this.destroyWidget();
    };
    /**
     * When the widget emits 'complete', propagate that event and destroy
     * the widget
     */
    /**
     * When the widget emits 'complete', propagate that event and destroy
     * the widget
     * @private
     * @param {?} event
     * @return {?}
     */
    WidgetOutletComponent.prototype.onComplete = /**
     * When the widget emits 'complete', propagate that event and destroy
     * the widget
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.complete.emit(event);
        this.destroyWidget();
    };
    /**
     * Destroy the current widget
     */
    /**
     * Destroy the current widget
     * @private
     * @return {?}
     */
    WidgetOutletComponent.prototype.destroyWidget = /**
     * Destroy the current widget
     * @private
     * @return {?}
     */
    function () {
        if (this.widget !== undefined) {
            this.widget.destroy();
        }
        this.widget = undefined;
    };
    WidgetOutletComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-widget-outlet',
                    template: "<igo-dynamic-outlet\r\n  *ngIf=\"widget\"\r\n  [component]=\"widget\"\r\n  [inputs]=\"inputs\"\r\n  [subscribers]=\"getEffectiveSubscribers()\">\r\n</igo-dynamic-outlet>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: ["igo-dynamic-outlet{height:100%}"]
                }] }
    ];
    /** @nocollapse */
    WidgetOutletComponent.ctorParameters = function () { return []; };
    WidgetOutletComponent.propDecorators = {
        widget: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        inputs: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        subscribers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        complete: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        cancel: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return WidgetOutletComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoWidgetOutletModule = /** @class */ (function () {
    function IgoWidgetOutletModule() {
    }
    IgoWidgetOutletModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        IgoDynamicComponentModule
                    ],
                    exports: [
                        WidgetOutletComponent
                    ],
                    declarations: [
                        WidgetOutletComponent
                    ]
                },] }
    ];
    return IgoWidgetOutletModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WidgetService = /** @class */ (function () {
    function WidgetService(dynamicComponentService) {
        this.dynamicComponentService = dynamicComponentService;
    }
    /**
     * @param {?} widgetCls
     * @return {?}
     */
    WidgetService.prototype.create = /**
     * @param {?} widgetCls
     * @return {?}
     */
    function (widgetCls) {
        return this.dynamicComponentService.create((/** @type {?} */ (widgetCls)));
    };
    WidgetService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    WidgetService.ctorParameters = function () { return [
        { type: DynamicComponentService }
    ]; };
    /** @nocollapse */ WidgetService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["defineInjectable"])({ factory: function WidgetService_Factory() { return new WidgetService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(DynamicComponentService)); }, token: WidgetService, providedIn: "root" });
    return WidgetService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoWidgetModule = /** @class */ (function () {
    function IgoWidgetModule() {
    }
    IgoWidgetModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        IgoWidgetOutletModule
                    ],
                    exports: [
                        IgoWidgetOutletModule
                    ],
                    declarations: [],
                    providers: [
                        WidgetService
                    ]
                },] }
    ];
    return IgoWidgetModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * The class is a specialized version of an EntityStore that stores
 * workspaces.
 */
var  /**
 * The class is a specialized version of an EntityStore that stores
 * workspaces.
 */
WorkspaceStore = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__extends"])(WorkspaceStore, _super);
    function WorkspaceStore() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.activeWorkspace$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        return _this;
    }
    /**
     * Activate the an workspace workspace and deactivate the one currently active
     * @param workspace Workspace
     */
    /**
     * Activate the an workspace workspace and deactivate the one currently active
     * @param {?} workspace Workspace
     * @return {?}
     */
    WorkspaceStore.prototype.activateWorkspace = /**
     * Activate the an workspace workspace and deactivate the one currently active
     * @param {?} workspace Workspace
     * @return {?}
     */
    function (workspace) {
        /** @type {?} */
        var active = this.activeWorkspace$.value;
        if (active !== undefined) {
            active.deactivate();
        }
        this.deactivateWorkspace();
        if (workspace !== undefined) {
            this.state.update(workspace, { active: true, selected: true }, true);
            this.activeWorkspace$.next(workspace);
            workspace.activate();
        }
    };
    /**
     * Deactivate the current workspace
     * @param workspace Workspace
     */
    /**
     * Deactivate the current workspace
     * @return {?}
     */
    WorkspaceStore.prototype.deactivateWorkspace = /**
     * Deactivate the current workspace
     * @return {?}
     */
    function () {
        /** @type {?} */
        var active = this.activeWorkspace$.value;
        if (active !== undefined) {
            active.deactivate();
            this.activeWorkspace$.next(undefined);
        }
    };
    return WorkspaceStore;
}(EntityStore));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Drop list that activates the selected workspace emit an event.
 */
var WorkspaceSelectorComponent = /** @class */ (function () {
    function WorkspaceSelectorComponent() {
        /**
         * Event emitted when an workspace is selected or unselected
         */
        this.selectedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    /**
     * @internal
     */
    /**
     * \@internal
     * @param {?} workspace
     * @return {?}
     */
    WorkspaceSelectorComponent.prototype.getWorkspaceTitle = /**
     * \@internal
     * @param {?} workspace
     * @return {?}
     */
    function (workspace) {
        return getEntityTitle(workspace);
    };
    /**
     * When an workspace is manually selected, select it into the
     * store and emit an event.
     * @internal
     * @param event The selection change event
     */
    /**
     * When an workspace is manually selected, select it into the
     * store and emit an event.
     * \@internal
     * @param {?} event The selection change event
     * @return {?}
     */
    WorkspaceSelectorComponent.prototype.onSelectedChange = /**
     * When an workspace is manually selected, select it into the
     * store and emit an event.
     * \@internal
     * @param {?} event The selection change event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var workspace = event.value;
        this.store.activateWorkspace(workspace);
        this.selectedChange.emit({ selected: true, value: workspace });
    };
    WorkspaceSelectorComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-workspace-selector',
                    template: "<igo-entity-selector\r\n  [store]=\"store\"\r\n  [multi]=\"false\"\r\n  [titleAccessor]=\"getWorkspaceTitle\"\r\n  (selectedChange)=\"onSelectedChange($event)\">\r\n</igo-entity-selector>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: ["igo-entity-selector ::ng-deep mat-form-field .mat-form-field-infix{padding:0}igo-entity-selector ::ng-deep mat-form-field .mat-form-field-wrapper{padding-bottom:1.75em}"]
                }] }
    ];
    WorkspaceSelectorComponent.propDecorators = {
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        selectedChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return WorkspaceSelectorComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoWorkspaceSelectorModule = /** @class */ (function () {
    function IgoWorkspaceSelectorModule() {
    }
    IgoWorkspaceSelectorModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        IgoEntitySelectorModule
                    ],
                    exports: [
                        WorkspaceSelectorComponent
                    ],
                    declarations: [
                        WorkspaceSelectorComponent
                    ]
                },] }
    ];
    return IgoWorkspaceSelectorModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This class is responsible of managing the relations between
 * entities and the actions that consume them. It also defines an
 * entity table template that may be used by an entity table component.
 * @template E
 */
var  /**
 * This class is responsible of managing the relations between
 * entities and the actions that consume them. It also defines an
 * entity table template that may be used by an entity table component.
 * @template E
 */
Workspace = /** @class */ (function () {
    function Workspace(options) {
        this.options = options;
        /**
         * Observable of the selected widget
         */
        this.widget$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"](undefined);
        /**
         * Observable of the selected widget's inputs
         */
        this.widgetInputs$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]({});
        /**
         * Observable of the selected widget's subscribers
         */
        this.widgetSubscribers$ = new rxjs__WEBPACK_IMPORTED_MODULE_14__["BehaviorSubject"]({});
        /**
         * Whether this workspace is active
         */
        this.active = false;
        /**
         * State change that trigger an update of the actions availability
         */
        this.change = new rxjs__WEBPACK_IMPORTED_MODULE_14__["Subject"]();
    }
    Object.defineProperty(Workspace.prototype, "id", {
        /**
         * Workspace id
         */
        get: /**
         * Workspace id
         * @return {?}
         */
        function () { return this.options.id; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workspace.prototype, "title", {
        /**
         * Workspace title
         */
        get: /**
         * Workspace title
         * @return {?}
         */
        function () { return this.options.title; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workspace.prototype, "meta", {
        /**
         * Workspace title
         */
        get: /**
         * Workspace title
         * @return {?}
         */
        function () { return this.options.meta || {}; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workspace.prototype, "entityStore", {
        /**
         * Entities store
         */
        get: /**
         * Entities store
         * @return {?}
         */
        function () { return (/** @type {?} */ (this.options.entityStore)); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workspace.prototype, "actionStore", {
        /**
         * Actions store (some actions activate a widget)
         */
        get: /**
         * Actions store (some actions activate a widget)
         * @return {?}
         */
        function () { return this.options.actionStore; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workspace.prototype, "widget", {
        /**
         * Selected widget
         */
        get: /**
         * Selected widget
         * @return {?}
         */
        function () { return this.widget$.value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workspace.prototype, "hasWidget", {
        /**
         * Whether a widget is selected
         */
        get: /**
         * Whether a widget is selected
         * @return {?}
         */
        function () { return this.widget !== undefined; },
        enumerable: true,
        configurable: true
    });
    /**
     * Whether this workspace is active
     */
    /**
     * Whether this workspace is active
     * @return {?}
     */
    Workspace.prototype.isActive = /**
     * Whether this workspace is active
     * @return {?}
     */
    function () { return this.active; };
    /**
     * Activate the workspace. By doing that, the workspace will observe
     * the selected entity (from the store) and update the actions availability.
     * For example, some actions require an entity to be selected.
     */
    /**
     * Activate the workspace. By doing that, the workspace will observe
     * the selected entity (from the store) and update the actions availability.
     * For example, some actions require an entity to be selected.
     * @return {?}
     */
    Workspace.prototype.activate = /**
     * Activate the workspace. By doing that, the workspace will observe
     * the selected entity (from the store) and update the actions availability.
     * For example, some actions require an entity to be selected.
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.active === true) {
            this.deactivate();
        }
        this.active = true;
        if (this.entityStore !== undefined) {
            this.entities$$ = this.entityStore.stateView.all$()
                .subscribe((/**
             * @return {?}
             */
            function () { return _this.onStateChange(); }));
        }
        if (this.actionStore !== undefined) {
            this.change$ = this.change
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__["debounceTime"])(35))
                .subscribe((/**
             * @return {?}
             */
            function () { return _this.actionStore.updateActionsAvailability(); }));
        }
        this.change.next();
    };
    /**
     * Deactivate the workspace. Unsubcribe to the selected entity.
     */
    /**
     * Deactivate the workspace. Unsubcribe to the selected entity.
     * @return {?}
     */
    Workspace.prototype.deactivate = /**
     * Deactivate the workspace. Unsubcribe to the selected entity.
     * @return {?}
     */
    function () {
        this.active = false;
        this.deactivateWidget();
        if (this.entities$$ !== undefined) {
            this.entities$$.unsubscribe();
        }
        if (this.change$ !== undefined) {
            this.change$.unsubscribe();
        }
    };
    /**
     * Activate a widget. In itself, activating a widget doesn't render it but,
     * if an WorkspaceWidgetOutlet component is bound to this workspace, the widget will
     * show up.
     * @param widget Widget
     * @param inputs Inputs the widget will receive
     */
    /**
     * Activate a widget. In itself, activating a widget doesn't render it but,
     * if an WorkspaceWidgetOutlet component is bound to this workspace, the widget will
     * show up.
     * @param {?} widget Widget
     * @param {?=} inputs Inputs the widget will receive
     * @param {?=} subscribers
     * @return {?}
     */
    Workspace.prototype.activateWidget = /**
     * Activate a widget. In itself, activating a widget doesn't render it but,
     * if an WorkspaceWidgetOutlet component is bound to this workspace, the widget will
     * show up.
     * @param {?} widget Widget
     * @param {?=} inputs Inputs the widget will receive
     * @param {?=} subscribers
     * @return {?}
     */
    function (widget, inputs, subscribers) {
        if (inputs === void 0) { inputs = {}; }
        if (subscribers === void 0) { subscribers = {}; }
        this.widget$.next(widget);
        this.widgetInputs$.next(inputs);
        this.widgetSubscribers$.next(subscribers);
        this.change.next();
    };
    /**
     * Deactivate a widget.
     */
    /**
     * Deactivate a widget.
     * @return {?}
     */
    Workspace.prototype.deactivateWidget = /**
     * Deactivate a widget.
     * @return {?}
     */
    function () {
        this.widget$.next(undefined);
        this.change.next();
    };
    /**
     * When the state changes, update the actions availability.
     */
    /**
     * When the state changes, update the actions availability.
     * @private
     * @return {?}
     */
    Workspace.prototype.onStateChange = /**
     * When the state changes, update the actions availability.
     * @private
     * @return {?}
     */
    function () {
        this.change.next();
    };
    return Workspace;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This component dynamically render an Workspace's active widget.
 * It also deactivate that widget whenever the widget's component
 * emit the 'cancel' or 'complete' event.
 */
var WorkspaceWidgetOutletComponent = /** @class */ (function () {
    function WorkspaceWidgetOutletComponent() {
        /**
         * Event emitted when a widget is deactivate which happens
         * when the widget's component emits the 'cancel' or 'complete' event.
         */
        this.deactivateWidget = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(WorkspaceWidgetOutletComponent.prototype, "widget$", {
        /**
         * Observable of the workspace's active widget
         * @internal
         */
        get: /**
         * Observable of the workspace's active widget
         * \@internal
         * @return {?}
         */
        function () { return this.workspace.widget$; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WorkspaceWidgetOutletComponent.prototype, "widgetInputs$", {
        /**
         * Observable of the workspace's widget inputs
         * @internal
         */
        get: /**
         * Observable of the workspace's widget inputs
         * \@internal
         * @return {?}
         */
        function () {
            return this.workspace.widgetInputs$;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WorkspaceWidgetOutletComponent.prototype, "widgetSubscribers$", {
        /**
         * Observable of the workspace's widget inputs
         * @internal
         */
        get: /**
         * Observable of the workspace's widget inputs
         * \@internal
         * @return {?}
         */
        function () {
            return this.workspace.widgetSubscribers$;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * When a widget's component emit the 'cancel' event,
     * deactivate that widget and emit the 'deactivateWidget' event.
     * @param widget Widget
     * @internal
     */
    /**
     * When a widget's component emit the 'cancel' event,
     * deactivate that widget and emit the 'deactivateWidget' event.
     * \@internal
     * @param {?} widget Widget
     * @return {?}
     */
    WorkspaceWidgetOutletComponent.prototype.onWidgetCancel = /**
     * When a widget's component emit the 'cancel' event,
     * deactivate that widget and emit the 'deactivateWidget' event.
     * \@internal
     * @param {?} widget Widget
     * @return {?}
     */
    function (widget) {
        this.workspace.deactivateWidget();
        this.deactivateWidget.emit(widget);
    };
    /**
     * When a widget's component emit the 'cancel' event,
     * deactivate that widget and emit the 'deactivateWidget' event.
     * @param widget Widget
     * @internal
     */
    /**
     * When a widget's component emit the 'cancel' event,
     * deactivate that widget and emit the 'deactivateWidget' event.
     * \@internal
     * @param {?} widget Widget
     * @return {?}
     */
    WorkspaceWidgetOutletComponent.prototype.onWidgetComplete = /**
     * When a widget's component emit the 'cancel' event,
     * deactivate that widget and emit the 'deactivateWidget' event.
     * \@internal
     * @param {?} widget Widget
     * @return {?}
     */
    function (widget) {
        this.workspace.deactivateWidget();
        this.deactivateWidget.emit(widget);
    };
    WorkspaceWidgetOutletComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-workspace-widget-outlet',
                    template: "<ng-container *ngIf=\"widget$ | async as widget\">\r\n  <igo-widget-outlet\r\n    [widget]=\"widget\"\r\n    [inputs]=\"widgetInputs$ | async\"\r\n    [subscribers]=\"widgetSubscribers$ | async\"\r\n    (cancel)=\"onWidgetCancel(widget)\"\r\n    (complete)=\"onWidgetComplete(widget)\">\r\n  </igo-widget-outlet>\r\n</ng-container>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectionStrategy"].OnPush,
                    styles: ["igo-widget-outlet{height:100%}"]
                }] }
    ];
    /** @nocollapse */
    WorkspaceWidgetOutletComponent.ctorParameters = function () { return []; };
    WorkspaceWidgetOutletComponent.propDecorators = {
        workspace: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        deactivateWidget: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return WorkspaceWidgetOutletComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoWorkspaceWidgetOutletModule = /** @class */ (function () {
    function IgoWorkspaceWidgetOutletModule() {
    }
    IgoWorkspaceWidgetOutletModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"],
                        IgoWidgetOutletModule
                    ],
                    exports: [
                        WorkspaceWidgetOutletComponent
                    ],
                    declarations: [
                        WorkspaceWidgetOutletComponent
                    ]
                },] }
    ];
    return IgoWorkspaceWidgetOutletModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoWorkspaceModule = /** @class */ (function () {
    function IgoWorkspaceModule() {
    }
    IgoWorkspaceModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_12__["CommonModule"]
                    ],
                    exports: [
                        IgoWorkspaceSelectorModule,
                        IgoWorkspaceWidgetOutletModule
                    ],
                    declarations: []
                },] }
    ];
    return IgoWorkspaceModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} tool
 * @return {?}
 */
function ToolComponent(tool) {
    return (/**
     * @param {?} compType
     * @return {?}
     */
    function (compType) {
        ToolService.register(Object.assign({}, tool, (/** @type {?} */ ({
            component: compType
        }))));
    });
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var Widget = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_16__["__extends"])(Widget, _super);
    function Widget() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return Widget;
}(DynamicComponent));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */



//# sourceMappingURL=igo2-common.js.map

/***/ }),

/***/ "./dist/igo-lib/context/fesm5/igo2-context.js":
/*!****************************************************!*\
  !*** ./dist/igo-lib/context/fesm5/igo2-context.js ***!
  \****************************************************/
/*! exports provided: IgoContextModule, IgoContextManagerModule, IgoContextMapButtonModule, IgoShareMapModule, IgoSidenavModule, ContextService, TypePermission, Scope, LayerContextDirective, MapContextDirective, ContextListComponent, ContextListBindingDirective, ContextItemComponent, ContextFormComponent, ContextEditComponent, ContextEditBindingDirective, ContextPermissionsComponent, ContextPermissionsBindingDirective, BookmarkButtonComponent, BookmarkDialogComponent, PoiButtonComponent, PoiDialogComponent, PoiService, UserButtonComponent, UserDialogComponent, ShareMapService, ShareMapComponent, ShareMapBindingDirective, SidenavComponent, ɵg, ɵf, ɵe, ɵd, ɵb, ɵa, ɵi, ɵh, ɵc, ɵk, ɵj, ɵl, ɵq, ɵm, ɵr, ɵn, ɵp, ɵo, ɵs, ɵv, ɵt, ɵu, ɵw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoContextModule", function() { return IgoContextModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoContextManagerModule", function() { return IgoContextManagerModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoContextMapButtonModule", function() { return IgoContextMapButtonModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoShareMapModule", function() { return IgoShareMapModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoSidenavModule", function() { return IgoSidenavModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextService", function() { return ContextService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TypePermission", function() { return TypePermission; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scope", function() { return Scope; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerContextDirective", function() { return LayerContextDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapContextDirective", function() { return MapContextDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextListComponent", function() { return ContextListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextListBindingDirective", function() { return ContextListBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextItemComponent", function() { return ContextItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextFormComponent", function() { return ContextFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextEditComponent", function() { return ContextEditComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextEditBindingDirective", function() { return ContextEditBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextPermissionsComponent", function() { return ContextPermissionsComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextPermissionsBindingDirective", function() { return ContextPermissionsBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BookmarkButtonComponent", function() { return BookmarkButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BookmarkDialogComponent", function() { return BookmarkDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PoiButtonComponent", function() { return PoiButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PoiDialogComponent", function() { return PoiDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PoiService", function() { return PoiService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserButtonComponent", function() { return UserButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserDialogComponent", function() { return UserDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShareMapService", function() { return ShareMapService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShareMapComponent", function() { return ShareMapComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShareMapBindingDirective", function() { return ShareMapBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SidenavComponent", function() { return SidenavComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵg", function() { return ContextEditBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵf", function() { return ContextEditComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵe", function() { return ContextFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵd", function() { return ContextItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵb", function() { return ContextListBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵa", function() { return ContextListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵi", function() { return ContextPermissionsBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵh", function() { return ContextPermissionsComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵc", function() { return ContextService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵk", function() { return LayerContextDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵj", function() { return MapContextDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵl", function() { return BookmarkButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵq", function() { return BookmarkDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵm", function() { return PoiButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵr", function() { return PoiDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵn", function() { return PoiService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵp", function() { return userButtonSlideInOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵo", function() { return UserButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵs", function() { return UserDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵv", function() { return ShareMapBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵt", function() { return ShareMapComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵu", function() { return ShareMapService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵw", function() { return SidenavComponent; });
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var ol_proj__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/proj */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_easing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/easing */ "./node_modules/ol/easing.js");
/* harmony import */ var ol_geom_Point__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/geom/Point */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/animations */ "./node_modules/@angular/animations/fesm5/animations.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _igo2_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @igo2/utils */ "./dist/igo-lib/utils/fesm5/igo2-utils.js");
/* harmony import */ var _igo2_auth__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @igo2/auth */ "./dist/igo-lib/auth/fesm5/igo2-auth.js");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/format/GeoJSON */ "./node_modules/ol/format/GeoJSON.js");




















/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {number} */
var TypePermission = {
    null: 0,
    read: 1,
    write: 2,
};
TypePermission[TypePermission.null] = 'null';
TypePermission[TypePermission.read] = 'read';
TypePermission[TypePermission.write] = 'write';
/** @enum {number} */
var Scope = {
    public: 0,
    protected: 1,
    private: 2,
};
Scope[Scope.public] = 'public';
Scope[Scope.protected] = 'protected';
Scope[Scope.private] = 'private';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextService = /** @class */ (function () {
    function ContextService(http, authService, languageService, config, route) {
        var _this = this;
        this.http = http;
        this.authService = authService;
        this.languageService = languageService;
        this.config = config;
        this.route = route;
        this.context$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"](undefined);
        this.contexts$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"]({ ours: [] });
        this.defaultContextId$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"](undefined);
        this.editedContext$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"](undefined);
        this.mapViewFromRoute = {};
        this.options = Object.assign({
            basePath: 'contexts',
            contextListFile: '_contexts.json',
            defaultContextUri: '_default'
        }, this.config.getConfig('context'));
        this.baseUrl = this.options.url;
        this.readParamsFromRoute();
        this.authService.authenticate$.subscribe((/**
         * @param {?} authenticated
         * @return {?}
         */
        function (authenticated) {
            if (authenticated === null) {
                _this.loadDefaultContext();
                return;
            }
            /** @type {?} */
            var contexts$$ = _this.contexts$.subscribe((/**
             * @param {?} contexts
             * @return {?}
             */
            function (contexts) {
                if (contexts$$) {
                    contexts$$.unsubscribe();
                    _this.handleContextsChange(contexts);
                }
            }));
            _this.loadContexts();
        }));
    }
    /**
     * @return {?}
     */
    ContextService.prototype.get = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = this.baseUrl + '/contexts';
        return this.http.get(url);
    };
    /**
     * @param {?} id
     * @return {?}
     */
    ContextService.prototype.getById = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var url = this.baseUrl + '/contexts/' + id;
        return this.http.get(url);
    };
    /**
     * @param {?} id
     * @return {?}
     */
    ContextService.prototype.getDetails = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        var _this = this;
        /** @type {?} */
        var url = this.baseUrl + "/contexts/" + id + "/details";
        return this.http
            .get(url)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["catchError"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) { return _this.handleError(res, id); })));
    };
    /**
     * @return {?}
     */
    ContextService.prototype.getDefault = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var url = this.baseUrl + '/contexts/default';
        return this.http.get(url).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["tap"])((/**
         * @param {?} context
         * @return {?}
         */
        function (context) {
            _this.defaultContextId$.next(context.id);
        })));
    };
    /**
     * @param {?} id
     * @return {?}
     */
    ContextService.prototype.setDefault = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var url = this.baseUrl + '/contexts/default';
        return this.http.post(url, { defaultContextId: id });
    };
    /**
     * @param {?} id
     * @return {?}
     */
    ContextService.prototype.delete = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        var _this = this;
        /** @type {?} */
        var url = this.baseUrl + '/contexts/' + id;
        return this.http.delete(url).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["tap"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            /** @type {?} */
            var contexts = { ours: [] };
            Object.keys(_this.contexts$.value).forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) {
                return (contexts[key] = _this.contexts$.value[key].filter((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id !== id; })));
            }));
            _this.contexts$.next(contexts);
        })));
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextService.prototype.create = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        /** @type {?} */
        var url = this.baseUrl + '/contexts';
        return this.http.post(url, JSON.stringify(context)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])((/**
         * @param {?} contextCreated
         * @return {?}
         */
        function (contextCreated) {
            if (_this.authService.authenticated) {
                contextCreated.permission = TypePermission[TypePermission.write];
            }
            else {
                contextCreated.permission = TypePermission[TypePermission.read];
            }
            _this.contexts$.value.ours.push(contextCreated);
            _this.contexts$.next(_this.contexts$.value);
            return contextCreated;
        })));
    };
    /**
     * @param {?} id
     * @param {?=} properties
     * @return {?}
     */
    ContextService.prototype.clone = /**
     * @param {?} id
     * @param {?=} properties
     * @return {?}
     */
    function (id, properties) {
        var _this = this;
        if (properties === void 0) { properties = {}; }
        /** @type {?} */
        var url = this.baseUrl + '/contexts/' + id + '/clone';
        return this.http.post(url, JSON.stringify(properties)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])((/**
         * @param {?} contextCloned
         * @return {?}
         */
        function (contextCloned) {
            contextCloned.permission = TypePermission[TypePermission.write];
            _this.contexts$.value.ours.push(contextCloned);
            _this.contexts$.next(_this.contexts$.value);
            return contextCloned;
        })));
    };
    /**
     * @param {?} id
     * @param {?} context
     * @return {?}
     */
    ContextService.prototype.update = /**
     * @param {?} id
     * @param {?} context
     * @return {?}
     */
    function (id, context) {
        /** @type {?} */
        var url = this.baseUrl + '/contexts/' + id;
        return this.http.patch(url, JSON.stringify(context));
    };
    // =================================================================
    // =================================================================
    /**
     * @param {?} contextId
     * @param {?} toolId
     * @return {?}
     */
    ContextService.prototype.addToolAssociation = 
    // =================================================================
    /**
     * @param {?} contextId
     * @param {?} toolId
     * @return {?}
     */
    function (contextId, toolId) {
        /** @type {?} */
        var url = this.baseUrl + "/contexts/" + contextId + "/tools";
        /** @type {?} */
        var association = {
            toolId: toolId
        };
        return this.http.post(url, JSON.stringify(association));
    };
    /**
     * @param {?} contextId
     * @param {?} toolId
     * @return {?}
     */
    ContextService.prototype.deleteToolAssociation = /**
     * @param {?} contextId
     * @param {?} toolId
     * @return {?}
     */
    function (contextId, toolId) {
        /** @type {?} */
        var url = this.baseUrl + "/contexts/" + contextId + "/tools/" + toolId;
        return this.http.delete(url);
    };
    /**
     * @param {?} id
     * @return {?}
     */
    ContextService.prototype.getPermissions = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var url = this.baseUrl + '/contexts/' + id + '/permissions';
        return this.http.get(url);
    };
    /**
     * @param {?} contextId
     * @param {?} profil
     * @param {?} type
     * @return {?}
     */
    ContextService.prototype.addPermissionAssociation = /**
     * @param {?} contextId
     * @param {?} profil
     * @param {?} type
     * @return {?}
     */
    function (contextId, profil, type) {
        /** @type {?} */
        var url = this.baseUrl + "/contexts/" + contextId + "/permissions";
        /** @type {?} */
        var association = {
            profil: profil,
            typePermission: type
        };
        return this.http.post(url, JSON.stringify(association));
    };
    /**
     * @param {?} contextId
     * @param {?} permissionId
     * @return {?}
     */
    ContextService.prototype.deletePermissionAssociation = /**
     * @param {?} contextId
     * @param {?} permissionId
     * @return {?}
     */
    function (contextId, permissionId) {
        /** @type {?} */
        var url = this.baseUrl + "/contexts/" + contextId + "/permissions/" + permissionId;
        return this.http.delete(url);
    };
    // ======================================================================
    // ======================================================================
    /**
     * @return {?}
     */
    ContextService.prototype.getLocalContexts = 
    // ======================================================================
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = this.getPath(this.options.contextListFile);
        return this.http.get(url).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            return { ours: res };
        })));
    };
    /**
     * @param {?} uri
     * @return {?}
     */
    ContextService.prototype.getLocalContext = /**
     * @param {?} uri
     * @return {?}
     */
    function (uri) {
        var _this = this;
        /** @type {?} */
        var url = this.getPath(uri + ".json");
        return this.http.get(url).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["catchError"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            return _this.handleError(res, uri);
        })));
    };
    /**
     * @return {?}
     */
    ContextService.prototype.loadContexts = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var request;
        if (this.baseUrl) {
            request = this.get();
        }
        else {
            request = this.getLocalContexts();
        }
        request.subscribe((/**
         * @param {?} contexts
         * @return {?}
         */
        function (contexts) {
            /** @type {?} */
            var publicsContexts = _this.contexts$.value.public;
            if (publicsContexts) {
                /** @type {?} */
                var contextUri = publicsContexts.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.uri === _this.options.defaultContextUri; }));
                if (contextUri) {
                    if (!contexts.public) {
                        contexts.public = [];
                    }
                    contexts.public.push(contextUri);
                }
            }
            _this.contexts$.next(contexts);
        }));
    };
    /**
     * @return {?}
     */
    ContextService.prototype.loadDefaultContext = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var loadFct = (/**
         * @param {?=} direct
         * @return {?}
         */
        function (direct) {
            if (direct === void 0) { direct = false; }
            if (!direct && _this.baseUrl && _this.authService.authenticated) {
                _this.getDefault().subscribe((/**
                 * @param {?} _context
                 * @return {?}
                 */
                function (_context) {
                    _this.options.defaultContextUri = _context.uri;
                    _this.addContextToList(_context);
                    _this.setContext(_context);
                }), (/**
                 * @return {?}
                 */
                function () {
                    _this.defaultContextId$.next(undefined);
                    _this.loadContext(_this.options.defaultContextUri);
                }));
            }
            else {
                _this.loadContext(_this.options.defaultContextUri);
            }
        });
        if (this.route && this.route.options.contextKey) {
            this.route.queryParams.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["debounceTime"])(100)).subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                /** @type {?} */
                var contextParam = params[(/** @type {?} */ (_this.route.options.contextKey))];
                /** @type {?} */
                var direct = false;
                if (contextParam) {
                    _this.options.defaultContextUri = contextParam;
                    direct = true;
                }
                loadFct(direct);
            }));
        }
        else {
            loadFct();
        }
    };
    /**
     * @param {?} uri
     * @return {?}
     */
    ContextService.prototype.loadContext = /**
     * @param {?} uri
     * @return {?}
     */
    function (uri) {
        var _this = this;
        /** @type {?} */
        var context = this.context$.value;
        if (context && context.uri === uri) {
            return;
        }
        /** @type {?} */
        var contexts$$ = this.getContextByUri(uri).subscribe((/**
         * @param {?} _context
         * @return {?}
         */
        function (_context) {
            contexts$$.unsubscribe();
            _this.addContextToList(_context);
            _this.setContext(_context);
        }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            contexts$$.unsubscribe();
        }));
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextService.prototype.setContext = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var currentContext = this.context$.value;
        if (currentContext && context && context.id === currentContext.id) {
            if (context.map.view.keepCurrentView === undefined) {
                context.map.view.keepCurrentView = true;
            }
            this.context$.next(context);
            return;
        }
        if (!context.map) {
            context.map = { view: {} };
        }
        Object.assign(context.map.view, this.mapViewFromRoute);
        this.context$.next(context);
    };
    /**
     * @param {?} uri
     * @return {?}
     */
    ContextService.prototype.loadEditedContext = /**
     * @param {?} uri
     * @return {?}
     */
    function (uri) {
        var _this = this;
        this.getContextByUri(uri).subscribe((/**
         * @param {?} _context
         * @return {?}
         */
        function (_context) {
            _this.setEditedContext(_context);
        }));
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextService.prototype.setEditedContext = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        this.editedContext$.next(context);
    };
    /**
     * @param {?} igoMap
     * @return {?}
     */
    ContextService.prototype.getContextFromMap = /**
     * @param {?} igoMap
     * @return {?}
     */
    function (igoMap) {
        var e_1, _a;
        /** @type {?} */
        var view = igoMap.ol.getView();
        /** @type {?} */
        var proj = view.getProjection().getCode();
        /** @type {?} */
        var center = new ol_geom_Point__WEBPACK_IMPORTED_MODULE_3__["default"](view.getCenter()).transform(proj, 'EPSG:4326');
        /** @type {?} */
        var context = {
            uri: Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_8__["uuid"])(),
            title: '',
            scope: 'private',
            map: {
                view: {
                    center: center.getCoordinates(),
                    zoom: view.getZoom(),
                    projection: proj
                }
            },
            layers: [],
            tools: []
        };
        /** @type {?} */
        var layers = igoMap.layers$.getValue();
        try {
            for (var layers_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__values"])(layers), layers_1_1 = layers_1.next(); !layers_1_1.done; layers_1_1 = layers_1.next()) {
                var l = layers_1_1.value;
                /** @type {?} */
                var layer = l;
                /** @type {?} */
                var opts = {
                    id: layer.options.id ? String(layer.options.id) : undefined,
                    layerOptions: {
                        title: layer.options.title,
                        zIndex: layer.zIndex,
                        visible: layer.visible
                    },
                    sourceOptions: {
                        type: layer.dataSource.options.type,
                        params: layer.dataSource.options.params,
                        url: layer.dataSource.options.url
                    }
                };
                context.layers.push(opts);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (layers_1_1 && !layers_1_1.done && (_a = layers_1.return)) _a.call(layers_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        context.tools = this.tools.map((/**
         * @param {?} tool
         * @return {?}
         */
        function (tool) {
            return { id: String(tool.id) };
        }));
        return context;
    };
    /**
     * @param {?} tools
     * @return {?}
     */
    ContextService.prototype.setTools = /**
     * @param {?} tools
     * @return {?}
     */
    function (tools) {
        this.tools = tools;
    };
    /**
     * @private
     * @param {?} uri
     * @return {?}
     */
    ContextService.prototype.getContextByUri = /**
     * @private
     * @param {?} uri
     * @return {?}
     */
    function (uri) {
        var e_2, _a;
        if (this.baseUrl) {
            /** @type {?} */
            var contextToLoad = void 0;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__values"])(Object.keys(this.contexts$.value)), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var key = _c.value;
                    contextToLoad = this.contexts$.value[key].find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) {
                        return c.uri === uri;
                    }));
                    if (contextToLoad) {
                        break;
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            // TODO : use always id or uri
            /** @type {?} */
            var id = contextToLoad ? contextToLoad.id : uri;
            return this.getDetails(id);
        }
        return this.getLocalContext(uri);
    };
    /**
     * @private
     * @return {?}
     */
    ContextService.prototype.readParamsFromRoute = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.route) {
            return;
        }
        this.route.queryParams.subscribe((/**
         * @param {?} params
         * @return {?}
         */
        function (params) {
            /** @type {?} */
            var centerKey = _this.route.options.centerKey;
            if (centerKey && params[(/** @type {?} */ (centerKey))]) {
                /** @type {?} */
                var centerParams = params[(/** @type {?} */ (centerKey))];
                _this.mapViewFromRoute.center = centerParams.split(',').map(Number);
                _this.mapViewFromRoute.geolocate = false;
            }
            /** @type {?} */
            var projectionKey = _this.route.options.projectionKey;
            if (projectionKey && params[(/** @type {?} */ (projectionKey))]) {
                /** @type {?} */
                var projectionParam = params[(/** @type {?} */ (projectionKey))];
                _this.mapViewFromRoute.projection = projectionParam;
            }
            /** @type {?} */
            var zoomKey = _this.route.options.zoomKey;
            if (zoomKey && params[(/** @type {?} */ (zoomKey))]) {
                /** @type {?} */
                var zoomParam = params[(/** @type {?} */ (zoomKey))];
                _this.mapViewFromRoute.zoom = Number(zoomParam);
            }
        }));
    };
    /**
     * @private
     * @param {?} file
     * @return {?}
     */
    ContextService.prototype.getPath = /**
     * @private
     * @param {?} file
     * @return {?}
     */
    function (file) {
        /** @type {?} */
        var basePath = this.options.basePath.replace(/\/$/, '');
        return basePath + "/" + file;
    };
    /**
     * @private
     * @param {?} res
     * @param {?} uri
     * @return {?}
     */
    ContextService.prototype.handleError = /**
     * @private
     * @param {?} res
     * @param {?} uri
     * @return {?}
     */
    function (res, uri) {
        /** @type {?} */
        var context = this.contexts$.value.ours.find((/**
         * @param {?} obj
         * @return {?}
         */
        function (obj) { return obj.uri === uri; }));
        /** @type {?} */
        var titleContext = context ? context.title : uri;
        /** @type {?} */
        var titleError = this.languageService.translate.instant('igo.context.contextManager.invalid.title');
        /** @type {?} */
        var textError = this.languageService.translate.instant('igo.context.contextManager.invalid.text', { value: titleContext });
        throw [{ title: titleError, text: textError }];
    };
    /**
     * @private
     * @param {?} contexts
     * @param {?=} keepCurrentContext
     * @return {?}
     */
    ContextService.prototype.handleContextsChange = /**
     * @private
     * @param {?} contexts
     * @param {?=} keepCurrentContext
     * @return {?}
     */
    function (contexts, keepCurrentContext) {
        if (keepCurrentContext === void 0) { keepCurrentContext = false; }
        /** @type {?} */
        var context = this.context$.value;
        /** @type {?} */
        var editedContext = this.editedContext$.value;
        if (!keepCurrentContext || !this.findContext(context)) {
            this.loadDefaultContext();
        }
        else {
            if (context.map.view.keepCurrentView === undefined) {
                context.map.view.keepCurrentView = true;
            }
            this.context$.next(context);
            this.getDefault().subscribe((/**
             * @return {?}
             */
            function () { }));
        }
        /** @type {?} */
        var editedFound = this.findContext(editedContext);
        if (!editedFound || editedFound.permission !== 'write') {
            this.setEditedContext(undefined);
        }
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    ContextService.prototype.addContextToList = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var contextFound = this.findContext(context);
        if (!contextFound) {
            /** @type {?} */
            var contextSimplifie = {
                id: context.id,
                uri: context.uri,
                title: context.title,
                scope: context.scope,
                permission: TypePermission[TypePermission.read]
            };
            if (this.contexts$.value && this.contexts$.value.public) {
                this.contexts$.value.public.push(contextSimplifie);
                this.contexts$.next(this.contexts$.value);
            }
        }
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    ContextService.prototype.findContext = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var e_3, _a;
        if (!context || !context.id) {
            return false;
        }
        /** @type {?} */
        var contexts = this.contexts$.value;
        /** @type {?} */
        var found;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__values"])(Object.keys(contexts)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var key = _c.value;
                /** @type {?} */
                var value = contexts[key];
                found = value.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id === context.id; }));
                if (found) {
                    break;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return found;
    };
    ContextService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ContextService.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClient"] },
        { type: _igo2_auth__WEBPACK_IMPORTED_MODULE_9__["AuthService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["LanguageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["ConfigService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["RouteService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Optional"] }] }
    ]; };
    /** @nocollapse */ ContextService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["defineInjectable"])({ factory: function ContextService_Factory() { return new ContextService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClient"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_igo2_auth__WEBPACK_IMPORTED_MODULE_9__["AuthService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_15__["LanguageService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_15__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_15__["RouteService"], 8)); }, token: ContextService, providedIn: "root" });
    return ContextService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MapContextDirective = /** @class */ (function () {
    function MapContextDirective(component, contextService) {
        this.contextService = contextService;
        this.component = component;
    }
    Object.defineProperty(MapContextDirective.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this.component.map;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MapContextDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.context$$ = this.contextService.context$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["filter"])((/**
         * @param {?} context
         * @return {?}
         */
        function (context) { return context !== undefined; })))
            .subscribe((/**
         * @param {?} context
         * @return {?}
         */
        function (context) { return _this.handleContextChange(context); }));
    };
    /**
     * @return {?}
     */
    MapContextDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.context$$.unsubscribe();
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    MapContextDirective.prototype.handleContextChange = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        if (context.map === undefined) {
            return;
        }
        // This creates a new ol.Map when the context changes. Doing that
        // allows the print tool to work properly even when the map's canvas
        // has been tainted (CORS) with the layers of another context. This could
        // have some side effects such as unbinding all listeners on the first map.
        // A better solution would be to create a new map (preview) before
        // printing and avoid the tainted canvas issue. This will come later so
        // this snippet of code is kept here in case it takes too long becomes
        // an issue
        // const target = this.component.map.ol.getTarget();
        // this.component.map.ol.setTarget(undefined);
        // this.component.map.init();
        // this.component.map.ol.setTarget(target);
        /** @type {?} */
        var viewContext = context.map.view;
        if (viewContext.keepCurrentView !== true) {
            this.component.view = (/** @type {?} */ (viewContext));
        }
    };
    MapContextDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoMapContext]'
                },] }
    ];
    /** @nocollapse */
    MapContextDirective.ctorParameters = function () { return [
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["MapBrowserComponent"] },
        { type: ContextService }
    ]; };
    return MapContextDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LayerContextDirective = /** @class */ (function () {
    function LayerContextDirective(component, contextService, layerService, route) {
        this.component = component;
        this.contextService = contextService;
        this.layerService = layerService;
        this.route = route;
        this.contextLayers = [];
    }
    Object.defineProperty(LayerContextDirective.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this.component.map;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    LayerContextDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.context$$ = this.contextService.context$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["filter"])((/**
         * @param {?} context
         * @return {?}
         */
        function (context) { return context !== undefined; })))
            .subscribe((/**
         * @param {?} context
         * @return {?}
         */
        function (context) { return _this.handleContextChange(context); }));
        if (this.route &&
            this.route.options.visibleOnLayersKey &&
            this.route.options.visibleOffLayersKey &&
            this.route.options.contextKey) {
            /** @type {?} */
            var queryParams$$_1 = this.route.queryParams
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["skip"])(1))
                .subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                _this.queryParams = params;
                queryParams$$_1.unsubscribe();
            }));
        }
    };
    /**
     * @return {?}
     */
    LayerContextDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.context$$.unsubscribe();
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    LayerContextDirective.prototype.handleContextChange = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        if (context.layers === undefined) {
            return;
        }
        this.map.removeLayers(this.contextLayers);
        this.contextLayers = [];
        /** @type {?} */
        var layersAndIndex$ = rxjs__WEBPACK_IMPORTED_MODULE_5__["zip"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__spread"])(context.layers.map((/**
         * @param {?} layerOptions
         * @param {?} index
         * @return {?}
         */
        function (layerOptions, index) {
            return _this.layerService.createAsyncLayer(layerOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["withLatestFrom"])(Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["of"])(index)));
        }))));
        layersAndIndex$.subscribe((/**
         * @param {?} layersAndIndex
         * @return {?}
         */
        function (layersAndIndex) {
            /** @type {?} */
            var layers = layersAndIndex.reduce((/**
             * @param {?} acc
             * @param {?} bunch
             * @return {?}
             */
            function (acc, bunch) {
                var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__read"])(bunch, 2), layer = _a[0], index = _a[1];
                layer.visible = _this.computeLayerVisibilityFromUrl(layer);
                layer.zIndex = layer.zIndex || index + 1; // Map indexes start at 1
                acc[index] = layer;
                return acc;
            }), new Array(layersAndIndex.length));
            _this.contextLayers = layers;
            _this.map.addLayers(layers);
        }));
    };
    /**
     * @private
     * @param {?} layer
     * @return {?}
     */
    LayerContextDirective.prototype.computeLayerVisibilityFromUrl = /**
     * @private
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var params = this.queryParams;
        /** @type {?} */
        var currentContext = this.contextService.context$.value.uri;
        /** @type {?} */
        var currentLayerid = layer.id;
        /** @type {?} */
        var visible = layer.visible;
        if (!params || !currentLayerid) {
            return visible;
        }
        /** @type {?} */
        var contextParams = params[(/** @type {?} */ (this.route.options.contextKey))];
        if (contextParams === currentContext || !contextParams) {
            /** @type {?} */
            var visibleOnLayersParams = '';
            /** @type {?} */
            var visibleOffLayersParams = '';
            /** @type {?} */
            var visiblelayers = [];
            /** @type {?} */
            var invisiblelayers = [];
            if (this.route.options.visibleOnLayersKey &&
                params[(/** @type {?} */ (this.route.options.visibleOnLayersKey))]) {
                visibleOnLayersParams =
                    params[(/** @type {?} */ (this.route.options.visibleOnLayersKey))];
            }
            if (this.route.options.visibleOffLayersKey &&
                params[(/** @type {?} */ (this.route.options.visibleOffLayersKey))]) {
                visibleOffLayersParams =
                    params[(/** @type {?} */ (this.route.options.visibleOffLayersKey))];
            }
            /* This order is important because to control whichever
             the order of * param. First whe open and close everything.*/
            if (visibleOnLayersParams === '*') {
                visible = true;
            }
            if (visibleOffLayersParams === '*') {
                visible = false;
            }
            // After, managing named layer by id (context.json OR id from datasource)
            visiblelayers = visibleOnLayersParams.split(',');
            invisiblelayers = visibleOffLayersParams.split(',');
            if (visiblelayers.indexOf(currentLayerid) > -1) {
                visible = true;
            }
            if (invisiblelayers.indexOf(currentLayerid) > -1) {
                visible = false;
            }
        }
        return visible;
    };
    LayerContextDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoLayerContext]'
                },] }
    ];
    /** @nocollapse */
    LayerContextDirective.ctorParameters = function () { return [
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["MapBrowserComponent"] },
        { type: ContextService },
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["LayerService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["RouteService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Optional"] }] }
    ]; };
    return LayerContextDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextListComponent = /** @class */ (function () {
    function ContextListComponent(cdRef) {
        this.cdRef = cdRef;
        this._contexts = { ours: [] };
        this.select = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.unselect = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.edit = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.delete = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.save = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.clone = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.favorite = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.managePermissions = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.manageTools = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.titleMapping = {
            ours: 'igo.context.contextManager.ourContexts',
            shared: 'igo.context.contextManager.sharedContexts',
            public: 'igo.context.contextManager.publicContexts'
        };
    }
    Object.defineProperty(ContextListComponent.prototype, "contexts", {
        get: /**
         * @return {?}
         */
        function () {
            return this._contexts;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._contexts = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextListComponent.prototype, "selectedContext", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectedContext;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._selectedContext = value;
            this.cdRef.detectChanges();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextListComponent.prototype, "defaultContextId", {
        get: /**
         * @return {?}
         */
        function () {
            return this._defaultContextId;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._defaultContextId = value;
        },
        enumerable: true,
        configurable: true
    });
    ContextListComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-context-list',
                    template: "<igo-list [navigation]=\"true\">\r\n  <ng-template ngFor let-groupContexts [ngForOf]=\"contexts | keyvalue\">\r\n    <igo-collapsible *ngIf=\"groupContexts.value.length\" [title]=\"titleMapping[groupContexts.key] | translate\">\r\n\r\n      <ng-template ngFor let-context [ngForOf]=\"groupContexts.value\">\r\n        <igo-context-item\r\n          igoListItem\r\n          color=\"accent\"\r\n          [selected]=\"selectedContext && selectedContext.uri === context.uri\"\r\n          [context]=\"context\"\r\n          [default]=\"this.defaultContextId === context.id\"\r\n          (edit)=\"edit.emit(context)\"\r\n          (delete)=\"delete.emit(context)\"\r\n          (clone)=\"clone.emit(context)\"\r\n          (save)=\"save.emit(context)\"\r\n          (favorite)=\"favorite.emit(context)\"\r\n          (manageTools)=\"manageTools.emit(context)\"\r\n          (managePermissions)=\"managePermissions.emit(context)\"\r\n          (select)=\"select.emit(context)\"\r\n          (unselect)=\"unselect.emit(context)\">\r\n        </igo-context-item>\r\n      </ng-template>\r\n\r\n    </igo-collapsible>\r\n  </ng-template>\r\n</igo-list>\r\n"
                }] }
    ];
    /** @nocollapse */
    ContextListComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectorRef"] }
    ]; };
    ContextListComponent.propDecorators = {
        contexts: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        selectedContext: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        defaultContextId: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        select: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        unselect: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        edit: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        delete: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        save: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        clone: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        favorite: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        managePermissions: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        manageTools: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return ContextListComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextListBindingDirective = /** @class */ (function () {
    function ContextListBindingDirective(component, contextService, mapService, languageService, confirmDialogService, messageService) {
        this.contextService = contextService;
        this.mapService = mapService;
        this.languageService = languageService;
        this.confirmDialogService = confirmDialogService;
        this.messageService = messageService;
        this.component = component;
    }
    /**
     * @param {?} context
     * @return {?}
     */
    ContextListBindingDirective.prototype.onSelect = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        this.contextService.loadContext(context.uri);
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextListBindingDirective.prototype.onEdit = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        this.contextService.loadEditedContext(context.uri);
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextListBindingDirective.prototype.onSave = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        /** @type {?} */
        var map$$1 = this.mapService.getMap();
        /** @type {?} */
        var contextFromMap = this.contextService.getContextFromMap(map$$1);
        /** @type {?} */
        var changes = {
            layers: contextFromMap.layers,
            map: {
                view: contextFromMap.map.view
            }
        };
        this.contextService.update(context.id, changes).subscribe((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var translate = _this.languageService.translate;
            /** @type {?} */
            var message = translate.instant('igo.context.contextManager.dialog.saveMsg', {
                value: context.title
            });
            /** @type {?} */
            var title = translate.instant('igo.context.contextManager.dialog.saveTitle');
            _this.messageService.success(message, title);
        }));
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextListBindingDirective.prototype.onFavorite = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        this.contextService.setDefault(context.id).subscribe((/**
         * @return {?}
         */
        function () {
            _this.contextService.defaultContextId$.next(context.id);
            /** @type {?} */
            var translate = _this.languageService.translate;
            /** @type {?} */
            var message = translate.instant('igo.context.contextManager.dialog.favoriteMsg', {
                value: context.title
            });
            /** @type {?} */
            var title = translate.instant('igo.context.contextManager.dialog.favoriteTitle');
            _this.messageService.success(message, title);
        }));
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextListBindingDirective.prototype.onManageTools = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        this.contextService.loadEditedContext(context.uri);
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextListBindingDirective.prototype.onManagePermissions = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        this.contextService.loadEditedContext(context.uri);
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextListBindingDirective.prototype.onDelete = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        /** @type {?} */
        var translate = this.languageService.translate;
        this.confirmDialogService
            .open(translate.instant('igo.context.contextManager.dialog.confirmDelete'))
            .subscribe((/**
         * @param {?} confirm
         * @return {?}
         */
        function (confirm) {
            if (confirm) {
                _this.contextService.delete(context.id).subscribe((/**
                 * @return {?}
                 */
                function () {
                    /** @type {?} */
                    var message = translate.instant('igo.context.contextManager.dialog.deleteMsg', {
                        value: context.title
                    });
                    /** @type {?} */
                    var title = translate.instant('igo.context.contextManager.dialog.deleteTitle');
                    _this.messageService.info(message, title);
                }));
            }
        }));
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextListBindingDirective.prototype.onClone = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        /** @type {?} */
        var properties = {
            title: context.title + '-copy',
            uri: context.uri + '-copy'
        };
        this.contextService.clone(context.id, properties).subscribe((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var translate = _this.languageService.translate;
            /** @type {?} */
            var message = translate.instant('igo.context.contextManager.dialog.cloneMsg', {
                value: context.title
            });
            /** @type {?} */
            var title = translate.instant('igo.context.contextManager.dialog.cloneTitle');
            _this.messageService.success(message, title);
        }));
    };
    /**
     * @return {?}
     */
    ContextListBindingDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // Override input contexts
        this.component.contexts = { ours: [] };
        this.contexts$$ = this.contextService.contexts$.subscribe((/**
         * @param {?} contexts
         * @return {?}
         */
        function (contexts) {
            return _this.handleContextsChange(contexts);
        }));
        this.defaultContextId$$ = this.contextService.defaultContextId$.subscribe((/**
         * @param {?} id
         * @return {?}
         */
        function (id) {
            _this.component.defaultContextId = id;
        }));
        // See feature-list.component for an explanation about the debounce time
        this.selectedContext$$ = this.contextService.context$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["debounceTime"])(100))
            .subscribe((/**
         * @param {?} context
         * @return {?}
         */
        function (context) { return (_this.component.selectedContext = context); }));
        this.contextService.loadContexts();
    };
    /**
     * @return {?}
     */
    ContextListBindingDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.contexts$$.unsubscribe();
        this.selectedContext$$.unsubscribe();
        this.defaultContextId$$.unsubscribe();
    };
    /**
     * @private
     * @param {?} contexts
     * @return {?}
     */
    ContextListBindingDirective.prototype.handleContextsChange = /**
     * @private
     * @param {?} contexts
     * @return {?}
     */
    function (contexts) {
        this.component.contexts = contexts;
    };
    ContextListBindingDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoContextListBinding]'
                },] }
    ];
    /** @nocollapse */
    ContextListBindingDirective.ctorParameters = function () { return [
        { type: ContextListComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Self"] }] },
        { type: ContextService },
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["MapService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["LanguageService"] },
        { type: _igo2_common__WEBPACK_IMPORTED_MODULE_16__["ConfirmDialogService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["MessageService"] }
    ]; };
    ContextListBindingDirective.propDecorators = {
        onSelect: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['select', ['$event'],] }],
        onEdit: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['edit', ['$event'],] }],
        onSave: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['save', ['$event'],] }],
        onFavorite: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['favorite', ['$event'],] }],
        onManageTools: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['manageTools', ['$event'],] }],
        onManagePermissions: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['managePermissions', ['$event'],] }],
        onDelete: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['delete', ['$event'],] }],
        onClone: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['clone', ['$event'],] }]
    };
    return ContextListBindingDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextItemComponent = /** @class */ (function () {
    function ContextItemComponent(auth) {
        this.auth = auth;
        this.typePermission = TypePermission;
        this.color = 'primary';
        this.collapsed = true;
        this._default = false;
        this.edit = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.delete = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.save = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.clone = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.favorite = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.managePermissions = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.manageTools = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(ContextItemComponent.prototype, "context", {
        get: /**
         * @return {?}
         */
        function () {
            return this._context;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._context = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextItemComponent.prototype, "default", {
        get: /**
         * @return {?}
         */
        function () {
            return this._default;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._default = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} context
     * @return {?}
     */
    ContextItemComponent.prototype.favoriteClick = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        if (this.auth.authenticated) {
            this.favorite.emit(context);
        }
    };
    ContextItemComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-context-item',
                    template: "<mat-list-item>\r\n  <button mat-list-avatar\r\n    mat-icon-button\r\n    igoStopPropagation\r\n    [matTooltip]=\"'igo.context.contextManager.favorite' | translate\"\r\n    matTooltipShowDelay=\"500\"\r\n    [color]=\"default ? 'primary' : 'default'\"\r\n    (click)=\"favoriteClick(context)\">\r\n    <mat-icon *ngIf=\"!context.iconImage\" svgIcon=\"{{context.icon ? context.icon : context.scope === 'public' ? 'earth' : 'star'}}\"></mat-icon>\r\n    <img *ngIf=\"context.iconImage\" [src]=\"context.iconImage\">\r\n  </button>\r\n  <h4 matLine>{{context.title}}</h4>\r\n\r\n  <div *ngIf=\"auth.authenticated && context.permission === typePermission[typePermission.read]\"\r\n       igoStopPropagation\r\n       class=\"igo-actions-container\">\r\n\r\n       <button\r\n         mat-icon-button\r\n         [matTooltip]=\"'igo.context.contextManager.clone' | translate\"\r\n         matTooltipShowDelay=\"500\"\r\n         [color]=\"color\"\r\n         (click)=\"clone.emit(context)\">\r\n         <mat-icon svgIcon=\"content-copy\"></mat-icon>\r\n       </button>\r\n </div>\r\n\r\n\r\n  <div *ngIf=\"context.permission === typePermission[typePermission.write]\"\r\n       igoStopPropagation\r\n       class=\"igo-actions-container\">\r\n\r\n     <button *ngIf=\"collapsed\"\r\n       mat-icon-button\r\n       [matTooltip]=\"'igo.context.contextManager.save' | translate\"\r\n       matTooltipShowDelay=\"500\"\r\n       [color]=\"color\"\r\n       (click)=\"save.emit(context)\">\r\n       <mat-icon svgIcon=\"content-save\"></mat-icon>\r\n     </button>\r\n\r\n    <div #actions class=\"igo-actions-expand-container\">\r\n\r\n      <button\r\n        mat-icon-button\r\n        [matTooltip]=\"'igo.context.contextManager.managePermissions' | translate\"\r\n        matTooltipShowDelay=\"500\"\r\n        [color]=\"color\"\r\n        (click)=\"managePermissions.emit(context)\">\r\n        <mat-icon svgIcon=\"account-outline\"></mat-icon>\r\n      </button>\r\n\r\n      <!--button\r\n        mat-icon-button\r\n        [matTooltip]=\"'igo.context.contextManager.manageTools' | translate\"\r\n        [color]=\"color\"\r\n        (click)=\"manageTools.emit(context)\">\r\n        <mat-icon svgIcon=\"widgets\"></mat-icon>\r\n      </button-->\r\n\r\n      <button\r\n        mat-icon-button\r\n        [matTooltip]=\"'igo.context.contextManager.clone' | translate\"\r\n        matTooltipShowDelay=\"500\"\r\n        [color]=\"color\"\r\n        (click)=\"clone.emit(context)\">\r\n        <mat-icon svgIcon=\"content-copy\"></mat-icon>\r\n      </button>\r\n\r\n      <button\r\n        mat-icon-button\r\n        [color]=\"color\"\r\n        [matTooltip]=\"'igo.context.contextManager.edit' | translate\"\r\n        matTooltipShowDelay=\"500\"\r\n        (click)=\"edit.emit(context)\">\r\n        <mat-icon svgIcon=\"pencil\"></mat-icon>\r\n      </button>\r\n\r\n      <button\r\n        mat-icon-button\r\n        color=\"warn\"\r\n        [matTooltip]=\"'igo.context.contextManager.delete' | translate\"\r\n        matTooltipShowDelay=\"500\"\r\n        (click)=\"delete.emit(context)\">\r\n        <mat-icon svgIcon=\"delete\"></mat-icon>\r\n      </button>\r\n    </div>\r\n\r\n    <button\r\n      mat-icon-button\r\n      igoCollapse\r\n      [color]=\"color\"\r\n      [target]=\"actions\"\r\n      [collapsed]=collapsed\r\n      (click)=\"collapsed = !collapsed\">\r\n      <mat-icon svgIcon=\"dots-horizontal\"></mat-icon>\r\n    </button>\r\n\r\n  </div>\r\n\r\n</mat-list-item>\r\n",
                    styles: [":host{overflow:hidden}.igo-actions-container{flex-shrink:0}.igo-actions-expand-container{display:inline-flex}mat-list-item>>>.mat-list-item-content .mat-list-text{padding:0}mat-list-item>>>.mat-list-item-content .mat-list-text>h4{padding:0 16px}mat-icon.disabled{color:rgba(0,0,0,.38)}"]
                }] }
    ];
    /** @nocollapse */
    ContextItemComponent.ctorParameters = function () { return [
        { type: _igo2_auth__WEBPACK_IMPORTED_MODULE_9__["AuthService"] }
    ]; };
    ContextItemComponent.propDecorators = {
        context: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        default: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        edit: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        delete: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        save: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        clone: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        favorite: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        managePermissions: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        manageTools: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return ContextItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextFormComponent = /** @class */ (function () {
    function ContextFormComponent(formBuilder) {
        this.formBuilder = formBuilder;
        this._disabled = false;
        // TODO: replace any by ContextOptions or Context
        this.submitForm = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.clone = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.delete = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(ContextFormComponent.prototype, "btnSubmitText", {
        get: /**
         * @return {?}
         */
        function () {
            return this._btnSubmitText;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._btnSubmitText = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextFormComponent.prototype, "context", {
        get: /**
         * @return {?}
         */
        function () {
            return this._context;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._context = value;
            this.buildForm();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextFormComponent.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._disabled = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ContextFormComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.buildForm();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ContextFormComponent.prototype.handleFormSubmit = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var inputs = Object.assign({}, value);
        inputs = _igo2_utils__WEBPACK_IMPORTED_MODULE_8__["ObjectUtils"].removeNull(inputs);
        inputs.uri = inputs.uri.replace(' ', '');
        if (inputs.uri) {
            inputs.uri = this.prefix + '-' + inputs.uri;
        }
        else {
            inputs.uri = this.prefix;
        }
        this.submitForm.emit(inputs);
    };
    /**
     * @private
     * @return {?}
     */
    ContextFormComponent.prototype.buildForm = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var context = this.context || {};
        /** @type {?} */
        var uriSplit = context.uri.split('-');
        this.prefix = uriSplit.shift();
        /** @type {?} */
        var uri = uriSplit.join('-');
        this.form = this.formBuilder.group({
            title: [context.title],
            uri: [uri || ' ']
        });
    };
    ContextFormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-context-form',
                    template: "<form class=\"igo-form\" [formGroup]=\"form\"\r\n  (ngSubmit)=\"handleFormSubmit(form.value)\">\r\n\r\n  <mat-form-field class=\"full-width\">\r\n    <input matInput required\r\n           [placeholder]=\"'igo.context.contextManager.form.title' | translate\"\r\n           formControlName=\"title\">\r\n   <mat-error>\r\n    {{ 'igo.context.contextManager.form.titleRequired' | translate }}\r\n   </mat-error>\r\n  </mat-form-field>\r\n\r\n  <mat-form-field id=\"uriInput\" class=\"full-width\">\r\n    <span *ngIf=\"prefix\" class=\"prefix\">{{prefix}}-</span>\r\n    <span class=\"fieldWrapper\">\r\n      <input matInput\r\n           [placeholder]=\"'igo.context.contextManager.form.uri' | translate\"\r\n           formControlName=\"uri\">\r\n    </span>\r\n  </mat-form-field>\r\n\r\n  <div class=\"igo-form-button-group\">\r\n    <button\r\n      mat-raised-button\r\n      type=\"submit\"\r\n      [disabled]=\"!form.valid || disabled\">\r\n      {{ 'igo.context.contextManager.form.edit' | translate }}\r\n    </button>\r\n  </div>\r\n\r\n</form>\r\n",
                    styles: ["form{margin:10px}.full-width{width:100%}#uriInput .fieldWrapper{display:block;overflow:hidden}#uriInput .prefix{float:left}"]
                }] }
    ];
    /** @nocollapse */
    ContextFormComponent.ctorParameters = function () { return [
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormBuilder"] }
    ]; };
    ContextFormComponent.propDecorators = {
        btnSubmitText: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        context: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        submitForm: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        clone: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        delete: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return ContextFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextEditComponent = /** @class */ (function () {
    function ContextEditComponent(cd) {
        this.cd = cd;
        this.submitForm = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(ContextEditComponent.prototype, "context", {
        get: /**
         * @return {?}
         */
        function () {
            return this._context;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._context = value;
            this.refresh();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ContextEditComponent.prototype.refresh = /**
     * @return {?}
     */
    function () {
        this.cd.detectChanges();
    };
    ContextEditComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-context-edit',
                    template: "<igo-context-form *ngIf=\"context\"\r\n   [btnSubmitText]=\"'igo.context.contextManager.save' | translate\"\r\n   [context]=\"context\"\r\n   (submitForm)=\"submitForm.emit($event)\">\r\n</igo-context-form>\r\n"
                }] }
    ];
    /** @nocollapse */
    ContextEditComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectorRef"] }
    ]; };
    ContextEditComponent.propDecorators = {
        context: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        submitForm: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return ContextEditComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextEditBindingDirective = /** @class */ (function () {
    function ContextEditBindingDirective(component, contextService, messageService, languageService) {
        this.contextService = contextService;
        this.messageService = messageService;
        this.languageService = languageService;
        this.component = component;
    }
    /**
     * @param {?} context
     * @return {?}
     */
    ContextEditBindingDirective.prototype.onEdit = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        /** @type {?} */
        var id = this.component.context.id;
        this.contextService.update(id, context).subscribe((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var translate = _this.languageService.translate;
            /** @type {?} */
            var message = translate.instant('igo.context.contextManager.dialog.saveMsg', {
                value: context.title || _this.component.context.title
            });
            /** @type {?} */
            var title = translate.instant('igo.context.contextManager.dialog.saveTitle');
            _this.messageService.success(message, title);
        }));
    };
    /**
     * @return {?}
     */
    ContextEditBindingDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.editedContext$$ = this.contextService.editedContext$.subscribe((/**
         * @param {?} context
         * @return {?}
         */
        function (context) { return _this.handleEditedContextChange(context); }));
    };
    /**
     * @return {?}
     */
    ContextEditBindingDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.editedContext$$.unsubscribe();
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    ContextEditBindingDirective.prototype.handleEditedContextChange = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        this.component.context = context;
    };
    ContextEditBindingDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoContextEditBinding]'
                },] }
    ];
    /** @nocollapse */
    ContextEditBindingDirective.ctorParameters = function () { return [
        { type: ContextEditComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Self"] }] },
        { type: ContextService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["MessageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["LanguageService"] }
    ]; };
    ContextEditBindingDirective.propDecorators = {
        onEdit: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['submitForm', ['$event'],] }]
    };
    return ContextEditBindingDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextPermissionsComponent = /** @class */ (function () {
    function ContextPermissionsComponent(formBuilder) {
        this.formBuilder = formBuilder;
        this.addPermission = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.removePermission = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
        this.scopeChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_13__["EventEmitter"]();
    }
    Object.defineProperty(ContextPermissionsComponent.prototype, "context", {
        get: /**
         * @return {?}
         */
        function () {
            return this._context;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._context = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextPermissionsComponent.prototype, "permissions", {
        get: /**
         * @return {?}
         */
        function () {
            return this._permissions;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._permissions = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ContextPermissionsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.buildForm();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ContextPermissionsComponent.prototype.handleFormSubmit = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.addPermission.emit(value);
    };
    /**
     * @private
     * @return {?}
     */
    ContextPermissionsComponent.prototype.buildForm = /**
     * @private
     * @return {?}
     */
    function () {
        this.form = this.formBuilder.group({
            profil: [],
            typePermission: ['read']
        });
    };
    ContextPermissionsComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-context-permissions',
                    template: "<div *ngIf=\"context\">\r\n\r\n  <div class=\"scopeForm\">\r\n    <mat-radio-group [(ngModel)]=\"context.scope\"\r\n                    (change)=\"scopeChanged.emit(context)\">\r\n      <mat-radio-button value=\"private\">\r\n        {{ 'igo.context.permission.scope.private' | translate }}\r\n      </mat-radio-button>\r\n      <mat-radio-button value=\"protected\">\r\n        {{ 'igo.context.permission.scope.protected' | translate }}\r\n      </mat-radio-button>\r\n      <mat-radio-button value=\"public\">\r\n        {{ 'igo.context.permission.scope.public' | translate }}\r\n      </mat-radio-button>\r\n    </mat-radio-group>\r\n  </div>\r\n\r\n  <form *ngIf=\"context.scope !== 'private'\" [formGroup]=\"form\"\r\n    (ngSubmit)=\"handleFormSubmit(form.value)\">\r\n\r\n    <mat-form-field class=\"full-width\">\r\n      <input matInput required\r\n             [placeholder]=\"'igo.context.permission.profil' | translate\"\r\n             formControlName=\"profil\">\r\n     <mat-error>\r\n       {{ 'igo.context.permission.profilRequired' | translate }}\r\n     </mat-error>\r\n    </mat-form-field>\r\n\r\n\r\n    <mat-radio-group formControlName=\"typePermission\">\r\n      <mat-radio-button value=\"read\">\r\n        {{ 'igo.context.permission.read' | translate }}\r\n      </mat-radio-button>\r\n      <mat-radio-button value=\"write\">\r\n        {{ 'igo.context.permission.write' | translate }}\r\n      </mat-radio-button>\r\n    </mat-radio-group>\r\n\r\n\r\n    <div class=\"igo-form-button-group\">\r\n      <button\r\n        mat-raised-button\r\n        type=\"submit\"\r\n        [disabled]=\"!form.valid\">\r\n        {{ 'igo.context.permission.addBtn' | translate }}\r\n      </button>\r\n    </div>\r\n\r\n  </form>\r\n\r\n  <igo-list *ngIf=\"permissions && context.scope !== 'private'\">\r\n    <ng-template ngFor let-groupPermissions [ngForOf]=\"permissions | keyvalue\">\r\n      <igo-collapsible\r\n        *ngIf=\"groupPermissions.value.length\"\r\n        [title]=\"'igo.context.permission.' + groupPermissions.key | translate\">\r\n\r\n        <ng-template ngFor let-permission [ngForOf]=\"groupPermissions.value\">\r\n          <mat-list-item>\r\n            <mat-icon mat-list-avatar svgIcon=\"account-outline\"></mat-icon>\r\n            <h4 mat-line>{{permission.profil}}</h4>\r\n\r\n            <div igoStopPropagation\r\n                 class=\"igo-actions-container\">\r\n\r\n               <button\r\n                 mat-icon-button\r\n                 [matTooltip]=\"'igo.context.permission.delete' | translate\"\r\n                 matTooltipShowDelay=\"500\"\r\n                 color=\"warn\"\r\n                 (click)=\"removePermission.emit(permission)\">\r\n                 <mat-icon svgIcon=\"delete\"></mat-icon>\r\n               </button>\r\n            </div>\r\n\r\n          </mat-list-item>\r\n        </ng-template>\r\n      </igo-collapsible>\r\n    </ng-template>\r\n  </igo-list>\r\n\r\n</div>\r\n",
                    styles: [":host{margin:10px}.full-width{width:100%}mat-radio-button{padding:14px 14px 14px 0}.scopeForm,form{padding:5px}"]
                }] }
    ];
    /** @nocollapse */
    ContextPermissionsComponent.ctorParameters = function () { return [
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormBuilder"] }
    ]; };
    ContextPermissionsComponent.propDecorators = {
        context: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        permissions: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        addPermission: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        removePermission: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }],
        scopeChanged: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Output"] }]
    };
    return ContextPermissionsComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextPermissionsBindingDirective = /** @class */ (function () {
    function ContextPermissionsBindingDirective(component, contextService, languageService, messageService) {
        this.contextService = contextService;
        this.languageService = languageService;
        this.messageService = messageService;
        this.component = component;
    }
    /**
     * @param {?} permission
     * @return {?}
     */
    ContextPermissionsBindingDirective.prototype.onAddPermission = /**
     * @param {?} permission
     * @return {?}
     */
    function (permission) {
        var _this = this;
        /** @type {?} */
        var contextId = this.component.context.id;
        this.contextService
            .addPermissionAssociation(contextId, permission.profil, permission.typePermission)
            .subscribe((/**
         * @param {?} profils
         * @return {?}
         */
        function (profils) {
            var e_1, _a;
            try {
                for (var profils_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__values"])(profils), profils_1_1 = profils_1.next(); !profils_1_1.done; profils_1_1 = profils_1.next()) {
                    var p = profils_1_1.value;
                    _this.component.permissions[permission.typePermission].push(p);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (profils_1_1 && !profils_1_1.done && (_a = profils_1.return)) _a.call(profils_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            /** @type {?} */
            var profil = permission.profil;
            /** @type {?} */
            var translate = _this.languageService.translate;
            /** @type {?} */
            var message = translate.instant('igo.context.permission.dialog.addMsg', {
                value: profil
            });
            /** @type {?} */
            var title = translate.instant('igo.context.permission.dialog.addTitle');
            _this.messageService.success(message, title);
        }));
    };
    /**
     * @param {?} permission
     * @return {?}
     */
    ContextPermissionsBindingDirective.prototype.onRemovePermission = /**
     * @param {?} permission
     * @return {?}
     */
    function (permission) {
        var _this = this;
        /** @type {?} */
        var contextId = this.component.context.id;
        this.contextService
            .deletePermissionAssociation(contextId, permission.id)
            .subscribe((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var index = _this.component.permissions[permission.typePermission].findIndex((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                return p.id === permission.id;
            }));
            _this.component.permissions[permission.typePermission].splice(index, 1);
            /** @type {?} */
            var profil = permission.profil;
            /** @type {?} */
            var translate = _this.languageService.translate;
            /** @type {?} */
            var message = translate.instant('igo.context.permission.dialog.deleteMsg', {
                value: profil
            });
            /** @type {?} */
            var title = translate.instant('igo.context.permission.dialog.deleteTitle');
            _this.messageService.success(message, title);
        }));
    };
    /**
     * @param {?} context
     * @return {?}
     */
    ContextPermissionsBindingDirective.prototype.onScopeChanged = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        /** @type {?} */
        var scope = context.scope;
        this.contextService.update(context.id, { scope: scope }).subscribe((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var translate = _this.languageService.translate;
            /** @type {?} */
            var message = translate.instant('igo.context.permission.dialog.scopeChangedMsg', {
                value: translate.instant('igo.context.permission.scope.' + scope)
            });
            /** @type {?} */
            var title = translate.instant('igo.context.permission.dialog.scopeChangedTitle');
            _this.messageService.success(message, title);
        }));
    };
    /**
     * @return {?}
     */
    ContextPermissionsBindingDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.editedContext$$ = this.contextService.editedContext$.subscribe((/**
         * @param {?} context
         * @return {?}
         */
        function (context) { return _this.handleEditedContextChange(context); }));
    };
    /**
     * @return {?}
     */
    ContextPermissionsBindingDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.editedContext$$.unsubscribe();
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    ContextPermissionsBindingDirective.prototype.handleEditedContextChange = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        this.component.context = context;
        if (context) {
            this.contextService
                .getPermissions(context.id)
                .subscribe((/**
             * @param {?} permissionsArray
             * @return {?}
             */
            function (permissionsArray) {
                permissionsArray = permissionsArray || [];
                /** @type {?} */
                var permissions = {
                    read: permissionsArray.filter((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) {
                        return p.typePermission.toString() === 'read';
                    })),
                    write: permissionsArray.filter((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) {
                        return p.typePermission.toString() === 'write';
                    }))
                };
                return (_this.component.permissions = permissions);
            }));
        }
    };
    ContextPermissionsBindingDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoContextPermissionsBinding]'
                },] }
    ];
    /** @nocollapse */
    ContextPermissionsBindingDirective.ctorParameters = function () { return [
        { type: ContextPermissionsComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Self"] }] },
        { type: ContextService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["LanguageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["MessageService"] }
    ]; };
    ContextPermissionsBindingDirective.propDecorators = {
        onAddPermission: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['addPermission', ['$event'],] }],
        onRemovePermission: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['removePermission', ['$event'],] }],
        onScopeChanged: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["HostListener"], args: ['scopeChanged', ['$event'],] }]
    };
    return ContextPermissionsBindingDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var CONTEXT_DIRECTIVES = [
    MapContextDirective,
    LayerContextDirective
];
var IgoContextManagerModule = /** @class */ (function () {
    function IgoContextManagerModule() {
    }
    /**
     * @return {?}
     */
    IgoContextManagerModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoContextManagerModule
        };
    };
    IgoContextManagerModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_11__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_7__["ReactiveFormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatListModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatCheckboxModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatRadioModule"],
                        _igo2_auth__WEBPACK_IMPORTED_MODULE_9__["IgoAuthModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_16__["IgoListModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_16__["IgoKeyValueModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_16__["IgoCollapsibleModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_16__["IgoStopPropagationModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_15__["IgoLanguageModule"]
                    ],
                    exports: Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__spread"])([
                        ContextListComponent,
                        ContextListBindingDirective,
                        ContextItemComponent,
                        ContextFormComponent,
                        ContextEditComponent,
                        ContextEditBindingDirective,
                        ContextPermissionsComponent,
                        ContextPermissionsBindingDirective
                    ], CONTEXT_DIRECTIVES),
                    declarations: Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__spread"])([
                        ContextListComponent,
                        ContextListBindingDirective,
                        ContextItemComponent,
                        ContextFormComponent,
                        ContextEditComponent,
                        ContextEditBindingDirective,
                        ContextPermissionsComponent,
                        ContextPermissionsBindingDirective
                    ], CONTEXT_DIRECTIVES)
                },] }
    ];
    return IgoContextManagerModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var BookmarkDialogComponent = /** @class */ (function () {
    function BookmarkDialogComponent(dialogRef) {
        this.dialogRef = dialogRef;
    }
    BookmarkDialogComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-bookmark-dialog',
                    template: "<h1 mat-dialog-title>{{ 'igo.context.bookmarkButton.dialog.title' |\u00A0translate }}</h1>\r\n<div mat-dialog-content>\r\n  <mat-form-field>\r\n    <input matInput required autocomplete=\"off\"\r\n      [placeholder]=\"'igo.context.bookmarkButton.dialog.placeholder' |\u00A0translate\"\r\n      [(ngModel)]=\"title\">\r\n  </mat-form-field>\r\n</div>\r\n<div mat-dialog-actions>\r\n  <button mat-button color=\"primary\"\r\n         [disabled]=\"!title\"\r\n         (click)=\"dialogRef.close(title)\">\r\n    {{'igo.common.confirmDialog.confirmBtn' | translate}}\r\n  </button>\r\n  <button mat-button\r\n          (click)=\"dialogRef.close(false)\">\r\n    {{'igo.common.confirmDialog.cancelBtn' |\u00A0translate}}\r\n  </button>\r\n</div>\r\n"
                }] }
    ];
    /** @nocollapse */
    BookmarkDialogComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatDialogRef"] }
    ]; };
    return BookmarkDialogComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var BookmarkButtonComponent = /** @class */ (function () {
    function BookmarkButtonComponent(dialog, contextService, languageService, messageService) {
        this.dialog = dialog;
        this.contextService = contextService;
        this.languageService = languageService;
        this.messageService = messageService;
    }
    Object.defineProperty(BookmarkButtonComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BookmarkButtonComponent.prototype, "color", {
        get: /**
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._color = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    BookmarkButtonComponent.prototype.createContext = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.dialog
            .open(BookmarkDialogComponent, { disableClose: false })
            .afterClosed()
            .subscribe((/**
         * @param {?} title
         * @return {?}
         */
        function (title) {
            if (title) {
                /** @type {?} */
                var context_1 = _this.contextService.getContextFromMap(_this.map);
                context_1.title = title;
                _this.contextService.create(context_1).subscribe((/**
                 * @return {?}
                 */
                function () {
                    /** @type {?} */
                    var translate = _this.languageService.translate;
                    /** @type {?} */
                    var titleD = translate.instant('igo.context.bookmarkButton.dialog.createTitle');
                    /** @type {?} */
                    var message = translate.instant('igo.context.bookmarkButton.dialog.createMsg', {
                        value: context_1.title
                    });
                    _this.messageService.success(message, titleD);
                }));
            }
        }));
    };
    BookmarkButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-bookmark-button',
                    template: "<div class=\"igo-bookmark-button-container\">\r\n  <button\r\n    mat-icon-button\r\n    [matTooltip]=\"'igo.context.bookmarkButton.create' | translate\"\r\n    matTooltipPosition=\"above\"\r\n    [color]=\"color\"\r\n    (click)=\"createContext()\">\r\n    <mat-icon svgIcon=\"bookmark\"></mat-icon>\r\n  </button>\r\n</div>\r\n",
                    styles: [".igo-bookmark-button-container{width:40px}.igo-bookmark-button-container button{background-color:#fff}.igo-bookmark-button-container button:hover{background-color:#efefef}:host>>>button .mat-button-ripple-round,button{border-radius:0}"]
                }] }
    ];
    /** @nocollapse */
    BookmarkButtonComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatDialog"] },
        { type: ContextService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["LanguageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["MessageService"] }
    ]; };
    BookmarkButtonComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return BookmarkButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var PoiService = /** @class */ (function () {
    function PoiService(http, config) {
        this.http = http;
        this.config = config;
        this.baseUrl = this.config.getConfig('context.url');
    }
    /**
     * @return {?}
     */
    PoiService.prototype.get = /**
     * @return {?}
     */
    function () {
        if (!this.baseUrl) {
            return rxjs__WEBPACK_IMPORTED_MODULE_5__["EMPTY"];
        }
        /** @type {?} */
        var url = this.baseUrl + '/pois';
        return this.http.get(url);
    };
    /**
     * @param {?} id
     * @return {?}
     */
    PoiService.prototype.delete = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var url = this.baseUrl + '/pois/' + id;
        return this.http.delete(url);
    };
    /**
     * @param {?} context
     * @return {?}
     */
    PoiService.prototype.create = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = this.baseUrl + '/pois';
        return this.http.post(url, JSON.stringify(context));
    };
    PoiService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"] }
    ];
    /** @nocollapse */
    PoiService.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClient"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["ConfigService"] }
    ]; };
    return PoiService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var PoiDialogComponent = /** @class */ (function () {
    function PoiDialogComponent(dialogRef) {
        this.dialogRef = dialogRef;
    }
    PoiDialogComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-poi-dialog',
                    template: "<h1 mat-dialog-title>{{ 'igo.context.poiButton.dialog.title' | translate }}</h1>\r\n<div mat-dialog-content>\r\n  <mat-form-field>\r\n    <input matInput required autocomplete=\"off\"\r\n      [placeholder]=\"'igo.context.poiButton.dialog.placeholder' | translate\"\r\n      [(ngModel)]=\"title\">\r\n  </mat-form-field>\r\n</div>\r\n<div mat-dialog-actions>\r\n  <button mat-button color=\"primary\"\r\n         [disabled]=\"!title\"\r\n         (click)=\"dialogRef.close(title)\">\r\n    {{'igo.common.confirmDialog.confirmBtn' | translate}}\r\n  </button>\r\n  <button mat-button\r\n          (click)=\"dialogRef.close(false)\">\r\n    {{'igo.common.confirmDialog.cancelBtn' |\u00A0translate}}\r\n  </button>\r\n</div>\r\n"
                }] }
    ];
    /** @nocollapse */
    PoiDialogComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatDialogRef"] }
    ]; };
    return PoiDialogComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var PoiButtonComponent = /** @class */ (function () {
    function PoiButtonComponent(dialog, authService, poiService, messageService, languageService, confirmDialogService) {
        this.dialog = dialog;
        this.authService = authService;
        this.poiService = poiService;
        this.messageService = messageService;
        this.languageService = languageService;
        this.confirmDialogService = confirmDialogService;
    }
    Object.defineProperty(PoiButtonComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoiButtonComponent.prototype, "color", {
        get: /**
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._color = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PoiButtonComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.authenticate$$ = this.authService.authenticate$.subscribe((/**
         * @param {?} auth
         * @return {?}
         */
        function (auth) {
            if (auth) {
                _this.getPois();
            }
        }));
    };
    /**
     * @return {?}
     */
    PoiButtonComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.authenticate$$.unsubscribe();
    };
    /**
     * @param {?} poi
     * @return {?}
     */
    PoiButtonComponent.prototype.deletePoi = /**
     * @param {?} poi
     * @return {?}
     */
    function (poi) {
        var _this = this;
        if (poi && poi.id) {
            /** @type {?} */
            var translate_1 = this.languageService.translate;
            this.confirmDialogService
                .open(translate_1.instant('igo.context.poiButton.dialog.confirmDelete'))
                .subscribe((/**
             * @param {?} confirm
             * @return {?}
             */
            function (confirm) {
                if (confirm) {
                    _this.poiService.delete(poi.id).subscribe((/**
                     * @return {?}
                     */
                    function () {
                        /** @type {?} */
                        var title = translate_1.instant('igo.context.poiButton.dialog.deleteTitle');
                        /** @type {?} */
                        var message = translate_1.instant('igo.context.poiButton.dialog.deleteMsg', {
                            value: poi.title
                        });
                        _this.messageService.info(message, title);
                        _this.pois = _this.pois.filter((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.id !== poi.id; }));
                    }), (/**
                     * @param {?} err
                     * @return {?}
                     */
                    function (err) {
                        err.error.title = 'DELETE Pois';
                        _this.messageService.showError(err);
                    }));
                }
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    PoiButtonComponent.prototype.getPois = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.poiService.get().subscribe((/**
         * @param {?} rep
         * @return {?}
         */
        function (rep) {
            _this.pois = rep;
        }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            err.error.title = 'GET Pois';
            _this.messageService.showError(err);
        }));
    };
    /**
     * @return {?}
     */
    PoiButtonComponent.prototype.createPoi = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var view = this.map.ol.getView();
        /** @type {?} */
        var proj = view.getProjection().getCode();
        /** @type {?} */
        var center = new ol_geom_Point__WEBPACK_IMPORTED_MODULE_3__["default"](view.getCenter()).transform(proj, 'EPSG:4326');
        /** @type {?} */
        var poi = {
            title: '',
            x: center.getCoordinates()[0],
            y: center.getCoordinates()[1],
            zoom: view.getZoom()
        };
        this.dialog
            .open(PoiDialogComponent, { disableClose: false })
            .afterClosed()
            .subscribe((/**
         * @param {?} title
         * @return {?}
         */
        function (title) {
            if (title) {
                poi.title = title;
                _this.poiService.create(poi).subscribe((/**
                 * @param {?} newPoi
                 * @return {?}
                 */
                function (newPoi) {
                    /** @type {?} */
                    var translate = _this.languageService.translate;
                    /** @type {?} */
                    var titleD = translate.instant('igo.context.poiButton.dialog.createTitle');
                    /** @type {?} */
                    var message = translate.instant('igo.context.poiButton.dialog.createMsg', {
                        value: poi.title
                    });
                    _this.messageService.success(message, titleD);
                    poi.id = newPoi.id;
                    _this.pois.push(poi);
                }), (/**
                 * @param {?} err
                 * @return {?}
                 */
                function (err) {
                    err.error.title = 'POST Pois';
                    _this.messageService.showError(err);
                }));
            }
        }));
    };
    /**
     * @param {?} id
     * @return {?}
     */
    PoiButtonComponent.prototype.zoomOnPoi = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var poi = this.pois.find((/**
         * @param {?} p
         * @return {?}
         */
        function (p) { return p.id === id; }));
        /** @type {?} */
        var center = Object(ol_proj__WEBPACK_IMPORTED_MODULE_1__["fromLonLat"])([Number(poi.x), Number(poi.y)], this.map.projection);
        this.map.ol.getView().animate({
            center: center,
            zoom: poi.zoom,
            duration: 500,
            easing: ol_easing__WEBPACK_IMPORTED_MODULE_2__["easeOut"]
        });
    };
    PoiButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-poi-button',
                    template: "<mat-select [placeholder]=\"'igo.context.poiButton.placeholder' |\u00A0translate\"\r\n           floatPlaceholder=\"never\">\r\n\r\n  <mat-option (click)=\"createPoi()\">\r\n    <div class=\"titlePoi\">{{ 'igo.context.poiButton.create' |\u00A0translate }}</div>\r\n    <button igoStopPropagation class=\"addPoi buttonPoi\"\r\n      mat-icon-button\r\n      color=\"primary\"\r\n      (click)=\"createPoi()\">\r\n      <mat-icon svgIcon=\"plus-circle\"></mat-icon>\r\n    </button>\r\n  </mat-option>\r\n  <mat-option *ngFor=\"let poi of pois\" [value]=\"poi.id\" (click)=\"zoomOnPoi(poi.id)\">\r\n    <div class=\"titlePoi\">{{ poi.title }}</div>\r\n    <button igoStopPropagation class=\"deletePoi buttonPoi\"\r\n      mat-icon-button\r\n      color=\"warn\"\r\n      (click)=\"deletePoi(poi)\">\r\n      <mat-icon svgIcon=\"delete\"></mat-icon>\r\n    </button>\r\n  </mat-option>\r\n</mat-select>\r\n",
                    styles: ["mat-select{width:150px;background-color:#fff;height:40px;padding-top:0}mat-select>>>.mat-select-trigger{height:40px}mat-select>>>.mat-select-placeholder,mat-select>>>.mat-select-value-text{padding:5px;top:12px;position:relative}.mat-option{text-overflow:inherit}.titlePoi{max-width:135px;overflow:hidden;text-overflow:ellipsis;float:left}.buttonPoi{float:right;margin:4px -10px 4px 0}.buttonPoi>>>.mat-icon{margin:0 8px}"]
                }] }
    ];
    /** @nocollapse */
    PoiButtonComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatDialog"] },
        { type: _igo2_auth__WEBPACK_IMPORTED_MODULE_9__["AuthService"] },
        { type: PoiService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["MessageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["LanguageService"] },
        { type: _igo2_common__WEBPACK_IMPORTED_MODULE_16__["ConfirmDialogService"] }
    ]; };
    PoiButtonComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return PoiButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var UserDialogComponent = /** @class */ (function () {
    function UserDialogComponent(dialogRef, auth) {
        this.dialogRef = dialogRef;
        this.auth = auth;
        /** @type {?} */
        var decodeToken = this.auth.decodeToken();
        this.user = decodeToken.user;
        this.exp = new Date(decodeToken.exp * 1000).toLocaleString();
    }
    UserDialogComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-user-dialog',
                    template: "<h1 mat-dialog-title>{{'igo.context.userButton.infoTitle' | translate}}</h1>\r\n<div mat-dialog-content>\r\n  <p>{{'igo.context.userButton.dialog.user' | translate}}: {{user.sourceId}}</p>\r\n  <p>{{'igo.context.userButton.dialog.email' | translate}}: {{user.email}}</p>\r\n  <p>{{'igo.context.userButton.dialog.expiration' | translate}}: {{exp}}</p>\r\n</div>\r\n<div mat-dialog-actions style=\"justify-content: center\">\r\n  <button mat-button color=\"primary\"\r\n         (click)=\"dialogRef.close(false)\">\r\n    OK\r\n  </button>\r\n</div>\r\n"
                }] }
    ];
    /** @nocollapse */
    UserDialogComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatDialogRef"] },
        { type: _igo2_auth__WEBPACK_IMPORTED_MODULE_9__["AuthService"] }
    ]; };
    return UserDialogComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @return {?}
 */
function userButtonSlideInOut() {
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["trigger"])('userButtonState', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["state"])('collapse', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["style"])({
            width: '0',
            overflow: 'hidden',
            display: 'none'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["state"])('expand', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["style"])({
            overflow: 'hidden',
            display: 'display'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["transition"])('collapse => expand', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["animate"])('200ms')),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["transition"])('expand => collapse', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_6__["animate"])('200ms'))
    ]);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var UserButtonComponent = /** @class */ (function () {
    function UserButtonComponent(dialog, config, auth) {
        this.dialog = dialog;
        this.config = config;
        this.auth = auth;
        this.expand = false;
        this.visible = false;
        this.visible = this.config.getConfig('auth') ? true : false;
    }
    Object.defineProperty(UserButtonComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserButtonComponent.prototype, "color", {
        get: /**
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._color = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    UserButtonComponent.prototype.accountClick = /**
     * @return {?}
     */
    function () {
        if (this.auth.authenticated) {
            this.expand = !this.expand;
        }
        else {
            this.auth.logout();
        }
    };
    /**
     * @return {?}
     */
    UserButtonComponent.prototype.logout = /**
     * @return {?}
     */
    function () {
        this.expand = false;
        this.auth.logout();
    };
    /**
     * @return {?}
     */
    UserButtonComponent.prototype.infoUser = /**
     * @return {?}
     */
    function () {
        this.dialog.open(UserDialogComponent, { disableClose: false });
    };
    UserButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-user-button',
                    template: "<div *ngIf=\"visible\" class=\"igo-user-button-container\">\r\n  <div class=\"igo-user-button-more-container\" [@userButtonState]=\"expand ? 'expand' : 'collapse'\">\r\n\r\n    <igo-poi-button [color]=\"color\" [map]=\"map\"></igo-poi-button>\r\n    <igo-bookmark-button [color]=\"color\" [map]=\"map\"></igo-bookmark-button>\r\n\r\n    <button\r\n      mat-icon-button\r\n      [matTooltip]=\"'igo.context.userButton.infoTitle' | translate\"\r\n      matTooltipPosition=\"above\"\r\n      [color]=\"color\"\r\n      (click)=\"infoUser()\">\r\n      <mat-icon svgIcon=\"information-outline\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      mat-icon-button\r\n      [matTooltip]=\"'igo.context.userButton.logout' |\u00A0translate\"\r\n      matTooltipPosition=\"above\"\r\n      [color]=\"color\"\r\n      (click)=\"logout()\">\r\n      <mat-icon svgIcon=\"power\"></mat-icon>\r\n    </button>\r\n\r\n  </div>\r\n\r\n  <button\r\n    mat-icon-button\r\n    [color]=\"auth.authenticated ? color : 'warn'\"\r\n    (click)=\"accountClick()\">\r\n    <mat-icon svgIcon=\"account-box\"></mat-icon>\r\n  </button>\r\n</div>\r\n",
                    animations: [userButtonSlideInOut()],
                    styles: [".igo-user-button-container button{background-color:#fff}.igo-user-button-container button:hover{background-color:#efefef}.igo-user-button-more-container{float:left;height:40px}.igo-user-button-more-container>*{margin-right:2px;float:left}@media only screen and (max-width:450px),only screen and (max-height:450px){.igo-user-button-container>button{position:absolute;bottom:0}.igo-user-button-more-container{height:80px;width:150px;position:relative;left:24px}}:host>>>button .mat-button-ripple-round,button{border-radius:0}"]
                }] }
    ];
    /** @nocollapse */
    UserButtonComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatDialog"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["ConfigService"] },
        { type: _igo2_auth__WEBPACK_IMPORTED_MODULE_9__["AuthService"] }
    ]; };
    UserButtonComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return UserButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoContextMapButtonModule = /** @class */ (function () {
    function IgoContextMapButtonModule() {
    }
    /**
     * @return {?}
     */
    IgoContextMapButtonModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoContextMapButtonModule
        };
    };
    IgoContextMapButtonModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_11__["CommonModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_15__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_16__["IgoConfirmDialogModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_16__["IgoStopPropagationModule"],
                        _igo2_auth__WEBPACK_IMPORTED_MODULE_9__["IgoAuthModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatSelectModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatOptionModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatDialogModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatInputModule"]
                    ],
                    exports: [BookmarkButtonComponent, PoiButtonComponent, UserButtonComponent],
                    declarations: [
                        BookmarkButtonComponent,
                        BookmarkDialogComponent,
                        PoiButtonComponent,
                        PoiDialogComponent,
                        UserButtonComponent,
                        UserDialogComponent
                    ],
                    entryComponents: [
                        BookmarkDialogComponent,
                        PoiDialogComponent,
                        UserDialogComponent
                    ],
                    providers: [PoiService]
                },] }
    ];
    return IgoContextMapButtonModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ShareMapService = /** @class */ (function () {
    function ShareMapService(config, contextService, messageService, routingFormService, route) {
        this.config = config;
        this.contextService = contextService;
        this.messageService = messageService;
        this.routingFormService = routingFormService;
        this.route = route;
        this.apiUrl = this.config.getConfig('context.url');
    }
    /**
     * @param {?} map
     * @param {?} formValues
     * @param {?} publicShareOption
     * @return {?}
     */
    ShareMapService.prototype.getUrl = /**
     * @param {?} map
     * @param {?} formValues
     * @param {?} publicShareOption
     * @return {?}
     */
    function (map$$1, formValues, publicShareOption) {
        if (this.apiUrl) {
            return this.getUrlWithApi(map$$1, formValues);
        }
        return this.getUrlWithoutApi(map$$1, publicShareOption);
    };
    /**
     * @param {?} map
     * @param {?} formValues
     * @return {?}
     */
    ShareMapService.prototype.getUrlWithApi = /**
     * @param {?} map
     * @param {?} formValues
     * @return {?}
     */
    function (map$$1, formValues) {
        var _this = this;
        /** @type {?} */
        var context = this.contextService.getContextFromMap(map$$1);
        context.scope = 'public';
        context.title = formValues.title;
        context.uri = formValues.uri;
        this.contextService.create(context).subscribe((/**
         * @param {?} rep
         * @return {?}
         */
        function (rep) { }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            err.error.title = 'Share Map';
            _this.messageService.showError(err);
        }));
        return location.origin + location.pathname + "?context=" + formValues.uri;
    };
    /**
     * @param {?} map
     * @param {?} publicShareOption
     * @return {?}
     */
    ShareMapService.prototype.getUrlWithoutApi = /**
     * @param {?} map
     * @param {?} publicShareOption
     * @return {?}
     */
    function (map$$1, publicShareOption) {
        var e_1, _a;
        if (!this.route ||
            !this.route.options.visibleOnLayersKey ||
            !this.route.options.visibleOffLayersKey ||
            !map$$1.viewController.getZoom()) {
            return;
        }
        /** @type {?} */
        var llc = publicShareOption.layerlistControls.querystring;
        /** @type {?} */
        var visibleKey = this.route.options.visibleOnLayersKey;
        /** @type {?} */
        var invisibleKey = this.route.options.visibleOffLayersKey;
        /** @type {?} */
        var layers = map$$1.layers;
        /** @type {?} */
        var routingKey = this.route.options.routingCoordKey;
        /** @type {?} */
        var stopsCoordinates = [];
        if (this.routingFormService &&
            this.routingFormService.getStopsCoordinates() &&
            this.routingFormService.getStopsCoordinates().length !== 0) {
            this.routingFormService.getStopsCoordinates().forEach((/**
             * @param {?} coord
             * @return {?}
             */
            function (coord) {
                stopsCoordinates.push(coord);
            }));
        }
        /** @type {?} */
        var routingUrl = '';
        if (stopsCoordinates.length >= 2) {
            routingUrl = routingKey + "=" + stopsCoordinates.join(';');
        }
        /** @type {?} */
        var visibleLayers = layers.filter((/**
         * @param {?} lay
         * @return {?}
         */
        function (lay) { return lay.visible; }));
        /** @type {?} */
        var invisibleLayers = layers.filter((/**
         * @param {?} lay
         * @return {?}
         */
        function (lay) { return !lay.visible; }));
        if (visibleLayers.length === 0) {
            visibleKey = '';
        }
        if (invisibleLayers.length === 0) {
            invisibleKey = '';
        }
        /** @type {?} */
        var layersUrl = '';
        /** @type {?} */
        var layersToLoop = [];
        if (visibleLayers.length > invisibleLayers.length) {
            layersUrl = visibleKey + "=*&" + invisibleKey + "=";
            layersToLoop = invisibleLayers;
        }
        else {
            layersUrl = invisibleKey + "=*&" + visibleKey + "=";
            layersToLoop = visibleLayers;
        }
        try {
            for (var layersToLoop_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_10__["__values"])(layersToLoop), layersToLoop_1_1 = layersToLoop_1.next(); !layersToLoop_1_1.done; layersToLoop_1_1 = layersToLoop_1.next()) {
                var layer = layersToLoop_1_1.value;
                if (layer.id) {
                    layersUrl += layer.id + ',';
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (layersToLoop_1_1 && !layersToLoop_1_1.done && (_a = layersToLoop_1.return)) _a.call(layersToLoop_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        layersUrl = layersUrl.substr(0, layersUrl.length - 1);
        /** @type {?} */
        var zoom = 'zoom=' + map$$1.viewController.getZoom();
        /** @type {?} */
        var arrayCenter = map$$1.viewController.getCenter('EPSG:4326') || [];
        /** @type {?} */
        var long = arrayCenter[0].toFixed(5).replace(/\.([^0]+)0+$/, '.$1');
        /** @type {?} */
        var lat = arrayCenter[1].toFixed(5).replace(/\.([^0]+)0+$/, '.$1');
        /** @type {?} */
        var center = ("center=" + long + "," + lat).replace(/.00000/g, '');
        /** @type {?} */
        var context = '';
        if (this.contextService.context$.value) {
            if (this.contextService.context$.value.uri !== '_default') {
                context = 'context=' + this.contextService.context$.value.uri;
            }
            if (this.contextService.context$.value.map.view.zoom) {
                zoom =
                    this.contextService.context$.value.map.view.zoom ===
                        map$$1.viewController.getZoom()
                        ? ''
                        : 'zoom=' + map$$1.viewController.getZoom();
            }
        }
        /** @type {?} */
        var url = "" + location.origin + location.pathname + "?" + context + "&" + zoom + "&" + center + "&" + layersUrl + "&" + llc + "&" + routingUrl;
        for (var i = 0; i < 5; i++) {
            url = url.replace(/&&/g, '&');
            url = url.endsWith('&') ? url.slice(0, -1) : url;
        }
        url = url.endsWith('&') ? url.slice(0, -1) : url;
        url = url.replace('?&', '?');
        return url;
    };
    ShareMapService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ShareMapService.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["ConfigService"] },
        { type: ContextService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["MessageService"] },
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["RoutingFormService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Optional"] }] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["RouteService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Optional"] }] }
    ]; };
    /** @nocollapse */ ShareMapService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["defineInjectable"])({ factory: function ShareMapService_Factory() { return new ShareMapService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_15__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(ContextService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_15__["MessageService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_igo2_geo__WEBPACK_IMPORTED_MODULE_17__["RoutingFormService"], 8), Object(_angular_core__WEBPACK_IMPORTED_MODULE_13__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_15__["RouteService"], 8)); }, token: ShareMapService, providedIn: "root" });
    return ShareMapService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ShareMapComponent = /** @class */ (function () {
    function ShareMapComponent(config, languageService, messageService, auth, shareMapService, formBuilder, layerListService) {
        this.config = config;
        this.languageService = languageService;
        this.messageService = messageService;
        this.auth = auth;
        this.shareMapService = shareMapService;
        this.formBuilder = formBuilder;
        this.layerListService = layerListService;
        this._hasShareMapButton = true;
        this._hasCopyLinkButton = false;
        this.hasApi = false;
        this.publicShareOption = {
            layerlistControls: { querystring: '' }
        };
        this.hasApi = this.config.getConfig('context.url') ? true : false;
    }
    Object.defineProperty(ShareMapComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ShareMapComponent.prototype, "hasShareMapButton", {
        get: /**
         * @return {?}
         */
        function () {
            return this._hasShareMapButton;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._hasShareMapButton = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ShareMapComponent.prototype, "hasCopyLinkButton", {
        get: /**
         * @return {?}
         */
        function () {
            return this._hasCopyLinkButton;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._hasCopyLinkButton = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ShareMapComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.auth.authenticate$.subscribe((/**
         * @param {?} auth
         * @return {?}
         */
        function (auth) {
            /** @type {?} */
            var decodeToken = _this.auth.decodeToken();
            _this.userId = decodeToken.user ? decodeToken.user.id : undefined;
            _this.url = undefined;
            _this.buildForm();
        }));
    };
    /**
     * @return {?}
     */
    ShareMapComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (!this.hasApi) {
            this.resetUrl();
        }
    };
    /**
     * @return {?}
     */
    ShareMapComponent.prototype.hasLayerListControls = /**
     * @return {?}
     */
    function () {
        if (this.layerListService.keyword || this.layerListService.sortedAlpha ||
            this.layerListService.onlyVisible || this.layerListService.onlyInRange) {
            this.publicShareOption.layerlistControls.querystring = '';
            if (this.layerListService.keyword) {
                this.publicShareOption.layerlistControls.querystring += '&llck=' + this.layerListService.keyword;
            }
            if (this.layerListService.sortedAlpha) {
                this.publicShareOption.layerlistControls.querystring += '&llca=1';
            }
            if (this.layerListService.onlyVisible) {
                this.publicShareOption.layerlistControls.querystring += '&llcv=1';
            }
            if (this.layerListService.onlyInRange) {
                this.publicShareOption.layerlistControls.querystring += '&llcr=1';
            }
            return true;
        }
        return false;
    };
    /**
     * @param {?=} values
     * @return {?}
     */
    ShareMapComponent.prototype.resetUrl = /**
     * @param {?=} values
     * @return {?}
     */
    function (values) {
        if (values === void 0) { values = {}; }
        this.hasLayerListControls();
        /** @type {?} */
        var inputs = Object.assign({}, values);
        inputs.uri = this.userId ? this.userId + "-" + values.uri : values.uri;
        this.url = this.shareMapService.getUrl(this.map, inputs, this.publicShareOption);
    };
    /**
     * @param {?} textArea
     * @return {?}
     */
    ShareMapComponent.prototype.copyTextToClipboard = /**
     * @param {?} textArea
     * @return {?}
     */
    function (textArea) {
        /** @type {?} */
        var successful = _igo2_utils__WEBPACK_IMPORTED_MODULE_8__["Clipboard"].copy(textArea);
        if (successful) {
            /** @type {?} */
            var translate = this.languageService.translate;
            /** @type {?} */
            var title = translate.instant('igo.context.shareMap.dialog.copyTitle');
            /** @type {?} */
            var msg = translate.instant('igo.context.shareMap.dialog.copyMsg');
            this.messageService.success(msg, title);
        }
    };
    /**
     * @private
     * @return {?}
     */
    ShareMapComponent.prototype.buildForm = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var id = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_8__["uuid"])();
        /** @type {?} */
        var title = 'Partage ';
        title += this.userId ? "(" + this.userId + "-" + id + ")" : "(" + id + ")";
        this.form = this.formBuilder.group({
            title: [title],
            uri: [id]
        });
    };
    ShareMapComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-share-map',
                    template: "<form class=\"igo-form\" [formGroup]=\"form\"\r\n  (ngSubmit)=\"resetUrl(form.value)\">\r\n\r\n  <div *ngIf=\"hasApi\" class=\"igo-input-container\">\r\n    <mat-form-field>\r\n      <input matInput required\r\n             [placeholder]=\"'igo.context.contextManager.form.title' | translate\"\r\n             formControlName=\"title\">\r\n     <mat-error>\r\n      {{ 'igo.context.contextManager.form.titleRequired' | translate }}\r\n     </mat-error>\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div *ngIf=\"hasApi\" id=\"uriInput\" class=\"igo-input-container\">\r\n    <mat-form-field>\r\n      <span *ngIf=\"userId\" class=\"prefix\">{{userId}}-</span>\r\n      <span class=\"fieldWrapper\">\r\n        <input matInput required\r\n             [readonly]=\"!userId\"\r\n             [placeholder]=\"'igo.context.contextManager.form.uri' | translate\"\r\n             formControlName=\"uri\">\r\n       </span>\r\n     <mat-error>\r\n      {{ 'igo.context.contextManager.form.uriRequired' | translate }}\r\n     </mat-error>\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div *ngIf=\"hasShareMapButton\" class=\"igo-form-button-group\">\r\n    <button\r\n      mat-raised-button\r\n      type=\"submit\"\r\n      [disabled]=\"!form.valid\">\r\n      {{ 'igo.context.shareMap.button' | translate }}\r\n    </button>\r\n  </div>\r\n\r\n</form>\r\n\r\n<div *ngIf=\"url\" class=\"igo-input-container linkToShare\">\r\n  <mat-form-field>\r\n    <textarea #textArea matInput readonly rows=\"1\"\r\n      [placeholder]=\"'igo.context.shareMap.placeholderLink' | translate\"\r\n      [value]=\"url\"></textarea>\r\n    <button\r\n      mat-icon-button\r\n      tooltip-position=\"below\"\r\n      matTooltipShowDelay=\"500\"\r\n      [matTooltip]=\"'igo.context.shareMap.copy' | translate\"\r\n      color=\"primary\"\r\n      (click)=\"copyTextToClipboard(textArea)\">\r\n      <mat-icon svgIcon=\"content-copy\"></mat-icon>\r\n    </button>\r\n  </mat-form-field>\r\n\r\n  <div *ngIf=\"hasCopyLinkButton\" class=\"igo-form-button-group\">\r\n    <button\r\n      mat-raised-button\r\n      (click)=\"copyTextToClipboard(textArea)\">\r\n      <mat-icon svgIcon=\"content-copy\"></mat-icon>\r\n      {{ 'igo.context.shareMap.copy' | translate }}\r\n    </button>\r\n  </div>\r\n\r\n</div>\r\n",
                    styles: ["@charset \"UTF-8\";mat-form-field{width:100%}#uriInput .fieldWrapper{display:block;overflow:hidden}#uriInput .prefix{float:left}.linkToShare{padding:25px 5px 5px}.linkToShare textarea{resize:none;width:calc(100% - 60px);line-height:1.3;height:40px;overflow-y:hidden;word-wrap:normal;word-break:break-all}.linkToShare mat-form-field>button{float:right;margin:-10px 0}.igo-form{padding:20px 5px 5px}.igo-form-button-group{text-align:center;padding-top:10px}"]
                }] }
    ];
    /** @nocollapse */
    ShareMapComponent.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["ConfigService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["LanguageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["MessageService"] },
        { type: _igo2_auth__WEBPACK_IMPORTED_MODULE_9__["AuthService"] },
        { type: ShareMapService },
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormBuilder"] },
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["LayerListService"] }
    ]; };
    ShareMapComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        hasShareMapButton: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        hasCopyLinkButton: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return ShareMapComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ShareMapBindingDirective = /** @class */ (function () {
    function ShareMapBindingDirective(component, layerListService, route) {
        this.layerListService = layerListService;
        this.route = route;
        this.component = component;
    }
    /**
     * @return {?}
     */
    ShareMapBindingDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.initRoutes();
    };
    /**
     * @private
     * @return {?}
     */
    ShareMapBindingDirective.prototype.initRoutes = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.route &&
            (this.route.options.llcKKey || this.route.options.llcAKey ||
                this.route.options.llcVKey || this.route.options.llcVKey)) {
            this.route.queryParams.subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                /** @type {?} */
                var keywordFromUrl = params[(/** @type {?} */ (_this.route.options.llcKKey))];
                /** @type {?} */
                var sortedAplhaFromUrl = params[(/** @type {?} */ (_this.route.options.llcAKey))];
                /** @type {?} */
                var onlyVisibleFromUrl = params[(/** @type {?} */ (_this.route.options.llcVKey))];
                /** @type {?} */
                var onlyInRangeFromUrl = params[(/** @type {?} */ (_this.route.options.llcRKey))];
                if (keywordFromUrl && !_this.layerListService.keywordInitialized) {
                    _this.layerListService.keyword = keywordFromUrl;
                    _this.layerListService.keywordInitialized = true;
                }
                if (sortedAplhaFromUrl && !_this.layerListService.sortedAlphaInitialized) {
                    _this.layerListService.sortedAlpha = sortedAplhaFromUrl === '1' ? true : false;
                    _this.layerListService.sortedAlphaInitialized = true;
                }
                if (onlyVisibleFromUrl && !_this.layerListService.onlyVisibleInitialized) {
                    _this.layerListService.onlyVisible = onlyVisibleFromUrl === '1' ? true : false;
                    _this.layerListService.onlyVisibleInitialized = true;
                }
                if (onlyInRangeFromUrl && !_this.layerListService.onlyInRangeInitialized) {
                    _this.layerListService.onlyInRange = onlyInRangeFromUrl === '1' ? true : false;
                    _this.layerListService.onlyInRangeInitialized = true;
                }
                if (!_this.component.hasApi) {
                    _this.component.resetUrl();
                }
            }));
        }
    };
    ShareMapBindingDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Directive"], args: [{
                    selector: '[igoShareMapBinding]'
                },] }
    ];
    /** @nocollapse */
    ShareMapBindingDirective.ctorParameters = function () { return [
        { type: ShareMapComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Self"] }] },
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["LayerListService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_15__["RouteService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Optional"] }] }
    ]; };
    return ShareMapBindingDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoShareMapModule = /** @class */ (function () {
    function IgoShareMapModule() {
    }
    /**
     * @return {?}
     */
    IgoShareMapModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoShareMapModule
        };
    };
    IgoShareMapModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_11__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_7__["ReactiveFormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatButtonModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_15__["IgoLanguageModule"]
                    ],
                    exports: [ShareMapComponent, ShareMapBindingDirective],
                    declarations: [ShareMapComponent, ShareMapBindingDirective]
                },] }
    ];
    return IgoShareMapModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var SidenavComponent = /** @class */ (function () {
    function SidenavComponent(titleService) {
        this.titleService = titleService;
        this.format = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_18__["default"]();
        this._title = this.titleService.getTitle();
        this.topPanelState = 'initial';
    }
    Object.defineProperty(SidenavComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "opened", {
        get: /**
         * @return {?}
         */
        function () {
            return this._opened;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._opened = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "feature", {
        get: /**
         * @return {?}
         */
        function () {
            return this._feature;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._feature = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "tool", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tool;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tool = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "media", {
        get: /**
         * @return {?}
         */
        function () {
            return this._media;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._media = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "title", {
        get: /**
         * @return {?}
         */
        function () {
            return this._title;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                this._title = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "featureTitle", {
        get: /**
         * @return {?}
         */
        function () {
            return this.feature ? Object(_igo2_common__WEBPACK_IMPORTED_MODULE_16__["getEntityTitle"])(this.feature) : undefined;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    SidenavComponent.prototype.zoomToFeatureExtent = /**
     * @return {?}
     */
    function () {
        if (this.feature.geometry) {
            /** @type {?} */
            var olFeature = this.format.readFeature(this.feature, {
                dataProjection: this.feature.projection,
                featureProjection: this.map.projection
            });
            Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_17__["moveToOlFeatures"])(this.map, [olFeature], _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["FeatureMotion"].Zoom);
        }
    };
    /**
     * @return {?}
     */
    SidenavComponent.prototype.toggleTopPanel = /**
     * @return {?}
     */
    function () {
        if (this.topPanelState === 'initial') {
            this.topPanelState = 'expanded';
        }
        else {
            this.topPanelState = 'initial';
        }
    };
    SidenavComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Component"], args: [{
                    selector: 'igo-sidenav',
                    template: "<mat-sidenav\r\n  #sidenav\r\n  igoSidenavShim\r\n  mode=\"side\"\r\n  [opened]=\"opened\">\r\n\r\n  <div class=\"igo-sidenav-content\">\r\n\r\n    <igo-flexible\r\n      #topPanel\r\n      initial=\"50%\" initialMobile=\"100%\"\r\n      expanded=\"calc(100% - 58px)\"\r\n      [state]=\"topPanelState\">\r\n\r\n      <div class=\"igo-content\">\r\n        <igo-panel [title]=\"tool ? (tool.title | translate) : title\">\r\n          <button\r\n            mat-icon-button\r\n            panelLeftButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'igo.context.sidenav.goBack' | translate\"\r\n            *ngIf=\"tool\">\r\n            <mat-icon svgIcon=\"arrow-back\"></mat-icon>\r\n          </button>\r\n\r\n          <button\r\n            mat-icon-button\r\n            panelRightButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'igo.context.sidenav.mainMenu' | translate\"\r\n            *ngIf=\"tool\">\r\n            <mat-icon svgIcon=\"menu\"></mat-icon>\r\n          </button>\r\n\r\n          <!--igo-toolbar\r\n            igoToolContext igoToolbarBinding\r\n            [withTitle]=\"tool ? false : true\">\r\n          </igo-toolbar>\r\n\r\n          <div class=\"igo-toolbox-container\" [ngClass]=\"{'shown': tool ? true : false}\">\r\n            <igo-toolbox [animate]=\"true\"></igo-toolbox>\r\n          </div-->\r\n        </igo-panel>\r\n      </div>\r\n\r\n      <div igoFlexibleFill class=\"igo-content\">\r\n        <igo-panel\r\n          [title]=\"featureTitle\"\r\n          *ngIf=\"feature && media !== 'mobile'\">\r\n\r\n          <button\r\n            mat-icon-button\r\n            panelLeftButton\r\n            class=\"igo-icon-button\"\r\n            (click)=\"toggleTopPanel()\">\r\n            <mat-icon [svgIcon]=\"['collapsed', 'initial'].indexOf(topPanel.state) >= 0 ? 'arrow_downward' : 'arrow_upward'\"></mat-icon>\r\n          </button>\r\n\r\n          <button\r\n            mat-icon-button\r\n            panelRightButton\r\n            class=\"igo-icon-button\"\r\n            (click)=\"zoomToFeatureExtent()\"\r\n            *ngIf=\"feature.geometry\">\r\n            <mat-icon svgIcon=\"zoom-in\"></mat-icon>\r\n          </button>\r\n\r\n          <igo-feature-details\r\n            [feature]=\"feature\"\r\n            *ngIf=\"['collapsed', 'initial'].indexOf(topPanel.state) >= 0\">\r\n          </igo-feature-details>\r\n        </igo-panel>\r\n      </div>\r\n\r\n    </igo-flexible>\r\n\r\n  </div>\r\n</mat-sidenav>\r\n",
                    styles: [".igo-sidenav-content .igo-flexible-fill .igo-container,:host ::ng-deep .igo-flexible-fill .igo-container{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;border-top:1px solid rgba(0,0,0,.2)}igo-toolbar:not(.with-title),mat-sidenav{-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd}:host{background-color:#fff}:host ::ng-deep mat-sidenav{z-index:3!important}mat-sidenav{width:400px}@media only screen and (max-width:450px),only screen and (max-height:450px){mat-sidenav{width:calc(100% - 40px - 5px)}}.igo-sidenav-content{margin-top:50px;height:calc(100% - 50px)}igo-toolbar{position:absolute;top:51px;left:0;bottom:0}igo-toolbar.with-title{right:0;overflow:auto}igo-toolbar:not(.with-title){overflow:hidden}igo-toolbar ::ng-deep igo-list{overflow:inherit}.igo-toolbox-container{position:absolute;top:51px;bottom:0;right:0;overflow:auto}.igo-toolbox-container.shown{left:48px}igo-feature-details ::ng-deep table{width:100%}"]
                }] }
    ];
    /** @nocollapse */
    SidenavComponent.ctorParameters = function () { return [
        { type: _angular_platform_browser__WEBPACK_IMPORTED_MODULE_14__["Title"] }
    ]; };
    SidenavComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        opened: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        feature: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        tool: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        media: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }],
        title: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["Input"] }]
    };
    return SidenavComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoSidenavModule = /** @class */ (function () {
    function IgoSidenavModule() {
    }
    /**
     * @return {?}
     */
    IgoSidenavModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoSidenavModule
        };
    };
    IgoSidenavModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_11__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatSidenavModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_12__["MatTooltipModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_15__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_16__["IgoPanelModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_16__["IgoFlexibleModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_17__["IgoFeatureModule"],
                        IgoContextManagerModule
                    ],
                    exports: [SidenavComponent],
                    declarations: [SidenavComponent]
                },] }
    ];
    return IgoSidenavModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoContextModule = /** @class */ (function () {
    function IgoContextModule() {
    }
    /**
     * @return {?}
     */
    IgoContextModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoContextModule,
            providers: []
        };
    };
    IgoContextModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_13__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: [
                        IgoContextManagerModule,
                        IgoContextMapButtonModule,
                        IgoShareMapModule,
                        IgoSidenavModule
                    ]
                },] }
    ];
    return IgoContextModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */



//# sourceMappingURL=igo2-context.js.map

/***/ }),

/***/ "./dist/igo-lib/core/fesm5/igo2-core.js":
/*!**********************************************!*\
  !*** ./dist/igo-lib/core/fesm5/igo2-core.js ***!
  \**********************************************/
/*! exports provided: IgoCoreModule, IgoActivityModule, IgoConfigModule, IgoLanguageModule, IgoMessageModule, IgoErrorModule, IgoLoggingModule, provideConfigOptions, configFactory, provideConfigLoader, CONFIG_OPTIONS, defaultLanguageLoader, provideLanguageLoader, provideDefaultLanguageLoader, provideRouteServiceOptions, ROUTE_SERVICE_OPTIONS, RouteService, ActivityService, ActivityInterceptor, AnalyticsService, ConfigService, LanguageLoader, LanguageService, IgoMissingTranslationHandler, Media, MediaOrientation, MediaService, MessageCenterComponent, MessageType, MessageService, ErrorInterceptor, LoggingInterceptor, NetworkService, NetworkModule, ɵa, ɵb, ɵc, ɵg, ɵf, ɵh, ɵe, ɵd, ɵi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoCoreModule", function() { return IgoCoreModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoActivityModule", function() { return IgoActivityModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoConfigModule", function() { return IgoConfigModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoLanguageModule", function() { return IgoLanguageModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoMessageModule", function() { return IgoMessageModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoErrorModule", function() { return IgoErrorModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoLoggingModule", function() { return IgoLoggingModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideConfigOptions", function() { return provideConfigOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "configFactory", function() { return configFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideConfigLoader", function() { return provideConfigLoader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONFIG_OPTIONS", function() { return CONFIG_OPTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultLanguageLoader", function() { return defaultLanguageLoader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideLanguageLoader", function() { return provideLanguageLoader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideDefaultLanguageLoader", function() { return provideDefaultLanguageLoader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideRouteServiceOptions", function() { return provideRouteServiceOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROUTE_SERVICE_OPTIONS", function() { return ROUTE_SERVICE_OPTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RouteService", function() { return RouteService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActivityService", function() { return ActivityService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActivityInterceptor", function() { return ActivityInterceptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnalyticsService", function() { return AnalyticsService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfigService", function() { return ConfigService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageLoader", function() { return LanguageLoader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageService", function() { return LanguageService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoMissingTranslationHandler", function() { return IgoMissingTranslationHandler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Media", function() { return Media; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MediaOrientation", function() { return MediaOrientation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MediaService", function() { return MediaService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageCenterComponent", function() { return MessageCenterComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageType", function() { return MessageType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageService", function() { return MessageService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ErrorInterceptor", function() { return ErrorInterceptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoggingInterceptor", function() { return LoggingInterceptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NetworkService", function() { return NetworkService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NetworkModule", function() { return NetworkModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵa", function() { return ActivityInterceptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵb", function() { return ActivityService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵc", function() { return ConfigService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵg", function() { return LanguageLoader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵf", function() { return IgoMissingTranslationHandler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵh", function() { return MessageCenterComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵe", function() { return MessageService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵd", function() { return ErrorInterceptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵi", function() { return LoggingInterceptor; });
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _igo2_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @igo2/utils */ "./dist/igo-lib/utils/fesm5/igo2-utils.js");
/* harmony import */ var angular2_notifications__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular2-notifications */ "./node_modules/angular2-notifications/angular2-notifications.umd.js");
/* harmony import */ var angular2_notifications__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(angular2_notifications__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/cdk/layout */ "./node_modules/@angular/cdk/esm5/layout.es5.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _ionic_native_network_ngx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ionic-native/network/ngx */ "./node_modules/@ionic-native/network/ngx/index.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
















/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ActivityService = /** @class */ (function () {
    function ActivityService() {
        this.counter$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["BehaviorSubject"](0);
        this.ids = [];
    }
    /**
     * @return {?}
     */
    ActivityService.prototype.register = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var id = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_2__["uuid"])();
        this.ids.push(id);
        this.counter$.next(this.ids.length);
        return id;
    };
    /**
     * @param {?} id
     * @return {?}
     */
    ActivityService.prototype.unregister = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var index = this.ids.indexOf(id);
        if (index === -1) {
            return;
        }
        this.ids.splice(index, 1);
        this.counter$.next(this.ids.length);
    };
    ActivityService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ActivityService.ctorParameters = function () { return []; };
    /** @nocollapse */ ActivityService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["defineInjectable"])({ factory: function ActivityService_Factory() { return new ActivityService(); }, token: ActivityService, providedIn: "root" });
    return ActivityService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ActivityInterceptor = /** @class */ (function () {
    function ActivityInterceptor(activityService) {
        this.activityService = activityService;
    }
    /**
     * @param {?} req
     * @param {?} next
     * @return {?}
     */
    ActivityInterceptor.prototype.intercept = /**
     * @param {?} req
     * @param {?} next
     * @return {?}
     */
    function (req, next) {
        var _this = this;
        /** @type {?} */
        var activity = req.headers.get('activityInterceptor');
        if (activity) {
            /** @type {?} */
            var actReq = req.clone({
                headers: req.headers.delete('activityInterceptor')
            });
            if (activity === 'false') {
                return next.handle(actReq);
            }
        }
        /** @type {?} */
        var id = this.activityService.register();
        return next.handle(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["finalize"])((/**
         * @return {?}
         */
        function () {
            _this.activityService.unregister(id);
        })));
    };
    ActivityInterceptor.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"] }
    ];
    /** @nocollapse */
    ActivityInterceptor.ctorParameters = function () { return [
        { type: ActivityService }
    ]; };
    return ActivityInterceptor;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoActivityModule = /** @class */ (function () {
    function IgoActivityModule() {
    }
    /**
     * @return {?}
     */
    IgoActivityModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoActivityModule,
            providers: [
                {
                    provide: _angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HTTP_INTERCEPTORS"],
                    useClass: ActivityInterceptor,
                    multi: true
                }
            ]
        };
    };
    IgoActivityModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: []
                },] }
    ];
    return IgoActivityModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ConfigService = /** @class */ (function () {
    function ConfigService(injector) {
        this.injector = injector;
        this.config = {};
    }
    /**
     * Use to get the data found in config file
     */
    /**
     * Use to get the data found in config file
     * @param {?} key
     * @return {?}
     */
    ConfigService.prototype.getConfig = /**
     * Use to get the data found in config file
     * @param {?} key
     * @return {?}
     */
    function (key) {
        return _igo2_utils__WEBPACK_IMPORTED_MODULE_2__["ObjectUtils"].resolve(this.config, key);
    };
    /**
     * This method loads "[path]" to get all config's variables
     */
    /**
     * This method loads "[path]" to get all config's variables
     * @param {?} options
     * @return {?}
     */
    ConfigService.prototype.load = /**
     * This method loads "[path]" to get all config's variables
     * @param {?} options
     * @return {?}
     */
    function (options) {
        var _this = this;
        /** @type {?} */
        var baseConfig = options.default || {};
        if (!options.path) {
            this.config = baseConfig;
            return true;
        }
        /** @type {?} */
        var http = this.injector.get(_angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HttpClient"]);
        return new Promise((/**
         * @param {?} resolve
         * @param {?} reject
         * @return {?}
         */
        function (resolve, reject) {
            http
                .get(options.path)
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["catchError"])((/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                console.log("Configuration file " + options.path + " could not be read");
                resolve(true);
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["throwError"])(error.error || 'Server error');
            })))
                .subscribe((/**
             * @param {?} configResponse
             * @return {?}
             */
            function (configResponse) {
                _this.config = _igo2_utils__WEBPACK_IMPORTED_MODULE_2__["ObjectUtils"].mergeDeep(baseConfig, configResponse);
                resolve(true);
            }));
        }));
    };
    ConfigService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ConfigService.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injector"] }
    ]; };
    /** @nocollapse */ ConfigService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["defineInjectable"])({ factory: function ConfigService_Factory() { return new ConfigService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(_angular_core__WEBPACK_IMPORTED_MODULE_12__["INJECTOR"])); }, token: ConfigService, providedIn: "root" });
    return ConfigService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var CONFIG_OPTIONS = new _angular_core__WEBPACK_IMPORTED_MODULE_12__["InjectionToken"]('configOptions');
/**
 * @param {?} options
 * @return {?}
 */
function provideConfigOptions(options) {
    return {
        provide: CONFIG_OPTIONS,
        useValue: options
    };
}
/**
 * @param {?} configService
 * @param {?} options
 * @return {?}
 */
function configFactory(configService, options) {
    return (/**
     * @return {?}
     */
    function () { return configService.load(options); });
}
/**
 * @return {?}
 */
function provideConfigLoader() {
    return {
        provide: _angular_core__WEBPACK_IMPORTED_MODULE_12__["APP_INITIALIZER"],
        useFactory: configFactory,
        multi: true,
        deps: [ConfigService, CONFIG_OPTIONS]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoConfigModule = /** @class */ (function () {
    function IgoConfigModule() {
    }
    /**
     * @return {?}
     */
    IgoConfigModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoConfigModule,
            providers: [provideConfigOptions({}), provideConfigLoader()]
        };
    };
    IgoConfigModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: []
                },] }
    ];
    return IgoConfigModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LanguageLoader = /** @class */ (function () {
    function LanguageLoader(http, prefix, suffix, config) {
        if (suffix === void 0) { suffix = '.json'; }
        this.http = http;
        this.prefix = prefix;
        this.suffix = suffix;
        this.config = config;
    }
    /**
     * @param {?} lang
     * @return {?}
     */
    LanguageLoader.prototype.getTranslation = /**
     * @param {?} lang
     * @return {?}
     */
    function (lang) {
        /** @type {?} */
        var translation = __webpack_require__("./dist/igo-lib/core/locale sync recursive ^\\.\\/.*\\.json$")("./" + lang + ".json");
        /** @type {?} */
        var igoLocale$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])(translation);
        if (this.config && !this.prefix) {
            this.prefix = this.config.getConfig('language.prefix');
        }
        if (!this.prefix) {
            return igoLocale$;
        }
        /** @type {?} */
        var appLocale$ = this.http.get("" + this.prefix + lang + this.suffix);
        /** @type {?} */
        var locale$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["combineLatest"])(igoLocale$, appLocale$);
        return locale$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["map"])((/**
         * @param {?} translations
         * @return {?}
         */
        function (translations) {
            return Object.assign(translations[0], translations[1]);
        })));
    };
    return LanguageLoader;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} http
 * @param {?=} config
 * @return {?}
 */
function defaultLanguageLoader(http, config) {
    return new LanguageLoader(http, undefined, undefined, config);
}
/**
 * @param {?=} loader
 * @return {?}
 */
function provideLanguageLoader(loader) {
    return {
        provide: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__["TranslateLoader"],
        useFactory: loader || defaultLanguageLoader,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HttpClient"]]
    };
}
/**
 * @param {?=} loader
 * @return {?}
 */
function provideDefaultLanguageLoader(loader) {
    return {
        provide: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__["TranslateLoader"],
        useFactory: loader || defaultLanguageLoader,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HttpClient"], ConfigService]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoMissingTranslationHandler = /** @class */ (function () {
    function IgoMissingTranslationHandler() {
    }
    /**
     * @param {?} params
     * @return {?}
     */
    IgoMissingTranslationHandler.prototype.handle = /**
     * @param {?} params
     * @return {?}
     */
    function (params) {
        if (!params.translateService.langs.length) {
            /** @type {?} */
            var error = 'Translations are not yet loaded. \
         Check that the LanguageService is injected.';
            throw new Error(error);
        }
        throw new Error("The Key \"" + params.key + "\" is missing in locale file.");
    };
    return IgoMissingTranslationHandler;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoLanguageModule = /** @class */ (function () {
    function IgoLanguageModule() {
    }
    /**
     * @return {?}
     */
    IgoLanguageModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoLanguageModule,
            providers: [provideDefaultLanguageLoader()]
        };
    };
    IgoLanguageModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["NgModule"], args: [{
                    imports: [
                        _ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__["TranslateModule"].forRoot({
                            missingTranslationHandler: {
                                provide: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__["MissingTranslationHandler"],
                                useClass: IgoMissingTranslationHandler
                            }
                        })
                    ],
                    declarations: [],
                    exports: [_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__["TranslateModule"]]
                },] }
    ];
    return IgoLanguageModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MessageCenterComponent = /** @class */ (function () {
    function MessageCenterComponent() {
        this._options = {};
    }
    Object.defineProperty(MessageCenterComponent.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            return Object.assign({}, MessageCenterComponent.defaultOptions, this._options);
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._options = value;
        },
        enumerable: true,
        configurable: true
    });
    MessageCenterComponent.defaultOptions = {
        timeOut: 5000,
        hasCloseIcon: false,
        showProgressBar: true,
        pauseOnHover: true,
        clickToClose: true,
        maxLength: 100,
        maxStack: 3,
        preventDuplicates: true
    };
    MessageCenterComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Component"], args: [{
                    selector: 'igo-message-center',
                    template: "<simple-notifications\r\n  [ngClass]=\"{closeIcon: options.hasCloseIcon}\"\r\n  [options]=\"options\">\r\n</simple-notifications>\r\n",
                    styles: ["@charset \"UTF-8\";:host>>>div.simple-notification-wrapper{bottom:0;right:calc(50% - 150px)}:host>>>div.simple-notification{min-height:50px;margin-bottom:5px;padding-left:45px;padding-right:25px}:host>>>div.simple-notification.noIcon{padding-left:25px}@media only screen and (max-width:450px),only screen and (max-height:450px){:host>>>div.simple-notification-wrapper{right:0;left:0;width:100%}:host>>>div.simple-notification{margin-bottom:0}}:host>>>div.simple-notification .sn-title{line-height:23px;font-size:15px;font-weight:700}:host>>>div.simple-notification .sn-content{line-height:18px;font-size:15px}:host>>>div.simple-notification .icon{top:0;left:0;width:45px;height:100%;padding:7px}:host>>>div.simple-notification .icon mat-icon{display:flex;align-items:center;height:100%;font-size:32px}:host>>>.closeIcon>>>.sn-title:after{content:'close';font-family:'Material Icons';-webkit-font-feature-settings:'liga' 1;font-feature-settings:'liga' 1;font-size:24px;font-weight:400;right:5px;top:5px;position:absolute}"]
                }] }
    ];
    /** @nocollapse */
    MessageCenterComponent.ctorParameters = function () { return []; };
    MessageCenterComponent.propDecorators = {
        options: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Input"] }]
    };
    return MessageCenterComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoMessageModule = /** @class */ (function () {
    function IgoMessageModule() {
    }
    /**
     * @return {?}
     */
    IgoMessageModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoMessageModule,
            providers: []
        };
    };
    IgoMessageModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["NgModule"], args: [{
                    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_13__["CommonModule"], angular2_notifications__WEBPACK_IMPORTED_MODULE_3__["SimpleNotificationsModule"].forRoot()],
                    declarations: [MessageCenterComponent],
                    exports: [MessageCenterComponent]
                },] }
    ];
    return IgoMessageModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var MessageType = {
    ERROR: 'error',
    ALERT: 'alert',
    INFO: 'info',
    SUCCESS: 'success',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MessageService = /** @class */ (function () {
    function MessageService(notificationService, configService) {
        this.notificationService = notificationService;
        this.configService = configService;
        this.messages$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["BehaviorSubject"]([]);
        this.options = this.configService.getConfig('message') || {};
    }
    /**
     * @param {?} httpError
     * @return {?}
     */
    MessageService.prototype.showError = /**
     * @param {?} httpError
     * @return {?}
     */
    function (httpError) {
        httpError.error.caught = true;
        return this.error(httpError.error.message, httpError.error.title);
    };
    /**
     * @param {?} message
     * @return {?}
     */
    MessageService.prototype.message = /**
     * @param {?} message
     * @return {?}
     */
    function (message) {
        this.messages$.next(this.messages$.value.concat([message]));
        message.options = message.options || {};
        message = this.handleTemplate(message);
        /** @type {?} */
        var notification;
        if (message.text) {
            notification = this.notificationService.create(message.title, message.text, (/** @type {?} */ (((/** @type {?} */ (message.type))))), message.options);
        }
        else if (message.html) {
            if (!message.icon) {
                message.options.theClass = message.options.theClass
                    ? message.options.theClass + ' noIcon'
                    : 'noIcon';
            }
            notification = this.notificationService.html(message.html, (/** @type {?} */ (((/** @type {?} */ (message.type))))), message.options);
        }
        else {
            return;
        }
        if (message.icon !== undefined) {
            this.addIcon(notification, message.icon);
        }
        return notification;
    };
    /**
     * @param {?} text
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    MessageService.prototype.success = /**
     * @param {?} text
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    function (text, title, options) {
        if (options === void 0) { options = {}; }
        return this.message({
            text: text,
            title: title,
            icon: options.icon || 'check',
            options: options,
            type: MessageType.SUCCESS
        });
    };
    /**
     * @param {?} text
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    MessageService.prototype.error = /**
     * @param {?} text
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    function (text, title, options) {
        if (options === void 0) { options = {}; }
        return this.message({
            text: text,
            title: title,
            icon: options.icon || 'error_outline',
            options: options,
            type: MessageType.ERROR
        });
    };
    /**
     * @param {?} text
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    MessageService.prototype.info = /**
     * @param {?} text
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    function (text, title, options) {
        if (options === void 0) { options = {}; }
        return this.message({
            text: text,
            title: title,
            icon: options.icon || 'info_outline',
            options: options,
            type: MessageType.INFO
        });
    };
    /**
     * @param {?} text
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    MessageService.prototype.alert = /**
     * @param {?} text
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    function (text, title, options) {
        if (options === void 0) { options = {}; }
        return this.message({
            text: text,
            title: title,
            icon: options.icon || 'access_alarm',
            options: options,
            type: MessageType.ALERT
        });
    };
    /**
     * @param {?=} id
     * @return {?}
     */
    MessageService.prototype.remove = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        this.notificationService.remove(id);
    };
    /**
     * @private
     * @param {?} notification
     * @param {?} icon
     * @return {?}
     */
    MessageService.prototype.addIcon = /**
     * @private
     * @param {?} notification
     * @param {?} icon
     * @return {?}
     */
    function (notification, icon) {
        // There is no way to add an icon to a notification when reating
        // it so we simply set it on the notification directly.
        // See https://github.com/flauc/angular2-notifications/issues/165
        notification.icon = "\n      <mat-icon class=\"material-icons mat-icon mat-list-avatar\" svgIcon=\"" + icon + "\">\n      </mat-icon>";
    };
    /**
     * @private
     * @param {?} message
     * @return {?}
     */
    MessageService.prototype.handleTemplate = /**
     * @private
     * @param {?} message
     * @return {?}
     */
    function (message) {
        if (!this.options.template || message.html) {
            return message;
        }
        /** @type {?} */
        var html = this.options.template;
        html = html.replace('${text}', message.text);
        html = html.replace('${title}', message.title);
        html = html.replace('${icon}', message.icon);
        message.html = html;
        message.text = undefined;
        message.title = undefined;
        message.icon = undefined;
        return message;
    };
    MessageService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    MessageService.ctorParameters = function () { return [
        { type: angular2_notifications__WEBPACK_IMPORTED_MODULE_3__["NotificationsService"] },
        { type: ConfigService }
    ]; };
    /** @nocollapse */ MessageService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["defineInjectable"])({ factory: function MessageService_Factory() { return new MessageService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(angular2_notifications__WEBPACK_IMPORTED_MODULE_3__["NotificationsService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(ConfigService)); }, token: MessageService, providedIn: "root" });
    return MessageService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LanguageService = /** @class */ (function () {
    function LanguageService(translate) {
        this.translate = translate;
        /** @type {?} */
        var lang = this.getLanguage();
        this.translate.setDefaultLang(lang);
    }
    /**
     * @return {?}
     */
    LanguageService.prototype.getLanguage = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var browserLang = this.translate.getBrowserLang();
        return browserLang.match(/en|fr/) ? browserLang : 'en';
    };
    /**
     * @param {?} language
     * @return {?}
     */
    LanguageService.prototype.setLanguage = /**
     * @param {?} language
     * @return {?}
     */
    function (language) {
        this.translate.use(language);
        this.translate.reloadLang(language);
    };
    LanguageService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    LanguageService.ctorParameters = function () { return [
        { type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__["TranslateService"] }
    ]; };
    /** @nocollapse */ LanguageService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["defineInjectable"])({ factory: function LanguageService_Factory() { return new LanguageService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__["TranslateService"])); }, token: LanguageService, providedIn: "root" });
    return LanguageService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ErrorInterceptor = /** @class */ (function () {
    function ErrorInterceptor(messageService, injector) {
        this.messageService = messageService;
        this.injector = injector;
    }
    /**
     * @param {?} req
     * @param {?} next
     * @return {?}
     */
    ErrorInterceptor.prototype.intercept = /**
     * @param {?} req
     * @param {?} next
     * @return {?}
     */
    function (req, next) {
        var _this = this;
        return next.handle(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["catchError"])((/**
         * @param {?} error
         * @return {?}
         */
        function (error) { return _this.handleError(error, req); })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["finalize"])((/**
         * @return {?}
         */
        function () { return _this.handleCaughtError(); })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["finalize"])((/**
         * @return {?}
         */
        function () { return _this.handleUncaughtError(); })));
    };
    /**
     * @private
     * @param {?} httpError
     * @param {?} req
     * @return {?}
     */
    ErrorInterceptor.prototype.handleError = /**
     * @private
     * @param {?} httpError
     * @param {?} req
     * @return {?}
     */
    function (httpError, req) {
        /** @type {?} */
        var msg = req.method + " " + req.urlWithParams + " " + httpError.status + " (" + httpError.statusText + ")";
        if (httpError instanceof _angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HttpErrorResponse"]) {
            /** @type {?} */
            var errorObj = httpError.error === 'object' ? httpError.error : {};
            errorObj.message = httpError.error.message || httpError.statusText;
            errorObj.caught = false;
            console.error(msg, '\n', errorObj.message, '\n\n', httpError);
            this.httpError = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HttpErrorResponse"]({
                error: errorObj,
                headers: httpError.headers,
                status: httpError.status,
                statusText: httpError.statusText,
                url: httpError.url
            });
        }
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["throwError"])(this.httpError);
    };
    /**
     * @private
     * @return {?}
     */
    ErrorInterceptor.prototype.handleCaughtError = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.httpError && this.httpError.error.toDisplay) {
            this.httpError.error.caught = true;
            this.messageService.error(this.httpError.error.message, this.httpError.error.title);
        }
    };
    /**
     * @private
     * @return {?}
     */
    ErrorInterceptor.prototype.handleUncaughtError = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.httpError && !this.httpError.error.caught) {
            /** @type {?} */
            var translate = this.injector.get(LanguageService).translate;
            /** @type {?} */
            var message = translate.instant('igo.core.errors.uncaught.message');
            /** @type {?} */
            var title = translate.instant('igo.core.errors.uncaught.title');
            this.httpError.error.caught = true;
            this.messageService.error(message, title);
        }
    };
    ErrorInterceptor.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"] }
    ];
    /** @nocollapse */
    ErrorInterceptor.ctorParameters = function () { return [
        { type: MessageService },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injector"] }
    ]; };
    return ErrorInterceptor;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoErrorModule = /** @class */ (function () {
    function IgoErrorModule() {
    }
    /**
     * @return {?}
     */
    IgoErrorModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoErrorModule,
            providers: [
                {
                    provide: _angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HTTP_INTERCEPTORS"],
                    useClass: ErrorInterceptor,
                    multi: true
                }
            ]
        };
    };
    IgoErrorModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: []
                },] }
    ];
    return IgoErrorModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoCoreModule = /** @class */ (function () {
    function IgoCoreModule(matIconRegistry, domSanitizer) {
        matIconRegistry.addSvgIconSet(domSanitizer.bypassSecurityTrustResourceUrl('./assets/igo2/core/icons/mdi.svg'));
    }
    /**
     * @return {?}
     */
    IgoCoreModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoCoreModule,
            providers: []
        };
    };
    IgoCoreModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_13__["CommonModule"],
                        _angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HttpClientModule"],
                        IgoActivityModule.forRoot(),
                        IgoConfigModule.forRoot(),
                        IgoErrorModule.forRoot(),
                        IgoLanguageModule.forRoot(),
                        IgoMessageModule.forRoot()
                    ],
                    declarations: [],
                    exports: [
                        IgoActivityModule,
                        IgoConfigModule,
                        IgoErrorModule,
                        IgoLanguageModule,
                        IgoMessageModule
                    ]
                },] }
    ];
    /** @nocollapse */
    IgoCoreModule.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatIconRegistry"] },
        { type: _angular_platform_browser__WEBPACK_IMPORTED_MODULE_0__["DomSanitizer"] }
    ]; };
    return IgoCoreModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LoggingInterceptor = /** @class */ (function () {
    function LoggingInterceptor() {
    }
    /**
     * @param {?} req
     * @param {?} next
     * @return {?}
     */
    LoggingInterceptor.prototype.intercept = /**
     * @param {?} req
     * @param {?} next
     * @return {?}
     */
    function (req, next) {
        /** @type {?} */
        var started = Date.now();
        /** @type {?} */
        var ok;
        // extend server response observable with logging
        return next.handle(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["tap"])((
        // Succeeds when there is a response; ignore other events
        // Succeeds when there is a response; ignore other events
        /**
         * @param {?} event
         * @return {?}
         */
        function (event) { return (ok = event instanceof _angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HttpResponse"] ? 'succeeded' : ''); }), (
        // Operation failed; error is an HttpErrorResponse
        // Operation failed; error is an HttpErrorResponse
        /**
         * @param {?} error
         * @return {?}
         */
        function (error) { return (ok = 'failed'); })), 
        // Log when response observable either completes or errors
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["finalize"])((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var elapsed = Date.now() - started;
            /** @type {?} */
            var msg = req.method + " \"" + req.urlWithParams + "\"\n             " + ok + " in " + elapsed + " ms.";
            console.log(msg);
        })));
    };
    LoggingInterceptor.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"] }
    ];
    return LoggingInterceptor;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoLoggingModule = /** @class */ (function () {
    function IgoLoggingModule() {
    }
    /**
     * @return {?}
     */
    IgoLoggingModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoLoggingModule,
            providers: [
                {
                    provide: _angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HTTP_INTERCEPTORS"],
                    useClass: LoggingInterceptor,
                    multi: true
                }
            ]
        };
    };
    IgoLoggingModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: []
                },] }
    ];
    return IgoLoggingModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var ROUTE_SERVICE_OPTIONS = new _angular_core__WEBPACK_IMPORTED_MODULE_12__["InjectionToken"]('routeServiceOptions');
/**
 * @param {?} options
 * @return {?}
 */
function provideRouteServiceOptions(options) {
    return {
        provide: ROUTE_SERVICE_OPTIONS,
        useValue: options
    };
}
var RouteService = /** @class */ (function () {
    function RouteService(route, options) {
        this.route = route;
        /** @type {?} */
        var defaultOptions = {
            centerKey: 'center',
            zoomKey: 'zoom',
            projectionKey: 'projection',
            contextKey: 'context',
            searchKey: 'search',
            visibleOnLayersKey: 'visiblelayers',
            visibleOffLayersKey: 'invisiblelayers',
            routingCoordKey: 'routing',
            toolKey: 'tool',
            llcKKey: 'llck',
            llcAKey: 'llca',
            llcVKey: 'llcv',
            llcRKey: 'llcr'
        };
        this.options = Object.assign({}, defaultOptions, options);
    }
    Object.defineProperty(RouteService.prototype, "queryParams", {
        get: /**
         * @return {?}
         */
        function () {
            return this.route.queryParams;
        },
        enumerable: true,
        configurable: true
    });
    RouteService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    RouteService.ctorParameters = function () { return [
        { type: _angular_router__WEBPACK_IMPORTED_MODULE_6__["ActivatedRoute"] },
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Inject"], args: [ROUTE_SERVICE_OPTIONS,] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Optional"] }] }
    ]; };
    /** @nocollapse */ RouteService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["defineInjectable"])({ factory: function RouteService_Factory() { return new RouteService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(_angular_router__WEBPACK_IMPORTED_MODULE_6__["ActivatedRoute"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(ROUTE_SERVICE_OPTIONS, 8)); }, token: RouteService, providedIn: "root" });
    return RouteService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AnalyticsService = /** @class */ (function () {
    function AnalyticsService(config) {
        this.config = config;
        this.options = this.config.getConfig('analytics') || {};
        if (this.options.provider === 'matomo') {
            this.initMatomo();
        }
    }
    /**
     * @private
     * @return {?}
     */
    AnalyticsService.prototype.initMatomo = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.options.url || !this.options.id) {
            return;
        }
        ((/** @type {?} */ (window)))._paq = ((/** @type {?} */ (window)))._paq || [];
        /** @type {?} */
        var paq = ((/** @type {?} */ (window)))._paq;
        paq.push(['trackPageView']);
        paq.push(['enableLinkTracking']);
        ((/**
         * @return {?}
         */
        function () {
            paq.push(['setTrackerUrl', _this.options.url + 'matomo.php']);
            paq.push(['setSiteId', _this.options.id]);
            /** @type {?} */
            var g = document.createElement('script');
            /** @type {?} */
            var s = document.getElementsByTagName('script')[0];
            g.type = 'text/javascript';
            g.async = true;
            g.defer = true;
            g.src = _this.options.url + 'matomo.js';
            s.parentNode.insertBefore(g, s);
        }))();
    };
    AnalyticsService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    AnalyticsService.ctorParameters = function () { return [
        { type: ConfigService }
    ]; };
    /** @nocollapse */ AnalyticsService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["defineInjectable"])({ factory: function AnalyticsService_Factory() { return new AnalyticsService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(ConfigService)); }, token: AnalyticsService, providedIn: "root" });
    return AnalyticsService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var Media = {
    Mobile: 'mobile',
    Tablet: 'tablet',
    Desktop: 'desktop',
};
/** @enum {string} */
var MediaOrientation = {
    Portrait: 'portrait',
    Landscape: 'landscape',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MediaService = /** @class */ (function () {
    function MediaService(breakpointObserver) {
        var _this = this;
        this.media$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["BehaviorSubject"](undefined);
        this.orientation$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["BehaviorSubject"](undefined);
        breakpointObserver
            .observe([_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__["Breakpoints"].HandsetLandscape])
            .subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res.matches) {
                _this.media$.next(Media.Mobile);
                _this.orientation$.next(MediaOrientation.Landscape);
            }
        }));
        breakpointObserver.observe([_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__["Breakpoints"].HandsetPortrait]).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res.matches) {
                _this.media$.next(Media.Mobile);
                _this.orientation$.next(MediaOrientation.Portrait);
            }
        }));
        breakpointObserver.observe([_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__["Breakpoints"].TabletLandscape]).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res.matches) {
                _this.media$.next(Media.Tablet);
                _this.orientation$.next(MediaOrientation.Landscape);
            }
        }));
        breakpointObserver.observe([_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__["Breakpoints"].TabletPortrait]).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res.matches) {
                _this.media$.next(Media.Tablet);
                _this.orientation$.next(MediaOrientation.Portrait);
            }
        }));
        breakpointObserver.observe([_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__["Breakpoints"].WebLandscape]).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res.matches) {
                _this.media$.next(Media.Desktop);
                _this.orientation$.next(MediaOrientation.Landscape);
            }
        }));
        breakpointObserver.observe([_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__["Breakpoints"].WebPortrait]).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res.matches) {
                _this.media$.next(Media.Desktop);
                _this.orientation$.next(MediaOrientation.Portrait);
            }
        }));
    }
    /**
     * @return {?}
     */
    MediaService.prototype.getMedia = /**
     * @return {?}
     */
    function () {
        return this.media$.value;
    };
    /**
     * @return {?}
     */
    MediaService.prototype.getOrientation = /**
     * @return {?}
     */
    function () {
        return this.orientation$.value;
    };
    MediaService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    MediaService.ctorParameters = function () { return [
        { type: _angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__["BreakpointObserver"] }
    ]; };
    /** @nocollapse */ MediaService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["defineInjectable"])({ factory: function MediaService_Factory() { return new MediaService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_7__["BreakpointObserver"])); }, token: MediaService, providedIn: "root" });
    return MediaService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var NetworkService = /** @class */ (function () {
    function NetworkService(messageService, injector, network, platform) {
        var _this = this;
        this.messageService = messageService;
        this.injector = injector;
        this.network = network;
        this.platform = platform;
        this.stateChangeEventEmitter = new _angular_core__WEBPACK_IMPORTED_MODULE_12__["EventEmitter"]();
        this.state = {
            connection: window.navigator.onLine
        };
        console.log(this.platform + 'premier');
        this.platform.ready().then((/**
         * @return {?}
         */
        function () {
            console.log(_this.platform);
            if (_this.platform.is('cordova')) {
                console.log('cordova');
                if (_this.platform.is('android')) {
                    console.log('android');
                    _this.initializeService();
                }
            }
            else {
                console.log('browser');
                _this.checkNetworkState();
            }
        }));
    }
    /**
     * @private
     * @return {?}
     */
    NetworkService.prototype.checkNetworkState = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.onlineSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["fromEvent"])(window, 'online').subscribe((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var translate = _this.injector.get(LanguageService).translate;
            /** @type {?} */
            var message = translate.instant('igo.core.network.online.message');
            /** @type {?} */
            var title = translate.instant('igo.core.network.online.title');
            _this.messageService.info(message, title);
            _this.state.connection = true;
            _this.emitEvent();
        }));
        this.offlineSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["fromEvent"])(window, 'offline').subscribe((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var translate = _this.injector.get(LanguageService).translate;
            /** @type {?} */
            var message = translate.instant('igo.core.network.offline.message');
            /** @type {?} */
            var title = translate.instant('igo.core.network.offline.title');
            _this.messageService.info(message, title);
            _this.state.connection = false;
            _this.emitEvent();
        }));
    };
    /**
     * @return {?}
     */
    NetworkService.prototype.initializeService = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.network.type !== this.network.Connection.NONE) {
            this.connectionType = this.network.type;
            this.state.connection = true;
        }
        this.offlineSubscription = this.network.onDisconnect().subscribe((/**
         * @return {?}
         */
        function () {
            _this.state.connection = false;
            setTimeout((/**
             * @return {?}
             */
            function () {
                if (!_this.state.connection) {
                    /** @type {?} */
                    var translate = _this.injector.get(LanguageService).translate;
                    /** @type {?} */
                    var message = translate.instant('igo.core.network.offline.message');
                    /** @type {?} */
                    var title = translate.instant('igo.core.network.offline.title');
                    _this.messageService.info(message, title);
                    _this.state.connection = false;
                    _this.emitEvent();
                }
            }), 10000);
        }));
        this.onlineSubscription = this.network.onConnect().subscribe((/**
         * @return {?}
         */
        function () {
            _this.state.connection = true;
            setTimeout((/**
             * @return {?}
             */
            function () {
                if (!_this.state.connection) {
                    /** @type {?} */
                    var translate = _this.injector.get(LanguageService).translate;
                    /** @type {?} */
                    var message = translate.instant('igo.core.network.online.message');
                    /** @type {?} */
                    var title = translate.instant('igo.core.network.online.title');
                    _this.messageService.info(message, title);
                    _this.state.connection = true;
                    _this.emitEvent();
                }
            }), 10000);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    NetworkService.prototype.emitEvent = /**
     * @private
     * @return {?}
     */
    function () {
        this.stateChangeEventEmitter.emit(this.state);
    };
    /**
     * @return {?}
     */
    NetworkService.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        try {
            this.offlineSubscription.unsubscribe();
            this.onlineSubscription.unsubscribe();
        }
        catch (e) {
        }
    };
    /**
     * @param {?=} reportState
     * @return {?}
     */
    NetworkService.prototype.currentState = /**
     * @param {?=} reportState
     * @return {?}
     */
    function (reportState) {
        if (reportState === void 0) { reportState = true; }
        return reportState ?
            this.stateChangeEventEmitter.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["debounceTime"])(300), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["startWith"])(this.state))
            :
                this.stateChangeEventEmitter.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["debounceTime"])(300));
    };
    NetworkService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    NetworkService.ctorParameters = function () { return [
        { type: MessageService },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["Injector"] },
        { type: _ionic_native_network_ngx__WEBPACK_IMPORTED_MODULE_10__["Network"] },
        { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_11__["Platform"] }
    ]; };
    /** @nocollapse */ NetworkService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["defineInjectable"])({ factory: function NetworkService_Factory() { return new NetworkService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(MessageService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(_angular_core__WEBPACK_IMPORTED_MODULE_12__["INJECTOR"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(_ionic_native_network_ngx__WEBPACK_IMPORTED_MODULE_10__["Network"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_12__["inject"])(_ionic_angular__WEBPACK_IMPORTED_MODULE_11__["Platform"])); }, token: NetworkService, providedIn: "root" });
    return NetworkService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var NetworkModule = /** @class */ (function () {
    function NetworkModule() {
    }
    NetworkModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_12__["NgModule"], args: [{
                    declarations: [],
                    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_13__["CommonModule"]],
                    providers: [NetworkService]
                },] }
    ];
    return NetworkModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */



//# sourceMappingURL=igo2-core.js.map

/***/ }),

/***/ "./dist/igo-lib/core/locale sync recursive ^\\.\\/.*\\.json$":
/*!******************************************************!*\
  !*** ./dist/igo-lib/core/locale sync ^\.\/.*\.json$ ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en.auth.json": "./dist/igo-lib/core/locale/en.auth.json",
	"./en.common.json": "./dist/igo-lib/core/locale/en.common.json",
	"./en.context.json": "./dist/igo-lib/core/locale/en.context.json",
	"./en.core.json": "./dist/igo-lib/core/locale/en.core.json",
	"./en.geo.json": "./dist/igo-lib/core/locale/en.geo.json",
	"./en.json": "./dist/igo-lib/core/locale/en.json",
	"./en.tools.json": "./dist/igo-lib/core/locale/en.tools.json",
	"./fr.auth.json": "./dist/igo-lib/core/locale/fr.auth.json",
	"./fr.common.json": "./dist/igo-lib/core/locale/fr.common.json",
	"./fr.context.json": "./dist/igo-lib/core/locale/fr.context.json",
	"./fr.core.json": "./dist/igo-lib/core/locale/fr.core.json",
	"./fr.geo.json": "./dist/igo-lib/core/locale/fr.geo.json",
	"./fr.json": "./dist/igo-lib/core/locale/fr.json",
	"./fr.tools.json": "./dist/igo-lib/core/locale/fr.tools.json"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) { // check for number or string
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return id;
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./dist/igo-lib/core/locale sync recursive ^\\.\\/.*\\.json$";

/***/ }),

/***/ "./dist/igo-lib/core/locale/en.auth.json":
/*!***********************************************!*\
  !*** ./dist/igo-lib/core/locale/en.auth.json ***!
  \***********************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"auth":{"accessAnonymous":"Access as anonymous","connection":"Connection","login":"Login","password":"Password","signOut":"Sign out","user":"User","welcome":"Welcome {{name}}!","deconnection":"You are logged out.","home":"Return to the home page"}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/en.common.json":
/*!*************************************************!*\
  !*** ./dist/igo-lib/core/locale/en.common.json ***!
  \*************************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"common":{"confirmDialog":{"cancelBtn":"Cancel","confirmBtn":"Confirm","title":"Confirm"},"table":{"filter":"Filter"},"form":{"errors":{"required":"This field is required"}}}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/en.context.json":
/*!**************************************************!*\
  !*** ./dist/igo-lib/core/locale/en.context.json ***!
  \**************************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"context":{"bookmarkButton":{"create":"Create a new context","dialog":{"createMsg":"The context '{{value}}' was created","createTitle":"Context created","placeholder":"Title","title":"New context"}},"contextManager":{"clone":"Clone this context","delete":"Delete this context","dialog":{"cloneMsg":"The context '{{value}}' was cloned","cloneTitle":"Context cloned","confirmDelete":"Are you sure you want to delete this context?","deleteMsg":"The context '{{value}}' was deleted","deleteTitle":"Context deleted","favoriteMsg":"The context '{{value}}' was set as favorite","favoriteTitle":"Favorite saved","saveMsg":"The context '{{value}}' was saved","saveTitle":"Context saved"},"edit":"Edit this context","errors":{"uncaught":{"message":"Sorry, service is currently not available. Please try again later","title":"Error server"}},"favorite":"Favorite","form":{"edit":"Edit","title":"Title","titleRequired":"Title required","uri":"URI","uriRequired":"URI required"},"invalid":{"text":"Context '{{value}}' is invalid","title":"Invalid context"},"managePermissions":"Manage permissions context","manageTools":"Manage tools context","ourContexts":"Our contexts","publicContexts":"Public contexts","save":"Save this context","sharedContexts":"Shared contexts"},"permission":{"addBtn":"Add","delete":"Remove permission","dialog":{"addMsg":"The permission '{{value}}' was added","addTitle":"Permission added","deleteMsg":"The permission '{{value}}' was removed","deleteTitle":"Permission removed","scopeChangedMsg":"The scope was changed to {{value}}","scopeChangedTitle":"Scope changed"},"profil":"Profil","profilRequired":"Profil required","read":"Read only","scope":{"private":"Private","protected":"Protected","public":"Public"},"write":"Read and Write"},"poiButton":{"create":"Create a new zone of interest","dialog":{"confirmDelete":"Are you sure you want to delete this zone of interest?","createMsg":"The zone of interest '{{value}}' was created","createTitle":"Zone of interest created","deleteMsg":"The zone of interest '{{value}}' was deleted","deleteTitle":"Zone of interest deleted","placeholder":"Title","title":"New zone of interest"},"placeholder":"Zones of interest"},"sidenav":{"goBack":"Go Back","mainMenu":"Main Menu"},"shareMap":{"button":"Share map","copy":"Copy to clipboard","dialog":{"copyMsg":"Link copied to clipboard","copyTitle":"Link"},"placeholderLink":"Link"},"tool":{"dialog":{"addMsg":"The tool '{{value}}' was added","addTitle":"Tool added","deleteMsg":"The tool '{{value}}' was removed","deleteTitle":"Tool removed"}},"userButton":{"dialog":{"email":"Email","expiration":"Expiration","user":"User"},"infoTitle":"User info","logout":"Logout"}}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/en.core.json":
/*!***********************************************!*\
  !*** ./dist/igo-lib/core/locale/en.core.json ***!
  \***********************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"core":{"errors":{"uncaught":{"message":"Sorry, service is currently not available. Please try again later","title":"Error server"}},"network":{"online":{"message":"Online","title":"Status:"},"offline":{"message":"Offline","title":"Status:"}}}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/en.geo.json":
/*!**********************************************!*\
  !*** ./dist/igo-lib/core/locale/en.geo.json ***!
  \**********************************************/
/*! exports provided: igo, search, default */
/***/ (function(module) {

module.exports = {"igo":{"geo":{"catalog":{"baseLayers":"Baselayers","layer.addToMap":"Add to map","layer.removeFromMap":"Remove from map","group.addToMap":"Add all layers from this group to map","group.removeFromMap":"Remove all layers from this group to map"},"clickOnMap":{"clickedFeature":"Clicked Feature"},"dropGeoFile":{"invalid":{"text":"The file '{{value}}' is invalid ({{mimeType}})","title":"Invalid file"},"empty":{"text":"The file '{{value}}' contained nothing that could be imported.","title":"Nothing to import"},"success":{"text":"Imported file","title":"The layer '{{value}}' was added to the map"},"unreadable":{"text":"Unreadable file","title":"The file '{{value}}' is unreadable"}},"export":{"nothing":{"text":"No feature could be exported.","title":"Nothing to export"},"failed":{"text":"Failed to export","title":"Failed to export features"}},"importExportForm":{"exportButton":"Export","exportFormatPlaceholder":"Format","exportLayerPlaceholder":"Layer","exportTabTitle":"Export","importButton":"Import","importProjPlaceholder":"Coordinate system","importTabTitle":"Import"},"operators":{"And":"And","Or":"Or","PropertyIsEqualTo":"=","PropertyIsNotEqualTo":"!=","PropertyIsLike":"≈","PropertyIsGreaterThan":">","PropertyIsGreaterThanOrEqualTo":">=","PropertyIsLessThan":"<","PropertyIsLessThanOrEqualTo":"<=","PropertyIsBetween":"between","During":"during","PropertyIsNull":"is null","Intersects":"intersects","Within":"within","Contains":"contains"},"sourceFields":{"selectField":"Choose a field"},"filter":{"addFilter":"Add an empty filter to the current list","removeFilter":"Remove the current filter from the filters's list","toggleFilterState":"Enable/disable the current filter","refreshFilters":"Update this datasource with the active filter(s). To enable this button, the layer must be visible (or in the defined scale ranges) or you must modify the current filter.","layerFiltered":"This layer is currently filtered","layerFilterable":"This layer is filterable","filterBy":"Filter by","advancedOgcFilters":"Advanced filters"},"spatialSelector":{"fixedExtent":"Fixed extent","btnSetExtent":"Define the extent of the spatial filter to the current view","snrc":"SNRC (ex:21L14)","selectFeature":"","drawFeature":""},"layer":{"hideLayer":"Hide Layer","lowerLayer":"Bring layer backward","loadingLegendText":"Loading legend","noLegendText":"No legend available for this layer","opacity":"Opacity","raiseLayer":"Bring layer forward","removeLayer":"Remove this layer from the map","showFeaturesList":"Show features list","showLayer":"Show Layer","subsetLayersListKeyword":"Subset the layers's list by title or type (wms, wfs,...)","deleteKeyword":"Delete the keyword","subsetLayersListKeywordPlaceholder":"Filter","subsetLayersListOnlyVisible":"Subset the layers's list by visibility","subsetLayersListOnlyInRange":"Subset the layers's list by resolution range","sortAlphabetically":"Sort the layers's list alphabetically","sortMapOrder":"Sort the layers's list based on layer's order on the map","resetLayersList":"Remove the current applied filter to layers's list"},"download":{"action":"Download data","title":"Downloading file","start":"Started. Check the download progression in your browser","end":"Completed"},"mapButtons":{"baselayerSwitcher":"Change base layer","geolocate":"Geolocate","zoomIn":"Zoom in ({{zoom}})","zoomOut":"Zoom out ({{zoom}})","resetRotation":"Set map to north","tipRotation":"Hold Alt and SHIFT while dragging on map to rotate the map."},"metadata":{"show":"Show metadata"},"printForm":{"corsErrorMessageBody":"Unable to print due to non-owned access rights","corsErrorMessageHeader":"Print","comment":"Comment","doZipFile":"Zip file","outputFormat":"Output format","paperFormat":"Paper format","paperFormats":{"A0":"A0","A1":"A1","A2":"A2","A3":"A3","A4":"A4","A5":"A5","Letter":"Letter","Legal":"Legal"},"imageFormat":"Image format","orientation":"Orientation","landscape":"Landscape","portrait":"Portrait","projection":"Projection","resolution":"Resolution","saveBtn":"Save","scale":"Scale","showLegend":"Show legend","showProjection":"Show projection","showScale":"Show scale","title":"Title"},"routingForm":{"start":"Start","intermediate":"Intermediate","end":"End","routingBtn":"Get route","resetRoutingBtn":"Reset","zoomRoute":"Zoom on route","null":"","directions":"Directions","raiseStop":"Raise stop's priority","lowerStop":"Lower stop's priority","addStop":"Add a stop","removeStop":"Remove this stop","drivingOptions":"Options","summary":"Direction's summary","stopsList":"Stops's list","instructions":"Instructions","copy":"Copy directions","geolocate":"Use current localisation as stop","link":"Link","dialog":{"copyMsg":"Directions copied to clipboard","copyMsgLink":"Link for directions copied to clipboard","copyTitle":"Directions"}},"routing":{"uturn":"demi-tour","sharp right":"fortement à droite","right":"right","slight right":"slightly on right","sharp left":"fortement à gauche","left":"left","slight left":"slightly on left","straight":"forward"},"cardinalPoints":{"n":"north","ne":"northeast","e":"east","se":"Southeast","s":"south","sw":"southwest","w":"west","nw":"northwest"},"search":{"dataSources":{"name":"Layers","properties":{"abstract":"Abstract","group":"Group","title":"Title","type":"Type","url":"URL"}},"menu.tooltip":"Search Options","settings":{"title":"Settings"},"searchSources":{"settings":{"results type":"Results type","trust level":"Trust level","results limit":"Limit","multiple object":"Multiple object","country limitation":"Limitation (country)"}}},"geometry":{"geometry":"Geometry","point":"Point","line":"Line","polygon":"Polygon"},"targetHtmlUrl":"Open the external link","timeFilter":{"date":"Date","endDate":"End Date","startDate":"Start Date"},"measure":{"dialog":{"title":"Sum of the selection","length.title":"Length","area.title":"Area","lengthInMeters":"Length in meters","lengthInKilometers":"Length in kilometers","lengthInMiles":"Length in miles","lengthInFeet":"Length in en feet","areaInSquareMeters":"Area in meters²","areaInSquareKilometers":"Area in kilometers²","areaInSquareMiles":"Area in miles²","areaInHectares":"Area in hectares","areaInAcres":"Area in acres","perimeterInMeters":"Perimeter in meters"},"area":"Area","areaHeader":"Area","length":"Length","lengthHeader":"Length / Perimeter","perimeter":"Perimeter","meters":"Meters","kilometers":"Kilometers","miles":"Miles","feet":"Feet","squareMeters":"Meters²","squareKilometers":"Kilometers²","squareMiles":"Miles²","squareFeet":"Feet²","hectares":"Hectares","acres":"Acres","toggleMeasure":"Measure","toggleMapTooltips":"Show map tooltips","toggleAutoUnits":"Auto Units","actionbar":{"calculate.tooltip":"Calculate","delete.tooltip":"Delete","modify.tooltip":"Modify"}},"workspace":{"ogcFilter.close":"Close","ogcFilter.title":"Filters","ogcFilter.tooltip":"Apply filters","wfsDownload.title":"Download","wfsDownload.tooltip":"Download"}}},"search":{"feature.title":"Localisation","feature.placeholder":"Search for a place localisation","layer.title":"Layer","layer.placeholder":"Search for a layer"}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/en.json":
/*!******************************************!*\
  !*** ./dist/igo-lib/core/locale/en.json ***!
  \******************************************/
/*! exports provided: igo, search, default */
/***/ (function(module) {

module.exports = {"igo":{"auth":{"accessAnonymous":"Access as anonymous","connection":"Connection","login":"Login","password":"Password","signOut":"Sign out","user":"User","welcome":"Welcome {{name}}!","deconnection":"You are logged out.","home":"Return to the home page"},"common":{"confirmDialog":{"cancelBtn":"Cancel","confirmBtn":"Confirm","title":"Confirm"},"table":{"filter":"Filter"},"form":{"errors":{"required":"This field is required"}}},"context":{"bookmarkButton":{"create":"Create a new context","dialog":{"createMsg":"The context '{{value}}' was created","createTitle":"Context created","placeholder":"Title","title":"New context"}},"contextManager":{"clone":"Clone this context","delete":"Delete this context","dialog":{"cloneMsg":"The context '{{value}}' was cloned","cloneTitle":"Context cloned","confirmDelete":"Are you sure you want to delete this context?","deleteMsg":"The context '{{value}}' was deleted","deleteTitle":"Context deleted","favoriteMsg":"The context '{{value}}' was set as favorite","favoriteTitle":"Favorite saved","saveMsg":"The context '{{value}}' was saved","saveTitle":"Context saved"},"edit":"Edit this context","errors":{"uncaught":{"message":"Sorry, service is currently not available. Please try again later","title":"Error server"}},"favorite":"Favorite","form":{"edit":"Edit","title":"Title","titleRequired":"Title required","uri":"URI","uriRequired":"URI required"},"invalid":{"text":"Context '{{value}}' is invalid","title":"Invalid context"},"managePermissions":"Manage permissions context","manageTools":"Manage tools context","ourContexts":"Our contexts","publicContexts":"Public contexts","save":"Save this context","sharedContexts":"Shared contexts"},"permission":{"addBtn":"Add","delete":"Remove permission","dialog":{"addMsg":"The permission '{{value}}' was added","addTitle":"Permission added","deleteMsg":"The permission '{{value}}' was removed","deleteTitle":"Permission removed","scopeChangedMsg":"The scope was changed to {{value}}","scopeChangedTitle":"Scope changed"},"profil":"Profil","profilRequired":"Profil required","read":"Read only","scope":{"private":"Private","protected":"Protected","public":"Public"},"write":"Read and Write"},"poiButton":{"create":"Create a new zone of interest","dialog":{"confirmDelete":"Are you sure you want to delete this zone of interest?","createMsg":"The zone of interest '{{value}}' was created","createTitle":"Zone of interest created","deleteMsg":"The zone of interest '{{value}}' was deleted","deleteTitle":"Zone of interest deleted","placeholder":"Title","title":"New zone of interest"},"placeholder":"Zones of interest"},"sidenav":{"goBack":"Go Back","mainMenu":"Main Menu"},"shareMap":{"button":"Share map","copy":"Copy to clipboard","dialog":{"copyMsg":"Link copied to clipboard","copyTitle":"Link"},"placeholderLink":"Link"},"tool":{"dialog":{"addMsg":"The tool '{{value}}' was added","addTitle":"Tool added","deleteMsg":"The tool '{{value}}' was removed","deleteTitle":"Tool removed"}},"userButton":{"dialog":{"email":"Email","expiration":"Expiration","user":"User"},"infoTitle":"User info","logout":"Logout"}},"core":{"errors":{"uncaught":{"message":"Sorry, service is currently not available. Please try again later","title":"Error server"}},"network":{"online":{"message":"Online","title":"Status:"},"offline":{"message":"Offline","title":"Status:"}}},"geo":{"catalog":{"baseLayers":"Baselayers","layer.addToMap":"Add to map","layer.removeFromMap":"Remove from map","group.addToMap":"Add all layers from this group to map","group.removeFromMap":"Remove all layers from this group to map"},"clickOnMap":{"clickedFeature":"Clicked Feature"},"dropGeoFile":{"invalid":{"text":"The file '{{value}}' is invalid ({{mimeType}})","title":"Invalid file"},"empty":{"text":"The file '{{value}}' contained nothing that could be imported.","title":"Nothing to import"},"success":{"text":"Imported file","title":"The layer '{{value}}' was added to the map"},"unreadable":{"text":"Unreadable file","title":"The file '{{value}}' is unreadable"}},"export":{"nothing":{"text":"No feature could be exported.","title":"Nothing to export"},"failed":{"text":"Failed to export","title":"Failed to export features"}},"importExportForm":{"exportButton":"Export","exportFormatPlaceholder":"Format","exportLayerPlaceholder":"Layer","exportTabTitle":"Export","importButton":"Import","importProjPlaceholder":"Coordinate system","importTabTitle":"Import"},"operators":{"And":"And","Or":"Or","PropertyIsEqualTo":"=","PropertyIsNotEqualTo":"!=","PropertyIsLike":"≈","PropertyIsGreaterThan":">","PropertyIsGreaterThanOrEqualTo":">=","PropertyIsLessThan":"<","PropertyIsLessThanOrEqualTo":"<=","PropertyIsBetween":"between","During":"during","PropertyIsNull":"is null","Intersects":"intersects","Within":"within","Contains":"contains"},"sourceFields":{"selectField":"Choose a field"},"filter":{"addFilter":"Add an empty filter to the current list","removeFilter":"Remove the current filter from the filters's list","toggleFilterState":"Enable/disable the current filter","refreshFilters":"Update this datasource with the active filter(s). To enable this button, the layer must be visible (or in the defined scale ranges) or you must modify the current filter.","layerFiltered":"This layer is currently filtered","layerFilterable":"This layer is filterable","filterBy":"Filter by","advancedOgcFilters":"Advanced filters"},"spatialSelector":{"fixedExtent":"Fixed extent","btnSetExtent":"Define the extent of the spatial filter to the current view","snrc":"SNRC (ex:21L14)","selectFeature":"","drawFeature":""},"layer":{"hideLayer":"Hide Layer","lowerLayer":"Bring layer backward","loadingLegendText":"Loading legend","noLegendText":"No legend available for this layer","opacity":"Opacity","raiseLayer":"Bring layer forward","removeLayer":"Remove this layer from the map","showFeaturesList":"Show features list","showLayer":"Show Layer","subsetLayersListKeyword":"Subset the layers's list by title or type (wms, wfs,...)","deleteKeyword":"Delete the keyword","subsetLayersListKeywordPlaceholder":"Filter","subsetLayersListOnlyVisible":"Subset the layers's list by visibility","subsetLayersListOnlyInRange":"Subset the layers's list by resolution range","sortAlphabetically":"Sort the layers's list alphabetically","sortMapOrder":"Sort the layers's list based on layer's order on the map","resetLayersList":"Remove the current applied filter to layers's list"},"download":{"action":"Download data","title":"Downloading file","start":"Started. Check the download progression in your browser","end":"Completed"},"mapButtons":{"baselayerSwitcher":"Change base layer","geolocate":"Geolocate","zoomIn":"Zoom in ({{zoom}})","zoomOut":"Zoom out ({{zoom}})","resetRotation":"Set map to north","tipRotation":"Hold Alt and SHIFT while dragging on map to rotate the map."},"metadata":{"show":"Show metadata"},"printForm":{"corsErrorMessageBody":"Unable to print due to non-owned access rights","corsErrorMessageHeader":"Print","comment":"Comment","doZipFile":"Zip file","outputFormat":"Output format","paperFormat":"Paper format","paperFormats":{"A0":"A0","A1":"A1","A2":"A2","A3":"A3","A4":"A4","A5":"A5","Letter":"Letter","Legal":"Legal"},"imageFormat":"Image format","orientation":"Orientation","landscape":"Landscape","portrait":"Portrait","projection":"Projection","resolution":"Resolution","saveBtn":"Save","scale":"Scale","showLegend":"Show legend","showProjection":"Show projection","showScale":"Show scale","title":"Title"},"routingForm":{"start":"Start","intermediate":"Intermediate","end":"End","routingBtn":"Get route","resetRoutingBtn":"Reset","zoomRoute":"Zoom on route","null":"","directions":"Directions","raiseStop":"Raise stop's priority","lowerStop":"Lower stop's priority","addStop":"Add a stop","removeStop":"Remove this stop","drivingOptions":"Options","summary":"Direction's summary","stopsList":"Stops's list","instructions":"Instructions","copy":"Copy directions","geolocate":"Use current localisation as stop","link":"Link","dialog":{"copyMsg":"Directions copied to clipboard","copyMsgLink":"Link for directions copied to clipboard","copyTitle":"Directions"}},"routing":{"uturn":"demi-tour","sharp right":"fortement à droite","right":"right","slight right":"slightly on right","sharp left":"fortement à gauche","left":"left","slight left":"slightly on left","straight":"forward"},"cardinalPoints":{"n":"north","ne":"northeast","e":"east","se":"Southeast","s":"south","sw":"southwest","w":"west","nw":"northwest"},"search":{"dataSources":{"name":"Layers","properties":{"abstract":"Abstract","group":"Group","title":"Title","type":"Type","url":"URL"}},"menu.tooltip":"Search Options","settings":{"title":"Settings"},"searchSources":{"settings":{"results type":"Results type","trust level":"Trust level","results limit":"Limit","multiple object":"Multiple object","country limitation":"Limitation (country)"}}},"geometry":{"geometry":"Geometry","point":"Point","line":"Line","polygon":"Polygon"},"targetHtmlUrl":"Open the external link","timeFilter":{"date":"Date","endDate":"End Date","startDate":"Start Date"},"measure":{"dialog":{"title":"Sum of the selection","length.title":"Length","area.title":"Area","lengthInMeters":"Length in meters","lengthInKilometers":"Length in kilometers","lengthInMiles":"Length in miles","lengthInFeet":"Length in en feet","areaInSquareMeters":"Area in meters²","areaInSquareKilometers":"Area in kilometers²","areaInSquareMiles":"Area in miles²","areaInHectares":"Area in hectares","areaInAcres":"Area in acres","perimeterInMeters":"Perimeter in meters"},"area":"Area","areaHeader":"Area","length":"Length","lengthHeader":"Length / Perimeter","perimeter":"Perimeter","meters":"Meters","kilometers":"Kilometers","miles":"Miles","feet":"Feet","squareMeters":"Meters²","squareKilometers":"Kilometers²","squareMiles":"Miles²","squareFeet":"Feet²","hectares":"Hectares","acres":"Acres","toggleMeasure":"Measure","toggleMapTooltips":"Show map tooltips","toggleAutoUnits":"Auto Units","actionbar":{"calculate.tooltip":"Calculate","delete.tooltip":"Delete","modify.tooltip":"Modify"}},"workspace":{"ogcFilter.close":"Close","ogcFilter.title":"Filters","ogcFilter.tooltip":"Apply filters","wfsDownload.title":"Download","wfsDownload.tooltip":"Download"}},"integration":{"tools":{"catalog":"Catalog","contexts":"Contexts","directions":"Directions","importExport":"Import & export","ogcFilter":"Filter by","map":"Map","measurer":"Measure","print":"Print","searchResults":"Search Results","shareMap":"Share","timeAnalysis":"Time Analysis","about":"About"}}},"search":{"feature.title":"Localisation","feature.placeholder":"Search for a place localisation","layer.title":"Layer","layer.placeholder":"Search for a layer"}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/en.tools.json":
/*!************************************************!*\
  !*** ./dist/igo-lib/core/locale/en.tools.json ***!
  \************************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"integration":{"tools":{"catalog":"Catalog","contexts":"Contexts","directions":"Directions","importExport":"Import & export","ogcFilter":"Filter by","map":"Map","measurer":"Measure","print":"Print","searchResults":"Search Results","shareMap":"Share","timeAnalysis":"Time Analysis","about":"About"}}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/fr.auth.json":
/*!***********************************************!*\
  !*** ./dist/igo-lib/core/locale/fr.auth.json ***!
  \***********************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"auth":{"accessAnonymous":"Rester anonyme","connection":"Connexion","login":"Connecter","password":"Mot de passe","signOut":"Se déconnecter","user":"Utilisateur","welcome":"Bienvenue {{name}}!","deconnection":"Vous êtes déconnecté","home":"Retourner à la page d'accueil"}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/fr.common.json":
/*!*************************************************!*\
  !*** ./dist/igo-lib/core/locale/fr.common.json ***!
  \*************************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"common":{"confirmDialog":{"cancelBtn":"Annuler","confirmBtn":"Confirmer","title":"Confirmation"},"table":{"filter":"Filtre"},"form":{"errors":{"required":"Ce champ est requis"}}}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/fr.context.json":
/*!**************************************************!*\
  !*** ./dist/igo-lib/core/locale/fr.context.json ***!
  \**************************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"context":{"bookmarkButton":{"create":"Créer un contexte","dialog":{"createMsg":"Le contexte '{{value}}' a été créé","createTitle":"Contexte créé","placeholder":"Titre","title":"Nouveau contexte"}},"contextManager":{"clone":"Cloner ce contexte","delete":"Supprimer ce contexte","dialog":{"cloneMsg":"Le contexte '{{value}}' a été cloné","cloneTitle":"Contexte cloné","confirmDelete":"Êtes-vous sûr de vouloir supprimer ce context ?","deleteMsg":"Le contexte '{{value}}' a été supprimé","deleteTitle":"Contexte supprimé","favoriteMsg":"Le contexte '{{value}}' a été défini comme favori","favoriteTitle":"Favori sauvegardé","saveMsg":"Le contexte '{{value}}' a été sauvegardé","saveTitle":"Contexte sauvegardé"},"edit":"Éditer ce contexte","errors":{"uncaught":{"message":"Désolé! Le service que vous voulez utiliser n’est malheureusement pas disponible pour le moment. Essayez plus tard!","title":"Erreur de serveur"}},"favorite":"Favori","form":{"edit":"Éditer","title":"Titre","titleRequired":"Le titre est obligatoire","uri":"URI","uriRequired":"Le URI est obligatoire"},"invalid":{"text":"Le contexte \"{{value}}\" est invalide","title":"Contexte invalide"},"managePermissions":"Gérer les permissions du contexte","manageTools":"Gérer les outils du contexte","ourContexts":"Vos contextes","publicContexts":"Contextes publics","save":"Sauvegarder ce contexte","sharedContexts":"Contextes partagés"},"permission":{"addBtn":"Ajouter","delete":"Retirer la permission","dialog":{"addMsg":"La permission '{{value}}' a été ajoutée","addTitle":"Permission ajoutée","deleteMsg":"La permission '{{value}}' a été supprimée","deleteTitle":"Permission retirée","scopeChangedMsg":"La portée du contexte a été changée pour {{value}}","scopeChangedTitle":"Changement de la portée"},"profil":"Profil","profilRequired":"Le profil est obligatoire","read":"Lecture seule","scope":{"private":"Privé","protected":"Protégé","public":"Public"},"write":"Lecture et écriture"},"poiButton":{"create":"Créer une zone d'intérêt","dialog":{"confirmDelete":"Êtes-vous sûr de vouloir supprimer cette zone d'intérêt ?","createMsg":"La zone d'intérêt '{{value}}' a été créée","createTitle":"Zone d'intérêt créée","deleteMsg":"La zone d'intérêt '{{value}}' a été supprimée","deleteTitle":"Zone d'intérêt supprimée","placeholder":"Titre","title":"Nouvelle zone d'intérêt"},"placeholder":"Zones d'intérêt"},"sidenav":{"goBack":"Revenir","mainMenu":"Revenir au menu principal"},"shareMap":{"button":"Partager la carte","copy":"Copier le lien","dialog":{"copyMsg":"Lien copié","copyTitle":"Lien"},"placeholderLink":"Lien"},"tool":{"dialog":{"addMsg":"L'outil a été ajouté","addTitle":"Outil ajouté","deleteMsg":"L'outil a été supprimé","deleteTitle":"Outil retiré"}},"userButton":{"dialog":{"email":"Courriel","expiration":"Expiration","user":"Utilisateur"},"infoTitle":"Info sur l'utilisateur","logout":"Se déconnecter"}}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/fr.core.json":
/*!***********************************************!*\
  !*** ./dist/igo-lib/core/locale/fr.core.json ***!
  \***********************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"core":{"errors":{"uncaught":{"message":"Désolé! Le service que vous voulez utiliser n’est malheureusement pas disponible pour le moment. Essayez plus tard!","title":"Erreur serveur"}},"network":{"online":{"message":"En ligne","title":"Statut:"},"offline":{"message":"Hors-Ligne","title":"Statut:"}}}}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/fr.geo.json":
/*!**********************************************!*\
  !*** ./dist/igo-lib/core/locale/fr.geo.json ***!
  \**********************************************/
/*! exports provided: igo, search, default */
/***/ (function(module) {

module.exports = {"igo":{"geo":{"catalog":{"layer.addToMap":"Ajouter à la carte","layer.removeFromMap":"Retirer de la carte","group.addToMap":"Ajouter toutes les couches de ce groupe à la carte","group.removeFromMap":"Retirer toutes les couches de ce groupe de la carte","baseLayers":"Fonds de carte"},"clickOnMap":{"clickedFeature":"Entités cliquées"},"dropGeoFile":{"invalid":{"text":"Le fichier '{{value}}' est invalide. ({{mimeType}})","title":"Fichier invalide"},"empty":{"text":"Le fichier '{{value}}' est vide, impossible d'importer.","title":"Fichier vide"},"success":{"text":"La couche '{{value}}' a été ajoutée à la carte","title":"Fichier importé"},"unreadable":{"text":"Le fichier '{{value}}' est impossible à lire","title":"Fichier illisible"}},"export":{"nothing":{"text":"Impossible d’exporter, donnée non valide ou aucune donnée sélectionnée.","title":"Donnée non valide ou non présente"},"failed":{"text":"Impossible d’exporter, problème de donnée rencontré.","title":"Problème d’exportation"}},"importExportForm":{"exportButton":"Exporter","exportFormatPlaceholder":"Format","exportLayerPlaceholder":"Données géospatiales","exportTabTitle":"Exporter","importButton":"Importer","importProjPlaceholder":"Système de coordonnées","importTabTitle":"Importer"},"operators":{"And":"Et","Or":"Ou","PropertyIsEqualTo":"=","PropertyIsNotEqualTo":"!=","PropertyIsLike":"≈","PropertyIsGreaterThan":">","PropertyIsGreaterThanOrEqualTo":">=","PropertyIsLessThan":"<","PropertyIsLessThanOrEqualTo":"<=","PropertyIsBetween":"entre","During":"durant","PropertyIsNull":"est nul","Intersects":"intersecte","Within":"contenu dans","Contains":"contient"},"sourceFields":{"selectField":"Choisir un champ"},"filter":{"addFilter":"Ajouter un filtre vide à la liste courante","removeFilter":"Supprimer le présent filtre à la liste des filtres","toggleFilterState":"Activer/désactiver le présent filtre","refreshFilters":"Mettre à jour la source de donnée avec les filtres actifs de la liste. Pour activer ce boutton, la couche doit etre visible (et dans les échelles permises) ou veillez modifier le présent filtre.","layerFiltered":"Cette couche d'information est présentement filtrée.","layerFilterable":"Cette couche d'information est filtrable","filterBy":"Filtrer par","advancedOgcFilters":"Filtres avancés"},"spatialSelector":{"fixedExtent":"Étendue fixe","btnSetExtent":"Définir l'étendue du filtre selon l'étendue courante de la carte","snrc":"SNRC (ex:21L14)","selectFeature":"","drawFeature":""},"layer":{"hideLayer":"Masquer la couche","lowerLayer":"Mettre en arrière","loadingLegendText":"Chargement de la légende","noLegendText":"Aucune légende disponible pour cette couche","opacity":"Opacité","raiseLayer":"Mettre en avant","removeLayer":"Retirer la couche de la carte","showFeaturesList":"Afficher la liste des entités","showLayer":"Afficher la couche","subsetLayersListKeyword":"Limiter l'affichage de la liste selon le titre ou  par type (wms, wfs,...)","deleteKeyword":"Supprimer le mot-clé","subsetLayersListKeywordPlaceholder":"Filtre","subsetLayersListOnlyVisible":"Conserver que les couches qui sont visible","subsetLayersListOnlyInRange":"Conserver que les couches qui sont dans la plage de résolution active","sortAlphabetically":"Trier la liste des couches alphabétiquement.","sortMapOrder":"Replacer les couches selon l'ordre cartographique.","resetLayersList":"Supprimer le filtre appliqué à la liste"},"download":{"action":"Télécharger les données associées","title":"Téléchargement des données","start":"Vérifiez la progression du téléchargement dans votre navigateur","end":"Terminé"},"mapButtons":{"baselayerSwitcher":"Changer le fond de carte","geolocate":"Positionnement GPS","zoomIn":"Zoomer ({{zoom}})","zoomOut":"Dézoomer ({{zoom}})","resetRotation":"Réinitialiser la carte vers le nord","tipRotation":"Maintenez les touches Alt et Majuscule (shift) tout en cliquant sur la carte pour faire pivoter la carte"},"metadata":{"show":"Montrer les métadonnées"},"printForm":{"corsErrorMessageBody":"Impossible d'imprimer dû à des droits d'accès non détenus","corsErrorMessageHeader":"Impression","comment":"Commentaire","doZipFile":"Compresser le fichier","outputFormat":"Format de sortie","paperFormat":"Format du papier","paperFormats":{"A0":"A0","A1":"A1","A2":"A2","A3":"A3","A4":"A4","A5":"A5","Letter":"Lettre","Legal":"Légal"},"imageFormat":"Format de l'image","orientation":"Orientation","landscape":"Paysage","portrait":"Portrait","projection":"Projection","resolution":"Résolution","saveBtn":"Sauvegarder","scale":"Échelle","showLegend":"Afficher la légende","showProjection":"Afficher la projection","showScale":"Afficher l'échelle","title":"Titre"},"routingForm":{"start":"Début","intermediate":"Intermédiaire","end":"Fin","routingBtn":"Obtenir l'itinéraire","resetRoutingBtn":"Supprimer l'itinéraire","zoomRoute":"Zoomer sur l'itinéraire","null":"","directions":"Itinéraire","raiseStop":"Prioriser l'arrêt","lowerStop":"Reporter l'arrêt plus loin dans le parcours","addStop":"Ajouter un arrêt","removeStop":"Supprimer l'arrêt","drivingOptions":"Choix d'itinéraires","summary":"Résumé de l'itinéraire","stopsList":"Liste des lieux d'arrêts","instructions":"Indications","copy":"Copier l'itinéraire","geolocate":"Utiliser sa localisation comme point d'arrêt","link":"Lien","dialog":{"copyMsg":"Itinéraire copié dans le presse-papier","copyMsgLink":"Le lien de l'itinéraire est copié dans le presse-papier","copyTitle":"Itinéraire"}},"routing":{"uturn":"demi-tour","sharp right":"fortement à droite","right":"droite","slight right":"légèrement à droite","sharp left":"fortement à gauche","left":"gauche","slight left":"légèrement à gauche","straight":"tout droit"},"cardinalPoints":{"n":"nord","ne":"nord-est","e":"est","se":"sud-est","s":"sud","sw":"sud-ouest","w":"ouest","nw":"nord-ouest"},"search":{"dataSources":{"name":"Couches","properties":{"abstract":"Description","group":"Groupe","title":"Titre","type":"Type","url":"URL"}},"menu.tooltip":"Options de recherche","settings":{"title":"Paramètres"},"searchSources":{"settings":{"results type":"Type de résultat","trust level":"Niveau de confiance","results limit":"Limite","multiple object":"Objet multiple","country limitation":"Limitation (pays)"}}},"geometry":{"geometry":"Geometrie","point":"Point","line":"Ligne","polygon":"Surface"},"targetHtmlUrl":"Ouvrir le lien externe","timeFilter":{"date":"Date","endDate":"Date de fin","startDate":"Date de début"},"measure":{"dialog":{"title":"Sommes de la sélection","length.title":"Longueur","area.title":"Superficie","lengthInMeters":"Longueur en mètres","lengthInKilometers":"Longueur en kilomètres","lengthInMiles":"Longueur en miles","lengthInFeet":"Longueur en pieds","areaInSquareMeters":"Superficie en mètres²","areaInSquareKilometers":"Superficie en kilomètres²","areaInSquareMiles":"Superficie en miles²","areaInHectares":"Superficie en hectares","areaInAcres":"Superficie en acres","perimeterInMeters":"Périmètre en mètres"},"area":"Superficie","areaHeader":"Superficie","length":"Distance","lengthHeader":"Distance / Périmètre","perimeter":"Périmètre","meters":"Mètres","kilometers":"Kilomètres","miles":"Miles","feet":"Pieds","squareMeters":"Mètres²","squareKilometers":"Kilomètres²","squareMiles":"Miles²","squareFeet":"Pieds²","hectares":"Hectares","acres":"Acres","toggleMeasure":"Mesurage","toggleMapTooltips":"Mesures sur la carte","toggleAutoUnits":"Unités automatiques","actionbar":{"calculate.tooltip":"Calculer","delete.tooltip":"Supprimer","modify.tooltip":"Modifier"}},"workspace":{"ogcFilter.close":"Fermer","ogcFilter.title":"Filtres","ogcFilter.tooltip":"Appliquer des filtres sur la couche","wfsDownload.title":"Télécharger les données associées","wfsDownload.tooltip":"Télécharger les données associées"}}},"search":{"feature.title":"Localisation","feature.placeholder":"Rechercher une localisation","layer.title":"Couche de données","layer.placeholder":"Rechercher une couche de données."}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/fr.json":
/*!******************************************!*\
  !*** ./dist/igo-lib/core/locale/fr.json ***!
  \******************************************/
/*! exports provided: igo, search, default */
/***/ (function(module) {

module.exports = {"igo":{"auth":{"accessAnonymous":"Rester anonyme","connection":"Connexion","login":"Connecter","password":"Mot de passe","signOut":"Se déconnecter","user":"Utilisateur","welcome":"Bienvenue {{name}}!","deconnection":"Vous êtes déconnecté","home":"Retourner à la page d'accueil"},"common":{"confirmDialog":{"cancelBtn":"Annuler","confirmBtn":"Confirmer","title":"Confirmation"},"table":{"filter":"Filtre"},"form":{"errors":{"required":"Ce champ est requis"}}},"context":{"bookmarkButton":{"create":"Créer un contexte","dialog":{"createMsg":"Le contexte '{{value}}' a été créé","createTitle":"Contexte créé","placeholder":"Titre","title":"Nouveau contexte"}},"contextManager":{"clone":"Cloner ce contexte","delete":"Supprimer ce contexte","dialog":{"cloneMsg":"Le contexte '{{value}}' a été cloné","cloneTitle":"Contexte cloné","confirmDelete":"Êtes-vous sûr de vouloir supprimer ce context ?","deleteMsg":"Le contexte '{{value}}' a été supprimé","deleteTitle":"Contexte supprimé","favoriteMsg":"Le contexte '{{value}}' a été défini comme favori","favoriteTitle":"Favori sauvegardé","saveMsg":"Le contexte '{{value}}' a été sauvegardé","saveTitle":"Contexte sauvegardé"},"edit":"Éditer ce contexte","errors":{"uncaught":{"message":"Désolé! Le service que vous voulez utiliser n’est malheureusement pas disponible pour le moment. Essayez plus tard!","title":"Erreur de serveur"}},"favorite":"Favori","form":{"edit":"Éditer","title":"Titre","titleRequired":"Le titre est obligatoire","uri":"URI","uriRequired":"Le URI est obligatoire"},"invalid":{"text":"Le contexte \"{{value}}\" est invalide","title":"Contexte invalide"},"managePermissions":"Gérer les permissions du contexte","manageTools":"Gérer les outils du contexte","ourContexts":"Vos contextes","publicContexts":"Contextes publics","save":"Sauvegarder ce contexte","sharedContexts":"Contextes partagés"},"permission":{"addBtn":"Ajouter","delete":"Retirer la permission","dialog":{"addMsg":"La permission '{{value}}' a été ajoutée","addTitle":"Permission ajoutée","deleteMsg":"La permission '{{value}}' a été supprimée","deleteTitle":"Permission retirée","scopeChangedMsg":"La portée du contexte a été changée pour {{value}}","scopeChangedTitle":"Changement de la portée"},"profil":"Profil","profilRequired":"Le profil est obligatoire","read":"Lecture seule","scope":{"private":"Privé","protected":"Protégé","public":"Public"},"write":"Lecture et écriture"},"poiButton":{"create":"Créer une zone d'intérêt","dialog":{"confirmDelete":"Êtes-vous sûr de vouloir supprimer cette zone d'intérêt ?","createMsg":"La zone d'intérêt '{{value}}' a été créée","createTitle":"Zone d'intérêt créée","deleteMsg":"La zone d'intérêt '{{value}}' a été supprimée","deleteTitle":"Zone d'intérêt supprimée","placeholder":"Titre","title":"Nouvelle zone d'intérêt"},"placeholder":"Zones d'intérêt"},"sidenav":{"goBack":"Revenir","mainMenu":"Revenir au menu principal"},"shareMap":{"button":"Partager la carte","copy":"Copier le lien","dialog":{"copyMsg":"Lien copié","copyTitle":"Lien"},"placeholderLink":"Lien"},"tool":{"dialog":{"addMsg":"L'outil a été ajouté","addTitle":"Outil ajouté","deleteMsg":"L'outil a été supprimé","deleteTitle":"Outil retiré"}},"userButton":{"dialog":{"email":"Courriel","expiration":"Expiration","user":"Utilisateur"},"infoTitle":"Info sur l'utilisateur","logout":"Se déconnecter"}},"core":{"errors":{"uncaught":{"message":"Désolé! Le service que vous voulez utiliser n’est malheureusement pas disponible pour le moment. Essayez plus tard!","title":"Erreur serveur"}},"network":{"online":{"message":"En ligne","title":"Statut:"},"offline":{"message":"Hors-Ligne","title":"Statut:"}}},"geo":{"catalog":{"layer.addToMap":"Ajouter à la carte","layer.removeFromMap":"Retirer de la carte","group.addToMap":"Ajouter toutes les couches de ce groupe à la carte","group.removeFromMap":"Retirer toutes les couches de ce groupe de la carte","baseLayers":"Fonds de carte"},"clickOnMap":{"clickedFeature":"Entités cliquées"},"dropGeoFile":{"invalid":{"text":"Le fichier '{{value}}' est invalide. ({{mimeType}})","title":"Fichier invalide"},"empty":{"text":"Le fichier '{{value}}' est vide, impossible d'importer.","title":"Fichier vide"},"success":{"text":"La couche '{{value}}' a été ajoutée à la carte","title":"Fichier importé"},"unreadable":{"text":"Le fichier '{{value}}' est impossible à lire","title":"Fichier illisible"}},"export":{"nothing":{"text":"Impossible d’exporter, donnée non valide ou aucune donnée sélectionnée.","title":"Donnée non valide ou non présente"},"failed":{"text":"Impossible d’exporter, problème de donnée rencontré.","title":"Problème d’exportation"}},"importExportForm":{"exportButton":"Exporter","exportFormatPlaceholder":"Format","exportLayerPlaceholder":"Données géospatiales","exportTabTitle":"Exporter","importButton":"Importer","importProjPlaceholder":"Système de coordonnées","importTabTitle":"Importer"},"operators":{"And":"Et","Or":"Ou","PropertyIsEqualTo":"=","PropertyIsNotEqualTo":"!=","PropertyIsLike":"≈","PropertyIsGreaterThan":">","PropertyIsGreaterThanOrEqualTo":">=","PropertyIsLessThan":"<","PropertyIsLessThanOrEqualTo":"<=","PropertyIsBetween":"entre","During":"durant","PropertyIsNull":"est nul","Intersects":"intersecte","Within":"contenu dans","Contains":"contient"},"sourceFields":{"selectField":"Choisir un champ"},"filter":{"addFilter":"Ajouter un filtre vide à la liste courante","removeFilter":"Supprimer le présent filtre à la liste des filtres","toggleFilterState":"Activer/désactiver le présent filtre","refreshFilters":"Mettre à jour la source de donnée avec les filtres actifs de la liste. Pour activer ce boutton, la couche doit etre visible (et dans les échelles permises) ou veillez modifier le présent filtre.","layerFiltered":"Cette couche d'information est présentement filtrée.","layerFilterable":"Cette couche d'information est filtrable","filterBy":"Filtrer par","advancedOgcFilters":"Filtres avancés"},"spatialSelector":{"fixedExtent":"Étendue fixe","btnSetExtent":"Définir l'étendue du filtre selon l'étendue courante de la carte","snrc":"SNRC (ex:21L14)","selectFeature":"","drawFeature":""},"layer":{"hideLayer":"Masquer la couche","lowerLayer":"Mettre en arrière","loadingLegendText":"Chargement de la légende","noLegendText":"Aucune légende disponible pour cette couche","opacity":"Opacité","raiseLayer":"Mettre en avant","removeLayer":"Retirer la couche de la carte","showFeaturesList":"Afficher la liste des entités","showLayer":"Afficher la couche","subsetLayersListKeyword":"Limiter l'affichage de la liste selon le titre ou  par type (wms, wfs,...)","deleteKeyword":"Supprimer le mot-clé","subsetLayersListKeywordPlaceholder":"Filtre","subsetLayersListOnlyVisible":"Conserver que les couches qui sont visible","subsetLayersListOnlyInRange":"Conserver que les couches qui sont dans la plage de résolution active","sortAlphabetically":"Trier la liste des couches alphabétiquement.","sortMapOrder":"Replacer les couches selon l'ordre cartographique.","resetLayersList":"Supprimer le filtre appliqué à la liste"},"download":{"action":"Télécharger les données associées","title":"Téléchargement des données","start":"Vérifiez la progression du téléchargement dans votre navigateur","end":"Terminé"},"mapButtons":{"baselayerSwitcher":"Changer le fond de carte","geolocate":"Positionnement GPS","zoomIn":"Zoomer ({{zoom}})","zoomOut":"Dézoomer ({{zoom}})","resetRotation":"Réinitialiser la carte vers le nord","tipRotation":"Maintenez les touches Alt et Majuscule (shift) tout en cliquant sur la carte pour faire pivoter la carte"},"metadata":{"show":"Montrer les métadonnées"},"printForm":{"corsErrorMessageBody":"Impossible d'imprimer dû à des droits d'accès non détenus","corsErrorMessageHeader":"Impression","comment":"Commentaire","doZipFile":"Compresser le fichier","outputFormat":"Format de sortie","paperFormat":"Format du papier","paperFormats":{"A0":"A0","A1":"A1","A2":"A2","A3":"A3","A4":"A4","A5":"A5","Letter":"Lettre","Legal":"Légal"},"imageFormat":"Format de l'image","orientation":"Orientation","landscape":"Paysage","portrait":"Portrait","projection":"Projection","resolution":"Résolution","saveBtn":"Sauvegarder","scale":"Échelle","showLegend":"Afficher la légende","showProjection":"Afficher la projection","showScale":"Afficher l'échelle","title":"Titre"},"routingForm":{"start":"Début","intermediate":"Intermédiaire","end":"Fin","routingBtn":"Obtenir l'itinéraire","resetRoutingBtn":"Supprimer l'itinéraire","zoomRoute":"Zoomer sur l'itinéraire","null":"","directions":"Itinéraire","raiseStop":"Prioriser l'arrêt","lowerStop":"Reporter l'arrêt plus loin dans le parcours","addStop":"Ajouter un arrêt","removeStop":"Supprimer l'arrêt","drivingOptions":"Choix d'itinéraires","summary":"Résumé de l'itinéraire","stopsList":"Liste des lieux d'arrêts","instructions":"Indications","copy":"Copier l'itinéraire","geolocate":"Utiliser sa localisation comme point d'arrêt","link":"Lien","dialog":{"copyMsg":"Itinéraire copié dans le presse-papier","copyMsgLink":"Le lien de l'itinéraire est copié dans le presse-papier","copyTitle":"Itinéraire"}},"routing":{"uturn":"demi-tour","sharp right":"fortement à droite","right":"droite","slight right":"légèrement à droite","sharp left":"fortement à gauche","left":"gauche","slight left":"légèrement à gauche","straight":"tout droit"},"cardinalPoints":{"n":"nord","ne":"nord-est","e":"est","se":"sud-est","s":"sud","sw":"sud-ouest","w":"ouest","nw":"nord-ouest"},"search":{"dataSources":{"name":"Couches","properties":{"abstract":"Description","group":"Groupe","title":"Titre","type":"Type","url":"URL"}},"menu.tooltip":"Options de recherche","settings":{"title":"Paramètres"},"searchSources":{"settings":{"results type":"Type de résultat","trust level":"Niveau de confiance","results limit":"Limite","multiple object":"Objet multiple","country limitation":"Limitation (pays)"}}},"geometry":{"geometry":"Geometrie","point":"Point","line":"Ligne","polygon":"Surface"},"targetHtmlUrl":"Ouvrir le lien externe","timeFilter":{"date":"Date","endDate":"Date de fin","startDate":"Date de début"},"measure":{"dialog":{"title":"Sommes de la sélection","length.title":"Longueur","area.title":"Superficie","lengthInMeters":"Longueur en mètres","lengthInKilometers":"Longueur en kilomètres","lengthInMiles":"Longueur en miles","lengthInFeet":"Longueur en pieds","areaInSquareMeters":"Superficie en mètres²","areaInSquareKilometers":"Superficie en kilomètres²","areaInSquareMiles":"Superficie en miles²","areaInHectares":"Superficie en hectares","areaInAcres":"Superficie en acres","perimeterInMeters":"Périmètre en mètres"},"area":"Superficie","areaHeader":"Superficie","length":"Distance","lengthHeader":"Distance / Périmètre","perimeter":"Périmètre","meters":"Mètres","kilometers":"Kilomètres","miles":"Miles","feet":"Pieds","squareMeters":"Mètres²","squareKilometers":"Kilomètres²","squareMiles":"Miles²","squareFeet":"Pieds²","hectares":"Hectares","acres":"Acres","toggleMeasure":"Mesurage","toggleMapTooltips":"Mesures sur la carte","toggleAutoUnits":"Unités automatiques","actionbar":{"calculate.tooltip":"Calculer","delete.tooltip":"Supprimer","modify.tooltip":"Modifier"}},"workspace":{"ogcFilter.close":"Fermer","ogcFilter.title":"Filtres","ogcFilter.tooltip":"Appliquer des filtres sur la couche","wfsDownload.title":"Télécharger les données associées","wfsDownload.tooltip":"Télécharger les données associées"}},"integration":{"tools":{"catalog":"Catalogue","contexts":"Contextes","directions":"Itinéraire","importExport":"Importation et exportation","ogcFilter":"Filtrer par","map":"Carte","measurer":"Mesurage","print":"Imprimer","searchResults":"Résultats de recherche","shareMap":"Partager","timeAnalysis":"Analyse Temporelle","about":"À propos"}}},"search":{"feature.title":"Localisation","feature.placeholder":"Rechercher une localisation","layer.title":"Couche de données","layer.placeholder":"Rechercher une couche de données."}};

/***/ }),

/***/ "./dist/igo-lib/core/locale/fr.tools.json":
/*!************************************************!*\
  !*** ./dist/igo-lib/core/locale/fr.tools.json ***!
  \************************************************/
/*! exports provided: igo, default */
/***/ (function(module) {

module.exports = {"igo":{"integration":{"tools":{"catalog":"Catalogue","contexts":"Contextes","directions":"Itinéraire","importExport":"Importation et exportation","ogcFilter":"Filtrer par","map":"Carte","measurer":"Mesurage","print":"Imprimer","searchResults":"Résultats de recherche","shareMap":"Partager","timeAnalysis":"Analyse Temporelle","about":"À propos"}}}};

/***/ }),

/***/ "./dist/igo-lib/geo/fesm5/igo2-geo.js":
/*!********************************************!*\
  !*** ./dist/igo-lib/geo/fesm5/igo2-geo.js ***!
  \********************************************/
/*! exports provided: IgoGeoModule, IgoCatalogModule, IgoCatalogBrowserModule, IgoCatalogLibraryModule, IgoDataSourceModule, IgoDownloadModule, IgoGeoWorkspaceModule, IgoWorkspaceSelectorModule, IgoOgcFilterModule, IgoFeatureModule, IgoFeatureFormModule, IgoFeatureDetailsModule, IgoFilterModule, IgoGeometryModule, IgoGeometryFormFieldModule, IgoImportExportModule, IgoLayerModule, IgoMapModule, IgoMeasureModule, IgoMeasurerModule, IgoMetadataModule, IgoOverlayModule, IgoPrintModule, IgoQueryModule, IgoRoutingModule, IgoSearchModule, IgoSearchBarModule, IgoSearchResultsModule, IgoToastModule, IgoWktModule, querySearchSourceFactory, provideQuerySearchSource, defaultIChercheSearchResultFormatterFactory, provideDefaultIChercheSearchResultFormatter, ichercheSearchSourceFactory, provideIChercheSearchSource, ichercheReverseSearchSourceFactory, provideIChercheReverseSearchSource, defaultCoordinatesSearchResultFormatterFactory, provideDefaultCoordinatesSearchResultFormatter, CoordinatesReverseSearchSourceFactory, provideCoordinatesReverseSearchSource, ilayerSearchSourceFactory, provideILayerSearchSource, nominatimSearchSourceFactory, provideNominatimSearchSource, storedqueriesSearchSourceFactory, provideStoredQueriesSearchSource, storedqueriesReverseSearchSourceFactory, provideStoredQueriesReverseSearchSource, osrmRoutingSourcesFactory, provideOsrmRoutingSource, routingSourceServiceFactory, provideRoutingSourceService, RoutingSourceService, CatalogService, CatalogItemType, CatalogBrowserComponent, CatalogLibaryComponent, DataService, DataSource, FeatureDataSource, OSMDataSource, XYZDataSource, WFSDataSource, WFSService, WMSDataSource, formatWFSQueryString, checkWfsParams, defaultEpsg, defaultMaxFeatures, defaultWfsVersion, defaultFieldNameGeometry, gmlRegex, jsonRegex, WMTSDataSource, CartoDataSource, ArcGISRestDataSource, TileArcGISRestDataSource, WebSocketDataSource, MVTDataSource, ClusterDataSource, DataSourceService, CapabilitiesService, EsriStyleGenerator, generateIdFromSourceOptions, generateWMSIdFromSourceOptions, generateWMTSIdFromSourceOptions, generateXYZIdFromSourceOptions, generateFeatureIdFromSourceOptions, generateId, createDefaultTileGrid, DownloadService, DownloadButtonComponent, FEATURE, FeatureMotion, featureToOl, featureFromOl, computeOlFeatureExtent, computeOlFeaturesExtent, scaleExtent, featuresAreOutOfView, featuresAreTooDeepInView, moveToOlFeatures, hideOlFeature, tryBindStoreLayer, tryAddLoadingStrategy, tryAddSelectionStrategy, FeatureStore, FeatureStoreLoadingStrategy, FeatureStoreLoadingLayerStrategy, FeatureStoreSelectionStrategy, FeatureStoreStrategy, FilterableDataSourcePipe, TimeFilterService, OgcFilterOperatorType, OGCFilterService, OgcFilterWriter, TimeFilterFormComponent, TimeFilterItemComponent, TimeFilterListComponent, TimeFilterListBindingDirective, OgcFilterableFormComponent, OgcFilterableItemComponent, OgcFilterableListComponent, OgcFilterableListBindingDirective, OgcFilterFormComponent, OgcFilterToggleButtonComponent, OgcFilterButtonComponent, GeometrySliceError, GeometrySliceMultiPolygonError, GeometrySliceLineStringError, GeometrySliceTooManyIntersectionError, createDrawInteractionStyle, createDrawHoleInteractionStyle, sliceOlGeometry, sliceOlLineString, sliceOlPolygon, addLinearRingToOlPolygon, DrawControl, ModifyControl, SliceControl, DropGeoFileDirective, ExportError, ExportInvalidFileError, ExportNothingToExportError, ExportService, ExportFormat, exportToCSV, entitiesToRowData, downloadContent, handleFileExportError, handleNothingToExportError, ImportError, ImportInvalidFileError, ImportUnreadableFileError, ImportNothingToImportError, ImportService, addLayerAndFeaturesToMap, handleFileImportSuccess, handleFileImportError, handleNothingToImportError, getFileExtension, computeLayerTitleFromFile, ImportExportComponent, LayerService, LAYER, Layer, TooltipType, ImageLayer, TileLayer, VectorLayer, VectorTileLayer, StyleService, LayerItemComponent, LayerLegendComponent, LayerListComponent, LayerListBindingDirective, LayerListControlsEnum, LayerListService, ImageWatcher, TileWatcher, VectorWatcher, getLayersLegends, IgoMap, MapViewAction, MapService, stringToLonLat, viewStatesAreEqual, formatScale, getResolutionFromScale, getScaleFromResolution, ctrlKeyDown, MapOfflineDirective, ProjectionService, MapController, MapViewController, MapBrowserComponent, ZoomButtonComponent, GeolocateButtonComponent, BaseLayersSwitcherComponent, MiniBaseMapComponent, RotationButtonComponent, MEASURE_UNIT_AUTO, MeasureType, MeasureLengthUnit, MeasureLengthUnitAbbreviation, MeasureAreaUnit, MeasureAreaUnitAbbreviation, metersToKilometers, metersToFeet, metersToMiles, squareMetersToSquareKilometers, squareMetersToSquareMiles, squareMetersToSquareFeet, squareMetersToHectares, squareMetersToAcres, metersToUnit, squareMetersToUnit, formatMeasure, computeBestLengthUnit, computeBestAreaUnit, createMeasureInteractionStyle, createMeasureLayerStyle, measureOlGeometryLength, measureOlGeometryArea, measureOlGeometry, updateOlGeometryMidpoints, clearOlGeometryMidpoints, updateOlTooltipsAtMidpoints, getOlTooltipsAtMidpoints, updateOlGeometryCenter, updateOlTooltipAtCenter, getOlTooltipAtCenter, getTooltipsOfOlGeometry, createOlTooltipAtPoint, MeasurerComponent, MeasureFormatPipe, MetadataService, MetadataButtonComponent, Overlay, OverlayDirective, OverlayService, OverlayAction, createOverlayLayer, createOverlayMarkerStyle, PrintService, PrintOutputFormat, PrintPaperFormat, PrintOrientation, PrintResolution, PrintSaveImageFormat, PrintComponent, PrintFormComponent, QueryService, QueryDirective, QueryFormat, QueryHtmlTarget, layerIsQueryable, olLayerIsQueryable, QuerySearchSource, RoutingService, RoutingFormat, SourceRoutingType, RoutingSource, OsrmRoutingSource, RoutingFormComponent, RoutingFormBindingDirective, RoutingFormService, SEARCH_TYPES, SearchService, SearchSourceService, sourceCanSearch, sourceCanReverseSearch, featureToSearchResult, SearchSource, IChercheSearchResultFormatter, IChercheSearchSource, IChercheReverseSearchSource, ILayerSearchSource, NominatimSearchSource, StoredQueriesSearchSource, StoredQueriesReverseSearchSource, CoordinatesSearchResultFormatter, CoordinatesReverseSearchSource, ToastComponent, GoogleLinks, WktService, ɵj, ɵk, ɵc, ɵm, ɵl, ɵg, ɵf, ɵi, ɵh, ɵn, ɵo, ɵp, ɵq, ɵba, ɵy, ɵbb, ɵbd, ɵbe, ɵbg, ɵbf, ɵr, ɵbc, ɵu, ɵs, ɵt, ɵw, ɵv, ɵbi, ɵbh, ɵbj, ɵbm, ɵbl, ɵbk, ɵbo, ɵbp, ɵbs, ɵbq, ɵbr, ɵd, ɵe, ɵbx, ɵbw, ɵby, ɵbu, ɵbn, ɵbv, ɵx, ɵbz, ɵbt, ɵca, ɵcd, ɵcb, ɵcc, ɵa, ɵb, ɵcf, ɵcg, ɵcj, ɵch, ɵci, ɵco, ɵck, ɵcl, ɵcv, ɵcp, ɵcu, ɵdy, ɵcr, ɵcq, ɵda, ɵdb, ɵdd, ɵdc, ɵcx, ɵcw, ɵcz, ɵcy, ɵdf, ɵde, ɵct, ɵcs, ɵdk, ɵdj, ɵdi, ɵdg, ɵdh, ɵdt, ɵdv, ɵcm, ɵdx, ɵdw, ɵdl, ɵz, ɵdn, ɵdo, ɵdp, ɵdq, ɵdr, ɵds, ɵdm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoGeoModule", function() { return IgoGeoModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoCatalogModule", function() { return IgoCatalogModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoCatalogBrowserModule", function() { return IgoCatalogBrowserModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoCatalogLibraryModule", function() { return IgoCatalogLibraryModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoDataSourceModule", function() { return IgoDataSourceModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoDownloadModule", function() { return IgoDownloadModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoGeoWorkspaceModule", function() { return IgoGeoWorkspaceModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoWorkspaceSelectorModule", function() { return IgoWorkspaceSelectorModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoOgcFilterModule", function() { return IgoOgcFilterModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFeatureModule", function() { return IgoFeatureModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFeatureFormModule", function() { return IgoFeatureFormModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFeatureDetailsModule", function() { return IgoFeatureDetailsModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoFilterModule", function() { return IgoFilterModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoGeometryModule", function() { return IgoGeometryModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoGeometryFormFieldModule", function() { return IgoGeometryFormFieldModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoImportExportModule", function() { return IgoImportExportModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoLayerModule", function() { return IgoLayerModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoMapModule", function() { return IgoMapModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoMeasureModule", function() { return IgoMeasureModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoMeasurerModule", function() { return IgoMeasurerModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoMetadataModule", function() { return IgoMetadataModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoOverlayModule", function() { return IgoOverlayModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoPrintModule", function() { return IgoPrintModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoQueryModule", function() { return IgoQueryModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoRoutingModule", function() { return IgoRoutingModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoSearchModule", function() { return IgoSearchModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoSearchBarModule", function() { return IgoSearchBarModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoSearchResultsModule", function() { return IgoSearchResultsModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoToastModule", function() { return IgoToastModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoWktModule", function() { return IgoWktModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "querySearchSourceFactory", function() { return querySearchSourceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideQuerySearchSource", function() { return provideQuerySearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultIChercheSearchResultFormatterFactory", function() { return defaultIChercheSearchResultFormatterFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideDefaultIChercheSearchResultFormatter", function() { return provideDefaultIChercheSearchResultFormatter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ichercheSearchSourceFactory", function() { return ichercheSearchSourceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideIChercheSearchSource", function() { return provideIChercheSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ichercheReverseSearchSourceFactory", function() { return ichercheReverseSearchSourceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideIChercheReverseSearchSource", function() { return provideIChercheReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultCoordinatesSearchResultFormatterFactory", function() { return defaultCoordinatesSearchResultFormatterFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideDefaultCoordinatesSearchResultFormatter", function() { return provideDefaultCoordinatesSearchResultFormatter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoordinatesReverseSearchSourceFactory", function() { return CoordinatesReverseSearchSourceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideCoordinatesReverseSearchSource", function() { return provideCoordinatesReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ilayerSearchSourceFactory", function() { return ilayerSearchSourceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideILayerSearchSource", function() { return provideILayerSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nominatimSearchSourceFactory", function() { return nominatimSearchSourceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideNominatimSearchSource", function() { return provideNominatimSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storedqueriesSearchSourceFactory", function() { return storedqueriesSearchSourceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideStoredQueriesSearchSource", function() { return provideStoredQueriesSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storedqueriesReverseSearchSourceFactory", function() { return storedqueriesReverseSearchSourceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideStoredQueriesReverseSearchSource", function() { return provideStoredQueriesReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "osrmRoutingSourcesFactory", function() { return osrmRoutingSourcesFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideOsrmRoutingSource", function() { return provideOsrmRoutingSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "routingSourceServiceFactory", function() { return routingSourceServiceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "provideRoutingSourceService", function() { return provideRoutingSourceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoutingSourceService", function() { return RoutingSourceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogService", function() { return CatalogService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogItemType", function() { return CatalogItemType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogBrowserComponent", function() { return CatalogBrowserComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogLibaryComponent", function() { return CatalogLibaryComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataService", function() { return DataService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSource", function() { return DataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureDataSource", function() { return FeatureDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSMDataSource", function() { return OSMDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "XYZDataSource", function() { return XYZDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WFSDataSource", function() { return WFSDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WFSService", function() { return WFSService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WMSDataSource", function() { return WMSDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatWFSQueryString", function() { return formatWFSQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkWfsParams", function() { return checkWfsParams; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultEpsg", function() { return defaultEpsg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultMaxFeatures", function() { return defaultMaxFeatures; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultWfsVersion", function() { return defaultWfsVersion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultFieldNameGeometry", function() { return defaultFieldNameGeometry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gmlRegex", function() { return gmlRegex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "jsonRegex", function() { return jsonRegex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WMTSDataSource", function() { return WMTSDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CartoDataSource", function() { return CartoDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArcGISRestDataSource", function() { return ArcGISRestDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TileArcGISRestDataSource", function() { return TileArcGISRestDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebSocketDataSource", function() { return WebSocketDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MVTDataSource", function() { return MVTDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClusterDataSource", function() { return ClusterDataSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSourceService", function() { return DataSourceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CapabilitiesService", function() { return CapabilitiesService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EsriStyleGenerator", function() { return EsriStyleGenerator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateIdFromSourceOptions", function() { return generateIdFromSourceOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateWMSIdFromSourceOptions", function() { return generateWMSIdFromSourceOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateWMTSIdFromSourceOptions", function() { return generateWMTSIdFromSourceOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateXYZIdFromSourceOptions", function() { return generateXYZIdFromSourceOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateFeatureIdFromSourceOptions", function() { return generateFeatureIdFromSourceOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateId", function() { return generateId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createDefaultTileGrid", function() { return createDefaultTileGrid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DownloadService", function() { return DownloadService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DownloadButtonComponent", function() { return DownloadButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FEATURE", function() { return FEATURE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureMotion", function() { return FeatureMotion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "featureToOl", function() { return featureToOl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "featureFromOl", function() { return featureFromOl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeOlFeatureExtent", function() { return computeOlFeatureExtent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeOlFeaturesExtent", function() { return computeOlFeaturesExtent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scaleExtent", function() { return scaleExtent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "featuresAreOutOfView", function() { return featuresAreOutOfView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "featuresAreTooDeepInView", function() { return featuresAreTooDeepInView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "moveToOlFeatures", function() { return moveToOlFeatures; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hideOlFeature", function() { return hideOlFeature; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tryBindStoreLayer", function() { return tryBindStoreLayer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tryAddLoadingStrategy", function() { return tryAddLoadingStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tryAddSelectionStrategy", function() { return tryAddSelectionStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureStore", function() { return FeatureStore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureStoreLoadingStrategy", function() { return FeatureStoreLoadingStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureStoreLoadingLayerStrategy", function() { return FeatureStoreLoadingLayerStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureStoreSelectionStrategy", function() { return FeatureStoreSelectionStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureStoreStrategy", function() { return FeatureStoreStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterableDataSourcePipe", function() { return FilterableDataSourcePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeFilterService", function() { return TimeFilterService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterOperatorType", function() { return OgcFilterOperatorType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OGCFilterService", function() { return OGCFilterService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterWriter", function() { return OgcFilterWriter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeFilterFormComponent", function() { return TimeFilterFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeFilterItemComponent", function() { return TimeFilterItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeFilterListComponent", function() { return TimeFilterListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeFilterListBindingDirective", function() { return TimeFilterListBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterableFormComponent", function() { return OgcFilterableFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterableItemComponent", function() { return OgcFilterableItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterableListComponent", function() { return OgcFilterableListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterableListBindingDirective", function() { return OgcFilterableListBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterFormComponent", function() { return OgcFilterFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterToggleButtonComponent", function() { return OgcFilterToggleButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterButtonComponent", function() { return OgcFilterButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeometrySliceError", function() { return GeometrySliceError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeometrySliceMultiPolygonError", function() { return GeometrySliceMultiPolygonError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeometrySliceLineStringError", function() { return GeometrySliceLineStringError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeometrySliceTooManyIntersectionError", function() { return GeometrySliceTooManyIntersectionError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createDrawInteractionStyle", function() { return createDrawInteractionStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createDrawHoleInteractionStyle", function() { return createDrawHoleInteractionStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sliceOlGeometry", function() { return sliceOlGeometry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sliceOlLineString", function() { return sliceOlLineString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sliceOlPolygon", function() { return sliceOlPolygon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addLinearRingToOlPolygon", function() { return addLinearRingToOlPolygon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DrawControl", function() { return DrawControl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModifyControl", function() { return ModifyControl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SliceControl", function() { return SliceControl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DropGeoFileDirective", function() { return DropGeoFileDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExportError", function() { return ExportError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExportInvalidFileError", function() { return ExportInvalidFileError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExportNothingToExportError", function() { return ExportNothingToExportError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExportService", function() { return ExportService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExportFormat", function() { return ExportFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exportToCSV", function() { return exportToCSV; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "entitiesToRowData", function() { return entitiesToRowData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadContent", function() { return downloadContent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleFileExportError", function() { return handleFileExportError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleNothingToExportError", function() { return handleNothingToExportError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportError", function() { return ImportError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportInvalidFileError", function() { return ImportInvalidFileError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportUnreadableFileError", function() { return ImportUnreadableFileError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportNothingToImportError", function() { return ImportNothingToImportError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportService", function() { return ImportService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addLayerAndFeaturesToMap", function() { return addLayerAndFeaturesToMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleFileImportSuccess", function() { return handleFileImportSuccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleFileImportError", function() { return handleFileImportError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleNothingToImportError", function() { return handleNothingToImportError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFileExtension", function() { return getFileExtension; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeLayerTitleFromFile", function() { return computeLayerTitleFromFile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportExportComponent", function() { return ImportExportComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerService", function() { return LayerService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYER", function() { return LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Layer", function() { return Layer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TooltipType", function() { return TooltipType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageLayer", function() { return ImageLayer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TileLayer", function() { return TileLayer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VectorLayer", function() { return VectorLayer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VectorTileLayer", function() { return VectorTileLayer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleService", function() { return StyleService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerItemComponent", function() { return LayerItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerLegendComponent", function() { return LayerLegendComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerListComponent", function() { return LayerListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerListBindingDirective", function() { return LayerListBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerListControlsEnum", function() { return LayerListControlsEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerListService", function() { return LayerListService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageWatcher", function() { return ImageWatcher; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TileWatcher", function() { return TileWatcher; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VectorWatcher", function() { return VectorWatcher; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLayersLegends", function() { return getLayersLegends; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoMap", function() { return IgoMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapViewAction", function() { return MapViewAction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapService", function() { return MapService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringToLonLat", function() { return stringToLonLat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "viewStatesAreEqual", function() { return viewStatesAreEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatScale", function() { return formatScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getResolutionFromScale", function() { return getResolutionFromScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScaleFromResolution", function() { return getScaleFromResolution; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ctrlKeyDown", function() { return ctrlKeyDown; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapOfflineDirective", function() { return MapOfflineDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProjectionService", function() { return ProjectionService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapController", function() { return MapController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapViewController", function() { return MapViewController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapBrowserComponent", function() { return MapBrowserComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZoomButtonComponent", function() { return ZoomButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeolocateButtonComponent", function() { return GeolocateButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BaseLayersSwitcherComponent", function() { return BaseLayersSwitcherComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MiniBaseMapComponent", function() { return MiniBaseMapComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RotationButtonComponent", function() { return RotationButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEASURE_UNIT_AUTO", function() { return MEASURE_UNIT_AUTO; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasureType", function() { return MeasureType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasureLengthUnit", function() { return MeasureLengthUnit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasureLengthUnitAbbreviation", function() { return MeasureLengthUnitAbbreviation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasureAreaUnit", function() { return MeasureAreaUnit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasureAreaUnitAbbreviation", function() { return MeasureAreaUnitAbbreviation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metersToKilometers", function() { return metersToKilometers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metersToFeet", function() { return metersToFeet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metersToMiles", function() { return metersToMiles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squareMetersToSquareKilometers", function() { return squareMetersToSquareKilometers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squareMetersToSquareMiles", function() { return squareMetersToSquareMiles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squareMetersToSquareFeet", function() { return squareMetersToSquareFeet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squareMetersToHectares", function() { return squareMetersToHectares; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squareMetersToAcres", function() { return squareMetersToAcres; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metersToUnit", function() { return metersToUnit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squareMetersToUnit", function() { return squareMetersToUnit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatMeasure", function() { return formatMeasure; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeBestLengthUnit", function() { return computeBestLengthUnit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeBestAreaUnit", function() { return computeBestAreaUnit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMeasureInteractionStyle", function() { return createMeasureInteractionStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMeasureLayerStyle", function() { return createMeasureLayerStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "measureOlGeometryLength", function() { return measureOlGeometryLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "measureOlGeometryArea", function() { return measureOlGeometryArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "measureOlGeometry", function() { return measureOlGeometry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateOlGeometryMidpoints", function() { return updateOlGeometryMidpoints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearOlGeometryMidpoints", function() { return clearOlGeometryMidpoints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateOlTooltipsAtMidpoints", function() { return updateOlTooltipsAtMidpoints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOlTooltipsAtMidpoints", function() { return getOlTooltipsAtMidpoints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateOlGeometryCenter", function() { return updateOlGeometryCenter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateOlTooltipAtCenter", function() { return updateOlTooltipAtCenter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOlTooltipAtCenter", function() { return getOlTooltipAtCenter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTooltipsOfOlGeometry", function() { return getTooltipsOfOlGeometry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createOlTooltipAtPoint", function() { return createOlTooltipAtPoint; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasurerComponent", function() { return MeasurerComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasureFormatPipe", function() { return MeasureFormatPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MetadataService", function() { return MetadataService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MetadataButtonComponent", function() { return MetadataButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Overlay", function() { return Overlay; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OverlayDirective", function() { return OverlayDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OverlayService", function() { return OverlayService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OverlayAction", function() { return OverlayAction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createOverlayLayer", function() { return createOverlayLayer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createOverlayMarkerStyle", function() { return createOverlayMarkerStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintService", function() { return PrintService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintOutputFormat", function() { return PrintOutputFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintPaperFormat", function() { return PrintPaperFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintOrientation", function() { return PrintOrientation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintResolution", function() { return PrintResolution; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintSaveImageFormat", function() { return PrintSaveImageFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintComponent", function() { return PrintComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintFormComponent", function() { return PrintFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryService", function() { return QueryService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryDirective", function() { return QueryDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryFormat", function() { return QueryFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryHtmlTarget", function() { return QueryHtmlTarget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "layerIsQueryable", function() { return layerIsQueryable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "olLayerIsQueryable", function() { return olLayerIsQueryable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QuerySearchSource", function() { return QuerySearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoutingService", function() { return RoutingService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoutingFormat", function() { return RoutingFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SourceRoutingType", function() { return SourceRoutingType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoutingSource", function() { return RoutingSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OsrmRoutingSource", function() { return OsrmRoutingSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoutingFormComponent", function() { return RoutingFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoutingFormBindingDirective", function() { return RoutingFormBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoutingFormService", function() { return RoutingFormService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEARCH_TYPES", function() { return SEARCH_TYPES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchService", function() { return SearchService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchSourceService", function() { return SearchSourceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sourceCanSearch", function() { return sourceCanSearch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sourceCanReverseSearch", function() { return sourceCanReverseSearch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "featureToSearchResult", function() { return featureToSearchResult; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchSource", function() { return SearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IChercheSearchResultFormatter", function() { return IChercheSearchResultFormatter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IChercheSearchSource", function() { return IChercheSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IChercheReverseSearchSource", function() { return IChercheReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ILayerSearchSource", function() { return ILayerSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NominatimSearchSource", function() { return NominatimSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StoredQueriesSearchSource", function() { return StoredQueriesSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StoredQueriesReverseSearchSource", function() { return StoredQueriesReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoordinatesSearchResultFormatter", function() { return CoordinatesSearchResultFormatter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoordinatesReverseSearchSource", function() { return CoordinatesReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToastComponent", function() { return ToastComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleLinks", function() { return GoogleLinks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WktService", function() { return WktService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵj", function() { return CatalogBrowserGroupComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵk", function() { return CatalogBrowserLayerComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵc", function() { return CatalogBrowserComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵm", function() { return CatalogLibaryItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵl", function() { return CatalogLibaryComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵg", function() { return CapabilitiesService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵf", function() { return DataSourceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵi", function() { return DataService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵh", function() { return WFSService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵn", function() { return DownloadButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵo", function() { return DownloadService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵp", function() { return FeatureDetailsComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵq", function() { return FeatureFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵba", function() { return OgcFilterButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵy", function() { return OgcFilterFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbb", function() { return OgcFilterToggleButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbd", function() { return OgcFilterableFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbe", function() { return OgcFilterableItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbg", function() { return OgcFilterableListBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbf", function() { return OgcFilterableListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵr", function() { return FilterableDataSourcePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbc", function() { return OGCFilterService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵu", function() { return TimeFilterService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵs", function() { return TimeFilterFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵt", function() { return TimeFilterItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵw", function() { return TimeFilterListBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵv", function() { return TimeFilterListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbi", function() { return GeometryFormFieldInputComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbh", function() { return GeometryFormFieldComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbj", function() { return ImportExportComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbm", function() { return DropGeoFileDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbl", function() { return ExportService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbk", function() { return ImportService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbo", function() { return LayerItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbp", function() { return LayerLegendComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbs", function() { return LayerListBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbq", function() { return LayerListComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbr", function() { return LayerListService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵd", function() { return LayerService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵe", function() { return StyleService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbx", function() { return baseLayersSwitcherSlideInOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbw", function() { return BaseLayersSwitcherComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵby", function() { return MiniBaseMapComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbu", function() { return GeolocateButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbn", function() { return MapBrowserComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbv", function() { return RotationButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵx", function() { return MapService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbz", function() { return MapOfflineDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵbt", function() { return ZoomButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵca", function() { return MeasureFormatPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcd", function() { return MeasurerDialogComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcb", function() { return MeasurerItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcc", function() { return MeasurerComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵa", function() { return MetadataButtonComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵb", function() { return MetadataService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcf", function() { return OverlayDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcg", function() { return OverlayService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcj", function() { return PrintFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵch", function() { return PrintComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵci", function() { return PrintService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵco", function() { return QuerySearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵck", function() { return QueryDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcl", function() { return QueryService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcv", function() { return RoutingFormBindingDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcp", function() { return RoutingFormComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcu", function() { return RoutingFormService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdy", function() { return OsrmRoutingSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcr", function() { return RoutingSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcq", function() { return RoutingService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵda", function() { return SearchBarComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdb", function() { return SearchUrlParamDirective; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdd", function() { return SearchResultsItemComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdc", function() { return SearchResultsComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcx", function() { return SearchSelectorComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcw", function() { return IgoSearchSelectorModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcz", function() { return SearchSettingsComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcy", function() { return IgoSearchSettingsModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdf", function() { return provideSearchSourceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵde", function() { return searchSourceServiceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵct", function() { return SearchSourceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcs", function() { return SearchService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdk", function() { return CoordinatesReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdj", function() { return CoordinatesSearchResultFormatter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdi", function() { return IChercheReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdg", function() { return IChercheSearchResultFormatter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdh", function() { return IChercheSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdt", function() { return ILayerSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdv", function() { return NominatimSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵcm", function() { return SearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdx", function() { return StoredQueriesReverseSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdw", function() { return StoredQueriesSearchSource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdl", function() { return ToastComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵz", function() { return WktService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdn", function() { return WfsWorkspaceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdo", function() { return WmsWorkspaceService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdp", function() { return OgcFilterComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdq", function() { return OgcFilterWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdr", function() { return ogcFilterWidgetFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵds", function() { return provideOgcFilterWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵdm", function() { return WorkspaceSelectorDirective; });
/* harmony import */ var ol_source_OSM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/source/OSM */ "./node_modules/ol/source/OSM.js");
/* harmony import */ var ol_source_XYZ__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/source/XYZ */ "./node_modules/ol/source/XYZ.js");
/* harmony import */ var ol_format_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/format/filter */ "./node_modules/ol/format/filter.js");
/* harmony import */ var ol_format_WFS__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/format/WFS */ "./node_modules/ol/format/WFS.js");
/* harmony import */ var ol_source_ImageWMS__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/source/ImageWMS */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_WMTS__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/source/WMTS */ "./node_modules/ol/source/WMTS.js");
/* harmony import */ var ol_tilegrid_WMTS__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/tilegrid/WMTS */ "./node_modules/ol/tilegrid/WMTS.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_source_CartoDB__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/CartoDB */ "./node_modules/ol/source/CartoDB.js");
/* harmony import */ var ol_loadingstrategy__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/loadingstrategy */ "./node_modules/ol/loadingstrategy.js");
/* harmony import */ var ol_source_TileArcGISRest__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/source/TileArcGISRest */ "./node_modules/ol/source/TileArcGISRest.js");
/* harmony import */ var ts_md5__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ts-md5 */ "./node_modules/ts-md5/dist/md5.js");
/* harmony import */ var ts_md5__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(ts_md5__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var ol_source_VectorTile__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/source/VectorTile */ "./node_modules/ol/source/VectorTile.js");
/* harmony import */ var ol_format_MVT__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/format/MVT */ "./node_modules/ol/format/MVT.js");
/* harmony import */ var ol_source_Cluster__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/source/Cluster */ "./node_modules/ol/source/Cluster.js");
/* harmony import */ var ngx_cacheable__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ngx-cacheable */ "./node_modules/ngx-cacheable/dist/index.js");
/* harmony import */ var ngx_cacheable__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(ngx_cacheable__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var ol_Map__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/Map */ "./node_modules/ol/Map.js");
/* harmony import */ var ol_View__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/View */ "./node_modules/ol/View.js");
/* harmony import */ var ol_Geolocation__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/Geolocation */ "./node_modules/ol/Geolocation.js");
/* harmony import */ var ol_control_Attribution__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ol/control/Attribution */ "./node_modules/ol/control/Attribution.js");
/* harmony import */ var ol_control_ScaleLine__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ol/control/ScaleLine */ "./node_modules/ol/control/ScaleLine.js");
/* harmony import */ var ol_layer_Image__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ol/layer/Image */ "./node_modules/ol/layer/Image.js");
/* harmony import */ var ol_layer_Tile__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ol/layer/Tile */ "./node_modules/ol/layer/Tile.js");
/* harmony import */ var ol_color__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ol/color */ "./node_modules/ol/color.js");
/* harmony import */ var ol_layer_VectorTile__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ol/layer/VectorTile */ "./node_modules/ol/layer/VectorTile.js");
/* harmony import */ var ol_easing__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ol/easing */ "./node_modules/ol/easing.js");
/* harmony import */ var ol_has__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ol/has */ "./node_modules/ol/has.js");
/* harmony import */ var proj4__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! proj4 */ "./node_modules/proj4/lib/index.js");
/* harmony import */ var ol_proj_proj4__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ol/proj/proj4 */ "./node_modules/ol/proj/proj4.js");
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @angular/animations */ "./node_modules/@angular/animations/fesm5/animations.js");
/* harmony import */ var ol_format_GML2__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ol/format/GML2 */ "./node_modules/ol/format/GML2.js");
/* harmony import */ var ol_format_GML3__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ol/format/GML3 */ "./node_modules/ol/format/GML3.js");
/* harmony import */ var ol_format_EsriJSON__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ol/format/EsriJSON */ "./node_modules/ol/format/EsriJSON.js");
/* harmony import */ var ol_proj_Projection__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ol/proj/Projection */ "./node_modules/ol/proj/Projection.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_35__);
/* harmony import */ var ol_format_WKT__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ol/format/WKT */ "./node_modules/ol/format/WKT.js");
/* harmony import */ var ol_geom_GeometryType__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ol/geom/GeometryType */ "./node_modules/ol/geom/GeometryType.js");
/* harmony import */ var ol_geom_Point__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ol/geom/Point */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_Overlay__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ol/Overlay */ "./node_modules/ol/Overlay.js");
/* harmony import */ var ol_sphere__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ol/sphere */ "./node_modules/ol/sphere.js");
/* harmony import */ var ol_style_Style__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ol/style/Style */ "./node_modules/ol/style/Style.js");
/* harmony import */ var ol_geom_LineString__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ol/geom/LineString */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var _turf_line_intersect__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @turf/line-intersect */ "./node_modules/@turf/line-intersect/index.js");
/* harmony import */ var _turf_line_intersect__WEBPACK_IMPORTED_MODULE_43___default = /*#__PURE__*/__webpack_require__.n(_turf_line_intersect__WEBPACK_IMPORTED_MODULE_43__);
/* harmony import */ var _turf_helpers__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @turf/helpers */ "./node_modules/@turf/helpers/index.js");
/* harmony import */ var _turf_helpers__WEBPACK_IMPORTED_MODULE_44___default = /*#__PURE__*/__webpack_require__.n(_turf_helpers__WEBPACK_IMPORTED_MODULE_44__);
/* harmony import */ var ol_interaction_Modify__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ol/interaction/Modify */ "./node_modules/ol/interaction/Modify.js");
/* harmony import */ var ol_interaction_Translate__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ol/interaction/Translate */ "./node_modules/ol/interaction/Translate.js");
/* harmony import */ var ol_interaction_Draw__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ol/interaction/Draw */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_geom_Polygon__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ol/geom/Polygon */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_geom_LinearRing__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ol/geom/LinearRing */ "./node_modules/ol/geom/LinearRing.js");
/* harmony import */ var ol_interaction_DragBox__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ol/interaction/DragBox */ "./node_modules/ol/interaction/DragBox.js");
/* harmony import */ var ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ol/source/Vector */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_layer_Vector__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ol/layer/Vector */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! file-saver */ "./node_modules/file-saver/FileSaver.js");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_53___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_53__);
/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! jspdf */ "./node_modules/jspdf/dist/jspdf.min.js");
/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_54___default = /*#__PURE__*/__webpack_require__.n(jspdf__WEBPACK_IMPORTED_MODULE_54__);
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! html2canvas */ "./node_modules/html2canvas/dist/npm/index.js");
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_55___default = /*#__PURE__*/__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_55__);
/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! jszip */ "./node_modules/jszip/lib/index.js");
/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_56___default = /*#__PURE__*/__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_56__);
/* harmony import */ var ol_Feature__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ol/Feature */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_geom__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ol/geom */ "./node_modules/ol/geom.js");
/* harmony import */ var ol_proj__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ol/proj */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_style__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ol/style */ "./node_modules/ol/style.js");
/* harmony import */ var ol_events_condition__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ol/events/condition */ "./node_modules/ol/events/condition.js");
/* harmony import */ var ol_interaction__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ol/interaction */ "./node_modules/ol/interaction.js");
/* harmony import */ var ol_Observable__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ol/Observable */ "./node_modules/ol/Observable.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ol/format/GeoJSON */ "./node_modules/ol/format/GeoJSON.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var ol_format__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ol/format */ "./node_modules/ol/format.js");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _igo2_utils__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! @igo2/utils */ "./dist/igo-lib/utils/fesm5/igo2-utils.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");


















































































/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @abstract
 */
var  /**
 * @abstract
 */
Layer = /** @class */ (function () {
    function Layer(options) {
        this.options = options;
        this.dataSource = this.options.source;
        this.ol = this.createOlLayer();
        if (this.options.zIndex !== undefined) {
            this.zIndex = this.options.zIndex;
        }
        if (this.options.baseLayer && this.options.visible === undefined) {
            this.options.visible = false;
        }
        this.visible =
            this.options.visible === undefined ? true : this.options.visible;
        this.opacity =
            this.options.opacity === undefined ? 1 : this.options.opacity;
        this.ol.set('_layer', this, true);
    }
    Object.defineProperty(Layer.prototype, "id", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.id || this.dataSource.id;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Layer.prototype, "alias", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.alias;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Layer.prototype, "title", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.title;
        },
        set: /**
         * @param {?} title
         * @return {?}
         */
        function (title) {
            this.options.title = title;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Layer.prototype, "zIndex", {
        get: /**
         * @return {?}
         */
        function () {
            return this.ol.getZIndex();
        },
        set: /**
         * @param {?} zIndex
         * @return {?}
         */
        function (zIndex) {
            this.ol.setZIndex(zIndex);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Layer.prototype, "baseLayer", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.baseLayer;
        },
        set: /**
         * @param {?} baseLayer
         * @return {?}
         */
        function (baseLayer) {
            this.options.baseLayer = baseLayer;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Layer.prototype, "visible", {
        get: /**
         * @return {?}
         */
        function () {
            return this.ol.get('visible');
        },
        set: /**
         * @param {?} visibility
         * @return {?}
         */
        function (visibility) {
            this.ol.setVisible(visibility);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Layer.prototype, "opacity", {
        get: /**
         * @return {?}
         */
        function () {
            return this.ol.get('opacity');
        },
        set: /**
         * @param {?} opacity
         * @return {?}
         */
        function (opacity) {
            this.ol.setOpacity(opacity);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Layer.prototype, "isInResolutionsRange", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.map) {
                return false;
            }
            /** @type {?} */
            var resolution = this.map.viewController.getResolution();
            /** @type {?} */
            var minResolution = this.ol.getMinResolution();
            /** @type {?} */
            var maxResolution = this.ol.getMaxResolution();
            return resolution >= minResolution && resolution <= maxResolution;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Layer.prototype, "showInLayerList", {
        get: /**
         * @return {?}
         */
        function () { return this.options.showInLayerList !== false; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} map
     * @return {?}
     */
    Layer.prototype.setMap = /**
     * @param {?} map
     * @return {?}
     */
    function (map$$1) {
        this.map = map$$1;
    };
    return Layer;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MetadataService = /** @class */ (function () {
    function MetadataService() {
    }
    /**
     * @param {?} metadata
     * @return {?}
     */
    MetadataService.prototype.open = /**
     * @param {?} metadata
     * @return {?}
     */
    function (metadata) {
        if (metadata.extern) {
            window.open(metadata.url, '_blank');
        }
    };
    MetadataService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    MetadataService.ctorParameters = function () { return []; };
    /** @nocollapse */ MetadataService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function MetadataService_Factory() { return new MetadataService(); }, token: MetadataService, providedIn: "root" });
    return MetadataService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MetadataButtonComponent = /** @class */ (function () {
    function MetadataButtonComponent(metadataService) {
        this.metadataService = metadataService;
        this._color = 'primary';
    }
    Object.defineProperty(MetadataButtonComponent.prototype, "layer", {
        get: /**
         * @return {?}
         */
        function () {
            return this._layer;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._layer = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MetadataButtonComponent.prototype, "color", {
        get: /**
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._color = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} metadata
     * @return {?}
     */
    MetadataButtonComponent.prototype.openMetadata = /**
     * @param {?} metadata
     * @return {?}
     */
    function (metadata) {
        this.metadataService.open(metadata);
    };
    Object.defineProperty(MetadataButtonComponent.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.layer) {
                return;
            }
            return this.layer.options;
        },
        enumerable: true,
        configurable: true
    });
    MetadataButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-metadata-button',
                    template: "<button\r\n  *ngIf=\"options && options.metadata && options.metadata.url\"\r\n  mat-icon-button\r\n  tooltip-position=\"below\"\r\n  matTooltipShowDelay=\"500\"\r\n  [matTooltip]=\"'igo.geo.metadata.show' | translate\"\r\n  [color]=\"color\"\r\n  (click)=\"openMetadata(options.metadata)\">\r\n  <mat-icon svgIcon=\"information-outline\"></mat-icon>\r\n</button>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    MetadataButtonComponent.ctorParameters = function () { return [
        { type: MetadataService }
    ]; };
    MetadataButtonComponent.propDecorators = {
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return MetadataButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoMetadataModule = /** @class */ (function () {
    function IgoMetadataModule() {
    }
    /**
     * @return {?}
     */
    IgoMetadataModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoMetadataModule,
            providers: []
        };
    };
    IgoMetadataModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"]
                    ],
                    exports: [MetadataButtonComponent],
                    declarations: [MetadataButtonComponent]
                },] }
    ];
    return IgoMetadataModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @abstract
 */
var  /**
 * @abstract
 */
DataService = /** @class */ (function () {
    function DataService() {
    }
    return DataService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Generate a id from it's datasource options.
 * @param {?} options Data source options
 * @return {?} A id
 */
function generateIdFromSourceOptions(options) {
    /** @type {?} */
    var generators = {
        wms: generateWMSIdFromSourceOptions,
        wmts: generateWMTSIdFromSourceOptions,
        xyz: generateXYZIdFromSourceOptions,
        feature: generateFeatureIdFromSourceOptions,
        osm: (/**
         * @param {?} _options
         * @return {?}
         */
        function (_options) { return 'OSM'; })
    };
    /** @type {?} */
    var generator = generators[options.type] || generateId;
    return generator(options);
}
/**
 * Generate a id from WMS data source options
 * @param {?} options WMS data source options
 * @return {?} A md5 hash of the the url and layers
 */
function generateWMSIdFromSourceOptions(options) {
    /** @type {?} */
    var layers = options.params.layers;
    /** @type {?} */
    var chain = 'wms' + options.url + layers;
    return (/** @type {?} */ (ts_md5__WEBPACK_IMPORTED_MODULE_11__["Md5"].hashStr(chain)));
}
/**
 * Generate a id from WMTS data source options
 * @param {?} options WMTS data source options
 * @return {?} A md5 hash of the the url and layer
 */
function generateWMTSIdFromSourceOptions(options) {
    /** @type {?} */
    var layer = options.layer;
    /** @type {?} */
    var chain = 'wmts' + options.url + layer;
    return (/** @type {?} */ (ts_md5__WEBPACK_IMPORTED_MODULE_11__["Md5"].hashStr(chain)));
}
/**
 * Generate a id from XYZ data source options
 * @param {?} options XYZ data source options
 * @return {?} A md5 hash of the the url and layer
 */
function generateXYZIdFromSourceOptions(options) {
    /** @type {?} */
    var chain = 'xyz' + options.url;
    return (/** @type {?} */ (ts_md5__WEBPACK_IMPORTED_MODULE_11__["Md5"].hashStr(chain)));
}
/**
 * Generate a id from feature data source options
 * @param {?} options XYZ data source options
 * @return {?} A md5 hash of the the url and layer
 */
function generateFeatureIdFromSourceOptions(options) {
    if (!options.url) {
        return generateId(options);
    }
    /** @type {?} */
    var chain = 'feature' + options.url;
    return (/** @type {?} */ (ts_md5__WEBPACK_IMPORTED_MODULE_11__["Md5"].hashStr(chain)));
}
/**
 * Generate a unique id
 * @param {?} options
 * @return {?} A uuid
 */
function generateId(options) {
    return Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @abstract
 */
var  /**
 * @abstract
 */
DataSource = /** @class */ (function () {
    function DataSource(options, dataService) {
        if (options === void 0) { options = {}; }
        this.options = options;
        this.dataService = dataService;
        this.options = options;
        this.id = this.generateId();
        this.ol = this.createOlSource();
    }
    /**
     * @protected
     * @return {?}
     */
    DataSource.prototype.generateId = /**
     * @protected
     * @return {?}
     */
    function () {
        return generateIdFromSourceOptions(this.options);
    };
    /**
     * @param {?=} scale
     * @return {?}
     */
    DataSource.prototype.getLegend = /**
     * @param {?=} scale
     * @return {?}
     */
    function (scale) {
        return this.options.legend ? [this.options.legend] : [];
    };
    return DataSource;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var FeatureDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(FeatureDataSource, _super);
    function FeatureDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    FeatureDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var sourceOptions = {
            format: this.getSourceFormatFromOptions(this.options)
        };
        return new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"](Object.assign(sourceOptions, this.options));
    };
    /**
     * @protected
     * @param {?} options
     * @return {?}
     */
    FeatureDataSource.prototype.getSourceFormatFromOptions = /**
     * @protected
     * @param {?} options
     * @return {?}
     */
    function (options) {
        if (options.format) {
            return options.format;
        }
        /** @type {?} */
        var olFormatCls;
        /** @type {?} */
        var formatType = options.formatType;
        if (!formatType) {
            olFormatCls = ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"];
        }
        else {
            olFormatCls = ol_format__WEBPACK_IMPORTED_MODULE_70__[formatType];
            if (olFormatCls === undefined) {
                throw new Error('Invalid vector source format ${formatType}.');
            }
        }
        /** @type {?} */
        var formatOptions = options.formatOptions;
        /** @type {?} */
        var format;
        if (formatOptions) {
            format = new olFormatCls(formatOptions);
        }
        else {
            format = new olFormatCls();
        }
        return format;
    };
    /**
     * @return {?}
     */
    FeatureDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return FeatureDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OSMDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(OSMDataSource, _super);
    function OSMDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    OSMDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        this.options.url = 'https://tile.openstreetmap.org/{z}/{x}/{y}.png';
        return new ol_source_OSM__WEBPACK_IMPORTED_MODULE_0__["default"](this.options);
    };
    /**
     * @return {?}
     */
    OSMDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return OSMDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var XYZDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(XYZDataSource, _super);
    function XYZDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    XYZDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        return new ol_source_XYZ__WEBPACK_IMPORTED_MODULE_1__["default"](this.options);
    };
    /**
     * @return {?}
     */
    XYZDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return XYZDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterWriter = /** @class */ (function () {
    function OgcFilterWriter() {
        this.filterSequence = [];
        this.operators = {
            PropertyIsEqualTo: { spatial: false, fieldRestrict: [] },
            PropertyIsNotEqualTo: { spatial: false, fieldRestrict: [] },
            PropertyIsLike: { spatial: false, fieldRestrict: ['string'] },
            PropertyIsGreaterThan: { spatial: false, fieldRestrict: ['number'] },
            PropertyIsGreaterThanOrEqualTo: { spatial: false, fieldRestrict: ['number'] },
            PropertyIsLessThan: { spatial: false, fieldRestrict: ['number'] },
            PropertyIsLessThanOrEqualTo: { spatial: false, fieldRestrict: ['number'] },
            PropertyIsBetween: { spatial: false, fieldRestrict: ['number'] },
            During: { spatial: false, fieldRestrict: [] },
            PropertyIsNull: { spatial: false, fieldRestrict: [] },
            Intersects: { spatial: true, fieldRestrict: [] },
            Within: { spatial: true, fieldRestrict: [] },
            Contains: { spatial: true, fieldRestrict: [] }
        };
    }
    /**
     * @param {?} ogcFiltersOptions
     * @param {?} fieldNameGeometry
     * @param {?=} srcType
     * @return {?}
     */
    OgcFilterWriter.prototype.defineOgcFiltersDefaultOptions = /**
     * @param {?} ogcFiltersOptions
     * @param {?} fieldNameGeometry
     * @param {?=} srcType
     * @return {?}
     */
    function (ogcFiltersOptions, fieldNameGeometry, srcType) {
        /** @type {?} */
        var ogcFiltersDefaultValue = true;
        if (srcType && srcType === 'wms') {
            ogcFiltersDefaultValue = false;
        }
        ogcFiltersOptions = ogcFiltersOptions || {};
        ogcFiltersOptions.enabled = ogcFiltersOptions.enabled === undefined ? ogcFiltersDefaultValue : ogcFiltersOptions.enabled;
        ogcFiltersOptions.editable = ogcFiltersOptions.editable === undefined ? ogcFiltersDefaultValue : ogcFiltersOptions.editable;
        ogcFiltersOptions.geometryName = fieldNameGeometry;
        ogcFiltersOptions.advancedOgcFilters = true;
        if (ogcFiltersOptions.enabled && ogcFiltersOptions.pushButtons) {
            ogcFiltersOptions.advancedOgcFilters = false;
        }
        return ogcFiltersOptions;
    };
    /**
     * @param {?=} filters
     * @param {?=} extent
     * @param {?=} proj
     * @param {?=} fieldNameGeometry
     * @return {?}
     */
    OgcFilterWriter.prototype.buildFilter = /**
     * @param {?=} filters
     * @param {?=} extent
     * @param {?=} proj
     * @param {?=} fieldNameGeometry
     * @return {?}
     */
    function (filters, extent, proj, fieldNameGeometry) {
        /** @type {?} */
        var ourBboxFilter;
        /** @type {?} */
        var enableBbox;
        if (/intersects|contains|within/gi.test(JSON.stringify(filters))) {
            enableBbox = false;
        }
        else {
            enableBbox = true;
        }
        if (filters) {
            fieldNameGeometry =
                ((/** @type {?} */ (filters))).geometryName !== undefined
                    ? ((/** @type {?} */ (filters))).geometryName
                    : fieldNameGeometry;
        }
        if (extent && filters) {
            ourBboxFilter = Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["bbox"])(fieldNameGeometry, extent, proj.getCode());
        }
        /** @type {?} */
        var filterAssembly;
        if (filters) {
            filters = this.checkIgoFiltersProperties(filters, fieldNameGeometry);
            if (extent && enableBbox) {
                filterAssembly = Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["and"])(ourBboxFilter, this.bundleFilter(filters));
            }
            else {
                filterAssembly = this.bundleFilter(filters);
            }
        }
        else {
            return 'bbox=' + extent.join(',') + ',' + proj.getCode();
        }
        /** @type {?} */
        var wfsOptions = {
            srsName: '',
            featureNS: '',
            featurePrefix: '',
            featureTypes: ['featureTypes'],
            filter: filterAssembly,
            outputFormat: '',
            geometryName: fieldNameGeometry
        };
        /** @type {?} */
        var query = new ol_format_WFS__WEBPACK_IMPORTED_MODULE_3__["default"]().writeGetFeature(wfsOptions);
        /** @type {?} */
        var str = new XMLSerializer().serializeToString(query);
        /** @type {?} */
        var regexp1 = /typenames *=|typename *=\"featureTypes\" *>/gi;
        /** @type {?} */
        var regexp2 = /<\/Query><\/GetFeature>/gi;
        return 'filter=' + str.split(regexp1)[1].split(regexp2)[0];
    };
    /**
     * @private
     * @param {?} filterObject
     * @return {?}
     */
    OgcFilterWriter.prototype.bundleFilter = /**
     * @private
     * @param {?} filterObject
     * @return {?}
     */
    function (filterObject) {
        var _this = this;
        if (filterObject instanceof Array) {
            /** @type {?} */
            var logicalArray_1 = [];
            filterObject.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                logicalArray_1.push(_this.bundleFilter(element));
            }));
            return logicalArray_1;
        }
        else {
            if (filterObject.hasOwnProperty('logical')) {
                return this.createFilter({
                    operator: filterObject.logical,
                    logicalArray: this.bundleFilter(filterObject.filters)
                });
            }
            else if (filterObject.hasOwnProperty('operator')) {
                return this.createFilter((/** @type {?} */ (filterObject)));
            }
        }
    };
    /**
     * @private
     * @param {?} filterOptions
     * @return {?}
     */
    OgcFilterWriter.prototype.createFilter = /**
     * @private
     * @param {?} filterOptions
     * @return {?}
     */
    function (filterOptions) {
        /** @type {?} */
        var operator = filterOptions.operator;
        /** @type {?} */
        var logicalArray = filterOptions.logicalArray;
        /** @type {?} */
        var wfsPropertyName = filterOptions.propertyName;
        /** @type {?} */
        var wfsPattern = filterOptions.pattern;
        /** @type {?} */
        var wfsMatchCase = filterOptions.matchCase
            ? filterOptions.matchCase
            : true;
        /** @type {?} */
        var wfsWildCard = filterOptions.wildCard ? filterOptions.wildCard : '*';
        /** @type {?} */
        var wfsSingleChar = filterOptions.singleChar
            ? filterOptions.singleChar
            : '.';
        /** @type {?} */
        var wfsEscapeChar = filterOptions.escapeChar
            ? filterOptions.escapeChar
            : '!';
        /** @type {?} */
        var wfsLowerBoundary = filterOptions.lowerBoundary;
        /** @type {?} */
        var wfsUpperBoundary = filterOptions.upperBoundary;
        /** @type {?} */
        var wfsGeometryName = filterOptions.geometryName;
        /** @type {?} */
        var wfsExtent = filterOptions.extent;
        /** @type {?} */
        var wfsWktGeometry = filterOptions.wkt_geometry;
        /** @type {?} */
        var wfsSrsName = filterOptions.srsName
            ? filterOptions.srsName
            : 'EPSG:3857';
        /** @type {?} */
        var wfsBegin = filterOptions.begin;
        /** @type {?} */
        var wfsEnd = filterOptions.end;
        /** @type {?} */
        var wfsExpression = filterOptions.expression;
        /** @type {?} */
        var geometry;
        if (wfsWktGeometry) {
            /** @type {?} */
            var wkt = new ol_format_WKT__WEBPACK_IMPORTED_MODULE_36__["default"]();
            geometry = wkt.readGeometry(wfsWktGeometry, {
                dataProjection: wfsSrsName,
                featureProjection: 'EPSG:3857'
            });
        }
        switch (operator) {
            case 'BBOX':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["bbox"])(wfsGeometryName, wfsExtent, wfsSrsName);
            case 'PropertyIsBetween':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["between"])(wfsPropertyName, wfsLowerBoundary, wfsUpperBoundary);
            case 'Contains':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["contains"])(wfsGeometryName, geometry, wfsSrsName);
            case 'During':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["during"])(wfsPropertyName, wfsBegin, wfsEnd);
            case 'PropertyIsEqualTo':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["equalTo"])(wfsPropertyName, wfsExpression, wfsMatchCase);
            case 'PropertyIsGreaterThan':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["greaterThan"])(wfsPropertyName, wfsExpression);
            case 'PropertyIsGreaterThanOrEqualTo':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["greaterThanOrEqualTo"])(wfsPropertyName, wfsExpression);
            case 'Intersects':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["intersects"])(wfsGeometryName, geometry, wfsSrsName);
            case 'PropertyIsNull':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["isNull"])(wfsPropertyName);
            case 'PropertyIsLessThan':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["lessThan"])(wfsPropertyName, wfsExpression);
            case 'PropertyIsLessThanOrEqualTo':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["lessThanOrEqualTo"])(wfsPropertyName, wfsExpression);
            case 'PropertyIsLike':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["like"])(wfsPropertyName, wfsPattern.replace(/[()_]/gi, wfsSingleChar), wfsWildCard, wfsSingleChar, wfsEscapeChar, wfsMatchCase);
            case 'PropertyIsNotEqualTo':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["notEqualTo"])(wfsPropertyName, wfsExpression, wfsMatchCase);
            case 'Within':
                return Object(ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["within"])(wfsGeometryName, geometry, wfsSrsName);
            // LOGICAL
            case 'And':
                return ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["and"].apply(null, logicalArray);
            case 'Or':
                return ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["or"].apply(null, logicalArray);
            case 'Not':
                return ol_format_filter__WEBPACK_IMPORTED_MODULE_2__["not"].apply(null, logicalArray);
            default:
                return undefined;
        }
    };
    /**
     * @param {?} filterObject
     * @param {?} geometryName
     * @param {?=} logical
     * @param {?=} level
     * @return {?}
     */
    OgcFilterWriter.prototype.defineInterfaceFilterSequence = /**
     * @param {?} filterObject
     * @param {?} geometryName
     * @param {?=} logical
     * @param {?=} level
     * @return {?}
     */
    function (filterObject, geometryName, logical, level) {
        var _this = this;
        if (logical === void 0) { logical = ''; }
        if (level === void 0) { level = -1; }
        if (filterObject instanceof Array) {
            filterObject.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                _this.filterSequence.concat(_this.defineInterfaceFilterSequence(element, geometryName, logical, level));
            }));
        }
        else {
            if (filterObject.hasOwnProperty('logical')) {
                level = level + 1;
                this.filterSequence.concat(this.defineInterfaceFilterSequence(filterObject.filters, geometryName, filterObject.logical, level));
            }
            else if (filterObject.hasOwnProperty('operator')) {
                this.filterSequence.push(this.addInterfaceFilter(filterObject, geometryName, level, logical));
            }
        }
        return this.filterSequence;
    };
    /**
     * @param {?=} igoOgcFilterObject
     * @param {?=} geometryName
     * @param {?=} level
     * @param {?=} parentLogical
     * @return {?}
     */
    OgcFilterWriter.prototype.addInterfaceFilter = /**
     * @param {?=} igoOgcFilterObject
     * @param {?=} geometryName
     * @param {?=} level
     * @param {?=} parentLogical
     * @return {?}
     */
    function (igoOgcFilterObject, geometryName, level, parentLogical) {
        if (level === void 0) { level = 0; }
        if (parentLogical === void 0) { parentLogical = 'Or'; }
        if (!igoOgcFilterObject) {
            igoOgcFilterObject = { operator: 'PropertyIsEqualTo' };
        }
        /** @type {?} */
        var f = {
            propertyName: '',
            operator: '',
            active: '',
            filterid: Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])(),
            begin: '',
            end: '',
            lowerBoundary: '',
            upperBoundary: '',
            expression: '',
            pattern: '',
            wildCard: '*',
            singleChar: '.',
            escapeChar: '!',
            matchCase: true,
            igoSpatialSelector: '',
            geometryName: '',
            geometry: '',
            wkt_geometry: '',
            extent: '',
            srsName: '',
            parentLogical: '',
            level: 0
        };
        return Object.assign(f, {
            parentLogical: parentLogical,
            level: level,
            geometryName: geometryName
        }, igoOgcFilterObject);
    };
    /**
     * @param {?} filterObject
     * @param {?} fieldNameGeometry
     * @param {?=} active
     * @return {?}
     */
    OgcFilterWriter.prototype.checkIgoFiltersProperties = /**
     * @param {?} filterObject
     * @param {?} fieldNameGeometry
     * @param {?=} active
     * @return {?}
     */
    function (filterObject, fieldNameGeometry, active) {
        var _this = this;
        if (active === void 0) { active = false; }
        /** @type {?} */
        var filterArray = [];
        if (filterObject instanceof Array) {
            filterObject.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                filterArray.push(_this.checkIgoFiltersProperties(element, fieldNameGeometry, active));
            }));
            return filterArray;
        }
        else {
            if (filterObject.hasOwnProperty('logical')) {
                return Object.assign({}, {
                    logical: filterObject.logical,
                    filters: this.checkIgoFiltersProperties(filterObject.filters, fieldNameGeometry, active)
                });
            }
            else if (filterObject.hasOwnProperty('operator')) {
                return this.addFilterProperties((/** @type {?} */ (filterObject)), fieldNameGeometry, active);
            }
        }
    };
    /**
     * @private
     * @param {?} igoOgcFilterObject
     * @param {?} fieldNameGeometry
     * @param {?=} active
     * @return {?}
     */
    OgcFilterWriter.prototype.addFilterProperties = /**
     * @private
     * @param {?} igoOgcFilterObject
     * @param {?} fieldNameGeometry
     * @param {?=} active
     * @return {?}
     */
    function (igoOgcFilterObject, fieldNameGeometry, active) {
        if (active === void 0) { active = false; }
        /** @type {?} */
        var filterid = igoOgcFilterObject.hasOwnProperty('filterid')
            ? igoOgcFilterObject.filterid
            : Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
        /** @type {?} */
        var status = igoOgcFilterObject.hasOwnProperty('active')
            ? igoOgcFilterObject.active
            : active;
        return Object.assign({}, {
            filterid: filterid,
            active: status,
            igoSpatialSelector: 'fixedExtent'
        }, igoOgcFilterObject, { geometryName: fieldNameGeometry });
    };
    /**
     * @param {?} sequence
     * @return {?}
     */
    OgcFilterWriter.prototype.rebuiltIgoOgcFilterObjectFromSequence = /**
     * @param {?} sequence
     * @return {?}
     */
    function (sequence) {
        if (sequence instanceof Array) {
            if (sequence.length >= 1) {
                /** @type {?} */
                var lastParentLogical_1 = sequence[0].parentLogical;
                /** @type {?} */
                var nextElement_1;
                /** @type {?} */
                var logicalArray_2 = [];
                /** @type {?} */
                var lastProcessedFilter_1;
                sequence.forEach((/**
                 * @param {?} uiFilter
                 * @return {?}
                 */
                function (uiFilter) {
                    /** @type {?} */
                    var element = Object.assign({}, uiFilter);
                    /** @type {?} */
                    var index = sequence.indexOf(uiFilter);
                    if (index >= 0 && index < sequence.length - 1) {
                        nextElement_1 = sequence[index + 1];
                    }
                    else {
                        nextElement_1 = element;
                    }
                    delete element.active;
                    delete element.filterid;
                    delete element.parentLogical;
                    logicalArray_2.push(element);
                    if (sequence.length === 1) {
                        lastProcessedFilter_1 = element;
                    }
                    else if (lastParentLogical_1 !== nextElement_1.parentLogical) {
                        if (logicalArray_2.length === 1) {
                            console.log('You must set at ' +
                                'least two operator in a logical (' +
                                lastParentLogical_1 +
                                ')');
                        }
                        else {
                            lastProcessedFilter_1 = Object.assign({}, { logical: lastParentLogical_1, filters: logicalArray_2 });
                            logicalArray_2 = [lastProcessedFilter_1];
                            lastParentLogical_1 = nextElement_1.parentLogical;
                        }
                    }
                }));
                return lastProcessedFilter_1;
            }
            else {
                return undefined;
            }
        }
        else {
            return undefined;
        }
    };
    /**
     * @param {?} options
     * @param {?} fieldNameGeometry
     * @return {?}
     */
    OgcFilterWriter.prototype.handleOgcFiltersAppliedValue = /**
     * @param {?} options
     * @param {?} fieldNameGeometry
     * @return {?}
     */
    function (options, fieldNameGeometry) {
        /** @type {?} */
        var ogcFilters = options.ogcFilters;
        if (!ogcFilters) {
            return;
        }
        /** @type {?} */
        var filterQueryStringPushButton = '';
        /** @type {?} */
        var filterQueryStringAdvancedFilters = '';
        if (ogcFilters.enabled && ogcFilters.pushButtons) {
            /** @type {?} */
            var pushButtonBundle = ogcFilters.pushButtons;
            /** @type {?} */
            var conditions_1 = [];
            pushButtonBundle.map((/**
             * @param {?} buttonBundle
             * @return {?}
             */
            function (buttonBundle) {
                /** @type {?} */
                var bundleCondition = [];
                buttonBundle.ogcPushButtons
                    .filter((/**
                 * @param {?} ogcpb
                 * @return {?}
                 */
                function (ogcpb) { return ogcpb.enabled === true; }))
                    .forEach((/**
                 * @param {?} enabledPb
                 * @return {?}
                 */
                function (enabledPb) { return bundleCondition.push(enabledPb.filters); }));
                if (bundleCondition.length === 1) {
                    conditions_1.push(bundleCondition[0]);
                }
                else if (bundleCondition.length > 1) {
                    conditions_1.push({ logical: buttonBundle.logical, filters: bundleCondition });
                }
            }));
            if (conditions_1.length >= 1) {
                filterQueryStringPushButton = this.buildFilter(conditions_1.length === 1 ? conditions_1[0] : { logical: 'And', filters: conditions_1 });
            }
        }
        if (ogcFilters.enabled && ogcFilters.filters) {
            ogcFilters.geometryName = ogcFilters.geometryName || fieldNameGeometry;
            /** @type {?} */
            var igoFilters = ogcFilters.filters;
            filterQueryStringAdvancedFilters = this.buildFilter(igoFilters);
        }
        /** @type {?} */
        var filterQueryString = ogcFilters.advancedOgcFilters ? filterQueryStringAdvancedFilters : filterQueryStringPushButton;
        if (options.type === 'wms') {
            filterQueryString = this.formatProcessedOgcFilter(filterQueryString, ((/** @type {?} */ (options))).params.layers);
        }
        if (options.type === 'wfs') {
            filterQueryString = this.formatProcessedOgcFilter(filterQueryString, ((/** @type {?} */ (options))).params.featureTypes);
        }
        return filterQueryString;
    };
    /**
     * @param {?} processedFilter
     * @param {?} layersOrTypenames
     * @return {?}
     */
    OgcFilterWriter.prototype.formatProcessedOgcFilter = /**
     * @param {?} processedFilter
     * @param {?} layersOrTypenames
     * @return {?}
     */
    function (processedFilter, layersOrTypenames) {
        /** @type {?} */
        var appliedFilter = '';
        if (processedFilter.length === 0 && layersOrTypenames.indexOf(',') === -1) {
            appliedFilter = processedFilter;
        }
        else {
            layersOrTypenames.split(',').forEach((/**
             * @param {?} layerOrTypenames
             * @return {?}
             */
            function (layerOrTypenames) {
                appliedFilter = appliedFilter + "(" + processedFilter.replace('filter=', '') + ")";
            }));
        }
        /** @type {?} */
        var filterValue = appliedFilter.length > 0 ? appliedFilter.replace('filter=', '') : undefined;
        return filterValue;
    };
    return OgcFilterWriter;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var defaultEpsg = 'EPSG:3857';
/** @type {?} */
var defaultMaxFeatures = 5000;
/** @type {?} */
var defaultWfsVersion = '2.0.0';
/** @type {?} */
var defaultFieldNameGeometry = 'geometry';
/** @type {?} */
var gmlRegex = new RegExp(/.*?gml.*?/gi);
/** @type {?} */
var jsonRegex = new RegExp(/.*?json.*?/gi);
/**
 * This method build/standardize WFS call query params based on the layer property.
 * @param {?} wfsDataSourceOptions  WFSDataSourceOptions The common wfs datasource options interface
 * @param {?=} count  Number: Used to control the number of feature. Used to bypass whe wfs datasource options interface (maxFeatures)
 * @param {?=} epsg  String: Used to control the EPSG code (es: 'EPSG3857'). Used to bypass whe wfs datasource options interface (srsName)
 * @param {?=} properties  String: Used to control the queried fields  (WFS service).
 * @return {?} An array array of {name: '', value: ''} of predefined query params.
 */
function formatWFSQueryString(wfsDataSourceOptions, count, epsg, properties) {
    /** @type {?} */
    var versionWfs200 = '2.0.0';
    // not the same usage as defaultWfsVersion.
    /** @type {?} */
    var url = wfsDataSourceOptions.urlWfs;
    /** @type {?} */
    var paramsWFS = wfsDataSourceOptions.paramsWFS;
    /** @type {?} */
    var effectiveCount = count || defaultMaxFeatures;
    /** @type {?} */
    var epsgCode = epsg || defaultEpsg;
    /** @type {?} */
    var outputFormat = paramsWFS.outputFormat ? "outputFormat=" + paramsWFS.outputFormat : '';
    /** @type {?} */
    var version = paramsWFS.version ? "version=" + paramsWFS.version : "version=" + defaultWfsVersion;
    /** @type {?} */
    var paramTypename = paramsWFS.version === versionWfs200 ? 'typenames' : 'typename';
    /** @type {?} */
    var featureTypes = paramTypename + "=" + paramsWFS.featureTypes;
    /** @type {?} */
    var paramMaxFeatures = paramsWFS.version === versionWfs200 ? 'count' : 'maxFeatures';
    /** @type {?} */
    var cnt = count ? paramMaxFeatures + "=" + effectiveCount :
        paramsWFS.maxFeatures ? paramMaxFeatures + "=" + paramsWFS.maxFeatures : paramMaxFeatures + "=" + effectiveCount;
    /** @type {?} */
    var srs = epsg ? "srsname=" + epsgCode : paramsWFS.srsName ? 'srsname=' + paramsWFS.srsName : "srsname=" + epsgCode;
    /** @type {?} */
    var propertyName = '';
    /** @type {?} */
    var valueReference = '';
    if (properties) {
        propertyName = "propertyName=" + properties;
        valueReference = "valueReference=" + properties;
    }
    /** @type {?} */
    var sourceFields = wfsDataSourceOptions.sourceFields;
    if (!propertyName && sourceFields && sourceFields.length > 0) {
        /** @type {?} */
        var fieldsNames_1 = [];
        wfsDataSourceOptions.sourceFields.forEach((/**
         * @param {?} sourcefield
         * @return {?}
         */
        function (sourcefield) {
            fieldsNames_1.push(sourcefield.name);
        }));
        propertyName = "propertyName=" + fieldsNames_1.join(',') + "," + paramsWFS.fieldNameGeometry;
    }
    /** @type {?} */
    var getCapabilities = url + "?service=wfs&request=GetCapabilities&" + version;
    /** @type {?} */
    var getFeature = url + "?service=wfs&request=GetFeature&" + version + "&" + featureTypes + "&";
    getFeature += outputFormat + "&" + srs + "&" + cnt + "&" + propertyName;
    /** @type {?} */
    var getpropertyvalue = url + "?service=wfs&request=GetPropertyValue&version=" + versionWfs200 + "&" + featureTypes + "&";
    getpropertyvalue += "&" + cnt + "&" + valueReference;
    return [
        { name: 'outputformat', value: outputFormat },
        { name: 'version', value: version },
        { name: 'typename', value: featureTypes },
        { name: 'count', value: cnt },
        { name: 'srsname', value: srs },
        { name: 'propertyname', value: propertyName },
        { name: 'valuereference', value: valueReference },
        { name: 'getcapabilities', value: getCapabilities.replace(/&&/g, '&') },
        { name: 'getfeature', value: getFeature.replace(/&&/g, '&') },
        { name: 'getpropertyvalue', value: getpropertyvalue.replace(/&&/g, '&') }
    ];
}
/**
 * Validate/Modify layer's wfs options based on :
 * 1- an Openlayers's issue with GML provided from WFS. Refer to
 * https://github.com/openlayers/openlayers/pull/6400
 * 2- Set default values for optionals parameters.
 * @param {?} wfsDataSourceOptions  WFSDataSourceOptions The common wfs datasource options interface
 * @param {?=} srcType
 * @return {?} An array array of {name: '', value: ''} of predefined query params.
 */
function checkWfsParams(wfsDataSourceOptions, srcType) {
    if (srcType && srcType === 'wfs') {
        // reassignation of params to paramsWFS and url to urlWFS to have a common interface with wms-wfs datasources
        wfsDataSourceOptions.paramsWFS = wfsDataSourceOptions.params;
    }
    /** @type {?} */
    var paramsWFS = wfsDataSourceOptions.paramsWFS;
    wfsDataSourceOptions.urlWfs = wfsDataSourceOptions.urlWfs || wfsDataSourceOptions.url;
    paramsWFS.version = paramsWFS.version || defaultWfsVersion;
    paramsWFS.fieldNameGeometry = paramsWFS.fieldNameGeometry || defaultFieldNameGeometry;
    paramsWFS.maxFeatures = paramsWFS.maxFeatures || defaultMaxFeatures;
    /** @type {?} */
    var outputFormat;
    if (paramsWFS.outputFormat) {
        outputFormat = paramsWFS.outputFormat;
    }
    if (gmlRegex.test(outputFormat) || !outputFormat) {
        paramsWFS.version = '1.1.0';
    }
    return Object.assign({}, wfsDataSourceOptions);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WFSDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(WFSDataSource, _super);
    function WFSDataSource(options, wfsService) {
        var _this = _super.call(this, checkWfsParams(options, 'wfs')) || this;
        _this.options = options;
        _this.wfsService = wfsService;
        /** @type {?} */
        var ogcFilters = ((/** @type {?} */ (_this.options))).ogcFilters;
        /** @type {?} */
        var fieldNameGeometry = _this.options.paramsWFS.fieldNameGeometry || defaultFieldNameGeometry;
        /** @type {?} */
        var ogcFilterWriter = new OgcFilterWriter();
        ((/** @type {?} */ (_this.options))).ogcFilters =
            ogcFilterWriter.defineOgcFiltersDefaultOptions(ogcFilters, fieldNameGeometry);
        if (((/** @type {?} */ (_this.options))).ogcFilters.enabled) {
            _this.wfsService.getSourceFieldsFromWFS(_this.options);
        }
        return _this;
    }
    /**
     * @protected
     * @return {?}
     */
    WFSDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        return new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"]({
            format: this.getFormatFromOptions(),
            overlaps: false,
            url: (/**
             * @param {?} extent
             * @param {?} resolution
             * @param {?} proj
             * @return {?}
             */
            function (extent, resolution, proj) {
                return _this.buildUrl(extent, proj, ((/** @type {?} */ (_this.options))).ogcFilters);
            }),
            strategy: ol_loadingstrategy__WEBPACK_IMPORTED_MODULE_9__["bbox"]
        });
    };
    /**
     * @private
     * @param {?} extent
     * @param {?} proj
     * @param {?} ogcFilters
     * @return {?}
     */
    WFSDataSource.prototype.buildUrl = /**
     * @private
     * @param {?} extent
     * @param {?} proj
     * @param {?} ogcFilters
     * @return {?}
     */
    function (extent, proj, ogcFilters) {
        /** @type {?} */
        var paramsWFS = this.options.paramsWFS;
        /** @type {?} */
        var queryStringValues = formatWFSQueryString(this.options, undefined, proj.getCode());
        /** @type {?} */
        var igoFilters;
        if (ogcFilters && ogcFilters.enabled) {
            igoFilters = ogcFilters.filters;
        }
        /** @type {?} */
        var ogcFilterWriter = new OgcFilterWriter();
        /** @type {?} */
        var filterOrBox = ogcFilterWriter.buildFilter(igoFilters, extent, proj, ogcFilters.geometryName);
        /** @type {?} */
        var filterOrPush = ogcFilterWriter.handleOgcFiltersAppliedValue(this.options, ogcFilters.geometryName);
        /** @type {?} */
        var prefix = 'filter';
        if (!filterOrPush) {
            prefix = 'bbox';
            filterOrPush = extent.join(',') + ',' + proj.getCode();
        }
        paramsWFS.xmlFilter = ogcFilters.advancedOgcFilters ? filterOrBox : prefix + "=" + filterOrPush;
        /** @type {?} */
        var baseUrl = queryStringValues.find((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.name === 'getfeature'; })).value;
        /** @type {?} */
        var patternFilter = /(filter|bbox)=.*/gi;
        baseUrl = patternFilter.test(paramsWFS.xmlFilter) ? baseUrl + "&" + paramsWFS.xmlFilter : baseUrl;
        this.options.download = Object.assign({}, this.options.download, { dynamicUrl: baseUrl });
        return baseUrl.replace(/&&/g, '&');
    };
    /**
     * @private
     * @return {?}
     */
    WFSDataSource.prototype.getFormatFromOptions = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var olFormatCls;
        /** @type {?} */
        var outputFormat;
        if (this.options.paramsWFS.outputFormat) {
            outputFormat = this.options.paramsWFS.outputFormat.toLowerCase();
        }
        if (jsonRegex.test(outputFormat)) {
            olFormatCls = ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"];
        }
        if (gmlRegex.test(outputFormat) || !outputFormat) {
            olFormatCls = ol_format__WEBPACK_IMPORTED_MODULE_70__["WFS"];
        }
        return new olFormatCls();
    };
    /**
     * @return {?}
     */
    WFSDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return WFSDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WFSService = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(WFSService, _super);
    function WFSService(http) {
        var _this = _super.call(this) || this;
        _this.http = http;
        return _this;
    }
    /**
     * @return {?}
     */
    WFSService.prototype.getData = /**
     * @return {?}
     */
    function () {
        console.log('This is defining a data service.');
        return 'This is defining a data service.';
    };
    /**
     * @param {?} datasource
     * @return {?}
     */
    WFSService.prototype.getSourceFieldsFromWFS = /**
     * @param {?} datasource
     * @return {?}
     */
    function (datasource) {
        if (!datasource.sourceFields || datasource.sourceFields.length === 0) {
            datasource.sourceFields = [];
            this.defineFieldAndValuefromWFS(datasource).subscribe((/**
             * @param {?} getfeatureSourceField
             * @return {?}
             */
            function (getfeatureSourceField) {
                datasource.sourceFields = getfeatureSourceField;
            }));
        }
        else {
            this.defineFieldAndValuefromWFS(datasource).subscribe((/**
             * @param {?} getfeatureSourceField
             * @return {?}
             */
            function (getfeatureSourceField) {
                datasource.sourceFields.forEach((/**
                 * @param {?} sourcefield
                 * @return {?}
                 */
                function (sourcefield) {
                    if (sourcefield.alias === undefined) {
                        sourcefield.alias = sourcefield.name; // to allow only a list of sourcefield with names
                    }
                    if (sourcefield.values === undefined || sourcefield.values.length === 0) {
                        sourcefield.values = getfeatureSourceField.find((/**
                         * @param {?} sf
                         * @return {?}
                         */
                        function (sf) { return sf.name === sourcefield.name; })).values;
                    }
                }));
            }));
        }
    };
    /**
     * @private
     * @param {?} wfsDataSourceOptions
     * @param {?=} nb
     * @param {?=} epsgCode
     * @param {?=} propertyName
     * @return {?}
     */
    WFSService.prototype.wfsGetFeature = /**
     * @private
     * @param {?} wfsDataSourceOptions
     * @param {?=} nb
     * @param {?=} epsgCode
     * @param {?=} propertyName
     * @return {?}
     */
    function (wfsDataSourceOptions, nb, epsgCode, propertyName) {
        if (nb === void 0) { nb = defaultMaxFeatures; }
        if (epsgCode === void 0) { epsgCode = defaultEpsg; }
        /** @type {?} */
        var queryStringValues = formatWFSQueryString(wfsDataSourceOptions, nb, epsgCode, propertyName);
        /** @type {?} */
        var baseUrl = queryStringValues.find((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.name === 'getfeature'; })).value;
        /** @type {?} */
        var outputFormat = wfsDataSourceOptions.paramsWFS.outputFormat;
        if (gmlRegex.test(outputFormat) || !outputFormat) {
            return this.http.get(baseUrl, { responseType: 'text' });
        }
        else {
            return this.http.get(baseUrl);
        }
    };
    /**
     * @param {?} wfsDataSourceOptions
     * @return {?}
     */
    WFSService.prototype.defineFieldAndValuefromWFS = /**
     * @param {?} wfsDataSourceOptions
     * @return {?}
     */
    function (wfsDataSourceOptions) {
        var _this = this;
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            /** @type {?} */
            var sourceFields = [];
            /** @type {?} */
            var fieldList;
            /** @type {?} */
            var fieldListWoGeom;
            /** @type {?} */
            var fieldListWoGeomStr;
            /** @type {?} */
            var olFormats;
            /** @type {?} */
            var outputFormat = wfsDataSourceOptions.paramsWFS.outputFormat;
            if (gmlRegex.test(outputFormat) || !outputFormat) {
                olFormats = ol_format__WEBPACK_IMPORTED_MODULE_70__["WFS"];
            }
            else {
                olFormats = ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"];
            }
            _this.wfsGetFeature(wfsDataSourceOptions, 1).subscribe((/**
             * @param {?} oneFeature
             * @return {?}
             */
            function (oneFeature) {
                /** @type {?} */
                var features = new olFormats().readFeatures(oneFeature);
                fieldList = features[0].getKeys();
                fieldListWoGeom = fieldList.filter((/**
                 * @param {?} field
                 * @return {?}
                 */
                function (field) {
                    return field !== features[0].getGeometryName() &&
                        !field.match(/boundedby/gi);
                }));
                fieldListWoGeomStr = fieldListWoGeom.join(',');
                _this.wfsGetFeature(wfsDataSourceOptions, wfsDataSourceOptions.paramsWFS.maxFeatures || defaultMaxFeatures, undefined, fieldListWoGeomStr).subscribe((/**
                 * @param {?} manyFeatures
                 * @return {?}
                 */
                function (manyFeatures) {
                    /** @type {?} */
                    var mfeatures = new olFormats().readFeatures(manyFeatures);
                    _this.built_properties_value(mfeatures).forEach((/**
                     * @param {?} element
                     * @return {?}
                     */
                    function (element) {
                        sourceFields.push(element);
                    }));
                    d.next(sourceFields);
                    d.complete();
                }));
            }));
        }));
    };
    /**
     * @private
     * @param {?} features
     * @return {?}
     */
    WFSService.prototype.built_properties_value = /**
     * @private
     * @param {?} features
     * @return {?}
     */
    function (features) {
        /** @type {?} */
        var kv = Object.assign({}, features[0].getProperties());
        delete kv[features[0].getGeometryName()];
        delete kv.boundedBy;
        /** @type {?} */
        var sourceFields = [];
        for (var property in kv) {
            if (kv.hasOwnProperty(property)) {
                /** @type {?} */
                var fieldType = typeof features[0].get(property) === 'object'
                    ? undefined
                    : typeof features[0].get(property);
                sourceFields.push({
                    name: property,
                    alias: property,
                    type: fieldType,
                    values: [kv[property]]
                });
            }
        }
        features.every((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            /** @type {?} */
            var featureProperties = element.getProperties();
            var _loop_1 = function (key) {
                if (featureProperties.hasOwnProperty(key) && key in kv) {
                    sourceFields.filter((/**
                     * @param {?} f
                     * @return {?}
                     */
                    function (f) { return f.name === key; })).forEach((/**
                     * @param {?} v
                     * @return {?}
                     */
                    function (v) {
                        if (v.values.indexOf(featureProperties[key]) === -1) {
                            v.values.push(featureProperties[key]);
                        }
                    }));
                }
            };
            for (var key in featureProperties) {
                _loop_1(key);
            }
            return true;
        }));
        return sourceFields;
    };
    WFSService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    WFSService.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] }
    ]; };
    /** @nocollapse */ WFSService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function WFSService_Factory() { return new WFSService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"])); }, token: WFSService, providedIn: "root" });
    return WFSService;
}(DataService));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var QueryFormat = {
    GML2: 'gml2',
    GML3: 'gml3',
    JSON: 'json',
    GEOJSON: 'geojson',
    ESRIJSON: 'esrijson',
    TEXT: 'text',
    HTML: 'html',
    HTMLGML2: 'htmlgml2',
};
/** @enum {string} */
var QueryHtmlTarget = {
    IFRAME: 'iframe',
    BLANK: '_blank',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WMSDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(WMSDataSource, _super);
    function WMSDataSource(options, wfsService) {
        var _this = _super.call(this, options) || this;
        _this.options = options;
        _this.wfsService = wfsService;
        // Important: To use wms versions smaller than 1.3.0, SRS
        // needs to be supplied in the source "params"
        // We need to do this to override the default version
        // of openlayers which is uppercase
        /** @type {?} */
        var sourceParams = options.params;
        if (sourceParams && sourceParams.version) {
            sourceParams.VERSION = sourceParams.version;
        }
        if (sourceParams && sourceParams.VERSION) {
            if (sourceParams.version !== '1.3.0') {
                if (!sourceParams.SRS && !sourceParams.srs) {
                    throw new Error("You must set a SRS (or srs) param for your WMS\n           (layer =  " + sourceParams.layers + ") because your want to use a WMS version under 1.3.0\n        Ex: \"srs\": \"EPSG:3857\" ");
                }
            }
        }
        if (sourceParams && sourceParams.INFO_FORMAT) {
            sourceParams.info_format = sourceParams.INFO_FORMAT;
        }
        if (options.refreshIntervalSec && options.refreshIntervalSec > 0) {
            setInterval((/**
             * @return {?}
             */
            function () {
                _this.refresh();
            }), options.refreshIntervalSec * 1000); // Convert seconds to MS
        }
        /** @type {?} */
        var fieldNameGeometry = defaultFieldNameGeometry;
        // ####   START if paramsWFS
        if (options.paramsWFS) {
            /** @type {?} */
            var wfsCheckup = checkWfsParams(options, 'wms');
            _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].mergeDeep(options.paramsWFS, wfsCheckup.paramsWFS);
            fieldNameGeometry = options.paramsWFS.fieldNameGeometry || fieldNameGeometry;
            options.download = Object.assign({}, options.download, {
                dynamicUrl: _this.buildDynamicDownloadUrlFromParamsWFS(options)
            });
        } //  ####   END  if paramsWFS
        if (!options.sourceFields || options.sourceFields.length === 0) {
            options.sourceFields = [];
        }
        else {
            options.sourceFields.forEach((/**
             * @param {?} sourceField
             * @return {?}
             */
            function (sourceField) {
                sourceField.alias = sourceField.alias ? sourceField.alias : sourceField.name;
                // to allow only a list of sourcefield with names
            }));
        }
        /** @type {?} */
        var initOgcFilters = ((/** @type {?} */ (options))).ogcFilters;
        /** @type {?} */
        var ogcFilterWriter = new OgcFilterWriter();
        if (!initOgcFilters) {
            ((/** @type {?} */ (options))).ogcFilters =
                ogcFilterWriter.defineOgcFiltersDefaultOptions(initOgcFilters, fieldNameGeometry, 'wms');
        }
        else {
            initOgcFilters.advancedOgcFilters = initOgcFilters.pushButtons ? false : true;
        }
        if (sourceParams.layers.split(',').length > 1 && options && initOgcFilters.enabled) {
            console.log('*******************************');
            console.log('BE CAREFULL, YOUR WMS LAYERS (' + sourceParams.layers
                + ') MUST SHARE THE SAME FIELDS TO ALLOW ogcFilters TO WORK !! ');
            console.log('*******************************');
        }
        if (options.paramsWFS && initOgcFilters.enabled) {
            _this.wfsService.getSourceFieldsFromWFS(options);
        }
        /** @type {?} */
        var filterQueryString = ogcFilterWriter.handleOgcFiltersAppliedValue(options, fieldNameGeometry);
        _this.ol.updateParams({ filter: filterQueryString });
        return _this;
    }
    Object.defineProperty(WMSDataSource.prototype, "params", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (this.options.params));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WMSDataSource.prototype, "queryTitle", {
        get: /**
         * @return {?}
         */
        function () {
            return ((/** @type {?} */ (this.options))).queryTitle
                ? ((/** @type {?} */ (this.options))).queryTitle
                : 'title';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WMSDataSource.prototype, "queryHtmlTarget", {
        get: /**
         * @return {?}
         */
        function () {
            return ((/** @type {?} */ (this.options))).queryHtmlTarget
                ? ((/** @type {?} */ (this.options))).queryHtmlTarget
                : QueryHtmlTarget.BLANK;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    WMSDataSource.prototype.refresh = /**
     * @return {?}
     */
    function () {
        this.ol.updateParams({ igoRefresh: Math.random() });
    };
    /**
     * @private
     * @param {?} asWFSDataSourceOptions
     * @return {?}
     */
    WMSDataSource.prototype.buildDynamicDownloadUrlFromParamsWFS = /**
     * @private
     * @param {?} asWFSDataSourceOptions
     * @return {?}
     */
    function (asWFSDataSourceOptions) {
        /** @type {?} */
        var queryStringValues = formatWFSQueryString(asWFSDataSourceOptions);
        /** @type {?} */
        var downloadUrl = queryStringValues.find((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.name === 'getfeature'; })).value;
        return downloadUrl;
    };
    /**
     * @protected
     * @return {?}
     */
    WMSDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        return new ol_source_ImageWMS__WEBPACK_IMPORTED_MODULE_4__["default"](this.options);
    };
    /**
     * @param {?=} scale
     * @return {?}
     */
    WMSDataSource.prototype.getLegend = /**
     * @param {?=} scale
     * @return {?}
     */
    function (scale) {
        /** @type {?} */
        var legend = _super.prototype.getLegend.call(this);
        if (legend.length > 0) {
            return legend;
        }
        /** @type {?} */
        var sourceParams = this.params;
        /** @type {?} */
        var layers = [];
        if (sourceParams.layers !== undefined) {
            layers = sourceParams.layers.split(',');
        }
        /** @type {?} */
        var baseUrl = this.options.url.replace(/\?$/, '');
        /** @type {?} */
        var params = [
            'REQUEST=GetLegendGraphic',
            'SERVICE=wms',
            'FORMAT=image/png',
            'SLD_VERSION=1.1.0',
            "VERSION=" + (sourceParams.version || '1.3.0')
        ];
        if (scale !== undefined) {
            params.push("SCALE=" + scale);
        }
        legend = layers.map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            return {
                url: baseUrl + "?" + params.join('&') + "&LAYER=" + layer,
                title: layers.length > 1 ? layer : undefined
            };
        }));
        return legend;
    };
    /**
     * @return {?}
     */
    WMSDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return WMSDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?=} epsg
 * @return {?}
 */
function createDefaultTileGrid(epsg) {
    /** @type {?} */
    var projection = epsg ? Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["get"])(epsg) : Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["get"])('EPSG:3857');
    /** @type {?} */
    var projectionExtent = projection.getExtent();
    /** @type {?} */
    var size = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getWidth"])(projectionExtent) / 256;
    /** @type {?} */
    var resolutions = new Array(20);
    /** @type {?} */
    var matrixIds = new Array(20);
    for (var z = 0; z < 20; ++z) {
        resolutions[z] = size / Math.pow(2, z);
        matrixIds[z] = z;
    }
    return new ol_tilegrid_WMTS__WEBPACK_IMPORTED_MODULE_6__["default"]({
        origin: Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getTopLeft"])(projectionExtent),
        resolutions: resolutions,
        matrixIds: matrixIds
    });
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WMTSDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(WMTSDataSource, _super);
    function WMTSDataSource(options) {
        return _super.call(this, options) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    WMTSDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var sourceOptions = Object.assign({
            tileGrid: createDefaultTileGrid((/** @type {?} */ (this.options.projection)))
        }, this.options);
        return new ol_source_WMTS__WEBPACK_IMPORTED_MODULE_5__["default"](sourceOptions);
    };
    /**
     * @return {?}
     */
    WMTSDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return WMTSDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var CartoDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(CartoDataSource, _super);
    function CartoDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(CartoDataSource.prototype, "params", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (this.options.params));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CartoDataSource.prototype, "queryTitle", {
        get: /**
         * @return {?}
         */
        function () {
            return ((/** @type {?} */ (this.options))).queryTitle
                ? ((/** @type {?} */ (this.options))).queryTitle
                : 'title';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CartoDataSource.prototype, "queryHtmlTarget", {
        get: /**
         * @return {?}
         */
        function () {
            return ((/** @type {?} */ (this.options))).queryHtmlTarget
                ? ((/** @type {?} */ (this.options))).queryHtmlTarget
                : QueryHtmlTarget.BLANK;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @protected
     * @return {?}
     */
    CartoDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var crossOrigin = this.options.crossOrigin
            ? this.options.crossOrigin
            : 'anonymous';
        /** @type {?} */
        var sourceOptions = Object.assign({
            crossOrigin: crossOrigin
        }, this.options);
        return new ol_source_CartoDB__WEBPACK_IMPORTED_MODULE_8__["default"](sourceOptions);
    };
    /**
     * @return {?}
     */
    CartoDataSource.prototype.getLegend = /**
     * @return {?}
     */
    function () {
        var e_1, _a;
        /** @type {?} */
        var legend = _super.prototype.getLegend.call(this);
        if (legend.length > 0) {
            return legend;
        }
        /** @type {?} */
        var htmlString = '<table>';
        if (this.options.config.layers[0].legend != null) {
            this.options.config.layers[0].legend.items.forEach((/**
             * @param {?} f
             * @return {?}
             */
            function (f) {
                if (f.visible === true) {
                    htmlString +=
                        '<tr><td>' +
                            '<p><font size="5" color="' +
                            f.value +
                            '"> &#9679</font></p></td>' +
                            '<td>' +
                            f.name +
                            '</td></tr>';
                }
            }));
            htmlString += '</table>';
            return [{ html: htmlString }];
        }
        else {
            // Try to build the legend from the cartocss options
            /** @type {?} */
            var layerOptions = this.options.config.layers[0].options;
            // All available cartocss style options
            /** @type {?} */
            var types = [
                'polygon-fill:',
                'marker-fill:',
                'shield-fill:',
                'building-fill:',
                'line-color:'
            ];
            try {
                for (var types_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(types), types_1_1 = types_1.next(); !types_1_1.done; types_1_1 = types_1.next()) {
                    var oneType = types_1_1.value;
                    if (layerOptions.cartocss.includes(oneType)) {
                        /** @type {?} */
                        var type = layerOptions.cartocss.split(oneType).pop();
                        /** @type {?} */
                        var color = type.substr(0, type.indexOf(';'));
                        if (color.includes('ramp')) {
                            /** @type {?} */
                            var colors = color.split(', (')[1].split(',');
                            /** @type {?} */
                            var data = color.split(', (')[2].split(',');
                            for (var j = 0; j < colors.length; j++) {
                                colors[j] = colors[j].replace(/("|\))/g, '');
                                data[j] = data[j].replace(/("|\))/g, '');
                                if (data[j].replace(/\s+/g, '') === '=') {
                                    data[j] = 'Autres';
                                }
                                htmlString +=
                                    '<tr><td>' +
                                        '<p><font size="5" color="' +
                                        colors[j] +
                                        '"> &#9679</font></p></td>' +
                                        '<td>' +
                                        data[j] +
                                        '</td></tr>';
                            }
                            break;
                        }
                        else {
                            /** @type {?} */
                            var title = layerOptions.layer_name
                                ? layerOptions.layer_name
                                : '';
                            htmlString +=
                                '<tr><td>' +
                                    '<p><font size="5" color="' +
                                    color +
                                    '"> &#9679</font></p>' +
                                    '</td><td>' +
                                    title +
                                    '</td></tr>';
                            break;
                        }
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (types_1_1 && !types_1_1.done && (_a = types_1.return)) _a.call(types_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            htmlString += '</table>';
            return [{ html: htmlString }];
        }
    };
    /**
     * @return {?}
     */
    CartoDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return CartoDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ArcGISRestDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ArcGISRestDataSource, _super);
    function ArcGISRestDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    ArcGISRestDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var esrijsonFormat = new ol_format_EsriJSON__WEBPACK_IMPORTED_MODULE_32__["default"]();
        return new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"]({
            attributions: this.options.params.attributions,
            overlaps: false,
            format: esrijsonFormat,
            url: (/**
             * @param {?} extent
             * @param {?} resolution
             * @param {?} proj
             * @return {?}
             */
            function (extent, resolution, proj) {
                /** @type {?} */
                var baseUrl = this.options.url + '/' + this.options.layer + '/query/';
                /** @type {?} */
                var geometry = encodeURIComponent('{"xmin":' +
                    extent[0] +
                    ',"ymin":' +
                    extent[1] +
                    ',"xmax":' +
                    extent[2] +
                    ',"ymax":' +
                    extent[3] +
                    ',"spatialReference":{"wkid":102100}}');
                /** @type {?} */
                var params = [
                    'f=json',
                    "geometry=" + geometry,
                    'geometryType=esriGeometryEnvelope',
                    'inSR=102100',
                    'spatialRel=esriSpatialRelIntersects',
                    'outFields=*',
                    'returnGeometry=true',
                    'outSR=102100'
                ];
                if (this.options.params.timeFilter) {
                    /** @type {?} */
                    var time = "time=" + this.options.params.timeExtent;
                    params.push(time);
                }
                if (this.options.params.customParams) {
                    this.options.params.customParams.forEach((/**
                     * @param {?} element
                     * @return {?}
                     */
                    function (element) {
                        params.push(element);
                    }));
                }
                return baseUrl + "?" + params.join('&');
            }).bind(this),
            strategy: ol_loadingstrategy__WEBPACK_IMPORTED_MODULE_9__["bbox"]
        });
    };
    /**
     * @return {?}
     */
    ArcGISRestDataSource.prototype.getLegend = /**
     * @return {?}
     */
    function () {
        var e_1, _a;
        /** @type {?} */
        var legendInfo = this.options.params.legendInfo;
        /** @type {?} */
        var legend = _super.prototype.getLegend.call(this);
        if (legendInfo === undefined || legend.length > 0) {
            return legend;
        }
        /** @type {?} */
        var id = parseInt(this.options.layer, 10);
        /** @type {?} */
        var lyr = legendInfo.layers[id];
        /** @type {?} */
        var htmlString = '<table><tr><td>' + lyr.layerName + '</td></tr>';
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(lyr.legend), _c = _b.next(); !_c.done; _c = _b.next()) {
                var lyrLegend = _c.value;
                /** @type {?} */
                var modifiedUrl = this.options.url.replace('FeatureServer', 'MapServer');
                /** @type {?} */
                var src = modifiedUrl + "/" + lyr.layerId + "/images/" + lyrLegend.url;
                /** @type {?} */
                var label = lyrLegend.label.replace('<Null>', 'Null');
                htmlString +=
                    "<tr><td align='left'><img src=\"" +
                        src +
                        "\" alt ='' /></td><td>" +
                        label +
                        '</td></tr>';
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        htmlString += '</table>';
        return [{ html: htmlString }];
    };
    /**
     * @return {?}
     */
    ArcGISRestDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return ArcGISRestDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TileArcGISRestDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(TileArcGISRestDataSource, _super);
    function TileArcGISRestDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(TileArcGISRestDataSource.prototype, "params", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (this.options.params));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TileArcGISRestDataSource.prototype, "queryTitle", {
        get: /**
         * @return {?}
         */
        function () {
            return ((/** @type {?} */ (this.options))).queryTitle
                ? ((/** @type {?} */ (this.options))).queryTitle
                : 'title';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TileArcGISRestDataSource.prototype, "queryHtmlTarget", {
        get: /**
         * @return {?}
         */
        function () {
            return ((/** @type {?} */ (this.options))).queryHtmlTarget
                ? ((/** @type {?} */ (this.options))).queryHtmlTarget
                : QueryHtmlTarget.BLANK;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @protected
     * @return {?}
     */
    TileArcGISRestDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        return new ol_source_TileArcGISRest__WEBPACK_IMPORTED_MODULE_10__["default"](this.options);
    };
    /**
     * @return {?}
     */
    TileArcGISRestDataSource.prototype.getLegend = /**
     * @return {?}
     */
    function () {
        var e_1, _a;
        /** @type {?} */
        var legend = _super.prototype.getLegend.call(this);
        if (this.options.legendInfo === undefined || legend.length > 0) {
            return legend;
        }
        /** @type {?} */
        var id = parseInt(this.options.layer, 10);
        /** @type {?} */
        var lyr = this.options.legendInfo.layers[id];
        /** @type {?} */
        var htmlString = '<table><tr><td>' + lyr.layerName + '</td></tr>';
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(lyr.legend), _c = _b.next(); !_c.done; _c = _b.next()) {
                var lyrLegend = _c.value;
                /** @type {?} */
                var src = this.options.url + "/" + lyr.layerId + "/images/" + lyrLegend.url;
                /** @type {?} */
                var label = lyrLegend.label.replace('<Null>', 'Null');
                htmlString +=
                    "<tr><td align='left'><img src=\"" +
                        src +
                        "\" alt ='' /></td><td>" +
                        label +
                        '</td></tr>';
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        htmlString += '</table>';
        return [{ html: htmlString }];
    };
    /**
     * @return {?}
     */
    TileArcGISRestDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return TileArcGISRestDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WebSocketDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(WebSocketDataSource, _super);
    function WebSocketDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    WebSocketDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        this.createWebSocket();
        this.options.format = this.getSourceFormatFromOptions(this.options);
        return _super.prototype.createOlSource.call(this);
    };
    /**
     * @private
     * @return {?}
     */
    WebSocketDataSource.prototype.createWebSocket = /**
     * @private
     * @return {?}
     */
    function () {
        this.ws = new WebSocket(this.options.url);
        this.ws.onmessage = this.onMessage.bind(this);
        if (this.options.onclose) {
            this.ws.onclose = this.onClose.bind(this);
        }
        if (this.options.onerror) {
            this.ws.onerror = this.onError.bind(this);
        }
        if (this.options.onopen) {
            this.ws.onopen = this.onOpen.bind(this);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    WebSocketDataSource.prototype.onMessage = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var featureAdded = this.options.format.readFeature(event.data);
        switch (this.options.onmessage) {
            case 'update':
                // ol don't add if same ID
                /** @type {?} */
                var featureToRemove = this.ol.getFeatureById(featureAdded.getId());
                if (featureToRemove) {
                    this.ol.removeFeature(featureToRemove);
                }
                this.ol.addFeature(featureAdded);
                break;
            case 'delete':
                this.ol.clear(true);
                this.ol.addFeature(featureAdded);
                break;
            case 'add':
            default:
                this.ol.addFeature(featureAdded);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    WebSocketDataSource.prototype.onClose = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        // thrown message to user
    };
    /**
     * @param {?} event
     * @return {?}
     */
    WebSocketDataSource.prototype.onError = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        // thrown message to user
    };
    /**
     * @param {?} event
     * @return {?}
     */
    WebSocketDataSource.prototype.onOpen = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        // thrown message to user ?
    };
    /**
     * @return {?}
     */
    WebSocketDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () {
        this.ws.close();
    };
    return WebSocketDataSource;
}(FeatureDataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MVTDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(MVTDataSource, _super);
    function MVTDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    MVTDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var mvtFormat = new ol_format_MVT__WEBPACK_IMPORTED_MODULE_13__["default"]({ featureClass: ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"] });
        this.options.format = mvtFormat;
        return new ol_source_VectorTile__WEBPACK_IMPORTED_MODULE_12__["default"](this.options);
    };
    /**
     * @protected
     * @return {?}
     */
    MVTDataSource.prototype.generateId = /**
     * @protected
     * @return {?}
     */
    function () {
        if (!this.options.url) {
            return Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
        }
        /** @type {?} */
        var chain = 'mvt' + this.options.url;
        return (/** @type {?} */ (ts_md5__WEBPACK_IMPORTED_MODULE_11__["Md5"].hashStr(chain)));
    };
    /**
     * @return {?}
     */
    MVTDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return MVTDataSource;
}(DataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ClusterDataSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ClusterDataSource, _super);
    function ClusterDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    ClusterDataSource.prototype.createOlSource = /**
     * @protected
     * @return {?}
     */
    function () {
        this.options.format = this.getSourceFormatFromOptions(this.options);
        this.options.source = _super.prototype.createOlSource.call(this);
        return new ol_source_Cluster__WEBPACK_IMPORTED_MODULE_14__["default"](this.options);
    };
    /**
     * @protected
     * @return {?}
     */
    ClusterDataSource.prototype.generateId = /**
     * @protected
     * @return {?}
     */
    function () {
        return Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
    };
    /**
     * @return {?}
     */
    ClusterDataSource.prototype.onUnwatch = /**
     * @return {?}
     */
    function () { };
    return ClusterDataSource;
}(FeatureDataSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var FEATURE = 'Feature';
/** @enum {number} */
var FeatureMotion = {
    None: 0,
    Move: 1,
    Zoom: 2,
    Default: 3,
};
FeatureMotion[FeatureMotion.None] = 'None';
FeatureMotion[FeatureMotion.Move] = 'Move';
FeatureMotion[FeatureMotion.Zoom] = 'Zoom';
FeatureMotion[FeatureMotion.Default] = 'Default';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var LAYER = 'Layer';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var TooltipType = {
    TITLE: 'title',
    ABSTRACT: 'abstract',
    CUSTOM: 'custom',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ImageWatcher = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ImageWatcher, _super);
    function ImageWatcher(layer) {
        var _this = _super.call(this) || this;
        _this.loaded = 0;
        _this.loading = 0;
        _this.source = layer.options.source.ol;
        _this.id = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
        return _this;
    }
    /**
     * @protected
     * @return {?}
     */
    ImageWatcher.prototype.watch = /**
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        this.source.on("imageloadstart", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadStart(e); }));
        this.source.on("imageloadend", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadEnd(e); }));
        this.source.on("imageloaderror", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadEnd(e); }));
    };
    /**
     * @protected
     * @return {?}
     */
    ImageWatcher.prototype.unwatch = /**
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        this.source.un("imageloadstart", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadStart(e); }));
        this.source.un("imageloadend", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadEnd(e); }));
        this.source.un("imageloaderror", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadEnd(e); }));
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    ImageWatcher.prototype.handleLoadStart = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!event.image.__watchers__) {
            event.image.__watchers__ = [];
        }
        event.image.__watchers__.push(this.id);
        this.loading += 1;
        this.status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Working;
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    ImageWatcher.prototype.handleLoadEnd = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!event.image.__watchers__) {
            return;
        }
        /** @type {?} */
        var watcherIndex = event.image.__watchers__.indexOf(this.id);
        if (watcherIndex < 0) {
            return;
        }
        event.image.__watchers__.splice(watcherIndex, 1);
        this.loaded += 1;
        /** @type {?} */
        var loading = this.loading;
        if (this.loaded >= loading) {
            if (loading === this.loading) {
                this.status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done;
                this.loaded = this.loading = 0;
            }
        }
    };
    return ImageWatcher;
}(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["Watcher"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TileWatcher = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(TileWatcher, _super);
    function TileWatcher(layer) {
        var _this = _super.call(this) || this;
        _this.loaded = 0;
        _this.loading = 0;
        _this.source = layer.options.source.ol;
        _this.id = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
        return _this;
    }
    /**
     * @protected
     * @return {?}
     */
    TileWatcher.prototype.watch = /**
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        this.source.on("tileloadstart", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadStart(e); }));
        this.source.on("tileloadend", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadEnd(e); }));
        this.source.on("tileloaderror", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadEnd(e); }));
    };
    /**
     * @protected
     * @return {?}
     */
    TileWatcher.prototype.unwatch = /**
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        this.source.un("tileloadstart", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadStart(e); }));
        this.source.un("tileloadend", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadEnd(e); }));
        this.source.un("tileloaderror", (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.handleLoadEnd(e); }));
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    TileWatcher.prototype.handleLoadStart = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        // This is to avoid increasing
        // the number of loaded tiles if a tile was loading
        // before subscribing to this watcher
        if (!event.tile.__watchers__) {
            event.tile.__watchers__ = [];
        }
        event.tile.__watchers__.push(this.id);
        this.loading += 1;
        this.status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Working;
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    TileWatcher.prototype.handleLoadEnd = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!event.tile.__watchers__) {
            return;
        }
        /** @type {?} */
        var watcherIndex = event.tile.__watchers__.indexOf(this.id);
        if (watcherIndex < 0) {
            return;
        }
        event.tile.__watchers__.splice(watcherIndex, 1);
        this.loaded += 1;
        /** @type {?} */
        var loading = this.loading;
        if (this.loaded >= loading) {
            if (loading === this.loading) {
                this.status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done;
                this.loaded = this.loading = 0;
            }
        }
    };
    return TileWatcher;
}(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["Watcher"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var VectorWatcher = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(VectorWatcher, _super);
    function VectorWatcher(layer) {
        var _this = _super.call(this) || this;
        _this.loaded = 0;
        _this.loading = 0;
        _this.layer = layer;
        _this.id = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
        return _this;
    }
    /**
     * @protected
     * @return {?}
     */
    VectorWatcher.prototype.watch = /**
     * @protected
     * @return {?}
     */
    function () {
    };
    /**
     * @protected
     * @return {?}
     */
    VectorWatcher.prototype.unwatch = /**
     * @protected
     * @return {?}
     */
    function () {
        this.layer.onUnwatch();
    };
    return VectorWatcher;
}(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["Watcher"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Get all the layers legend
 * @param {?} layers
 * @param {?=} scale
 * @return {?} Array of legend
 */
function getLayersLegends(layers, scale) {
    var e_1, _a, e_2, _b;
    /** @type {?} */
    var legends = [];
    /** @type {?} */
    var newCanvas = document.createElement('canvas');
    /** @type {?} */
    var newContext = newCanvas.getContext('2d');
    newContext.font = '20px Calibri';
    /** @type {?} */
    var heightPos = 0;
    try {
        for (var layers_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(layers), layers_1_1 = layers_1.next(); !layers_1_1.done; layers_1_1 = layers_1.next()) {
            var layer = layers_1_1.value;
            if (layer.visible === false) {
                continue;
            }
            /** @type {?} */
            var legendUrls = layer.dataSource.getLegend(scale) || [];
            var _loop_1 = function (legendUrl) {
                if (legendUrl.url === undefined) {
                    return "continue";
                }
                /** @type {?} */
                var title = layer.title;
                // Create an image for the legend
                /** @type {?} */
                var legendImage = new Image();
                legendImage.crossOrigin = 'anonymous';
                legendImage.src = legendUrl.url;
                legendImage.onload = (/**
                 * @return {?}
                 */
                function () {
                    newContext.fillText(title, 0, heightPos);
                    newContext.drawImage(legendImage, 0, heightPos + 20);
                    heightPos += legendImage.height + 5;
                });
                // Add legend info to the list
                legends.push({
                    title: title,
                    url: legendUrl.url,
                    image: legendImage
                });
            };
            try {
                for (var legendUrls_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(legendUrls), legendUrls_1_1 = legendUrls_1.next(); !legendUrls_1_1.done; legendUrls_1_1 = legendUrls_1.next()) {
                    var legendUrl = legendUrls_1_1.value;
                    _loop_1(legendUrl);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (legendUrls_1_1 && !legendUrls_1_1.done && (_b = legendUrls_1.return)) _b.call(legendUrls_1);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (layers_1_1 && !layers_1_1.done && (_a = layers_1.return)) _a.call(layers_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return legends;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ImageLayer = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ImageLayer, _super);
    function ImageLayer(options) {
        var _this = _super.call(this, options) || this;
        _this.watcher = new ImageWatcher(_this);
        _this.status$ = _this.watcher.status$;
        return _this;
    }
    /**
     * @protected
     * @return {?}
     */
    ImageLayer.prototype.createOlLayer = /**
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var olOptions = Object.assign({}, this.options, {
            source: (/** @type {?} */ (this.options.source.ol))
        });
        /** @type {?} */
        var image = new ol_layer_Image__WEBPACK_IMPORTED_MODULE_21__["default"](olOptions);
        /** @type {?} */
        var token = this.options.token;
        if (token) {
            ((/** @type {?} */ (image.getSource()))).setImageLoadFunction((/**
             * @param {?} tile
             * @param {?} src
             * @return {?}
             */
            function (tile, src) {
                _this.customLoader(tile, src, token);
            }));
        }
        return image;
    };
    /**
     * @param {?} map
     * @return {?}
     */
    ImageLayer.prototype.setMap = /**
     * @param {?} map
     * @return {?}
     */
    function (map$$1) {
        if (map$$1 === undefined) {
            this.watcher.unsubscribe();
        }
        else {
            this.watcher.subscribe((/**
             * @return {?}
             */
            function () { }));
        }
        _super.prototype.setMap.call(this, map$$1);
    };
    /**
     * @private
     * @param {?} tile
     * @param {?} src
     * @param {?=} token
     * @return {?}
     */
    ImageLayer.prototype.customLoader = /**
     * @private
     * @param {?} tile
     * @param {?} src
     * @param {?=} token
     * @return {?}
     */
    function (tile, src, token) {
        /** @type {?} */
        var xhr = new XMLHttpRequest();
        xhr.open('GET', src);
        xhr.setRequestHeader('Authorization', 'Bearer ' + token);
        xhr.responseType = 'arraybuffer';
        xhr.onload = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var arrayBufferView = new Uint8Array(((/** @type {?} */ (this))).response);
            /** @type {?} */
            var blob = new Blob([arrayBufferView], { type: 'image/png' });
            /** @type {?} */
            var urlCreator = window.URL;
            /** @type {?} */
            var imageUrl = urlCreator.createObjectURL(blob);
            tile.getImage().src = imageUrl;
        });
        xhr.send();
    };
    return ImageLayer;
}(Layer));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TileLayer = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(TileLayer, _super);
    function TileLayer(options) {
        var _this = _super.call(this, options) || this;
        _this.watcher = new TileWatcher(_this);
        _this.status$ = _this.watcher.status$;
        return _this;
    }
    /**
     * @protected
     * @return {?}
     */
    TileLayer.prototype.createOlLayer = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var olOptions = Object.assign({}, this.options, {
            source: (/** @type {?} */ (this.options.source.ol))
        });
        return new ol_layer_Tile__WEBPACK_IMPORTED_MODULE_22__["default"](olOptions);
    };
    /**
     * @param {?} map
     * @return {?}
     */
    TileLayer.prototype.setMap = /**
     * @param {?} map
     * @return {?}
     */
    function (map$$1) {
        if (map$$1 === undefined) {
            this.watcher.unsubscribe();
        }
        else {
            this.watcher.subscribe((/**
             * @return {?}
             */
            function () { }));
        }
        _super.prototype.setMap.call(this, map$$1);
    };
    return TileLayer;
}(Layer));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var VectorLayer = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(VectorLayer, _super);
    function VectorLayer(options) {
        var _this = _super.call(this, options) || this;
        _this.watcher = new VectorWatcher(_this);
        _this.status$ = _this.watcher.status$;
        return _this;
    }
    Object.defineProperty(VectorLayer.prototype, "browsable", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.browsable !== false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(VectorLayer.prototype, "exportable", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.exportable !== false;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @protected
     * @return {?}
     */
    VectorLayer.prototype.createOlLayer = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var olOptions = Object.assign({}, this.options, {
            source: (/** @type {?} */ (this.options.source.ol))
        });
        if (this.options.animation) {
            this.dataSource.ol.on('addfeature', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                this.flash(e.feature);
            }).bind(this));
        }
        return new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_52__["default"](olOptions);
    };
    /**
     * @protected
     * @param {?} feature
     * @return {?}
     */
    VectorLayer.prototype.flash = /**
     * @protected
     * @param {?} feature
     * @return {?}
     */
    function (feature) {
        /** @type {?} */
        var start = new Date().getTime();
        /** @type {?} */
        var listenerKey = this.map.ol.on('postcompose', animate$$1.bind(this));
        /**
         * @param {?} event
         * @return {?}
         */
        function animate$$1(event) {
            /** @type {?} */
            var vectorContext = event.vectorContext;
            /** @type {?} */
            var frameState = event.frameState;
            /** @type {?} */
            var flashGeom = feature.getGeometry().clone();
            /** @type {?} */
            var elapsed = frameState.time - start;
            /** @type {?} */
            var elapsedRatio = elapsed / this.options.animation.duration;
            /** @type {?} */
            var opacity = Object(ol_easing__WEBPACK_IMPORTED_MODULE_25__["easeOut"])(1 - elapsedRatio);
            /** @type {?} */
            var newColor = Object(ol_color__WEBPACK_IMPORTED_MODULE_23__["asArray"])(this.options.animation.color || 'red');
            newColor[3] = opacity;
            /** @type {?} */
            var style$$1 = this.ol.getStyleFunction().call(this, feature)[0];
            /** @type {?} */
            var styleClone = style$$1.clone();
            switch (feature.getGeometry().getType()) {
                case 'Point':
                    /** @type {?} */
                    var radius = Object(ol_easing__WEBPACK_IMPORTED_MODULE_25__["easeOut"])(elapsedRatio) * (styleClone.getImage().getRadius() * 3);
                    styleClone.getImage().setRadius(radius);
                    styleClone.getImage().setOpacity(opacity);
                    break;
                case 'LineString':
                    // TODO
                    if (styleClone.getImage().getStroke()) {
                        styleClone
                            .getImage()
                            .getStroke()
                            .setColor(newColor);
                        styleClone
                            .getImage()
                            .getStroke()
                            .setWidth(Object(ol_easing__WEBPACK_IMPORTED_MODULE_25__["easeOut"])(elapsedRatio) *
                            (styleClone
                                .getImage()
                                .getStroke()
                                .getWidth() *
                                3));
                    }
                    if (styleClone.getStroke()) {
                        styleClone.getStroke().setColor(newColor);
                        styleClone
                            .getStroke()
                            .setWidth(Object(ol_easing__WEBPACK_IMPORTED_MODULE_25__["easeOut"])(elapsedRatio) * (styleClone.getStroke().getWidth() * 3));
                    }
                    break;
                case 'Polygon':
                    // TODO
                    if (styleClone.getImage().getFill()) {
                        styleClone
                            .getImage()
                            .getFill()
                            .setColor(newColor);
                    }
                    if (styleClone.getFill()) {
                        styleClone.getFill().setColor(newColor);
                    }
                    break;
            }
            vectorContext.setStyle(styleClone);
            vectorContext.drawGeometry(flashGeom);
            if (elapsed > this.options.animation.duration) {
                Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(listenerKey);
                // remove last geometry
                // there is a little flash before feature disappear, better solution ?
                this.map.ol.render();
                return;
            }
            // tell OpenLayers to continue postcompose animation
            this.map.ol.render();
        }
    };
    /**
     * @param {?} map
     * @return {?}
     */
    VectorLayer.prototype.setMap = /**
     * @param {?} map
     * @return {?}
     */
    function (map$$1) {
        if (map$$1 === undefined) {
            this.watcher.unsubscribe();
        }
        else {
            this.watcher.subscribe((/**
             * @return {?}
             */
            function () { }));
        }
        _super.prototype.setMap.call(this, map$$1);
    };
    /**
     * @return {?}
     */
    VectorLayer.prototype.onUnwatch = /**
     * @return {?}
     */
    function () {
        this.dataSource.onUnwatch();
        this.stopAnimation();
    };
    /**
     * @return {?}
     */
    VectorLayer.prototype.stopAnimation = /**
     * @return {?}
     */
    function () {
        this.dataSource.ol.un('addfeature', (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            this.flash(e.feature);
        }).bind(this));
    };
    return VectorLayer;
}(Layer));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var VectorTileLayer = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(VectorTileLayer, _super);
    function VectorTileLayer(options) {
        return _super.call(this, options) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    VectorTileLayer.prototype.createOlLayer = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var olOptions = Object.assign({}, this.options, {
            source: (/** @type {?} */ (this.options.source.ol))
        });
        return new ol_layer_VectorTile__WEBPACK_IMPORTED_MODULE_24__["default"](olOptions);
    };
    return VectorTileLayer;
}(Layer));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var StyleService = /** @class */ (function () {
    function StyleService() {
    }
    /**
     * @param {?} options
     * @return {?}
     */
    StyleService.prototype.createStyle = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.parseStyle('style', options);
    };
    /**
     * @private
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    StyleService.prototype.parseStyle = /**
     * @private
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    function (key, value) {
        var _this = this;
        /** @type {?} */
        var styleOptions = {};
        /** @type {?} */
        var olCls = this.getOlCls(key);
        if (olCls && value instanceof Object) {
            Object.keys(value).forEach((/**
             * @param {?} _key
             * @return {?}
             */
            function (_key) {
                /** @type {?} */
                var olKey = _this.getOlKey(_key);
                styleOptions[olKey] = _this.parseStyle(_key, value[_key]);
            }));
            return new olCls(styleOptions);
        }
        else {
            return value;
        }
    };
    /**
     * @private
     * @param {?} key
     * @return {?}
     */
    StyleService.prototype.getOlKey = /**
     * @private
     * @param {?} key
     * @return {?}
     */
    function (key) {
        /** @type {?} */
        var olKey = key.toLowerCase();
        switch (olKey) {
            case 'circle':
            case 'regularshape':
            case 'icon':
                olKey = 'image';
                break;
            default:
                break;
        }
        return olKey;
    };
    /**
     * @private
     * @param {?} key
     * @return {?}
     */
    StyleService.prototype.getOlCls = /**
     * @private
     * @param {?} key
     * @return {?}
     */
    function (key) {
        /** @type {?} */
        var olCls = ol_style__WEBPACK_IMPORTED_MODULE_60__[key.charAt(0).toUpperCase() + key.slice(1)];
        if (key === 'regularshape') {
            olCls = ol_style__WEBPACK_IMPORTED_MODULE_60__["RegularShape"];
        }
        return olCls;
    };
    /**
     * @param {?} feature
     * @param {?} styleByAttribute
     * @return {?}
     */
    StyleService.prototype.createStyleByAttribute = /**
     * @param {?} feature
     * @param {?} styleByAttribute
     * @return {?}
     */
    function (feature, styleByAttribute) {
        /** @type {?} */
        var style$$1;
        /** @type {?} */
        var type = styleByAttribute.type;
        /** @type {?} */
        var attribute = styleByAttribute.attribute;
        /** @type {?} */
        var data = styleByAttribute.data;
        /** @type {?} */
        var stroke = styleByAttribute.stroke;
        /** @type {?} */
        var width = styleByAttribute.width;
        /** @type {?} */
        var fill = styleByAttribute.fill;
        /** @type {?} */
        var radius = styleByAttribute.radius;
        /** @type {?} */
        var icon = styleByAttribute.icon;
        /** @type {?} */
        var scale = styleByAttribute.scale;
        /** @type {?} */
        var size = data.length;
        /** @type {?} */
        var label = styleByAttribute.label;
        /** @type {?} */
        var baseStyle = styleByAttribute.baseStyle;
        if (type === 'circle') {
            for (var i = 0; i < size; i++) {
                if (feature.get(attribute) === data[i]) {
                    if (icon) {
                        style$$1 = [
                            new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                                image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Icon"]({
                                    src: icon[i],
                                    scale: scale ? scale[i] : 1
                                })
                            })
                        ];
                        return style$$1;
                    }
                    style$$1 = [
                        new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                            image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
                                radius: radius ? radius[i] : 4,
                                stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                                    color: stroke ? stroke[i] : 'black'
                                }),
                                fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                                    color: fill ? fill[i] : 'black'
                                })
                            })
                        })
                    ];
                    return style$$1;
                }
            }
            if (!feature.getStyle()) {
                style$$1 = [
                    new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                        image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
                            radius: 4,
                            stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                                color: 'black'
                            }),
                            fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                                color: '#bbbbf2'
                            })
                        })
                    })
                ];
                return style$$1;
            }
        }
        else if (type === 'regular') {
            for (var i = 0; i < size; i++) {
                if (feature.get(attribute) === data[i]) {
                    style$$1 = [
                        new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                            stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                                color: stroke ? stroke[i] : 'black',
                                width: width ? width[i] : 1
                            }),
                            fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                                color: fill ? fill[i] : 'rgba(255,255,255,0.4)'
                            }),
                            text: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Text"]({
                                text: feature.get(label),
                                stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                                    color: 'black'
                                })
                            })
                        })
                    ];
                    return style$$1;
                }
            }
            if (!feature.getStyle()) {
                if (baseStyle) {
                    style$$1 = this.createStyle(baseStyle);
                    return style$$1;
                }
                style$$1 = [
                    new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                        stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                            color: 'black'
                        }),
                        fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                            color: '#bbbbf2'
                        })
                    })
                ];
                return style$$1;
            }
        }
    };
    /**
     * @param {?} feature
     * @param {?} clusterParam
     * @return {?}
     */
    StyleService.prototype.createClusterStyle = /**
     * @param {?} feature
     * @param {?} clusterParam
     * @return {?}
     */
    function (feature, clusterParam) {
        /** @type {?} */
        var style$$1;
        /** @type {?} */
        var range = clusterParam.clusterRange;
        /** @type {?} */
        var icon = clusterParam.clusterIcon;
        /** @type {?} */
        var scale = clusterParam.clusterScale;
        /** @type {?} */
        var size = feature.get('features').length;
        /** @type {?} */
        var color;
        if (size !== 1) {
            if (range) {
                if (size >= range[1]) {
                    color = 'red';
                }
                else if (size < range[1] && size >= range[0]) {
                    color = 'orange';
                }
                else if (size < range[0]) {
                    color = 'green';
                }
            }
            style$$1 = [
                new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                    image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
                        radius: 2 * size + 3.4,
                        stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                            color: 'black'
                        }),
                        fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                            color: range ? color : 'blue'
                        })
                    }),
                    text: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Text"]({
                        text: size.toString(),
                        fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                            color: '#fff'
                        })
                    })
                })
            ];
        }
        else {
            if (icon) {
                style$$1 = [
                    new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                        image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Icon"]({
                            src: icon,
                            scale: scale
                        })
                    })
                ];
            }
            else {
                style$$1 = [
                    new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                        image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
                            radius: 2 * size + 3.4,
                            stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                                color: 'black'
                            }),
                            fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                                color: 'blue'
                            })
                        })
                    })
                ];
            }
        }
        return style$$1;
    };
    StyleService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    StyleService.ctorParameters = function () { return []; };
    /** @nocollapse */ StyleService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function StyleService_Factory() { return new StyleService(); }, token: StyleService, providedIn: "root" });
    return StyleService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Whether a layer is queryable
 * @param {?} layer Layer
 * @return {?} True if the layer s squeryable
 */
function layerIsQueryable(layer) {
    /** @type {?} */
    var dataSource = (/** @type {?} */ (layer.dataSource));
    return dataSource.options.queryable === true;
}
/**
 * Whether an OL layer is queryable
 * @param {?} olLayer
 * @return {?} True if the ol layer is queryable
 */
function olLayerIsQueryable(olLayer) {
    /** @type {?} */
    var layer = olLayer.get('_layer');
    return layer === undefined ? false : layerIsQueryable(layer);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LayerItemComponent = /** @class */ (function () {
    function LayerItemComponent(cdRef) {
        this.cdRef = cdRef;
        this.showLegend$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](false);
        this.inResolutionRange$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](true);
        this.queryBadgeHidden$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](true);
        this.toggleLegendOnVisibilityChange = false;
        this.expandLegendIfVisible = false;
        this.updateLegendOnResolutionChange = false;
        this.orderable = true;
        this.queryBadge = false;
    }
    Object.defineProperty(LayerItemComponent.prototype, "removable", {
        get: /**
         * @return {?}
         */
        function () { return this.layer.options.removable !== false; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerItemComponent.prototype, "opacity", {
        get: /**
         * @return {?}
         */
        function () { return this.layer.opacity * 100; },
        set: /**
         * @param {?} opacity
         * @return {?}
         */
        function (opacity) { this.layer.opacity = opacity / 100; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    LayerItemComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var legend = this.layer.dataSource.options.legend || {};
        /** @type {?} */
        var legendCollapsed = legend.collapsed === false ? false : true;
        if (this.layer.visible && this.expandLegendIfVisible) {
            legendCollapsed = false;
        }
        this.toggleLegend(legendCollapsed);
        this.updateQueryBadge();
        /** @type {?} */
        var resolution$ = this.layer.map.viewController.resolution$;
        this.resolution$$ = resolution$.subscribe((/**
         * @param {?} resolution
         * @return {?}
         */
        function (resolution) {
            _this.onResolutionChange(resolution);
        }));
        this.tooltipText = this.computeTooltip();
    };
    /**
     * @return {?}
     */
    LayerItemComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.resolution$$.unsubscribe();
    };
    /**
     * @param {?} collapsed
     * @return {?}
     */
    LayerItemComponent.prototype.toggleLegend = /**
     * @param {?} collapsed
     * @return {?}
     */
    function (collapsed) {
        this.showLegend$.next(!collapsed);
    };
    /**
     * @return {?}
     */
    LayerItemComponent.prototype.toggleVisibility = /**
     * @return {?}
     */
    function () {
        this.layer.visible = !this.layer.visible;
        if (this.toggleLegendOnVisibilityChange) {
            this.toggleLegend(!this.layer.visible);
        }
        this.updateQueryBadge();
    };
    /**
     * @return {?}
     */
    LayerItemComponent.prototype.computeTooltip = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var layerOptions = this.layer.options;
        if (!layerOptions.tooltip) {
            return this.layer.title;
        }
        /** @type {?} */
        var layerTooltip = layerOptions.tooltip;
        /** @type {?} */
        var layerMetadata = ((/** @type {?} */ (layerOptions))).metadata;
        switch (layerOptions.tooltip.type) {
            case TooltipType.TITLE:
                return this.layer.title;
            case TooltipType.ABSTRACT:
                if (layerMetadata && layerMetadata.abstract) {
                    return layerMetadata.abstract;
                }
                else {
                    return this.layer.title;
                }
            case TooltipType.CUSTOM:
                if (layerTooltip && layerTooltip.text) {
                    return layerTooltip.text;
                }
                else {
                    return this.layer.title;
                }
            default:
                return this.layer.title;
        }
    };
    /**
     * @private
     * @param {?} resolution
     * @return {?}
     */
    LayerItemComponent.prototype.onResolutionChange = /**
     * @private
     * @param {?} resolution
     * @return {?}
     */
    function (resolution) {
        /** @type {?} */
        var inResolutionRange = this.layer.isInResolutionsRange;
        if (inResolutionRange === false && this.updateLegendOnResolutionChange === true) {
            this.toggleLegend(true);
        }
        this.inResolutionRange$.next(inResolutionRange);
    };
    /**
     * @private
     * @return {?}
     */
    LayerItemComponent.prototype.updateQueryBadge = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var hidden = this.queryBadge === false ||
            this.layer.visible === false ||
            !layerIsQueryable(this.layer);
        this.queryBadgeHidden$.next(hidden);
    };
    LayerItemComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-layer-item',
                    template: "<mat-list-item>\r\n  <mat-icon\r\n    class=\"igo-chevron\"\r\n    mat-list-avatar\r\n    igoCollapse\r\n    [target]=\"legend\"\r\n    [collapsed]=\"!(showLegend$ | async)\"\r\n    (toggle)=\"toggleLegend($event)\"\r\n    svgIcon=\"chevron-up\" >\r\n  </mat-icon>\r\n  <h4 matLine [matTooltip]=\"tooltipText\" matTooltipShowDelay=\"500\">{{layer.title}}</h4>\r\n\r\n  <button\r\n    mat-icon-button\r\n    [color]=\"layer.visible ? 'primary' : 'default'\"\r\n    collapsibleButton\r\n    tooltip-position=\"below\"\r\n    matTooltipShowDelay=\"500\"\r\n    [matTooltip]=\"layer.visible ?\r\n                  ('igo.geo.layer.hideLayer' | translate) :\r\n                  ('igo.geo.layer.showLayer' | translate)\"\r\n    (click)=\"toggleVisibility()\">\r\n    <mat-icon\r\n      matBadge=\"?\"\r\n      matBadgeColor=\"accent\"\r\n      matBadgeSize=\"small\"\r\n      matBadgePosition=\"after\"\r\n      [matBadgeHidden]=\"queryBadgeHidden$ | async\"\r\n      [ngClass]=\"{disabled: !(inResolutionRange$ | async)}\"\r\n      [svgIcon]=\"layer.visible ? 'eye' : 'eye-off'\">\r\n    </mat-icon>\r\n  </button>\r\n\r\n  <button\r\n    mat-icon-button\r\n    color=\"primary\"\r\n    igoCollapse\r\n    [target]=\"actions\"\r\n    [collapsed]=\"true\">\r\n    <mat-icon svgIcon=\"dots-horizontal\"></mat-icon>\r\n  </button>\r\n</mat-list-item>\r\n\r\n<div #actions class=\"igo-layer-actions-container\">\r\n  <div class=\"igo-col igo-col-100 igo-col-100-m\">\r\n    <mat-slider\r\n      id=\"opacity-slider\"\r\n      thumbLabel\r\n      tickInterval=\"5\"\r\n      step=\"5\"\r\n      [min]=\"0\"\r\n      [max]=\"100\"\r\n      [(ngModel)]=\"opacity\"\r\n      [matTooltip]=\"'igo.geo.layer.opacity' | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      tooltip-position=\"below\">\r\n    </mat-slider>\r\n  </div>\r\n\r\n  <div class=\"igo-col igo-col-100 igo-col-100-m\">\r\n    <div class=\"igo-layer-button-group\">\r\n      <button\r\n        color=\"primary\"\r\n        mat-icon-button\r\n        tooltip-position=\"below\"\r\n        matTooltipShowDelay=\"500\"\r\n        [matTooltip]=\"'igo.geo.layer.raiseLayer' | translate\"\r\n        [disabled]=\"!orderable\"\r\n        (click)=\"layer.map.raiseLayer(layer)\">\r\n        <mat-icon svgIcon=\"arrow-up\"></mat-icon>\r\n      </button>\r\n\r\n      <button\r\n        mat-icon-button\r\n        color=\"primary\"\r\n        tooltip-position=\"below\"\r\n        matTooltipShowDelay=\"500\"\r\n        [matTooltip]=\"'igo.geo.layer.lowerLayer' | translate\"\r\n        [disabled]=\"!orderable\"\r\n        (click)=\"layer.map.lowerLayer(layer)\">\r\n        <mat-icon svgIcon=\"arrow-down\"></mat-icon>\r\n      </button>\r\n\r\n      <button\r\n        *ngIf=\"removable === true\"\r\n        mat-icon-button\r\n        color=\"warn\"\r\n        tooltip-position=\"below\"\r\n        matTooltipShowDelay=\"500\"\r\n        [matTooltip]=\"'igo.geo.layer.removeLayer' | translate\"\r\n        (click)=\"layer.map.removeLayer(layer)\">\r\n        <mat-icon svgIcon=\"delete\"></mat-icon>\r\n      </button>\r\n      <ng-content select=\"[igoLayerItemToolbar]\"></ng-content>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div #legend class=\"igo-layer-legend-container\">\r\n  <igo-layer-legend\r\n    *ngIf=\"showLegend$ | async\"\r\n    [layer]=\"layer\"\r\n    [updateLegendOnResolutionChange]=\"updateLegendOnResolutionChange\">\r\n  </igo-layer-legend>\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{overflow:hidden}.igo-layer-actions-container{width:100%;display:inline-block}.igo-layer-actions-container>div{text-align:center}.igo-layer-legend-container{padding-left:18px;width:calc(100% - 18px);display:inline-block}#opacity-slider{width:100%}.igo-layer-button-group{float:right;padding:0 3px}@media only screen and (max-width:450px),only screen and (max-height:450px){#opacity-slider{width:70%}.igo-layer-button-group{float:none}}mat-icon.disabled{color:rgba(0,0,0,.38)}.mat-badge-small .mat-badge-content{font-size:12px}"]
                }] }
    ];
    /** @nocollapse */
    LayerItemComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] }
    ]; };
    LayerItemComponent.propDecorators = {
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        toggleLegendOnVisibilityChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        expandLegendIfVisible: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        updateLegendOnResolutionChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        orderable: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        queryBadge: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return LayerItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LayerLegendComponent = /** @class */ (function () {
    function LayerLegendComponent(capabilitiesService) {
        this.capabilitiesService = capabilitiesService;
        this.updateLegendOnResolutionChange = false;
        /**
         * Observable of the legend items
         */
        this.legendItems$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"]([]);
    }
    /**
     * On init, subscribe to the map's resolution and update the legend accordingly
     */
    /**
     * On init, subscribe to the map's resolution and update the legend accordingly
     * @return {?}
     */
    LayerLegendComponent.prototype.ngOnInit = /**
     * On init, subscribe to the map's resolution and update the legend accordingly
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.updateLegendOnResolutionChange === true) {
            /** @type {?} */
            var resolution$ = this.layer.map.viewController.resolution$;
            this.resolution$$ = resolution$.subscribe((/**
             * @param {?} resolution
             * @return {?}
             */
            function (resolution) { return _this.onResolutionChange(resolution); }));
        }
        else {
            this.updateLegend(undefined);
        }
    };
    /**
     * On destroy, unsubscribe to the map,s resolution
     */
    /**
     * On destroy, unsubscribe to the map,s resolution
     * @return {?}
     */
    LayerLegendComponent.prototype.ngOnDestroy = /**
     * On destroy, unsubscribe to the map,s resolution
     * @return {?}
     */
    function () {
        if (this.resolution$$ !== undefined) {
            this.resolution$$.unsubscribe();
        }
    };
    /**
     * @param {?} layerLegend
     * @return {?}
     */
    LayerLegendComponent.prototype.computeItemTitle = /**
     * @param {?} layerLegend
     * @return {?}
     */
    function (layerLegend) {
        /** @type {?} */
        var layerOptions = (/** @type {?} */ (this.layer.dataSource.options));
        if (layerOptions.type !== 'wms') {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["of"])(layerLegend.title);
        }
        /** @type {?} */
        var layers = layerOptions.params.layers.split(',');
        /** @type {?} */
        var localLayerOptions = JSON.parse(JSON.stringify(layerOptions));
        localLayerOptions.params.layers = layers.find((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return layer === layerLegend.title; }));
        return this.capabilitiesService
            .getWMSOptions(localLayerOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} wmsDataSourceOptions
         * @return {?}
         */
        function (wmsDataSourceOptions) {
            return wmsDataSourceOptions._layerOptionsFromCapabilities.title;
        })));
    };
    /**
     * On resolution change, compute the effective scale level and update the
     * legend accordingly.
     * @param resolutione Map resolution
     */
    /**
     * On resolution change, compute the effective scale level and update the
     * legend accordingly.
     * @private
     * @param {?} resolution
     * @return {?}
     */
    LayerLegendComponent.prototype.onResolutionChange = /**
     * On resolution change, compute the effective scale level and update the
     * legend accordingly.
     * @private
     * @param {?} resolution
     * @return {?}
     */
    function (resolution) {
        /** @type {?} */
        var scale = this.layer.map.viewController.getScale();
        this.updateLegend(scale);
    };
    /**
     * Update the legend according the scale level
     * @param scale Map scale level
     */
    /**
     * Update the legend according the scale level
     * @private
     * @param {?} scale Map scale level
     * @return {?}
     */
    LayerLegendComponent.prototype.updateLegend = /**
     * Update the legend according the scale level
     * @private
     * @param {?} scale Map scale level
     * @return {?}
     */
    function (scale) {
        /** @type {?} */
        var legendItems = this.layer.dataSource.getLegend(scale);
        if (legendItems.length === 0 && this.legendItems$.value.length === 0) {
            return;
        }
        this.legendItems$.next(legendItems);
    };
    LayerLegendComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-layer-legend',
                    template: "<ng-container *ngIf=\"legendItems$ | async as items\">\r\n  <ng-container *ngIf=\"items.length; else noItems\">\r\n    <ng-container *ngFor=\"let item of items\">\r\n      <mat-list-item *ngIf=\"item.title\">\r\n        <mat-icon\r\n          id=\"legend-toggle\"\r\n          class=\"igo-chevron\"\r\n          mat-list-avatar\r\n          igoCollapse\r\n          [target]=\"legend\"\r\n          [collapsed]=\"false\"\r\n          svgIcon=\"chevron-up\">\r\n        </mat-icon>\r\n        <h4 matLine>{{computeItemTitle(item) | async}}</h4>\r\n      </mat-list-item>\r\n    \r\n      <div #legend class=\"igo-layer-legend\" [ngClass]=\"{'with-title': item.title}\">\r\n        <img\r\n          *ngIf=\"item.url\"\r\n          src=\"{{(item.url | secureImage) |\u00A0async}}\"\r\n          alt=\"{{'igo.geo.layer.loadingLegendText' | translate}}\">\r\n        <div\r\n          [ngStyle]=\"item.style\"\r\n          [innerHTML]=\"item.html\"\r\n          *ngIf=\"item.html\">\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </ng-container>\r\n\r\n  <ng-template #noItems>\r\n    <small>\r\n      {{'igo.geo.layer.noLegendText' | translate}}\r\n    </small>\r\n  </ng-template>\r\n\r\n</ng-container>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [".igo-layer-legend.with-title{padding-left:18px}"]
                }] }
    ];
    /** @nocollapse */
    LayerLegendComponent.ctorParameters = function () { return [
        { type: CapabilitiesService }
    ]; };
    LayerLegendComponent.propDecorators = {
        updateLegendOnResolutionChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return LayerLegendComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var LayerListControlsEnum = {
    always: 'always',
    never: 'never',
    default: 'default',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LayerListService = /** @class */ (function () {
    function LayerListService() {
        this.sortedAlpha = false;
        this.onlyVisible = false;
        this.onlyInRange = false;
        this.keywordInitialized = false;
        this.sortedAlphaInitialized = false;
        this.onlyVisibleInitialized = false;
        this.onlyInRangeInitialized = false;
    }
    LayerListService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    LayerListService.ctorParameters = function () { return []; };
    /** @nocollapse */ LayerListService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function LayerListService_Factory() { return new LayerListService(); }, token: LayerListService, providedIn: "root" });
    return LayerListService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
// TODO: This class could use a clean up. Also, some methods could be moved ealsewhere
var LayerListComponent = /** @class */ (function () {
    function LayerListComponent(cdRef, layerListService) {
        this.cdRef = cdRef;
        this.layerListService = layerListService;
        this.hasLayerNotVisible = false;
        this.hasLayerOutOfRange = false;
        this.orderable = true;
        this.thresholdToFilterAndSort = 5;
        this.layers$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"]([]);
        this.change$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["ReplaySubject"](1);
        this.showToolbar$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](false);
        this.placeholder = '';
        this.floatLabel = 'auto';
        this.layerFilterAndSortOptions = {};
        this.excludeBaseLayers = false;
        this.toggleLegendOnVisibilityChange = false;
        this.expandLegendOfVisibleLayers = false;
        this.updateLegendOnResolutionChange = false;
        this.queryBadge = false;
    }
    Object.defineProperty(LayerListComponent.prototype, "layers", {
        get: /**
         * @return {?}
         */
        function () { return this._layers; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.setLayers(value);
            this.next();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerListComponent.prototype, "keyword", {
        get: /**
         * @return {?}
         */
        function () { return this.layerListService.keyword; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.layerListService.keyword = value;
            this.next();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerListComponent.prototype, "keywordInitialized", {
        get: /**
         * @return {?}
         */
        function () { return this.layerListService.keywordInitialized; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this.layerListService.keywordInitialized = value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerListComponent.prototype, "onlyVisible", {
        get: /**
         * @return {?}
         */
        function () { return this.layerListService.onlyVisible; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.layerListService.onlyVisible = value;
            this.next();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerListComponent.prototype, "onlyVisibleInitialized", {
        get: /**
         * @return {?}
         */
        function () { return this.layerListService.onlyVisibleInitialized; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this.layerListService.onlyVisibleInitialized = value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerListComponent.prototype, "onlyInRange", {
        get: /**
         * @return {?}
         */
        function () { return this.layerListService.onlyInRange; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.layerListService.onlyInRange = value;
            this.next();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerListComponent.prototype, "onlyInRangeInitialized", {
        get: /**
         * @return {?}
         */
        function () { return this.layerListService.onlyInRangeInitialized; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this.layerListService.onlyInRangeInitialized = value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerListComponent.prototype, "sortedAlpha", {
        get: /**
         * @return {?}
         */
        function () { return this.layerListService.sortedAlpha; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.layerListService.sortedAlpha = value;
            this.next();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LayerListComponent.prototype, "sortedAlphaInitialized", {
        get: /**
         * @return {?}
         */
        function () { return this.layerListService.sortedAlphaInitialized; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this.layerListService.sortedAlphaInitialized = value; },
        enumerable: true,
        configurable: true
    });
    /**
     * Subscribe to the search term stream and trigger researches
     * @internal
     */
    /**
     * Subscribe to the search term stream and trigger researches
     * \@internal
     * @return {?}
     */
    LayerListComponent.prototype.ngOnInit = /**
     * Subscribe to the search term stream and trigger researches
     * \@internal
     * @return {?}
     */
    function () {
        var _this = this;
        this.change$$ = this.change$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["debounce"])((/**
         * @return {?}
         */
        function () {
            return _this.layers.length === 0 ? rxjs__WEBPACK_IMPORTED_MODULE_69__["EMPTY"] : Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["timer"])(50);
        }))).subscribe((/**
         * @return {?}
         */
        function () {
            _this.showToolbar$.next(_this.computeShowToolbar());
            _this.layers$.next(_this.computeLayers(_this.layers.slice(0)));
        }));
        this.initLayerFilterAndSortOptions();
    };
    /**
     * @return {?}
     */
    LayerListComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.change$$.unsubscribe();
    };
    /**
     * @return {?}
     */
    LayerListComponent.prototype.toggleOnlyVisible = /**
     * @return {?}
     */
    function () {
        this.onlyVisible = !this.onlyVisible;
    };
    /**
     * @return {?}
     */
    LayerListComponent.prototype.toggleOnlyInRange = /**
     * @return {?}
     */
    function () {
        this.onlyInRange = !this.onlyInRange;
    };
    /**
     * @param {?} sortAlpha
     * @return {?}
     */
    LayerListComponent.prototype.toggleSort = /**
     * @param {?} sortAlpha
     * @return {?}
     */
    function (sortAlpha) {
        this.sortedAlpha = sortAlpha;
    };
    /**
     * @return {?}
     */
    LayerListComponent.prototype.clearKeyword = /**
     * @return {?}
     */
    function () {
        this.keyword = undefined;
    };
    /**
     * @private
     * @return {?}
     */
    LayerListComponent.prototype.next = /**
     * @private
     * @return {?}
     */
    function () {
        this.change$.next();
    };
    /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    LayerListComponent.prototype.computeLayers = /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    function (layers) {
        /** @type {?} */
        var layersOut = this.filterLayers(layers);
        if (this.sortedAlpha) {
            layersOut = this.sortLayersByTitle(layersOut);
        }
        else {
            layersOut = this.sortLayersByZindex(layersOut);
        }
        return layersOut;
    };
    /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    LayerListComponent.prototype.filterLayers = /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    function (layers) {
        var _this = this;
        /** @type {?} */
        var keyword = this.keyword;
        if (this.layerFilterAndSortOptions.showToolbar === LayerListControlsEnum.never) {
            return layers;
        }
        if (!keyword && !this.onlyInRange && !this.onlyVisible) {
            return layers;
        }
        /** @type {?} */
        var keepLayerIds = layers.map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return layer.id; }));
        layers.forEach((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            /** @type {?} */
            var layerOptions = (/** @type {?} */ (layer.options)) || {};
            /** @type {?} */
            var dataSourceOptions = layer.dataSource.options || {};
            /** @type {?} */
            var metadata = layerOptions.metadata || (/** @type {?} */ ({}));
            /** @type {?} */
            var keywords = metadata.keywordList || [];
            /** @type {?} */
            var layerKeywords = keywords.map((/**
             * @param {?} kw
             * @return {?}
             */
            function (kw) {
                return kw.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
            }));
            if (keyword) {
                /** @type {?} */
                var localKeyword = keyword.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
                /** @type {?} */
                var layerTitle = layer.title.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
                /** @type {?} */
                var dataSourceType = dataSourceOptions.type || '';
                /** @type {?} */
                var keywordRegex_1 = new RegExp(localKeyword, 'gi');
                /** @type {?} */
                var keywordInList = layerKeywords.find((/**
                 * @param {?} kw
                 * @return {?}
                 */
                function (kw) { return keywordRegex_1.test(kw); })) !== undefined;
                if (!keywordRegex_1.test(layerTitle) &&
                    !(keyword.toLowerCase() === dataSourceType.toLowerCase()) &&
                    !keywordInList) {
                    /** @type {?} */
                    var index = keepLayerIds.indexOf(layer.id);
                    if (index > -1) {
                        keepLayerIds.splice(index, 1);
                    }
                }
            }
            if (_this.onlyVisible && layer.visible === false) {
                /** @type {?} */
                var index = keepLayerIds.indexOf(layer.id);
                if (index > -1) {
                    keepLayerIds.splice(index, 1);
                }
            }
            if (_this.onlyInRange && layer.isInResolutionsRange === false) {
                /** @type {?} */
                var index = keepLayerIds.indexOf(layer.id);
                if (index > -1) {
                    keepLayerIds.splice(index, 1);
                }
            }
        }));
        return layers.filter((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return keepLayerIds.indexOf(layer.id) !== -1; }));
    };
    /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    LayerListComponent.prototype.sortLayersByZindex = /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    function (layers) {
        return layers.sort((/**
         * @param {?} layer1
         * @param {?} layer2
         * @return {?}
         */
        function (layer1, layer2) { return layer2.zIndex - layer1.zIndex; }));
    };
    /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    LayerListComponent.prototype.sortLayersByTitle = /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    function (layers) {
        return layers.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            if (a.title < b.title) {
                return -1;
            }
            if (a.title > b.title) {
                return 1;
            }
            return 0;
        }));
    };
    /**
     * @private
     * @return {?}
     */
    LayerListComponent.prototype.computeOrderable = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.onlyInRange || this.onlyVisible ||
            this.sortedAlpha || this.keyword) {
            return false;
        }
        return true;
    };
    /**
     * @private
     * @return {?}
     */
    LayerListComponent.prototype.computeShowToolbar = /**
     * @private
     * @return {?}
     */
    function () {
        switch (this.layerFilterAndSortOptions.showToolbar) {
            case LayerListControlsEnum.always:
                return true;
            case LayerListControlsEnum.never:
                return false;
            default:
                if (this.layers.length >= this.thresholdToFilterAndSort ||
                    this.keyword ||
                    this.onlyInRange ||
                    this.onlyVisible) {
                    return true;
                }
                return false;
        }
    };
    /**
     * @private
     * @return {?}
     */
    LayerListComponent.prototype.initLayerFilterAndSortOptions = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.layerFilterAndSortOptions.toolbarThreshold) {
            this.thresholdToFilterAndSort = this.layerFilterAndSortOptions.toolbarThreshold;
        }
        if (this.layerFilterAndSortOptions.keyword && !this.keywordInitialized) {
            this.keyword = this.layerFilterAndSortOptions.keyword;
            this.keywordInitialized = true;
        }
        if (this.layerFilterAndSortOptions.sortedAlpha && !this.sortedAlphaInitialized) {
            this.sortedAlpha = this.layerFilterAndSortOptions.sortedAlpha;
            this.sortedAlphaInitialized = true;
        }
        if (this.layerFilterAndSortOptions.onlyVisible && !this.onlyVisibleInitialized &&
            this.hasLayerNotVisible) {
            this.onlyVisible = this.layerFilterAndSortOptions.onlyVisible;
            this.onlyVisibleInitialized = true;
        }
        if (this.layerFilterAndSortOptions.onlyInRange && !this.onlyInRangeInitialized &&
            this.hasLayerOutOfRange) {
            this.onlyInRange = this.layerFilterAndSortOptions.onlyInRange;
            this.onlyInRangeInitialized = true;
        }
    };
    /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    LayerListComponent.prototype.setLayers = /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    function (layers) {
        this._layers = layers;
        this.orderable = this.computeOrderable();
        if (this.excludeBaseLayers) {
            this.hasLayerNotVisible = layers.find((/**
             * @param {?} l
             * @return {?}
             */
            function (l) { return l.visible === false && !l.baseLayer; })) !== undefined;
            this.hasLayerOutOfRange = layers.find((/**
             * @param {?} l
             * @return {?}
             */
            function (l) { return l.isInResolutionsRange === false && !l.baseLayer; })) !== undefined;
        }
        else {
            this.hasLayerNotVisible = layers.find((/**
             * @param {?} l
             * @return {?}
             */
            function (l) { return l.visible === false; })) !== undefined;
            this.hasLayerOutOfRange = layers.find((/**
             * @param {?} l
             * @return {?}
             */
            function (l) { return l.isInResolutionsRange === false; })) !== undefined;
        }
    };
    LayerListComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-layer-list',
                    template: "<igo-list [navigation]=\"false\" [selection]=\"false\">\r\n  <mat-list-item *ngIf=\"showToolbar$ | async\">\r\n    <ng-container>\r\n      <mat-form-field class=\"inputFilter\" [floatLabel]=\"floatLabel\">\r\n        <input\r\n          matInput\r\n          [placeholder]=\"placeholder\"\r\n          [matTooltip]=\"'igo.geo.layer.subsetLayersListKeyword' | translate\"\r\n          matTooltipShowDelay=\"500\"\r\n          type=\"text\" [(ngModel)]=\"keyword\">\r\n        <button\r\n          mat-button\r\n          *ngIf=\"keyword\"\r\n          matSuffix\r\n          mat-icon-button\r\n          aria-label=\"Clear\"\r\n          color=\"warn\"\r\n          (click)=\"clearKeyword()\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n      <button\r\n        *ngIf=\"!sortedAlpha\"\r\n        mat-icon-button\r\n        [matTooltip]=\"'igo.geo.layer.sortAlphabetically' | translate\"\r\n        matTooltipShowDelay=\"500\"\r\n        (click)=\"toggleSort(true)\">\r\n        <mat-icon color=\"primary\" svgIcon=\"sort-alphabetical\"></mat-icon>\r\n      </button>\r\n      <button\r\n        *ngIf=\"sortedAlpha\"\r\n        mat-icon-button\r\n        [matTooltip]=\"'igo.geo.layer.sortMapOrder' | translate\"\r\n        matTooltipShowDelay=\"500\"\r\n        (click)=\"toggleSort(false)\">\r\n        <mat-icon color=\"warn\" svgIcon=\"alert\"></mat-icon>\r\n      </button>\r\n      <button\r\n        mat-icon-button\r\n        [disabled]=\"!hasLayerNotVisible\"\r\n        [matTooltip]=\"onlyVisible ?\r\n        ('igo.geo.layer.resetLayersList' | translate) :\r\n        ('igo.geo.layer.subsetLayersListOnlyVisible' | translate)\"\r\n        matTooltipShowDelay=\"500\"\r\n        [color]=\"onlyVisible ? 'warn' : 'primary'\"\r\n        (click)=\"toggleOnlyVisible()\">\r\n        <mat-icon [svgIcon]=\"!onlyVisible ? 'eye' : 'alert'\"></mat-icon>\r\n      </button>\r\n      <button\r\n        mat-icon-button\r\n        [disabled]=\"!hasLayerOutOfRange\"\r\n        [matTooltip]=\"onlyInRange ?\r\n        ('igo.geo.layer.resetLayersList' | translate) :\r\n        ('igo.geo.layer.subsetLayersListOnlyInRange' | translate)\"\r\n        matTooltipShowDelay=\"500\"\r\n        [color]=\"onlyInRange ? 'warn' : 'primary'\"\r\n        (click)=\"toggleOnlyInRange()\">\r\n        <mat-icon [svgIcon]=\"!onlyInRange ? 'playlist-check' : 'alert'\"></mat-icon>\r\n      </button>\r\n    </ng-container>\r\n  </mat-list-item>\r\n\r\n  <ng-template ngFor let-layer [ngForOf]=\"layers$ | async\">\r\n    <igo-layer-item *ngIf=\"!(excludeBaseLayers && layer.baseLayer)\"\r\n        igoListItem\r\n        [layer]=\"layer\"\r\n        [orderable]=\"orderable\"\r\n        [queryBadge]=\"queryBadge\"\r\n        [expandLegendIfVisible]=\"expandLegendOfVisibleLayers\"\r\n        [updateLegendOnResolutionChange]=\"updateLegendOnResolutionChange\"\r\n        [toggleLegendOnVisibilityChange]=\"toggleLegendOnVisibilityChange\">\r\n\r\n        <ng-container igoLayerItemToolbar\r\n          [ngTemplateOutlet]=\"templateLayerToolbar\"\r\n          [ngTemplateOutletContext]=\"{layer: layer}\">\r\n        </ng-container>\r\n\r\n    </igo-layer-item>\r\n  </ng-template>\r\n</igo-list>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: ["mat-form-field.inputFilter{width:calc(100% - 100px);max-width:200px}"]
                }] }
    ];
    /** @nocollapse */
    LayerListComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] },
        { type: LayerListService }
    ]; };
    LayerListComponent.propDecorators = {
        templateLayerToolbar: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ContentChild"], args: ['igoLayerItemToolbar',] }],
        layers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        floatLabel: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        layerFilterAndSortOptions: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        excludeBaseLayers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        toggleLegendOnVisibilityChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        expandLegendOfVisibleLayers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        updateLegendOnResolutionChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        queryBadge: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return LayerListComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * MapService
 *
 * This service tracks the IgoMap instance, if any.
 * Currently, only one map instance is supported
 * but support for multiple maps may be added in the future.
 * This will impact other services such as the OverlayService
 * because these maps won't be sharing overlayed features.
 */
var MapService = /** @class */ (function () {
    function MapService() {
    }
    /**
     * @return {?}
     */
    MapService.prototype.getMap = /**
     * @return {?}
     */
    function () {
        return this.map;
    };
    /**
     * @param {?} map
     * @return {?}
     */
    MapService.prototype.setMap = /**
     * @param {?} map
     * @return {?}
     */
    function (map$$1) {
        this.map = map$$1;
    };
    MapService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    MapService.ctorParameters = function () { return []; };
    /** @nocollapse */ MapService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function MapService_Factory() { return new MapService(); }, token: MapService, providedIn: "root" });
    return MapService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LayerListBindingDirective = /** @class */ (function () {
    function LayerListBindingDirective(component, mapService, layerListService, route) {
        this.mapService = mapService;
        this.layerListService = layerListService;
        this.route = route;
        this.component = component;
    }
    /**
     * @return {?}
     */
    LayerListBindingDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // Override input layers
        this.component.layers = [];
        this.layers$$ = this.mapService
            .getMap()
            .layers$.subscribe((/**
         * @param {?} layers
         * @return {?}
         */
        function (layers) {
            _this.component.layers = layers.filter((/**
             * @param {?} layer
             * @return {?}
             */
            function (layer) {
                return layer.showInLayerList === true;
            }));
        }));
    };
    /**
     * @return {?}
     */
    LayerListBindingDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.initRoutes();
    };
    /**
     * @private
     * @return {?}
     */
    LayerListBindingDirective.prototype.initRoutes = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.route &&
            (this.route.options.llcKKey || this.route.options.llcAKey ||
                this.route.options.llcVKey || this.route.options.llcVKey)) {
            this.route.queryParams.subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                /** @type {?} */
                var keywordFromUrl = params[(/** @type {?} */ (_this.route.options.llcKKey))];
                /** @type {?} */
                var sortedAplhaFromUrl = params[(/** @type {?} */ (_this.route.options.llcAKey))];
                /** @type {?} */
                var onlyVisibleFromUrl = params[(/** @type {?} */ (_this.route.options.llcVKey))];
                /** @type {?} */
                var onlyInRangeFromUrl = params[(/** @type {?} */ (_this.route.options.llcRKey))];
                if (keywordFromUrl && !_this.layerListService.keywordInitialized) {
                    _this.layerListService.keyword = keywordFromUrl;
                    _this.layerListService.keywordInitialized = true;
                }
                if (sortedAplhaFromUrl && !_this.layerListService.sortedAlphaInitialized) {
                    _this.layerListService.sortedAlpha = sortedAplhaFromUrl === '1' ? true : false;
                    _this.layerListService.sortedAlphaInitialized = true;
                }
                if (onlyVisibleFromUrl &&
                    !_this.layerListService.onlyVisibleInitialized &&
                    _this.component.hasLayerNotVisible) {
                    _this.layerListService.onlyVisible = onlyVisibleFromUrl === '1' ? true : false;
                    _this.layerListService.onlyVisibleInitialized = true;
                }
                if (onlyInRangeFromUrl &&
                    !_this.layerListService.onlyInRangeInitialized &&
                    _this.component.hasLayerOutOfRange) {
                    _this.layerListService.onlyInRange = onlyInRangeFromUrl === '1' ? true : false;
                    _this.layerListService.onlyInRangeInitialized = true;
                }
            }));
        }
    };
    /**
     * @return {?}
     */
    LayerListBindingDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.layers$$.unsubscribe();
    };
    LayerListBindingDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoLayerListBinding]'
                },] }
    ];
    /** @nocollapse */
    LayerListBindingDirective.ctorParameters = function () { return [
        { type: LayerListComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Self"] }] },
        { type: MapService },
        { type: LayerListService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["RouteService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Optional"] }] }
    ]; };
    return LayerListBindingDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Strategies or responsible of synchronizing a feature store and a layer.
 * A strategy can be shared among multiple stores. Sharing a strategy
 * is a good idea when multiple strategies would have on cancelling effect
 * on each other.
 *
 * At creation, strategy is inactive and needs to be manually activated.
 */
var  /**
 * Strategies or responsible of synchronizing a feature store and a layer.
 * A strategy can be shared among multiple stores. Sharing a strategy
 * is a good idea when multiple strategies would have on cancelling effect
 * on each other.
 *
 * At creation, strategy is inactive and needs to be manually activated.
 */
FeatureStoreStrategy = /** @class */ (function () {
    function FeatureStoreStrategy(options) {
        if (options === void 0) { options = {}; }
        this.options = options;
        /**
         * Feature store
         * \@internal
         */
        this.stores = [];
        /**
         * Whether this strategy is active
         * \@internal
         */
        this.active = false;
        this.options = options;
    }
    /**
     * Whether this strategy is active
     */
    /**
     * Whether this strategy is active
     * @return {?}
     */
    FeatureStoreStrategy.prototype.isActive = /**
     * Whether this strategy is active
     * @return {?}
     */
    function () { return this.active; };
    /**
     * Activate the strategy. If it's already active, it'll be deactivated
     * and activated again.
     */
    /**
     * Activate the strategy. If it's already active, it'll be deactivated
     * and activated again.
     * @return {?}
     */
    FeatureStoreStrategy.prototype.activate = /**
     * Activate the strategy. If it's already active, it'll be deactivated
     * and activated again.
     * @return {?}
     */
    function () {
        if (this.active === true) {
            this.doDeactivate();
        }
        this.active = true;
        this.doActivate();
    };
    /**
     * Activate the strategy. If it's already active, it'll be deactivated
     * and activated again.
     */
    /**
     * Activate the strategy. If it's already active, it'll be deactivated
     * and activated again.
     * @return {?}
     */
    FeatureStoreStrategy.prototype.deactivate = /**
     * Activate the strategy. If it's already active, it'll be deactivated
     * and activated again.
     * @return {?}
     */
    function () {
        this.active = false;
        this.doDeactivate();
    };
    /**
     * Bind this strategy to a store
     * @param store Feature store
     */
    /**
     * Bind this strategy to a store
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreStrategy.prototype.bindStore = /**
     * Bind this strategy to a store
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        if (this.stores.indexOf(store) < 0) {
            this.stores.push(store);
        }
    };
    /**
     * Unbind this strategy from store
     * @param store Feature store
     */
    /**
     * Unbind this strategy from store
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreStrategy.prototype.unbindStore = /**
     * Unbind this strategy from store
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        /** @type {?} */
        var index = this.stores.indexOf(store);
        if (index >= 0) {
            this.stores.splice(index, 1);
        }
    };
    /**
     * Do the stataegy activation
     * @internal
     */
    /**
     * Do the stataegy activation
     * \@internal
     * @protected
     * @return {?}
     */
    FeatureStoreStrategy.prototype.doActivate = /**
     * Do the stataegy activation
     * \@internal
     * @protected
     * @return {?}
     */
    function () { };
    /**
     * Do the strategy deactivation
     * @internal
     */
    /**
     * Do the strategy deactivation
     * \@internal
     * @protected
     * @return {?}
     */
    FeatureStoreStrategy.prototype.doDeactivate = /**
     * Do the strategy deactivation
     * \@internal
     * @protected
     * @return {?}
     */
    function () { };
    return FeatureStoreStrategy;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This strategy loads a store's features into it's layer counterpart.
 * The store -> layer binding is a one-way binding. That means any entity
 * added to the store will be added to the layer but the opposite is false.
 *
 * Important: This strategy observes filtered entities, not raw entities. This
 * is not configurable yet.
 */
var  /**
 * This strategy loads a store's features into it's layer counterpart.
 * The store -> layer binding is a one-way binding. That means any entity
 * added to the store will be added to the layer but the opposite is false.
 *
 * Important: This strategy observes filtered entities, not raw entities. This
 * is not configurable yet.
 */
FeatureStoreLoadingStrategy = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(FeatureStoreLoadingStrategy, _super);
    function FeatureStoreLoadingStrategy(options) {
        var _this = _super.call(this, options) || this;
        _this.options = options;
        /**
         * Subscription to the store's features
         */
        _this.stores$$ = new Map();
        return _this;
    }
    /**
     * Bind this strategy to a store and start watching for entities changes
     * @param store Feature store
     */
    /**
     * Bind this strategy to a store and start watching for entities changes
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingStrategy.prototype.bindStore = /**
     * Bind this strategy to a store and start watching for entities changes
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        _super.prototype.bindStore.call(this, store);
        if (this.isActive() === true) {
            this.watchStore(store);
        }
    };
    /**
     * Unbind this strategy from a store and stop watching for entities changes
     * @param store Feature store
     */
    /**
     * Unbind this strategy from a store and stop watching for entities changes
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingStrategy.prototype.unbindStore = /**
     * Unbind this strategy from a store and stop watching for entities changes
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        _super.prototype.unbindStore.call(this, store);
        if (this.isActive() === true) {
            this.unwatchStore(store);
        }
    };
    /**
     * Start watching all stores already bound to that strategy at once.
     * @internal
     */
    /**
     * Start watching all stores already bound to that strategy at once.
     * \@internal
     * @protected
     * @return {?}
     */
    FeatureStoreLoadingStrategy.prototype.doActivate = /**
     * Start watching all stores already bound to that strategy at once.
     * \@internal
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        this.stores.forEach((/**
         * @param {?} store
         * @return {?}
         */
        function (store) { return _this.watchStore(store); }));
    };
    /**
     * Stop watching all stores bound to that strategy
     * @internal
     */
    /**
     * Stop watching all stores bound to that strategy
     * \@internal
     * @protected
     * @return {?}
     */
    FeatureStoreLoadingStrategy.prototype.doDeactivate = /**
     * Stop watching all stores bound to that strategy
     * \@internal
     * @protected
     * @return {?}
     */
    function () {
        this.unwatchAll();
    };
    /**
     * Watch for entities changes in a store.
     * Important: Never observe a store's sorted entities. It makes no sense
     * to display sorted entities (instead of unsorted) on a layer and it
     * would potentially result in a lot of useless computation.
     * @param store Feature store
     */
    /**
     * Watch for entities changes in a store.
     * Important: Never observe a store's sorted entities. It makes no sense
     * to display sorted entities (instead of unsorted) on a layer and it
     * would potentially result in a lot of useless computation.
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingStrategy.prototype.watchStore = /**
     * Watch for entities changes in a store.
     * Important: Never observe a store's sorted entities. It makes no sense
     * to display sorted entities (instead of unsorted) on a layer and it
     * would potentially result in a lot of useless computation.
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        var _this = this;
        if (this.stores$$.has(store)) {
            return;
        }
        /** @type {?} */
        var subscription = store.view.all$()
            .subscribe((/**
         * @param {?} features
         * @return {?}
         */
        function (features) { return _this.onFeaturesChange(features, store); }));
        this.stores$$.set(store, subscription);
    };
    /**
     * Stop watching for entities changes in a store.
     * @param store Feature store
     */
    /**
     * Stop watching for entities changes in a store.
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingStrategy.prototype.unwatchStore = /**
     * Stop watching for entities changes in a store.
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        /** @type {?} */
        var subscription = this.stores$$.get(store);
        if (subscription !== undefined) {
            subscription.unsubscribe();
            this.stores$$.delete(store);
        }
    };
    /**
     * Stop watching for entities changes in all stores.
     */
    /**
     * Stop watching for entities changes in all stores.
     * @private
     * @return {?}
     */
    FeatureStoreLoadingStrategy.prototype.unwatchAll = /**
     * Stop watching for entities changes in all stores.
     * @private
     * @return {?}
     */
    function () {
        Array.from(this.stores$$.entries()).forEach((/**
         * @param {?} entries
         * @return {?}
         */
        function (entries) {
            entries[1].unsubscribe();
        }));
        this.stores$$.clear();
    };
    /**
     * Load features into a layer or clear the layer if the array of features is empty.
     * @param features Store filtered features
     * @param store Feature store
     */
    /**
     * Load features into a layer or clear the layer if the array of features is empty.
     * @private
     * @param {?} features Store filtered features
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingStrategy.prototype.onFeaturesChange = /**
     * Load features into a layer or clear the layer if the array of features is empty.
     * @private
     * @param {?} features Store filtered features
     * @param {?} store Feature store
     * @return {?}
     */
    function (features, store) {
        if (features.length === 0) {
            store.clearLayer();
        }
        else {
            store.setLayerFeatures(features, this.selectMotion(store), this.options.viewScale, this.options.areaRatio, this.options.getFeatureId);
        }
    };
    /**
     * Selects the best motion
     * @param store A FeatureStore to apply the motion
     * @returns The motion selected
     */
    /**
     * Selects the best motion
     * @private
     * @param {?} store A FeatureStore to apply the motion
     * @return {?} The motion selected
     */
    FeatureStoreLoadingStrategy.prototype.selectMotion = /**
     * Selects the best motion
     * @private
     * @param {?} store A FeatureStore to apply the motion
     * @return {?} The motion selected
     */
    function (store) {
        if (this.options.motion !== undefined) {
            return this.options.motion;
        }
        if (store.pristine === true) {
            // If features have just been loaded into the store, move/zoom on them
            return FeatureMotion.Default;
        }
        else if (store.count > store.view.count) {
            // If features have been filtered, move/zoom on the remaining ones
            return FeatureMotion.Default;
        }
        else {
            // On insert, update or delete, do nothing
            return FeatureMotion.None;
        }
    };
    return FeatureStoreLoadingStrategy;
}(FeatureStoreStrategy));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This strategy loads a layer's features into it's store counterpart.
 * The layer -> store binding is a one-way binding. That means any OL feature
 * added to the layer will be added to the store but the opposite is false.
 *
 * Important: In it's current state, this strategy is to meant to be combined
 * with a standard Loading strategy and it would probably cause recursion issues.
 */
var  /**
 * This strategy loads a layer's features into it's store counterpart.
 * The layer -> store binding is a one-way binding. That means any OL feature
 * added to the layer will be added to the store but the opposite is false.
 *
 * Important: In it's current state, this strategy is to meant to be combined
 * with a standard Loading strategy and it would probably cause recursion issues.
 */
FeatureStoreLoadingLayerStrategy = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(FeatureStoreLoadingLayerStrategy, _super);
    function FeatureStoreLoadingLayerStrategy(options) {
        var _this = _super.call(this, options) || this;
        _this.options = options;
        /**
         * Subscription to the store's OL source changes
         */
        _this.stores$$ = new Map();
        return _this;
    }
    /**
     * Bind this strategy to a store and start watching for Ol source changes
     * @param store Feature store
     */
    /**
     * Bind this strategy to a store and start watching for Ol source changes
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingLayerStrategy.prototype.bindStore = /**
     * Bind this strategy to a store and start watching for Ol source changes
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        _super.prototype.bindStore.call(this, store);
        if (this.isActive() === true) {
            this.watchStore(store);
        }
    };
    /**
     * Unbind this strategy from a store and stop watching for Ol source changes
     * @param store Feature store
     */
    /**
     * Unbind this strategy from a store and stop watching for Ol source changes
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingLayerStrategy.prototype.unbindStore = /**
     * Unbind this strategy from a store and stop watching for Ol source changes
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        _super.prototype.unbindStore.call(this, store);
        if (this.isActive() === true) {
            this.unwatchStore(store);
        }
    };
    /**
     * Start watching all stores already bound to that strategy at once.
     * @internal
     */
    /**
     * Start watching all stores already bound to that strategy at once.
     * \@internal
     * @protected
     * @return {?}
     */
    FeatureStoreLoadingLayerStrategy.prototype.doActivate = /**
     * Start watching all stores already bound to that strategy at once.
     * \@internal
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        this.stores.forEach((/**
         * @param {?} store
         * @return {?}
         */
        function (store) { return _this.watchStore(store); }));
    };
    /**
     * Stop watching all stores bound to that strategy
     * @internal
     */
    /**
     * Stop watching all stores bound to that strategy
     * \@internal
     * @protected
     * @return {?}
     */
    FeatureStoreLoadingLayerStrategy.prototype.doDeactivate = /**
     * Stop watching all stores bound to that strategy
     * \@internal
     * @protected
     * @return {?}
     */
    function () {
        this.unwatchAll();
    };
    /**
     * Watch for a store's  OL source changes
     * @param store Feature store
     */
    /**
     * Watch for a store's  OL source changes
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingLayerStrategy.prototype.watchStore = /**
     * Watch for a store's  OL source changes
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        var _this = this;
        if (this.stores$$.has(store)) {
            return;
        }
        this.onSourceChanges(store);
        /** @type {?} */
        var olSource = store.layer.ol.getSource();
        olSource.on('change', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            _this.onSourceChanges(store);
        }));
    };
    /**
     * Stop watching for a store's OL source changes
     * @param store Feature store
     */
    /**
     * Stop watching for a store's OL source changes
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingLayerStrategy.prototype.unwatchStore = /**
     * Stop watching for a store's OL source changes
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        /** @type {?} */
        var key = this.stores$$.get(store);
        if (key !== undefined) {
            Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(key);
            this.stores$$.delete(store);
        }
    };
    /**
     * Stop watching for OL source changes in all stores.
     */
    /**
     * Stop watching for OL source changes in all stores.
     * @private
     * @return {?}
     */
    FeatureStoreLoadingLayerStrategy.prototype.unwatchAll = /**
     * Stop watching for OL source changes in all stores.
     * @private
     * @return {?}
     */
    function () {
        Array.from(this.stores$$.entries()).forEach((/**
         * @param {?} entries
         * @return {?}
         */
        function (entries) {
            Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(entries[1]);
        }));
        this.stores$$.clear();
    };
    /**
     * Load features from an OL source into a  store or clear the store if the source is empty
     * @param features Store filtered features
     * @param store Feature store
     */
    /**
     * Load features from an OL source into a  store or clear the store if the source is empty
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreLoadingLayerStrategy.prototype.onSourceChanges = /**
     * Load features from an OL source into a  store or clear the store if the source is empty
     * @private
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        /** @type {?} */
        var olFeatures = store.layer.ol.getSource().getFeatures();
        if (olFeatures.length === 0) {
            store.clear();
        }
        else {
            store.setStoreOlFeatures(olFeatures);
        }
    };
    return FeatureStoreLoadingLayerStrategy;
}(FeatureStoreStrategy));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * The class is a specialized version of an EntityStore that stores
 * features and the map layer to display them on. Synchronization
 * between the store and the layer is handled by strategies.
 * @template T
 */
var  /**
 * The class is a specialized version of an EntityStore that stores
 * features and the map layer to display them on. Synchronization
 * between the store and the layer is handled by strategies.
 * @template T
 */
FeatureStore = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(FeatureStore, _super);
    function FeatureStore(entities, options) {
        var _this = _super.call(this, entities, options) || this;
        /**
         * Feature store strategies responsible of synchronizing the store
         * and the layer
         */
        _this.strategies = [];
        _this.map = options.map;
        return _this;
    }
    Object.defineProperty(FeatureStore.prototype, "source", {
        /**
         * The layer's data source
         */
        get: /**
         * The layer's data source
         * @return {?}
         */
        function () {
            return this.layer ? (/** @type {?} */ (this.layer.dataSource)) : undefined;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Bind this store to a vector layer
     * @param layer Vector layer
     * @returns Feature store
     */
    /**
     * Bind this store to a vector layer
     * @param {?} layer Vector layer
     * @return {?} Feature store
     */
    FeatureStore.prototype.bindLayer = /**
     * Bind this store to a vector layer
     * @param {?} layer Vector layer
     * @return {?} Feature store
     */
    function (layer) {
        this.layer = layer;
        return this;
    };
    /**
     * Add a strategy to this store
     * @param strategy Feature store strategy
     * @returns Feature store
     */
    /**
     * Add a strategy to this store
     * @param {?} strategy Feature store strategy
     * @param {?=} activate
     * @return {?} Feature store
     */
    FeatureStore.prototype.addStrategy = /**
     * Add a strategy to this store
     * @param {?} strategy Feature store strategy
     * @param {?=} activate
     * @return {?} Feature store
     */
    function (strategy, activate) {
        if (activate === void 0) { activate = false; }
        /** @type {?} */
        var existingStrategy = this.strategies.find((/**
         * @param {?} _strategy
         * @return {?}
         */
        function (_strategy) {
            return strategy.constructor === _strategy.constructor;
        }));
        if (existingStrategy !== undefined) {
            throw new Error('A strategy of this type already exists on that FeatureStore.');
        }
        this.strategies.push(strategy);
        strategy.bindStore(this);
        if (activate === true) {
            strategy.activate();
        }
        return this;
    };
    /**
     * Remove a strategy from this store
     * @param strategy Feature store strategy
     * @returns Feature store
     */
    /**
     * Remove a strategy from this store
     * @param {?} strategy Feature store strategy
     * @return {?} Feature store
     */
    FeatureStore.prototype.removeStrategy = /**
     * Remove a strategy from this store
     * @param {?} strategy Feature store strategy
     * @return {?} Feature store
     */
    function (strategy) {
        /** @type {?} */
        var index = this.strategies.indexOf(strategy);
        if (index >= 0) {
            this.strategies.splice(index, 1);
            strategy.unbindStore(this);
        }
        return this;
    };
    /**
     * Return strategies of a given type
     * @param type Feature store strategy class
     * @returns Strategies
     */
    /**
     * Return strategies of a given type
     * @param {?} type Feature store strategy class
     * @return {?} Strategies
     */
    FeatureStore.prototype.getStrategyOfType = /**
     * Return strategies of a given type
     * @param {?} type Feature store strategy class
     * @return {?} Strategies
     */
    function (type) {
        return this.strategies.find((/**
         * @param {?} strategy
         * @return {?}
         */
        function (strategy) {
            return strategy instanceof type;
        }));
    };
    /**
     * Activate strategies of a given type
     * @param type Feature store strategy class
     */
    /**
     * Activate strategies of a given type
     * @param {?} type Feature store strategy class
     * @return {?}
     */
    FeatureStore.prototype.activateStrategyOfType = /**
     * Activate strategies of a given type
     * @param {?} type Feature store strategy class
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var strategy = this.getStrategyOfType(type);
        if (strategy !== undefined) {
            strategy.activate();
        }
    };
    /**
     * Deactivate strategies of a given type
     * @param type Feature store strategy class
     */
    /**
     * Deactivate strategies of a given type
     * @param {?} type Feature store strategy class
     * @return {?}
     */
    FeatureStore.prototype.deactivateStrategyOfType = /**
     * Deactivate strategies of a given type
     * @param {?} type Feature store strategy class
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var strategy = this.getStrategyOfType(type);
        if (strategy !== undefined) {
            strategy.deactivate();
        }
    };
    /**
     * Set the layer's features and perform a motion to make them visible. Strategies
     * make extensive use of that method.
     * @param features Features
     * @param motion Optional: The type of motion to perform
     */
    /**
     * Set the layer's features and perform a motion to make them visible. Strategies
     * make extensive use of that method.
     * @param {?} features Features
     * @param {?=} motion Optional: The type of motion to perform
     * @param {?=} viewScale
     * @param {?=} areaRatio
     * @param {?=} getId
     * @return {?}
     */
    FeatureStore.prototype.setLayerFeatures = /**
     * Set the layer's features and perform a motion to make them visible. Strategies
     * make extensive use of that method.
     * @param {?} features Features
     * @param {?=} motion Optional: The type of motion to perform
     * @param {?=} viewScale
     * @param {?=} areaRatio
     * @param {?=} getId
     * @return {?}
     */
    function (features, motion, viewScale, areaRatio, getId) {
        var _this = this;
        if (motion === void 0) { motion = FeatureMotion.Default; }
        getId = getId ? getId : _igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityId"];
        this.checkLayer();
        /** @type {?} */
        var olFeatures = features
            .map((/**
         * @param {?} feature
         * @return {?}
         */
        function (feature) { return featureToOl(feature, _this.map.projection, getId); }));
        this.setLayerOlFeatures(olFeatures, motion, viewScale, areaRatio);
    };
    /**
     * Set the store's features from an array of OL features.
     * @param olFeatures Ol features
     */
    /**
     * Set the store's features from an array of OL features.
     * @param {?} olFeatures Ol features
     * @return {?}
     */
    FeatureStore.prototype.setStoreOlFeatures = /**
     * Set the store's features from an array of OL features.
     * @param {?} olFeatures Ol features
     * @return {?}
     */
    function (olFeatures) {
        var _this = this;
        this.checkLayer();
        /** @type {?} */
        var features = olFeatures.map((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            olFeature.set('_featureStore', _this, true);
            return featureFromOl(olFeature, _this.layer.map.projection);
        }));
        this.load((/** @type {?} */ (features)));
    };
    /**
     * Remove all features from the layer
     */
    /**
     * Remove all features from the layer
     * @return {?}
     */
    FeatureStore.prototype.clearLayer = /**
     * Remove all features from the layer
     * @return {?}
     */
    function () {
        this.checkLayer();
        this.source.ol.clear();
    };
    /**
     * Check wether a layer is bound or not and throw an error if not.
     */
    /**
     * Check wether a layer is bound or not and throw an error if not.
     * @private
     * @return {?}
     */
    FeatureStore.prototype.checkLayer = /**
     * Check wether a layer is bound or not and throw an error if not.
     * @private
     * @return {?}
     */
    function () {
        if (this.layer === undefined) {
            throw new Error('This FeatureStore is not bound to a layer.');
        }
    };
    /**
     * Set the layer's features and perform a motion to make them visible.
     * @param features Openlayers feature objects
     * @param motion Optional: The type of motion to perform
     */
    /**
     * Set the layer's features and perform a motion to make them visible.
     * @private
     * @param {?} olFeatures
     * @param {?=} motion Optional: The type of motion to perform
     * @param {?=} viewScale
     * @param {?=} areaRatio
     * @return {?}
     */
    FeatureStore.prototype.setLayerOlFeatures = /**
     * Set the layer's features and perform a motion to make them visible.
     * @private
     * @param {?} olFeatures
     * @param {?=} motion Optional: The type of motion to perform
     * @param {?=} viewScale
     * @param {?=} areaRatio
     * @return {?}
     */
    function (olFeatures, motion, viewScale, areaRatio) {
        if (motion === void 0) { motion = FeatureMotion.Default; }
        /** @type {?} */
        var olFeaturesMap = new Map();
        olFeatures.forEach((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            olFeaturesMap.set(olFeature.getId(), olFeature);
        }));
        /** @type {?} */
        var olFeaturesToRemove = [];
        this.source.ol.forEachFeature((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            /** @type {?} */
            var newOlFeature = olFeaturesMap.get(olFeature.getId());
            if (newOlFeature === undefined) {
                olFeaturesToRemove.push(olFeature);
            }
            else if (newOlFeature.get('_entityRevision') !== olFeature.get('_entityRevision')) {
                olFeaturesToRemove.push(olFeature);
            }
            else {
                olFeaturesMap.delete(newOlFeature.getId());
            }
        }));
        /** @type {?} */
        var olFeaturesToAddIds = Array.from(olFeaturesMap.keys());
        /** @type {?} */
        var olFeaturesToAdd = olFeatures.filter((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            return olFeaturesToAddIds.indexOf(olFeature.getId()) >= 0;
        }));
        if (olFeaturesToRemove.length > 0) {
            this.removeOlFeaturesFromLayer(olFeaturesToRemove);
        }
        if (olFeaturesToAdd.length > 0) {
            this.addOlFeaturesToLayer(olFeaturesToAdd);
        }
        if (olFeaturesToAdd.length > 0) {
            // If features are added, do a motion toward the newly added features
            moveToOlFeatures(this.map, olFeaturesToAdd, motion, viewScale, areaRatio);
        }
        else if (olFeatures.length > 0) {
            // Else, do a motion toward all the features
            moveToOlFeatures(this.map, olFeatures, motion, viewScale, areaRatio);
        }
    };
    /**
     * Add features to the the layer
     * @param features Openlayers feature objects
     */
    /**
     * Add features to the the layer
     * @private
     * @param {?} olFeatures
     * @return {?}
     */
    FeatureStore.prototype.addOlFeaturesToLayer = /**
     * Add features to the the layer
     * @private
     * @param {?} olFeatures
     * @return {?}
     */
    function (olFeatures) {
        var _this = this;
        olFeatures.forEach((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            olFeature.set('_featureStore', _this, true);
        }));
        this.source.ol.addFeatures(olFeatures);
    };
    /**
     * Remove features from the the layer
     * @param features Openlayers feature objects
     */
    /**
     * Remove features from the the layer
     * @private
     * @param {?} olFeatures
     * @return {?}
     */
    FeatureStore.prototype.removeOlFeaturesFromLayer = /**
     * Remove features from the the layer
     * @private
     * @param {?} olFeatures
     * @return {?}
     */
    function (olFeatures) {
        var _this = this;
        olFeatures.forEach((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            _this.source.ol.removeFeature(olFeature);
        }));
    };
    return FeatureStore;
}(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["EntityStore"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OlDragSelectInteraction = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(OlDragSelectInteraction, _super);
    function OlDragSelectInteraction(options) {
        return _super.call(this, options) || this;
    }
    return OlDragSelectInteraction;
}(ol_interaction_DragBox__WEBPACK_IMPORTED_MODULE_50__["default"]));
/**
 * This strategy synchronizes a store and a layer selected entities.
 * The store <-> layer binding is a two-way binding.
 *
 * In many cases, a single strategy bound to multiple stores
 * will yield better results that multiple strategies with each their
 * own store. In the latter scenario, a click on overlapping features
 * would trigger the strategy of each layer and they would cancel
 * each other as well as move the map view around needlessly.
 */
var  /**
 * This strategy synchronizes a store and a layer selected entities.
 * The store <-> layer binding is a two-way binding.
 *
 * In many cases, a single strategy bound to multiple stores
 * will yield better results that multiple strategies with each their
 * own store. In the latter scenario, a click on overlapping features
 * would trigger the strategy of each layer and they would cancel
 * each other as well as move the map view around needlessly.
 */
FeatureStoreSelectionStrategy = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(FeatureStoreSelectionStrategy, _super);
    function FeatureStoreSelectionStrategy(options) {
        var _this = _super.call(this, options) || this;
        _this.options = options;
        _this.overlayStore = _this.createOverlayStore();
        return _this;
    }
    Object.defineProperty(FeatureStoreSelectionStrategy.prototype, "map", {
        /**
         * The map the layers belong to
         */
        get: /**
         * The map the layers belong to
         * @return {?}
         */
        function () { return this.options.map; },
        enumerable: true,
        configurable: true
    });
    /**
     * Bind this strategy to a store and force this strategy's
     * reactivation to properly setup watchers.
     * @param store Feature store
     */
    /**
     * Bind this strategy to a store and force this strategy's
     * reactivation to properly setup watchers.
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.bindStore = /**
     * Bind this strategy to a store and force this strategy's
     * reactivation to properly setup watchers.
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        _super.prototype.bindStore.call(this, store);
        if (this.isActive() === true) {
            // Force reactivation
            this.activate();
        }
    };
    /**
     * Unbind this strategy from a store and force this strategy's
     * reactivation to properly setup watchers.
     * @param store Feature store
     */
    /**
     * Unbind this strategy from a store and force this strategy's
     * reactivation to properly setup watchers.
     * @param {?} store Feature store
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.unbindStore = /**
     * Unbind this strategy from a store and force this strategy's
     * reactivation to properly setup watchers.
     * @param {?} store Feature store
     * @return {?}
     */
    function (store) {
        _super.prototype.unbindStore.call(this, store);
        if (this.isActive() === true) {
            // Force reactivation
            this.activate();
        }
    };
    /**
     * Unselect all entities, from all stores
     */
    /**
     * Unselect all entities, from all stores
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.unselectAll = /**
     * Unselect all entities, from all stores
     * @return {?}
     */
    function () {
        this.stores.forEach((/**
         * @param {?} store
         * @return {?}
         */
        function (store) {
            store.state.updateAll({ selected: false });
        }));
    };
    /**
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.clear = /**
     * @return {?}
     */
    function () {
        this.overlayStore.source.ol.clear();
        this.overlayStore.clear();
    };
    /**
     * Add the overlay layer, setup the map click lsitener and
     * start watching for stores selection
     * @internal
     */
    /**
     * Add the overlay layer, setup the map click lsitener and
     * start watching for stores selection
     * \@internal
     * @protected
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.doActivate = /**
     * Add the overlay layer, setup the map click lsitener and
     * start watching for stores selection
     * \@internal
     * @protected
     * @return {?}
     */
    function () {
        this.addOverlayLayer();
        this.listenToMapClick();
        if (this.options.dragBox === true) {
            this.addDragBoxInteraction();
        }
        this.watchAll();
    };
    /**
     * Remove the overlay layer, remove the map click lsitener and
     * stop watching for stores selection
     * @internal
     */
    /**
     * Remove the overlay layer, remove the map click lsitener and
     * stop watching for stores selection
     * \@internal
     * @protected
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.doDeactivate = /**
     * Remove the overlay layer, remove the map click lsitener and
     * stop watching for stores selection
     * \@internal
     * @protected
     * @return {?}
     */
    function () {
        this.unlistenToMapClick();
        this.removeDragBoxInteraction();
        this.unwatchAll();
        this.removeOverlayLayer();
    };
    /**
     * Create a single observable of all the stores. With a single observable,
     * features can be added all at once to the overlay layer and a single
     * motion can be performed. Multiple observable would have
     * a cancelling effect on each other.
     */
    /**
     * Create a single observable of all the stores. With a single observable,
     * features can be added all at once to the overlay layer and a single
     * motion can be performed. Multiple observable would have
     * a cancelling effect on each other.
     * @private
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.watchAll = /**
     * Create a single observable of all the stores. With a single observable,
     * features can be added all at once to the overlay layer and a single
     * motion can be performed. Multiple observable would have
     * a cancelling effect on each other.
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.unwatchAll();
        /** @type {?} */
        var stores$ = this.stores.map((/**
         * @param {?} store
         * @return {?}
         */
        function (store) {
            return store.stateView.manyBy$((/**
             * @param {?} record
             * @return {?}
             */
            function (record) {
                return record.state.selected === true;
            })).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} records
             * @return {?}
             */
            function (records) { return records.map((/**
             * @param {?} record
             * @return {?}
             */
            function (record) { return record.entity; })); })));
        }));
        this.stores$$ = rxjs__WEBPACK_IMPORTED_MODULE_69__["combineLatest"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(stores$)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["debounceTime"])(25), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["skip"])(1), // Skip intial selection
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} features
         * @return {?}
         */
        function (features) { return features.reduce((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) { return a.concat(b); })); }))).subscribe((/**
         * @param {?} features
         * @return {?}
         */
        function (features) { return _this.onSelectFromStore(features); }));
    };
    /**
     * Stop watching for selection in all stores.
     */
    /**
     * Stop watching for selection in all stores.
     * @private
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.unwatchAll = /**
     * Stop watching for selection in all stores.
     * @private
     * @return {?}
     */
    function () {
        if (this.stores$$ !== undefined) {
            this.stores$$.unsubscribe();
        }
    };
    /**
     * Add a 'singleclick' listener to the map that'll allow selecting
     * features by clicking on the map. The selection will be performed
     * only on the layers bound to this strategy.
     */
    /**
     * Add a 'singleclick' listener to the map that'll allow selecting
     * features by clicking on the map. The selection will be performed
     * only on the layers bound to this strategy.
     * @private
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.listenToMapClick = /**
     * Add a 'singleclick' listener to the map that'll allow selecting
     * features by clicking on the map. The selection will be performed
     * only on the layers bound to this strategy.
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.mapClickListener = this.map.ol.on('singleclick', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            _this.onMapClick(event);
        }));
    };
    /**
     * Remove the map click listener
     */
    /**
     * Remove the map click listener
     * @private
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.unlistenToMapClick = /**
     * Remove the map click listener
     * @private
     * @return {?}
     */
    function () {
        if (this.mapClickListener !== undefined) {
            this.map.ol.un(this.mapClickListener.type, this.mapClickListener.listener);
        }
    };
    /**
     * On map click, select feature at pixel
     * @param event OL MapBrowserPointerEvent
     */
    /**
     * On map click, select feature at pixel
     * @private
     * @param {?} event OL MapBrowserPointerEvent
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.onMapClick = /**
     * On map click, select feature at pixel
     * @private
     * @param {?} event OL MapBrowserPointerEvent
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var exclusive = !ctrlKeyDown(event);
        /** @type {?} */
        var reverse = !exclusive;
        /** @type {?} */
        var olFeatures = event.map.getFeaturesAtPixel(event.pixel, {
            hitTolerance: this.options.hitTolerance || 0,
            layerFilter: (/**
             * @param {?} olLayer
             * @return {?}
             */
            function (olLayer) {
                /** @type {?} */
                var storeOlLayer = _this.stores.find((/**
                 * @param {?} store
                 * @return {?}
                 */
                function (store) {
                    return store.layer.ol === olLayer;
                }));
                return storeOlLayer !== undefined;
            })
        });
        this.onSelectFromMap(olFeatures, exclusive, reverse);
    };
    /**
     * Add a drag box interaction and, on drag box end, select features
     */
    /**
     * Add a drag box interaction and, on drag box end, select features
     * @private
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.addDragBoxInteraction = /**
     * Add a drag box interaction and, on drag box end, select features
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        var e_1, _a;
        /** @type {?} */
        var olDragSelectInteraction;
        /** @type {?} */
        var olInteractions = this.map.ol.getInteractions().getArray();
        try {
            // There can only be one dragbox interaction, so find the current one, if any
            // Don't keep a reference to the current dragbox because we don't want
            // to remove it when this startegy is deactivated
            for (var olInteractions_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(olInteractions), olInteractions_1_1 = olInteractions_1.next(); !olInteractions_1_1.done; olInteractions_1_1 = olInteractions_1.next()) {
                var olInteraction = olInteractions_1_1.value;
                if (olInteraction instanceof OlDragSelectInteraction) {
                    olDragSelectInteraction = olInteraction;
                    break;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (olInteractions_1_1 && !olInteractions_1_1.done && (_a = olInteractions_1.return)) _a.call(olInteractions_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        // If no drag box interaction is found, create a new one and add it to the map
        if (olDragSelectInteraction === undefined) {
            olDragSelectInteraction = new OlDragSelectInteraction({
                condition: ctrlKeyDown
            });
            this.map.ol.addInteraction(olDragSelectInteraction);
            this.olDragSelectInteraction = olDragSelectInteraction;
        }
        this.olDragSelectInteractionEndKey = olDragSelectInteraction.on('boxend', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onDragBoxEnd(event); }));
    };
    /**
     * Remove drag box interaction
     */
    /**
     * Remove drag box interaction
     * @private
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.removeDragBoxInteraction = /**
     * Remove drag box interaction
     * @private
     * @return {?}
     */
    function () {
        if (this.olDragSelectInteractionEndKey !== undefined) {
            Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.olDragSelectInteractionEndKey);
        }
        if (this.olDragSelectInteraction !== undefined) {
            this.map.ol.removeInteraction(this.olDragSelectInteraction);
        }
        this.olDragSelectInteraction = undefined;
    };
    /**
     * On dragbox end, select features in drag box
     * @param event OL MapBrowserPointerEvent
     */
    /**
     * On dragbox end, select features in drag box
     * @private
     * @param {?} event OL MapBrowserPointerEvent
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.onDragBoxEnd = /**
     * On dragbox end, select features in drag box
     * @private
     * @param {?} event OL MapBrowserPointerEvent
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var exclusive = !ctrlKeyDown(event.mapBrowserEvent);
        /** @type {?} */
        var extent = event.target.getGeometry().getExtent();
        /** @type {?} */
        var olFeatures = this.stores.reduce((/**
         * @param {?} acc
         * @param {?} store
         * @return {?}
         */
        function (acc, store) {
            /** @type {?} */
            var olSource = store.layer.ol.getSource();
            acc.push.apply(acc, Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(olSource.getFeaturesInExtent(extent)));
            return acc;
        }), []);
        this.onSelectFromMap(olFeatures, exclusive, false);
    };
    /**
     * When features are selected from the store, add
     * them to this startegy's overlay layer (select on map)
     * @param features Store features
     */
    /**
     * When features are selected from the store, add
     * them to this startegy's overlay layer (select on map)
     * @private
     * @param {?} features Store features
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.onSelectFromStore = /**
     * When features are selected from the store, add
     * them to this startegy's overlay layer (select on map)
     * @private
     * @param {?} features Store features
     * @return {?}
     */
    function (features) {
        /** @type {?} */
        var motion = this.options ? this.options.motion : undefined;
        /** @type {?} */
        var olOverlayFeatures = this.overlayStore.layer.ol.getSource().getFeatures();
        /** @type {?} */
        var overlayFeaturesKeys = olOverlayFeatures.map((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) { return olFeature.getId(); }));
        /** @type {?} */
        var featuresKeys = features.map(this.overlayStore.getKey);
        /** @type {?} */
        var doMotion = overlayFeaturesKeys.length !== featuresKeys.length ||
            !overlayFeaturesKeys.every((/**
             * @param {?} key
             * @return {?}
             */
            function (key) { return featuresKeys.indexOf(key) >= 0; }));
        this.overlayStore.setLayerFeatures(features, doMotion ? motion : FeatureMotion.None, this.options.viewScale, this.options.areaRatio, this.options.getFeatureId);
    };
    /**
     * When features are selected from the map, also select them
     * in their store.
     * @param olFeatures OL feature objects
     */
    /**
     * When features are selected from the map, also select them
     * in their store.
     * @private
     * @param {?} olFeatures OL feature objects
     * @param {?} exclusive
     * @param {?} reverse
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.onSelectFromMap = /**
     * When features are selected from the map, also select them
     * in their store.
     * @private
     * @param {?} olFeatures OL feature objects
     * @param {?} exclusive
     * @param {?} reverse
     * @return {?}
     */
    function (olFeatures, exclusive, reverse) {
        var _this = this;
        /** @type {?} */
        var groupedFeatures = this.groupFeaturesByStore(olFeatures);
        this.stores.forEach((/**
         * @param {?} store
         * @return {?}
         */
        function (store) {
            /** @type {?} */
            var features = groupedFeatures.get(store);
            if (features === undefined && exclusive === true) {
                _this.unselectAllFeaturesFromStore(store);
            }
            else if (features === undefined && exclusive === false) ;
            else {
                _this.selectFeaturesFromStore(store, features, exclusive, reverse);
            }
        }));
    };
    /**
     * Select features in store
     * @param store: Feature store
     * @param features Features
     */
    /**
     * Select features in store
     * @private
     * @param {?} store
     * @param {?} features Features
     * @param {?} exclusive
     * @param {?} reverse
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.selectFeaturesFromStore = /**
     * Select features in store
     * @private
     * @param {?} store
     * @param {?} features Features
     * @param {?} exclusive
     * @param {?} reverse
     * @return {?}
     */
    function (store, features, exclusive, reverse) {
        if (reverse === true) {
            store.state.reverseMany(features, ['selected']);
        }
        else {
            store.state.updateMany(features, { selected: true }, exclusive);
        }
    };
    /**
     * Unselect all features from store
     * @param store: Feature store
     */
    /**
     * Unselect all features from store
     * @private
     * @param {?} store
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.unselectAllFeaturesFromStore = /**
     * Unselect all features from store
     * @private
     * @param {?} store
     * @return {?}
     */
    function (store) {
        store.state.updateAll({ selected: false });
    };
    /**
     * This method returns a store -> features mapping from a list
     * of OL selected features. OL features keep a reference to the store
     * they are from.
     * @param olFeatures: OL feature objects
     * @returns Store -> features mapping
     */
    /**
     * This method returns a store -> features mapping from a list
     * of OL selected features. OL features keep a reference to the store
     * they are from.
     * @private
     * @param {?} olFeatures
     * @return {?} Store -> features mapping
     */
    FeatureStoreSelectionStrategy.prototype.groupFeaturesByStore = /**
     * This method returns a store -> features mapping from a list
     * of OL selected features. OL features keep a reference to the store
     * they are from.
     * @private
     * @param {?} olFeatures
     * @return {?} Store -> features mapping
     */
    function (olFeatures) {
        /** @type {?} */
        var groupedFeatures = new Map();
        if (olFeatures === null || olFeatures === undefined) {
            return groupedFeatures;
        }
        olFeatures.forEach((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            /** @type {?} */
            var store = olFeature.get('_featureStore');
            if (store === undefined) {
                return;
            }
            /** @type {?} */
            var features = groupedFeatures.get(store);
            if (features === undefined) {
                features = [];
                groupedFeatures.set(store, features);
            }
            /** @type {?} */
            var feature = store.get(olFeature.getId());
            if (feature !== undefined) {
                features.push(feature);
            }
        }));
        return groupedFeatures;
    };
    /**
     * Create an overlay store that'll contain the selected features.
     * @returns Overlay store
     */
    /**
     * Create an overlay store that'll contain the selected features.
     * @private
     * @return {?} Overlay store
     */
    FeatureStoreSelectionStrategy.prototype.createOverlayStore = /**
     * Create an overlay store that'll contain the selected features.
     * @private
     * @return {?} Overlay store
     */
    function () {
        /** @type {?} */
        var overlayLayer = this.options.layer
            ? this.options.layer
            : this.createOverlayLayer();
        return new FeatureStore([], { map: this.map }).bindLayer(overlayLayer);
    };
    /**
     * Create an overlay store that'll contain the selected features.
     * @returns Overlay layer
     */
    /**
     * Create an overlay store that'll contain the selected features.
     * @private
     * @return {?} Overlay layer
     */
    FeatureStoreSelectionStrategy.prototype.createOverlayLayer = /**
     * Create an overlay store that'll contain the selected features.
     * @private
     * @return {?} Overlay layer
     */
    function () {
        return new VectorLayer({
            zIndex: 300,
            source: new FeatureDataSource(),
            style: undefined,
            showInLayerList: false,
            exportable: false,
            browsable: false
        });
    };
    /**
     * Add the overlay store's layer to the map to display the selected
     * features.
     */
    /**
     * Add the overlay store's layer to the map to display the selected
     * features.
     * @private
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.addOverlayLayer = /**
     * Add the overlay store's layer to the map to display the selected
     * features.
     * @private
     * @return {?}
     */
    function () {
        if (this.overlayStore.layer.map === undefined) {
            this.map.addLayer(this.overlayStore.layer);
        }
    };
    /**
     * Remove the overlay layer from the map
     */
    /**
     * Remove the overlay layer from the map
     * @private
     * @return {?}
     */
    FeatureStoreSelectionStrategy.prototype.removeOverlayLayer = /**
     * Remove the overlay layer from the map
     * @private
     * @return {?}
     */
    function () {
        this.overlayStore.source.ol.clear();
        this.map.removeLayer(this.overlayStore.layer);
    };
    return FeatureStoreSelectionStrategy;
}(FeatureStoreStrategy));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Create an Openlayers feature object out of a feature definition.
 * The output object has a reference to the feature id.
 * @param {?} feature Feature definition
 * @param {?} projectionOut Feature object projection
 * @param {?=} getId
 * @return {?} OpenLayers feature object
 */
function featureToOl(feature, projectionOut, getId) {
    getId = getId ? getId : _igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityId"];
    /** @type {?} */
    var olFormat = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_65__["default"]();
    /** @type {?} */
    var olFeature = olFormat.readFeature(feature, {
        dataProjection: feature.projection,
        featureProjection: projectionOut
    });
    olFeature.setId(getId(feature));
    /** @type {?} */
    var title = Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityTitle"])(feature);
    if (title !== undefined) {
        olFeature.set('_title', title, true);
    }
    if (feature.extent !== undefined) {
        olFeature.set('_extent', feature.extent, true);
    }
    if (feature.projection !== undefined) {
        olFeature.set('_projection', feature.projection, true);
    }
    if (feature.extent !== undefined) {
        olFeature.set('_extent', feature.extent, true);
    }
    /** @type {?} */
    var mapTitle = Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityProperty"])(feature, 'meta.mapTitle');
    if (mapTitle !== undefined) {
        olFeature.set('_mapTitle', mapTitle, true);
    }
    olFeature.set('_entityRevision', Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityRevision"])(feature), true);
    return olFeature;
}
/**
 * Create a feature object out of an OL feature
 * The output object has a reference to the feature id.
 * @param {?} olFeature OL Feature
 * @param {?} projectionIn OL feature projection
 * @param {?=} projectionOut Feature projection
 * @return {?} Feature
 */
function featureFromOl(olFeature, projectionIn, projectionOut) {
    if (projectionOut === void 0) { projectionOut = 'EPSG:4326'; }
    /** @type {?} */
    var olFormat = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_65__["default"]();
    /** @type {?} */
    var keys = olFeature.getKeys().filter((/**
     * @param {?} key
     * @return {?}
     */
    function (key) {
        return !key.startsWith('_') && key !== 'geometry';
    }));
    /** @type {?} */
    var properties = keys.reduce((/**
     * @param {?} acc
     * @param {?} key
     * @return {?}
     */
    function (acc, key) {
        acc[key] = olFeature.get(key);
        return acc;
    }), {});
    /** @type {?} */
    var geometry = olFormat.writeGeometryObject(olFeature.getGeometry(), {
        dataProjection: projectionOut,
        featureProjection: projectionIn
    });
    /** @type {?} */
    var title = olFeature.get('_title');
    /** @type {?} */
    var mapTitle = olFeature.get('_mapTitle');
    /** @type {?} */
    var id = olFeature.getId();
    return {
        type: FEATURE,
        projection: projectionOut,
        extent: olFeature.get('_extent'),
        meta: {
            id: id,
            title: title ? title : (mapTitle ? mapTitle : id),
            mapTitle: mapTitle,
            revision: olFeature.getRevision()
        },
        properties: properties,
        geometry: geometry
    };
}
/**
 * Compute an OL feature extent in it's map projection
 * @param {?} map Map
 * @param {?} olFeature OL feature
 * @return {?} Extent in the map projection
 */
function computeOlFeatureExtent(map$$1, olFeature) {
    /** @type {?} */
    var olExtent = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["createEmpty"])();
    /** @type {?} */
    var olFeatureExtent = olFeature.get('_extent');
    /** @type {?} */
    var olFeatureProjection = olFeature.get('_projection');
    if (olFeatureExtent !== undefined && olFeatureProjection !== undefined) {
        olExtent = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transformExtent"])(olFeatureExtent, olFeatureProjection, map$$1.projection);
    }
    else {
        /** @type {?} */
        var olGeometry = olFeature.getGeometry();
        if (olGeometry !== null) {
            olExtent = olGeometry.getExtent();
        }
    }
    return olExtent;
}
/**
 * Compute a multiple OL features extent in their map projection
 * @param {?} map Map
 * @param {?} olFeatures OL features
 * @return {?} Extent in the map projection
 */
function computeOlFeaturesExtent(map$$1, olFeatures) {
    /** @type {?} */
    var extent = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["createEmpty"])();
    olFeatures.forEach((/**
     * @param {?} olFeature
     * @return {?}
     */
    function (olFeature) {
        /** @type {?} */
        var featureExtent = computeOlFeatureExtent(map$$1, olFeature);
        Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["extend"])(extent, featureExtent);
    }));
    return extent;
}
/**
 * Scale an extent.
 * @param {?} extent Extent
 * @param {?} scale
 * @return {?} Scaled extent
 */
function scaleExtent(extent, scale) {
    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getSize"])(extent), 2), width = _a[0], height = _a[1];
    return [
        scale[3] ? extent[0] - width * scale[3] : extent[0],
        scale[2] ? extent[1] - height * scale[2] : extent[1],
        scale[1] ? extent[2] + width * scale[1] : extent[2],
        scale[0] ? extent[3] + height * scale[0] : extent[3]
    ];
}
/**
 * Return true if features are out of view.
 * If features are too close to the edge, they are considered out of view.
 * We define the edge as 5% of the extent size.
 * @param {?} map Map
 * @param {?} featuresExtent The features's extent
 * @return {?} Return true if features are out of view
 */
function featuresAreOutOfView(map$$1, featuresExtent) {
    /** @type {?} */
    var mapExtent = map$$1.getExtent();
    /** @type {?} */
    var edgeRatio = 0.05;
    /** @type {?} */
    var scale = [-1, -1, -1, -1].map((/**
     * @param {?} x
     * @return {?}
     */
    function (x) { return x * edgeRatio; }));
    /** @type {?} */
    var viewExtent = scaleExtent(mapExtent, (/** @type {?} */ (scale)));
    return !Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["containsExtent"])(viewExtent, featuresExtent);
}
/**
 * Return true if features are too deep into the view. This results
 * in features being too small.
 * Features are considered too small if their extent occupies less than
 * 1% of the map extent.
 * @param {?} map Map
 * @param {?} featuresExtent The features's extent
 * @param {?=} areaRatio The features extent to view extent acceptable ratio
 * @return {?} Return true if features are too deep in the view
 */
function featuresAreTooDeepInView(map$$1, featuresExtent, areaRatio) {
    // An area ratio of 0.004 means that the feature extent's width and height
    // should be about 1/16 of the map extent's width and height
    areaRatio = areaRatio ? areaRatio : 0.004;
    /** @type {?} */
    var mapExtent = map$$1.getExtent();
    /** @type {?} */
    var mapExtentArea = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getArea"])(mapExtent);
    /** @type {?} */
    var featuresExtentArea = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getArea"])(featuresExtent);
    return featuresExtentArea / mapExtentArea < areaRatio;
}
/**
 * Fit view to include the features extent.
 * By default, this method will let the features occupy about 50% of the viewport.
 * @param {?} map Map
 * @param {?} olFeatures OL features
 * @param {?=} motion To motion to the new map view
 * @param {?=} scale If this is defined, the original view will be scaled
 *  by that factor before any logic is applied.
 * @param {?=} areaRatio
 * @return {?}
 */
function moveToOlFeatures(map$$1, olFeatures, motion, scale, areaRatio) {
    if (motion === void 0) { motion = FeatureMotion.Default; }
    /** @type {?} */
    var featuresExtent = computeOlFeaturesExtent(map$$1, olFeatures);
    /** @type {?} */
    var viewExtent = featuresExtent;
    if (scale !== undefined) {
        viewExtent = scaleExtent(viewExtent, scale);
    }
    if (motion === FeatureMotion.Zoom) {
        map$$1.viewController.zoomToExtent(viewExtent);
    }
    else if (motion === FeatureMotion.Move) {
        map$$1.viewController.moveToExtent(viewExtent);
    }
    else if (motion === FeatureMotion.Default) {
        if (featuresAreOutOfView(map$$1, featuresExtent) ||
            featuresAreTooDeepInView(map$$1, featuresExtent, areaRatio)) {
            map$$1.viewController.zoomToExtent(viewExtent);
        }
    }
}
/**
 * Hide an OL feature
 * @param {?} olFeature OL feature
 * @return {?}
 */
function hideOlFeature(olFeature) {
    olFeature.setStyle(new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({}));
}
/**
 * Try to bind a layer to a store if none is bound already.
 * The layer will also be added to the store's map.
 * If no layer is given to that function, a basic one will be created.
 * @param {?} store The store to bind the layer
 * @param {?=} layer An optional VectorLayer
 * @return {?}
 */
function tryBindStoreLayer(store, layer) {
    if (store.layer !== undefined) {
        if (store.layer.map === undefined) {
            store.map.addLayer(store.layer);
        }
        return;
    }
    layer = layer ? layer : new VectorLayer({
        source: new FeatureDataSource()
    });
    store.bindLayer(layer);
    if (store.layer.map === undefined) {
        store.map.addLayer(store.layer);
    }
}
/**
 * Try to add a loading strategy to a store and activate it.
 * If no strategy is given to that function, a basic one will be created.
 * @param {?} store The store to bind the loading strategy
 * @param {?=} strategy An optional loading strategy
 * @return {?}
 */
function tryAddLoadingStrategy(store, strategy) {
    if (store.getStrategyOfType(FeatureStoreLoadingStrategy) !== undefined) {
        store.activateStrategyOfType(FeatureStoreLoadingStrategy);
        return;
    }
    strategy = strategy ? strategy : new FeatureStoreLoadingStrategy({});
    store.addStrategy(strategy);
    strategy.activate();
}
/**
 * Try to add a selection strategy to a store and activate it.
 * If no strategy is given to that function, a basic one will be created.
 * @param {?} store The store to bind the selection strategy
 * @param {?=} strategy
 * @return {?}
 */
function tryAddSelectionStrategy(store, strategy) {
    if (store.getStrategyOfType(FeatureStoreSelectionStrategy) !== undefined) {
        store.activateStrategyOfType(FeatureStoreSelectionStrategy);
        return;
    }
    strategy = strategy ? strategy : new FeatureStoreSelectionStrategy({
        map: store.map
    });
    store.addStrategy(strategy);
    strategy.activate();
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Create an overlay layer and it's source
 * @return {?} Overlay layer
 */
function createOverlayLayer() {
    /** @type {?} */
    var overlayDataSource = new FeatureDataSource();
    return new VectorLayer({
        title: 'Overlay',
        zIndex: 300,
        source: overlayDataSource,
        style: createOverlayLayerStyle()
    });
}
/**
 * Create an overlay style with markers for points and a basic stroke/fill
 * combination for lines and polygons
 * @return {?} Style function
 */
function createOverlayLayerStyle() {
    /** @type {?} */
    var defaultStyle = createOverlayDefaultStyle();
    /** @type {?} */
    var markerStyle = createOverlayMarkerStyle();
    return (/**
     * @param {?} olFeature
     * @return {?}
     */
    function (olFeature) {
        /** @type {?} */
        var geometryType = olFeature.getGeometry().getType();
        /** @type {?} */
        var style$$1 = geometryType === 'Point' ? markerStyle : defaultStyle;
        style$$1.getText().setText(olFeature.get('_mapTitle'));
        return style$$1;
    });
}
/**
 * Create a basic style for lines and polygons
 * @return {?} Style
 */
function createOverlayDefaultStyle() {
    /** @type {?} */
    var stroke = new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
        width: 2,
        color: [0, 161, 222, 1]
    });
    /** @type {?} */
    var fill = new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
        color: [0, 161, 222, 0.15]
    });
    return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
        stroke: stroke,
        fill: fill,
        image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
            radius: 5,
            stroke: stroke,
            fill: fill
        }),
        text: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Text"]({
            font: '12px Calibri,sans-serif',
            fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({ color: '#000' }),
            stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({ color: '#fff', width: 3 }),
            overflow: true
        })
    });
}
/**
 * Create a marker style for points
 * @param {?=} color
 * @return {?} Style
 */
function createOverlayMarkerStyle(color) {
    if (color === void 0) { color = 'blue'; }
    /** @type {?} */
    var iconColor;
    switch (color) {
        case 'blue':
        case 'red':
        case 'yellow':
        case 'green':
            iconColor = color;
            break;
        default:
            iconColor = 'blue';
            break;
    }
    return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
        image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Icon"]({
            src: './assets/igo2/geo/icons/place_' + iconColor + '_36px.svg',
            imgSize: [36, 36],
            // for ie
            anchor: [0.5, 1]
        }),
        text: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Text"]({
            font: '12px Calibri,sans-serif',
            fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({ color: '#000' }),
            stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({ color: '#fff', width: 3 }),
            overflow: true
        })
    });
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This class is simply a shortcut for adding features to a map.
 * It does nothing more than a standard layer but it's shipped with
 * a defautl style based on the geometry type of the features it contains.
 * \@todo Enhance that by using a FeatureStore and strategies.
 */
var  /**
 * This class is simply a shortcut for adding features to a map.
 * It does nothing more than a standard layer but it's shipped with
 * a defautl style based on the geometry type of the features it contains.
 * \@todo Enhance that by using a FeatureStore and strategies.
 */
Overlay = /** @class */ (function () {
    function Overlay(map$$1) {
        this.layer = createOverlayLayer();
        this.setMap(map$$1);
    }
    Object.defineProperty(Overlay.prototype, "dataSource", {
        /**
         * Overlay layer's data source
         */
        get: /**
         * Overlay layer's data source
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (this.layer.dataSource));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Bind this to a map and add the overlay layer to that map
     * @param map Map
     */
    /**
     * Bind this to a map and add the overlay layer to that map
     * @param {?} map Map
     * @return {?}
     */
    Overlay.prototype.setMap = /**
     * Bind this to a map and add the overlay layer to that map
     * @param {?} map Map
     * @return {?}
     */
    function (map$$1) {
        if (map$$1 === undefined) {
            if (this.map !== undefined) {
                this.map.ol.removeLayer(this.layer.ol);
            }
        }
        else {
            map$$1.ol.addLayer(this.layer.ol);
        }
        this.map = map$$1;
    };
    /**
     * Set the overlay features and, optionally, move to them
     * @param features Features
     * @param motion Optional: Apply this motion to the map view
     */
    /**
     * Set the overlay features and, optionally, move to them
     * @param {?} features Features
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    Overlay.prototype.setFeatures = /**
     * Set the overlay features and, optionally, move to them
     * @param {?} features Features
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    function (features, motion) {
        if (motion === void 0) { motion = FeatureMotion.Default; }
        this.clear();
        this.addFeatures(features, motion);
    };
    /**
     * Add a feature to the  overlay and, optionally, move to it
     * @param feature Feature
     * @param motion Optional: Apply this motion to the map view
     */
    /**
     * Add a feature to the  overlay and, optionally, move to it
     * @param {?} feature Feature
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    Overlay.prototype.addFeature = /**
     * Add a feature to the  overlay and, optionally, move to it
     * @param {?} feature Feature
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    function (feature, motion) {
        if (motion === void 0) { motion = FeatureMotion.Default; }
        this.addFeatures([feature], motion);
    };
    /**
     * Add features to the  overlay and, optionally, move to them
     * @param features Features
     * @param motion Optional: Apply this motion to the map view
     */
    /**
     * Add features to the  overlay and, optionally, move to them
     * @param {?} features Features
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    Overlay.prototype.addFeatures = /**
     * Add features to the  overlay and, optionally, move to them
     * @param {?} features Features
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    function (features, motion) {
        var _this = this;
        if (motion === void 0) { motion = FeatureMotion.Default; }
        /** @type {?} */
        var olFeatures = [];
        features.forEach((/**
         * @param {?} feature
         * @return {?}
         */
        function (feature) {
            /** @type {?} */
            var olFeature = featureToOl(feature, _this.map.projection);
            /** @type {?} */
            var olGeometry = olFeature.getGeometry();
            if (olGeometry === null) {
                return;
            }
            olFeatures.push(olFeature);
        }));
        this.addOlFeatures(olFeatures, motion);
    };
    /**
     * Add a OpenLayers feature to the  overlay and, optionally, move to it
     * @param olFeature OpenLayers Feature
     * @param motion Optional: Apply this motion to the map view
     */
    /**
     * Add a OpenLayers feature to the  overlay and, optionally, move to it
     * @param {?} olFeature OpenLayers Feature
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    Overlay.prototype.addOlFeature = /**
     * Add a OpenLayers feature to the  overlay and, optionally, move to it
     * @param {?} olFeature OpenLayers Feature
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    function (olFeature, motion) {
        if (motion === void 0) { motion = FeatureMotion.Default; }
        this.addOlFeature([olFeature], motion);
    };
    /**
     * Add OpenLayers features to the overlay and, optionally, move to them
     * @param olFeatures OpenLayers Features
     * @param motion Optional: Apply this motion to the map view
     */
    /**
     * Add OpenLayers features to the overlay and, optionally, move to them
     * @param {?} olFeatures OpenLayers Features
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    Overlay.prototype.addOlFeatures = /**
     * Add OpenLayers features to the overlay and, optionally, move to them
     * @param {?} olFeatures OpenLayers Features
     * @param {?=} motion Optional: Apply this motion to the map view
     * @return {?}
     */
    function (olFeatures, motion) {
        if (motion === void 0) { motion = FeatureMotion.Default; }
        this.dataSource.ol.addFeatures(olFeatures);
        moveToOlFeatures(this.map, olFeatures, motion);
    };
    /**
     * Clear the overlay
     */
    /**
     * Clear the overlay
     * @return {?}
     */
    Overlay.prototype.clear = /**
     * Clear the overlay
     * @return {?}
     */
    function () {
        this.dataSource.ol.clear();
    };
    return Overlay;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LayerWatcher = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(LayerWatcher, _super);
    function LayerWatcher() {
        var _this = _super.call(this) || this;
        _this.loaded = 0;
        _this.loading = 0;
        _this.layers = [];
        _this.subscriptions = [];
        return _this;
    }
    /**
     * @return {?}
     */
    LayerWatcher.prototype.watch = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    LayerWatcher.prototype.unwatch = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.layers.forEach((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return _this.unwatchLayer(layer); }), this);
    };
    /**
     * @param {?} layer
     * @return {?}
     */
    LayerWatcher.prototype.watchLayer = /**
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        var _this = this;
        if (layer.status$ === undefined) {
            return;
        }
        this.layers.push(layer);
        /** @type {?} */
        var layer$$ = layer.status$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["distinctUntilChanged"])())
            .subscribe((/**
         * @param {?} status
         * @return {?}
         */
        function (status) {
            if (status === _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Working) {
                _this.loading += 1;
            }
            else if (status === _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done) {
                _this.loaded += 1;
            }
            if (_this.loaded >= _this.loading) {
                _this.loading = _this.loaded = 0;
                _this.status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done;
            }
            else if (_this.loading > 0) {
                _this.status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Working;
            }
        }));
        this.subscriptions.push(layer$$);
    };
    /**
     * @param {?} layer
     * @return {?}
     */
    LayerWatcher.prototype.unwatchLayer = /**
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var index = this.layers.indexOf(layer);
        if (index >= 0) {
            /** @type {?} */
            var status_1 = ((/** @type {?} */ (layer))).watcher.status;
            if ([_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Working, _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Waiting].indexOf(status_1) !== -1) {
                this.loaded += 1;
            }
            this.subscriptions[index].unsubscribe();
            this.subscriptions.splice(index, 1);
            this.layers.splice(index, 1);
            ((/** @type {?} */ (layer))).watcher.unwatch();
        }
    };
    return LayerWatcher;
}(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["Watcher"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {number} */
var MapViewAction = {
    Move: 0,
    Zoom: 1,
};
MapViewAction[MapViewAction.Move] = 'Move';
MapViewAction[MapViewAction.Zoom] = 'Zoom';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This method extracts a coordinate tuple from a string.
 * @param {?} str Any string
 * @param {?} mapProjection string Map Projection
 * @return {?} object:
 *             lonLat: Coordinate,
 *             message: Message of error,
 *             radius: radius of the confience of coordinate,
 *             conf: confidence of the coordinate}
 */
function stringToLonLat(str, mapProjection) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j;
    /** @type {?} */
    var lonLat;
    /** @type {?} */
    var coordStr;
    /** @type {?} */
    var negativeLon;
    /** @type {?} */
    var degreesLon;
    /** @type {?} */
    var minutesLon;
    /** @type {?} */
    var secondsLon;
    /** @type {?} */
    var directionLon;
    /** @type {?} */
    var decimalLon;
    /** @type {?} */
    var negativeLat;
    /** @type {?} */
    var degreesLat;
    /** @type {?} */
    var minutesLat;
    /** @type {?} */
    var secondsLat;
    /** @type {?} */
    var directionLat;
    /** @type {?} */
    var decimalLat;
    /** @type {?} */
    var pattern;
    /** @type {?} */
    var timeZone;
    /** @type {?} */
    var radius;
    /** @type {?} */
    var conf;
    /** @type {?} */
    var lon;
    /** @type {?} */
    var lat;
    /** @type {?} */
    var projectionPattern = '(;[\\d]{4,6})';
    /** @type {?} */
    var toProjection = '4326';
    /** @type {?} */
    var projectionStr;
    /** @type {?} */
    var projectionRegex = new RegExp(projectionPattern, 'g');
    /** @type {?} */
    var lonlatCoord = '([-+])?([\\d]{1,3})([,.](\\d+))?';
    /** @type {?} */
    var lonLatPattern = lonlatCoord + "[\\s,.]\\s*" + lonlatCoord;
    /** @type {?} */
    var lonLatRegex = new RegExp("^" + lonLatPattern + "$", 'g');
    /** @type {?} */
    var dmsCoord = '([0-9]{1,2})[:|°]?\\s*([0-9]{1,2})?[:|\'|′|’]?\\s*([0-9]{1,2}(?:\.[0-9]+){0,1})?\\s*["|″|”]?\\s*';
    /** @type {?} */
    var dmsCoordPattern = dmsCoord + "([N|S]),?\\s*" + dmsCoord + "([E|W])";
    /** @type {?} */
    var dmsRegex = new RegExp("^" + dmsCoordPattern, 'gi');
    /** @type {?} */
    var patternUtmMtm = '(UTM|MTM)\-?(\\d{1,2})[\\s,.]*(\\d+[\\s.,]?\\d+)[\\s,.]+(\\d+[\\s.,]?\\d+)';
    /** @type {?} */
    var utmMtmRegex = new RegExp("^" + patternUtmMtm, 'gi');
    /** @type {?} */
    var ddCoord = '([-+])?(\\d{1,3})[,.](\\d+)';
    /** @type {?} */
    var patternDd = ddCoord + "[,.]?\\s*" + ddCoord;
    /** @type {?} */
    var ddRegex = new RegExp("^" + patternDd, 'g');
    /** @type {?} */
    var dmdCoord = '([-+])?(\\d{1,3})[\\s,.]{1}(\\d{1,2})[\\s,.]{1}(\\d{1,2})[.,]?(\\d{1,5})?';
    /** @type {?} */
    var patternDmd = dmdCoord + "[,.]?\\s*" + dmdCoord;
    /** @type {?} */
    var dmdRegex = new RegExp("^" + patternDmd, 'g');
    // tslint:disable:max-line-length
    /** @type {?} */
    var patternBELL = 'LAT\\s*[\\s:]*\\s*([-+])?(\\d{1,2})[\\s.,]?(\\d+)?[\\s.,]?\\s*(\\d{1,2}([.,]\\d+)?)?\\s*(N|S|E|W)?\\s*LONG\\s*[\\s:]*\\s*([-+])?(\\d{1,3})[\\s.,]?(\\d+)?[\\s.,]?\\s*(\\d{1,2}([.,]\\d+)?)?\\s*(N|S|E|W)?\\s*UNC\\s*[\\s:]?\\s*(\\d+)\\s*CONF\\s*[\\s:]?\\s*(\\d{1,3})';
    /** @type {?} */
    var bellRegex = new RegExp("^" + patternBELL + "?", 'gi');
    /** @type {?} */
    var mmCoord = '([-+]?\\d+)[,.]?(\\d+)?';
    /** @type {?} */
    var mmPattern = mmCoord + "[\\s,.]\\s*" + mmCoord;
    /** @type {?} */
    var mmRegex = new RegExp("^" + mmPattern + "$", 'g');
    str = str.toLocaleUpperCase();
    // Extract projection
    if (projectionRegex.test(str)) {
        _a = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(str.split(';'), 2), coordStr = _a[0], projectionStr = _a[1];
    }
    else {
        coordStr = str;
    }
    if (lonLatRegex.test(coordStr)) {
        _b = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(coordStr.match(lonLatPattern), 9), negativeLon = _b[1], lon = _b[2], decimalLon = _b[4], negativeLat = _b[5], lat = _b[6], decimalLat = _b[8];
        lon = parseFloat((negativeLon ? negativeLon : '') + lon + '.' + decimalLon);
        lat = parseFloat((negativeLat ? negativeLat : '') + lat + '.' + decimalLat);
    }
    else if (dmsRegex.test(coordStr)) {
        _c = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(coordStr.match(dmsCoordPattern), 9), degreesLon = _c[1], minutesLon = _c[2], secondsLon = _c[3], directionLon = _c[4], degreesLat = _c[5], minutesLat = _c[6], secondsLat = _c[7], directionLat = _c[8];
        lon = convertDMSToDD(parseFloat(degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);
        lat = convertDMSToDD(parseFloat(degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);
    }
    else if (utmMtmRegex.test(coordStr)) {
        _d = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(coordStr.match(patternUtmMtm), 5), pattern = _d[1], timeZone = _d[2], lon = _d[3], lat = _d[4];
        /** @type {?} */
        var utm = '+proj=' + pattern + ' +zone=' + timeZone;
        /** @type {?} */
        var wgs84 = '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs';
        _e = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(Object(proj4__WEBPACK_IMPORTED_MODULE_27__["default"])(utm.toLocaleLowerCase(), wgs84, [parseFloat(lon), parseFloat(lat)]), 2), lon = _e[0], lat = _e[1];
    }
    else if (dmdRegex.test(coordStr)) {
        _f = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(coordStr.match(patternDmd), 11), negativeLon = _f[1], degreesLon = _f[2], minutesLon = _f[3], secondsLon = _f[4], decimalLon = _f[5], negativeLat = _f[6], degreesLat = _f[7], minutesLat = _f[8], secondsLat = _f[9], decimalLat = _f[10];
        lon = convertDMSToDD(parseFloat((negativeLon ? negativeLon : '') + degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);
        lat = convertDMSToDD(parseFloat((negativeLat ? negativeLat : '') + degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);
    }
    else if (ddRegex.test(coordStr)) {
        _g = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(coordStr.match(patternDd), 7), negativeLon = _g[1], degreesLon = _g[2], decimalLon = _g[3], negativeLat = _g[4], degreesLat = _g[5], decimalLat = _g[6];
        lon = convertDMSToDD(parseFloat((negativeLon ? negativeLon : '') + degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);
        lat = convertDMSToDD(parseFloat((negativeLat ? negativeLat : '') + degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);
    }
    else if (bellRegex.test(coordStr)) {
        _h = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(coordStr.match(patternBELL), 15), negativeLat = _h[1], degreesLat = _h[2], minutesLat = _h[3], secondsLat = _h[4], directionLat = _h[6], negativeLon = _h[7], degreesLon = _h[8], minutesLon = _h[9], secondsLon = _h[10], directionLon = _h[12], radius = _h[13], conf = _h[14];
        // Set default value for North America
        if (!directionLon) {
            directionLon = 'W';
        }
        // Check if real minutes or decimals
        if (minutesLon && minutesLon.length > 2) {
            lon = parseFloat((negativeLon ? negativeLon : '') + degreesLon + '.' + minutesLon);
        }
        else {
            lon = convertDMSToDD(parseFloat(degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);
        }
        if (minutesLat && minutesLat.length > 2) {
            lat = parseFloat((negativeLat ? negativeLat : '') + degreesLat + '.' + minutesLat);
        }
        else {
            lat = convertDMSToDD(parseFloat(degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);
        }
    }
    else if (mmRegex.test(coordStr)) {
        _j = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(coordStr.match(mmPattern), 5), lon = _j[1], decimalLon = _j[2], lat = _j[3], decimalLat = _j[4];
        if (decimalLon) {
            lon = parseFloat(lon + '.' + decimalLon);
        }
        if (decimalLat) {
            lat = parseFloat(lat + '.' + decimalLat);
        }
    }
    else {
        return { lonLat: undefined, message: '', radius: undefined, conf: undefined };
    }
    // Set a negative coordinate for North America zone
    if (lon > 0 && lat > 0) {
        if (lon > lat) {
            lon = -lon;
        }
        else {
            lat = -lat;
        }
    }
    // Reverse coordinate to respect lonLat convention
    if (lon < lat) {
        lonLat = (/** @type {?} */ ([lon, lat]));
    }
    else {
        lonLat = (/** @type {?} */ ([lat, lon]));
    }
    // Reproject the coordinate if projection parameter have been set and coord is not 4326
    if ((projectionStr !== undefined && projectionStr !== toProjection) || (lonLat[0] > 180 || lonLat[0] < -180)) {
        /** @type {?} */
        var source = projectionStr ? 'EPSG:' + projectionStr : mapProjection;
        /** @type {?} */
        var dest = 'EPSG:' + toProjection;
        try {
            lonLat = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])(lonLat, source, dest);
        }
        catch (e) {
            return { lonLat: undefined, message: 'Projection ' + source + ' not supported', radius: undefined, conf: undefined };
        }
    }
    return { lonLat: lonLat, message: '', radius: radius ? parseInt(radius, 10) : undefined, conf: conf ? parseInt(conf, 10) : undefined };
}
/**
 * Convert degrees minutes seconds to dd
 * @param {?} degrees Degrees
 * @param {?} minutes Minutes
 * @param {?} seconds Seconds
 * @param {?} direction Direction
 * @return {?}
 */
function convertDMSToDD(degrees, minutes, seconds, direction) {
    minutes = minutes || 0;
    seconds = seconds || 0;
    /** @type {?} */
    var dd = degrees + (minutes / 60) + (seconds / 3600);
    if (direction === 'S' || direction === 'W') {
        dd = -dd;
    } // Don't do anything for N or E
    return dd;
}
/**
 * Return true of two view states are equal.
 * @param {?} state1 View state
 * @param {?} state2 View state
 * @return {?} True if the view states are equal
 */
function viewStatesAreEqual(state1, state2) {
    if (state1 === undefined || state2 === undefined) {
        return false;
    }
    /** @type {?} */
    var tolerance = 1 / 10000;
    return state1.zoom === state2.zoom &&
        Math.trunc(state1.center[0] / tolerance) === Math.trunc(state2.center[0] / tolerance) &&
        Math.trunc(state1.center[1] / tolerance) === Math.trunc(state2.center[1] / tolerance);
}
/**
 * Format the scale to a human readable text
 * @param {?} scale
 * @return {?} Human readable scale text
 */
function formatScale(scale) {
    scale = Math.round(scale);
    if (scale < 10000) {
        return scale + '';
    }
    scale = Math.round(scale / 1000);
    if (scale < 1000) {
        return scale + 'K';
    }
    scale = Math.round(scale / 1000);
    return scale + 'M';
}
/**
 * Return the resolution from a scale denom
 * @param {?} scale Scale denom
 * @param {?=} dpi DPI
 * @return {?} Resolution
 */
function getResolutionFromScale(scale, dpi) {
    if (dpi === void 0) { dpi = 72; }
    return scale / (39.37 * dpi);
}
/**
 * Return the resolution from a scale denom
 * @param {?} resolution
 * @param {?=} unit
 * @param {?=} dpi
 * @return {?} Resolution
 */
function getScaleFromResolution(resolution, unit, dpi) {
    if (unit === void 0) { unit = 'm'; }
    if (dpi === void 0) { dpi = 72; }
    return resolution * ol_proj__WEBPACK_IMPORTED_MODULE_59__["METERS_PER_UNIT"][unit] * 39.37 * dpi;
}
/**
 * Returns true if the CTRL key is pushed during an Ol MapBrowserPointerEvent
 * @param {?} event OL MapBrowserPointerEvent
 * @return {?} Whether the CTRL key is pushed
 */
function ctrlKeyDown(event) {
    /** @type {?} */
    var originalEvent = event.originalEvent;
    return (!originalEvent.altKey &&
        (ol_has__WEBPACK_IMPORTED_MODULE_26__["MAC"] ? originalEvent.metaKey : originalEvent.ctrlKey) &&
        !originalEvent.shiftKey);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Base map controller
 */
var  /**
 * Base map controller
 */
MapController = /** @class */ (function () {
    function MapController() {
        /**
         * Array of observer keys
         */
        this.observerKeys = [];
    }
    /**
     * Return the OL map this controller is bound to
     * @returns OL Map
     */
    /**
     * Return the OL map this controller is bound to
     * @return {?} OL Map
     */
    MapController.prototype.getOlMap = /**
     * Return the OL map this controller is bound to
     * @return {?} OL Map
     */
    function () {
        return this.olMap;
    };
    /**
     * Add or remove this controller to/from a map.
     * @param map OL Map
     */
    /**
     * Add or remove this controller to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    MapController.prototype.setOlMap = /**
     * Add or remove this controller to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    function (olMap$$1) {
        if (olMap$$1 !== undefined && this.getOlMap() !== undefined) {
            throw new Error('This controller is already bound to a map.');
        }
        if (olMap$$1 === undefined) {
            this.teardownObservers();
            this.olMap = olMap$$1;
            return;
        }
        this.olMap = olMap$$1;
    };
    /**
     * Teardown any observers
     */
    /**
     * Teardown any observers
     * @return {?}
     */
    MapController.prototype.teardownObservers = /**
     * Teardown any observers
     * @return {?}
     */
    function () {
        this.observerKeys.forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) { return Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(key); }));
        this.observerKeys = [];
    };
    return MapController;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Controller to handle map view interactions
 */
var  /**
 * Controller to handle map view interactions
 */
MapViewController = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(MapViewController, _super);
    function MapViewController(options) {
        var _this = _super.call(this) || this;
        _this.options = options;
        /**
         * Observable of the current resolution
         */
        _this.resolution$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](undefined);
        /**
         * Observable of the current state
         */
        _this.state$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](undefined);
        /**
         * Extent stream
         */
        _this.extent$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /**
         * History of states
         */
        _this.states = [];
        /**
         * Current state index
         */
        _this.stateIndex = 0;
        return _this;
    }
    Object.defineProperty(MapViewController.prototype, "stateHistory", {
        /**
         * Whether the view controller should keep the view's state history
         */
        get: /**
         * Whether the view controller should keep the view's state history
         * @return {?}
         */
        function () {
            return this.options ? this.options.stateHistory === true : false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MapViewController.prototype, "olView", {
        /**
         * OL View
         */
        get: /**
         * OL View
         * @return {?}
         */
        function () { return this.olMap.getView(); },
        enumerable: true,
        configurable: true
    });
    /**
     * Add or remove this controller to/from a map.
     * @param map OL Map
     */
    /**
     * Add or remove this controller to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    MapViewController.prototype.setOlMap = /**
     * Add or remove this controller to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    function (olMap$$1) {
        _super.prototype.setOlMap.call(this, olMap$$1);
        this.setupObservers();
    };
    /**
     * Observe move moveend and subscribe to the extent stream
     */
    /**
     * Observe move moveend and subscribe to the extent stream
     * @return {?}
     */
    MapViewController.prototype.setupObservers = /**
     * Observe move moveend and subscribe to the extent stream
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.stateHistory === true) {
            this.observerKeys.push(this.olMap.on('moveend', (/**
             * @param {?} event
             * @return {?}
             */
            function (event) { return _this.onMoveEnd(event); })));
        }
        this.extent$$ = this.extent$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["debounceTime"])(25))
            .subscribe((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            _this.setExtent(value.extent, value.action);
        }));
    };
    /**
     * Teardown any observers
     */
    /**
     * Teardown any observers
     * @return {?}
     */
    MapViewController.prototype.teardownObservers = /**
     * Teardown any observers
     * @return {?}
     */
    function () {
        _super.prototype.teardownObservers.call(this);
        if (this.extent$$ !== undefined) {
            this.extent$$.unsubscribe();
            this.extent$$ = undefined;
        }
    };
    /**
     * Get the view's OL projection
     * @returns OL projection
     */
    /**
     * Get the view's OL projection
     * @return {?} OL projection
     */
    MapViewController.prototype.getOlProjection = /**
     * Get the view's OL projection
     * @return {?} OL projection
     */
    function () {
        return this.olView.getProjection();
    };
    /**
     * Get the current map view center
     * @param projection Output projection
     * @returns Center
     */
    /**
     * Get the current map view center
     * @param {?=} projection Output projection
     * @return {?} Center
     */
    MapViewController.prototype.getCenter = /**
     * Get the current map view center
     * @param {?=} projection Output projection
     * @return {?} Center
     */
    function (projection) {
        /** @type {?} */
        var center = this.olView.getCenter();
        if (projection && center) {
            center = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])(center, this.getOlProjection(), projection);
        }
        return center;
    };
    /**
     * Get the current view extent
     * @param projection Output projection
     * @returns Extent
     */
    /**
     * Get the current view extent
     * @param {?=} projection Output projection
     * @return {?} Extent
     */
    MapViewController.prototype.getExtent = /**
     * Get the current view extent
     * @param {?=} projection Output projection
     * @return {?} Extent
     */
    function (projection) {
        /** @type {?} */
        var extent = this.olView.calculateExtent(this.olMap.getSize());
        if (projection && extent) {
            extent = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transformExtent"])(extent, this.getOlProjection(), projection);
        }
        return extent;
    };
    /**
     * Get the current scale
     * @param dpi Dot per inches
     * @returns View scale
     */
    /**
     * Get the current scale
     * @param {?=} dpi Dot per inches
     * @return {?} View scale
     */
    MapViewController.prototype.getScale = /**
     * Get the current scale
     * @param {?=} dpi Dot per inches
     * @return {?} View scale
     */
    function (dpi) {
        if (dpi === void 0) { dpi = 72; }
        return getScaleFromResolution(this.getResolution(), this.getOlProjection().getUnits(), dpi);
    };
    /**
     * Get the current resolution
     * @returns Projection denominator
     */
    /**
     * Get the current resolution
     * @return {?} Projection denominator
     */
    MapViewController.prototype.getResolution = /**
     * Get the current resolution
     * @return {?} Projection denominator
     */
    function () {
        return this.olView.getResolution();
    };
    /**
     * Get the current zoom level
     * @returns Zoom level
     */
    /**
     * Get the current zoom level
     * @return {?} Zoom level
     */
    MapViewController.prototype.getZoom = /**
     * Get the current zoom level
     * @return {?} Zoom level
     */
    function () {
        return Math.round(this.olView.getZoom());
    };
    /**
     * Zoom in
     */
    /**
     * Zoom in
     * @return {?}
     */
    MapViewController.prototype.zoomIn = /**
     * Zoom in
     * @return {?}
     */
    function () {
        this.zoomTo(this.olView.getZoom() + 1);
    };
    /**
     * Zoom out
     */
    /**
     * Zoom out
     * @return {?}
     */
    MapViewController.prototype.zoomOut = /**
     * Zoom out
     * @return {?}
     */
    function () {
        this.zoomTo(this.olView.getZoom() - 1);
    };
    /**
     * Zoom to specific zoom level
     * @param zoom Zoom level
     */
    /**
     * Zoom to specific zoom level
     * @param {?} zoom Zoom level
     * @return {?}
     */
    MapViewController.prototype.zoomTo = /**
     * Zoom to specific zoom level
     * @param {?} zoom Zoom level
     * @return {?}
     */
    function (zoom) {
        this.olView.animate({
            zoom: zoom,
            duration: 250,
            easing: ol_easing__WEBPACK_IMPORTED_MODULE_25__["easeOut"]
        });
    };
    /**
     * Move to extent after a short delay (100ms) unless
     * a new movement gets registered in the meantime.
     * @param extent Extent to move to
     */
    /**
     * Move to extent after a short delay (100ms) unless
     * a new movement gets registered in the meantime.
     * @param {?} extent Extent to move to
     * @return {?}
     */
    MapViewController.prototype.moveToExtent = /**
     * Move to extent after a short delay (100ms) unless
     * a new movement gets registered in the meantime.
     * @param {?} extent Extent to move to
     * @return {?}
     */
    function (extent) {
        this.extent$.next({ extent: extent, action: MapViewAction.Move });
    };
    /**
     * Zoom to extent after a short delay (100ms) unless
     * a new movement gets registered in the meantime.
     * @param extent Extent to zoom to
     */
    /**
     * Zoom to extent after a short delay (100ms) unless
     * a new movement gets registered in the meantime.
     * @param {?} extent Extent to zoom to
     * @return {?}
     */
    MapViewController.prototype.zoomToExtent = /**
     * Zoom to extent after a short delay (100ms) unless
     * a new movement gets registered in the meantime.
     * @param {?} extent Extent to zoom to
     * @return {?}
     */
    function (extent) {
        this.extent$.next({ extent: extent, action: MapViewAction.Zoom });
    };
    /**
     * Return the current view rotation
     * @returns Rotation angle in degrees
     */
    /**
     * Return the current view rotation
     * @return {?} Rotation angle in degrees
     */
    MapViewController.prototype.getRotation = /**
     * Return the current view rotation
     * @return {?} Rotation angle in degrees
     */
    function () {
        return this.olView.getRotation();
    };
    /**
     * Reset the view rotation to 0
     */
    /**
     * Reset the view rotation to 0
     * @return {?}
     */
    MapViewController.prototype.resetRotation = /**
     * Reset the view rotation to 0
     * @return {?}
     */
    function () {
        this.olView.animate({ rotation: 0 });
    };
    /**
     * Whether the view has a previous state
     * @returns True if the view has a previous state
     */
    /**
     * Whether the view has a previous state
     * @return {?} True if the view has a previous state
     */
    MapViewController.prototype.hasPreviousState = /**
     * Whether the view has a previous state
     * @return {?} True if the view has a previous state
     */
    function () {
        return this.states.length > 1 && this.stateIndex > 0;
    };
    /**
     * Whether the view has a next state
     * @returns True if the view has a next state
     */
    /**
     * Whether the view has a next state
     * @return {?} True if the view has a next state
     */
    MapViewController.prototype.hasNextState = /**
     * Whether the view has a next state
     * @return {?} True if the view has a next state
     */
    function () {
        return this.states.length > 1 && this.stateIndex < this.states.length - 1;
    };
    /**
     * Restore the previous view state
     */
    /**
     * Restore the previous view state
     * @return {?}
     */
    MapViewController.prototype.previousState = /**
     * Restore the previous view state
     * @return {?}
     */
    function () {
        if (this.hasPreviousState()) {
            this.setStateIndex(this.stateIndex - 1);
        }
    };
    /**
     * Restore the next view state
     */
    /**
     * Restore the next view state
     * @return {?}
     */
    MapViewController.prototype.nextState = /**
     * Restore the next view state
     * @return {?}
     */
    function () {
        if (this.hasNextState()) {
            this.setStateIndex(this.stateIndex + 1);
        }
    };
    /**
     * Clear the state history
     */
    /**
     * Clear the state history
     * @return {?}
     */
    MapViewController.prototype.clearStateHistory = /**
     * Clear the state history
     * @return {?}
     */
    function () {
        this.states = [];
        this.stateIndex = 0;
    };
    /**
     * Update the the view to it's intial state
     */
    /**
     * Update the the view to it's intial state
     * @return {?}
     */
    MapViewController.prototype.setInitialState = /**
     * Update the the view to it's intial state
     * @return {?}
     */
    function () {
        if (this.states.length > 0) {
            this.setStateIndex(0);
        }
    };
    /**
     * Move to the extent retrieved from the stream
     * @param extent Extent
     * @param action Either zoom or move
     */
    /**
     * Move to the extent retrieved from the stream
     * @private
     * @param {?} extent Extent
     * @param {?} action Either zoom or move
     * @return {?}
     */
    MapViewController.prototype.setExtent = /**
     * Move to the extent retrieved from the stream
     * @private
     * @param {?} extent Extent
     * @param {?} action Either zoom or move
     * @return {?}
     */
    function (extent, action) {
        /** @type {?} */
        var olView$$1 = this.olView;
        if (action === MapViewAction.Zoom) {
            olView$$1.fit(extent, { maxZoom: 17 });
        }
        else if (action === MapViewAction.Move) {
            olView$$1.fit(extent, { maxZoom: olView$$1.getZoom() });
        }
    };
    /**
     * Set the view state index
     * @param index State index
     */
    /**
     * Set the view state index
     * @private
     * @param {?} index State index
     * @return {?}
     */
    MapViewController.prototype.setStateIndex = /**
     * Set the view state index
     * @private
     * @param {?} index State index
     * @return {?}
     */
    function (index) {
        this.stateIndex = index;
        this.setState(this.states[index]);
    };
    /**
     * Set the view state
     * @param state View state
     */
    /**
     * Set the view state
     * @private
     * @param {?} state View state
     * @return {?}
     */
    MapViewController.prototype.setState = /**
     * Set the view state
     * @private
     * @param {?} state View state
     * @return {?}
     */
    function (state$$1) {
        this.olView.animate({
            resolution: state$$1.resolution,
            center: state$$1.center,
            duration: 0
        });
    };
    /**
     * On move end, get the view state and record it.
     * @param event Map event
     */
    /**
     * On move end, get the view state and record it.
     * @private
     * @param {?} event Map event
     * @return {?}
     */
    MapViewController.prototype.onMoveEnd = /**
     * On move end, get the view state and record it.
     * @private
     * @param {?} event Map event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var resolution = this.getResolution();
        if (this.resolution$.value !== resolution) {
            this.resolution$.next(resolution);
        }
        /** @type {?} */
        var state$$1 = {
            resolution: resolution,
            center: this.getCenter(),
            zoom: this.getZoom()
        };
        if (this.stateHistory === true) {
            /** @type {?} */
            var stateIndex = this.stateIndex;
            /** @type {?} */
            var stateAtIndex = this.states.length === 0 ? undefined : this.states[stateIndex];
            if (!viewStatesAreEqual(state$$1, stateAtIndex)) {
                this.states = this.states.slice(0, stateIndex + 1).concat([state$$1]);
                this.stateIndex = this.states.length - 1;
            }
        }
        this.state$.next(state$$1);
    };
    return MapViewController;
}(MapController));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
// TODO: This class is messy. Clearly define it's scope and the map browser's.
// Move some stuff into controllers.
var  
// TODO: This class is messy. Clearly define it's scope and the map browser's.
// Move some stuff into controllers.
IgoMap = /** @class */ (function () {
    function IgoMap(options) {
        this.layers$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"]([]);
        this.geolocation$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](undefined);
        this.defaultOptions = {
            controls: { attribution: false }
        };
        this.options = Object.assign({}, this.defaultOptions, options);
        this.layerWatcher = new LayerWatcher();
        this.status$ = this.layerWatcher.status$;
        Object(ol_proj_proj4__WEBPACK_IMPORTED_MODULE_28__["register"])(proj4__WEBPACK_IMPORTED_MODULE_27__["default"]);
        this.init();
    }
    Object.defineProperty(IgoMap.prototype, "layers", {
        get: /**
         * @return {?}
         */
        function () {
            return this.layers$.value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgoMap.prototype, "projection", {
        get: /**
         * @return {?}
         */
        function () {
            return this.viewController.getOlProjection().getCode();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    IgoMap.prototype.init = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var controls = [];
        if (this.options.controls) {
            if (this.options.controls.attribution) {
                /** @type {?} */
                var attributionOpt = (/** @type {?} */ ((this.options.controls.attribution === true
                    ? {}
                    : this.options.controls.attribution)));
                controls.push(new ol_control_Attribution__WEBPACK_IMPORTED_MODULE_19__["default"](attributionOpt));
            }
            if (this.options.controls.scaleLine) {
                /** @type {?} */
                var scaleLineOpt = (/** @type {?} */ ((this.options.controls.scaleLine === true
                    ? {}
                    : this.options.controls.scaleLine)));
                controls.push(new ol_control_ScaleLine__WEBPACK_IMPORTED_MODULE_20__["default"](scaleLineOpt));
            }
        }
        /** @type {?} */
        var interactions = {};
        if (this.options.interactions === false) {
            interactions = {
                altShiftDragRotate: false,
                doubleClickZoom: false,
                keyboard: false,
                mouseWheelZoom: false,
                shiftDragZoom: false,
                dragPan: false,
                pinchRotate: false,
                pinchZoom: false
            };
        }
        this.ol = new ol_Map__WEBPACK_IMPORTED_MODULE_16__["default"]({
            interactions: Object(ol_interaction__WEBPACK_IMPORTED_MODULE_62__["defaults"])(interactions),
            controls: controls
        });
        this.setView(this.options.view || {});
        this.viewController = new MapViewController({
            stateHistory: true
        });
        this.viewController.setOlMap(this.ol);
        this.overlay = new Overlay(this);
    };
    /**
     * @param {?} id
     * @return {?}
     */
    IgoMap.prototype.setTarget = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        this.ol.setTarget(id);
        if (id !== undefined) {
            this.layerWatcher.subscribe((/**
             * @return {?}
             */
            function () { }), null);
        }
        else {
            this.layerWatcher.unsubscribe();
        }
    };
    /**
     * @param {?} options
     * @return {?}
     */
    IgoMap.prototype.updateView = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        /** @type {?} */
        var currentView = this.ol.getView();
        /** @type {?} */
        var viewOptions = Object.assign({
            zoom: currentView.getZoom()
        }, currentView.getProperties());
        this.setView(Object.assign(viewOptions, options));
    };
    /**
     * Set the map view
     * @param options Map view options
     */
    /**
     * Set the map view
     * @param {?} options Map view options
     * @return {?}
     */
    IgoMap.prototype.setView = /**
     * Set the map view
     * @param {?} options Map view options
     * @return {?}
     */
    function (options) {
        if (this.viewController !== undefined) {
            this.viewController.clearStateHistory();
        }
        /** @type {?} */
        var view = new ol_View__WEBPACK_IMPORTED_MODULE_17__["default"](options);
        this.ol.setView(view);
        this.unsubscribeGeolocate();
        if (options) {
            if (options.center) {
                /** @type {?} */
                var projection = view.getProjection().getCode();
                /** @type {?} */
                var center = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["fromLonLat"])(options.center, projection);
                view.setCenter(center);
            }
            if (options.geolocate) {
                this.geolocate(true);
            }
        }
    };
    // TODO: Move to ViewController and update every place it's used
    // TODO: Move to ViewController and update every place it's used
    /**
     * @param {?=} projection
     * @return {?}
     */
    IgoMap.prototype.getCenter = 
    // TODO: Move to ViewController and update every place it's used
    /**
     * @param {?=} projection
     * @return {?}
     */
    function (projection) {
        return this.viewController.getCenter();
    };
    // TODO: Move to ViewController and update every place it's used
    // TODO: Move to ViewController and update every place it's used
    /**
     * @param {?=} projection
     * @return {?}
     */
    IgoMap.prototype.getExtent = 
    // TODO: Move to ViewController and update every place it's used
    /**
     * @param {?=} projection
     * @return {?}
     */
    function (projection) {
        return this.viewController.getExtent();
    };
    // TODO: Move to ViewController and update every place it's used
    // TODO: Move to ViewController and update every place it's used
    /**
     * @return {?}
     */
    IgoMap.prototype.getZoom = 
    // TODO: Move to ViewController and update every place it's used
    /**
     * @return {?}
     */
    function () {
        return this.viewController.getZoom();
    };
    /**
     * @param {?} baseLayer
     * @return {?}
     */
    IgoMap.prototype.changeBaseLayer = /**
     * @param {?} baseLayer
     * @return {?}
     */
    function (baseLayer) {
        var e_1, _a;
        if (!baseLayer) {
            return;
        }
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(this.getBaseLayers()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var bl = _c.value;
                bl.visible = false;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        baseLayer.visible = true;
    };
    /**
     * @return {?}
     */
    IgoMap.prototype.getBaseLayers = /**
     * @return {?}
     */
    function () {
        return this.layers.filter((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return layer.baseLayer === true; }));
    };
    /**
     * @param {?} id
     * @return {?}
     */
    IgoMap.prototype.getLayerById = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        return this.layers.find((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return layer.id && layer.id === id; }));
    };
    /**
     * @param {?} alias
     * @return {?}
     */
    IgoMap.prototype.getLayerByAlias = /**
     * @param {?} alias
     * @return {?}
     */
    function (alias) {
        return this.layers.find((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return layer.alias && layer.alias === alias; }));
    };
    /**
     * Add a single layer
     * @param layer Layer to add
     * @param push DEPRECATED
     */
    /**
     * Add a single layer
     * @param {?} layer Layer to add
     * @param {?=} push DEPRECATED
     * @return {?}
     */
    IgoMap.prototype.addLayer = /**
     * Add a single layer
     * @param {?} layer Layer to add
     * @param {?=} push DEPRECATED
     * @return {?}
     */
    function (layer, push) {
        if (push === void 0) { push = true; }
        this.addLayers([layer]);
    };
    /**
     * Add many layers
     * @param layers Layers to add
     * @param push DEPRECATED
     */
    /**
     * Add many layers
     * @param {?} layers Layers to add
     * @param {?=} push DEPRECATED
     * @return {?}
     */
    IgoMap.prototype.addLayers = /**
     * Add many layers
     * @param {?} layers Layers to add
     * @param {?=} push DEPRECATED
     * @return {?}
     */
    function (layers, push) {
        var _this = this;
        if (push === void 0) { push = true; }
        /** @type {?} */
        var addedLayers = layers
            .map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return _this.doAddLayer(layer); }))
            .filter((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return layer !== undefined; }));
        this.setLayers([].concat(this.layers, addedLayers));
    };
    /**
     * Remove a single layer
     * @param layer Layer to remove
     */
    /**
     * Remove a single layer
     * @param {?} layer Layer to remove
     * @return {?}
     */
    IgoMap.prototype.removeLayer = /**
     * Remove a single layer
     * @param {?} layer Layer to remove
     * @return {?}
     */
    function (layer) {
        this.removeLayers([layer]);
    };
    /**
     * Remove many layers
     * @param layers Layers to remove
     */
    /**
     * Remove many layers
     * @param {?} layers Layers to remove
     * @return {?}
     */
    IgoMap.prototype.removeLayers = /**
     * Remove many layers
     * @param {?} layers Layers to remove
     * @return {?}
     */
    function (layers) {
        var _this = this;
        /** @type {?} */
        var newLayers = this.layers$.value.slice(0);
        /** @type {?} */
        var layersToRemove = [];
        layers.forEach((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            /** @type {?} */
            var index = _this.getLayerIndex(layer);
            if (index >= 0) {
                layersToRemove.push(layer);
                newLayers.splice(index, 1);
            }
        }));
        layersToRemove.forEach((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return _this.doRemoveLayer(layer); }));
        this.setLayers(newLayers);
    };
    /**
     * Remove all layers
     */
    /**
     * Remove all layers
     * @return {?}
     */
    IgoMap.prototype.removeAllLayers = /**
     * Remove all layers
     * @return {?}
     */
    function () {
        var _this = this;
        this.layers.forEach((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return _this.doRemoveLayer(layer); }));
        this.layers$.next([]);
    };
    /**
     * @param {?} layer
     * @return {?}
     */
    IgoMap.prototype.raiseLayer = /**
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var index = this.getLayerIndex(layer);
        if (index > 0) {
            this.moveLayer(layer, index, index - 1);
        }
    };
    /**
     * @param {?} layer
     * @return {?}
     */
    IgoMap.prototype.lowerLayer = /**
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var index = this.getLayerIndex(layer);
        if (index < this.layers.length - 1) {
            this.moveLayer(layer, index, index + 1);
        }
    };
    /**
     * @param {?} layer
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    IgoMap.prototype.moveLayer = /**
     * @param {?} layer
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    function (layer, from, to) {
        /** @type {?} */
        var layerTo = this.layers[to];
        /** @type {?} */
        var zIndexTo = layerTo.zIndex;
        /** @type {?} */
        var zIndexFrom = layer.zIndex;
        layer.zIndex = zIndexTo;
        layerTo.zIndex = zIndexFrom;
        this.layers[to] = layer;
        this.layers[from] = layerTo;
        this.layers$.next(this.layers.slice(0));
    };
    /**
     * Add a layer to the OL map and start watching. If the layer is already
     * added to this map, make it visible but don't add it one again.
     * @param layer Layer
     * @returns The layer added, if any
     */
    /**
     * Add a layer to the OL map and start watching. If the layer is already
     * added to this map, make it visible but don't add it one again.
     * @private
     * @param {?} layer Layer
     * @return {?} The layer added, if any
     */
    IgoMap.prototype.doAddLayer = /**
     * Add a layer to the OL map and start watching. If the layer is already
     * added to this map, make it visible but don't add it one again.
     * @private
     * @param {?} layer Layer
     * @return {?} The layer added, if any
     */
    function (layer) {
        if (layer.baseLayer && layer.visible) {
            this.changeBaseLayer(layer);
        }
        /** @type {?} */
        var existingLayer = this.getLayerById(layer.id);
        if (existingLayer !== undefined) {
            existingLayer.visible = true;
            return;
        }
        if (layer.zIndex === undefined || layer.zIndex === 0) {
            /** @type {?} */
            var offset = layer.baseLayer ? 1 : 10;
            layer.zIndex = this.layers.length + offset;
        }
        layer.setMap(this);
        this.layerWatcher.watchLayer(layer);
        this.ol.addLayer(layer.ol);
        return layer;
    };
    /**
     * Remove a layer from the OL map and stop watching
     * @param layer Layer
     */
    /**
     * Remove a layer from the OL map and stop watching
     * @private
     * @param {?} layer Layer
     * @return {?}
     */
    IgoMap.prototype.doRemoveLayer = /**
     * Remove a layer from the OL map and stop watching
     * @private
     * @param {?} layer Layer
     * @return {?}
     */
    function (layer) {
        this.layerWatcher.unwatchLayer(layer);
        this.ol.removeLayer(layer.ol);
        layer.setMap(undefined);
    };
    /**
     * Update the layers observable
     * @param layers Layers
     */
    /**
     * Update the layers observable
     * @private
     * @param {?} layers Layers
     * @return {?}
     */
    IgoMap.prototype.setLayers = /**
     * Update the layers observable
     * @private
     * @param {?} layers Layers
     * @return {?}
     */
    function (layers) {
        this.layers$.next(this.sortLayersByZIndex(layers).slice(0));
    };
    /**
     * Sort layers by descending zIndex
     * @param layers Array of layers
     * @returns The original array, sorted by zIndex
     */
    /**
     * Sort layers by descending zIndex
     * @private
     * @param {?} layers Array of layers
     * @return {?} The original array, sorted by zIndex
     */
    IgoMap.prototype.sortLayersByZIndex = /**
     * Sort layers by descending zIndex
     * @private
     * @param {?} layers Array of layers
     * @return {?} The original array, sorted by zIndex
     */
    function (layers) {
        // Sort by descending zIndex
        return layers.sort((/**
         * @param {?} layer1
         * @param {?} layer2
         * @return {?}
         */
        function (layer1, layer2) { return layer2.zIndex - layer1.zIndex; }));
    };
    /**
     * Get layer index in the map's inenr array of layers
     * @param layer Layer
     * @returns The layer index
     */
    /**
     * Get layer index in the map's inenr array of layers
     * @private
     * @param {?} layer Layer
     * @return {?} The layer index
     */
    IgoMap.prototype.getLayerIndex = /**
     * Get layer index in the map's inenr array of layers
     * @private
     * @param {?} layer Layer
     * @return {?} The layer index
     */
    function (layer) {
        return this.layers.findIndex((/**
         * @param {?} _layer
         * @return {?}
         */
        function (_layer) { return _layer === layer; }));
    };
    // TODO: Create a GeolocationController with everything below
    // TODO: Create a GeolocationController with everything below
    /**
     * @param {?=} track
     * @return {?}
     */
    IgoMap.prototype.geolocate = 
    // TODO: Create a GeolocationController with everything below
    /**
     * @param {?=} track
     * @return {?}
     */
    function (track) {
        var _this = this;
        if (track === void 0) { track = false; }
        /** @type {?} */
        var first = true;
        if (this.geolocation$$) {
            track = this.geolocation.getTracking();
            this.unsubscribeGeolocate();
        }
        this.startGeolocation();
        this.geolocation$$ = this.geolocation$.subscribe((/**
         * @param {?} geolocation
         * @return {?}
         */
        function (geolocation) {
            if (!geolocation) {
                return;
            }
            /** @type {?} */
            var accuracy = geolocation.getAccuracy();
            if (accuracy < 10000) {
                /** @type {?} */
                var geometry = geolocation.getAccuracyGeometry();
                /** @type {?} */
                var extent = geometry.getExtent();
                if (_this.geolocationFeature &&
                    _this.overlay.dataSource.ol.getFeatureById(_this.geolocationFeature.getId())) {
                    _this.overlay.dataSource.ol.removeFeature(_this.geolocationFeature);
                }
                _this.geolocationFeature = new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"]({ geometry: geometry });
                _this.geolocationFeature.setId('geolocationFeature');
                _this.overlay.addFeature(_this.geolocationFeature);
                if (first) {
                    _this.viewController.zoomToExtent(extent);
                }
            }
            else if (first) {
                /** @type {?} */
                var view = _this.ol.getView();
                /** @type {?} */
                var coordinates = geolocation.getPosition();
                view.setCenter(coordinates);
                view.setZoom(14);
            }
            if (track) {
                _this.unsubscribeGeolocate();
            }
            first = false;
        }));
    };
    /**
     * @return {?}
     */
    IgoMap.prototype.unsubscribeGeolocate = /**
     * @return {?}
     */
    function () {
        this.stopGeolocation();
        if (this.geolocation$$) {
            this.geolocation$$.unsubscribe();
            this.geolocation$$ = undefined;
        }
    };
    /**
     * @private
     * @return {?}
     */
    IgoMap.prototype.startGeolocation = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.geolocation) {
            this.geolocation = new ol_Geolocation__WEBPACK_IMPORTED_MODULE_18__["default"]({
                projection: this.projection,
                tracking: true
            });
            this.geolocation.on('change', (/**
             * @param {?} evt
             * @return {?}
             */
            function (evt) {
                _this.geolocation$.next(_this.geolocation);
            }));
        }
        else {
            this.geolocation.setTracking(true);
        }
    };
    /**
     * @private
     * @return {?}
     */
    IgoMap.prototype.stopGeolocation = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.geolocation) {
            this.geolocation.setTracking(false);
        }
    };
    return IgoMap;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MapBrowserComponent = /** @class */ (function () {
    function MapBrowserComponent(activityService) {
        this.activityService = activityService;
        this.id = "igo-map-target-" + new Date().getTime();
    }
    Object.defineProperty(MapBrowserComponent.prototype, "view", {
        get: /**
         * @return {?}
         */
        function () { return this._view; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._view = value;
            if (this.map !== undefined) {
                this.map.updateView(value);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MapBrowserComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.status$$ = this.map.status$.subscribe((/**
         * @param {?} status
         * @return {?}
         */
        function (status) {
            return _this.handleStatusChange(status);
        }));
    };
    /**
     * @return {?}
     */
    MapBrowserComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.map.setTarget(this.id);
    };
    /**
     * @return {?}
     */
    MapBrowserComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.map.setTarget(undefined);
        this.activityService.unregister(this.activityId);
        this.status$$.unsubscribe();
    };
    /**
     * @private
     * @param {?} status
     * @return {?}
     */
    MapBrowserComponent.prototype.handleStatusChange = /**
     * @private
     * @param {?} status
     * @return {?}
     */
    function (status) {
        if (status === _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Working && this.activityId === undefined) {
            this.activityId = this.activityService.register();
        }
        else if (status === _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done && this.activityId !== undefined) {
            this.activityService.unregister(this.activityId);
            this.activityId = undefined;
        }
    };
    MapBrowserComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-map-browser',
                    template: "<div [id]=\"id\" class=\"igo-map-browser-target\"></div>\r\n<ng-content></ng-content>\r\n",
                    styles: [":host{position:relative;display:block}.igo-map-browser-target,:host{width:100%;height:100%}:host>>>igo-zoom-button{position:absolute;bottom:5px;right:5px}:host>>>igo-geolocate-button{position:absolute;bottom:95px;right:5px}:host>>>igo-rotation-button{position:absolute;top:calc(40px + 5px + 5px);right:5px}:host>>>igo-user-button{position:absolute;bottom:5px;right:calc(5px + 50px)}:host>>>igo-baselayers-switcher{position:absolute;bottom:5px;left:5px}:host.igo-attribution-offset>>>.ol-attribution{left:90px;width:calc(100% - 200px)}@media only screen and (max-width:450px),only screen and (max-height:450px){:host>>>igo-zoom-button{display:none}:host>>>igo-geolocate-button{bottom:5px}:host>>>igo-rotation-button{top:calc(40px + 5px + 5px)}:host>>>igo-user-button{right:calc(5px + 90px)}:host.igo-attribution-offset>>>.ol-attribution{left:50px}}:host>>>.ol-attribution{left:5px;bottom:5px;text-align:left;padding:0;margin-right:90px;background-color:rgba(255,255,255,0);width:calc(100% - 100px)}:host>>>.ol-attribution.ol-logo-only{height:inherit}:host>>>.ol-attribution.ol-collapsed{background:0 0}:host>>>.ol-attribution.ol-collapsed button{-webkit-transform:none;transform:none}:host>>>.ol-attribution button{-webkit-transform:rotate(180deg);transform:rotate(180deg);background-color:#fff;cursor:pointer}:host>>>.ol-scale-line-inner{color:#000;border-color:#000}:host>>>.ol-scale-line{background-color:rgba(255,255,255,0);bottom:4px;-webkit-transform:translate(-50%);transform:translate(-50%);left:50%}:host>>>canvas{display:block}"]
                }] }
    ];
    /** @nocollapse */
    MapBrowserComponent.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ActivityService"] }
    ]; };
    MapBrowserComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        view: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return MapBrowserComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MapOfflineDirective = /** @class */ (function () {
    function MapOfflineDirective(component, networkService) {
        this.networkService = networkService;
        this.component = component;
    }
    Object.defineProperty(MapOfflineDirective.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this.component.map;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MapOfflineDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.networkService.currentState().subscribe((/**
         * @param {?} state
         * @return {?}
         */
        function (state$$1) {
            console.log(state$$1);
            _this.state = state$$1;
            _this.changeLayer();
        }));
        this.map.layers$.subscribe((/**
         * @param {?} layers
         * @return {?}
         */
        function (layers) {
            _this.changeLayer();
        }));
    };
    /**
     * @private
     * @return {?}
     */
    MapOfflineDirective.prototype.changeLayer = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var sourceOptions;
        /** @type {?} */
        var layerList = this.map.layers$.value;
        layerList.forEach((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            if (layer.options.sourceOptions.type === 'mvt') {
                sourceOptions = ((/** @type {?} */ (layer.options.sourceOptions)));
                layer.ol.getSource().clear();
            }
            else if (layer.options.sourceOptions.type === 'xyz') {
                sourceOptions = ((/** @type {?} */ (layer.options.sourceOptions)));
            }
            else if (layer.options.sourceOptions.type === 'vector') {
                sourceOptions = ((/** @type {?} */ (layer.options.sourceOptions)));
            }
            else {
                return;
            }
            if (sourceOptions.pathOffline &&
                _this.state.connection === false) {
                if (sourceOptions.excludeAttributeOffline) {
                    sourceOptions.excludeAttributeBackUp = sourceOptions.excludeAttribute;
                    sourceOptions.excludeAttribute = sourceOptions.excludeAttributeOffline;
                }
                layer.ol.getSource().setUrl(sourceOptions.pathOffline);
            }
            else if (sourceOptions.pathOffline &&
                _this.state.connection === true) {
                if (sourceOptions.excludeAttributeBackUp) {
                    sourceOptions.excludeAttribute = sourceOptions.excludeAttributeBackUp;
                }
                layer.ol.getSource().setUrl(sourceOptions.url);
            }
        }));
    };
    MapOfflineDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoMapOffline]'
                },] }
    ];
    /** @nocollapse */
    MapOfflineDirective.ctorParameters = function () { return [
        { type: MapBrowserComponent },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["NetworkService"] }
    ]; };
    return MapOfflineDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * When injected, this service automatically registers and
 * projection defined in the application config. A custom projection
 * needs to be registered to be usable by OL.
 */
var ProjectionService = /** @class */ (function () {
    function ProjectionService(config) {
        var _this = this;
        this.config = config;
        /** @type {?} */
        var projections = this.config.getConfig('projections') || [];
        projections.forEach((/**
         * @param {?} projection
         * @return {?}
         */
        function (projection) {
            _this.registerProjection(projection);
        }));
    }
    /**
     * Define a proj4 projection and register it in OL
     * @param projection Projection
     */
    /**
     * Define a proj4 projection and register it in OL
     * @param {?} projection Projection
     * @return {?}
     */
    ProjectionService.prototype.registerProjection = /**
     * Define a proj4 projection and register it in OL
     * @param {?} projection Projection
     * @return {?}
     */
    function (projection) {
        proj4__WEBPACK_IMPORTED_MODULE_27__["default"].defs(projection.code, projection.def);
        Object(ol_proj_proj4__WEBPACK_IMPORTED_MODULE_28__["register"])(proj4__WEBPACK_IMPORTED_MODULE_27__["default"]);
        Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["get"])(projection.code).setExtent(projection.extent);
    };
    ProjectionService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ProjectionService.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"] }
    ]; };
    /** @nocollapse */ ProjectionService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function ProjectionService_Factory() { return new ProjectionService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"])); }, token: ProjectionService, providedIn: "root" });
    return ProjectionService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ZoomButtonComponent = /** @class */ (function () {
    function ZoomButtonComponent() {
    }
    Object.defineProperty(ZoomButtonComponent.prototype, "zoom", {
        get: /**
         * @return {?}
         */
        function () { return this.map.viewController.getZoom(); },
        enumerable: true,
        configurable: true
    });
    ZoomButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-zoom-button',
                    template: "<div class=\"igo-zoom-button-container\">\r\n  <button\r\n    mat-icon-button\r\n    [matTooltip]=\"'igo.geo.mapButtons.zoomIn' | translate: {zoom: zoom + 1}\"\r\n    matTooltipPosition=\"left\"\r\n    [color]=\"color\"\r\n    (click)=\"map.viewController.zoomIn()\">\r\n    <mat-icon svgIcon=\"plus\"></mat-icon>\r\n  </button>\r\n\r\n  <button\r\n    mat-icon-button\r\n    [matTooltip]=\"'igo.geo.mapButtons.zoomOut' | translate: {zoom: zoom - 1}\"\r\n    matTooltipPosition=\"left\"\r\n    [color]=\"color\"\r\n    (click)=\"map.viewController.zoomOut()\">\r\n    <mat-icon svgIcon=\"minus\"></mat-icon>\r\n  </button>\r\n</div>\r\n",
                    styles: [".igo-zoom-button-container{width:40px}.igo-zoom-button-container button{background-color:#fff}.igo-zoom-button-container button:hover{background-color:#efefef}.igo-zoom-button-container button:first-child{margin-bottom:2px}:host>>>button .mat-button-ripple-round,button{border-radius:0}"]
                }] }
    ];
    /** @nocollapse */
    ZoomButtonComponent.ctorParameters = function () { return []; };
    ZoomButtonComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return ZoomButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var GeolocateButtonComponent = /** @class */ (function () {
    function GeolocateButtonComponent() {
    }
    Object.defineProperty(GeolocateButtonComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GeolocateButtonComponent.prototype, "color", {
        get: /**
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._color = value;
        },
        enumerable: true,
        configurable: true
    });
    GeolocateButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-geolocate-button',
                    template: "<div class=\"igo-geolocate-button-container\">\r\n  <button\r\n    mat-icon-button\r\n    [matTooltip]=\"'igo.geo.mapButtons.geolocate' | translate\"\r\n    matTooltipPosition=\"left\"\r\n    [color]=\"color\"\r\n    (click)=\"map.geolocate()\">\r\n    <mat-icon svgIcon=\"crosshairs-gps\"></mat-icon>\r\n  </button>\r\n</div>\r\n",
                    styles: [".igo-geolocate-button-container{width:40px;background-color:#fff}.igo-geolocate-button-container:hover{background-color:#efefef}:host>>>button .mat-button-ripple-round,button{border-radius:0}"]
                }] }
    ];
    /** @nocollapse */
    GeolocateButtonComponent.ctorParameters = function () { return []; };
    GeolocateButtonComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return GeolocateButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @return {?}
 */
function baseLayersSwitcherSlideInOut() {
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["trigger"])('baseLayerSwitcherState', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["state"])('collapseIcon', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["style"])({
            height: '40px',
            width: '40px',
            overflow: 'hidden'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["state"])('collapseMap', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["style"])({
            height: '85px',
            overflow: 'hidden'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["state"])('expand', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["style"])({
            overflow: 'hidden'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["transition"])('collapse => expand', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["animate"])('200ms')),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["transition"])('expand => collapse', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_29__["animate"])('200ms'))
    ]);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var BaseLayersSwitcherComponent = /** @class */ (function () {
    function BaseLayersSwitcherComponent(mediaService) {
        this.mediaService = mediaService;
        this._baseLayers = [];
        this.expand = false;
        this.showButton = true;
        /** @type {?} */
        var media = this.mediaService.media$.value;
        if (media === _igo2_core__WEBPACK_IMPORTED_MODULE_76__["Media"].Mobile && this.useStaticIcon === undefined) {
            this.useStaticIcon = true;
        }
    }
    Object.defineProperty(BaseLayersSwitcherComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseLayersSwitcherComponent.prototype, "useStaticIcon", {
        get: /**
         * @return {?}
         */
        function () {
            return this._useStaticIcon;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._useStaticIcon = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    BaseLayersSwitcherComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.layers$$ = this.map.layers$.subscribe((/**
         * @param {?} arrayLayers
         * @return {?}
         */
        function (arrayLayers) {
            _this._baseLayers = arrayLayers.filter((/**
             * @param {?} l
             * @return {?}
             */
            function (l) { return l.baseLayer; }));
        }));
    };
    /**
     * @return {?}
     */
    BaseLayersSwitcherComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.layers$$.unsubscribe();
    };
    /**
     * @return {?}
     */
    BaseLayersSwitcherComponent.prototype.collapseOrExpand = /**
     * @return {?}
     */
    function () {
        if (this.baseLayers.length > 1 || this.useStaticIcon) {
            this.expand = !this.expand;
        }
        else {
            this.expand = false;
        }
    };
    Object.defineProperty(BaseLayersSwitcherComponent.prototype, "baseLayers", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var mapResolution = this.map.viewController.getResolution();
            /** @type {?} */
            var bl = this._baseLayers.filter((/**
             * @param {?} l
             * @return {?}
             */
            function (l) {
                return ((!l.options.maxResolution ||
                    mapResolution <= l.options.maxResolution) &&
                    (!l.options.minResolution || mapResolution >= l.options.minResolution));
            }));
            /** @type {?} */
            var blHidden = bl.filter((/**
             * @param {?} l
             * @return {?}
             */
            function (l) { return !l.visible; }));
            return blHidden.length + 1 === bl.length ? blHidden : bl;
        },
        enumerable: true,
        configurable: true
    });
    BaseLayersSwitcherComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-baselayers-switcher',
                    template: "<div *ngIf=\"baseLayers.length > 0\"\r\n     class=\"igo-baselayers-switcher-container\"\r\n     [ngClass]=\"{'container-expand': expand}\"\r\n     [@baseLayerSwitcherState]=\"expand ? 'expand' : useStaticIcon ? 'collapseIcon' : 'collapseMap'\"\r\n     (@baseLayerSwitcherState.start)=\"showButton=false\"\r\n     (@baseLayerSwitcherState.done)=\"showButton=true\"\r\n     (click)=\"collapseOrExpand()\">\r\n\r\n     <div *ngIf=\"useStaticIcon && !expand && showButton\" class=\"igo-baselayers-switcher-button-container\">\r\n       <button\r\n         mat-icon-button\r\n         [matTooltip]=\"'igo.geo.mapButtons.baselayerSwitcher' | translate\"\r\n         matTooltipPosition=\"right\"\r\n         color=\"primary\">\r\n         <mat-icon svgIcon=\"photo-library\"></mat-icon>\r\n       </button>\r\n     </div>\r\n\r\n     <igo-mini-basemap *ngFor=\"let baseLayer of baseLayers; let i = index\"\r\n       [map]=\"map\"\r\n       [baseLayer]=\"baseLayer\"\r\n       [display]=\"expand || (i === 0 && !useStaticIcon)\"\r\n       [disabled]=\"!expand && baseLayers.length > 1\">\r\n     </igo-mini-basemap>\r\n\r\n    <div class=\"more-baselayers\">\r\n      <mat-icon class=\"material-icons mat-icon mat-list-avatar\" color=\"primary\" svgIcon=\"menu-down\"></mat-icon>\r\n    </div>\r\n\r\n</div>\r\n",
                    animations: [baseLayersSwitcherSlideInOut()],
                    styles: [".igo-baselayers-switcher-container{height:auto;position:relative}.container-expand{overflow:hidden;border-width:0}.more-baselayers{width:80px;height:20px;background-color:#fff;text-align:center;cursor:pointer}.more-baselayers:hover{background-color:#efefef}.igo-baselayers-switcher-button-container{width:40px;background-color:#fff}.igo-baselayers-switcher-button-container:hover{background-color:#efefef}:host>>>button .mat-button-ripple-round,button{border-radius:0}"]
                }] }
    ];
    /** @nocollapse */
    BaseLayersSwitcherComponent.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["MediaService"] }
    ]; };
    BaseLayersSwitcherComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        useStaticIcon: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return BaseLayersSwitcherComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MiniBaseMapComponent = /** @class */ (function () {
    function MiniBaseMapComponent(layerService) {
        this.layerService = layerService;
        this.basemap = new IgoMap({
            controls: {},
            interactions: false
        });
    }
    Object.defineProperty(MiniBaseMapComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
            this.handleMoveEnd();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MiniBaseMapComponent.prototype, "baseLayer", {
        get: /**
         * @return {?}
         */
        function () {
            return this._baseLayer;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._baseLayer = value;
            this.handleBaseLayerChanged(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MiniBaseMapComponent.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._disabled = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MiniBaseMapComponent.prototype, "display", {
        get: /**
         * @return {?}
         */
        function () {
            return this._display;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._display = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MiniBaseMapComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.map.ol.on('moveend', (/**
         * @return {?}
         */
        function () { return _this.handleMoveEnd(); }));
        this.handleMoveEnd();
    };
    /**
     * @return {?}
     */
    MiniBaseMapComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.map.ol.un('moveend', (/**
         * @return {?}
         */
        function () { return _this.handleMoveEnd(); }));
    };
    /**
     * @param {?} baseLayer
     * @return {?}
     */
    MiniBaseMapComponent.prototype.changeBaseLayer = /**
     * @param {?} baseLayer
     * @return {?}
     */
    function (baseLayer) {
        if (this.disabled) {
            return;
        }
        this.map.changeBaseLayer(baseLayer);
    };
    /**
     * @private
     * @return {?}
     */
    MiniBaseMapComponent.prototype.handleMoveEnd = /**
     * @private
     * @return {?}
     */
    function () {
        this.basemap.ol.setView(this.map.ol.getView());
    };
    /**
     * @private
     * @param {?} baselayer
     * @return {?}
     */
    MiniBaseMapComponent.prototype.handleBaseLayerChanged = /**
     * @private
     * @param {?} baselayer
     * @return {?}
     */
    function (baselayer) {
        this.basemap.removeAllLayers();
        /** @type {?} */
        var options = Object.assign(Object.create(baselayer.options), baselayer.options);
        options.visible = true;
        /** @type {?} */
        var layer = this.layerService.createLayer(options);
        this.basemap.addLayer(layer);
    };
    MiniBaseMapComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-mini-basemap',
                    template: "<div class=\"igo-mini-basemap-container\">\r\n\r\n  <div *ngIf=\"display\" (click)=\"changeBaseLayer(baseLayer)\">\r\n    <igo-map-browser [map]=\"basemap\"></igo-map-browser>\r\n    <div class='igo-mini-basemap-title'>{{baseLayer.title}}</div>\r\n  </div>\r\n\r\n</div>\r\n",
                    styles: [".igo-mini-basemap-container{width:calc(40px * 2);height:calc(40px * 2);background-color:rgba(255,255,255,.01);border:2px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,.3);cursor:pointer;margin-top:5px}.igo-mini-basemap-container:hover .igo-mini-basemap-title{color:#000;text-shadow:0 0 5px #fff}.igo-mini-basemap-container>div{width:100%;height:100%}.igo-mini-basemap-title{position:relative;top:-76px;height:76px;width:76px;text-align:center;vertical-align:bottom;color:#fff;text-shadow:0 0 5px #000;white-space:normal;display:flex;align-items:flex-end;justify-content:center}"]
                }] }
    ];
    /** @nocollapse */
    MiniBaseMapComponent.ctorParameters = function () { return [
        { type: LayerService }
    ]; };
    MiniBaseMapComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        baseLayer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        display: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return MiniBaseMapComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var RotationButtonComponent = /** @class */ (function () {
    function RotationButtonComponent() {
    }
    Object.defineProperty(RotationButtonComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RotationButtonComponent.prototype, "showIfNoRotation", {
        get: /**
         * @return {?}
         */
        function () {
            return this._showIfNoRotation;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._showIfNoRotation = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RotationButtonComponent.prototype, "color", {
        get: /**
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._color = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RotationButtonComponent.prototype, "rotated", {
        get: /**
         * @return {?}
         */
        function () {
            return this.map.viewController.getRotation() !== 0;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} radians
     * @return {?}
     */
    RotationButtonComponent.prototype.rotationStyle = /**
     * @param {?} radians
     * @return {?}
     */
    function (radians) {
        /** @type {?} */
        var rotation = 'rotate(' + radians + 'rad)';
        return {
            transform: rotation
        };
    };
    RotationButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-rotation-button',
                    template: "<div *ngIf=\"rotated && !showIfNoRotation\" class=\"igo-rotation-button-container\"\r\n  [matTooltip]=\"rotated ? ('igo.geo.mapButtons.resetRotation' | translate): ('igo.geo.mapButtons.tipRotation' | translate)\"\r\n  matTooltipPosition=\"left\">\r\n  <button mat-icon-button matTooltipPosition=\"left\" [color]=\"color\" [disabled]=\"!rotated\"\r\n    (click)=\"map.viewController.resetRotation()\">\r\n    <mat-icon [ngStyle]=\"rotationStyle(map.viewController.getRotation())\" svgIcon=\"navigation\">\r\n    </mat-icon>\r\n  </button>\r\n</div>\r\n\r\n<div *ngIf=\"showIfNoRotation\" class=\"igo-rotation-button-container\"\r\n  [matTooltip]=\"rotated ? ('igo.geo.mapButtons.resetRotation' | translate): ('igo.geo.mapButtons.tipRotation' | translate)\"\r\n  matTooltipPosition=\"left\">\r\n  <button mat-icon-button matTooltipPosition=\"left\" [color]=\"color\" [disabled]=\"!rotated\"\r\n    (click)=\"map.viewController.resetRotation()\">\r\n    <mat-icon [ngStyle]=\"rotationStyle(map.viewController.getRotation())\" svgIcon=\"navigation\">\r\n    </mat-icon>\r\n  </button>\r\n</div>",
                    styles: [".igo-rotation-button-container{width:40px;background-color:#fff}.igo-rotation-button-container:hover{background-color:#efefef}:host>>>button .mat-button-ripple-round,button{border-radius:0}@media only screen and (max-width:450px),only screen and (max-height:450px){:host>>>button .mat-button-ripple-round:disabled,button:disabled{display:none}}"]
                }] }
    ];
    /** @nocollapse */
    RotationButtonComponent.ctorParameters = function () { return []; };
    RotationButtonComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        showIfNoRotation: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return RotationButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var EsriStyleGenerator = /** @class */ (function () {
    function EsriStyleGenerator() {
        this._converters = {};
        this._converters.esriPMS = EsriStyleGenerator._convertEsriPMS;
        this._converters.esriSFS = EsriStyleGenerator._convertEsriSFS;
        this._converters.esriSLS = EsriStyleGenerator._convertEsriSLS;
        this._converters.esriSMS = EsriStyleGenerator._convertEsriSMS;
        this._converters.esriTS = EsriStyleGenerator._convertEsriTS;
        this._renderers = {};
        this._renderers.uniqueValue = this._renderUniqueValue;
        this._renderers.simple = this._renderSimple;
        this._renderers.classBreaks = this._renderClassBreaks;
    }
    /**
     * @param {?} point
     * @return {?}
     */
    EsriStyleGenerator._convertPointToPixel = /**
     * @param {?} point
     * @return {?}
     */
    function (point) {
        return point / 0.75;
    };
    /**
     * @param {?} color
     * @return {?}
     */
    EsriStyleGenerator._transformColor = /**
     * @param {?} color
     * @return {?}
     */
    function (color) {
        // alpha channel is different, runs from 0-255 but in ol3 from 0-1
        return [color[0], color[1], color[2], color[3] / 255];
    };
    /**
     * @param {?} scale
     * @param {?} units
     * @return {?}
     */
    EsriStyleGenerator._getResolutionForScale = /**
     * @param {?} scale
     * @param {?} units
     * @return {?}
     */
    function (scale, units) {
        /** @type {?} */
        var dpi = 25.4 / 0.28;
        /** @type {?} */
        var mpu = ol_proj__WEBPACK_IMPORTED_MODULE_59__["METERS_PER_UNIT"][units];
        /** @type {?} */
        var inchesPerMeter = 39.37;
        return parseFloat(scale) / (mpu * inchesPerMeter * dpi);
    };
    /* convert an Esri Text Symbol */
    /* convert an Esri Text Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    EsriStyleGenerator._convertEsriTS = /* convert an Esri Text Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    function (symbol) {
        /** @type {?} */
        var rotation = EsriStyleGenerator._transformAngle(symbol.angle);
        /** @type {?} */
        var text = symbol.text !== undefined ? symbol.text : undefined;
        return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
            text: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Text"]({
                fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                    color: EsriStyleGenerator._transformColor(symbol.color)
                }),
                font: symbol.font.style +
                    ' ' +
                    symbol.font.weight +
                    ' ' +
                    symbol.font.size +
                    ' px ' +
                    symbol.font.family,
                textBaseline: symbol.verticalAlignment,
                textAlign: symbol.horizontalAlignment,
                offsetX: EsriStyleGenerator._convertPointToPixel(symbol.xoffset),
                offsetY: EsriStyleGenerator._convertPointToPixel(symbol.yoffset),
                rotation: rotation,
                text: text
            })
        });
    };
    /* convert an Esri Picture Marker Symbol */
    /* convert an Esri Picture Marker Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    EsriStyleGenerator._convertEsriPMS = /* convert an Esri Picture Marker Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    function (symbol) {
        /** @type {?} */
        var src = 'data:' + symbol.contentType + ';base64, ' + symbol.imageData;
        /** @type {?} */
        var rotation = EsriStyleGenerator._transformAngle(symbol.angle);
        return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
            image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Icon"]({
                src: src,
                rotation: rotation
            })
        });
    };
    /* convert an Esri Simple Fill Symbol */
    /* convert an Esri Simple Fill Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    EsriStyleGenerator._convertEsriSFS = /* convert an Esri Simple Fill Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    function (symbol) {
        // there is no support in openlayers currently for fill patterns, so style is not interpreted
        /** @type {?} */
        var fill = new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
            color: EsriStyleGenerator._transformColor(symbol.color)
        });
        /** @type {?} */
        var stroke = symbol.outline
            ? EsriStyleGenerator._convertOutline(symbol.outline)
            : undefined;
        return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
            fill: fill,
            stroke: stroke
        });
    };
    /**
     * @param {?} outline
     * @return {?}
     */
    EsriStyleGenerator._convertOutline = /**
     * @param {?} outline
     * @return {?}
     */
    function (outline) {
        /** @type {?} */
        var lineDash;
        /** @type {?} */
        var color = EsriStyleGenerator._transformColor(outline.color);
        if (outline.style === 'esriSLSDash') {
            lineDash = [5];
        }
        else if (outline.style === 'esriSLSDashDot') {
            lineDash = [5, 5, 1, 2];
        }
        else if (outline.style === 'esriSLSDashDotDot') {
            lineDash = [5, 5, 1, 2, 1, 2];
        }
        else if (outline.style === 'esriSLSDot') {
            lineDash = [1, 2];
        }
        else if (outline.style === 'esriSLSNull') {
            // line not visible, make color fully transparent
            color[3] = 0;
        }
        return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
            color: color,
            lineDash: lineDash,
            width: EsriStyleGenerator._convertPointToPixel(outline.width)
        });
    };
    /* convert an Esri Simple Line Symbol */
    /* convert an Esri Simple Line Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    EsriStyleGenerator._convertEsriSLS = /* convert an Esri Simple Line Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    function (symbol) {
        return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
            stroke: EsriStyleGenerator._convertOutline(symbol)
        });
    };
    /**
     * @param {?} angle
     * @return {?}
     */
    EsriStyleGenerator._transformAngle = /**
     * @param {?} angle
     * @return {?}
     */
    function (angle) {
        if (angle === 0 || angle === undefined) {
            return undefined;
        }
        /** @type {?} */
        var normalRad = (angle * Math.PI) / 180;
        /** @type {?} */
        var ol3Rad = -normalRad + Math.PI / 2;
        if (ol3Rad < 0) {
            return 2 * Math.PI + ol3Rad;
        }
        else {
            return ol3Rad;
        }
    };
    /* convert an Esri Simple Marker Symbol */
    /* convert an Esri Simple Marker Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    EsriStyleGenerator._convertEsriSMS = /* convert an Esri Simple Marker Symbol */
    /**
     * @param {?} symbol
     * @return {?}
     */
    function (symbol) {
        /** @type {?} */
        var fill = new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
            color: EsriStyleGenerator._transformColor(symbol.color)
        });
        /** @type {?} */
        var stroke = symbol.outline
            ? EsriStyleGenerator._convertOutline(symbol.outline)
            : undefined;
        /** @type {?} */
        var radius = EsriStyleGenerator._convertPointToPixel(symbol.size) / 2;
        /** @type {?} */
        var rotation = EsriStyleGenerator._transformAngle(symbol.angle);
        if (symbol.style === 'esriSMSCircle') {
            return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
                    radius: radius,
                    fill: fill,
                    stroke: stroke
                })
            });
        }
        else if (symbol.style === 'esriSMSCross') {
            return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["RegularShape"]({
                    fill: fill,
                    stroke: stroke,
                    points: 4,
                    radius: radius,
                    radius2: 0,
                    angle: 0,
                    rotation: rotation
                })
            });
        }
        else if (symbol.style === 'esriSMSDiamond') {
            return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["RegularShape"]({
                    fill: fill,
                    stroke: stroke,
                    points: 4,
                    radius: radius,
                    rotation: rotation
                })
            });
        }
        else if (symbol.style === 'esriSMSSquare') {
            return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["RegularShape"]({
                    fill: fill,
                    stroke: stroke,
                    points: 4,
                    radius: radius,
                    angle: Math.PI / 4,
                    rotation: rotation
                })
            });
        }
        else if (symbol.style === 'esriSMSX') {
            return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["RegularShape"]({
                    fill: fill,
                    stroke: stroke,
                    points: 4,
                    radius: radius,
                    radius2: 0,
                    angle: Math.PI / 4,
                    rotation: rotation
                })
            });
        }
        else if (symbol.style === 'esriSMSTriangle') {
            return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["RegularShape"]({
                    fill: fill,
                    stroke: stroke,
                    points: 3,
                    radius: radius,
                    angle: 0,
                    rotation: rotation
                })
            });
        }
    };
    /**
     * @param {?} labelingInfo
     * @param {?} mapUnits
     * @return {?}
     */
    EsriStyleGenerator.prototype._convertLabelingInfo = /**
     * @param {?} labelingInfo
     * @param {?} mapUnits
     * @return {?}
     */
    function (labelingInfo, mapUnits) {
        /** @type {?} */
        var styles = [];
        for (var i = 0, ii = labelingInfo.length; i < ii; ++i) {
            /** @type {?} */
            var labelExpression = labelingInfo[i].labelExpression;
            // only limited support for label expressions
            /** @type {?} */
            var field = labelExpression.substr(labelExpression.indexOf('[') + 1, labelExpression.indexOf(']') - 1);
            /** @type {?} */
            var symbol = labelingInfo[i].symbol;
            /** @type {?} */
            var maxScale = labelingInfo[i].maxScale;
            /** @type {?} */
            var minScale = labelingInfo[i].minScale;
            /** @type {?} */
            var minResolution = null;
            if (maxScale !== 0) {
                minResolution = EsriStyleGenerator._getResolutionForScale(maxScale, mapUnits);
            }
            /** @type {?} */
            var maxResolution = null;
            if (minScale !== 0) {
                maxResolution = EsriStyleGenerator._getResolutionForScale(minScale, mapUnits);
            }
            /** @type {?} */
            var style$$1 = this._converters[symbol.type].call(this, symbol);
            styles.push(((/**
             * @return {?}
             */
            function () {
                return (/**
                 * @param {?} feature
                 * @param {?} resolution
                 * @return {?}
                 */
                function (feature, resolution) {
                    /** @type {?} */
                    var visible = true;
                    if (this.minResolution !== null && this.maxResolution !== null) {
                        visible =
                            resolution < this.maxResolution &&
                                resolution >= this.minResolution;
                    }
                    else if (this.minResolution !== null) {
                        visible = resolution >= this.minResolution;
                    }
                    else if (this.maxResolution !== null) {
                        visible = resolution < this.maxResolution;
                    }
                    if (visible) {
                        /** @type {?} */
                        var value = feature.get(this.field);
                        this.style.getText().setText(value);
                        return [this.style];
                    }
                });
            }))().bind({
                minResolution: minResolution,
                maxResolution: maxResolution,
                field: field,
                style: style$$1
            }));
        }
        return styles;
    };
    /**
     * @param {?} renderer
     * @return {?}
     */
    EsriStyleGenerator.prototype._renderSimple = /**
     * @param {?} renderer
     * @return {?}
     */
    function (renderer) {
        /** @type {?} */
        var style$$1 = this._converters[renderer.symbol.type].call(this, renderer.symbol);
        return ((/**
         * @return {?}
         */
        function () {
            return (/**
             * @return {?}
             */
            function () {
                return [style$$1];
            });
        }))();
    };
    /**
     * @param {?} renderer
     * @return {?}
     */
    EsriStyleGenerator.prototype._renderClassBreaks = /**
     * @param {?} renderer
     * @return {?}
     */
    function (renderer) {
        /** @type {?} */
        var defaultSymbol = renderer.defaultSymbol;
        /** @type {?} */
        var defaultStyle = this._converters[defaultSymbol.type].call(this, defaultSymbol);
        /** @type {?} */
        var field = renderer.field;
        /** @type {?} */
        var classes = [];
        for (var i = 0, ii = renderer.classBreakInfos.length; i < ii; ++i) {
            /** @type {?} */
            var classBreakInfo = renderer.classBreakInfos[i];
            /** @type {?} */
            var min = void 0;
            if (classBreakInfo.classMinValue === null ||
                classBreakInfo.classMinValue === undefined) {
                if (i === 0) {
                    min = renderer.minValue;
                }
                else {
                    min = renderer.classBreakInfos[i - 1].classMaxValue;
                }
            }
            else {
                min = classBreakInfo.classMinValue;
            }
            /** @type {?} */
            var max = classBreakInfo.classMaxValue;
            /** @type {?} */
            var symbol = classBreakInfo.symbol;
            /** @type {?} */
            var style$$1 = this._converters[symbol.type].call(this, symbol);
            classes.push({ min: min, max: max, style: style$$1 });
        }
        return ((/**
         * @return {?}
         */
        function () {
            return (/**
             * @param {?} feature
             * @return {?}
             */
            function (feature) {
                /** @type {?} */
                var value = feature.get(field);
                for (var i = 0, ii = classes.length; i < ii; ++i) {
                    /** @type {?} */
                    var condition = void 0;
                    if (i === 0) {
                        condition = value >= classes[i].min && value <= classes[i].max;
                    }
                    else {
                        condition = value > classes[i].min && value <= classes[i].max;
                    }
                    if (condition) {
                        return [classes[i].style];
                    }
                }
                return [defaultStyle];
            });
        }))();
    };
    /**
     * @param {?} renderer
     * @return {?}
     */
    EsriStyleGenerator.prototype._renderUniqueValue = /**
     * @param {?} renderer
     * @return {?}
     */
    function (renderer) {
        /** @type {?} */
        var defaultSymbol = renderer.defaultSymbol;
        /** @type {?} */
        var defaultStyle = [];
        if (defaultSymbol) {
            defaultStyle = [
                this._converters[defaultSymbol.type].call(this, defaultSymbol)
            ];
        }
        /** @type {?} */
        var field = renderer.field1;
        /** @type {?} */
        var infos = renderer.uniqueValueInfos;
        /** @type {?} */
        var me = this;
        return ((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var hash = {};
            for (var i = 0, ii = infos.length; i < ii; ++i) {
                /** @type {?} */
                var info = infos[i];
                /** @type {?} */
                var symbol = info.symbol;
                hash[info.value] = [me._converters[symbol.type].call(me, symbol)];
            }
            return (/**
             * @param {?} feature
             * @return {?}
             */
            function (feature) {
                /** @type {?} */
                var style$$1 = hash[feature.get(field)];
                return style$$1 ? style$$1 : defaultStyle;
            });
        }))();
    };
    /**
     * @param {?} layerInfo
     * @param {?} mapUnits
     * @return {?}
     */
    EsriStyleGenerator.prototype.generateStyle = /**
     * @param {?} layerInfo
     * @param {?} mapUnits
     * @return {?}
     */
    function (layerInfo, mapUnits) {
        /** @type {?} */
        var drawingInfo = layerInfo.drawingInfo;
        /** @type {?} */
        var styleFunctions = [];
        /** @type {?} */
        var drawingInfoStyle = this._renderers[drawingInfo.renderer.type].call(this, drawingInfo.renderer);
        if (drawingInfoStyle !== undefined) {
            styleFunctions.push(drawingInfoStyle);
        }
        if (layerInfo.labelingInfo) {
            /** @type {?} */
            var labelingInfoStyleFunctions = this._convertLabelingInfo(layerInfo.labelingInfo, mapUnits);
            styleFunctions = styleFunctions.concat(labelingInfoStyleFunctions);
        }
        if (styleFunctions.length === 1) {
            return styleFunctions[0];
        }
        else {
            return ((/**
             * @return {?}
             */
            function () {
                return (/**
                 * @param {?} feature
                 * @param {?} resolution
                 * @return {?}
                 */
                function (feature, resolution) {
                    /** @type {?} */
                    var styles = [];
                    for (var i = 0, ii = styleFunctions.length; i < ii; ++i) {
                        /** @type {?} */
                        var result = styleFunctions[i].call(null, feature, resolution);
                        if (result) {
                            styles = styles.concat(result);
                        }
                    }
                    return styles;
                });
            }))();
        }
    };
    return EsriStyleGenerator;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var CapabilitiesService = /** @class */ (function () {
    function CapabilitiesService(http) {
        this.http = http;
        this.capabilitiesStore = [];
        this.parsers = {
            wms: new ol_format__WEBPACK_IMPORTED_MODULE_70__["WMSCapabilities"](),
            wmts: new ol_format__WEBPACK_IMPORTED_MODULE_70__["WMTSCapabilities"]()
        };
    }
    /**
     * @param {?} baseOptions
     * @return {?}
     */
    CapabilitiesService.prototype.getWMSOptions = /**
     * @param {?} baseOptions
     * @return {?}
     */
    function (baseOptions) {
        var _this = this;
        /** @type {?} */
        var url = baseOptions.url;
        /** @type {?} */
        var version = ((/** @type {?} */ (baseOptions.params))).version;
        return this.getCapabilities('wms', url, version).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} capabilities
         * @return {?}
         */
        function (capabilities) {
            return _this.parseWMSOptions(baseOptions, capabilities);
        })));
    };
    /**
     * @param {?} baseOptions
     * @return {?}
     */
    CapabilitiesService.prototype.getWMTSOptions = /**
     * @param {?} baseOptions
     * @return {?}
     */
    function (baseOptions) {
        var _this = this;
        /** @type {?} */
        var url = baseOptions.url;
        /** @type {?} */
        var version = baseOptions.version;
        /** @type {?} */
        var options = this.getCapabilities('wmts', url, version).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} capabilities
         * @return {?}
         */
        function (capabilities) {
            return _this.parseWMTSOptions(baseOptions, capabilities);
        })));
        return options;
    };
    /**
     * @param {?} baseOptions
     * @return {?}
     */
    CapabilitiesService.prototype.getCartoOptions = /**
     * @param {?} baseOptions
     * @return {?}
     */
    function (baseOptions) {
        var _this = this;
        /** @type {?} */
        var baseUrl = 'https://' +
            baseOptions.account +
            '.carto.com/api/v2/viz/' +
            baseOptions.mapId +
            '/viz.json';
        return this.http
            .jsonp(baseUrl, 'callback')
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} cartoOptions
         * @return {?}
         */
        function (cartoOptions) {
            return _this.parseCartoOptions(baseOptions, cartoOptions);
        })));
    };
    /**
     * @param {?} baseOptions
     * @return {?}
     */
    CapabilitiesService.prototype.getArcgisOptions = /**
     * @param {?} baseOptions
     * @return {?}
     */
    function (baseOptions) {
        var _this = this;
        /** @type {?} */
        var baseUrl = baseOptions.url + '/' + baseOptions.layer + '?f=json';
        /** @type {?} */
        var modifiedUrl = baseOptions.url.replace('FeatureServer', 'MapServer');
        /** @type {?} */
        var legendUrl = modifiedUrl + '/legend?f=json';
        /** @type {?} */
        var arcgisOptions = this.http.get(baseUrl);
        /** @type {?} */
        var legend = this.http.get(legendUrl).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) { return res; })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["catchError"])((/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            console.log('No legend associated with this Feature Service');
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["of"])(err);
        })));
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["forkJoin"])([arcgisOptions, legend]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            return _this.parseArcgisOptions(baseOptions, res[0], res[1]);
        })));
    };
    /**
     * @param {?} baseOptions
     * @return {?}
     */
    CapabilitiesService.prototype.getTileArcgisOptions = /**
     * @param {?} baseOptions
     * @return {?}
     */
    function (baseOptions) {
        var _this = this;
        /** @type {?} */
        var baseUrl = baseOptions.url + '/' + baseOptions.layer + '?f=json';
        /** @type {?} */
        var legendUrl = baseOptions.url + '/legend?f=json';
        /** @type {?} */
        var arcgisOptions = this.http.get(baseUrl);
        /** @type {?} */
        var legendInfo = this.http.get(legendUrl);
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["forkJoin"])([arcgisOptions, legendInfo]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            return _this.parseTileArcgisOptions(baseOptions, res[0], res[1]);
        })));
    };
    /**
     * @param {?} service
     * @param {?} baseUrl
     * @param {?=} version
     * @return {?}
     */
    CapabilitiesService.prototype.getCapabilities = /**
     * @param {?} service
     * @param {?} baseUrl
     * @param {?=} version
     * @return {?}
     */
    function (service, baseUrl, version) {
        var _this = this;
        /** @type {?} */
        var params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpParams"]({
            fromObject: {
                request: 'GetCapabilities',
                service: service,
                version: version || '1.3.0'
            }
        });
        /** @type {?} */
        var request = this.http.get(baseUrl, {
            params: params,
            responseType: 'text'
        });
        return request.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            /** @type {?} */
            var capabilities = _this.parsers[service].read(res);
            return capabilities;
        })));
    };
    /**
     * @private
     * @param {?} baseOptions
     * @param {?} capabilities
     * @return {?}
     */
    CapabilitiesService.prototype.parseWMSOptions = /**
     * @private
     * @param {?} baseOptions
     * @param {?} capabilities
     * @return {?}
     */
    function (baseOptions, capabilities) {
        /** @type {?} */
        var layers = ((/** @type {?} */ (baseOptions.params))).layers;
        /** @type {?} */
        var layer = this.findDataSourceInCapabilities(capabilities.Capability.Layer, layers);
        if (!layer) {
            return baseOptions;
        }
        /** @type {?} */
        var metadata = layer.DataURL ? layer.DataURL[0] : undefined;
        /** @type {?} */
        var abstract = layer.Abstract ? layer.Abstract : undefined;
        /** @type {?} */
        var keywordList = layer.KeywordList ? layer.KeywordList : undefined;
        /** @type {?} */
        var queryable = layer.queryable;
        /** @type {?} */
        var timeFilter = this.getTimeFilter(layer);
        /** @type {?} */
        var timeFilterable = timeFilter && Object.keys(timeFilter).length > 0;
        /** @type {?} */
        var options = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].removeUndefined({
            _layerOptionsFromCapabilities: {
                title: layer.Title,
                maxResolution: getResolutionFromScale(layer.MaxScaleDenominator) || Infinity,
                minResolution: getResolutionFromScale(layer.MinScaleDenominator) || 0,
                metadata: {
                    url: metadata ? metadata.OnlineResource : undefined,
                    extern: metadata ? true : undefined,
                    abstract: abstract,
                    keywordList: keywordList
                }
            },
            queryable: queryable,
            timeFilter: timeFilterable ? timeFilter : undefined,
            timeFilterable: timeFilterable ? true : undefined
        });
        return _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].mergeDeep(options, baseOptions);
    };
    /**
     * @private
     * @param {?} baseOptions
     * @param {?} capabilities
     * @return {?}
     */
    CapabilitiesService.prototype.parseWMTSOptions = /**
     * @private
     * @param {?} baseOptions
     * @param {?} capabilities
     * @return {?}
     */
    function (baseOptions, capabilities) {
        /** @type {?} */
        var options = Object(ol_source_WMTS__WEBPACK_IMPORTED_MODULE_5__["optionsFromCapabilities"])(capabilities, baseOptions);
        return Object.assign(options, baseOptions);
    };
    /**
     * @private
     * @param {?} baseOptions
     * @param {?} cartoOptions
     * @return {?}
     */
    CapabilitiesService.prototype.parseCartoOptions = /**
     * @private
     * @param {?} baseOptions
     * @param {?} cartoOptions
     * @return {?}
     */
    function (baseOptions, cartoOptions) {
        /** @type {?} */
        var layers = [];
        /** @type {?} */
        var params = cartoOptions.layers[1].options.layer_definition;
        params.layers.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            layers.push({
                type: element.type.toLowerCase(),
                options: element.options,
                legend: element.legend
            });
        }));
        /** @type {?} */
        var options = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].removeUndefined({
            config: {
                version: params.version,
                layers: layers
            }
        });
        return _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].mergeDeep(options, baseOptions);
    };
    /**
     * @private
     * @param {?} baseOptions
     * @param {?} arcgisOptions
     * @param {?=} legend
     * @return {?}
     */
    CapabilitiesService.prototype.parseArcgisOptions = /**
     * @private
     * @param {?} baseOptions
     * @param {?} arcgisOptions
     * @param {?=} legend
     * @return {?}
     */
    function (baseOptions, arcgisOptions, legend) {
        /** @type {?} */
        var legendInfo = legend.layers ? legend : undefined;
        /** @type {?} */
        var styleGenerator = new EsriStyleGenerator();
        /** @type {?} */
        var units = arcgisOptions.units === 'esriMeters' ? 'm' : 'degrees';
        /** @type {?} */
        var style$$1 = styleGenerator.generateStyle(arcgisOptions, units);
        /** @type {?} */
        var attributions = new ol_control_Attribution__WEBPACK_IMPORTED_MODULE_19__["default"]({
            html: arcgisOptions.copyrightText
        });
        /** @type {?} */
        var timeExtent;
        /** @type {?} */
        var timeFilter;
        if (arcgisOptions.timeInfo) {
            /** @type {?} */
            var time = arcgisOptions.timeInfo.timeExtent;
            timeExtent = time[0] + ',' + time[1];
            /** @type {?} */
            var min = new Date();
            min.setTime(time[0]);
            /** @type {?} */
            var max = new Date();
            max.setTime(time[1]);
            timeFilter = {
                min: min.toUTCString(),
                max: max.toUTCString(),
                range: true,
                type: 'datetime',
                style: 'calendar'
            };
        }
        /** @type {?} */
        var params = Object.assign({}, {
            legendInfo: legendInfo,
            style: style$$1,
            timeFilter: timeFilter,
            timeExtent: timeExtent,
            attributions: attributions
        });
        /** @type {?} */
        var options = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].removeUndefined({
            params: params
        });
        return _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].mergeDeep(options, baseOptions);
    };
    /**
     * @private
     * @param {?} baseOptions
     * @param {?} arcgisOptions
     * @param {?} legend
     * @return {?}
     */
    CapabilitiesService.prototype.parseTileArcgisOptions = /**
     * @private
     * @param {?} baseOptions
     * @param {?} arcgisOptions
     * @param {?} legend
     * @return {?}
     */
    function (baseOptions, arcgisOptions, legend) {
        /** @type {?} */
        var legendInfo = legend.layers ? legend : undefined;
        /** @type {?} */
        var attributions = new ol_control_Attribution__WEBPACK_IMPORTED_MODULE_19__["default"]({
            html: arcgisOptions.copyrightText
        });
        /** @type {?} */
        var timeExtent;
        /** @type {?} */
        var timeFilter;
        if (arcgisOptions.timeInfo) {
            /** @type {?} */
            var time = arcgisOptions.timeInfo.timeExtent;
            timeExtent = time[0] + ',' + time[1];
            /** @type {?} */
            var min = new Date();
            min.setTime(time[0]);
            /** @type {?} */
            var max = new Date();
            max.setTime(time[1]);
            timeFilter = {
                min: min.toUTCString(),
                max: max.toUTCString(),
                range: true,
                type: 'datetime',
                style: 'calendar'
            };
        }
        /** @type {?} */
        var params = Object.assign({}, {
            layers: 'show:' + baseOptions.layer,
            time: timeExtent
        });
        /** @type {?} */
        var options = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].removeUndefined({
            params: params,
            legendInfo: legendInfo,
            timeFilter: timeFilter,
            attributions: attributions
        });
        return _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].mergeDeep(options, baseOptions);
    };
    /**
     * @private
     * @param {?} layerArray
     * @param {?} name
     * @return {?}
     */
    CapabilitiesService.prototype.findDataSourceInCapabilities = /**
     * @private
     * @param {?} layerArray
     * @param {?} name
     * @return {?}
     */
    function (layerArray, name) {
        var _this = this;
        if (Array.isArray(layerArray)) {
            /** @type {?} */
            var layer_1;
            layerArray.find((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                layer_1 = _this.findDataSourceInCapabilities(value, name);
                return layer_1 !== undefined;
            }), this);
            return layer_1;
        }
        else if (layerArray.Layer) {
            return this.findDataSourceInCapabilities(layerArray.Layer, name);
        }
        else {
            if (layerArray.Name && layerArray.Name === name) {
                return layerArray;
            }
            return undefined;
        }
    };
    /**
     * @param {?} layer
     * @return {?}
     */
    CapabilitiesService.prototype.getTimeFilter = /**
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var dimension;
        if (layer.Dimension) {
            /** @type {?} */
            var timeFilter = {};
            dimension = layer.Dimension[0];
            if (dimension.values) {
                /** @type {?} */
                var minMaxDim = dimension.values.split('/');
                timeFilter.min = minMaxDim[0] !== undefined ? minMaxDim[0] : undefined;
                timeFilter.max = minMaxDim[1] !== undefined ? minMaxDim[1] : undefined;
                timeFilter.step = minMaxDim[2] !== undefined ? minMaxDim[2] : undefined;
            }
            if (dimension.default) {
                timeFilter.value = dimension.default;
            }
            return timeFilter;
        }
    };
    CapabilitiesService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    CapabilitiesService.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] }
    ]; };
    /** @nocollapse */ CapabilitiesService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function CapabilitiesService_Factory() { return new CapabilitiesService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"])); }, token: CapabilitiesService, providedIn: "root" });
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__decorate"])([
        Object(ngx_cacheable__WEBPACK_IMPORTED_MODULE_15__["Cacheable"])(),
        Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__metadata"])("design:type", Function),
        Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__metadata"])("design:paramtypes", [String, String, String]),
        Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__metadata"])("design:returntype", rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"])
    ], CapabilitiesService.prototype, "getCapabilities", null);
    return CapabilitiesService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var DataSourceService = /** @class */ (function () {
    function DataSourceService(capabilitiesService, wfsDataSourceService) {
        this.capabilitiesService = capabilitiesService;
        this.wfsDataSourceService = wfsDataSourceService;
        this.datasources$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"]([]);
    }
    /**
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createAsyncDataSource = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        if (!context.type) {
            console.error(context);
            throw new Error('Datasource needs a type');
        }
        /** @type {?} */
        var dataSource;
        switch (context.type.toLowerCase()) {
            case 'osm':
                dataSource = this.createOSMDataSource((/** @type {?} */ (context)));
                break;
            case 'vector':
                dataSource = this.createFeatureDataSource((/** @type {?} */ (context)));
                break;
            case 'wfs':
                dataSource = this.createWFSDataSource((/** @type {?} */ (context)));
                break;
            case 'wms':
                dataSource = this.createWMSDataSource((/** @type {?} */ (context)));
                break;
            case 'wmts':
                dataSource = this.createWMTSDataSource((/** @type {?} */ (context)));
                break;
            case 'xyz':
                dataSource = this.createXYZDataSource((/** @type {?} */ (context)));
                break;
            case 'carto':
                dataSource = this.createCartoDataSource((/** @type {?} */ (context)));
                break;
            case 'arcgisrest':
                dataSource = this.createArcGISRestDataSource((/** @type {?} */ (context)));
                break;
            case 'websocket':
                dataSource = this.createWebSocketDataSource((/** @type {?} */ (context)));
                break;
            case 'mvt':
                dataSource = this.createMVTDataSource((/** @type {?} */ (context)));
                break;
            case 'tilearcgisrest':
                dataSource = this.createTileArcGISRestDataSource((/** @type {?} */ (context)));
                break;
            case 'cluster':
                dataSource = this.createClusterDataSource((/** @type {?} */ (context)));
                break;
            default:
                console.error(context);
                throw new Error('Invalid datasource type');
        }
        this.datasources$.next(this.datasources$.value.concat([dataSource]));
        return dataSource;
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createOSMDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.next(new OSMDataSource(context)); }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createFeatureDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.next(new FeatureDataSource(context)); }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createWebSocketDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.next(new WebSocketDataSource(context)); }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createWFSDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return d.next(new WFSDataSource(context, _this.wfsDataSourceService));
        }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createWMSDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        if (context.optionsFromCapabilities) {
            return this.capabilitiesService
                .getWMSOptions(context)
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} options
             * @return {?}
             */
            function (options) {
                return new WMSDataSource(options, _this.wfsDataSourceService);
            })));
        }
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return d.next(new WMSDataSource(context, _this.wfsDataSourceService));
        }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createWMTSDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        if (context.optionsFromCapabilities) {
            return this.capabilitiesService
                .getWMTSOptions(context)
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} options
             * @return {?}
             */
            function (options) { return new WMTSDataSource(options); })));
        }
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.next(new WMTSDataSource(context)); }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createXYZDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.next(new XYZDataSource(context)); }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createCartoDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        if (context.mapId) {
            return this.capabilitiesService
                .getCartoOptions(context)
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} options
             * @return {?}
             */
            function (options) { return new CartoDataSource(options); })));
        }
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.next(new CartoDataSource(context)); }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createArcGISRestDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        return this.capabilitiesService
            .getArcgisOptions(context)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} options
         * @return {?}
         */
        function (options) {
            return new ArcGISRestDataSource(options);
        })));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createTileArcGISRestDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        return this.capabilitiesService
            .getTileArcgisOptions(context)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} options
         * @return {?}
         */
        function (options) {
            return new TileArcGISRestDataSource(options);
        })));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createMVTDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.next(new MVTDataSource(context)); }));
    };
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    DataSourceService.prototype.createClusterDataSource = /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.next(new ClusterDataSource(context)); }));
    };
    DataSourceService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    DataSourceService.ctorParameters = function () { return [
        { type: CapabilitiesService },
        { type: WFSService }
    ]; };
    /** @nocollapse */ DataSourceService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function DataSourceService_Factory() { return new DataSourceService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(CapabilitiesService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(WFSService)); }, token: DataSourceService, providedIn: "root" });
    return DataSourceService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var LayerService = /** @class */ (function () {
    function LayerService(styleService, dataSourceService, config) {
        this.styleService = styleService;
        this.dataSourceService = dataSourceService;
        this.config = config;
        if (this.config) {
            this.tokenKey = this.config.getConfig('auth.tokenKey');
        }
    }
    /**
     * @param {?} layerOptions
     * @return {?}
     */
    LayerService.prototype.createLayer = /**
     * @param {?} layerOptions
     * @return {?}
     */
    function (layerOptions) {
        if (!layerOptions.source) {
            return;
        }
        if (layerOptions.source.options &&
            layerOptions.source.options.optionsFromCapabilities) {
            layerOptions = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].mergeDeep(((/** @type {?} */ (layerOptions.source.options)))._layerOptionsFromCapabilities ||
                {}, layerOptions || {});
        }
        /** @type {?} */
        var layer;
        switch (layerOptions.source.constructor) {
            case OSMDataSource:
            case WMTSDataSource:
            case XYZDataSource:
            case CartoDataSource:
            case TileArcGISRestDataSource:
                layer = this.createTileLayer((/** @type {?} */ (layerOptions)));
                break;
            case FeatureDataSource:
            case WFSDataSource:
            case ArcGISRestDataSource:
            case WebSocketDataSource:
            case ClusterDataSource:
                layer = this.createVectorLayer((/** @type {?} */ (layerOptions)));
                break;
            case WMSDataSource:
                layer = this.createImageLayer((/** @type {?} */ (layerOptions)));
                break;
            case MVTDataSource:
                layer = this.createVectorTileLayer((/** @type {?} */ (layerOptions)));
                break;
            default:
                break;
        }
        return layer;
    };
    /**
     * @param {?} layerOptions
     * @return {?}
     */
    LayerService.prototype.createAsyncLayer = /**
     * @param {?} layerOptions
     * @return {?}
     */
    function (layerOptions) {
        var _this = this;
        if (layerOptions.source) {
            return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"]((/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return d.next(_this.createLayer(layerOptions)); }));
        }
        return this.dataSourceService
            .createAsyncDataSource(layerOptions.sourceOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} source
         * @return {?}
         */
        function (source) {
            layerOptions.source = source;
            return _this.createLayer(layerOptions);
        })));
    };
    /**
     * @private
     * @param {?} layerOptions
     * @return {?}
     */
    LayerService.prototype.createImageLayer = /**
     * @private
     * @param {?} layerOptions
     * @return {?}
     */
    function (layerOptions) {
        if (this.tokenKey) {
            layerOptions.token = localStorage.getItem(this.tokenKey);
        }
        return new ImageLayer(layerOptions);
    };
    /**
     * @private
     * @param {?} layerOptions
     * @return {?}
     */
    LayerService.prototype.createTileLayer = /**
     * @private
     * @param {?} layerOptions
     * @return {?}
     */
    function (layerOptions) {
        return new TileLayer(layerOptions);
    };
    /**
     * @private
     * @param {?} layerOptions
     * @return {?}
     */
    LayerService.prototype.createVectorLayer = /**
     * @private
     * @param {?} layerOptions
     * @return {?}
     */
    function (layerOptions) {
        /** @type {?} */
        var style$$1;
        if (layerOptions.style !== undefined) {
            style$$1 = this.styleService.createStyle(layerOptions.style);
        }
        if (layerOptions.source instanceof ArcGISRestDataSource) {
            /** @type {?} */
            var source = (/** @type {?} */ (layerOptions.source));
            style$$1 = source.options.params.style;
        }
        else if (layerOptions.styleByAttribute) {
            /** @type {?} */
            var serviceStyle_1 = this.styleService;
            layerOptions.style = (/**
             * @param {?} feature
             * @return {?}
             */
            function (feature) {
                return serviceStyle_1.createStyleByAttribute(feature, layerOptions.styleByAttribute);
            });
            return new VectorLayer(layerOptions);
        }
        if (layerOptions.source instanceof ClusterDataSource) {
            /** @type {?} */
            var serviceStyle_2 = this.styleService;
            layerOptions.style = (/**
             * @param {?} feature
             * @return {?}
             */
            function (feature) {
                return serviceStyle_2.createClusterStyle(feature, layerOptions.clusterParam);
            });
            return new VectorLayer(layerOptions);
        }
        /** @type {?} */
        var layerOptionsOl = Object.assign({}, layerOptions, {
            style: style$$1
        });
        return new VectorLayer(layerOptionsOl);
    };
    /**
     * @private
     * @param {?} layerOptions
     * @return {?}
     */
    LayerService.prototype.createVectorTileLayer = /**
     * @private
     * @param {?} layerOptions
     * @return {?}
     */
    function (layerOptions) {
        /** @type {?} */
        var style$$1;
        if (layerOptions.style !== undefined) {
            style$$1 = this.styleService.createStyle(layerOptions.style);
        }
        if (layerOptions.styleByAttribute) {
            /** @type {?} */
            var serviceStyle_3 = this.styleService;
            layerOptions.style = (/**
             * @param {?} feature
             * @return {?}
             */
            function (feature) {
                return serviceStyle_3.createStyleByAttribute(feature, layerOptions.styleByAttribute);
            });
            return new VectorTileLayer(layerOptions);
        }
        /** @type {?} */
        var layerOptionsOl = Object.assign({}, layerOptions, {
            style: style$$1
        });
        return new VectorTileLayer(layerOptionsOl);
    };
    LayerService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    LayerService.ctorParameters = function () { return [
        { type: StyleService },
        { type: DataSourceService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Optional"] }] }
    ]; };
    /** @nocollapse */ LayerService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function LayerService_Factory() { return new LayerService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(StyleService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(DataSourceService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"], 8)); }, token: LayerService, providedIn: "root" });
    return LayerService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var CatalogItemType = {
    Layer: 'layer',
    Group: 'group',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var QueryService = /** @class */ (function () {
    function QueryService(http) {
        this.http = http;
        this.queryEnabled = true;
    }
    /**
     * @param {?} layers
     * @param {?} options
     * @return {?}
     */
    QueryService.prototype.query = /**
     * @param {?} layers
     * @param {?} options
     * @return {?}
     */
    function (layers, options) {
        var _this = this;
        return layers
            .filter((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return layer.visible && layer.isInResolutionsRange; }))
            .map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return _this.queryLayer(layer, options); }));
    };
    /**
     * @param {?} layer
     * @param {?} options
     * @return {?}
     */
    QueryService.prototype.queryLayer = /**
     * @param {?} layer
     * @param {?} options
     * @return {?}
     */
    function (layer, options) {
        var _this = this;
        /** @type {?} */
        var url = this.getQueryUrl(layer.dataSource, options);
        if (!url) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["of"])([]);
        }
        if (((/** @type {?} */ (layer.dataSource))).options.queryFormat === QueryFormat.HTMLGML2) {
            /** @type {?} */
            var urlGml = this.getQueryUrl(layer.dataSource, options, true);
            return this.http.get(urlGml, { responseType: 'text' })
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["mergeMap"])((/**
             * @param {?} gmlRes
             * @return {?}
             */
            function (gmlRes) {
                /** @type {?} */
                var imposedGeom = _this.mergeGML(gmlRes, url);
                return _this.http.get(url, { responseType: 'text' })
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])(((/**
                 * @param {?} res
                 * @return {?}
                 */
                function (res) { return _this.extractData(res, layer, options, url, imposedGeom); }))));
            })));
        }
        /** @type {?} */
        var request = this.http.get(url, { responseType: 'text' });
        return request.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) { return _this.extractData(res, layer, options, url); })));
    };
    /**
     * @private
     * @param {?} gmlRes
     * @param {?} url
     * @return {?}
     */
    QueryService.prototype.mergeGML = /**
     * @private
     * @param {?} gmlRes
     * @param {?} url
     * @return {?}
     */
    function (gmlRes, url) {
        /** @type {?} */
        var parser = new ol_format_GML2__WEBPACK_IMPORTED_MODULE_30__["default"]();
        /** @type {?} */
        var features = parser.readFeatures(gmlRes);
        // Handle non standard GML output (MapServer)
        if (features.length === 0) {
            parser = new ol_format__WEBPACK_IMPORTED_MODULE_70__["WMSGetFeatureInfo"]();
            features = parser.readFeatures(gmlRes);
        }
        /** @type {?} */
        var olmline = new ol_geom__WEBPACK_IMPORTED_MODULE_58__["MultiLineString"]([]);
        /** @type {?} */
        var pts;
        /** @type {?} */
        var ptsArray = [];
        /** @type {?} */
        var olmpoly = new ol_geom__WEBPACK_IMPORTED_MODULE_58__["MultiPolygon"]([]);
        /** @type {?} */
        var firstFeatureType;
        /** @type {?} */
        var nbFeatures = features.length;
        // Check if geometry intersect bbox
        // for geoserver getfeatureinfo response in data projection, not call projection
        /** @type {?} */
        var searchParams = this.getQueryParams(url.toLowerCase());
        /** @type {?} */
        var bboxRaw = searchParams.bbox;
        /** @type {?} */
        var bbox$$1 = bboxRaw.split(',');
        /** @type {?} */
        var bboxExtent = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["createEmpty"])();
        Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["extend"])(bboxExtent, bbox$$1);
        /** @type {?} */
        var outBboxExtent = false;
        features.map((/**
         * @param {?} feature
         * @return {?}
         */
        function (feature) {
            /*  if (!feature.getGeometry().simplify(100).intersectsExtent(bboxExtent)) {
                    outBboxExtent = true;
                    // TODO: Check to project the geometry?
                  }*/
            /** @type {?} */
            var featureGeometryCoordinates = feature.getGeometry().getCoordinates();
            /** @type {?} */
            var featureGeometryType = feature.getGeometry().getType();
            if (!firstFeatureType && !outBboxExtent) {
                firstFeatureType = featureGeometryType;
            }
            {
                switch (featureGeometryType) {
                    case 'Point':
                        if (nbFeatures === 1) {
                            pts = new ol_geom__WEBPACK_IMPORTED_MODULE_58__["Point"](featureGeometryCoordinates, 'XY');
                        }
                        else {
                            ptsArray.push(featureGeometryCoordinates);
                        }
                        break;
                    case 'LineString':
                        olmline.appendLineString(new ol_geom__WEBPACK_IMPORTED_MODULE_58__["LineString"](featureGeometryCoordinates, 'XY'));
                        break;
                    case 'Polygon':
                        olmpoly.appendPolygon(new ol_geom__WEBPACK_IMPORTED_MODULE_58__["Polygon"](featureGeometryCoordinates, 'XY'));
                        break;
                    case 'MultiPolygon':
                        olmpoly = new ol_geom__WEBPACK_IMPORTED_MODULE_58__["MultiPolygon"](featureGeometryCoordinates, 'XY');
                        break;
                    default:
                        return;
                }
            }
        }));
        /** @type {?} */
        var olmpts;
        if (ptsArray.length === 0 && pts) {
            olmpts = {
                type: pts.getType(),
                coordinates: pts.getCoordinates()
            };
        }
        else {
            olmpts = {
                type: 'Polygon',
                coordinates: [this.convexHull(ptsArray)]
            };
        }
        switch (firstFeatureType) {
            case 'LineString':
                return {
                    type: olmline.getType(),
                    coordinates: olmline.getCoordinates()
                };
            case 'Point':
                return olmpts;
            case 'Polygon':
                return {
                    type: olmpoly.getType(),
                    coordinates: olmpoly.getCoordinates()
                };
            case 'MultiPolygon':
                return {
                    type: olmpoly.getType(),
                    coordinates: olmpoly.getCoordinates()
                };
            default:
                return;
        }
    };
    /**
     * @param {?} a
     * @param {?} b
     * @param {?} o
     * @return {?}
     */
    QueryService.prototype.cross = /**
     * @param {?} a
     * @param {?} b
     * @param {?} o
     * @return {?}
     */
    function (a, b, o) {
        return (a[0] - o[0]) * (b[1] - o[1]) - (a[1] - o[1]) * (b[0] - o[0]);
    };
    /**
     * @param points An array of [X, Y] coordinates
     * This method is use instead of turf.js convexHull because Turf needs at least 3 point to make a hull.
     * https://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain#JavaScript
     */
    /**
     * @param {?} points An array of [X, Y] coordinates
     * This method is use instead of turf.js convexHull because Turf needs at least 3 point to make a hull.
     * https://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain#JavaScript
     * @return {?}
     */
    QueryService.prototype.convexHull = /**
     * @param {?} points An array of [X, Y] coordinates
     * This method is use instead of turf.js convexHull because Turf needs at least 3 point to make a hull.
     * https://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain#JavaScript
     * @return {?}
     */
    function (points) {
        var e_1, _a;
        points.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            return a[0] === b[0] ? a[1] - b[1] : a[0] - b[0];
        }));
        /** @type {?} */
        var lower = [];
        try {
            for (var points_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(points), points_1_1 = points_1.next(); !points_1_1.done; points_1_1 = points_1.next()) {
                var point = points_1_1.value;
                while (lower.length >= 2 && this.cross(lower[lower.length - 2], lower[lower.length - 1], point) <= 0) {
                    lower.pop();
                }
                lower.push(point);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (points_1_1 && !points_1_1.done && (_a = points_1.return)) _a.call(points_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        /** @type {?} */
        var upper = [];
        for (var i = points.length - 1; i >= 0; i--) {
            while (upper.length >= 2 && this.cross(upper[upper.length - 2], upper[upper.length - 1], points[i]) <= 0) {
                upper.pop();
            }
            upper.push(points[i]);
        }
        upper.pop();
        lower.pop();
        return lower.concat(upper);
    };
    /**
     * @private
     * @param {?} res
     * @param {?} layer
     * @param {?} options
     * @param {?} url
     * @param {?=} imposedGeometry
     * @return {?}
     */
    QueryService.prototype.extractData = /**
     * @private
     * @param {?} res
     * @param {?} layer
     * @param {?} options
     * @param {?} url
     * @param {?=} imposedGeometry
     * @return {?}
     */
    function (res, layer, options, url, imposedGeometry) {
        /** @type {?} */
        var queryDataSource = (/** @type {?} */ (layer.dataSource));
        /** @type {?} */
        var allowedFieldsAndAlias;
        if (layer.options &&
            layer.options.sourceOptions &&
            layer.options.sourceOptions.sourceFields &&
            layer.options.sourceOptions.sourceFields.length >= 1) {
            allowedFieldsAndAlias = {};
            layer.options.sourceOptions.sourceFields.forEach((/**
             * @param {?} sourceField
             * @return {?}
             */
            function (sourceField) {
                /** @type {?} */
                var alias = sourceField.alias ? sourceField.alias : sourceField.name;
                allowedFieldsAndAlias[sourceField.name] = alias;
            }));
        }
        /** @type {?} */
        var features = [];
        switch (queryDataSource.options.queryFormat) {
            case QueryFormat.GML3:
                features = this.extractGML3Data(res, layer.zIndex, allowedFieldsAndAlias);
                break;
            case QueryFormat.JSON:
            case QueryFormat.GEOJSON:
                features = this.extractGeoJSONData(res);
                break;
            case QueryFormat.ESRIJSON:
                features = this.extractEsriJSONData(res, layer.zIndex);
                break;
            case QueryFormat.TEXT:
                features = this.extractTextData(res);
                break;
            case QueryFormat.HTML:
                features = this.extractHtmlData(res, queryDataSource.queryHtmlTarget, url);
                break;
            case QueryFormat.HTMLGML2:
                features = this.extractHtmlData(res, queryDataSource.queryHtmlTarget, url, imposedGeometry);
                break;
            case QueryFormat.GML2:
            default:
                features = this.extractGML2Data(res, layer, allowedFieldsAndAlias);
                break;
        }
        return features.map((/**
         * @param {?} feature
         * @param {?} index
         * @return {?}
         */
        function (feature, index) {
            /** @type {?} */
            var title = feature.properties[queryDataSource.queryTitle];
            if (!title && features.length > 1) {
                title = layer.title + " (" + (index + 1) + ")";
            }
            else if (!title) {
                title = layer.title;
            }
            /** @type {?} */
            var meta = Object.assign({}, feature.meta || {}, {
                id: Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])(),
                title: title,
                mapTitle: title,
                sourceTitle: layer.title,
                order: 1000 - layer.zIndex
            });
            return Object.assign(feature, {
                meta: meta,
                projection: queryDataSource.options.type === 'carto'
                    ? 'EPSG:4326'
                    : options.projection
            });
        }));
    };
    /**
     * @private
     * @param {?} res
     * @param {?} zIndex
     * @param {?=} allowedFieldsAndAlias
     * @return {?}
     */
    QueryService.prototype.extractGML2Data = /**
     * @private
     * @param {?} res
     * @param {?} zIndex
     * @param {?=} allowedFieldsAndAlias
     * @return {?}
     */
    function (res, zIndex, allowedFieldsAndAlias) {
        var _this = this;
        /** @type {?} */
        var parser = new ol_format_GML2__WEBPACK_IMPORTED_MODULE_30__["default"]();
        /** @type {?} */
        var features = parser.readFeatures(res);
        // Handle non standard GML output (MapServer)
        if (features.length === 0) {
            parser = new ol_format__WEBPACK_IMPORTED_MODULE_70__["WMSGetFeatureInfo"]();
            features = parser.readFeatures(res);
        }
        return features.map((/**
         * @param {?} feature
         * @return {?}
         */
        function (feature) {
            return _this.featureToResult(feature, zIndex, allowedFieldsAndAlias);
        }));
    };
    /**
     * @private
     * @param {?} res
     * @param {?} zIndex
     * @param {?=} allowedFieldsAndAlias
     * @return {?}
     */
    QueryService.prototype.extractGML3Data = /**
     * @private
     * @param {?} res
     * @param {?} zIndex
     * @param {?=} allowedFieldsAndAlias
     * @return {?}
     */
    function (res, zIndex, allowedFieldsAndAlias) {
        var _this = this;
        /** @type {?} */
        var parser = new ol_format_GML3__WEBPACK_IMPORTED_MODULE_31__["default"]();
        /** @type {?} */
        var features = parser.readFeatures(res);
        return features.map((/**
         * @param {?} feature
         * @return {?}
         */
        function (feature) {
            return _this.featureToResult(feature, zIndex, allowedFieldsAndAlias);
        }));
    };
    /**
     * @private
     * @param {?} res
     * @return {?}
     */
    QueryService.prototype.extractGeoJSONData = /**
     * @private
     * @param {?} res
     * @return {?}
     */
    function (res) {
        /** @type {?} */
        var features = [];
        try {
            features = JSON.parse(res).features;
        }
        catch (e) {
            console.warn('query.service: Unable to parse geojson', '\n', res);
        }
        return features;
    };
    /**
     * @private
     * @param {?} res
     * @param {?} zIndex
     * @return {?}
     */
    QueryService.prototype.extractEsriJSONData = /**
     * @private
     * @param {?} res
     * @param {?} zIndex
     * @return {?}
     */
    function (res, zIndex) {
        var _this = this;
        /** @type {?} */
        var parser = new ol_format_EsriJSON__WEBPACK_IMPORTED_MODULE_32__["default"]();
        /** @type {?} */
        var features = parser.readFeatures(res);
        return features.map((/**
         * @param {?} feature
         * @return {?}
         */
        function (feature) { return _this.featureToResult(feature, zIndex); }));
    };
    /**
     * @private
     * @param {?} res
     * @return {?}
     */
    QueryService.prototype.extractTextData = /**
     * @private
     * @param {?} res
     * @return {?}
     */
    function (res) {
        // TODO
        return [];
    };
    /**
     * @private
     * @param {?} res
     * @param {?} htmlTarget
     * @param {?} url
     * @param {?=} imposedGeometry
     * @return {?}
     */
    QueryService.prototype.extractHtmlData = /**
     * @private
     * @param {?} res
     * @param {?} htmlTarget
     * @param {?} url
     * @param {?=} imposedGeometry
     * @return {?}
     */
    function (res, htmlTarget, url, imposedGeometry) {
        // _blank , iframe or undefined
        /** @type {?} */
        var searchParams = this.getQueryParams(url.toLowerCase());
        /** @type {?} */
        var bboxRaw = searchParams.bbox;
        /** @type {?} */
        var width = parseInt(searchParams.width, 10);
        /** @type {?} */
        var height = parseInt(searchParams.height, 10);
        /** @type {?} */
        var xPosition = parseInt(searchParams.i || searchParams.x, 10);
        /** @type {?} */
        var yPosition = parseInt(searchParams.j || searchParams.y, 10);
        /** @type {?} */
        var projection = searchParams.crs || searchParams.srs || 'EPSG:3857';
        /** @type {?} */
        var bbox$$1 = bboxRaw.split(',');
        /** @type {?} */
        var threshold = (Math.abs(parseFloat(bbox$$1[0])) - Math.abs(parseFloat(bbox$$1[2]))) * 0.05;
        // for context in degree (EPSG:4326,4269...)
        if (Math.abs(parseFloat(bbox$$1[0])) < 180) {
            threshold = 0.045;
        }
        /** @type {?} */
        var clickx = parseFloat(bbox$$1[0]) +
            (Math.abs(parseFloat(bbox$$1[0]) - parseFloat(bbox$$1[2])) * xPosition) /
                width -
            threshold;
        /** @type {?} */
        var clicky = parseFloat(bbox$$1[1]) +
            (Math.abs(parseFloat(bbox$$1[1]) - parseFloat(bbox$$1[3])) * yPosition) /
                height -
            threshold;
        /** @type {?} */
        var clickx1 = clickx + threshold * 2;
        /** @type {?} */
        var clicky1 = clicky + threshold * 2;
        /** @type {?} */
        var wktPoly = 'POLYGON((' +
            clickx +
            ' ' +
            clicky +
            ', ' +
            clickx +
            ' ' +
            clicky1 +
            ', ' +
            clickx1 +
            ' ' +
            clicky1 +
            ', ' +
            clickx1 +
            ' ' +
            clicky +
            ', ' +
            clickx +
            ' ' +
            clicky +
            '))';
        /** @type {?} */
        var format = new ol_format__WEBPACK_IMPORTED_MODULE_70__["WKT"]();
        /** @type {?} */
        var tenPercentWidthGeom = format.readFeature(wktPoly);
        /** @type {?} */
        var f = (/** @type {?} */ (tenPercentWidthGeom.getGeometry()));
        if (htmlTarget !== QueryHtmlTarget.BLANK &&
            htmlTarget !== QueryHtmlTarget.IFRAME) {
            htmlTarget = QueryHtmlTarget.IFRAME;
        }
        /** @type {?} */
        var bodyTagStart = res.toLowerCase().indexOf('<body>');
        /** @type {?} */
        var bodyTagEnd = res.toLowerCase().lastIndexOf('</body>') + 7;
        // replace \r \n  and ' ' with '' to validate if the body is really empty.
        /** @type {?} */
        var body = res.slice(bodyTagStart, bodyTagEnd).replace(/(\r|\n|\s)/g, '');
        if (body === '<body></body>' || res === '') {
            return [];
        }
        return [
            {
                type: FEATURE,
                projection: projection,
                properties: { target: htmlTarget, body: res, url: url },
                geometry: imposedGeometry || { type: f.getType(), coordinates: f.getCoordinates() }
            }
        ];
    };
    /**
     * @private
     * @param {?} url
     * @return {?}
     */
    QueryService.prototype.getQueryParams = /**
     * @private
     * @param {?} url
     * @return {?}
     */
    function (url) {
        /** @type {?} */
        var queryString = url.split('?');
        if (!queryString[1]) {
            return;
        }
        /** @type {?} */
        var pairs = queryString[1].split('&');
        /** @type {?} */
        var result = {};
        pairs.forEach((/**
         * @param {?} pair
         * @return {?}
         */
        function (pair) {
            pair = pair.split('=');
            result[pair[0]] = decodeURIComponent(pair[1] || '');
        }));
        return result;
    };
    /**
     * @private
     * @param {?} featureOL
     * @param {?} zIndex
     * @param {?=} allowedFieldsAndAlias
     * @return {?}
     */
    QueryService.prototype.featureToResult = /**
     * @private
     * @param {?} featureOL
     * @param {?} zIndex
     * @param {?=} allowedFieldsAndAlias
     * @return {?}
     */
    function (featureOL, zIndex, allowedFieldsAndAlias) {
        /** @type {?} */
        var featureGeometry = (/** @type {?} */ (featureOL.getGeometry()));
        /** @type {?} */
        var properties = Object.assign({}, featureOL.getProperties());
        delete properties.geometry;
        delete properties.boundedBy;
        delete properties.shape;
        delete properties.SHAPE;
        delete properties.the_geom;
        /** @type {?} */
        var geometry;
        if (featureGeometry !== undefined) {
            geometry = {
                type: featureGeometry.getType(),
                coordinates: featureGeometry.getCoordinates()
            };
        }
        return {
            type: FEATURE,
            projection: undefined,
            properties: properties,
            geometry: geometry,
            meta: {
                id: Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])(),
                order: 1000 - zIndex,
                alias: allowedFieldsAndAlias
            }
        };
    };
    /**
     * @private
     * @param {?} datasource
     * @param {?} options
     * @param {?=} forceGML2
     * @return {?}
     */
    QueryService.prototype.getQueryUrl = /**
     * @private
     * @param {?} datasource
     * @param {?} options
     * @param {?=} forceGML2
     * @return {?}
     */
    function (datasource, options, forceGML2) {
        if (forceGML2 === void 0) { forceGML2 = false; }
        /** @type {?} */
        var url;
        switch (datasource.constructor) {
            case WMSDataSource:
                /** @type {?} */
                var wmsDatasource = (/** @type {?} */ (datasource));
                /** @type {?} */
                var WMSGetFeatureInfoOptions = {
                    INFO_FORMAT: wmsDatasource.params.info_format ||
                        this.getMimeInfoFormat(datasource.options.queryFormat),
                    QUERY_LAYERS: wmsDatasource.params.layers,
                    FEATURE_COUNT: wmsDatasource.params.feature_count || '5'
                };
                if (forceGML2) {
                    WMSGetFeatureInfoOptions.INFO_FORMAT =
                        this.getMimeInfoFormat(QueryFormat.GML2);
                }
                url = wmsDatasource.ol.getGetFeatureInfoUrl(options.coordinates, options.resolution, options.projection, WMSGetFeatureInfoOptions);
                if (wmsDatasource.params.version !== '1.3.0') {
                    url = url.replace('&I=', '&X=');
                    url = url.replace('&J=', '&Y=');
                }
                break;
            case CartoDataSource:
                /** @type {?} */
                var cartoDatasource = (/** @type {?} */ (datasource));
                /** @type {?} */
                var baseUrl = 'https://' +
                    cartoDatasource.options.account +
                    '.carto.com/api/v2/sql?';
                /** @type {?} */
                var format = 'format=GeoJSON';
                /** @type {?} */
                var sql = '&q=' + cartoDatasource.options.config.layers[0].options.sql;
                /** @type {?} */
                var clause = ' WHERE ST_Intersects(the_geom_webmercator,ST_BUFFER(ST_SetSRID(ST_POINT(';
                /** @type {?} */
                var meters = cartoDatasource.options.queryPrecision
                    ? cartoDatasource.options.queryPrecision
                    : '1000';
                /** @type {?} */
                var coordinates = options.coordinates[0] +
                    ',' +
                    options.coordinates[1] +
                    '),3857),' +
                    meters +
                    '))';
                url = "" + baseUrl + format + sql + clause + coordinates;
                break;
            case TileArcGISRestDataSource:
                /** @type {?} */
                var tileArcGISRestDatasource = (/** @type {?} */ (datasource));
                /** @type {?} */
                var extent = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["boundingExtent"])([options.coordinates]);
                if (tileArcGISRestDatasource.options.queryPrecision) {
                    extent = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["buffer"])(extent, tileArcGISRestDatasource.options.queryPrecision);
                }
                /** @type {?} */
                var serviceUrl = tileArcGISRestDatasource.options.url +
                    '/' +
                    tileArcGISRestDatasource.options.layer +
                    '/query/';
                /** @type {?} */
                var geometry = encodeURIComponent('{"xmin":' +
                    extent[0] +
                    ',"ymin":' +
                    extent[1] +
                    ',"xmax":' +
                    extent[2] +
                    ',"ymax":' +
                    extent[3] +
                    ',"spatialReference":{"wkid":102100}}');
                /** @type {?} */
                var params = [
                    'f=json',
                    "geometry=" + geometry,
                    'geometryType=esriGeometryEnvelope',
                    'inSR=102100',
                    'spatialRel=esriSpatialRelIntersects',
                    'outFields=*',
                    'returnGeometry=true',
                    'outSR=102100'
                ];
                url = serviceUrl + "?" + params.join('&');
                break;
            default:
                break;
        }
        return url;
    };
    /**
     * @private
     * @param {?} queryFormat
     * @return {?}
     */
    QueryService.prototype.getMimeInfoFormat = /**
     * @private
     * @param {?} queryFormat
     * @return {?}
     */
    function (queryFormat) {
        /** @type {?} */
        var mime;
        switch (queryFormat) {
            case QueryFormat.GML2:
                mime = 'application/vnd.ogc.gml';
                break;
            case QueryFormat.GML3:
                mime = 'application/vnd.ogc.gml/3.1.1';
                break;
            case QueryFormat.JSON:
                mime = 'application/json';
                break;
            case QueryFormat.GEOJSON:
                mime = 'application/geojson';
                break;
            case QueryFormat.TEXT:
                mime = 'text/plain';
                break;
            case QueryFormat.HTML:
                mime = 'text/html';
                break;
            case QueryFormat.HTMLGML2:
                mime = 'text/html';
                break;
            default:
                mime = 'application/vnd.ogc.gml';
                break;
        }
        return mime;
    };
    QueryService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    QueryService.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] }
    ]; };
    /** @nocollapse */ QueryService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function QueryService_Factory() { return new QueryService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"])); }, token: QueryService, providedIn: "root" });
    return QueryService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This directive makes a map queryable with a click of with a drag box.
 * By default, all layers are queryable but this cna ben controlled at
 * the layer level.
 */
var QueryDirective = /** @class */ (function () {
    function QueryDirective(component, queryService) {
        this.component = component;
        this.queryService = queryService;
        /**
         * Subscriptions to ongoing queries
         */
        this.queries$$ = [];
        /**
         * Whter to query features or not
         */
        this.queryFeatures = false;
        /**
         * Feature query hit tolerance
         */
        this.queryFeaturesHitTolerance = 0;
        /**
         * Whether all query should complete before emitting an event
         */
        this.waitForAllQueries = true;
        /**
         * Event emitted when a query (or all queries) complete
         */
        this.query = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    Object.defineProperty(QueryDirective.prototype, "map", {
        /**
         * IGO map
         * @internal
         */
        get: /**
         * IGO map
         * \@internal
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.component.map)))));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Start listening to click and drag box events
     * @internal
     */
    /**
     * Start listening to click and drag box events
     * \@internal
     * @return {?}
     */
    QueryDirective.prototype.ngAfterViewInit = /**
     * Start listening to click and drag box events
     * \@internal
     * @return {?}
     */
    function () {
        this.listenToMapClick();
    };
    /**
     * Stop listening to click and drag box events and cancel ongoind requests
     * @internal
     */
    /**
     * Stop listening to click and drag box events and cancel ongoind requests
     * \@internal
     * @return {?}
     */
    QueryDirective.prototype.ngOnDestroy = /**
     * Stop listening to click and drag box events and cancel ongoind requests
     * \@internal
     * @return {?}
     */
    function () {
        this.cancelOngoingQueries();
        this.unlistenToMapClick();
    };
    /**
     * On map click, issue queries
     */
    /**
     * On map click, issue queries
     * @private
     * @return {?}
     */
    QueryDirective.prototype.listenToMapClick = /**
     * On map click, issue queries
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.mapClickListener = this.map.ol.on('singleclick', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onMapEvent(event); }));
    };
    /**
     * Stop listenig for map clicks
     */
    /**
     * Stop listenig for map clicks
     * @private
     * @return {?}
     */
    QueryDirective.prototype.unlistenToMapClick = /**
     * Stop listenig for map clicks
     * @private
     * @return {?}
     */
    function () {
        this.map.ol.un(this.mapClickListener.type, this.mapClickListener.listener);
        this.mapClickListener = undefined;
    };
    /**
     * Issue queries from a map event and emit events with the results
     * @param event OL map browser pointer event
     */
    /**
     * Issue queries from a map event and emit events with the results
     * @private
     * @param {?} event OL map browser pointer event
     * @return {?}
     */
    QueryDirective.prototype.onMapEvent = /**
     * Issue queries from a map event and emit events with the results
     * @private
     * @param {?} event OL map browser pointer event
     * @return {?}
     */
    function (event) {
        var _this = this;
        this.cancelOngoingQueries();
        if (!this.queryService.queryEnabled) {
            return;
        }
        /** @type {?} */
        var queries$ = [];
        if (this.queryFeatures) {
            queries$.push(this.doQueryFeatures(event));
        }
        /** @type {?} */
        var resolution = this.map.ol.getView().getResolution();
        /** @type {?} */
        var queryLayers = this.map.layers.filter(layerIsQueryable);
        queries$.push.apply(queries$, Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(this.queryService.query(queryLayers, {
            coordinates: event.coordinate,
            projection: this.map.projection,
            resolution: resolution
        })));
        if (queries$.length === 0) {
            return;
        }
        if (this.waitForAllQueries) {
            this.queries$$.push(rxjs__WEBPACK_IMPORTED_MODULE_69__["zip"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(queries$)).subscribe((/**
             * @param {?} results
             * @return {?}
             */
            function (results) {
                /** @type {?} */
                var features = [].concat.apply([], Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(results));
                _this.query.emit({ features: features, event: event });
            })));
        }
        else {
            this.queries$$ = queries$.map((/**
             * @param {?} query$
             * @return {?}
             */
            function (query$) {
                return query$.subscribe((/**
                 * @param {?} features
                 * @return {?}
                 */
                function (features) {
                    _this.query.emit({ features: features, event: event });
                }));
            }));
        }
    };
    /**
     * Query features already present on the map
     * @param event OL map browser pointer event
     */
    /**
     * Query features already present on the map
     * @private
     * @param {?} event OL map browser pointer event
     * @return {?}
     */
    QueryDirective.prototype.doQueryFeatures = /**
     * Query features already present on the map
     * @private
     * @param {?} event OL map browser pointer event
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var olFeatures = event.map.getFeaturesAtPixel(event.pixel, {
            hitTolerance: this.queryFeaturesHitTolerance || 0,
            layerFilter: this.queryFeaturesCondition ? this.queryFeaturesCondition : olLayerIsQueryable
        });
        /** @type {?} */
        var features = (olFeatures || []).map((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            return featureFromOl(olFeature, _this.map.projection);
        }));
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["of"])(features);
    };
    /**
     * Cancel ongoing requests, if any
     */
    /**
     * Cancel ongoing requests, if any
     * @private
     * @return {?}
     */
    QueryDirective.prototype.cancelOngoingQueries = /**
     * Cancel ongoing requests, if any
     * @private
     * @return {?}
     */
    function () {
        this.queries$$.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        function (sub) { return sub.unsubscribe(); }));
        this.queries$$ = [];
    };
    QueryDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoQuery]'
                },] }
    ];
    /** @nocollapse */
    QueryDirective.ctorParameters = function () { return [
        { type: MapBrowserComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Self"] }] },
        { type: QueryService }
    ]; };
    QueryDirective.propDecorators = {
        queryFeatures: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        queryFeaturesHitTolerance: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        queryFeaturesCondition: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        waitForAllQueries: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        query: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return QueryDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Base search source class
 */
var SearchSource = /** @class */ (function () {
    function SearchSource(options) {
        var _this = this;
        this.options = Object.assign({}, this.getDefaultOptions(), options);
        // Set Default Params from Settings
        this.settings.forEach((/**
         * @param {?} setting
         * @return {?}
         */
        function (setting) {
            _this.setParamFromSetting(setting);
        }));
    }
    /**
     * Get search source's id
     * @returns Search source's id
     */
    /**
     * Get search source's id
     * @return {?} Search source's id
     */
    SearchSource.prototype.getId = /**
     * Get search source's id
     * @return {?} Search source's id
     */
    function () {
        throw new Error('You have to implement the method "getId".');
    };
    /**
     * Get search source's default options
     * @returns Search source default options
     */
    /**
     * Get search source's default options
     * @protected
     * @return {?} Search source default options
     */
    SearchSource.prototype.getDefaultOptions = /**
     * Get search source's default options
     * @protected
     * @return {?} Search source default options
     */
    function () {
        throw new Error('You have to implement the method "getDefaultOptions".');
    };
    Object.defineProperty(SearchSource.prototype, "title", {
        /**
         * Search source's title
         */
        get: /**
         * Search source's title
         * @return {?}
         */
        function () {
            return this.options.title;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchSource.prototype, "available", {
        /**
         * Whether the search source is available
         */
        get: /**
         * Whether the search source is available
         * @return {?}
         */
        function () {
            return this.options.available !== false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchSource.prototype, "enabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this.available && this.options.enabled !== false;
        },
        /**
         * Whether the search source is enabled
         */
        set: /**
         * Whether the search source is enabled
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.options.enabled = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchSource.prototype, "searchUrl", {
        /**
         * Search url
         */
        get: /**
         * Search url
         * @return {?}
         */
        function () {
            return this.options.searchUrl;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchSource.prototype, "params", {
        /**
         * Search query params
         */
        get: /**
         * Search query params
         * @return {?}
         */
        function () {
            return this.options.params === undefined ? {} : this.options.params;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchSource.prototype, "settings", {
        /**
         * Search settings
         */
        get: /**
         * Search settings
         * @return {?}
         */
        function () {
            return this.options.settings === undefined ? [] : this.options.settings;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Set params from selected settings
     */
    /**
     * Set params from selected settings
     * @param {?} setting
     * @return {?}
     */
    SearchSource.prototype.setParamFromSetting = /**
     * Set params from selected settings
     * @param {?} setting
     * @return {?}
     */
    function (setting) {
        var _this = this;
        var _a;
        switch (setting.type) {
            case 'radiobutton':
                setting.values.forEach((/**
                 * @param {?} conf
                 * @return {?}
                 */
                function (conf) {
                    var _a;
                    if (conf.enabled) {
                        _this.options.params = Object.assign((_this.options.params || {}), (_a = {}, _a[setting.name] = conf.value, _a));
                    }
                }));
                break;
            case 'checkbox':
                /** @type {?} */
                var confValue_1 = '';
                setting.values.forEach((/**
                 * @param {?} conf
                 * @return {?}
                 */
                function (conf) {
                    if (conf.enabled) {
                        confValue_1 += conf.value + ',';
                    }
                }));
                confValue_1 = confValue_1.slice(0, -1);
                this.options.params = Object.assign((this.options.params || {}), (_a = {}, _a[setting.name] = confValue_1, _a));
                break;
        }
    };
    Object.defineProperty(SearchSource.prototype, "displayOrder", {
        /**
         * Search results display order
         */
        get: /**
         * Search results display order
         * @return {?}
         */
        function () {
            return this.options.order === undefined ? 99 : this.options.order;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Check if hashtag is valid
     * @param hashtag hashtag from query
     * @param completeMatch boolean
     */
    /**
     * Check if hashtag is valid
     * @param {?} searchSourceSetting
     * @param {?} hashtag hashtag from query
     * @param {?=} completeMatch boolean
     * @return {?}
     */
    SearchSource.prototype.hashtagValid = /**
     * Check if hashtag is valid
     * @param {?} searchSourceSetting
     * @param {?} hashtag hashtag from query
     * @param {?=} completeMatch boolean
     * @return {?}
     */
    function (searchSourceSetting, hashtag, completeMatch) {
        if (completeMatch === void 0) { completeMatch = false; }
        /** @type {?} */
        var hashtagIsValid = false;
        searchSourceSetting.values.forEach((/**
         * @param {?} conf
         * @return {?}
         */
        function (conf) {
            /** @type {?} */
            var re = new RegExp('' + hashtag.substring(1) + '', 'g');
            if (typeof conf.value === 'string') {
                if ((completeMatch && conf.value === hashtag.substring(1)) ||
                    (!completeMatch && conf.value.match(re))) {
                    hashtagIsValid = true;
                }
            }
        }));
        return hashtagIsValid;
    };
    /**
     * @param {?} search
     * @return {?}
     */
    SearchSource.prototype.getSettingsValues = /**
     * @param {?} search
     * @return {?}
     */
    function (search) {
        return this.getDefaultOptions().settings.find((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            return value.name === search;
        }));
    };
    /**
     * Search source ID
     * \@internal
     */
    SearchSource.id = '';
    /**
     * Search source type
     * \@internal
     */
    SearchSource.type = '';
    return SearchSource;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Map search source. For now it has no search capability. All it does
 * is act as a placeholder for the map query results' "search source".
 */
var QuerySearchSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(QuerySearchSource, _super);
    function QuerySearchSource(options) {
        return _super.call(this, options) || this;
    }
    /**
     * @return {?}
     */
    QuerySearchSource.prototype.getId = /**
     * @return {?}
     */
    function () {
        return QuerySearchSource.id;
    };
    /**
     * @protected
     * @return {?}
     */
    QuerySearchSource.prototype.getDefaultOptions = /**
     * @protected
     * @return {?}
     */
    function () {
        return {
            title: 'Carte'
        };
    };
    QuerySearchSource.id = 'map';
    QuerySearchSource.type = FEATURE;
    QuerySearchSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    QuerySearchSource.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: ['options',] }] }
    ]; };
    return QuerySearchSource;
}(SearchSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var CatalogService = /** @class */ (function () {
    function CatalogService(http, config, languageService, capabilitiesService) {
        this.http = http;
        this.config = config;
        this.languageService = languageService;
        this.capabilitiesService = capabilitiesService;
    }
    /**
     * @return {?}
     */
    CatalogService.prototype.loadCatalogs = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var contextConfig = this.config.getConfig('context') || {};
        /** @type {?} */
        var catalogConfig = this.config.getConfig('catalog') || {};
        /** @type {?} */
        var apiUrl = catalogConfig.url || contextConfig.url;
        /** @type {?} */
        var catalogsFromConfig = catalogConfig.sources || [];
        if (apiUrl === undefined) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["of"])(catalogsFromConfig);
        }
        /** @type {?} */
        var observables$ = [];
        // Base layers catalog
        if (catalogConfig.baseLayers) {
            /** @type {?} */
            var translate = this.languageService.translate;
            /** @type {?} */
            var title = translate.instant('igo.geo.catalog.baseLayers');
            /** @type {?} */
            var baseLayersCatalog = {
                id: 'catalog.baselayers',
                title: title,
                url: apiUrl + "/baselayers",
                type: 'baselayers'
            };
            observables$.push(Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["of"])(baseLayersCatalog));
        }
        // Catalogs from API
        /** @type {?} */
        var catalogsFromApi$ = this.http
            .get(apiUrl + "/catalogs")
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["catchError"])((/**
         * @param {?} response
         * @return {?}
         */
        function (response) { return rxjs__WEBPACK_IMPORTED_MODULE_69__["EMPTY"]; })));
        observables$.push(catalogsFromApi$);
        // Catalogs from config
        if (catalogsFromConfig.length > 0) {
            observables$.push(Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["of"])(catalogsFromConfig));
        }
        return (/** @type {?} */ (rxjs__WEBPACK_IMPORTED_MODULE_69__["concat"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(observables$))));
    };
    /**
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.loadCatalogItems = /**
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        if (catalog.type === 'baselayers') {
            return this.loadCatalogBaseLayerItems(catalog);
        }
        else if (catalog.type === 'wmts') {
            return this.loadCatalogWMTSLayerItems(catalog);
        }
        return this.loadCatalogWMSLayerItems(catalog);
    };
    /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.loadCatalogBaseLayerItems = /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        // TODO: I'm not sure this works
        return this.getCatalogBaseLayersOptions(catalog)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} layersOptions
         * @return {?}
         */
        function (layersOptions) {
            /** @type {?} */
            var items = layersOptions.map((/**
             * @param {?} layerOptions
             * @return {?}
             */
            function (layerOptions) {
                return (/** @type {?} */ ({
                    id: generateIdFromSourceOptions(layerOptions.sourceOptions),
                    title: layerOptions.title,
                    type: CatalogItemType.Layer,
                    options: layerOptions
                }));
            }));
            return [{
                    id: 'catalog.group.baselayers',
                    type: CatalogItemType.Group,
                    title: catalog.title,
                    items: items
                }];
        })));
    };
    /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.getCatalogBaseLayersOptions = /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        return this.http.get(catalog.url);
    };
    /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.loadCatalogWMSLayerItems = /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        var _this = this;
        return this.getCatalogWMSCapabilities(catalog)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} capabilities
         * @return {?}
         */
        function (capabilities) {
            /** @type {?} */
            var items = [];
            _this.includeRecursiveItems(catalog, capabilities.Capability.Layer, items);
            return items;
        })));
    };
    /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.loadCatalogWMTSLayerItems = /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        var _this = this;
        return this.getCatalogWMTSCapabilities(catalog)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} capabilities
         * @return {?}
         */
        function (capabilities) { return _this.getWMTSItems(catalog, capabilities); })));
    };
    /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.getCatalogWMSCapabilities = /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        return this.capabilitiesService.getCapabilities('wms', catalog.url, catalog.version);
    };
    /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.getCatalogWMTSCapabilities = /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        return this.capabilitiesService.getCapabilities('wmts', catalog.url, catalog.version);
    };
    /**
     * @private
     * @param {?} catalog
     * @param {?} layerList
     * @param {?} items
     * @return {?}
     */
    CatalogService.prototype.includeRecursiveItems = /**
     * @private
     * @param {?} catalog
     * @param {?} layerList
     * @param {?} items
     * @return {?}
     */
    function (catalog, layerList, items) {
        var _this = this;
        var e_1, _a;
        // Dig all levels until last level (layer object are not defined on last level)
        /** @type {?} */
        var regexes = (catalog.regFilters || []).map((/**
         * @param {?} pattern
         * @return {?}
         */
        function (pattern) { return new RegExp(pattern); }));
        /** @type {?} */
        var catalogQueryParams = catalog.queryParams || {};
        /** @type {?} */
        var catalogSourceOptions = catalog.sourceOptions || {};
        var _loop_1 = function (group) {
            if (group.Layer !== undefined) {
                // recursive, check next level
                this_1.includeRecursiveItems(catalog, group, items);
                return "continue";
            }
            /** @type {?} */
            var catalogTooltipType = this_1.retrieveTooltipType(catalog);
            /** @type {?} */
            var layersQueryFormat = this_1.findCatalogInfoFormat(catalog);
            // TODO: Slice that into multiple methods
            // Define object of group layer
            /** @type {?} */
            var groupItem = {
                id: "catalog.group." + layerList.Name,
                type: CatalogItemType.Group,
                title: layerList.Title,
                items: layerList.Layer.reduce((/**
                 * @param {?} layers
                 * @param {?} layer
                 * @return {?}
                 */
                function (layers, layer) {
                    /** @type {?} */
                    var configuredQueryFormat = _this.retriveLayerInfoFormat(layer.Name, layersQueryFormat);
                    if (_this.testLayerRegexes(layer.Name, regexes) === false) {
                        return layers;
                    }
                    /** @type {?} */
                    var metadata = layer.DataURL ? layer.DataURL[0] : undefined;
                    /** @type {?} */
                    var abstract = layer.Abstract ? layer.Abstract : undefined;
                    /** @type {?} */
                    var keywordList = layer.KeywordList ? layer.KeywordList : undefined;
                    /** @type {?} */
                    var timeFilter = _this.capabilitiesService.getTimeFilter(layer);
                    /** @type {?} */
                    var timeFilterable = timeFilter && Object.keys(timeFilter).length > 0 ? true : false;
                    /** @type {?} */
                    var params = Object.assign({}, catalogQueryParams, {
                        layers: layer.Name,
                        feature_count: catalog.count
                    });
                    /** @type {?} */
                    var baseSourceOptions = {
                        type: 'wms',
                        url: catalog.url,
                        crossOrigin: catalog.setCrossOriginAnonymous ? 'anonymous' : undefined,
                        timeFilter: Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__assign"])({}, timeFilter, catalog.timeFilter),
                        timeFilterable: timeFilterable ? true : false,
                        queryable: layer.queryable,
                        queryFormat: configuredQueryFormat,
                        queryHtmlTarget: catalog.queryHtmlTarget || QueryHtmlTarget.IFRAME
                    };
                    /** @type {?} */
                    var sourceOptions = (/** @type {?} */ (Object.assign({}, baseSourceOptions, catalogSourceOptions, { params: params })));
                    layers.push({
                        id: generateIdFromSourceOptions(sourceOptions),
                        type: CatalogItemType.Layer,
                        title: layer.Title,
                        options: {
                            title: layer.Title,
                            maxResolution: getResolutionFromScale(layer.MaxScaleDenominator) || Infinity,
                            minResolution: getResolutionFromScale(layer.MinScaleDenominator) || 0,
                            metadata: {
                                url: metadata ? metadata.OnlineResource : undefined,
                                extern: metadata ? true : undefined,
                                abstract: abstract,
                                keywordList: keywordList
                            },
                            tooltip: (/** @type {?} */ ({ type: catalogTooltipType })),
                            sourceOptions: sourceOptions
                        }
                    });
                    return layers;
                }), [])
            };
            if (groupItem.items.length !== 0) {
                items.push(groupItem);
            }
            return "break";
        };
        var this_1 = this;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(layerList.Layer), _c = _b.next(); !_c.done; _c = _b.next()) {
                var group = _c.value;
                var state_1 = _loop_1(group);
                if (state_1 === "break")
                    break;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    /**
     * @private
     * @param {?} catalog
     * @param {?} capabilities
     * @return {?}
     */
    CatalogService.prototype.getWMTSItems = /**
     * @private
     * @param {?} catalog
     * @param {?} capabilities
     * @return {?}
     */
    function (catalog, capabilities) {
        var _this = this;
        /** @type {?} */
        var layers = capabilities.Contents.Layer;
        /** @type {?} */
        var regexes = (catalog.regFilters || []).map((/**
         * @param {?} pattern
         * @return {?}
         */
        function (pattern) { return new RegExp(pattern); }));
        /** @type {?} */
        var catalogQueryParams = catalog.queryParams || {};
        /** @type {?} */
        var catalogSourceOptions = catalog.sourceOptions || {};
        return layers.map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            if (_this.testLayerRegexes(layer.Identifier, regexes) === false) {
                return undefined;
            }
            /** @type {?} */
            var params = Object.assign({}, catalogQueryParams, {
                version: '1.0.0'
            });
            /** @type {?} */
            var baseSourceOptions = (/** @type {?} */ ({
                type: 'wmts',
                url: catalog.url,
                crossOrigin: catalog.setCrossOriginAnonymous ? 'anonymous' : undefined,
                layer: layer.Identifier,
                matrixSet: catalog.matrixSet,
                optionsFromCapabilities: true,
                requestEncoding: catalog.requestEncoding || 'KVP',
                style: 'default'
            }));
            /** @type {?} */
            var sourceOptions = (/** @type {?} */ (Object.assign({}, baseSourceOptions, catalogSourceOptions, { params: params })));
            return {
                id: generateIdFromSourceOptions(sourceOptions),
                type: CatalogItemType.Layer,
                title: layer.Title,
                options: {
                    title: layer.Title,
                    sourceOptions: sourceOptions
                }
            };
        }))
            .filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item !== undefined; }));
    };
    /**
     * @private
     * @param {?} layerName
     * @param {?} regexes
     * @return {?}
     */
    CatalogService.prototype.testLayerRegexes = /**
     * @private
     * @param {?} layerName
     * @param {?} regexes
     * @return {?}
     */
    function (layerName, regexes) {
        if (regexes.length === 0) {
            return true;
        }
        return regexes.find((/**
         * @param {?} regex
         * @return {?}
         */
        function (regex) { return regex.test(layerName); })) !== undefined;
    };
    /**
     * @private
     * @param {?} layerNameFromCatalog
     * @param {?} layersQueryFormat
     * @return {?}
     */
    CatalogService.prototype.retriveLayerInfoFormat = /**
     * @private
     * @param {?} layerNameFromCatalog
     * @param {?} layersQueryFormat
     * @return {?}
     */
    function (layerNameFromCatalog, layersQueryFormat) {
        /** @type {?} */
        var currentLayerInfoFormat = layersQueryFormat.find((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.layer === layerNameFromCatalog; }));
        /** @type {?} */
        var baseInfoFormat = layersQueryFormat.find((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.layer === '*'; }));
        /** @type {?} */
        var queryFormat;
        if (currentLayerInfoFormat) {
            queryFormat = currentLayerInfoFormat.queryFormat;
        }
        else if (baseInfoFormat) {
            queryFormat = baseInfoFormat.queryFormat;
        }
        return queryFormat;
    };
    /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.retrieveTooltipType = /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        if (!catalog.tooltipType) {
            return TooltipType.TITLE;
        }
        return catalog.tooltipType;
    };
    /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    CatalogService.prototype.findCatalogInfoFormat = /**
     * @private
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        /** @type {?} */
        var layersQueryFormat = [];
        if (!catalog.queryFormat) {
            return layersQueryFormat;
        }
        Object.keys(catalog.queryFormat).forEach((/**
         * @param {?} configuredInfoFormat
         * @return {?}
         */
        function (configuredInfoFormat) {
            if (catalog.queryFormat[configuredInfoFormat] instanceof Array) {
                catalog.queryFormat[configuredInfoFormat].forEach((/**
                 * @param {?} layerName
                 * @return {?}
                 */
                function (layerName) {
                    if (!layersQueryFormat.find((/**
                     * @param {?} specific
                     * @return {?}
                     */
                    function (specific) { return specific.layer === layerName; }))) {
                        layersQueryFormat.push({ layer: layerName, queryFormat: (/** @type {?} */ (configuredInfoFormat)) });
                    }
                }));
            }
            else {
                if (!layersQueryFormat.find((/**
                 * @param {?} specific
                 * @return {?}
                 */
                function (specific) { return specific.layer === catalog.queryFormat[configuredInfoFormat]; }))) {
                    layersQueryFormat.push({ layer: catalog.queryFormat[configuredInfoFormat], queryFormat: (/** @type {?} */ (configuredInfoFormat)) });
                }
            }
        }));
        return layersQueryFormat;
    };
    CatalogService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    CatalogService.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] },
        { type: CapabilitiesService }
    ]; };
    /** @nocollapse */ CatalogService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function CatalogService_Factory() { return new CatalogService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(CapabilitiesService)); }, token: CatalogService, providedIn: "root" });
    return CatalogService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Component to browse a catalog's groups and layers and display them on a map.
 */
var CatalogBrowserComponent = /** @class */ (function () {
    function CatalogBrowserComponent(layerService, cdRef) {
        this.layerService = layerService;
        this.cdRef = cdRef;
        /**
         * Whether a group can be toggled when it's collapsed
         */
        this.toggleCollapsedGroup = true;
    }
    /**
     * @internal
     */
    /**
     * \@internal
     * @return {?}
     */
    CatalogBrowserComponent.prototype.ngOnInit = /**
     * \@internal
     * @return {?}
     */
    function () {
        /** @type {?} */
        var currentItems = this.map.layers.map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            return {
                id: layer.id,
                title: layer.title,
                type: CatalogItemType.Layer
            };
        }));
        this.store.state.updateMany(currentItems, { added: true }, true);
        if (this.catalog && this.catalog.sortDirection !== undefined) {
            this.store.view.sort({
                direction: this.catalog.sortDirection,
                valueAccessor: (/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.title; })
            });
        }
        this.watcher = new _igo2_common__WEBPACK_IMPORTED_MODULE_68__["EntityStoreWatcher"](this.store, this.cdRef);
    };
    /**
     * @return {?}
     */
    CatalogBrowserComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.watcher.destroy();
    };
    /**
     * @internal
     */
    /**
     * \@internal
     * @param {?} item
     * @return {?}
     */
    CatalogBrowserComponent.prototype.isGroup = /**
     * \@internal
     * @param {?} item
     * @return {?}
     */
    function (item) {
        return item.type === CatalogItemType.Group;
    };
    /**
     * @internal
     */
    /**
     * \@internal
     * @param {?} item
     * @return {?}
     */
    CatalogBrowserComponent.prototype.isLayer = /**
     * \@internal
     * @param {?} item
     * @return {?}
     */
    function (item) {
        return item.type === CatalogItemType.Layer;
    };
    /**
     * When a layer is added or removed, add or remove it from the map
     * @internal
     * @param event Layer added event
     */
    /**
     * When a layer is added or removed, add or remove it from the map
     * \@internal
     * @param {?} event Layer added event
     * @return {?}
     */
    CatalogBrowserComponent.prototype.onLayerAddedChange = /**
     * When a layer is added or removed, add or remove it from the map
     * \@internal
     * @param {?} event Layer added event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var layer = event.layer;
        this.store.state.update(layer, { added: event.added }, false);
        event.added ? this.addLayerToMap(layer) : this.removeLayerFromMap(layer);
    };
    /**
     * When a froup is added or removed, add or remove it from the map
     * @internal
     * @param event Group added event
     */
    /**
     * When a froup is added or removed, add or remove it from the map
     * \@internal
     * @param {?} event Group added event
     * @return {?}
     */
    CatalogBrowserComponent.prototype.onGroupAddedChange = /**
     * When a froup is added or removed, add or remove it from the map
     * \@internal
     * @param {?} event Group added event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var group = event.group;
        this.store.state.update(group, { added: event.added }, false);
        event.added ? this.addGroupToMap(group) : this.removeGroupFromMap(group);
    };
    /**
     * Add layer to map
     * @param layer Catalog layer
     */
    /**
     * Add layer to map
     * @private
     * @param {?} layer Catalog layer
     * @return {?}
     */
    CatalogBrowserComponent.prototype.addLayerToMap = /**
     * Add layer to map
     * @private
     * @param {?} layer Catalog layer
     * @return {?}
     */
    function (layer) {
        this.addLayersToMap([layer]);
    };
    /**
     * Remove layer from map
     * @param layer Catalog layer
     */
    /**
     * Remove layer from map
     * @private
     * @param {?} layer Catalog layer
     * @return {?}
     */
    CatalogBrowserComponent.prototype.removeLayerFromMap = /**
     * Remove layer from map
     * @private
     * @param {?} layer Catalog layer
     * @return {?}
     */
    function (layer) {
        this.removeLayersFromMap([layer]);
    };
    /**
     * Add multiple layers to map
     * @param layers Catalog layers
     */
    /**
     * Add multiple layers to map
     * @private
     * @param {?} layers Catalog layers
     * @return {?}
     */
    CatalogBrowserComponent.prototype.addLayersToMap = /**
     * Add multiple layers to map
     * @private
     * @param {?} layers Catalog layers
     * @return {?}
     */
    function (layers) {
        var _this = this;
        /** @type {?} */
        var layers$ = layers.map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            return _this.layerService.createAsyncLayer(layer.options);
        }));
        rxjs__WEBPACK_IMPORTED_MODULE_69__["zip"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(layers$)).subscribe((/**
         * @param {?} oLayers
         * @return {?}
         */
        function (oLayers) {
            _this.store.state.updateMany(layers, { added: true });
            _this.map.addLayers(oLayers);
        }));
    };
    /**
     * Remove multiple layers from map
     * @param layers Catalog layers
     */
    /**
     * Remove multiple layers from map
     * @private
     * @param {?} layers Catalog layers
     * @return {?}
     */
    CatalogBrowserComponent.prototype.removeLayersFromMap = /**
     * Remove multiple layers from map
     * @private
     * @param {?} layers Catalog layers
     * @return {?}
     */
    function (layers) {
        var _this = this;
        layers.forEach((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            _this.store.state.update(layer, { added: false });
            /** @type {?} */
            var oLayer = _this.map.getLayerById(layer.id);
            if (oLayer !== undefined) {
                _this.map.removeLayer(oLayer);
            }
        }));
    };
    /**
     * Add all the layers of a group to map
     * @param group Catalog group
     */
    /**
     * Add all the layers of a group to map
     * @private
     * @param {?} group Catalog group
     * @return {?}
     */
    CatalogBrowserComponent.prototype.addGroupToMap = /**
     * Add all the layers of a group to map
     * @private
     * @param {?} group Catalog group
     * @return {?}
     */
    function (group) {
        var _this = this;
        /** @type {?} */
        var layers = group.items.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var added = _this.store.state.get(item).added || false;
            return _this.isLayer(item) && added === false;
        }));
        this.addLayersToMap((/** @type {?} */ (layers)));
    };
    /**
     * Remove all the layers of a groufrom map
     * @param group Catalog group
     */
    /**
     * Remove all the layers of a groufrom map
     * @private
     * @param {?} group Catalog group
     * @return {?}
     */
    CatalogBrowserComponent.prototype.removeGroupFromMap = /**
     * Remove all the layers of a groufrom map
     * @private
     * @param {?} group Catalog group
     * @return {?}
     */
    function (group) {
        var _this = this;
        /** @type {?} */
        var layers = group.items.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var added = _this.store.state.get(item).added || false;
            return _this.isLayer(item) && added === true;
        }));
        this.removeLayersFromMap((/** @type {?} */ (layers)));
    };
    CatalogBrowserComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-catalog-browser',
                    template: "<igo-list [navigation]=\"false\" [selection]=\"false\">\r\n  <ng-template ngFor let-item [ngForOf]=\"store.view.all$() | async\">\r\n    <ng-container *ngIf=\"isGroup(item)\">\r\n      <igo-catalog-browser-group\r\n        [catalog]=\"catalog\"\r\n        [group]=\"item\"\r\n        [state]=\"store.state\"\r\n        [toggleCollapsed]=\"toggleCollapsedGroup\"\r\n        (addedChange)=\"onGroupAddedChange($event)\"\r\n        (layerAddedChange)=\"onLayerAddedChange($event)\">\r\n      </igo-catalog-browser-group>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"isLayer(item)\">\r\n      <igo-catalog-browser-layer\r\n        igoListItem\r\n        [layer]=\"item\"\r\n        [added]=\"store.state.get(item).added\"\r\n        [disabled]=\"store.state.get(item).added\"\r\n        (addedChange)=\"onLayerAddedChange($event)\">\r\n      </igo-catalog-browser-layer>\r\n    </ng-container>\r\n  </ng-template>\r\n</igo-list>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    CatalogBrowserComponent.ctorParameters = function () { return [
        { type: LayerService },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] }
    ]; };
    CatalogBrowserComponent.propDecorators = {
        catalog: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        toggleCollapsedGroup: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return CatalogBrowserComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Catalog browser layer item
 */
var CatalogBrowserLayerComponent = /** @class */ (function () {
    function CatalogBrowserLayerComponent() {
        /**
         * Event emitted when the add/remove button is clicked
         */
        this.addedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    Object.defineProperty(CatalogBrowserLayerComponent.prototype, "title", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () { return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityTitle"])(this.layer); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CatalogBrowserLayerComponent.prototype, "icon", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () { return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityIcon"])(this.layer) || 'layers'; },
        enumerable: true,
        configurable: true
    });
    /**
     * On toggle button click, emit the added change event
     * @internal
     */
    /**
     * On toggle button click, emit the added change event
     * \@internal
     * @return {?}
     */
    CatalogBrowserLayerComponent.prototype.onToggleClick = /**
     * On toggle button click, emit the added change event
     * \@internal
     * @return {?}
     */
    function () {
        this.added ? this.remove() : this.add();
    };
    /**
     * Emit added change event with added = true
     */
    /**
     * Emit added change event with added = true
     * @private
     * @return {?}
     */
    CatalogBrowserLayerComponent.prototype.add = /**
     * Emit added change event with added = true
     * @private
     * @return {?}
     */
    function () {
        this.added = true;
        this.addedChange.emit({ added: true, layer: this.layer });
    };
    /**
     * Emit added change event with added = false
     */
    /**
     * Emit added change event with added = false
     * @private
     * @return {?}
     */
    CatalogBrowserLayerComponent.prototype.remove = /**
     * Emit added change event with added = false
     * @private
     * @return {?}
     */
    function () {
        this.added = false;
        this.addedChange.emit({ added: false, layer: this.layer });
    };
    CatalogBrowserLayerComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-catalog-browser-layer',
                    template: "<mat-list-item>\r\n  <mat-icon mat-list-avatar svgIcon=\"{{icon}}\"></mat-icon>\r\n  <h4 mat-line>{{title}}</h4>\r\n\r\n  <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\r\n\r\n  <button\r\n    mat-icon-button\r\n    tooltip-position=\"below\"\r\n    matTooltipShowDelay=\"500\"\r\n    [matTooltip]=\"(added ? 'igo.geo.catalog.layer.removeFromMap' : 'igo.geo.catalog.layer.addToMap') | translate\"\r\n    [color]=\"added ? 'warn' : ''\"\r\n    (click)=\"onToggleClick()\">\r\n    <mat-icon [svgIcon]=\"added ? 'delete' : 'plus'\"></mat-icon>\r\n  </button>\r\n\r\n</mat-list-item>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    CatalogBrowserLayerComponent.ctorParameters = function () { return []; };
    CatalogBrowserLayerComponent.propDecorators = {
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        added: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        addedChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return CatalogBrowserLayerComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Catalog browser group item
 */
var CatalogBrowserGroupComponent = /** @class */ (function () {
    function CatalogBrowserGroupComponent() {
        /**
         * Group's items store
         * \@internal
         */
        this.store = new _igo2_common__WEBPACK_IMPORTED_MODULE_68__["EntityStore"]([]);
        /**
         * Whether all the layers of the group are added
         * \@internal
         */
        this.added$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](false);
        /**
         * Whether the toggle button is disabled
         * \@internal
         */
        this.disabled$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](false);
        /**
         * Whether the group is collapsed
         */
        this.collapsed = true;
        /**
         * Whether the group can be toggled when it's collapsed
         */
        this.toggleCollapsed = true;
        /**
         * Event emitted when the add/remove button of the group is clicked
         */
        this.addedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        /**
         * Event emitted when the add/remove button of a layer is clicked
         */
        this.layerAddedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    Object.defineProperty(CatalogBrowserGroupComponent.prototype, "title", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () {
            return this.group.title;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @internal
     */
    /**
     * \@internal
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.ngOnInit = /**
     * \@internal
     * @return {?}
     */
    function () {
        this.store.load(this.group.items);
        this.evaluateAdded();
        this.evaluateDisabled(this.collapsed);
        if (this.catalog && this.catalog.sortDirection !== undefined) {
            this.store.view.sort({
                direction: this.catalog.sortDirection,
                valueAccessor: (/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.title; })
            });
        }
    };
    /**
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.store.destroy();
    };
    /**
     * @internal
     */
    /**
     * \@internal
     * @param {?} item
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.isGroup = /**
     * \@internal
     * @param {?} item
     * @return {?}
     */
    function (item) {
        return item.type === CatalogItemType.Group;
    };
    /**
     * @internal
     */
    /**
     * \@internal
     * @param {?} item
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.isLayer = /**
     * \@internal
     * @param {?} item
     * @return {?}
     */
    function (item) {
        return item.type === CatalogItemType.Layer;
    };
    /**
     * On toggle button click, emit the added change event
     * @internal
     */
    /**
     * On toggle button click, emit the added change event
     * \@internal
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.onToggleClick = /**
     * On toggle button click, emit the added change event
     * \@internal
     * @return {?}
     */
    function () {
        this.added$.value ? this.remove() : this.add();
    };
    /**
     * On toggle button click, emit the added change event
     * @internal
     */
    /**
     * On toggle button click, emit the added change event
     * \@internal
     * @param {?} collapsed
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.onToggleCollapsed = /**
     * On toggle button click, emit the added change event
     * \@internal
     * @param {?} collapsed
     * @return {?}
     */
    function (collapsed) {
        this.evaluateDisabled(collapsed);
    };
    /**
     * When a layer is added or removed, evaluate if all the layers of the group
     * are now added or removed. If so, consider that the group itself is added
     * or removed.
     * @internal
     * @param event Layer added change event
     */
    /**
     * When a layer is added or removed, evaluate if all the layers of the group
     * are now added or removed. If so, consider that the group itself is added
     * or removed.
     * \@internal
     * @param {?} event Layer added change event
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.onLayerAddedChange = /**
     * When a layer is added or removed, evaluate if all the layers of the group
     * are now added or removed. If so, consider that the group itself is added
     * or removed.
     * \@internal
     * @param {?} event Layer added change event
     * @return {?}
     */
    function (event) {
        this.layerAddedChange.emit(event);
        this.tryToggleGroup(event);
    };
    /**
     * Emit added change event with added = true
     */
    /**
     * Emit added change event with added = true
     * @private
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.add = /**
     * Emit added change event with added = true
     * @private
     * @return {?}
     */
    function () {
        this.added$.next(true);
        this.addedChange.emit({
            added: true,
            group: this.group
        });
    };
    /**
     * Emit added change event with added = true
     */
    /**
     * Emit added change event with added = true
     * @private
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.remove = /**
     * Emit added change event with added = true
     * @private
     * @return {?}
     */
    function () {
        this.added$.next(false);
        this.addedChange.emit({
            added: false,
            group: this.group
        });
    };
    /**
     * If all the layers of the group added or removed, add or remove the group itself.
     * @param event The last layer added change event to occur
     */
    /**
     * If all the layers of the group added or removed, add or remove the group itself.
     * @private
     * @param {?} event The last layer added change event to occur
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.tryToggleGroup = /**
     * If all the layers of the group added or removed, add or remove the group itself.
     * @private
     * @param {?} event The last layer added change event to occur
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var added = event.added;
        /** @type {?} */
        var layer = event.layer;
        /** @type {?} */
        var layersAdded = this.store.view
            .all()
            .filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.id !== layer.id; }))
            .map((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return _this.state.get(item).added || false; }));
        if (layersAdded.every((/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return value === added; }))) {
            added ? this.add() : this.remove();
        }
        else if (this.added$.value === true) {
            this.added$.next(false);
        }
    };
    /**
     * @private
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.evaluateAdded = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var added = this.store.all().every((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return (_this.state.get(item).added || false) === true;
        }));
        this.added$.next(added);
    };
    /**
     * @private
     * @param {?} collapsed
     * @return {?}
     */
    CatalogBrowserGroupComponent.prototype.evaluateDisabled = /**
     * @private
     * @param {?} collapsed
     * @return {?}
     */
    function (collapsed) {
        /** @type {?} */
        var disabled = false;
        if (this.toggleCollapsed === false) {
            disabled = collapsed;
        }
        this.disabled$.next(disabled);
    };
    CatalogBrowserGroupComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-catalog-browser-group',
                    template: "<mat-list-item>\r\n  <mat-icon\r\n    mat-list-avatar\r\n    svgIcon=\"chevron-up\"\r\n    igoCollapse\r\n    class=\"igo-chevron\"\r\n    [target]=\"items\"\r\n    [collapsed]=\"collapsed\"\r\n    (toggle)=\"onToggleCollapsed($event)\">\r\n  </mat-icon>\r\n\r\n  <h4 matLine>{{title}}</h4>\r\n\r\n  <ng-container *ngIf=\"added$ | async; else notadded\">\r\n    <button\r\n      mat-icon-button\r\n      tooltip-position=\"below\"\r\n      matTooltipShowDelay=\"500\"\r\n      [matTooltip]=\"'igo.geo.catalog.group.removeFromMap' | translate\"\r\n      color=\"warn\"\r\n      [disabled]=\"disabled$ | async\"\r\n      (click)=\"onToggleClick()\">\r\n      <mat-icon svgIcon=\"delete\"></mat-icon>\r\n    </button>\r\n  </ng-container>\r\n\r\n  <ng-template #notadded>\r\n    <button\r\n      mat-icon-button\r\n      tooltip-position=\"below\"\r\n      matTooltipShowDelay=\"500\"\r\n      [matTooltip]=\"'igo.geo.catalog.group.addToMap' | translate\"\r\n      [disabled]=\"disabled$ | async\"\r\n      (click)=\"onToggleClick()\">\r\n      <mat-icon svgIcon=\"plus\"></mat-icon>\r\n    </button>\r\n  </ng-template>\r\n</mat-list-item>\r\n\r\n<div #items>\r\n  <ng-template ngFor let-item [ngForOf]=\"store.view.all$() | async\">\r\n    <ng-container *ngIf=\"isGroup(item)\"></ng-container>\r\n    <ng-container *ngIf=\"isLayer(item)\">\r\n      <igo-catalog-browser-layer\r\n        igoListItem\r\n        [layer]=\"item\"\r\n        [added]=\"state.get(item).added\"\r\n        [disabled]=\"state.get(item).added\"\r\n        (addedChange)=\"onLayerAddedChange($event)\">\r\n      </igo-catalog-browser-layer>\r\n    </ng-container>\r\n  </ng-template>\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    CatalogBrowserGroupComponent.propDecorators = {
        catalog: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        group: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        collapsed: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        toggleCollapsed: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        state: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        addedChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }],
        layerAddedChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return CatalogBrowserGroupComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoCatalogBrowserModule = /** @class */ (function () {
    function IgoCatalogBrowserModule() {
    }
    IgoCatalogBrowserModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatListModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoListModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoCollapsibleModule"],
                        IgoMetadataModule
                    ],
                    exports: [
                        CatalogBrowserComponent
                    ],
                    declarations: [
                        CatalogBrowserComponent,
                        CatalogBrowserGroupComponent,
                        CatalogBrowserLayerComponent
                    ]
                },] }
    ];
    return IgoCatalogBrowserModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Component to browse a list of available catalogs
 */
var CatalogLibaryComponent = /** @class */ (function () {
    function CatalogLibaryComponent() {
        /**
         * Event emitted a catalog is selected or unselected
         */
        this.catalogSelectChange = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    /**
     * @internal
     */
    /**
     * \@internal
     * @return {?}
     */
    CatalogLibaryComponent.prototype.ngOnInit = /**
     * \@internal
     * @return {?}
     */
    function () {
        this.store.state.clear();
    };
    /**
     * When a catalog is selected, update it's state in the store
     * and emit the catalog select change event
     * @internal
     */
    /**
     * When a catalog is selected, update it's state in the store
     * and emit the catalog select change event
     * \@internal
     * @param {?} catalog
     * @return {?}
     */
    CatalogLibaryComponent.prototype.onCatalogSelect = /**
     * When a catalog is selected, update it's state in the store
     * and emit the catalog select change event
     * \@internal
     * @param {?} catalog
     * @return {?}
     */
    function (catalog) {
        this.store.state.update(catalog, {
            selected: true,
            focused: true
        }, true);
        this.catalogSelectChange.emit({ selected: true, catalog: catalog });
    };
    CatalogLibaryComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-catalog-library',
                    template: "<igo-list [navigation]=\"false\">\r\n  <ng-template ngFor let-catalog [ngForOf]=\"store.view.all$() | async\">\r\n    <igo-catalog-library-item\r\n      igoListItem\r\n      color=\"accent\"\r\n      [map]=\"map\"\r\n      [catalog]=\"catalog\"\r\n      (select)=\"onCatalogSelect(catalog)\">\r\n    </igo-catalog-library-item>\r\n  </ng-template>\r\n</igo-list>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    CatalogLibaryComponent.propDecorators = {
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        catalogSelectChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return CatalogLibaryComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Catalog library item
 */
var CatalogLibaryItemComponent = /** @class */ (function () {
    function CatalogLibaryItemComponent() {
    }
    Object.defineProperty(CatalogLibaryItemComponent.prototype, "title", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () { return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityTitle"])(this.catalog); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CatalogLibaryItemComponent.prototype, "icon", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () { return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityIcon"])(this.catalog) || 'image-multiple'; },
        enumerable: true,
        configurable: true
    });
    CatalogLibaryItemComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-catalog-library-item',
                    template: "<mat-list-item>\r\n  <mat-icon mat-list-avatar svgIcon=\"{{icon}}\"></mat-icon>\r\n  <h4 mat-line>{{title}}</h4>\r\n</mat-list-item>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    CatalogLibaryItemComponent.propDecorators = {
        catalog: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return CatalogLibaryItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoCatalogLibraryModule = /** @class */ (function () {
    function IgoCatalogLibraryModule() {
    }
    IgoCatalogLibraryModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatListModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoListModule"]
                    ],
                    exports: [
                        CatalogLibaryComponent
                    ],
                    declarations: [
                        CatalogLibaryComponent,
                        CatalogLibaryItemComponent
                    ]
                },] }
    ];
    return IgoCatalogLibraryModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoCatalogModule = /** @class */ (function () {
    function IgoCatalogModule() {
    }
    IgoCatalogModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatListModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoListModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoCollapsibleModule"]
                    ],
                    exports: [
                        IgoCatalogBrowserModule,
                        IgoCatalogLibraryModule
                    ],
                    declarations: []
                },] }
    ];
    return IgoCatalogModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoDataSourceModule = /** @class */ (function () {
    function IgoDataSourceModule() {
    }
    /**
     * @return {?}
     */
    IgoDataSourceModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoDataSourceModule,
            providers: []
        };
    };
    IgoDataSourceModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [],
                    exports: [],
                    declarations: []
                },] }
    ];
    return IgoDataSourceModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var FilterableDataSourcePipe = /** @class */ (function () {
    function FilterableDataSourcePipe() {
    }
    /**
     * @param {?} value
     * @param {?} arg
     * @return {?}
     */
    FilterableDataSourcePipe.prototype.transform = /**
     * @param {?} value
     * @param {?} arg
     * @return {?}
     */
    function (value, arg) {
        var _this = this;
        /** @type {?} */
        var layers;
        if (arg === 'time') {
            layers = value.filter((/**
             * @param {?} layer
             * @return {?}
             */
            function (layer) {
                /** @type {?} */
                var datasource = (/** @type {?} */ (layer.dataSource));
                return (_this.isTimeFilterable(datasource) &&
                    datasource.options.timeFilter !== undefined &&
                    Object.keys(datasource.options.timeFilter).length);
            }));
        }
        if (arg === 'ogc') {
            layers = value.filter((/**
             * @param {?} layer
             * @return {?}
             */
            function (layer) {
                /** @type {?} */
                var datasource = (/** @type {?} */ (layer.dataSource));
                return _this.isOgcFilterable(datasource);
            }));
        }
        return layers;
    };
    /**
     * @private
     * @param {?} dataSource
     * @return {?}
     */
    FilterableDataSourcePipe.prototype.isTimeFilterable = /**
     * @private
     * @param {?} dataSource
     * @return {?}
     */
    function (dataSource) {
        if (dataSource.options.type !== 'wms') {
            return false;
        }
        return dataSource.options.timeFilterable;
    };
    /**
     * @private
     * @param {?} dataSource
     * @return {?}
     */
    FilterableDataSourcePipe.prototype.isOgcFilterable = /**
     * @private
     * @param {?} dataSource
     * @return {?}
     */
    function (dataSource) {
        if (dataSource.options.ogcFilters &&
            dataSource.options.ogcFilters.enabled) {
            return true;
        }
        return false;
    };
    FilterableDataSourcePipe.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Pipe"], args: [{
                    name: 'filterableDataSource'
                },] }
    ];
    return FilterableDataSourcePipe;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TimeFilterService = /** @class */ (function () {
    function TimeFilterService() {
    }
    /**
     * @param {?} datasource
     * @param {?} date
     * @return {?}
     */
    TimeFilterService.prototype.filterByDate = /**
     * @param {?} datasource
     * @param {?} date
     * @return {?}
     */
    function (datasource, date) {
        /** @type {?} */
        var time;
        /** @type {?} */
        var newdateform;
        /** @type {?} */
        var newdateformStart;
        /** @type {?} */
        var newdateformEnd;
        if (Array.isArray(date)) {
            /** @type {?} */
            var dates = [];
            if (date[0]) {
                newdateformStart = this.reformatDateTime(date[0]);
                dates.push(date[0]);
            }
            if (date[1]) {
                newdateformEnd = this.reformatDateTime(date[1]);
                dates.push(date[1]);
            }
            if (dates.length === 2 && newdateformStart !== newdateformEnd) {
                if (datasource instanceof TileArcGISRestDataSource) {
                    time = newdateformStart + ',' + newdateformEnd;
                }
                else {
                    time = newdateformStart + '/' + newdateformEnd;
                }
            }
            if (newdateformStart === newdateformEnd) {
                time = newdateformStart;
            }
        }
        else if (date) {
            newdateform = this.reformatDateTime(date);
            time = newdateform;
        }
        /** @type {?} */
        var params = { time: time };
        datasource.ol.updateParams(params);
    };
    /**
     * @param {?} datasource
     * @param {?} year
     * @return {?}
     */
    TimeFilterService.prototype.filterByYear = /**
     * @param {?} datasource
     * @param {?} year
     * @return {?}
     */
    function (datasource, year) {
        /** @type {?} */
        var time;
        /** @type {?} */
        var newdateformStart;
        /** @type {?} */
        var newdateformEnd;
        if (Array.isArray(year)) {
            /** @type {?} */
            var years = [];
            if (year[0]) {
                newdateformStart = year[0];
                years.push(year[0]);
            }
            if (year[1]) {
                newdateformEnd = year[1];
                years.push(year[1]);
            }
            if (years.length === 2 && newdateformStart !== newdateformEnd) {
                if (datasource instanceof TileArcGISRestDataSource) {
                    time = newdateformStart + ',' + newdateformEnd;
                }
                else {
                    time = newdateformStart + '/' + newdateformEnd;
                }
            }
            if (newdateformStart === newdateformEnd) {
                time = newdateformStart;
            }
        }
        else if (year) {
            time = year;
        }
        /** @type {?} */
        var params = { time: time };
        datasource.ol.updateParams(params);
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    TimeFilterService.prototype.reformatDateTime = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var year = value.getFullYear();
        /** @type {?} */
        var month = value.getMonth() + 1;
        /** @type {?} */
        var day = value.getUTCDate();
        /** @type {?} */
        var hour = value.getUTCHours();
        /** @type {?} */
        var minute = value.getUTCMinutes();
        if (Number(month) < 10) {
            month = '0' + month;
        }
        if (Number(day) < 10) {
            day = '0' + day;
        }
        if (Number(hour) < 10) {
            hour = '0' + hour;
        }
        if (Number(minute) < 10) {
            minute = '0' + minute;
        }
        return year + '-' + month + '-' + day + 'T' + hour + ':' + minute + ':00Z';
    };
    TimeFilterService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    TimeFilterService.ctorParameters = function () { return []; };
    return TimeFilterService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var OgcFilterOperatorType = {
    BasicNumericOperator: 'BasicNumericOperator',
    Basic: 'Basic',
    BasicAndSpatial: 'BasicAndSpatial',
    Spatial: 'Spatial',
    All: 'All',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OGCFilterService = /** @class */ (function () {
    function OGCFilterService() {
    }
    /**
     * @param {?} wmsDatasource
     * @param {?} filterString
     * @return {?}
     */
    OGCFilterService.prototype.filterByOgc = /**
     * @param {?} wmsDatasource
     * @param {?} filterString
     * @return {?}
     */
    function (wmsDatasource, filterString) {
        /** @type {?} */
        var appliedFilter = new OgcFilterWriter().formatProcessedOgcFilter(filterString, wmsDatasource.options.params.layers);
        wmsDatasource.ol.updateParams({ filter: appliedFilter });
    };
    /**
     * @param {?} wfsDatasource
     * @return {?}
     */
    OGCFilterService.prototype.setOgcWFSFiltersOptions = /**
     * @param {?} wfsDatasource
     * @return {?}
     */
    function (wfsDatasource) {
        /** @type {?} */
        var options = wfsDatasource.options;
        /** @type {?} */
        var ogcFilterWriter = new OgcFilterWriter();
        if (options.ogcFilters.enabled && options.ogcFilters.filters) {
            options.ogcFilters.filters = ogcFilterWriter.checkIgoFiltersProperties(options.ogcFilters.filters, options.paramsWFS.fieldNameGeometry, true);
            if (!options.ogcFilters.interfaceOgcFilters) {
                options.ogcFilters.interfaceOgcFilters = ogcFilterWriter.defineInterfaceFilterSequence(options.ogcFilters.filters, options.paramsWFS.fieldNameGeometry);
            }
        }
    };
    /**
     * @param {?} wmsDatasource
     * @return {?}
     */
    OGCFilterService.prototype.setOgcWMSFiltersOptions = /**
     * @param {?} wmsDatasource
     * @return {?}
     */
    function (wmsDatasource) {
        /** @type {?} */
        var options = wmsDatasource.options;
        /** @type {?} */
        var ogcFilterWriter = new OgcFilterWriter();
        if (options.ogcFilters.enabled && options.ogcFilters.filters) {
            options.ogcFilters.filters = ogcFilterWriter.checkIgoFiltersProperties(options.ogcFilters.filters, options.fieldNameGeometry, true);
            if (!options.ogcFilters.interfaceOgcFilters) {
                options.ogcFilters.interfaceOgcFilters = ogcFilterWriter.defineInterfaceFilterSequence(
                // With some wms server, this param must be set to make spatials call.
                options.ogcFilters.filters, options.fieldNameGeometry);
            }
            this.filterByOgc((/** @type {?} */ (wmsDatasource)), ogcFilterWriter.buildFilter(options.ogcFilters.filters));
            options.filtered = true;
        }
        else {
            options.ogcFilters.filters = undefined;
            options.ogcFilters.interfaceOgcFilters = [];
            options.filtered = false;
        }
    };
    OGCFilterService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    OGCFilterService.ctorParameters = function () { return []; };
    return OGCFilterService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var DownloadService = /** @class */ (function () {
    function DownloadService(messageService, languageService) {
        this.messageService = messageService;
        this.languageService = languageService;
    }
    /**
     * @param {?} layer
     * @return {?}
     */
    DownloadService.prototype.open = /**
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var translate = this.languageService.translate;
        /** @type {?} */
        var title = translate.instant('igo.geo.download.title');
        this.messageService.success(translate.instant('igo.geo.download.start'), title);
        /** @type {?} */
        var DSOptions = layer.dataSource.options;
        if (Object.keys(DSOptions.download).length > 0) {
            if (DSOptions.download.dynamicUrl &&
                DSOptions.download.url === undefined) {
                /** @type {?} */
                var wfsOptions = void 0;
                if (((/** @type {?} */ (layer.dataSource.options))).paramsWFS &&
                    Object.keys(((/** @type {?} */ (layer.dataSource.options))).paramsWFS).length > 0) {
                    wfsOptions = ((/** @type {?} */ (layer.dataSource.options))).paramsWFS;
                }
                else {
                    wfsOptions = ((/** @type {?} */ (layer.dataSource.options))).params;
                }
                /** @type {?} */
                var outputFormatDownload = wfsOptions.outputFormatDownload === undefined
                    ? 'outputformat=' + wfsOptions.outputFormat
                    : 'outputformat=' + wfsOptions.outputFormatDownload;
                /** @type {?} */
                var baseurl = DSOptions.download.dynamicUrl
                    .replace(/&?outputformat=[^&]*/gi, '')
                    .replace(/&?filter=[^&]*/gi, '')
                    .replace(/&?bbox=[^&]*/gi, '');
                /** @type {?} */
                var ogcFilters = ((/** @type {?} */ (layer.dataSource.options))).ogcFilters;
                /** @type {?} */
                var filterQueryString = void 0;
                filterQueryString = new OgcFilterWriter()
                    .handleOgcFiltersAppliedValue(layer.dataSource.options, ogcFilters.geometryName);
                if (!filterQueryString) {
                    // Prevent getting all the features for empty filter
                    filterQueryString = new OgcFilterWriter().buildFilter(undefined, layer.map.getExtent(), new ol_proj_Projection__WEBPACK_IMPORTED_MODULE_33__["default"]({ code: layer.map.projection }), ogcFilters.geometryName);
                }
                else {
                    filterQueryString = 'filter=' + filterQueryString;
                }
                window.open(baseurl + "&" + filterQueryString + "&" + outputFormatDownload, '_blank');
            }
            else if (DSOptions.download) {
                window.open(DSOptions.download.url, '_blank');
            }
        }
    };
    DownloadService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    DownloadService.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["MessageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] }
    ]; };
    /** @nocollapse */ DownloadService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function DownloadService_Factory() { return new DownloadService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["MessageService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"])); }, token: DownloadService, providedIn: "root" });
    return DownloadService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var DownloadButtonComponent = /** @class */ (function () {
    function DownloadButtonComponent(downloadService) {
        this.downloadService = downloadService;
        this._color = 'primary';
    }
    Object.defineProperty(DownloadButtonComponent.prototype, "layer", {
        get: /**
         * @return {?}
         */
        function () {
            return this._layer;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._layer = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DownloadButtonComponent.prototype, "color", {
        get: /**
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._color = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} layer
     * @return {?}
     */
    DownloadButtonComponent.prototype.openDownload = /**
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        this.downloadService.open(layer);
    };
    Object.defineProperty(DownloadButtonComponent.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.layer) {
                return;
            }
            return this.layer.dataSource.options;
        },
        enumerable: true,
        configurable: true
    });
    DownloadButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-download-button',
                    template: "<button\r\n  *ngIf=\"options && options.download && (options.download['dynamicUrl'] || options.download['url']) \"\r\n  mat-icon-button\r\n  tooltip-position=\"below\"\r\n  matTooltipShowDelay=\"500\"\r\n  [matTooltip]=\"'igo.geo.download.action' | translate\"\r\n  [color]=\"color\"\r\n  (click)=\"openDownload(layer)\">\r\n  <mat-icon svgIcon=\"download\"></mat-icon>\r\n</button>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DownloadButtonComponent.ctorParameters = function () { return [
        { type: DownloadService }
    ]; };
    DownloadButtonComponent.propDecorators = {
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return DownloadButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoDownloadModule = /** @class */ (function () {
    function IgoDownloadModule() {
    }
    /**
     * @return {?}
     */
    IgoDownloadModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoDownloadModule
        };
    };
    IgoDownloadModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"]
                    ],
                    exports: [DownloadButtonComponent],
                    declarations: [DownloadButtonComponent]
                },] }
    ];
    return IgoDownloadModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var FeatureDetailsComponent = /** @class */ (function () {
    function FeatureDetailsComponent(cdRef, sanitizer) {
        this.cdRef = cdRef;
        this.sanitizer = sanitizer;
    }
    Object.defineProperty(FeatureDetailsComponent.prototype, "feature", {
        get: /**
         * @return {?}
         */
        function () {
            return this._feature;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._feature = value;
            this.cdRef.detectChanges();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FeatureDetailsComponent.prototype, "title", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () {
            return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityTitle"])(this.feature);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FeatureDetailsComponent.prototype, "icon", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () {
            return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityIcon"])(this.feature) || 'link';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} value
     * @return {?}
     */
    FeatureDetailsComponent.prototype.htmlSanitizer = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return this.sanitizer.bypassSecurityTrustResourceUrl(value);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FeatureDetailsComponent.prototype.isObject = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return typeof value === 'object';
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FeatureDetailsComponent.prototype.isUrl = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (typeof value === 'string') {
            return (value.slice(0, 8) === 'https://' || value.slice(0, 7) === 'http://');
        }
        else {
            return false;
        }
    };
    /**
     * @param {?} feature
     * @return {?}
     */
    FeatureDetailsComponent.prototype.filterFeatureProperties = /**
     * @param {?} feature
     * @return {?}
     */
    function (feature) {
        /** @type {?} */
        var allowedFieldsAndAlias = feature.meta ? feature.meta.alias : undefined;
        /** @type {?} */
        var properties = Object.assign({}, feature.properties);
        if (allowedFieldsAndAlias) {
            Object.keys(properties).forEach((/**
             * @param {?} property
             * @return {?}
             */
            function (property) {
                if (Object.keys(allowedFieldsAndAlias).indexOf(property) === -1) {
                    delete properties[property];
                }
                else {
                    properties[allowedFieldsAndAlias[property]] = properties[property];
                    if (allowedFieldsAndAlias[property] !== property) {
                        delete properties[property];
                    }
                }
            }));
            return properties;
        }
        else {
            return feature.properties;
        }
    };
    FeatureDetailsComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-feature-details',
                    template: "<table class=\"igo-striped\" *ngIf=\"feature && isObject(feature.properties) && feature.properties.target !== 'iframe'\">\r\n  <tbody>\r\n    <tr *ngFor=\"let property of filterFeatureProperties(feature) | keyvalue\">\r\n\r\n      <td *ngIf=\"feature.properties.target === '_blank' && property.key === 'url'\">\r\n        <mat-icon mat-list-avatar svgIcon=\"{{icon}}\"></mat-icon>\r\n      </td>\r\n\r\n      <td *ngIf=\"feature.properties.target === '_blank' && property.key === 'url'\">\r\n        <a href=\"{{property.value}}\" target='_blank'> {{ 'igo.geo.targetHtmlUrl' | translate }} {{title}}</a>\r\n      </td>\r\n\r\n      <td *ngIf=\"feature.properties.target === undefined\">\r\n        {{property.key }}\r\n      </td>\r\n\r\n      <td *ngIf=\"feature.properties.target === undefined && !isObject(property.value) && !isUrl(property.value)\" [innerHTML]=property.value>\r\n      </td>\r\n\r\n      <td *ngIf=\"feature.properties.target === undefined && !isObject(property.value) && isUrl(property.value)\">\r\n        <a href=\"{{property.value}}\" target='_blank'>{{ 'igo.geo.targetHtmlUrl' | translate }} </a>\r\n      </td>\r\n\r\n      <td *ngIf=\"feature.properties.target === undefined && isObject(property.value)\" [innerHTML]=\"property.value | json\">\r\n      </td>\r\n\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n<iframe *ngIf=\"feature && isObject(feature.properties) && feature.properties.target === 'iframe'\" [src]='htmlSanitizer(feature.properties.url)'></iframe>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: ["table{width:100%;white-space:nowrap}table td{padding:5px}iframe{height:calc(100% - 4px);width:100%;border:0}"]
                }] }
    ];
    /** @nocollapse */
    FeatureDetailsComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] },
        { type: _angular_platform_browser__WEBPACK_IMPORTED_MODULE_34__["DomSanitizer"] }
    ]; };
    FeatureDetailsComponent.propDecorators = {
        feature: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return FeatureDetailsComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoFeatureDetailsModule = /** @class */ (function () {
    function IgoFeatureDetailsModule() {
    }
    IgoFeatureDetailsModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoKeyValueModule"]
                    ],
                    exports: [FeatureDetailsComponent],
                    declarations: [FeatureDetailsComponent]
                },] }
    ];
    return IgoFeatureDetailsModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * A configurable form, optionnally bound to a feature.
 * This component creates an entity form and, on submit,
 * returns a feature made out of the submitted data. It also
 * does things like managing the feature visibility while it's being updated
 * as well as disabling the selection of another feature.
 */
var FeatureFormComponent = /** @class */ (function () {
    function FeatureFormComponent() {
        this.feature$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](undefined);
        /**
         * Event emitted when the form is submitted
         */
        this.submitForm = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    FeatureFormComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var store = changes.store;
        if (store && store.currentValue !== store.previousValue) {
            this.setStore(store.currentValue);
        }
        /** @type {?} */
        var feature = changes.feature;
        if (feature && feature.currentValue !== feature.previousValue) {
            this.feature$.next(feature.currentValue);
        }
    };
    /**
     * Show the original feature and reactivate the selection
     * @internal
     */
    /**
     * Show the original feature and reactivate the selection
     * \@internal
     * @return {?}
     */
    FeatureFormComponent.prototype.ngOnDestroy = /**
     * Show the original feature and reactivate the selection
     * \@internal
     * @return {?}
     */
    function () {
        this.setStore(undefined);
    };
    /**
     * Transform the form data to a feature and emit an event
     * @param event Form submit event
     * @internal
     */
    /**
     * Transform the form data to a feature and emit an event
     * \@internal
     * @param {?} data
     * @return {?}
     */
    FeatureFormComponent.prototype.onSubmit = /**
     * Transform the form data to a feature and emit an event
     * \@internal
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var feature = this.formDataToFeature(data);
        this.submitForm.emit(feature);
    };
    /**
     * Transform the form data to a feature
     * @param data Form data
     * @returns A feature
     */
    /**
     * Transform the form data to a feature
     * @private
     * @param {?} data Form data
     * @return {?} A feature
     */
    FeatureFormComponent.prototype.formDataToFeature = /**
     * Transform the form data to a feature
     * @private
     * @param {?} data Form data
     * @return {?} A feature
     */
    function (data) {
        /** @type {?} */
        var properties = {};
        /** @type {?} */
        var meta = {};
        if (this.feature === undefined) {
            ((/** @type {?} */ (meta))).id = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
        }
        else {
            Object.assign(properties, this.feature.properties);
            Object.assign(meta, this.feature.meta, {
                revision: Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityRevision"])(this.feature) + 1
            });
        }
        /** @type {?} */
        var propertyPrefix = 'properties.';
        Object.entries(data).forEach((/**
         * @param {?} entry
         * @return {?}
         */
        function (entry) {
            var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__read"])(entry, 2), key = _a[0], value = _a[1];
            if (key.startsWith(propertyPrefix)) {
                /** @type {?} */
                var property = key.substr(propertyPrefix.length);
                properties[property] = value;
            }
        }));
        /** @type {?} */
        var geometry = data.geometry;
        if (geometry === undefined && this.feature !== undefined) {
            geometry = this.feature.geometry;
        }
        return {
            meta: (/** @type {?} */ (meta)),
            type: FEATURE,
            geometry: geometry,
            projection: 'EPSG:4326',
            properties: properties
        };
    };
    /**
     * @private
     * @param {?} store
     * @return {?}
     */
    FeatureFormComponent.prototype.setStore = /**
     * @private
     * @param {?} store
     * @return {?}
     */
    function (store) {
        if (this.store !== undefined) {
            this.activateStoreSelection(this.store);
        }
        if (store !== undefined) {
            this.deactivateStoreSelection(store);
        }
        this.store = store;
    };
    /**
     * Deactivate feature selection from the store and from the map
     */
    /**
     * Deactivate feature selection from the store and from the map
     * @private
     * @param {?} store
     * @return {?}
     */
    FeatureFormComponent.prototype.deactivateStoreSelection = /**
     * Deactivate feature selection from the store and from the map
     * @private
     * @param {?} store
     * @return {?}
     */
    function (store) {
        /** @type {?} */
        var selectionStrategy = store.getStrategyOfType(FeatureStoreSelectionStrategy);
        if (selectionStrategy !== undefined) {
            selectionStrategy.deactivate();
            ((/** @type {?} */ (selectionStrategy))).unselectAll();
        }
    };
    /**
     * Reactivate feature selection from the store and from the map
     */
    /**
     * Reactivate feature selection from the store and from the map
     * @private
     * @param {?} store
     * @return {?}
     */
    FeatureFormComponent.prototype.activateStoreSelection = /**
     * Reactivate feature selection from the store and from the map
     * @private
     * @param {?} store
     * @return {?}
     */
    function (store) {
        // TODO: maybe we should recativate the strategies only if they
        // were active in the first place
        store.activateStrategyOfType(FeatureStoreSelectionStrategy);
    };
    FeatureFormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-feature-form',
                    template: "\r\n<igo-form\r\n  [form]=\"form\"\r\n  [formData]=\"feature$ | async\"\r\n  (submitForm)=\"onSubmit($event)\">\r\n\r\n  <ng-content></ng-content>\r\n  \r\n  <ng-content select=\"[formButtons]\" formButtons></ng-content>\r\n  \r\n</igo-form>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{display:block}igo-form{height:100%}"]
                }] }
    ];
    /** @nocollapse */
    FeatureFormComponent.ctorParameters = function () { return []; };
    FeatureFormComponent.propDecorators = {
        form: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        feature: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        submitForm: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return FeatureFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoFeatureFormModule = /** @class */ (function () {
    function IgoFeatureFormModule() {
    }
    IgoFeatureFormModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoFormModule"]
                    ],
                    exports: [
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoFormModule"],
                        FeatureFormComponent
                    ],
                    declarations: [
                        FeatureFormComponent
                    ]
                },] }
    ];
    return IgoFeatureFormModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoFeatureModule = /** @class */ (function () {
    function IgoFeatureModule() {
    }
    IgoFeatureModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"]
                    ],
                    exports: [
                        IgoFeatureDetailsModule,
                        IgoFeatureFormModule
                    ],
                    declarations: [],
                    providers: []
                },] }
    ];
    return IgoFeatureModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TimeFilterFormComponent = /** @class */ (function () {
    function TimeFilterFormComponent() {
        this.listYears = [];
        this.startListYears = [];
        this.endListYears = [];
        this.playIcon = 'play_circle_filled';
        this.change = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        this.yearChange = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    Object.defineProperty(TimeFilterFormComponent.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            return this._options;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._options = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "currentValue", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                if (this.type !== 'year') {
                    /** @type {?} */
                    var valueArray = value.split('/');
                    if (valueArray.length > 0) {
                        /** @type {?} */
                        var startDate = new Date(valueArray[0]);
                        /** @type {?} */
                        var endDate = new Date(valueArray[1]);
                        if (!isNaN(startDate.valueOf())) {
                            this.startDate = startDate;
                        }
                        if (!isNaN(endDate.valueOf())) {
                            this.endDate = endDate;
                        }
                    }
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "type", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.type === undefined ? 'date' : this.options.type;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "isRange", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.range === undefined || this.options.style === 'slider'
                ? false
                : this.options.range;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "style", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.style === undefined ? 'slider' : this.options.style;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "step", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var step = 10800000;
            if (this.options.step === undefined) {
                switch (this.type) {
                    case 'date':
                    case 'datetime':
                        step = 10800000;
                        break;
                    case 'time':
                        step = 3600000;
                        break;
                    case 'year':
                        step = 31536000000;
                        break;
                    default:
                        step = 10800000;
                }
            }
            else {
                step = this.getStepDefinition(this.options.step);
            }
            return step;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "timeInterval", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.timeInterval === undefined
                ? 2000
                : this.options.timeInterval;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "min", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.min === undefined
                ? undefined
                : new Date(this.options.min);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "max", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.max === undefined
                ? undefined
                : new Date(this.options.max);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterFormComponent.prototype, "is", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.range === undefined ? false : this.options.range;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TimeFilterFormComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.startDate === undefined) {
            /** @type {?} */
            var utcmin = new Date(this.min);
            this.startDate = new Date(utcmin.getTime() + utcmin.getTimezoneOffset() * 60000);
        }
        if (this.endDate === undefined) {
            /** @type {?} */
            var utcmax = new Date(this.max);
            this.endDate = new Date(utcmax.getTime() + utcmax.getTimezoneOffset() * 60000);
        }
        if (this.startYear === undefined) {
            this.startYear = new Date(this.startDate).getFullYear();
            this.initStartYear = this.startYear;
        }
        if (this.endYear === undefined) {
            this.endYear = new Date(this.endDate).getFullYear();
            this.initEndYear = this.endYear;
        }
        if (!this.isRange) {
            for (var i = this.startYear; i <= this.endYear + 1; i++) {
                this.listYears.push(i);
            }
        }
        else {
            for (var i = this.startYear; i < this.endYear; i++) {
                this.startListYears.push(i);
            }
            for (var i = this.startYear + 1; i <= this.endYear; i++) {
                this.endListYears.push(i);
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TimeFilterFormComponent.prototype.handleDateChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.setupDateOutput();
        this.applyTypeChange();
        // Only if is range, use 2 dates to make the range
        if (this.isRange) {
            this.change.emit([this.startDate, this.endDate]);
        }
        else {
            this.change.emit(this.startDate);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TimeFilterFormComponent.prototype.handleYearChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.isRange) {
            this.endListYears = [];
            for (var i = this.startYear + 1; i <= this.initEndYear; i++) {
                this.endListYears.push(i);
            }
            this.startListYears = [];
            for (var i = this.initStartYear + 1; i < this.endYear; i++) {
                this.startListYears.push(i);
            }
            this.yearChange.emit([this.startYear, this.endYear]);
        }
        else {
            this.yearChange.emit(this.year);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TimeFilterFormComponent.prototype.handleListYearChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.handleYearChange([this.startYear, this.endYear]);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TimeFilterFormComponent.prototype.handleListYearStartChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.change.emit([this.startDate, this.endDate]);
    };
    /**
     * @param {?} date
     * @return {?}
     */
    TimeFilterFormComponent.prototype.dateToNumber = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        /** @type {?} */
        var newDate;
        if (date) {
            newDate = new Date(date);
        }
        else {
            newDate = new Date(this.min);
        }
        return newDate.getTime();
    };
    /**
     * @param {?} label
     * @return {?}
     */
    TimeFilterFormComponent.prototype.setSliderThumbLabel = /**
     * @param {?} label
     * @return {?}
     */
    function (label) {
        /** @type {?} */
        var thumbLabel = this.findThumbLabel(this.mySlider._elementRef.nativeElement.childNodes);
        if (thumbLabel) {
            thumbLabel.textContent = label;
        }
    };
    /**
     * @param {?} test
     * @return {?}
     */
    TimeFilterFormComponent.prototype.findThumbLabel = /**
     * @param {?} test
     * @return {?}
     */
    function (test) {
        var _this = this;
        /** @type {?} */
        var thumbLabel;
        test.forEach((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value.className === 'mat-slider-thumb-label-text') {
                thumbLabel = value;
            }
            if (value.children.length > 0 && !thumbLabel) {
                thumbLabel = _this.findThumbLabel(value.childNodes);
            }
        }), this);
        return thumbLabel;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TimeFilterFormComponent.prototype.playFilter = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.interval) {
            this.stopFilter();
        }
        else {
            this.playIcon = 'pause_circle_filled';
            this.interval = setInterval((/**
             * @param {?} that
             * @return {?}
             */
            function (that) {
                /** @type {?} */
                var newMinDateNumber;
                /** @type {?} */
                var maxDateNumber = new Date(that.max);
                newMinDateNumber =
                    that.date === undefined ? that.min.getTime() : that.date.getTime();
                newMinDateNumber += that.mySlider.step;
                that.date = new Date(newMinDateNumber);
                if (newMinDateNumber > maxDateNumber.getTime()) {
                    that.stopFilter();
                }
                that.handleDateChange({ value: that.date, date: that.date });
            }), this.timeInterval, this);
        }
    };
    /**
     * @return {?}
     */
    TimeFilterFormComponent.prototype.stopFilter = /**
     * @return {?}
     */
    function () {
        if (this.interval) {
            clearInterval(this.interval);
        }
        this.interval = undefined;
        this.playIcon = 'play_circle_filled';
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TimeFilterFormComponent.prototype.handleSliderDateChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.date = new Date(event.value);
        this.setSliderThumbLabel(this.handleSliderTooltip());
        this.handleDateChange(event);
    };
    /**
     * @return {?}
     */
    TimeFilterFormComponent.prototype.handleSliderValue = /**
     * @return {?}
     */
    function () {
        if (this.options.current === true || !this.min) {
            /** @type {?} */
            var currentDate = new Date();
            this.date = this.getRoundedDate(currentDate);
        }
        return this.date === undefined ? this.min.getTime() : this.date.getTime();
    };
    /**
     * @return {?}
     */
    TimeFilterFormComponent.prototype.handleSliderTooltip = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var label;
        switch (this.type) {
            case 'date':
                label =
                    this.date === undefined
                        ? this.min.toDateString()
                        : this.date.toDateString();
                break;
            case 'time':
                label =
                    this.date === undefined
                        ? this.min.toTimeString()
                        : this.date.toTimeString();
                break;
            // datetime
            default:
                label =
                    this.date === undefined
                        ? this.min.toUTCString()
                        : this.date.toUTCString();
                break;
        }
        return label;
    };
    /**
     * @return {?}
     */
    TimeFilterFormComponent.prototype.setupDateOutput = /**
     * @return {?}
     */
    function () {
        if (this.style === 'slider') {
            this.startDate = new Date(this.date);
            this.startDate.setSeconds(-(this.step / 1000));
            this.endDate = new Date(this.startDate);
            this.endDate.setSeconds(this.step / 1000);
        }
        else if (!this.isRange && !!this.date) {
            this.endDate = new Date(this.date);
            this.startDate = new Date(this.date);
        }
        else if (this.isRange && (!!this.date || !this.date)) {
            this.startDate =
                this.startDate === undefined ? new Date(this.min) : this.startDate;
            this.endDate =
                this.endDate === undefined ? new Date(this.max) : this.endDate;
        }
        else if (!this.date) {
            this.startDate =
                this.startDate === undefined ? new Date(this.min) : this.startDate;
            this.endDate =
                this.endDate === undefined ? new Date(this.max) : this.endDate;
        }
    };
    /**
     * @return {?}
     */
    TimeFilterFormComponent.prototype.applyTypeChange = /**
     * @return {?}
     */
    function () {
        switch (this.type) {
            case 'date':
                if (this.startDate !== undefined || this.endDate !== undefined) {
                    this.startDate.setHours(0);
                    this.startDate.setMinutes(0);
                    this.startDate.setSeconds(0);
                    this.endDate.setHours(23);
                    this.endDate.setMinutes(59);
                    this.endDate.setSeconds(59);
                }
                break;
            case 'time':
                if (this.style === 'calendar') {
                    if (this.startDate.getDay() !== this.min.getDay()) {
                        /** @type {?} */
                        var selectedHour = this.startDate.getHours();
                        /** @type {?} */
                        var selectedMinute = this.startDate.getMinutes();
                        this.startDate = this.min;
                        this.startDate.setHours(selectedHour);
                        this.startDate.setMinutes(selectedMinute);
                    }
                    if (this.endDate.getDay() !== this.min.getDay()) {
                        /** @type {?} */
                        var selectedHour = this.endDate.getHours();
                        /** @type {?} */
                        var selectedMinute = this.endDate.getMinutes();
                        this.endDate = this.min;
                        this.endDate.setHours(selectedHour);
                        this.endDate.setMinutes(selectedMinute);
                    }
                }
                if (!this.isRange && this.step > 60 * 60 * 1000) {
                    this.startDate.setMinutes(0);
                    this.startDate.setSeconds(0);
                    this.endDate.setMinutes(59);
                    this.endDate.setSeconds(59);
                }
                break;
            // datetime
            default:
            // do nothing
        }
    };
    /**
     * @return {?}
     */
    TimeFilterFormComponent.prototype.getRangeMinDate = /**
     * @return {?}
     */
    function () {
        return this.startDate === undefined ? this.min : this.startDate;
    };
    /**
     * @return {?}
     */
    TimeFilterFormComponent.prototype.getRangeMaxDate = /**
     * @return {?}
     */
    function () {
        return this.endDate === undefined ? this.max : this.endDate;
    };
    /**
     * Round date at a certain time, 10 minutes by Default
     * @param date - Date to Round
     * @param atMinute - round to closest 'atMinute' minute, rounded 10 by default
     * @return the rounded date
     */
    /**
     * Round date at a certain time, 10 minutes by Default
     * @param {?} date - Date to Round
     * @param {?=} atMinute - round to closest 'atMinute' minute, rounded 10 by default
     * @return {?} the rounded date
     */
    TimeFilterFormComponent.prototype.getRoundedDate = /**
     * Round date at a certain time, 10 minutes by Default
     * @param {?} date - Date to Round
     * @param {?=} atMinute - round to closest 'atMinute' minute, rounded 10 by default
     * @return {?} the rounded date
     */
    function (date, atMinute) {
        if (atMinute === void 0) { atMinute = 10; }
        /** @type {?} */
        var coeff = 1000 * 60 * atMinute;
        return new Date(Math.round(date.getTime() / coeff) * coeff);
    };
    /**
     * Get the step (period) definition from the layer dimension tag
     * @param step The step as ISO 8601 example: PT10M for 10 Minutes
     * @return the duration in milliseconds
     */
    /**
     * Get the step (period) definition from the layer dimension tag
     * @param {?} step The step as ISO 8601 example: PT10M for 10 Minutes
     * @return {?} the duration in milliseconds
     */
    TimeFilterFormComponent.prototype.getStepDefinition = /**
     * Get the step (period) definition from the layer dimension tag
     * @param {?} step The step as ISO 8601 example: PT10M for 10 Minutes
     * @return {?} the duration in milliseconds
     */
    function (step) {
        return Object(moment__WEBPACK_IMPORTED_MODULE_35__["duration"])(step).asMilliseconds();
    };
    TimeFilterFormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-time-filter-form',
                    template: "<!-- <div *ngIf=\"style === 'calendar' && type !=='year'\">\r\n  <div *ngIf=\"!isRange\" class=\"igo-col igo-col-100 igo-col-100-m\">\r\n    <mat-form-field>\r\n      <mat-datetimepicker-toggle [for]=\"datetimePicker\" matSuffix></mat-datetimepicker-toggle>\r\n      <mat-datetimepicker #datetimePicker type=\"{{type}}\" openOnFocus=\"true\" timeInterval=\"5\"></mat-datetimepicker>\r\n      <input matInput autocomplete=\"false\"\r\n        placeholder=\"{{'igo.geo.timeFilter.date' | translate}}\"\r\n        [matDatetimepicker]=\"datetimePicker\"\r\n        [(ngModel)]=\"date\"\r\n        [min]=\"min\"\r\n        [max]=\"max\"\r\n        readonly=\"readonly\"\r\n        (dateChange)=\"handleDateChange($event)\">\r\n    </mat-form-field>\r\n\r\n  </div>\r\n\r\n  <div *ngIf=\"isRange\">\r\n    <div class=\"igo-col igo-col-100\">\r\n      <mat-form-field>\r\n        <mat-datetimepicker-toggle [for]=\"minDatetimePicker\" matSuffix></mat-datetimepicker-toggle>\r\n        <mat-datetimepicker #minDatetimePicker type=\"{{type}}\" openOnFocus=\"true\" timeInterval=\"5\"></mat-datetimepicker>\r\n        <input matInput autocomplete=\"false\"\r\n          placeholder=\"{{'igo.geo.timeFilter.startDate' | translate}}\"\r\n          [matDatetimepicker]=\"minDatetimePicker\"\r\n          [(ngModel)]=\"startDate\"\r\n          [min]=\"min\"\r\n          [max]=\"getRangeMaxDate()\"\r\n          readonly=\"readonly\"\r\n          (input)=\"startDate\"\r\n          (dateChange)=\"handleDateChange($event)\">\r\n      </mat-form-field>\r\n    </div>\r\n\r\n    <div class=\"igo-col igo-col-100\">\r\n      <mat-form-field>\r\n        <mat-datetimepicker-toggle [for]=\"maxDatetimePicker\" matSuffix></mat-datetimepicker-toggle>\r\n        <mat-datetimepicker #maxDatetimePicker type=\"{{type}}\" openOnFocus=\"true\" timeInterval=\"5\"></mat-datetimepicker>\r\n        <input matInput autocomplete=\"false\"\r\n          placeholder=\"{{'igo.geo.timeFilter.endDate' | translate}}\"\r\n          [matDatetimepicker]=\"maxDatetimePicker\"\r\n          [(ngModel)]=\"endDate\"\r\n          [min]=\"getRangeMinDate()\"\r\n          [max]=\"max\"\r\n          readonly=\"readonly\"\r\n          (dateChange)=\"handleDateChange($event)\">\r\n      </mat-form-field>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"style === 'calendar' && type ==='year'\">\r\n\r\n  <div *ngIf=\"!isRange\" class=\"igo-col igo-col-100 igo-col-100-m\">\r\n        <mat-form-field>\r\n            <mat-select placeholder=\"{{'igo.geo.timeFilter.date' | translate}}\" [(ngModel)]=\"year\" (selectionChange)=\"handleYearChange($event)\">\r\n                  <mat-option [value]=\"year\" *ngFor=\"let year of listYears\">{{year}}</mat-option>\r\n            </mat-select>\r\n        </mat-form-field>\r\n  </div>\r\n\r\n  <div *ngIf=\"isRange\">\r\n    <div class=\"igo-col igo-col-100\">\r\n        <mat-form-field>\r\n            <mat-select placeholder=\"{{'igo.geo.timeFilter.startDate' | translate}}\" [(ngModel)]=\"startYear\" (selectionChange)=\"handleYearChange($event)\">\r\n              <mat-option [value]=\"startYear\" *ngFor=\"let startYear of startListYears\">{{startYear}}</mat-option>\r\n            </mat-select>\r\n      </mat-form-field>\r\n    </div>\r\n\r\n    <div class=\"igo-col igo-col-100\">\r\n    <mat-form-field>\r\n        <mat-select placeholder=\"{{'igo.geo.timeFilter.endDate' | translate}}\" [(ngModel)]=\"endYear\" (selectionChange)=\"handleYearChange($event)\">\r\n              <mat-option [value]=\"endYear\" *ngFor=\"let endYear of endListYears\">{{endYear}}</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n  <br>\r\n\r\n\r\n<div *ngIf=\"style === 'slider'\" class=\"igo-col igo-col-100 igo-col-100-m\">\r\n  <mat-slider\r\n      id=\"time-slider\"\r\n      tickInterval=\"auto\"\r\n      step=\"{{step}}\"\r\n      [min]=\"dateToNumber(min)\"\r\n      [max]=\"dateToNumber(max)\"\r\n      [value]=\"handleSliderValue()\"\r\n      thumbLabel\r\n      (input)=\"handleSliderDateChange($event)\"\r\n      (selectionChange)=\"handleSliderDateChange($event)\">\r\n  </mat-slider>\r\n  <p class=\"date-below\">{{handleSliderTooltip()}}</p>\r\n  <button mat-icon-button color=\"primary\" (click)=\"playFilter($event)\">\r\n   <mat-icon svgIcon=\"{{playIcon}}\"></mat-icon>\r\n  </button>\r\n</div> -->\r\n",
                    styles: [".igo-layer-filters-container{padding-left:5px}mat-slider>>>div.mat-slider-thumb-label{width:32px;height:32px;margin:0 auto}mat-slider>>>span.mat-slider-thumb-label-text{font-size:8px}#time-slider{width:70%;margin:0 auto}@media only screen and (max-width:450px),only screen and (max-height:450px){#time-slider{width:60%;margin:0 auto}}#playFilterIcon{font-size:32px;cursor:pointer}.date-below{margin:0}mat-form-field{text-align:center}"]
                }] }
    ];
    /** @nocollapse */
    TimeFilterFormComponent.ctorParameters = function () { return []; };
    TimeFilterFormComponent.propDecorators = {
        options: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        currentValue: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        change: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }],
        yearChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }],
        mySlider: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ViewChild"], args: [_angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSlider"],] }]
    };
    return TimeFilterFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TimeFilterItemComponent = /** @class */ (function () {
    function TimeFilterItemComponent(timeFilterService) {
        this.timeFilterService = timeFilterService;
    }
    Object.defineProperty(TimeFilterItemComponent.prototype, "layer", {
        get: /**
         * @return {?}
         */
        function () {
            return this._layer;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._layer = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeFilterItemComponent.prototype, "datasource", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (this.layer.dataSource));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} year
     * @return {?}
     */
    TimeFilterItemComponent.prototype.handleYearChange = /**
     * @param {?} year
     * @return {?}
     */
    function (year) {
        this.timeFilterService.filterByYear(this.datasource, year);
    };
    /**
     * @param {?} date
     * @return {?}
     */
    TimeFilterItemComponent.prototype.handleDateChange = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        this.timeFilterService.filterByDate(this.datasource, date);
    };
    TimeFilterItemComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-time-filter-item',
                    template: "<mat-list-item>\r\n  <mat-icon\r\n    class=\"igo-chevron\"\r\n    mat-list-avatar\r\n    igoCollapse\r\n    [target]=\"filters\"\r\n    [collapsed]=\"false\"\r\n    svgIcon=\"chevron-up\" >\r\n  </mat-icon>\r\n  <h4 matLine>{{layer.title}}</h4>\r\n</mat-list-item>\r\n\r\n<div #filters class=\"igo-datasource-filters-container\">\r\n  <igo-time-filter-form\r\n    [options]=\"datasource.options.timeFilter\"\r\n    [currentValue]=\"datasource.options.params.time\"\r\n    (change)=\"handleDateChange($event)\"\r\n    (yearChange)=\"handleYearChange($event)\">\r\n  </igo-time-filter-form>\r\n</div>\r\n",
                    styles: [":host{overflow:hidden}.igo-datasource-filters-container{text-align:center;width:100%;display:inline-block}"]
                }] }
    ];
    /** @nocollapse */
    TimeFilterItemComponent.ctorParameters = function () { return [
        { type: TimeFilterService }
    ]; };
    TimeFilterItemComponent.propDecorators = {
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return TimeFilterItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TimeFilterListComponent = /** @class */ (function () {
    function TimeFilterListComponent(cdRef) {
        this.cdRef = cdRef;
        this._layers = [];
    }
    Object.defineProperty(TimeFilterListComponent.prototype, "layers", {
        get: /**
         * @return {?}
         */
        function () {
            return this._layers;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._layers = value;
            this.cdRef.detectChanges();
        },
        enumerable: true,
        configurable: true
    });
    TimeFilterListComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-time-filter-list',
                    template: "<igo-list [navigation]=\"false\" [selection]=\"false\">\r\n  <ng-template ngFor let-layer [ngForOf]=\"layers | filterableDataSource: 'time'\">\r\n    <igo-time-filter-item igoListItem [layer]=\"layer\"></igo-time-filter-item>\r\n  </ng-template>\r\n</igo-list>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    TimeFilterListComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] }
    ]; };
    TimeFilterListComponent.propDecorators = {
        layers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return TimeFilterListComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TimeFilterListBindingDirective = /** @class */ (function () {
    function TimeFilterListBindingDirective(component, mapService) {
        this.mapService = mapService;
        this.component = component;
    }
    /**
     * @return {?}
     */
    TimeFilterListBindingDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // Override input layers
        this.component.layers = [];
        this.layers$$ = this.mapService.getMap().layers$.subscribe((/**
         * @param {?} layers
         * @return {?}
         */
        function (layers) {
            _this.component.layers = layers;
        }));
    };
    /**
     * @return {?}
     */
    TimeFilterListBindingDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.layers$$.unsubscribe();
    };
    TimeFilterListBindingDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoTimeFilterListBinding]'
                },] }
    ];
    /** @nocollapse */
    TimeFilterListBindingDirective.ctorParameters = function () { return [
        { type: TimeFilterListComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Self"] }] },
        { type: MapService }
    ]; };
    return TimeFilterListBindingDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WktService = /** @class */ (function () {
    function WktService() {
    }
    /**
     * @param {?} wkt
     * @param {?} wktProj
     * @param {?=} featureProj
     * @return {?}
     */
    WktService.prototype.wktToFeature = /**
     * @param {?} wkt
     * @param {?} wktProj
     * @param {?=} featureProj
     * @return {?}
     */
    function (wkt, wktProj, featureProj) {
        if (featureProj === void 0) { featureProj = 'EPSG:3857'; }
        return new ol_format_WKT__WEBPACK_IMPORTED_MODULE_36__["default"]().readFeature(wkt, {
            dataProjection: wktProj,
            featureProjection: featureProj
        });
    };
    /**
     * @param {?} epsgTO
     * @param {?} extent
     * @param {?} extentProj
     * @return {?}
     */
    WktService.prototype.extentToWkt = /**
     * @param {?} epsgTO
     * @param {?} extent
     * @param {?} extentProj
     * @return {?}
     */
    function (epsgTO, extent, extentProj) {
        /** @type {?} */
        var currentExtent = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transformExtent"])(extent, extentProj, epsgTO);
        currentExtent = this.roundCoordinateArray(currentExtent, epsgTO, 0);
        /** @type {?} */
        var wktPoly = "POLYGON((\n      " + extent[0] + " " + extent[1] + ",\n      " + extent[0] + " " + extent[3] + ",\n      " + extent[2] + " " + extent[3] + ",\n      " + extent[2] + " " + extent[1] + ",\n      " + extent[0] + " " + extent[1] + "))";
        /** @type {?} */
        var wktLine = "LINESTRING(\n      " + extent[0] + " " + extent[1] + ",\n      " + extent[0] + " " + extent[3] + ",\n      " + extent[2] + " " + extent[3] + ",\n      " + extent[2] + " " + extent[1] + ",\n      " + extent[0] + " " + extent[1] + ")";
        /** @type {?} */
        var wktMultiPoints = "MULTIPOINT(\n        " + extent[0] + " " + extent[1] + ",\n        " + extent[0] + " " + extent[3] + ",\n        " + extent[2] + " " + extent[3] + ",\n        " + extent[2] + " " + extent[1] + ")";
        return {
            wktPoly: wktPoly,
            wktLine: wktLine,
            wktMultiPoints: wktMultiPoints
        };
    };
    /**
     * @private
     * @param {?} coordinateArray
     * @param {?} projection
     * @param {?=} decimal
     * @return {?}
     */
    WktService.prototype.roundCoordinateArray = /**
     * @private
     * @param {?} coordinateArray
     * @param {?} projection
     * @param {?=} decimal
     * @return {?}
     */
    function (coordinateArray, projection, decimal) {
        if (decimal === void 0) { decimal = 0; }
        /** @type {?} */
        var lproj = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["get"])(projection);
        /** @type {?} */
        var units = lproj.getUnits();
        /** @type {?} */
        var olUnits = ['ft', 'm', 'us-ft'];
        if (olUnits.indexOf(units) !== -1) {
            coordinateArray = this.roundArray(coordinateArray, decimal);
        }
        return coordinateArray;
    };
    /**
     * @private
     * @param {?} array
     * @param {?=} decimal
     * @return {?}
     */
    WktService.prototype.roundArray = /**
     * @private
     * @param {?} array
     * @param {?=} decimal
     * @return {?}
     */
    function (array, decimal) {
        if (decimal === void 0) { decimal = 0; }
        /** @type {?} */
        var x = 0;
        while (x < array.length) {
            array[x] = array[x].toFixed(decimal);
            x++;
        }
        return array;
    };
    /**
     * @param {?} snrc
     * @param {?=} epsgTO
     * @return {?}
     */
    WktService.prototype.snrcToWkt = /**
     * @param {?} snrc
     * @param {?=} epsgTO
     * @return {?}
     */
    function (snrc, epsgTO) {
        if (epsgTO === void 0) { epsgTO = 'EPSG:3857'; }
        snrc = snrc.toLowerCase();
        /** @type {?} */
        var wktPoly;
        /** @type {?} */
        var ew = {
            1: { from: -56, to: -64 },
            2: { from: -64, to: -72 },
            3: { from: -72, to: -80 },
            4: { from: -80, to: -88 },
            5: { from: -88, to: -96 },
            6: { from: -96, to: -104 },
            7: { from: -104, to: -112 },
            8: { from: -112, to: -120 },
            9: { from: -120, to: -128 },
            10: { from: -128, to: -136 }
        };
        /** @type {?} */
        var sn = {
            1: { from: 44, to: 48 },
            2: { from: 48, to: 52 },
            3: { from: 52, to: 56 },
            4: { from: 56, to: 60 },
            5: { from: 60, to: 64 },
            6: { from: 64, to: 68 },
            7: { from: 68, to: 72 },
            8: { from: 72, to: 76 },
            9: { from: 76, to: -128 }
        };
        /** @type {?} */
        var snrc250kIndex = [
            ['m', 'n', 'o', 'p'],
            ['l', 'k', 'j', 'i'],
            ['e', 'f', 'g', 'h'],
            ['d', 'c', 'b', 'a']
        ];
        /** @type {?} */
        var snrc50kIndex = [
            ['13', '14', '15', '16'],
            ['12', '11', '10', '09'],
            ['05', '06', '07', '08'],
            ['04', '03', '02', '01']
        ];
        /** @type {?} */
        var checkSNRC50k = /\d{2,3}[a-p][0,1][0-9]/gi;
        /** @type {?} */
        var checkSNRC250k = /\d{2,3}[a-p]/gi;
        /** @type {?} */
        var checkSNRC1m = /\d{2,3}/gi;
        /** @type {?} */
        var snrc1m = false;
        /** @type {?} */
        var snrc250k = false;
        /** @type {?} */
        var snrc50k = false;
        if (checkSNRC50k.test(snrc)) {
            snrc50k = true;
        }
        else {
            if (checkSNRC250k.test(snrc)) {
                snrc250k = true;
            }
            else {
                if (checkSNRC1m.test(snrc)) {
                    snrc1m = true;
                }
            }
        }
        if (snrc1m) {
            snrc += 'a01';
        }
        else if (snrc250k) {
            snrc += '01';
        }
        if (/\d{2,3}[a-p][0,1][0-9]/gi.test(snrc)) {
            /** @type {?} */
            var regex1m = /(?=[a-p])/gi;
            /** @type {?} */
            var ar1m = snrc.split(regex1m);
            /** @type {?} */
            var part1m = ar1m[0];
            /** @type {?} */
            var part250k_1 = ar1m[1][0];
            /** @type {?} */
            var part50k_1 = ar1m[1].split(part250k_1)[1];
            /** @type {?} */
            var separator = 1;
            if (part1m.length === 3) {
                separator = 2;
            }
            /** @type {?} */
            var partEW = part1m.substring(0, separator);
            /** @type {?} */
            var partSN = part1m.substring(separator);
            /** @type {?} */
            var unit1mEW = 8;
            /** @type {?} */
            var unit1mSN = 4;
            /** @type {?} */
            var unit250kEW = 2;
            /** @type {?} */
            var unit250kSN = 1;
            /** @type {?} */
            var unit50kEW = 0.5;
            /** @type {?} */
            var unit50kSN = 0.25;
            /** @type {?} */
            var index250kEW_1 = 0;
            /** @type {?} */
            var index250kSN_1 = 0;
            /** @type {?} */
            var index50kEW_1 = 0;
            /** @type {?} */
            var index50kSN_1 = 0;
            snrc250kIndex.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                if (element.indexOf(part250k_1) !== -1) {
                    index250kSN_1 = snrc250kIndex.indexOf(element);
                    index250kEW_1 = element.indexOf(part250k_1);
                }
            }));
            snrc50kIndex.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                if (element.indexOf(part50k_1) !== -1) {
                    index50kSN_1 = snrc50kIndex.indexOf(element);
                    index50kEW_1 = element.indexOf(part50k_1);
                }
            }));
            /** @type {?} */
            var increment250kEW = 0;
            /** @type {?} */
            var increment250kSN = 0;
            /** @type {?} */
            var increment50kEW = 0;
            /** @type {?} */
            var increment50kSN = 0;
            /** @type {?} */
            var unitPerTypeEW = unit1mEW;
            /** @type {?} */
            var unitPerTypeSN = unit1mSN;
            if (snrc250k) {
                increment250kEW = index250kEW_1 * unit250kEW;
                increment250kSN = index250kSN_1 * unit250kSN;
                increment50kEW = 0;
                increment50kSN = 0;
                unitPerTypeEW = unit250kEW;
                unitPerTypeSN = unit250kSN;
            }
            else if (snrc50k) {
                increment250kEW = index250kEW_1 * unit250kEW;
                increment250kSN = index250kSN_1 * unit250kSN;
                increment50kEW = index50kEW_1 * unit50kEW;
                increment50kSN = index50kSN_1 * unit50kSN;
                unitPerTypeEW = unit50kEW;
                unitPerTypeSN = unit50kSN;
            }
            /** @type {?} */
            var coord = {
                ul: [
                    ew[partEW].to + increment250kEW + increment50kEW,
                    sn[partSN].to - increment250kSN - increment50kSN
                ]
            };
            coord.lr = [
                coord.ul[0] + unitPerTypeEW,
                coord.ul[1] - unitPerTypeSN
            ];
            coord.ur = [coord.ul[0], coord.ul[1] - unitPerTypeSN];
            coord.ll = [coord.ul[0] + unitPerTypeEW, coord.ul[1]];
            coord.ul = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])([coord.ul[0], coord.ul[1]], 'EPSG:4326', epsgTO);
            coord.lr = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])([coord.lr[0], coord.lr[1]], 'EPSG:4326', epsgTO);
            coord.ur = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])([coord.ur[0], coord.ur[1]], 'EPSG:4326', epsgTO);
            coord.ll = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])([coord.ll[0], coord.ll[1]], 'EPSG:4326', epsgTO);
            // Rounded coordinate to shorten url in get
            coord.ul = this.roundCoordinateArray(coord.ul, epsgTO, 0);
            coord.lr = this.roundCoordinateArray(coord.lr, epsgTO, 0);
            coord.ur = this.roundCoordinateArray(coord.ur, epsgTO, 0);
            coord.ll = this.roundCoordinateArray(coord.ll, epsgTO, 0);
            wktPoly =
                'POLYGON((' +
                    [
                        coord.ul.join(' '),
                        coord.ur.join(' '),
                        coord.lr.join(' '),
                        coord.ll.join(' '),
                        coord.ul.join(' ')
                    ].join(',') +
                    '))';
            /** @type {?} */
            var wktLine = 'LINESTRING(' +
                [
                    coord.ul.join(' '),
                    coord.ur.join(' '),
                    coord.lr.join(' '),
                    coord.ll.join(' '),
                    coord.ul.join(' ')
                ].join(',') +
                ')';
            /** @type {?} */
            var wktMultiPoints = 'MULTIPOINT(' +
                [
                    coord.ul.join(' '),
                    coord.ur.join(' '),
                    coord.lr.join(' '),
                    coord.ll.join(' ')
                ].join(',') +
                ')';
            return {
                wktPoly: wktPoly,
                wktLine: wktLine,
                wktMultiPoints: wktMultiPoints
            };
        }
    };
    WktService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    WktService.ctorParameters = function () { return []; };
    /** @nocollapse */ WktService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function WktService_Factory() { return new WktService(); }, token: WktService, providedIn: "root" });
    return WktService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterFormComponent = /** @class */ (function () {
    function OgcFilterFormComponent(wktService) {
        this.wktService = wktService;
        this.value = '';
        this.color = 'primary';
        this.snrc = '';
        this.baseOverlayName = 'ogcFilterOverlay_';
        // TODO: Filter permitted operator based on wfscapabilities
        // Need to work on regex on XML capabilities because
        // comaparison operator's name varies between WFS servers...
        // Ex: IsNull vs PropertyIsNull vs IsNil ...
        this.ogcFilterOperators = new OgcFilterWriter().operators;
        this.igoSpatialSelectors = [
            {
                type: 'fixedExtent'
            },
            {
                type: 'snrc'
            }
        ];
        // TODO: selectFeature & drawFeature
    }
    Object.defineProperty(OgcFilterFormComponent.prototype, "activeFilters", {
        get: /**
         * @return {?}
         */
        function () {
            this.updateField();
            return this.datasource.options.ogcFilters.interfaceOgcFilters.filter((/**
             * @param {?} f
             * @return {?}
             */
            function (f) { return f.active === true; }));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    OgcFilterFormComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.computeAllowedOperators();
    };
    /**
     * @return {?}
     */
    OgcFilterFormComponent.prototype.computeAllowedOperators = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var allowedOperators = this.datasource.options.ogcFilters.allowedOperatorsType;
        /** @type {?} */
        var effectiveOperators = {};
        if (!allowedOperators) {
            allowedOperators = OgcFilterOperatorType.BasicAndSpatial;
        }
        switch (allowedOperators.toLowerCase()) {
            case 'all':
                effectiveOperators = this.ogcFilterOperators;
                break;
            case 'spatial':
                effectiveOperators = {
                    Intersects: { spatial: true, fieldRestrict: [] },
                    Within: { spatial: true, fieldRestrict: [] },
                };
                break;
            case 'basicandspatial':
                effectiveOperators = {
                    PropertyIsEqualTo: { spatial: false, fieldRestrict: [] },
                    PropertyIsNotEqualTo: { spatial: false, fieldRestrict: [] },
                    Intersects: { spatial: true, fieldRestrict: [] },
                    Within: { spatial: true, fieldRestrict: [] },
                };
                break;
            case 'basic':
                effectiveOperators = {
                    PropertyIsEqualTo: { spatial: false, fieldRestrict: [] },
                    PropertyIsNotEqualTo: { spatial: false, fieldRestrict: [] }
                };
                break;
            case 'basicnumeric':
                effectiveOperators = {
                    PropertyIsEqualTo: { spatial: false, fieldRestrict: [] },
                    PropertyIsNotEqualTo: { spatial: false, fieldRestrict: [] },
                    PropertyIsGreaterThan: { spatial: false, fieldRestrict: ['number'] },
                    PropertyIsGreaterThanOrEqualTo: { spatial: false, fieldRestrict: ['number'] },
                    PropertyIsLessThan: { spatial: false, fieldRestrict: ['number'] },
                    PropertyIsLessThanOrEqualTo: { spatial: false, fieldRestrict: ['number'] },
                };
                break;
            default:
                effectiveOperators = {
                    PropertyIsEqualTo: { spatial: false, fieldRestrict: [] },
                    PropertyIsNotEqualTo: { spatial: false, fieldRestrict: [] },
                    Intersects: { spatial: true, fieldRestrict: [] },
                    Within: { spatial: true, fieldRestrict: [] },
                };
        }
        this.ogcFilterOperators = effectiveOperators;
    };
    /**
     * @return {?}
     */
    OgcFilterFormComponent.prototype.updateField = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.datasource.options.sourceFields) {
            return;
        }
        this.fields = this.datasource.options.sourceFields
            .filter((/**
         * @param {?} sf
         * @return {?}
         */
        function (sf) { return (sf.excludeFromOgcFilters === undefined || !sf.excludeFromOgcFilters); }));
        this.fields.filter((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.name === _this.currentFilter.propertyName; }))
            .forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            _this.values = element.values !== undefined ? element.values.sort() : [];
        }));
    };
    /**
     * @param {?} event
     * @param {?} filter
     * @param {?} property
     * @return {?}
     */
    OgcFilterFormComponent.prototype.toggleFilterState = /**
     * @param {?} event
     * @param {?} filter
     * @param {?} property
     * @return {?}
     */
    function (event, filter, property) {
        this.updateField();
        if (event.checked) {
            this.datasource.options.ogcFilters.interfaceOgcFilters
                .filter((/**
             * @param {?} f
             * @return {?}
             */
            function (f) { return f.filterid === filter.filterid; }))
                .forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                element[property] = true;
            }));
        }
        else {
            this.removeOverlayByID(filter.filterid);
            this.datasource.options.ogcFilters.interfaceOgcFilters
                .filter((/**
             * @param {?} f
             * @return {?}
             */
            function (f) { return f.filterid === filter.filterid; }))
                .forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                element[property] = false;
            }));
        }
        this.refreshFilters();
    };
    /**
     * @param {?} filter
     * @return {?}
     */
    OgcFilterFormComponent.prototype.deleteFilter = /**
     * @param {?} filter
     * @return {?}
     */
    function (filter) {
        /** @type {?} */
        var ogcFilters = this.datasource.options.ogcFilters;
        ogcFilters.interfaceOgcFilters = ogcFilters.interfaceOgcFilters.filter((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.filterid !== filter.filterid; }));
        this.removeOverlayByID(filter.filterid);
        this.refreshFilters();
    };
    /**
     * @param {?} filter
     * @param {?} property
     * @param {?} value
     * @return {?}
     */
    OgcFilterFormComponent.prototype.changeNumericProperty = /**
     * @param {?} filter
     * @param {?} property
     * @param {?} value
     * @return {?}
     */
    function (filter, property, value) {
        this.changeProperty(filter, property, parseFloat(value));
        this.refreshFilters();
    };
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    OgcFilterFormComponent.prototype.removeOverlayByID = /**
     * @private
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var overlayId = this.baseOverlayName + id;
        if (this.map.overlay.dataSource.ol.getFeatureById(overlayId)) {
            this.map.overlay.dataSource.ol.removeFeature(this.map.overlay.dataSource.ol.getFeatureById(overlayId));
        }
    };
    /**
     * @param {?} filter
     * @return {?}
     */
    OgcFilterFormComponent.prototype.changeOperator = /**
     * @param {?} filter
     * @return {?}
     */
    function (filter) {
        if (this.ogcFilterOperators[filter.operator].spatial === false) {
            this.removeOverlayByID(filter.filterid);
        }
        this.refreshFilters();
    };
    /**
     * @param {?} filter
     * @param {?} property
     * @param {?} value
     * @return {?}
     */
    OgcFilterFormComponent.prototype.changeProperty = /**
     * @param {?} filter
     * @param {?} property
     * @param {?} value
     * @return {?}
     */
    function (filter, property, value) {
        this.datasource.options.ogcFilters.interfaceOgcFilters
            .filter((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.filterid === filter.filterid; }))
            .forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            element[property] = value;
        }));
        this.refreshFilters();
    };
    /**
     * @param {?} filter
     * @param {?=} value
     * @return {?}
     */
    OgcFilterFormComponent.prototype.changeGeometry = /**
     * @param {?} filter
     * @param {?=} value
     * @return {?}
     */
    function (filter, value) {
        var _this = this;
        /** @type {?} */
        var checkSNRC50k = /\d{2,3}[a-l][0,1][0-9]/gi;
        /** @type {?} */
        var checkSNRC250k = /\d{2,3}[a-p]/gi;
        /** @type {?} */
        var checkSNRC1m = /\d{2,3}/gi;
        /** @type {?} */
        var mapProjection = this.map.projection;
        this.removeOverlayByID(filter.filterid);
        this.datasource.options.ogcFilters.interfaceOgcFilters
            .filter((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.filterid === filter.filterid; }))
            .forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            /** @type {?} */
            var wktPoly;
            if (filter.igoSpatialSelector === 'snrc') {
                if (value === '' && _this.snrc !== '') {
                    wktPoly = _this.wktService.snrcToWkt(_this.snrc).wktPoly;
                    element.wkt_geometry = wktPoly;
                }
                else if (value !== '' &&
                    (checkSNRC1m.test(value) ||
                        checkSNRC250k.test(value) ||
                        checkSNRC50k.test(value))) {
                    wktPoly = _this.wktService.snrcToWkt(value).wktPoly;
                    element.wkt_geometry = wktPoly;
                }
            }
            else if (filter.igoSpatialSelector === 'fixedExtent') {
                wktPoly = _this.wktService.extentToWkt(mapProjection, _this.map.getExtent(), mapProjection).wktPoly;
                element.wkt_geometry = wktPoly;
            }
        }));
        this.refreshFilters();
    };
    OgcFilterFormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-ogc-filter-form',
                    template: "<mat-list-item>\r\n\r\n  <div class=\"igo-col igo-col-90 igo-col-100-m\">\r\n    <mat-select class=\"logical\" [disabled]=\"!currentFilter.active\" (selectionChange)=\"refreshFilters()\" [(ngModel)]=\"currentFilter.parentLogical\"\r\n      *ngIf=\"activeFilters.indexOf(currentFilter) !== 0 && currentFilter.active===true\">\r\n      <mat-option value=\"And\">{{'igo.geo.operators.And' | translate}}</mat-option>\r\n      <mat-option value=\"Or\">{{'igo.geo.operators.Or' | translate}}</mat-option>\r\n    </mat-select>\r\n  </div>\r\n  <!-- NON SPATIAL -->\r\n  <div class=\"igo-col igo-col-90 igo-col-100-m\" *ngIf=\"(currentFilter.operator !== 'Intersects' && currentFilter.operator !== 'Contains' && currentFilter.operator !== 'Within')\">\r\n    <span *ngIf=\"fields && fields.length > 0 && fields[0].name !== ''\">\r\n      <mat-select [disabled]=\"!currentFilter.active\" *ngIf=\"['Contains','Intersects','Within'].indexOf(currentFilter.operator) === -1\"\r\n        [(ngModel)]=\"currentFilter.propertyName\" tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.sourceFields.selectField' | translate\"\r\n        (selectionChange)=\"updateField()\">\r\n        <mat-option *ngFor=\"let field of fields\" [value]=\"field.name\">{{field.alias}}</mat-option>\r\n      </mat-select>\r\n    </span>\r\n    <span *ngIf=\"fields && fields.length === 1 && fields[0].name === ''\">\r\n      <mat-form-field>\r\n        <input [disabled]=\"!currentFilter.active\" matInput #fieldPerUser (keyup)=\"changeProperty(currentFilter,'propertyName',fieldPerUser.value)\"\r\n          (blur)=\"changeProperty(currentFilter,'propertyName',fieldPerUser.value)\" [(ngModel)]=\"currentFilter.propertyName\">\r\n\r\n        <button mat-button *ngIf=\"currentFilter.propertyName\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"currentFilter.propertyName=''\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n    </span>\r\n  </div>\r\n\r\n  <div class=\"igo-col igo-col-90 igo-col-100-m\" *ngIf=\"(currentFilter.operator !== 'Intersects' && currentFilter.operator !== 'Contains' && currentFilter.operator !== 'Within')\">\r\n    <mat-select [disabled]=\"!currentFilter.active\" [(ngModel)]=\"currentFilter.operator\" (selectionChange)=\"changeOperator(currentFilter)\">\r\n      <mat-option *ngFor=\"let operator of ogcFilterOperators | keyvalue\" [value]=\"operator.key\">{{('igo.geo.operators.'+ operator.key) | translate}}</mat-option>\r\n    </mat-select>\r\n  </div>\r\n\r\n  <div class=\"igo-col igo-col-90 igo-col-100-m\" *ngIf=\"(currentFilter.operator !== 'Intersects' && currentFilter.operator !== 'Contains' && currentFilter.operator !== 'Within')\">\r\n\r\n    <!-- PropertyIsEqualTo -->\r\n    <span *ngIf=\"currentFilter.operator === 'PropertyIsEqualTo' || currentFilter.operator === 'PropertyIsNotEqualTo'\">\r\n      <mat-form-field>\r\n        <input [disabled]=\"!currentFilter.active\" matInput [matAutocomplete]=\"auto\" #expressionequalto (keyup)=\"changeProperty(currentFilter,'expression',expressionequalto.value)\"\r\n          (ngModelChange)=\"changeProperty(currentFilter,'expression',expressionequalto.value)\" [ngModel]=\"currentFilter.expression\">\r\n        <mat-autocomplete #auto=\"matAutocomplete\">\r\n          <mat-option *ngFor=\"let value of values\" [value]=\"value\">\r\n            <span>{{ value }}</span>\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-button *ngIf=\"currentFilter.expression\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"currentFilter.expression=''\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n    </span>\r\n    <!-- PropertyIsEqualTo  -->\r\n\r\n\r\n    <!-- PropertyIsLike  -->\r\n    <span *ngIf=\"currentFilter.operator === 'PropertyIsLike'\">\r\n      <mat-form-field>\r\n        <input [disabled]=\"!currentFilter.active\" matInput [matAutocomplete]=\"auto\" #pattern (keyup)=\"changeProperty(currentFilter,'pattern',pattern.value)\"\r\n          (ngModelChange)=\"changeProperty(currentFilter,'pattern',pattern.value)\" [ngModel]=\"currentFilter.pattern\">\r\n        <mat-autocomplete #auto=\"matAutocomplete\">\r\n          <mat-option *ngFor=\"let value of values\" [value]=\"value\">\r\n            <span>{{ value }}</span>\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-button *ngIf=\"currentFilter.pattern\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"currentFilter.pattern=''\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n    </span>\r\n    <!-- PropertyIsLike  -->\r\n\r\n    <!-- PropertyIsNull  -->\r\n    <span *ngIf=\"currentFilter.operator === 'PropertyIsNull'\"></span>\r\n    <!-- PropertyIsNull  -->\r\n\r\n    <!-- PropertyIs_Than  -->\r\n    <span *ngIf=\"currentFilter.operator === 'PropertyIsGreaterThan' || currentFilter.operator === 'PropertyIsGreaterThanOrEqualTo' || currentFilter.operator === 'PropertyIsLessThan' || currentFilter.operator === 'PropertyIsLessThanOrEqualTo'\">\r\n      <mat-form-field>\r\n        <input [disabled]=\"!currentFilter.active\" matInput [matAutocomplete]=\"auto\" #expressionthan type=\"number\" (keyup)=\"changeNumericProperty(currentFilter,'expression',expressionthan.value)\"\r\n          (ngModelChange)=\"changeNumericProperty(currentFilter,'expression',expressionthan.value)\" [ngModel]=\"currentFilter.expression\">\r\n        <mat-autocomplete #auto=\"matAutocomplete\">\r\n          <mat-option *ngFor=\"let value of values\" [value]=\"value\">\r\n            <span>{{ value }}</span>\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-button *ngIf=\"currentFilter.expression\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"currentFilter.expression=''\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n    </span>\r\n    <!-- PropertyIs_Than  -->\r\n\r\n\r\n    <!-- PropertyIsBetween -->\r\n    <span *ngIf=\"currentFilter.operator === 'PropertyIsBetween'\">\r\n      <mat-form-field>\r\n        <input [disabled]=\"!currentFilter.active\" matInput [matAutocomplete]=\"auto\" #lowerBoundary type=\"number\" (keyup)=\"changeNumericProperty(currentFilter,'lowerBoundary',lowerBoundary.value)\"\r\n          (ngModelChange)=\"changeNumericProperty(currentFilter,'lowerBoundary',lowerBoundary.value)\" [ngModel]=\"currentFilter.lowerBoundary\">\r\n        <mat-autocomplete #auto=\"matAutocomplete\">\r\n          <mat-option *ngFor=\"let value of values\" [value]=\"value\">\r\n            <span>{{ value }}</span>\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-button *ngIf=\"currentFilter.lowerBoundary\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"currentFilter.lowerBoundary=''\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n      <mat-form-field>\r\n        <input [disabled]=\"!currentFilter.active\" matInput [matAutocomplete]=\"auto\" #upperBoundary type=\"number\" (keyup)=\"changeNumericProperty(currentFilter,'upperBoundary',upperBoundary.value)\"\r\n          (ngModelChange)=\"changeNumericProperty(currentFilter,'upperBoundary',upperBoundary.value)\" [ngModel]=\"currentFilter.upperBoundary\">\r\n        <mat-autocomplete #auto=\"matAutocomplete\">\r\n          <mat-option *ngFor=\"let value of values\" [value]=\"value\">\r\n            <span>{{ value }}</span>\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-button *ngIf=\"currentFilter.upperBoundary\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"currentFilter.upperBoundary=''\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n    </span>\r\n    <!-- PropertyIsBetween  -->\r\n\r\n\r\n    <!-- During -->\r\n    <span *ngIf=\"currentFilter.operator === 'During'\">\r\n      <mat-form-field>\r\n        <input [disabled]=\"!currentFilter.active\" matInput [matAutocomplete]=\"auto\" #begin (keyup)=\"changeProperty(currentFilter,'begin',begin.value)\"\r\n          (ngModelChange)=\"changeProperty(currentFilter,'begin',begin.value)\" [ngModel]=\"currentFilter.begin\">\r\n        <mat-autocomplete #auto=\"matAutocomplete\">\r\n          <mat-option *ngFor=\"let value of values \" [value]=\"value\">\r\n            <span>{{ value }}</span>\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-button *ngIf=\"currentFilter.begin\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"currentFilter.begin=''\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n      <mat-form-field>\r\n        <input [disabled]=\"!currentFilter.active\" matInput [matAutocomplete]=\"auto\" #end (keyup)=\"changeProperty(currentFilter,'end',end.value)\"\r\n          (ngModelChange)=\"changeProperty(currentFilter,'end',end.value)\" [ngModel]=\"currentFilter.end\">\r\n        <mat-autocomplete #auto=\"matAutocomplete\">\r\n          <mat-option *ngFor=\"let value of values\" [value]=\"value\">\r\n            <span>{{ value }}</span>\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-button *ngIf=\"currentFilter.end\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"currentFilter.end=''\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n\r\n    </span>\r\n    <!-- During  -->\r\n  </div>\r\n  <!-- NON SPATIAL -->\r\n\r\n\r\n  <!-- PropertySpatial  -->\r\n  <div class=\"igo-col igo-col-90 igo-col-100-m\" *ngIf=\"(currentFilter.operator === 'Intersects' || currentFilter.operator === 'Contains' || currentFilter.operator === 'Within')\">\r\n    <mat-select [disabled]=\"!currentFilter.active\" [(ngModel)]=\"currentFilter.operator\" (selectionChange)=\"changeOperator(currentFilter)\">\r\n      <mat-option *ngFor=\"let operator of ogcFilterOperators | keyvalue\" [value]=\"operator.key\">{{('igo.geo.operators.'+ operator.key) | translate}}</mat-option>\r\n    </mat-select>\r\n  </div>\r\n  <div class=\"igo-col igo-col-90 igo-col-100-m\" *ngIf=\"(currentFilter.operator === 'Intersects' || currentFilter.operator === 'Contains' || currentFilter.operator === 'Within')\">\r\n    <mat-select [disabled]=\"!currentFilter.active\" [(ngModel)]=\"currentFilter.igoSpatialSelector\" (selectionChange)=\"changeGeometry(currentFilter,value)\">\r\n      <mat-option *ngFor=\"let igoSpatialSelector of igoSpatialSelectors\" [value]=\"igoSpatialSelector.type\">{{('igo.geo.spatialSelector.'+ igoSpatialSelector.type) | translate}}</mat-option>\r\n    </mat-select>\r\n  </div>\r\n\r\n  <div class=\"igo-col igo-col-90 igo-col-100-m\" *ngIf=\"(currentFilter.operator === 'Intersects' || currentFilter.operator === 'Contains' || currentFilter.operator === 'Within')\">\r\n    <button mat-button [disabled]=\"!currentFilter.active\" *ngIf=\"currentFilter.igoSpatialSelector === 'fixedExtent'\"\r\n      matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"changeGeometry(currentFilter,value)\" tooltip-position=\"below\" matTooltipShowDelay=\"500\"\r\n      [matTooltip]=\"'igo.geo.spatialSelector.btnSetExtent' | translate\">\r\n      <mat-icon svgIcon=\"arrow-expand-all\"></mat-icon>\r\n    </button>\r\n\r\n\r\n    <mat-form-field *ngIf=\"currentFilter.igoSpatialSelector === 'snrc'\">\r\n      <input matInput #htmlSnrc (keyup)=\"changeGeometry(currentFilter,htmlSnrc.value)\" (blur)=\"changeGeometry(currentFilter,htmlSnrc.value)\"\r\n        [(ngModel)]=\"snrc\">\r\n      <button mat-button *ngIf=\"snrc\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"snrc=''\">\r\n        <mat-icon svgIcon=\"close\"></mat-icon>\r\n      </button>\r\n    </mat-form-field>\r\n  </div>\r\n  <!-- PropertySpatial  -->\r\n\r\n  <div class=\"igo-col igo-col-100 igo-col-100-m\">\r\n    <div class=\"igo-layer-button-group\">\r\n      <mat-slide-toggle class=\"example-margin\" (change)=\"toggleFilterState($event,currentFilter,'active')\" tooltip-position=\"below\"\r\n        matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.filter.toggleFilterState' | translate\" [color]=\"color\" [checked]=\"currentFilter.active\"\r\n        [disabled]=\"disabled\">\r\n      </mat-slide-toggle>\r\n      <button mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.filter.removeFilter' | translate\"\r\n        color=\"warn\" (click)=\"deleteFilter(currentFilter)\">\r\n        <mat-icon svgIcon=\"delete\"></mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <mat-divider></mat-divider>\r\n</mat-list-item>\r\n",
                    styles: [":host{overflow:hidden}.mat-list-item{height:auto}.mat-list-item>>>div.mat-list-item-content{display:inline-table}.logical{font-weight:700}input,mat-select{margin-top:10px;text-align:center}.igo-layer-actions-container{width:100%;display:inline-block}.igo-layer-actions-container>div{text-align:center}.igo-layer-button-group{float:center;padding:0 3px}@media only screen and (max-width:450px),only screen and (max-height:450px){.igo-layer-button-group{float:none}}mat-icon.disabled{color:rgba(0,0,0,.38)}"]
                }] }
    ];
    /** @nocollapse */
    OgcFilterFormComponent.ctorParameters = function () { return [
        { type: WktService }
    ]; };
    OgcFilterFormComponent.propDecorators = {
        refreshFilters: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        datasource: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        currentFilter: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return OgcFilterFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterableFormComponent = /** @class */ (function () {
    function OgcFilterableFormComponent() {
        this.color = 'primary';
    }
    Object.defineProperty(OgcFilterableFormComponent.prototype, "refreshFunc", {
        get: /**
         * @return {?}
         */
        function () {
            return this.refreshFilters;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OgcFilterableFormComponent.prototype, "advancedOgcFilters", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.datasource.options.ogcFilters) {
                return this.datasource.options.ogcFilters.advancedOgcFilters;
            }
            return;
        },
        enumerable: true,
        configurable: true
    });
    OgcFilterableFormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-ogc-filterable-form',
                    template: "<igo-list *ngIf=\"!advancedOgcFilters\" [navigation]=\"false\" [selection]=\"true\">\r\n  <igo-ogc-filter-toggle-button igoListItem [datasource]=\"datasource\" [map]=\"map\" [refreshFilters]=\"refreshFunc\">\r\n  </igo-ogc-filter-toggle-button>\r\n</igo-list>\r\n\r\n<igo-list *ngIf=\"advancedOgcFilters\" [navigation]=\"false\" [selection]=\"true\">\r\n  <ng-template ngFor let-currentFilter [ngForOf]=\"this.datasource.options.ogcFilters.interfaceOgcFilters\">\r\n    <igo-ogc-filter-form igoListItem [color]=\"color\" [currentFilter]=\"currentFilter\" [datasource]=\"datasource\"\r\n      [map]=\"map\" [refreshFilters]=\"refreshFunc\">\r\n    </igo-ogc-filter-form>\r\n  </ng-template>\r\n</igo-list>\r\n"
                }] }
    ];
    /** @nocollapse */
    OgcFilterableFormComponent.ctorParameters = function () { return []; };
    OgcFilterableFormComponent.propDecorators = {
        datasource: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        refreshFilters: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return OgcFilterableFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterableItemComponent = /** @class */ (function () {
    function OgcFilterableItemComponent(ogcFilterService, downloadService) {
        this.ogcFilterService = ogcFilterService;
        this.downloadService = downloadService;
        this.color = 'primary';
        this.defaultLogicalParent = 'And';
        this.hasActiveSpatialFilter = false;
        this.filtersAreEditable = true;
        this.filtersCollapsed = true;
        this.hasPushButton = false;
    }
    Object.defineProperty(OgcFilterableItemComponent.prototype, "refreshFunc", {
        get: /**
         * @return {?}
         */
        function () {
            return this.refreshFilters.bind(this);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OgcFilterableItemComponent.prototype, "datasource", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (this.layer.dataSource));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OgcFilterableItemComponent.prototype, "downloadable", {
        get: /**
         * @return {?}
         */
        function () {
            return ((/** @type {?} */ (this.datasource.options))).download;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var ogcFilters = this.datasource.options.ogcFilters;
        if (ogcFilters.pushButtons &&
            ogcFilters.pushButtons.length > 0) {
            if (ogcFilters.advancedOgcFilters === undefined) {
                ogcFilters.advancedOgcFilters = false;
            }
            this.hasPushButton = true;
        }
        switch (this.datasource.options.type) {
            case 'wms':
                this.ogcFilterService.setOgcWMSFiltersOptions(this.datasource);
                break;
            case 'wfs':
                this.ogcFilterService.setOgcWFSFiltersOptions(this.datasource);
                break;
            default:
                break;
        }
        if (ogcFilters) {
            if (ogcFilters.interfaceOgcFilters) {
                this.lastRunOgcFilter = JSON.parse(JSON.stringify(ogcFilters.interfaceOgcFilters));
                if (ogcFilters.interfaceOgcFilters.filter((/**
                 * @param {?} f
                 * @return {?}
                 */
                function (f) { return f.wkt_geometry; })).length >= 1) {
                    this.hasActiveSpatialFilter = true;
                }
            }
            this.filtersAreEditable = ogcFilters.editable
                ? ogcFilters.editable
                : false;
        }
    };
    /**
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.addFilterToSequence = /**
     * @return {?}
     */
    function () {
        this.filtersCollapsed = false;
        /** @type {?} */
        var interfaceOgcFilters = this.datasource.options.ogcFilters.interfaceOgcFilters;
        /** @type {?} */
        var arr = interfaceOgcFilters || [];
        /** @type {?} */
        var lastLevel = arr.length === 0 ? 0 : arr[arr.length - 1].level;
        /** @type {?} */
        var firstFieldName = '';
        if (this.datasource.options.sourceFields.length > 0) {
            firstFieldName =
                this.datasource.options.sourceFields[0].name === undefined
                    ? ''
                    : this.datasource.options.sourceFields[0].name;
        }
        /** @type {?} */
        var fieldNameGeometry;
        /** @type {?} */
        var datasourceOptions = (/** @type {?} */ (this.datasource
            .options));
        if (datasourceOptions.fieldNameGeometry) {
            fieldNameGeometry = datasourceOptions.fieldNameGeometry;
        }
        else if (((/** @type {?} */ (this.datasource.options))).paramsWFS &&
            ((/** @type {?} */ (this.datasource.options))).paramsWFS.fieldNameGeometry) {
            fieldNameGeometry = ((/** @type {?} */ (this.datasource.options))).paramsWFS
                .fieldNameGeometry;
        }
        /** @type {?} */
        var status = arr.length === 0 ? true : false;
        arr.push(new OgcFilterWriter().addInterfaceFilter((/** @type {?} */ ({
            propertyName: firstFieldName,
            operator: 'PropertyIsEqualTo',
            active: status,
            igoSpatialSelector: 'fixedExtent'
        })), fieldNameGeometry, lastLevel, this.defaultLogicalParent));
        this.datasource.options.ogcFilters.interfaceOgcFilters = arr;
    };
    /**
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.openDownload = /**
     * @return {?}
     */
    function () {
        this.downloadService.open(this.layer);
    };
    /**
     * @param {?=} force
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.refreshFilters = /**
     * @param {?=} force
     * @return {?}
     */
    function (force) {
        if (force === true) {
            this.lastRunOgcFilter = undefined;
        }
        /** @type {?} */
        var ogcFilters = this.datasource.options.ogcFilters;
        /** @type {?} */
        var ogcFilterWriter = new OgcFilterWriter();
        /** @type {?} */
        var activeFilters = ogcFilters.interfaceOgcFilters.filter((/**
         * @param {?} f
         * @return {?}
         */
        function (f) { return f.active === true; }));
        if (activeFilters.length === 0) {
            ogcFilters.filters = undefined;
            ogcFilters.filtered = false;
        }
        if (activeFilters.length > 1) {
            activeFilters[0].parentLogical = activeFilters[1].parentLogical;
        }
        if (activeFilters.filter((/**
         * @param {?} af
         * @return {?}
         */
        function (af) { return ['Contains', 'Intersects', 'Within'].indexOf(af.operator) !== -1; })).length === 0) {
            this.hasActiveSpatialFilter = false;
        }
        else {
            this.hasActiveSpatialFilter = true;
        }
        if (!(JSON.stringify(this.lastRunOgcFilter) === JSON.stringify(activeFilters))) {
            if (this.layer.dataSource.options.type === 'wfs') {
                /** @type {?} */
                var ogcDataSource = this.layer.dataSource;
                /** @type {?} */
                var ogcLayer = ogcDataSource.options.ogcFilters;
                ogcLayer.filters = ogcFilterWriter.rebuiltIgoOgcFilterObjectFromSequence(activeFilters);
                this.layer.dataSource.ol.clear();
            }
            else if (this.layer.dataSource.options.type === 'wms' &&
                ogcFilters.enabled) {
                /** @type {?} */
                var rebuildFilter = '';
                if (activeFilters.length >= 1) {
                    /** @type {?} */
                    var ogcDataSource = this.layer.dataSource;
                    /** @type {?} */
                    var ogcLayer = ogcDataSource.options.ogcFilters;
                    ogcLayer.filters = ogcFilterWriter.rebuiltIgoOgcFilterObjectFromSequence(activeFilters);
                    rebuildFilter = ogcFilterWriter.buildFilter(ogcLayer.filters, undefined, undefined, ((/** @type {?} */ (this.layer.dataSource.options))).fieldNameGeometry);
                }
                this.ogcFilterService.filterByOgc((/** @type {?} */ (this.datasource)), rebuildFilter);
                this.datasource.options.ogcFilters.filtered =
                    activeFilters.length === 0 ? false : true;
            }
            this.lastRunOgcFilter = JSON.parse(JSON.stringify(activeFilters));
        }
    };
    /**
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.setVisible = /**
     * @return {?}
     */
    function () {
        this.layer.visible = true;
    };
    /**
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.isAdvancedOgcFilters = /**
     * @return {?}
     */
    function () {
        return this.datasource.options.ogcFilters.advancedOgcFilters;
    };
    /**
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.addFilterDisabled = /**
     * @return {?}
     */
    function () {
        return (!this.datasource.options.sourceFields || this.datasource.options.sourceFields.length === 0);
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.changeOgcFiltersAdvancedOgcFilters = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.datasource.options.ogcFilters.advancedOgcFilters = value;
    };
    /**
     * @param {?} isAdvancedOgcFilters
     * @return {?}
     */
    OgcFilterableItemComponent.prototype.changeOgcFilterType = /**
     * @param {?} isAdvancedOgcFilters
     * @return {?}
     */
    function (isAdvancedOgcFilters) {
        this.changeOgcFiltersAdvancedOgcFilters(isAdvancedOgcFilters.checked);
        if (isAdvancedOgcFilters.checked) {
            this.refreshFilters(true);
        }
    };
    OgcFilterableItemComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-ogc-filterable-item',
                    template: "<span *ngIf=\"filtersAreEditable\">\r\n<mat-list-item>\r\n\r\n  <mat-icon *ngIf=\"ogcFiltersHeaderShown\" class=\"igo-chevron\" mat-list-avatar igoCollapse [target]=\"ogcFilters\" [collapsed]=\"filtersCollapsed\" svgIcon=\"chevron-up\">\r\n  </mat-icon>\r\n  <h4 *ngIf=\"ogcFiltersHeaderShown\" matLine [matTooltip]=\"layer.title\" matTooltipShowDelay=\"500\">{{layer.title}}</h4>\r\n  <h4 *ngIf=\"!ogcFiltersHeaderShown\" matLine></h4>\r\n\r\n  <span *ngIf=\"downloadable && ogcFiltersHeaderShown\">\r\n    <button mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.download.action' | translate\"\r\n      [color]=\"color\" (click)=\"openDownload()\">\r\n      <mat-icon svgIcon=\"download\"></mat-icon>\r\n    </button>\r\n  </span>\r\n  <button *ngIf=\"isAdvancedOgcFilters()\" [disabled]=\"addFilterDisabled()\" mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\"\r\n    [matTooltip]=\"'igo.geo.filter.addFilter' | translate\" [color]=\"color\" (click)=\"addFilterToSequence()\">\r\n    <mat-icon svgIcon=\"plus\"></mat-icon>\r\n  </button>\r\n</mat-list-item>\r\n\r\n<button *ngIf=\"!layer.visible && ogcFiltersHeaderShown\" mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.layer.showLayer' | translate\"\r\ncolor=\"warn\" (click)=\"setVisible()\">\r\n<mat-icon svgIcon=\"error-outline\"></mat-icon>\r\n</button>\r\n\r\n<div #ogcFilters class=\"igo-datasource-filters-container\">\r\n  <igo-ogc-filterable-form [datasource]=\"datasource\" [map]=\"map\" [refreshFilters]=\"refreshFunc\">\r\n  </igo-ogc-filterable-form>\r\n\r\n  <mat-checkbox labelPosition='before' *ngIf=\"hasPushButton\" (change)=\"changeOgcFilterType($event)\"\r\n    [(ngModel)]=\"datasource.options.ogcFilters.advancedOgcFilters\">\r\n    {{'igo.geo.filter.advancedOgcFilters' | translate}}\r\n  </mat-checkbox>\r\n</div>\r\n</span>\r\n",
                    styles: [":host{overflow:hidden}.igo-datasource-filters-container{text-align:center;width:100%;display:inline-block}mat-icon.disabled{color:rgba(0,0,0,.38)}"]
                }] }
    ];
    /** @nocollapse */
    OgcFilterableItemComponent.ctorParameters = function () { return [
        { type: OGCFilterService },
        { type: DownloadService }
    ]; };
    OgcFilterableItemComponent.propDecorators = {
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        ogcFiltersHeaderShown: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return OgcFilterableItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterableListComponent = /** @class */ (function () {
    function OgcFilterableListComponent() {
    }
    OgcFilterableListComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-ogc-filterable-list',
                    template: "<igo-list [navigation]=\"false\" [selection]=\"false\">\r\n  <ng-template ngFor let-layer [ngForOf]=\"layers | filterableDataSource: 'ogc'\">\r\n    <igo-ogc-filterable-item igoListItem [ogcFiltersHeaderShown]=\"true\" [layer]=\"layer\" \r\n    [map]=\"layer.map\" ></igo-ogc-filterable-item>\r\n  </ng-template>\r\n</igo-list>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    OgcFilterableListComponent.ctorParameters = function () { return []; };
    OgcFilterableListComponent.propDecorators = {
        layers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return OgcFilterableListComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterableListBindingDirective = /** @class */ (function () {
    function OgcFilterableListBindingDirective(component, mapService) {
        this.mapService = mapService;
        this.component = component;
    }
    /**
     * @return {?}
     */
    OgcFilterableListBindingDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // Override input layers
        this.component.layers = [];
        this.layers$$ = this.mapService.getMap().layers$.subscribe((/**
         * @param {?} layers
         * @return {?}
         */
        function (layers) {
            _this.component.layers = layers;
        }));
    };
    /**
     * @return {?}
     */
    OgcFilterableListBindingDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.layers$$.unsubscribe();
    };
    OgcFilterableListBindingDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoOgcFilterableListBinding]'
                },] }
    ];
    /** @nocollapse */
    OgcFilterableListBindingDirective.ctorParameters = function () { return [
        { type: OgcFilterableListComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Self"] }] },
        { type: MapService }
    ]; };
    return OgcFilterableListBindingDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterButtonComponent = /** @class */ (function () {
    function OgcFilterButtonComponent() {
        this.color = 'primary';
        this.ogcFilterCollapse = false;
    }
    Object.defineProperty(OgcFilterButtonComponent.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.layer) {
                return;
            }
            return this.layer.dataSource.options;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    OgcFilterButtonComponent.prototype.toggleOgcFilter = /**
     * @return {?}
     */
    function () {
        if (this.layer.isInResolutionsRange) {
            this.ogcFilterCollapse = !this.ogcFilterCollapse;
        }
    };
    OgcFilterButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-ogc-filter-button',
                    template: "<button *ngIf=\"ogcFiltersInLayers && options.ogcFilters && (options.ogcFilters.enabled\r\n&& options.ogcFilters.editable)\"\r\n  mat-icon-button\r\n  collapsibleButton\r\n  tooltip-position=\"below\"\r\n  matTooltipShowDelay=\"500\"\r\n  [matTooltip]=\"'igo.geo.filter.filterBy' | translate\"\r\n  [color]=\"color\"\r\n  (click)=\"toggleOgcFilter()\">\r\n  <mat-icon\r\n    [ngClass]='{disabled: !layer.isInResolutionsRange}'svgIcon=\"filter\"></mat-icon>\r\n</button>\r\n\r\n<div #ogcFilter class=\"igo-layer-actions-container\"\r\n*ngIf=\"options.ogcFilters && (options.ogcFilters.enabled\r\n&& options.ogcFilters.editable)\">\r\n  <igo-ogc-filterable-item\r\n    *ngIf=\"ogcFilterCollapse && options.ogcFilters.enabled\"\r\n    igoListItem\r\n    [ogcFiltersHeaderShown]=\"false\"\r\n    [map]=\"layer.map\"\r\n    [layer]=\"layer\">\r\n  </igo-ogc-filterable-item>\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    OgcFilterButtonComponent.ctorParameters = function () { return []; };
    OgcFilterButtonComponent.propDecorators = {
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        ogcFiltersInLayers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return OgcFilterButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterToggleButtonComponent = /** @class */ (function () {
    function OgcFilterToggleButtonComponent(ogcFilterService) {
        this.ogcFilterService = ogcFilterService;
        this.color = 'primary';
        this.pushButtonBundle = [];
        this.ogcFilterWriter = new OgcFilterWriter();
    }
    /**
     * @return {?}
     */
    OgcFilterToggleButtonComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.datasource.options.ogcFilters &&
            this.datasource.options.ogcFilters.pushButtons) {
            this.pushButtonBundle = (/** @type {?} */ (this.datasource.options.ogcFilters.pushButtons));
        }
        this.applyFilters();
    };
    /**
     * @param {?} pb
     * @return {?}
     */
    OgcFilterToggleButtonComponent.prototype.getToolTip = /**
     * @param {?} pb
     * @return {?}
     */
    function (pb) {
        /** @type {?} */
        var tt;
        if (pb.tooltip) {
            tt = pb.tooltip;
        }
        return tt || '';
    };
    /**
     * @param {?} pb
     * @return {?}
     */
    OgcFilterToggleButtonComponent.prototype.getButtonColor = /**
     * @param {?} pb
     * @return {?}
     */
    function (pb) {
        /** @type {?} */
        var styles;
        if (pb.color) {
            styles = {
                'background-color': pb.enabled ? "rgba(" + pb.color + ")" : "rgba(255,255,255,0)",
            };
        }
        return styles;
    };
    /**
     * @param {?} bundle
     * @return {?}
     */
    OgcFilterToggleButtonComponent.prototype.bundleIsVertical = /**
     * @param {?} bundle
     * @return {?}
     */
    function (bundle) {
        return bundle.vertical ? bundle.vertical : false;
    };
    /**
     * @param {?=} currentOgcPushButton
     * @return {?}
     */
    OgcFilterToggleButtonComponent.prototype.applyFilters = /**
     * @param {?=} currentOgcPushButton
     * @return {?}
     */
    function (currentOgcPushButton) {
        if (currentOgcPushButton) {
            currentOgcPushButton.enabled = !currentOgcPushButton.enabled;
        }
        /** @type {?} */
        var filterQueryString = '';
        /** @type {?} */
        var conditions = [];
        this.pushButtonBundle.map((/**
         * @param {?} buttonBundle
         * @return {?}
         */
        function (buttonBundle) {
            /** @type {?} */
            var bundleCondition = [];
            buttonBundle.ogcPushButtons
                .filter((/**
             * @param {?} ogcpb
             * @return {?}
             */
            function (ogcpb) { return ogcpb.enabled === true; }))
                .forEach((/**
             * @param {?} enabledPb
             * @return {?}
             */
            function (enabledPb) { return bundleCondition.push(enabledPb.filters); }));
            if (bundleCondition.length >= 1) {
                if (bundleCondition.length === 1) {
                    conditions.push(bundleCondition[0]);
                }
                else {
                    conditions.push({ logical: buttonBundle.logical, filters: bundleCondition });
                }
            }
        }));
        if (conditions.length >= 1) {
            filterQueryString = this.ogcFilterWriter
                .buildFilter(conditions.length === 1 ?
                conditions[0] : (/** @type {?} */ ({ logical: 'And', filters: conditions })));
        }
        if (this.datasource.options.type === 'wms') {
            this.ogcFilterService.filterByOgc((/** @type {?} */ (this.datasource)), filterQueryString);
        }
        if (this.datasource.options.type === 'wfs') {
            // TODO: Check how to prevent wfs to refresh when filter icon is pushed...
            this.datasource.ol.clear();
        }
    };
    OgcFilterToggleButtonComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-ogc-filter-toggle-button',
                    template: "<ng-container *ngFor=\"let bundle of pushButtonBundle\">\r\n        <mat-button-toggle-group appearance=\"legacy\" vertical={{bundleIsVertical(bundle)}} multiple=\"true\">\r\n            <mat-button-toggle [ngStyle]=\"getButtonColor(ogcPushButton)\" [checked]=\"ogcPushButton.enabled\"\r\n                (change)=\"applyFilters(ogcPushButton)\" tooltip-position=\"below\" matTooltipShowDelay=\"500\"\r\n                [matTooltip]=\"getToolTip(ogcPushButton)\" *ngFor=\"let ogcPushButton of bundle.ogcPushButtons\"\r\n                [value]=\"ogcPushButton\">{{ogcPushButton.title}}\r\n            </mat-button-toggle>\r\n        </mat-button-toggle-group>\r\n</ng-container>\r\n",
                    styles: [".mat-button-toggle-checked{font-weight:700}.mat-button-toggle-group{margin:5px;flex-wrap:wrap}"]
                }] }
    ];
    /** @nocollapse */
    OgcFilterToggleButtonComponent.ctorParameters = function () { return [
        { type: OGCFilterService }
    ]; };
    OgcFilterToggleButtonComponent.propDecorators = {
        refreshFilters: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        datasource: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return OgcFilterToggleButtonComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoFilterModule = /** @class */ (function () {
    function IgoFilterModule() {
    }
    /**
     * @return {?}
     */
    IgoFilterModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoFilterModule,
            providers: [
                {
                    provide: _angular_material__WEBPACK_IMPORTED_MODULE_66__["MAT_DATE_LOCALE"],
                    useValue: 'fr'
                }
            ]
        };
    };
    IgoFilterModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["ReactiveFormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatAutocompleteModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonToggleModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatCheckboxModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSliderModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSlideToggleModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatOptionModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSelectModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatListModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatDatepickerModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatNativeDateModule"],
                        // MatDatetimepickerModule,
                        // MatNativeDatetimeModule,
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoCollapsibleModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoListModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoKeyValueModule"]
                    ],
                    exports: [
                        FilterableDataSourcePipe,
                        TimeFilterFormComponent,
                        TimeFilterItemComponent,
                        TimeFilterListComponent,
                        TimeFilterListBindingDirective,
                        OgcFilterFormComponent,
                        OgcFilterButtonComponent,
                        OgcFilterToggleButtonComponent,
                        OgcFilterableFormComponent,
                        OgcFilterableItemComponent,
                        OgcFilterableListComponent,
                        OgcFilterableListBindingDirective
                    ],
                    declarations: [
                        FilterableDataSourcePipe,
                        TimeFilterFormComponent,
                        TimeFilterItemComponent,
                        TimeFilterListComponent,
                        TimeFilterListBindingDirective,
                        OgcFilterFormComponent,
                        OgcFilterButtonComponent,
                        OgcFilterToggleButtonComponent,
                        OgcFilterableFormComponent,
                        OgcFilterableItemComponent,
                        OgcFilterableListComponent,
                        OgcFilterableListBindingDirective
                    ],
                    providers: [TimeFilterService, OGCFilterService]
                },] }
    ];
    return IgoFilterModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This input allows a user to draw a new geometry or to edit
 * an existing one on a map.
 */
var GeometryFormFieldComponent = /** @class */ (function () {
    function GeometryFormFieldComponent(cdRef) {
        this.cdRef = cdRef;
        this.geometryType$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](undefined);
        this.drawGuide$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](0);
        this.value$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](undefined);
        /**
         * Whether a geometry type toggle should be displayed
         */
        this.geometryTypeField = false;
        /**
         * Available geometry types
         */
        this.geometryTypes = ['Point', 'LineString', 'Polygon'];
        /**
         * Whether a draw guide field should be displayed
         */
        this.drawGuideField = false;
        /**
         * The drawGuide around the mouse pointer to help drawing
         */
        this.drawGuide = null;
        /**
         * Draw guide placeholder
         */
        this.drawGuidePlaceholder = '';
        /**
         * Whether a measure tooltip should be displayed
         */
        this.measure = false;
    }
    Object.defineProperty(GeometryFormFieldComponent.prototype, "geometryTypeModel", {
        get: /**
         * @return {?}
         */
        function () { return this.geometryType$.value; },
        /**
         * The geometry type model
         */
        set: /**
         * The geometry type model
         * @param {?} value
         * @return {?}
         */
        function (value) { this.geometryType$.next(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GeometryFormFieldComponent.prototype, "drawGuideModel", {
        get: /**
         * @return {?}
         */
        function () { return this.drawGuide$.value; },
        /**
         * The draw guide model
         */
        set: /**
         * The draw guide model
         * @param {?} value
         * @return {?}
         */
        function (value) { this.drawGuide$.next(value); },
        enumerable: true,
        configurable: true
    });
    /**
     * Set up a value stream
     * @internal
     */
    /**
     * Set up a value stream
     * \@internal
     * @return {?}
     */
    GeometryFormFieldComponent.prototype.ngOnInit = /**
     * Set up a value stream
     * \@internal
     * @return {?}
     */
    function () {
        var _this = this;
        this.geometryType$.next(this.geometryType);
        this.drawGuide$.next(this.drawGuide);
        this.value$.next(this.formControl.value ? this.formControl.value : undefined);
        this.value$$ = this.formControl.valueChanges.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            _this.value$.next(value ? value : undefined);
        }));
    };
    /**
     * Unsubscribe to the value stream
     * @internal
     */
    /**
     * Unsubscribe to the value stream
     * \@internal
     * @return {?}
     */
    GeometryFormFieldComponent.prototype.ngOnDestroy = /**
     * Unsubscribe to the value stream
     * \@internal
     * @return {?}
     */
    function () {
        this.value$$.unsubscribe();
    };
    /**
     * @param {?} geometryType
     * @return {?}
     */
    GeometryFormFieldComponent.prototype.onGeometryTypeChange = /**
     * @param {?} geometryType
     * @return {?}
     */
    function (geometryType) {
        if (this.value$.value !== undefined) {
            return;
        }
        this.geometryType$.next(geometryType);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    GeometryFormFieldComponent.prototype.onDrawGuideChange = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.drawGuide$.next(value);
    };
    GeometryFormFieldComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-geometry-form-field',
                    template: "<igo-geometry-form-field-input\r\n  [formControl]=\"formControl\"\r\n  [map]=\"map\"\r\n  [geometryType]=\"geometryType$ | async\"\r\n  [drawGuide]=\"drawGuide$ | async\"\r\n  [measure]=\"measure\"\r\n  [drawStyle]=\"drawStyle\"\r\n  [overlayStyle]=\"overlayStyle\">\r\n</igo-geometry-form-field-input>\r\n\r\n<div *ngIf=\"geometryTypeField\" class=\"geometry-type-toggle\">\r\n  <mat-button-toggle-group\r\n    [disabled]=\"(value$ | async) !== undefined\"\r\n    [ngModel]=\"geometryTypeModel\"\r\n    (ngModelChange)=\"onGeometryTypeChange($event)\">\r\n    <mat-button-toggle\r\n      value=\"Point\"\r\n      [disabled]=\"geometryTypes.indexOf('Point') < 0\">\r\n      {{'igo.geo.geometry.point' | translate}}\r\n    </mat-button-toggle>\r\n    <mat-button-toggle\r\n      value=\"LineString\"\r\n      [disabled]=\"geometryTypes.indexOf('LineString') < 0\">\r\n      {{'igo.geo.geometry.line' | translate}}\r\n    </mat-button-toggle>\r\n    <mat-button-toggle\r\n      value=\"Polygon\"\r\n      [disabled]=\"geometryTypes.indexOf('Polygon') < 0\">\r\n      {{'igo.geo.geometry.polygon' | translate}}\r\n    </mat-button-toggle>\r\n  </mat-button-toggle-group>\r\n</div>\r\n\r\n<mat-form-field *ngIf=\"drawGuideField\" class=\"draw-guide-field\">\r\n  <input\r\n    matInput\r\n    type=\"number\"\r\n    [placeholder]=\"drawGuidePlaceholder\"\r\n    [ngModel]=\"drawGuideModel\"\r\n    (ngModelChange)=\"onDrawGuideChange($event)\">\r\n  <mat-icon\r\n    matPrefix\r\n    [color]=\"'primary'\"\r\n    svgIcon=\"adjust\">    \r\n  </mat-icon>\r\n  <span matSuffix class=\"draw-guide-units\">{{'igo.geo.measure.meters' | translate}}</span>\r\n</mat-form-field>",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{display:block;width:100%}.draw-guide-field,.geometry-type-toggle{width:100%}.geometry-type-toggle{padding:10px;text-align:center}.draw-guide-field mat-icon{margin:0 10px}.draw-guide-units{padding:10px}"]
                }] }
    ];
    /** @nocollapse */
    GeometryFormFieldComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] }
    ]; };
    GeometryFormFieldComponent.propDecorators = {
        formControl: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        geometryType: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        geometryTypeField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        geometryTypes: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        drawGuideField: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        drawGuide: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        drawGuidePlaceholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        measure: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        drawStyle: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        overlayStyle: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    /**
     * This input allows a user to draw a new geometry or to edit
     * an existing one on a map.
     */
    GeometryFormFieldComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["FormFieldComponent"])('geometry'),
        Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__metadata"])("design:paramtypes", [_angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"]])
    ], GeometryFormFieldComponent);
    return GeometryFormFieldComponent;
}());

var _a, _b;
/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var MEASURE_UNIT_AUTO = 'auto';
/** @enum {string} */
var MeasureType = {
    Length: 'length',
    Area: 'area',
};
/** @enum {string} */
var MeasureLengthUnit = {
    Meters: 'meters',
    Kilometers: 'kilometers',
    Miles: 'miles',
    Feet: 'feet',
};
/** @type {?} */
var MeasureLengthUnitAbbreviation = (_a = {},
    _a[MeasureLengthUnit.Meters] = 'm',
    _a[MeasureLengthUnit.Kilometers] = 'km',
    _a[MeasureLengthUnit.Miles] = 'mi',
    _a[MeasureLengthUnit.Feet] = 'ft',
    _a);
/** @enum {string} */
var MeasureAreaUnit = {
    SquareMeters: 'squareMeters',
    SquareKilometers: 'squareKilometers',
    SquareMiles: 'squareMiles',
    SquareFeet: 'squareFeet',
    Hectares: 'hectares',
    Acres: 'acres',
};
/** @type {?} */
var MeasureAreaUnitAbbreviation = (_b = {},
    _b[MeasureAreaUnit.SquareMeters] = 'm²',
    _b[MeasureAreaUnit.SquareKilometers] = 'km²',
    _b[MeasureAreaUnit.SquareMiles] = 'mi²',
    _b[MeasureAreaUnit.SquareFeet] = 'ft²',
    _b[MeasureAreaUnit.Hectares] = 'ha',
    _b[MeasureAreaUnit.Acres] = 'ac',
    _b);

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Convert value from meters to kilometers
 * @param {?} value Value in meters
 * @return {?} Value in kilometers
 */
function metersToKilometers(value) {
    return value * 0.001;
}
/**
 * Convert value from meters to feet
 * @param {?} value Value in meters
 * @return {?} Value in feet
 */
function metersToFeet(value) {
    return value * 3.2808;
}
/**
 * Convert value from meters to miles
 * @param {?} value Value in meters
 * @return {?} Value in miles
 */
function metersToMiles(value) {
    return value * 0.000621;
}
/**
 * Convert value from square meters to square kilometers
 * @param {?} value Value in square meters
 * @return {?} Value in square kilometers
 */
function squareMetersToSquareKilometers(value) {
    return value * 0.000001;
}
/**
 * Convert value from square meters to square miles
 * @param {?} value Value in square meters
 * @return {?} Value in square miles
 */
function squareMetersToSquareMiles(value) {
    return value * 0.0000003861;
}
/**
 * Convert value from square meters to square feet
 * @param {?} value Value in square meters
 * @return {?} Value in square feet
 */
function squareMetersToSquareFeet(value) {
    return value * 10.764;
}
/**
 * Convert value from square meters to hectares
 * @param {?} value Value in square meters
 * @return {?} Value in hectares
 */
function squareMetersToHectares(value) {
    return value * 0.0001;
}
/**
 * Convert value from square meters to acres
 * @param {?} value Value in square meters
 * @return {?} Value in acres
 */
function squareMetersToAcres(value) {
    return value * 0.00024711;
}
/**
 * Convert value from meters to the specified length unit
 * @param {?} value Value in meters
 * @param {?} unit Length unit
 * @return {?} Value in unit
 */
function metersToUnit(value, unit) {
    /** @type {?} */
    var conversionMapper = new Map([
        [MeasureLengthUnit.Meters, (/**
             * @param {?} val
             * @return {?}
             */
            function (val) { return val; })],
        [MeasureLengthUnit.Kilometers, metersToKilometers],
        [MeasureLengthUnit.Miles, metersToMiles],
        [MeasureLengthUnit.Feet, metersToFeet],
    ]);
    /** @type {?} */
    var conversion = conversionMapper.get(unit);
    return conversion ? conversion(value) : undefined;
}
/**
 * Convert value from square meters to the specified area unit
 * @param {?} value Value in meters
 * @param {?} unit Area unit
 * @return {?} Value in unit
 */
function squareMetersToUnit(value, unit) {
    /** @type {?} */
    var conversionMapper = new Map([
        [MeasureAreaUnit.SquareMeters, (/**
             * @param {?} val
             * @return {?}
             */
            function (val) { return val; })],
        [MeasureAreaUnit.SquareKilometers, squareMetersToSquareKilometers],
        [MeasureAreaUnit.SquareMiles, squareMetersToSquareMiles],
        [MeasureAreaUnit.SquareFeet, squareMetersToSquareFeet],
        [MeasureAreaUnit.Hectares, squareMetersToHectares],
        [MeasureAreaUnit.Acres, squareMetersToAcres],
    ]);
    /** @type {?} */
    var conversion = conversionMapper.get(unit);
    return conversion ? conversion(value) : undefined;
}
/**
 * This method format a measure to a readable format
 * @param {?} measure Measure
 * @param {?=} options Formatting options
 * @return {?} Formatted measure
 */
function formatMeasure(measure, options) {
    /** @type {?} */
    var decimal = options.decimal;
    if (decimal === undefined || decimal < 0) {
        decimal = 1;
    }
    /** @type {?} */
    var parts = [];
    if (options.locale !== undefined) {
        parts.push(measure.toLocaleString(options.locale, {
            minimumFractionDigits: decimal,
            maximumFractionDigits: decimal
        }));
    }
    else {
        parts.push(measure.toFixed(decimal).toString());
    }
    if (options.unit !== undefined && options.unitAbbr === true) {
        parts.push(MeasureLengthUnitAbbreviation[options.unit] ||
            MeasureAreaUnitAbbreviation[options.unit]);
    }
    return parts.filter((/**
     * @param {?} p
     * @return {?}
     */
    function (p) { return p !== undefined; })).join(' ');
}
/**
 * Compute best length measure unit for a given measure in meters
 * @param {?} value Value in meters
 * @return {?} Measure unit
 */
function computeBestLengthUnit(value) {
    /** @type {?} */
    var unit = MeasureLengthUnit.Meters;
    /** @type {?} */
    var converted = value;
    /** @type {?} */
    var possibleUnits = [MeasureLengthUnit.Kilometers];
    while (converted > 1000 && possibleUnits.length > 0) {
        unit = possibleUnits.pop();
        converted = metersToUnit(value, unit);
    }
    return unit;
}
/**
 * Compute best length measure unit for a given measure in square meters
 * @param {?} value Value in meters
 * @return {?} Measure unit
 */
function computeBestAreaUnit(value) {
    /** @type {?} */
    var unit = MeasureAreaUnit.SquareMeters;
    /** @type {?} */
    var converted = value;
    /** @type {?} */
    var possibleUnits = [MeasureAreaUnit.SquareKilometers];
    while (converted > 1000000 && possibleUnits.length > 0) {
        unit = possibleUnits.pop();
        converted = squareMetersToUnit(value, unit);
    }
    return unit;
}
/**
 * Create a default style for a measure interaction
 * @return {?} OL style
 */
function createMeasureInteractionStyle() {
    return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
        stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
            color: '#ffcc33',
            lineDash: [10, 10],
            width: 2
        }),
        fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
            color: 'rgba(255, 255, 255, 0.2)'
        }),
        image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
            radius: 5,
            stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                color: '#ffcc33',
            }),
            fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                color: 'rgba(255, 255, 255, 0.2)'
            })
        })
    });
}
/**
 * Create a default style for a measure layer
 * @return {?} OL style
 */
function createMeasureLayerStyle() {
    return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
        stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
            color: '#ffcc33',
            width: 2
        }),
        fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
            color: 'rgba(255, 255, 255, 0.2)'
        })
    });
}
/**
 * Compute the length in meters of an OL geometry with a given projection
 * @param {?} olGeometry Ol geometry
 * @param {?} projection olGeometry's projection
 * @return {?} Length in meters
 */
function measureOlGeometryLength(olGeometry, projection) {
    if (olGeometry instanceof ol_geom_Point__WEBPACK_IMPORTED_MODULE_38__["default"]) {
        return undefined;
    }
    if (olGeometry.getFlatCoordinates().length === 0) {
        return undefined;
    }
    return Object(ol_sphere__WEBPACK_IMPORTED_MODULE_40__["getLength"])(olGeometry, { projection: projection });
}
/**
 * Compute the area in square meters of an OL geometry with a given projection
 * @param {?} olGeometry Ol geometry
 * @param {?} projection olGeometry's projection
 * @return {?} Area in square meters
 */
function measureOlGeometryArea(olGeometry, projection) {
    if (olGeometry instanceof ol_geom_Point__WEBPACK_IMPORTED_MODULE_38__["default"] || olGeometry instanceof ol_geom_LineString__WEBPACK_IMPORTED_MODULE_42__["default"]) {
        return undefined;
    }
    if (olGeometry.getFlatCoordinates().length === 0) {
        return undefined;
    }
    return Object(ol_sphere__WEBPACK_IMPORTED_MODULE_40__["getArea"])(olGeometry, { projection: projection });
}
/**
 * Compute the area (square meters), length (meters) and last length (meters)
 * of an OL geometry with a given projection.
 * @param {?} olGeometry Ol geometry
 * @param {?} projection olGeometry's projection
 * @return {?} Computed measure
 */
function measureOlGeometry(olGeometry, projection) {
    /** @type {?} */
    var length = measureOlGeometryLength(olGeometry, projection);
    /** @type {?} */
    var area = measureOlGeometryArea(olGeometry, projection);
    /** @type {?} */
    var lengths = [];
    /** @type {?} */
    var coordinates = olGeometry.flatCoordinates;
    /** @type {?} */
    var coordinatesLength = coordinates.length;
    for (var i = 0; i <= coordinatesLength - 4; i += 2) {
        /** @type {?} */
        var olSegment = new ol_geom_LineString__WEBPACK_IMPORTED_MODULE_42__["default"]([
            [coordinates[i], coordinates[i + 1]],
            [coordinates[i + 2], coordinates[i + 3]]
        ]);
        lengths.push(measureOlGeometryLength(olSegment, projection));
    }
    return {
        area: area,
        length: length,
        lengths: lengths
    };
}
/**
 * Update an OL geometry midpoints and return an array of those points
 * @param {?} olGeometry OL Geometry
 * @return {?} OL points
 */
function updateOlGeometryMidpoints(olGeometry) {
    /** @type {?} */
    var olMidpoints = getOlGeometryMidpoints(olGeometry);
    // TODO: handle multi geometries
    /** @type {?} */
    var coordinates = olGeometry.flatCoordinates;
    /** @type {?} */
    var midpointsLength = olMidpoints.length;
    for (var i = 0; i < midpointsLength; i++) {
        /** @type {?} */
        var j = i * 2;
        /** @type {?} */
        var olSegment = new ol_geom_LineString__WEBPACK_IMPORTED_MODULE_42__["default"]([
            [coordinates[j], coordinates[j + 1]],
            [coordinates[j + 2], coordinates[j + 3]]
        ]);
        /** @type {?} */
        var midpointCoordinate = olSegment.getCoordinateAt(0.5);
        /** @type {?} */
        var olMidpoint = olMidpoints[i];
        if (olMidpoint !== undefined) {
            olMidpoint.setCoordinates(midpointCoordinate);
        }
        else {
            olMidpoints[i] = new ol_geom_Point__WEBPACK_IMPORTED_MODULE_38__["default"](midpointCoordinate);
        }
    }
    return olMidpoints;
}
/**
 * Clear an OL geometry midpoints and return an array of those points
 * @param {?} olGeometry OL Geometry
 * @return {?}
 */
function clearOlGeometryMidpoints(olGeometry) {
    /** @type {?} */
    var olMidpoints = olGeometry.get('_midpoints') || [];
    /** @type {?} */
    var midpointsLength = olMidpoints.length;
    for (var i = 0; i < midpointsLength; i++) {
        /** @type {?} */
        var olMidpoint = olMidpoints[i];
        if (olMidpoint !== undefined) {
            if (olMidpoint !== undefined) {
                clearOlMidpointTooltip(olMidpoint);
            }
        }
    }
    olGeometry.set('_midpoints', undefined, true);
    return olMidpoints;
}
/**
 * Return an array of  OL geometry midpoints, if any
 * @param {?} olGeometry OL Geometry
 * @return {?} OL points
 */
function getOlGeometryMidpoints(olGeometry) {
    /** @type {?} */
    var expectedNumber = Math.max((olGeometry.flatCoordinates.length / 2) - 1, 0);
    // TODO: This works but it's quite messy. If time permits,
    // clean this. Maybe a Tooltip class could handle that
    /** @type {?} */
    var olMidpoints = olGeometry.get('_midpoints');
    if (olMidpoints === undefined) {
        olMidpoints = new Array(expectedNumber);
        olGeometry.set('_midpoints', olMidpoints, true);
        return olMidpoints;
    }
    if (expectedNumber === olMidpoints.length) {
        return olMidpoints;
    }
    if (expectedNumber > olMidpoints.length) {
        olMidpoints.push.apply(olMidpoints, Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(new Array(expectedNumber - olMidpoints.length)));
        return olMidpoints;
    }
    for (var i = expectedNumber; i < olMidpoints.length; i++) {
        /** @type {?} */
        var olMidpoint = olMidpoints[expectedNumber];
        if (olMidpoint !== undefined) {
            clearOlMidpointTooltip(olMidpoint);
        }
    }
    olMidpoints.splice(expectedNumber);
    return olMidpoints;
}
/**
 * Remove an OL midpoint's tooltip from the map
 * @param {?} olMidpoint OL Point
 * @return {?}
 */
function clearOlMidpointTooltip(olMidpoint) {
    /** @type {?} */
    var olTooltip = olMidpoint.get('_tooltip');
    if (olTooltip !== undefined) {
        /** @type {?} */
        var olMap$$1 = olTooltip.getMap();
        if (olMap$$1 !== undefined) {
            olMap$$1.removeOverlay(olTooltip);
        }
    }
}
/**
 * Add an OL overlay at each midpoint and return an array of those overlays
 * @param {?} olGeometry OL Geometry
 * @return {?} OL overlays
 */
function updateOlTooltipsAtMidpoints(olGeometry) {
    /** @type {?} */
    var olMidpoints = updateOlGeometryMidpoints(olGeometry);
    /** @type {?} */
    var olTooltips = olMidpoints.map((/**
     * @param {?} olMidpoint
     * @return {?}
     */
    function (olMidpoint) {
        /** @type {?} */
        var olTooltip = olMidpoint.get('_tooltip');
        if (olTooltip === undefined) {
            olTooltip = createOlTooltipAtPoint(olMidpoint);
        }
        else {
            olTooltip.setPosition(olMidpoint.flatCoordinates);
        }
        return olTooltip;
    }));
    return olTooltips;
}
/**
 * Return an array of OL overlay at midspoints, if any
 * @param {?} olGeometry OL Geometry
 * @return {?} OL overlays
 */
function getOlTooltipsAtMidpoints(olGeometry) {
    /** @type {?} */
    var olMidpoints = getOlGeometryMidpoints(olGeometry);
    return olMidpoints.map((/**
     * @param {?} olMidpoint
     * @return {?}
     */
    function (olMidpoint) {
        return olMidpoint ? olMidpoint.get('_tooltip') : undefined;
    }));
}
/**
 * Update an OL geometry center and return it
 * @param {?} olGeometry OL Geometry
 * @return {?} OL point
 */
function updateOlGeometryCenter(olGeometry) {
    /** @type {?} */
    var olCenter = olGeometry.get('_center');
    /** @type {?} */
    var centerCoordinate = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getCenter"])(olGeometry.getExtent());
    if (olCenter !== undefined) {
        olCenter.setCoordinates(centerCoordinate);
    }
    else {
        olCenter = new ol_geom_Point__WEBPACK_IMPORTED_MODULE_38__["default"](centerCoordinate);
        olGeometry.set('_center', olCenter);
    }
    return olCenter;
}
/**
 * Add an OL overlay at the center of a geometry and return that overlay
 * @param {?} olGeometry OL Geometry
 * @return {?} OL overlay
 */
function updateOlTooltipAtCenter(olGeometry) {
    /** @type {?} */
    var olCenter = updateOlGeometryCenter(olGeometry);
    /** @type {?} */
    var olTooltip = olCenter.get('_tooltip');
    if (olTooltip === undefined) {
        olTooltip = createOlTooltipAtPoint(olCenter);
    }
    else {
        olTooltip.setPosition(olCenter.flatCoordinates);
    }
    return olTooltip;
}
/**
 * Return an array of OL overlay at midspoints, if any
 * @param {?} olGeometry OL Geometry
 * @return {?} OL overlays
 */
function getOlTooltipAtCenter(olGeometry) {
    /** @type {?} */
    var olCenter = olGeometry.get('_center');
    return olCenter ? olCenter.get('_tooltip') : undefined;
}
/**
 * Get all the tooltips of an OL geometry
 * @param {?} olGeometry OL Geometry
 * @return {?} OL overlays
 */
function getTooltipsOfOlGeometry(olGeometry) {
    /** @type {?} */
    var olTooltips = [].concat(getOlTooltipsAtMidpoints(olGeometry) || []);
    /** @type {?} */
    var olCenterTooltip = getOlTooltipAtCenter(olGeometry);
    if (olCenterTooltip !== undefined) {
        olTooltips.push(olCenterTooltip);
    }
    return olTooltips;
}
/**
 * Create an OL overlay at a point and bind the overlay to the point
 * @param {?} olPoint OL Point
 * @return {?} OL overlay
 */
function createOlTooltipAtPoint(olPoint) {
    /** @type {?} */
    var olTooltip = new ol_Overlay__WEBPACK_IMPORTED_MODULE_39__["default"]({
        element: document.createElement('div'),
        offset: [-30, -10],
        className: [
            'igo-map-tooltip',
            'igo-map-tooltip-measure'
        ].join(' '),
        stopEvent: false
    });
    olTooltip.setPosition(olPoint.flatCoordinates);
    olPoint.set('_tooltip', olTooltip);
    return olTooltip;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/* tslint:disable */
// See this issue: https://github.com/Microsoft/TypeScript/issues/13965
// And the solution: https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work
// for an explanation as to why the prototype is set manually
/* tslint:enable */
var GeometrySliceError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(GeometrySliceError, _super);
    function GeometrySliceError() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return GeometrySliceError;
}(Error));
var GeometrySliceMultiPolygonError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(GeometrySliceMultiPolygonError, _super);
    function GeometrySliceMultiPolygonError() {
        var _this = _super.call(this, 'Can\'t slice a MultiPolygon.') || this;
        Object.setPrototypeOf(_this, GeometrySliceMultiPolygonError.prototype);
        return _this;
    }
    return GeometrySliceMultiPolygonError;
}(GeometrySliceError));
var GeometrySliceLineStringError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(GeometrySliceLineStringError, _super);
    function GeometrySliceLineStringError() {
        var _this = _super.call(this, 'Can\'t slice with a line that has more than 2 points.') || this;
        Object.setPrototypeOf(_this, GeometrySliceLineStringError.prototype);
        return _this;
    }
    return GeometrySliceLineStringError;
}(GeometrySliceError));
var GeometrySliceTooManyIntersectionError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(GeometrySliceTooManyIntersectionError, _super);
    function GeometrySliceTooManyIntersectionError() {
        var _this = _super.call(this, 'More than 2 intersections found between the target polygon and the slicing line.') || this;
        Object.setPrototypeOf(_this, GeometrySliceTooManyIntersectionError.prototype);
        return _this;
    }
    return GeometrySliceTooManyIntersectionError;
}(GeometrySliceError));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Create a default style for draw and modify interactions
 * @param {?=} color Style color (R, G, B)
 * @return {?} OL style
 */
function createDrawInteractionStyle(color) {
    color = color || [0, 153, 255];
    return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
        stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
            color: color.concat([1]),
            width: 2
        }),
        fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
            color: color.concat([0.2])
        }),
        image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
            radius: 8,
            stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
                color: color.concat([1])
            }),
            fill: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
                color: color.concat([0.2])
            })
        })
    });
}
/**
 * Create a default style for drawing a hole
 * @return {?} OL style
 */
function createDrawHoleInteractionStyle() {
    return new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
        stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
            color: [0, 153, 255, 1],
            width: 2
        })
    });
}
/**
 * Slice geometry into two parts
 * @param {?} olGeometry OL geometry
 * @param {?} olSlicer Slicing line
 * @return {?} New OL geometries
 */
function sliceOlGeometry(olGeometry, olSlicer) {
    if (olGeometry instanceof ol_geom_Polygon__WEBPACK_IMPORTED_MODULE_48__["default"]) {
        return sliceOlPolygon(olGeometry, olSlicer);
    }
    else if (olGeometry instanceof ol_geom_LineString__WEBPACK_IMPORTED_MODULE_42__["default"]) {
        return sliceOlLineString(olGeometry, olSlicer);
    }
    return [];
}
/**
 * Slice OL LineString into one or more lines
 * @param {?} olLineString OL line string
 * @param {?} olSlicer Slicing line
 * @return {?} New OL line strings
 */
function sliceOlLineString(olLineString, olSlicer) {
    return [];
}
/**
 * Slice OL Polygon into one or more polygons
 * @param {?} olPolygon OL polygon
 * @param {?} olSlicer Slicing line
 * @return {?} New OL polygons
 */
function sliceOlPolygon(olPolygon, olSlicer) {
    if (olPolygon.getLinearRingCount() > 1) {
        throw new GeometrySliceMultiPolygonError();
    }
    if (olSlicer.getCoordinates().length > 2) {
        throw new GeometrySliceLineStringError();
    }
    /** @type {?} */
    var olGeoJSON = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_65__["default"]();
    /** @type {?} */
    var slicer = olGeoJSON.writeGeometryObject(olSlicer);
    /** @type {?} */
    var outerCoordinates = olPolygon.getLinearRing(0).getCoordinates();
    /** @type {?} */
    var parts = [[], []];
    /** @type {?} */
    var totalIntersectionCount = 0;
    for (var i = 0, ii = outerCoordinates.length - 1; i < ii; i++) {
        /** @type {?} */
        var segmentCoordinates = [outerCoordinates[i], outerCoordinates[i + 1]];
        /** @type {?} */
        var segment = Object(_turf_helpers__WEBPACK_IMPORTED_MODULE_44__["lineString"])(segmentCoordinates);
        /** @type {?} */
        var intersections = _turf_line_intersect__WEBPACK_IMPORTED_MODULE_43___default()(segment, slicer).features;
        /** @type {?} */
        var intersectionCount = intersections.length;
        totalIntersectionCount += intersectionCount;
        if (intersectionCount > 1 || totalIntersectionCount > 2) {
            throw new GeometrySliceTooManyIntersectionError();
        }
        parts[0].push(segmentCoordinates[0]);
        if (intersectionCount === 1) {
            /** @type {?} */
            var intersection = intersections[0].geometry.coordinates;
            parts[0].push(intersection);
            parts[1].push(intersection);
            parts.reverse();
        }
    }
    if (totalIntersectionCount <= 1) {
        return [];
    }
    parts[0].push(parts[0][0]);
    parts[1].push(parts[1][0]);
    return [new ol_geom_Polygon__WEBPACK_IMPORTED_MODULE_48__["default"]([parts[0]]), new ol_geom_Polygon__WEBPACK_IMPORTED_MODULE_48__["default"]([parts[1]])];
}
/**
 * Splice geometry into two parts
 * @param {?} olPolygon
 * @param {?} olLinearRing
 * @return {?} New OL geometries
 */
function addLinearRingToOlPolygon(olPolygon, olLinearRing) {
    // TODO: make some validation and support updating an existing linear ring
    olPolygon.appendLinearRing(olLinearRing);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Control to draw geometries
 */
var  /**
 * Control to draw geometries
 */
DrawControl = /** @class */ (function () {
    function DrawControl(options) {
        this.options = options;
        /**
         * Draw start observable
         */
        this.start$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /**
         * Draw end observable
         */
        this.end$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /**
         * Geometry changes observable
         */
        this.changes$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        if (options.layer !== undefined) {
            this.olOverlayLayer = options.layer;
        }
        else {
            this.olOverlayLayer = this.createOlInnerOverlayLayer();
        }
    }
    Object.defineProperty(DrawControl.prototype, "active", {
        /**
         * Wheter the control is active
         */
        get: /**
         * Wheter the control is active
         * @return {?}
         */
        function () {
            return this.olMap !== undefined;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DrawControl.prototype, "geometryType", {
        /**
         * Geometry type
         * @internal
         */
        get: /**
         * Geometry type
         * \@internal
         * @return {?}
         */
        function () {
            return this.options.geometryType;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DrawControl.prototype, "olOverlaySource", {
        /**
         * OL overlay source
         * @internal
         */
        get: /**
         * OL overlay source
         * \@internal
         * @return {?}
         */
        function () {
            return this.olOverlayLayer.getSource();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Add or remove this control to/from a map.
     * @param map OL Map
     */
    /**
     * Add or remove this control to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    DrawControl.prototype.setOlMap = /**
     * Add or remove this control to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    function (olMap$$1) {
        if (olMap$$1 === undefined) {
            this.clearOlInnerOverlaySource();
            this.removeOlInnerOverlayLayer();
            this.removeOlDrawInteraction();
            this.olMap = olMap$$1;
            return;
        }
        this.olMap = olMap$$1;
        this.addOlInnerOverlayLayer();
        this.addOlDrawInteraction();
    };
    /**
     * Return the overlay source
     */
    /**
     * Return the overlay source
     * @return {?}
     */
    DrawControl.prototype.getSource = /**
     * Return the overlay source
     * @return {?}
     */
    function () {
        return this.olOverlaySource;
    };
    /**
     * Create an overlay source if none is defined in the options
     */
    /**
     * Create an overlay source if none is defined in the options
     * @private
     * @return {?}
     */
    DrawControl.prototype.createOlInnerOverlayLayer = /**
     * Create an overlay source if none is defined in the options
     * @private
     * @return {?}
     */
    function () {
        return new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_52__["default"]({
            source: this.options.source ? this.options.source : new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"](),
            style: this.options.layerStyle,
            zIndex: 500
        });
    };
    /**
     * Clear the overlay layer if it wasn't defined in the options
     */
    /**
     * Clear the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    DrawControl.prototype.removeOlInnerOverlayLayer = /**
     * Clear the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined && this.olMap !== undefined) {
            this.olMap.removeLayer(this.olOverlayLayer);
        }
    };
    /**
     * Add the overlay layer if it wasn't defined in the options
     */
    /**
     * Add the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    DrawControl.prototype.addOlInnerOverlayLayer = /**
     * Add the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined) {
            this.olMap.addLayer(this.olOverlayLayer);
        }
    };
    /**
     * Clear the overlay source if it wasn't defined in the options
     */
    /**
     * Clear the overlay source if it wasn't defined in the options
     * @private
     * @return {?}
     */
    DrawControl.prototype.clearOlInnerOverlaySource = /**
     * Clear the overlay source if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined && this.options.source === undefined) {
            this.olOverlaySource.clear();
        }
    };
    /**
     * Add a draw interaction to the map an set up some listeners
     */
    /**
     * Add a draw interaction to the map an set up some listeners
     * @private
     * @return {?}
     */
    DrawControl.prototype.addOlDrawInteraction = /**
     * Add a draw interaction to the map an set up some listeners
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var olDrawInteraction = new ol_interaction_Draw__WEBPACK_IMPORTED_MODULE_47__["default"]({
            type: this.geometryType,
            source: this.getSource(),
            stopClick: true,
            style: this.options.drawStyle,
            maxPoints: this.options.maxPoints,
            freehand: false,
            freehandCondition: (/**
             * @return {?}
             */
            function () { return false; })
        });
        this.onDrawStartKey = olDrawInteraction
            .on('drawstart', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onDrawStart(event); }));
        this.onDrawEndKey = olDrawInteraction
            .on('drawend', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onDrawEnd(event); }));
        this.olMap.addInteraction(olDrawInteraction);
        this.olDrawInteraction = olDrawInteraction;
    };
    /**
     * Remove the draw interaction
     */
    /**
     * Remove the draw interaction
     * @private
     * @return {?}
     */
    DrawControl.prototype.removeOlDrawInteraction = /**
     * Remove the draw interaction
     * @private
     * @return {?}
     */
    function () {
        if (this.olDrawInteraction === undefined) {
            return;
        }
        this.unsubscribeToKeyDown();
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onDrawStartKey);
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onDrawEndKey);
        if (this.olMap !== undefined) {
            this.olMap.removeInteraction(this.olDrawInteraction);
        }
        this.olDrawInteraction = undefined;
    };
    /**
     * When drawing starts, clear the overlay and start watching from changes
     * @param event Draw start event
     */
    /**
     * When drawing starts, clear the overlay and start watching from changes
     * @private
     * @param {?} event Draw start event
     * @return {?}
     */
    DrawControl.prototype.onDrawStart = /**
     * When drawing starts, clear the overlay and start watching from changes
     * @private
     * @param {?} event Draw start event
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var olGeometry = event.feature.getGeometry();
        this.start$.next(olGeometry);
        this.clearOlInnerOverlaySource();
        this.onChangesKey = olGeometry.on('change', (/**
         * @param {?} olGeometryEvent
         * @return {?}
         */
        function (olGeometryEvent) {
            _this.changes$.next(olGeometryEvent.target);
        }));
        this.subscribeToKeyDown();
    };
    /**
     * When drawing ends, update the geometry observable and start watching from changes
     * @param event Draw end event
     */
    /**
     * When drawing ends, update the geometry observable and start watching from changes
     * @private
     * @param {?} event Draw end event
     * @return {?}
     */
    DrawControl.prototype.onDrawEnd = /**
     * When drawing ends, update the geometry observable and start watching from changes
     * @private
     * @param {?} event Draw end event
     * @return {?}
     */
    function (event) {
        this.unsubscribeToKeyDown();
        if (this.onChangesKey !== undefined) {
            Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onChangesKey);
        }
        this.end$.next(event.feature.getGeometry());
    };
    /**
     * Subscribe to CTRL key down to activate the draw control
     */
    /**
     * Subscribe to CTRL key down to activate the draw control
     * @private
     * @return {?}
     */
    DrawControl.prototype.subscribeToKeyDown = /**
     * Subscribe to CTRL key down to activate the draw control
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.unsubscribeToKeyDown();
        this.keyDown$$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["fromEvent"])(document, 'keydown').subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            // On ESC key down, remove the last vertex
            if (event.keyCode === 27) {
                _this.olDrawInteraction.removeLastPoint();
            }
        }));
    };
    /**
     * Unsubscribe to key down
     */
    /**
     * Unsubscribe to key down
     * @private
     * @return {?}
     */
    DrawControl.prototype.unsubscribeToKeyDown = /**
     * Unsubscribe to key down
     * @private
     * @return {?}
     */
    function () {
        if (this.keyDown$$ !== undefined) {
            this.keyDown$$.unsubscribe();
            this.keyDown$$ = undefined;
        }
    };
    return DrawControl;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Control to modify geometries
 */
var  /**
 * Control to modify geometries
 */
ModifyControl = /** @class */ (function () {
    function ModifyControl(options) {
        this.options = options;
        /**
         * Modify start observable
         */
        this.start$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /**
         * Modify end observable
         */
        this.end$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /**
         * Geometry changes observable
         */
        this.changes$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        this.olModifyInteractionIsActive = false;
        this.olTranslateInteractionIsActive = false;
        this.olDrawInteractionIsActive = false;
        this.removedOlInteractions = [];
        if (options.layer !== undefined) {
            this.olOverlayLayer = options.layer;
        }
        else {
            this.olOverlayLayer = this.createOlInnerOverlayLayer();
        }
        this.olLinearRingsLayer = this.createOlLinearRingsLayer();
    }
    Object.defineProperty(ModifyControl.prototype, "active", {
        /**
         * Wheter the control is active
         */
        get: /**
         * Wheter the control is active
         * @return {?}
         */
        function () {
            return this.olMap !== undefined;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ModifyControl.prototype, "olOverlaySource", {
        /**
         * OL overlay source
         * @internal
         */
        get: /**
         * OL overlay source
         * \@internal
         * @return {?}
         */
        function () {
            return this.olOverlayLayer.getSource();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ModifyControl.prototype, "olLinearRingsSource", {
        /**
         * OL linear rings source
         * @internal
         */
        get: /**
         * OL linear rings source
         * \@internal
         * @return {?}
         */
        function () {
            return this.olLinearRingsLayer.getSource();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Add or remove this control to/from a map.
     * @param map OL Map
     */
    /**
     * Add or remove this control to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    ModifyControl.prototype.setOlMap = /**
     * Add or remove this control to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    function (olMap$$1) {
        if (olMap$$1 === undefined) {
            this.clearOlInnerOverlaySource();
            this.removeOlInnerOverlayLayer();
            this.removeOlModifyInteraction();
            this.removeOlTranslateInteraction();
            this.removeOlDrawInteraction();
            this.olMap = olMap$$1;
            return;
        }
        this.olMap = olMap$$1;
        this.addOlInnerOverlayLayer();
        this.addOlDrawInteraction();
        this.addOlTranslateInteraction();
        this.activateTranslateInteraction();
        this.addOlModifyInteraction();
        this.activateModifyInteraction();
    };
    /**
     * Return the overlay source
     */
    /**
     * Return the overlay source
     * @return {?}
     */
    ModifyControl.prototype.getSource = /**
     * Return the overlay source
     * @return {?}
     */
    function () {
        return this.olOverlaySource;
    };
    /**
     * Add an OL geometry to the overlay and start modifying it
     * @param olGeometry Ol Geometry
     */
    /**
     * Add an OL geometry to the overlay and start modifying it
     * @param {?} olGeometry Ol Geometry
     * @return {?}
     */
    ModifyControl.prototype.setOlGeometry = /**
     * Add an OL geometry to the overlay and start modifying it
     * @param {?} olGeometry Ol Geometry
     * @return {?}
     */
    function (olGeometry) {
        /** @type {?} */
        var olFeature = new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"]({ geometry: olGeometry });
        this.olOverlaySource.clear();
        this.olOverlaySource.addFeature(olFeature);
    };
    /**
     * Create an overlay source if none is defined in the options
     */
    /**
     * Create an overlay source if none is defined in the options
     * @private
     * @return {?}
     */
    ModifyControl.prototype.createOlInnerOverlayLayer = /**
     * Create an overlay source if none is defined in the options
     * @private
     * @return {?}
     */
    function () {
        return new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_52__["default"]({
            source: this.options.source ? this.options.source : new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"](),
            style: this.options.layerStyle,
            zIndex: 500
        });
    };
    /**
     * Add the overlay layer if it wasn't defined in the options
     */
    /**
     * Add the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    ModifyControl.prototype.addOlInnerOverlayLayer = /**
     * Add the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined) {
            this.olMap.addLayer(this.olOverlayLayer);
        }
    };
    /**
     * Clear the overlay layer if it wasn't defined in the options
     */
    /**
     * Clear the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    ModifyControl.prototype.removeOlInnerOverlayLayer = /**
     * Clear the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined && this.olMap !== undefined) {
            this.olMap.removeLayer(this.olOverlayLayer);
        }
    };
    /**
     * Clear the overlay source if it wasn't defined in the options
     */
    /**
     * Clear the overlay source if it wasn't defined in the options
     * @private
     * @return {?}
     */
    ModifyControl.prototype.clearOlInnerOverlaySource = /**
     * Clear the overlay source if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined && this.options.source === undefined) {
            this.olOverlaySource.clear();
        }
    };
    /**
     * @private
     * @return {?}
     */
    ModifyControl.prototype.createOlLinearRingsLayer = /**
     * @private
     * @return {?}
     */
    function () {
        return new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_52__["default"]({
            source: new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"](),
            style: createDrawHoleInteractionStyle(),
            zIndex: 500
        });
    };
    /**
     * Add the linear rings layer
     */
    /**
     * Add the linear rings layer
     * @private
     * @return {?}
     */
    ModifyControl.prototype.addOlLinearRingsLayer = /**
     * Add the linear rings layer
     * @private
     * @return {?}
     */
    function () {
        this.olMap.addLayer(this.olLinearRingsLayer);
    };
    /**
     * Clear the linear rings layer
     */
    /**
     * Clear the linear rings layer
     * @private
     * @return {?}
     */
    ModifyControl.prototype.removeOlLinearRingsLayer = /**
     * Clear the linear rings layer
     * @private
     * @return {?}
     */
    function () {
        this.olMap.removeLayer(this.olLinearRingsLayer);
    };
    /**
     * Clear the linear rings source
     */
    /**
     * Clear the linear rings source
     * @private
     * @return {?}
     */
    ModifyControl.prototype.clearOlLinearRingsSource = /**
     * Clear the linear rings source
     * @private
     * @return {?}
     */
    function () {
        this.olLinearRingsSource.clear(true);
    };
    /**
     * Add a modify interaction to the map an set up some listeners
     */
    /**
     * Add a modify interaction to the map an set up some listeners
     * @private
     * @return {?}
     */
    ModifyControl.prototype.addOlModifyInteraction = /**
     * Add a modify interaction to the map an set up some listeners
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var olModifyInteraction = new ol_interaction_Modify__WEBPACK_IMPORTED_MODULE_45__["default"]({
            source: this.olOverlaySource,
            style: this.options.drawStyle
        });
        this.olModifyInteraction = olModifyInteraction;
    };
    /**
     * Remove the modify interaction
     */
    /**
     * Remove the modify interaction
     * @private
     * @return {?}
     */
    ModifyControl.prototype.removeOlModifyInteraction = /**
     * Remove the modify interaction
     * @private
     * @return {?}
     */
    function () {
        if (this.olModifyInteraction === undefined) {
            return;
        }
        this.deactivateModifyInteraction();
        this.olModifyInteraction = undefined;
    };
    /**
     * @private
     * @return {?}
     */
    ModifyControl.prototype.activateModifyInteraction = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.olModifyInteractionIsActive === true) {
            return;
        }
        this.olModifyInteractionIsActive = true;
        this.onModifyStartKey = this.olModifyInteraction
            .on('modifystart', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onModifyStart(event); }));
        this.onModifyEndKey = this.olModifyInteraction
            .on('modifyend', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onModifyEnd(event); }));
        this.olMap.addInteraction(this.olModifyInteraction);
    };
    /**
     * @private
     * @return {?}
     */
    ModifyControl.prototype.deactivateModifyInteraction = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.olModifyInteractionIsActive === false) {
            return;
        }
        this.olModifyInteractionIsActive = false;
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onModifyStartKey);
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onModifyEndKey);
        if (this.olMap !== undefined) {
            this.olMap.removeInteraction(this.olModifyInteraction);
        }
    };
    /**
     * When modifying starts, clear the overlay and start watching for changes
     * @param event Modify start event
     */
    /**
     * When modifying starts, clear the overlay and start watching for changes
     * @private
     * @param {?} event Modify start event
     * @return {?}
     */
    ModifyControl.prototype.onModifyStart = /**
     * When modifying starts, clear the overlay and start watching for changes
     * @private
     * @param {?} event Modify start event
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var olGeometry = event.features.item(0).getGeometry();
        this.start$.next(olGeometry);
        this.onModifyKey = olGeometry.on('change', (/**
         * @param {?} olGeometryEvent
         * @return {?}
         */
        function (olGeometryEvent) {
            _this.changes$.next(olGeometryEvent.target);
        }));
    };
    /**
     * When modifying ends, update the geometry observable and stop watching for changes
     * @param event Modify end event
     */
    /**
     * When modifying ends, update the geometry observable and stop watching for changes
     * @private
     * @param {?} event Modify end event
     * @return {?}
     */
    ModifyControl.prototype.onModifyEnd = /**
     * When modifying ends, update the geometry observable and stop watching for changes
     * @private
     * @param {?} event Modify end event
     * @return {?}
     */
    function (event) {
        if (this.onModifyKey !== undefined) {
            Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onModifyKey);
        }
        this.end$.next(event.features.item(0).getGeometry());
    };
    /**
     * Subscribe to CTRL key down to activate the draw control
     */
    /**
     * Subscribe to CTRL key down to activate the draw control
     * @private
     * @return {?}
     */
    ModifyControl.prototype.subscribeToKeyDown = /**
     * Subscribe to CTRL key down to activate the draw control
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.keyDown$$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["fromEvent"])(document, 'keydown').subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            // On ESC key down, remove the last vertex
            if (event.keyCode === 27 && _this.olDrawInteractionIsActive === true) {
                _this.olDrawInteraction.removeLastPoint();
            }
        }));
    };
    /**
     * Unsubscribe to key down
     */
    /**
     * Unsubscribe to key down
     * @private
     * @return {?}
     */
    ModifyControl.prototype.unsubscribeToKeyDown = /**
     * Unsubscribe to key down
     * @private
     * @return {?}
     */
    function () {
        if (this.keyDown$$ !== undefined) {
            this.keyDown$$.unsubscribe();
        }
    };
    /**
     * Add a translate interaction to the map an set up some listeners
     */
    /**
     * Add a translate interaction to the map an set up some listeners
     * @private
     * @return {?}
     */
    ModifyControl.prototype.addOlTranslateInteraction = /**
     * Add a translate interaction to the map an set up some listeners
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var olTranslateInteraction = new ol_interaction_Translate__WEBPACK_IMPORTED_MODULE_46__["default"]({
            layers: [this.olOverlayLayer]
        });
        this.olTranslateInteraction = olTranslateInteraction;
    };
    /**
     * Remove the translate interaction
     */
    /**
     * Remove the translate interaction
     * @private
     * @return {?}
     */
    ModifyControl.prototype.removeOlTranslateInteraction = /**
     * Remove the translate interaction
     * @private
     * @return {?}
     */
    function () {
        if (this.olTranslateInteraction === undefined) {
            return;
        }
        this.deactivateTranslateInteraction();
        this.olTranslateInteraction = undefined;
    };
    /**
     * @private
     * @return {?}
     */
    ModifyControl.prototype.activateTranslateInteraction = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.olTranslateInteractionIsActive === true) {
            return;
        }
        this.olTranslateInteractionIsActive = true;
        this.onTranslateStartKey = this.olTranslateInteraction
            .on('translatestart', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onTranslateStart(event); }));
        this.onTranslateEndKey = this.olTranslateInteraction
            .on('translateend', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onTranslateEnd(event); }));
        this.olMap.addInteraction(this.olTranslateInteraction);
    };
    /**
     * @private
     * @return {?}
     */
    ModifyControl.prototype.deactivateTranslateInteraction = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.olTranslateInteractionIsActive === false) {
            return;
        }
        this.olTranslateInteractionIsActive = false;
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onTranslateStartKey);
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onTranslateEndKey);
        if (this.olMap !== undefined) {
            this.olMap.removeInteraction(this.olTranslateInteraction);
        }
    };
    /**
     * When translation starts, clear the overlay and start watching for changes
     * @param event Translate start event
     */
    /**
     * When translation starts, clear the overlay and start watching for changes
     * @private
     * @param {?} event Translate start event
     * @return {?}
     */
    ModifyControl.prototype.onTranslateStart = /**
     * When translation starts, clear the overlay and start watching for changes
     * @private
     * @param {?} event Translate start event
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var olGeometry = event.features.item(0).getGeometry();
        this.start$.next(olGeometry);
        this.onTranslateKey = olGeometry.on('change', (/**
         * @param {?} olGeometryEvent
         * @return {?}
         */
        function (olGeometryEvent) {
            _this.changes$.next(olGeometryEvent.target);
        }));
    };
    /**
     * When translation ends, update the geometry observable and stop watchign for changes
     * @param event Translate end event
     */
    /**
     * When translation ends, update the geometry observable and stop watchign for changes
     * @private
     * @param {?} event Translate end event
     * @return {?}
     */
    ModifyControl.prototype.onTranslateEnd = /**
     * When translation ends, update the geometry observable and stop watchign for changes
     * @private
     * @param {?} event Translate end event
     * @return {?}
     */
    function (event) {
        if (this.onTranslateKey !== undefined) {
            Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onTranslateKey);
        }
        this.end$.next(event.features.item(0).getGeometry());
    };
    /**
     * Add a draw interaction to the map an set up some listeners
     */
    /**
     * Add a draw interaction to the map an set up some listeners
     * @private
     * @return {?}
     */
    ModifyControl.prototype.addOlDrawInteraction = /**
     * Add a draw interaction to the map an set up some listeners
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var olDrawInteraction = new ol_interaction_Draw__WEBPACK_IMPORTED_MODULE_47__["default"]({
            type: 'Polygon',
            source: this.olLinearRingsSource,
            stopClick: true,
            style: createDrawHoleInteractionStyle(),
            condition: (/**
             * @param {?} event
             * @return {?}
             */
            function (event) {
                return _this.getOlGeometry().intersectsCoordinate(event.coordinate);
            })
        });
        this.olDrawInteraction = olDrawInteraction;
        this.subscribeToDrawKeyDown();
    };
    /**
     * Subscribe to CTRL key down to activate the draw control
     */
    /**
     * Subscribe to CTRL key down to activate the draw control
     * @private
     * @return {?}
     */
    ModifyControl.prototype.subscribeToDrawKeyDown = /**
     * Subscribe to CTRL key down to activate the draw control
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.drawKeyDown$$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["fromEvent"])(document, 'keydown').subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (event.keyCode !== 17) {
                return;
            }
            _this.unsubscribeToDrawKeyDown();
            /** @type {?} */
            var olGeometry = _this.getOlGeometry();
            if (!olGeometry || !(olGeometry instanceof ol_geom_Polygon__WEBPACK_IMPORTED_MODULE_48__["default"])) {
                return;
            }
            _this.subscribeToDrawKeyUp();
            _this.deactivateModifyInteraction();
            _this.deactivateTranslateInteraction();
            _this.activateDrawInteraction();
        }));
    };
    /**
     * Subscribe to CTRL key up to deactivate the draw control
     */
    /**
     * Subscribe to CTRL key up to deactivate the draw control
     * @private
     * @return {?}
     */
    ModifyControl.prototype.subscribeToDrawKeyUp = /**
     * Subscribe to CTRL key up to deactivate the draw control
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.drawKeyUp$$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["fromEvent"])(document, 'keyup').subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (event.keyCode !== 17) {
                return;
            }
            _this.unsubscribeToDrawKeyUp();
            _this.subscribeToDrawKeyDown();
            _this.deactivateDrawInteraction();
            _this.activateModifyInteraction();
            _this.activateTranslateInteraction();
        }));
    };
    /**
     * Unsubscribe to draw key down
     */
    /**
     * Unsubscribe to draw key down
     * @private
     * @return {?}
     */
    ModifyControl.prototype.unsubscribeToDrawKeyDown = /**
     * Unsubscribe to draw key down
     * @private
     * @return {?}
     */
    function () {
        if (this.drawKeyDown$$ !== undefined) {
            this.drawKeyDown$$.unsubscribe();
        }
    };
    /**
     * Unsubscribe to key up
     */
    /**
     * Unsubscribe to key up
     * @private
     * @return {?}
     */
    ModifyControl.prototype.unsubscribeToDrawKeyUp = /**
     * Unsubscribe to key up
     * @private
     * @return {?}
     */
    function () {
        if (this.drawKeyUp$$ !== undefined) {
            this.drawKeyUp$$.unsubscribe();
        }
    };
    /**
     * Remove the draw interaction
     */
    /**
     * Remove the draw interaction
     * @private
     * @return {?}
     */
    ModifyControl.prototype.removeOlDrawInteraction = /**
     * Remove the draw interaction
     * @private
     * @return {?}
     */
    function () {
        if (this.olDrawInteraction === undefined) {
            return;
        }
        this.unsubscribeToKeyDown();
        this.unsubscribeToDrawKeyUp();
        this.unsubscribeToDrawKeyDown();
        this.deactivateDrawInteraction();
        this.olDrawInteraction = undefined;
    };
    /**
     * Activate the draw interaction
     */
    /**
     * Activate the draw interaction
     * @private
     * @return {?}
     */
    ModifyControl.prototype.activateDrawInteraction = /**
     * Activate the draw interaction
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.olDrawInteractionIsActive === true) {
            return;
        }
        this.clearOlLinearRingsSource();
        this.addOlLinearRingsLayer();
        this.olMap.getInteractions().forEach((/**
         * @param {?} olInteraction
         * @return {?}
         */
        function (olInteraction) {
            if (olInteraction instanceof ol_interaction_DragBox__WEBPACK_IMPORTED_MODULE_50__["default"]) {
                _this.olMap.removeInteraction(olInteraction);
                _this.removedOlInteractions.push(olInteraction);
            }
        }));
        this.olDrawInteractionIsActive = true;
        this.onDrawStartKey = this.olDrawInteraction
            .on('drawstart', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onDrawStart(event); }));
        this.onDrawEndKey = this.olDrawInteraction
            .on('drawend', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onDrawEnd(event); }));
        this.olMap.addInteraction(this.olDrawInteraction);
    };
    /**
     * Deactivate the draw interaction
     */
    /**
     * Deactivate the draw interaction
     * @private
     * @return {?}
     */
    ModifyControl.prototype.deactivateDrawInteraction = /**
     * Deactivate the draw interaction
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.olDrawInteractionIsActive === false) {
            return;
        }
        this.removeOlLinearRingsLayer();
        this.removedOlInteractions.forEach((/**
         * @param {?} olInteraction
         * @return {?}
         */
        function (olInteraction) {
            _this.olMap.addInteraction(olInteraction);
        }));
        this.olDrawInteractionIsActive = false;
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onDrawStartKey);
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onDrawEndKey);
        if (this.olMap !== undefined) {
            this.olMap.removeInteraction(this.olDrawInteraction);
        }
    };
    /**
     * When draw start, add a new linerar ring to the geometrty and start watching for changes
     * @param event Draw start event
     */
    /**
     * When draw start, add a new linerar ring to the geometrty and start watching for changes
     * @private
     * @param {?} event Draw start event
     * @return {?}
     */
    ModifyControl.prototype.onDrawStart = /**
     * When draw start, add a new linerar ring to the geometrty and start watching for changes
     * @private
     * @param {?} event Draw start event
     * @return {?}
     */
    function (event) {
        var _this = this;
        /** @type {?} */
        var olGeometry = event.feature.getGeometry();
        /** @type {?} */
        var linearRingCoordinates = olGeometry.getLinearRing().getCoordinates();
        this.addLinearRingToOlGeometry(linearRingCoordinates);
        this.start$.next(this.getOlGeometry());
        this.onDrawKey = olGeometry.on('change', (/**
         * @param {?} olGeometryEvent
         * @return {?}
         */
        function (olGeometryEvent) {
            /** @type {?} */
            var _linearRingCoordinates = olGeometryEvent.target.getLinearRing().getCoordinates();
            _this.updateLinearRingOfOlGeometry(_linearRingCoordinates);
            _this.changes$.next(_this.getOlGeometry());
        }));
        this.subscribeToKeyDown();
    };
    /**
     * When translation ends, update the geometry observable and stop watchign for changes
     * @param event Draw end event
     */
    /**
     * When translation ends, update the geometry observable and stop watchign for changes
     * @private
     * @param {?} event Draw end event
     * @return {?}
     */
    ModifyControl.prototype.onDrawEnd = /**
     * When translation ends, update the geometry observable and stop watchign for changes
     * @private
     * @param {?} event Draw end event
     * @return {?}
     */
    function (event) {
        if (this.onDrawKey !== undefined) {
            Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onDrawKey);
        }
        /** @type {?} */
        var linearRingCoordinates = event.feature.getGeometry().getLinearRing().getCoordinates();
        this.updateLinearRingOfOlGeometry(linearRingCoordinates);
        this.clearOlLinearRingsSource();
        this.end$.next(this.getOlGeometry());
        this.unsubscribeToKeyDown();
    };
    /**
     * Add a linear ring to the geometry being modified
     * @param coordinates Linear ring coordinates
     */
    /**
     * Add a linear ring to the geometry being modified
     * @private
     * @param {?} coordinates Linear ring coordinates
     * @return {?}
     */
    ModifyControl.prototype.addLinearRingToOlGeometry = /**
     * Add a linear ring to the geometry being modified
     * @private
     * @param {?} coordinates Linear ring coordinates
     * @return {?}
     */
    function (coordinates) {
        /** @type {?} */
        var olGeometry = this.getOlGeometry();
        /** @type {?} */
        var olLinearRing = new ol_geom_LinearRing__WEBPACK_IMPORTED_MODULE_49__["default"](coordinates);
        addLinearRingToOlPolygon(olGeometry, olLinearRing);
    };
    /**
     * Update the last linear ring of the geometry being modified
     * @param coordinates Linear ring coordinates
     */
    /**
     * Update the last linear ring of the geometry being modified
     * @private
     * @param {?} coordinates Linear ring coordinates
     * @return {?}
     */
    ModifyControl.prototype.updateLinearRingOfOlGeometry = /**
     * Update the last linear ring of the geometry being modified
     * @private
     * @param {?} coordinates Linear ring coordinates
     * @return {?}
     */
    function (coordinates) {
        /** @type {?} */
        var olGeometry = this.getOlGeometry();
        // Remove the last linear ring (the one we are updating)
        /** @type {?} */
        var olLinearRings = olGeometry.getLinearRings().slice(0, -1);
        /** @type {?} */
        var newCoordinates = olLinearRings.map((/**
         * @param {?} olLinearRing
         * @return {?}
         */
        function (olLinearRing) {
            return olLinearRing.getCoordinates();
        }));
        newCoordinates.push(coordinates);
        olGeometry.setCoordinates(newCoordinates);
    };
    /**
     * Get the geometry being modified
     * @returns OL Geometry
     */
    /**
     * Get the geometry being modified
     * @private
     * @return {?} OL Geometry
     */
    ModifyControl.prototype.getOlGeometry = /**
     * Get the geometry being modified
     * @private
     * @return {?} OL Geometry
     */
    function () {
        /** @type {?} */
        var olFeatures = this.olOverlaySource.getFeatures();
        return olFeatures.length > 0 ? olFeatures[0].getGeometry() : undefined;
    };
    return ModifyControl;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Control to modify geometries
 */
var  /**
 * Control to modify geometries
 */
SliceControl = /** @class */ (function () {
    function SliceControl(options) {
        this.options = options;
        /**
         * Slice end observable
         */
        this.end$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /**
         * Slice error, if any
         */
        this.error$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        if (options.layer !== undefined) {
            this.olOverlayLayer = options.layer;
        }
        else {
            this.olOverlayLayer = this.createOlInnerOverlayLayer();
        }
    }
    Object.defineProperty(SliceControl.prototype, "active", {
        /**
         * Wheter the control is active
         */
        get: /**
         * Wheter the control is active
         * @return {?}
         */
        function () {
            return this.olMap !== undefined;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SliceControl.prototype, "olOverlaySource", {
        /**
         * OL overlay source
         * @internal
         */
        get: /**
         * OL overlay source
         * \@internal
         * @return {?}
         */
        function () {
            return this.olOverlayLayer.getSource();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Add or remove this control to/from a map.
     * @param map OL Map
     */
    /**
     * Add or remove this control to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    SliceControl.prototype.setOlMap = /**
     * Add or remove this control to/from a map.
     * @param {?} olMap
     * @return {?}
     */
    function (olMap$$1) {
        if (olMap$$1 === undefined) {
            this.clearOlInnerOverlaySource();
            this.removeOlInnerOverlayLayer();
            this.removeDrawLineControl();
            this.olMap = olMap$$1;
            return;
        }
        this.olMap = olMap$$1;
        this.addOlInnerOverlayLayer();
        this.addDrawLineControl();
    };
    /**
     * Return the overlay source
     */
    /**
     * Return the overlay source
     * @return {?}
     */
    SliceControl.prototype.getSource = /**
     * Return the overlay source
     * @return {?}
     */
    function () {
        return this.olOverlaySource;
    };
    /**
     * Add an OL geometry to the overlay for slicing
     * @param olGeometry Ol Geometry
     */
    /**
     * Add an OL geometry to the overlay for slicing
     * @param {?} olGeometry Ol Geometry
     * @return {?}
     */
    SliceControl.prototype.setOlGeometry = /**
     * Add an OL geometry to the overlay for slicing
     * @param {?} olGeometry Ol Geometry
     * @return {?}
     */
    function (olGeometry) {
        /** @type {?} */
        var olFeature = new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"]({ geometry: olGeometry });
        this.olOverlaySource.clear();
        this.olOverlaySource.addFeature(olFeature);
    };
    /**
     * Create an overlay source if none is defined in the options
     */
    /**
     * Create an overlay source if none is defined in the options
     * @private
     * @return {?}
     */
    SliceControl.prototype.createOlInnerOverlayLayer = /**
     * Create an overlay source if none is defined in the options
     * @private
     * @return {?}
     */
    function () {
        return new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_52__["default"]({
            source: this.options.source ? this.options.source : new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"](),
            style: this.options.layerStyle,
            zIndex: 500
        });
    };
    /**
     * Clear the overlay layer if it wasn't defined in the options
     */
    /**
     * Clear the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    SliceControl.prototype.removeOlInnerOverlayLayer = /**
     * Clear the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined && this.olMap !== undefined) {
            this.olMap.removeLayer(this.olOverlayLayer);
        }
    };
    /**
     * Add the overlay layer if it wasn't defined in the options
     */
    /**
     * Add the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    SliceControl.prototype.addOlInnerOverlayLayer = /**
     * Add the overlay layer if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined) {
            this.olMap.addLayer(this.olOverlayLayer);
        }
    };
    /**
     * Clear the overlay source if it wasn't defined in the options
     */
    /**
     * Clear the overlay source if it wasn't defined in the options
     * @private
     * @return {?}
     */
    SliceControl.prototype.clearOlInnerOverlaySource = /**
     * Clear the overlay source if it wasn't defined in the options
     * @private
     * @return {?}
     */
    function () {
        if (this.options.layer === undefined && this.options.source === undefined) {
            this.olOverlaySource.clear();
        }
    };
    /**
     * Create a draw line control and add it to the map
     */
    /**
     * Create a draw line control and add it to the map
     * @private
     * @return {?}
     */
    SliceControl.prototype.addDrawLineControl = /**
     * Create a draw line control and add it to the map
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.drawLineControl = new DrawControl({
            geometryType: 'LineString',
            drawStyle: this.options.drawStyle,
            maxPoints: 2
        });
        this.drawLineStart$$ = this.drawLineControl.start$
            .subscribe((/**
         * @param {?} olLine
         * @return {?}
         */
        function (olLine) { return _this.onDrawLineStart(olLine); }));
        this.drawLineEnd$$ = this.drawLineControl.end$
            .subscribe((/**
         * @param {?} olLine
         * @return {?}
         */
        function (olLine) { return _this.onDrawLineEnd(olLine); }));
        this.drawLineControl.setOlMap(this.olMap);
    };
    /**
     * Remove draw line control
     */
    /**
     * Remove draw line control
     * @private
     * @return {?}
     */
    SliceControl.prototype.removeDrawLineControl = /**
     * Remove draw line control
     * @private
     * @return {?}
     */
    function () {
        if (this.drawLineControl === undefined) {
            return;
        }
        this.drawLineStart$$.unsubscribe();
        this.drawLineEnd$$.unsubscribe();
        this.drawLineControl.getSource().clear();
        this.drawLineControl.setOlMap(undefined);
    };
    /**
     * Clear the draw source and track the geometry being draw
     * @param olLine Ol linestring or polygon
     */
    /**
     * Clear the draw source and track the geometry being draw
     * @private
     * @param {?} olLine Ol linestring or polygon
     * @return {?}
     */
    SliceControl.prototype.onDrawLineStart = /**
     * Clear the draw source and track the geometry being draw
     * @private
     * @param {?} olLine Ol linestring or polygon
     * @return {?}
     */
    function (olLine) {
        this.drawLineControl.getSource().clear();
    };
    /**
     * Slice the first geometry encountered with the drawn line
     * @param olLine Ol linestring
     */
    /**
     * Slice the first geometry encountered with the drawn line
     * @private
     * @param {?} olLine Ol linestring
     * @return {?}
     */
    SliceControl.prototype.onDrawLineEnd = /**
     * Slice the first geometry encountered with the drawn line
     * @private
     * @param {?} olLine Ol linestring
     * @return {?}
     */
    function (olLine) {
        var _this = this;
        /** @type {?} */
        var olSlicedGeometries = [];
        /** @type {?} */
        var lineExtent = olLine.getExtent();
        /** @type {?} */
        var olFeaturesToRemove = [];
        try {
            this.olOverlaySource.forEachFeatureInExtent(lineExtent, (/**
             * @param {?} olFeature
             * @return {?}
             */
            function (olFeature) {
                /** @type {?} */
                var olGeometry = olFeature.getGeometry();
                /** @type {?} */
                var olParts = sliceOlGeometry(olGeometry, olLine);
                if (olParts.length > 0) {
                    olSlicedGeometries.push.apply(olSlicedGeometries, Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(olParts));
                    olFeaturesToRemove.push(olFeature);
                }
            }));
        }
        catch (e) {
            if (e instanceof GeometrySliceError) {
                this.error$.next(e);
                return;
            }
            else {
                throw e;
            }
        }
        this.drawLineControl.getSource().clear();
        this.olOverlaySource.addFeatures(olSlicedGeometries.map((/**
         * @param {?} olGeometry
         * @return {?}
         */
        function (olGeometry) { return new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"](olGeometry); })));
        olFeaturesToRemove.forEach((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            _this.olOverlaySource.removeFeature(olFeature);
        }));
        this.error$.next(undefined);
        this.end$.next(olSlicedGeometries);
    };
    return SliceControl;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MeasurerDialogComponent = /** @class */ (function () {
    function MeasurerDialogComponent(dialogRef, data) {
        this.dialogRef = dialogRef;
        this.data = data;
        this.measureAreaUnit = MeasureAreaUnit;
        this.measureLengthUnit = MeasureLengthUnit;
    }
    /**
     * @return {?}
     */
    MeasurerDialogComponent.prototype.onNoClick = /**
     * @return {?}
     */
    function () {
        this.dialogRef.close();
    };
    MeasurerDialogComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-measurer-dialog',
                    template: "<div mat-dialog-content>\r\n  <h3>{{'igo.geo.measure.dialog.title' | translate}}</h3>\r\n\r\n  <table>\r\n    <thead>\r\n      <tr>\r\n        <th colspan=\"2\">{{'igo.geo.measure.dialog.length.title' | translate}}</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.lengthInMeters' | translate}}</td>\r\n        <td>{{data.length | measureFormat: measureLengthUnit.Meters}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.lengthInKilometers' | translate}}</td>\r\n        <td>{{data.length | measureFormat: measureLengthUnit.Kilometers}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.lengthInMiles' | translate}}</td>\r\n        <td>{{data.length | measureFormat: measureLengthUnit.Miles}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.lengthInFeet' | translate}}</td>\r\n        <td>{{data.length | measureFormat: measureLengthUnit.Feet}}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <table>\r\n    <thead>\r\n      <tr>\r\n        <th colspan=\"2\">{{'igo.geo.measure.dialog.area.title' | translate}}</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.areaInSquareMeters' | translate}}</td>\r\n        <td>{{data.area | measureFormat: measureAreaUnit.SquareMeters}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.areaInSquareKilometers' | translate}}</td>\r\n        <td>{{data.area | measureFormat:measureAreaUnit.SquareKilometers}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.areaInSquareMiles' | translate}}</td>\r\n        <td>{{data.area | measureFormat: measureAreaUnit.SquareMiles}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.areaInAcres' | translate}}</td>\r\n        <td>{{data.area | measureFormat: measureAreaUnit.Acres}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.areaInHectares' | translate}}</td>\r\n        <td>{{data.area | measureFormat: measureAreaUnit.Hectares}}</td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{'igo.geo.measure.dialog.perimeterInMeters' | translate}}</td>\r\n        <td>{{data.perimeter | measureFormat: measureLengthUnit.Meters}}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n",
                    styles: ["h3{text-align:center;margin:0}table{width:100%;padding:10px}table tbody tr td:last-child{padding-left:10px}"]
                }] }
    ];
    /** @nocollapse */
    MeasurerDialogComponent.ctorParameters = function () { return [
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatDialogRef"] },
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: [_angular_material__WEBPACK_IMPORTED_MODULE_66__["MAT_DIALOG_DATA"],] }] }
    ]; };
    return MeasurerDialogComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Tool to measure lengths and areas
 */
var MeasurerComponent = /** @class */ (function () {
    function MeasurerComponent(languageService, dialog) {
        var _this = this;
        this.languageService = languageService;
        this.dialog = dialog;
        /**
         * Table template
         * \@internal
         */
        this.tableTemplate = {
            selection: true,
            selectMany: true,
            selectionCheckbox: true,
            sort: true,
            columns: [
                {
                    name: 'length',
                    title: this.languageService.translate.instant('igo.geo.measure.lengthHeader'),
                    valueAccessor: (/**
                     * @param {?} feature
                     * @return {?}
                     */
                    function (feature) {
                        /** @type {?} */
                        var unit = _this.activeLengthUnit;
                        /** @type {?} */
                        var measure = metersToUnit(feature.properties.measure.length, unit);
                        return formatMeasure(measure, {
                            decimal: 1,
                            unit: unit,
                            unitAbbr: false,
                            locale: 'fr'
                        });
                    })
                },
                {
                    name: 'area',
                    title: this.languageService.translate.instant('igo.geo.measure.areaHeader'),
                    valueAccessor: (/**
                     * @param {?} feature
                     * @return {?}
                     */
                    function (feature) {
                        /** @type {?} */
                        var unit = _this.activeAreaUnit;
                        /** @type {?} */
                        var measure = squareMetersToUnit(feature.properties.measure.area, unit);
                        return measure ? formatMeasure(measure, {
                            decimal: 1,
                            unit: unit,
                            unitAbbr: false,
                            locale: 'fr'
                        }) : '';
                    })
                }
            ]
        };
        /**
         * Reference to the MeasureType enum
         * \@internal
         */
        this.measureType = MeasureType;
        /**
         * Reference to the AreaMeasureUnit enum
         * \@internal
         */
        this.measureAreaUnit = MeasureAreaUnit;
        /**
         * Reference to the LengthMeasureUnit enum
         * \@internal
         */
        this.measureLengthUnit = MeasureLengthUnit;
        /**
         * Whether measure units should be automatically determined
         * \@internal
         */
        this.measureUnitsAuto = false;
        /**
         * Observable of area
         * \@internal
         */
        this.measure$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"]({});
        /**
         * Observable of selected features
         * \@internal
         */
        this.selectedFeatures$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"]([]);
        /**
         * OL draw source
         * \@internal
         */
        this.showTooltips = true;
        /**
         * Active mlength unit
         */
        this.activeLengthUnit = MeasureLengthUnit.Meters;
        /**
         * Active area unit
         */
        this.activeAreaUnit = MeasureAreaUnit.SquareMeters;
        /**
         * OL draw source
         */
        this.olDrawSource = new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"]();
        this._activeMeasureType = MeasureType.Length;
        /**
         * The minimum length a segment must have to display a tooltip.
         * It also applies to area tooltips.
         */
        this.minSegmentLength = 10;
    }
    Object.defineProperty(MeasurerComponent.prototype, "activeMeasureType", {
        get: /**
         * @return {?}
         */
        function () { return this._activeMeasureType; },
        /**
         * Measure type
         * @internal
         */
        set: /**
         * Measure type
         * \@internal
         * @param {?} value
         * @return {?}
         */
        function (value) { this.setActiveMeasureType(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MeasurerComponent.prototype, "drawControlIsActive", {
        /**
         * Wheter one of the draw control is active
         * @internal
         */
        get: /**
         * Wheter one of the draw control is active
         * \@internal
         * @return {?}
         */
        function () {
            return this.activeDrawControl !== undefined;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MeasurerComponent.prototype, "projection", {
        get: /**
         * @return {?}
         */
        function () {
            return this.map.ol.getView().getProjection();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Add draw controls and activate one
     * @internal
     */
    /**
     * Add draw controls and activate one
     * \@internal
     * @return {?}
     */
    MeasurerComponent.prototype.ngOnInit = /**
     * Add draw controls and activate one
     * \@internal
     * @return {?}
     */
    function () {
        this.initStore();
        this.createDrawLineControl();
        this.createDrawPolygonControl();
        this.createModifyControl();
        this.toggleDrawControl();
        this.onToggleTooltips(this.showTooltips);
        this.updateTooltipsOfOlSource(this.store.source.ol);
    };
    /**
     * Clear the overlay layer and any interaction added by this component.
     * @internal
     */
    /**
     * Clear the overlay layer and any interaction added by this component.
     * \@internal
     * @return {?}
     */
    MeasurerComponent.prototype.ngOnDestroy = /**
     * Clear the overlay layer and any interaction added by this component.
     * \@internal
     * @return {?}
     */
    function () {
        this.setActiveMeasureType(undefined);
        this.deactivateModifyControl();
        this.freezeStore();
    };
    /**
     * Set the measure type
     * @internal
     */
    /**
     * Set the measure type
     * \@internal
     * @param {?} measureType
     * @return {?}
     */
    MeasurerComponent.prototype.onMeasureTypeChange = /**
     * Set the measure type
     * \@internal
     * @param {?} measureType
     * @return {?}
     */
    function (measureType) {
        this.activeMeasureType = measureType;
    };
    /**
     * Activate or deactivate the current draw control
     * @internal
     */
    /**
     * Activate or deactivate the current draw control
     * \@internal
     * @param {?} toggle
     * @return {?}
     */
    MeasurerComponent.prototype.onToggleDrawControl = /**
     * Activate or deactivate the current draw control
     * \@internal
     * @param {?} toggle
     * @return {?}
     */
    function (toggle) {
        if (toggle === true) {
            this.toggleDrawControl();
        }
        else {
            this.deactivateDrawControl();
        }
    };
    /**
     * Activate or deactivate the current draw control
     * @internal
     */
    /**
     * Activate or deactivate the current draw control
     * \@internal
     * @param {?} toggle
     * @return {?}
     */
    MeasurerComponent.prototype.onToggleTooltips = /**
     * Activate or deactivate the current draw control
     * \@internal
     * @param {?} toggle
     * @return {?}
     */
    function (toggle) {
        this.showTooltips = toggle;
        if (toggle === true) {
            this.showTooltipsOfOlSource(this.store.source.ol);
        }
        else {
            this.clearTooltipsOfOlSource(this.store.source.ol);
        }
    };
    /**
     * Activate or deactivate the current draw control
     * @internal
     */
    /**
     * Activate or deactivate the current draw control
     * \@internal
     * @param {?} toggle
     * @return {?}
     */
    MeasurerComponent.prototype.onToggleMeasureUnitsAuto = /**
     * Activate or deactivate the current draw control
     * \@internal
     * @param {?} toggle
     * @return {?}
     */
    function (toggle) {
        this.measureUnitsAuto = toggle;
    };
    /**
     * Set the measure type
     * @internal
     */
    /**
     * Set the measure type
     * \@internal
     * @param {?} unit
     * @return {?}
     */
    MeasurerComponent.prototype.onLengthUnitChange = /**
     * Set the measure type
     * \@internal
     * @param {?} unit
     * @return {?}
     */
    function (unit) {
        this.activeLengthUnit = unit;
        this.table.refresh();
        this.updateTooltipsOfOlSource(this.store.source.ol);
        if (this.activeOlGeometry !== undefined) {
            this.updateTooltipsOfOlGeometry(this.activeOlGeometry);
        }
    };
    /**
     * Set the measure type
     * @internal
     */
    /**
     * Set the measure type
     * \@internal
     * @param {?} unit
     * @return {?}
     */
    MeasurerComponent.prototype.onAreaUnitChange = /**
     * Set the measure type
     * \@internal
     * @param {?} unit
     * @return {?}
     */
    function (unit) {
        this.activeAreaUnit = unit;
        this.table.refresh();
        this.updateTooltipsOfOlSource(this.store.source.ol);
        if (this.activeOlGeometry !== undefined) {
            this.updateTooltipsOfOlGeometry(this.activeOlGeometry);
        }
    };
    /**
     * @return {?}
     */
    MeasurerComponent.prototype.onCalculateClick = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var features = this.selectedFeatures$.value;
        /** @type {?} */
        var area = features.reduce((/**
         * @param {?} sum
         * @param {?} feature
         * @return {?}
         */
        function (sum, feature) {
            return sum + feature.properties.measure.area || 0;
        }), 0);
        /** @type {?} */
        var length = features.reduce((/**
         * @param {?} sum
         * @param {?} feature
         * @return {?}
         */
        function (sum, feature) {
            if (feature.geometry.type === 'Polygon') {
                return sum;
            }
            return sum + feature.properties.measure.length || 0;
        }), 0);
        /** @type {?} */
        var perimeter = features.reduce((/**
         * @param {?} sum
         * @param {?} feature
         * @return {?}
         */
        function (sum, feature) {
            if (feature.geometry.type === 'LineString') {
                return sum;
            }
            return sum + feature.properties.measure.length || 0;
        }), 0);
        this.openDialog({
            area: area,
            length: length,
            perimeter: perimeter
        });
    };
    /**
     * @return {?}
     */
    MeasurerComponent.prototype.onDeleteClick = /**
     * @return {?}
     */
    function () {
        this.store.deleteMany(this.selectedFeatures$.value);
    };
    /**
     * @return {?}
     */
    MeasurerComponent.prototype.onModifyClick = /**
     * @return {?}
     */
    function () {
        if (this.selectedFeatures$.value.length !== 1) {
            return;
        }
        if (this.modifyControl.active === true) {
            this.deactivateModifyControl();
            this.toggleDrawControl();
        }
        else {
            /** @type {?} */
            var feature_1 = this.selectedFeatures$.value[0];
            /** @type {?} */
            var olFeatures = this.store.layer.ol.getSource().getFeatures();
            /** @type {?} */
            var olFeature = olFeatures.find((/**
             * @param {?} _olFeature
             * @return {?}
             */
            function (_olFeature) {
                return _olFeature.get('id') === feature_1.properties.id;
            }));
            if (olFeature !== undefined) {
                this.deactivateDrawControl();
                this.activateModifyControl();
                /** @type {?} */
                var olGeometry = olFeature.getGeometry();
                this.clearTooltipsOfOlGeometry(olGeometry);
                this.modifyControl.setOlGeometry(olGeometry);
            }
        }
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    MeasurerComponent.prototype.openDialog = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.dialog.open(MeasurerDialogComponent, { data: data });
    };
    /**
     * Initialize the measure store and set up some listeners
     * @internal
     */
    /**
     * Initialize the measure store and set up some listeners
     * \@internal
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.initStore = /**
     * Initialize the measure store and set up some listeners
     * \@internal
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var store = this.store;
        /** @type {?} */
        var layer = new VectorLayer({
            title: 'Measures',
            zIndex: 200,
            source: new FeatureDataSource(),
            style: createMeasureLayerStyle(),
            showInLayerList: false,
            exportable: false,
            browsable: false
        });
        tryBindStoreLayer(store, layer);
        tryAddLoadingStrategy(store);
        tryAddSelectionStrategy(store, new FeatureStoreSelectionStrategy({
            map: this.map,
            many: true
        }));
        this.onFeatureAddedKey = store.source.ol.on('addfeature', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            /** @type {?} */
            var feature = event.feature;
            /** @type {?} */
            var olGeometry = feature.getGeometry();
            _this.updateMeasureOfOlGeometry(olGeometry, feature.get('measure'));
        }));
        this.onFeatureRemovedKey = store.source.ol.on('removefeature', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            /** @type {?} */
            var olGeometry = event.feature.getGeometry();
            _this.clearTooltipsOfOlGeometry(olGeometry);
        }));
        this.selectedFeatures$$ = store.stateView.manyBy$((/**
         * @param {?} record
         * @return {?}
         */
        function (record) {
            return record.state.selected === true;
        })).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["skip"])(1) // Skip initial emission
        )
            .subscribe((/**
         * @param {?} records
         * @return {?}
         */
        function (records) {
            if (_this.modifyControl.active === true) {
                _this.deactivateModifyControl();
            }
            _this.selectedFeatures$.next(records.map((/**
             * @param {?} record
             * @return {?}
             */
            function (record) { return record.entity; })));
        }));
    };
    /**
     * Freeze any store, meaning the layer is removed, strategies are deactivated
     * and some listener removed
     * @internal
     */
    /**
     * Freeze any store, meaning the layer is removed, strategies are deactivated
     * and some listener removed
     * \@internal
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.freezeStore = /**
     * Freeze any store, meaning the layer is removed, strategies are deactivated
     * and some listener removed
     * \@internal
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var store = this.store;
        this.selectedFeatures$$.unsubscribe();
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onFeatureAddedKey);
        Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(this.onFeatureRemovedKey);
        this.clearTooltipsOfOlSource(store.source.ol);
        this.map.removeLayer(store.layer);
        store.deactivateStrategyOfType(FeatureStoreLoadingStrategy);
        store.deactivateStrategyOfType(FeatureStoreSelectionStrategy);
    };
    /**
     * Create a draw line control
     */
    /**
     * Create a draw line control
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.createDrawLineControl = /**
     * Create a draw line control
     * @private
     * @return {?}
     */
    function () {
        this.drawLineControl = new DrawControl({
            geometryType: 'LineString',
            source: this.olDrawSource,
            drawStyle: createMeasureInteractionStyle(),
            layerStyle: new ol_style_Style__WEBPACK_IMPORTED_MODULE_41__["default"]({})
        });
    };
    /**
     * Create a draw polygon control
     */
    /**
     * Create a draw polygon control
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.createDrawPolygonControl = /**
     * Create a draw polygon control
     * @private
     * @return {?}
     */
    function () {
        this.drawPolygonControl = new DrawControl({
            geometryType: 'Polygon',
            source: this.olDrawSource,
            drawStyle: createMeasureInteractionStyle(),
            layerStyle: new ol_style_Style__WEBPACK_IMPORTED_MODULE_41__["default"]({})
        });
    };
    /**
     * Create a draw polygon control
     */
    /**
     * Create a draw polygon control
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.createModifyControl = /**
     * Create a draw polygon control
     * @private
     * @return {?}
     */
    function () {
        this.modifyControl = new ModifyControl({
            source: this.olDrawSource,
            drawStyle: createMeasureInteractionStyle(),
            layerStyle: new ol_style_Style__WEBPACK_IMPORTED_MODULE_41__["default"]({})
        });
    };
    /**
     * Activate the right control
     */
    /**
     * Activate the right control
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.toggleDrawControl = /**
     * Activate the right control
     * @private
     * @return {?}
     */
    function () {
        this.deactivateDrawControl();
        // this.deactivateModifyControl();
        if (this.activeMeasureType === MeasureType.Length) {
            this.activateDrawControl(this.drawLineControl);
        }
        else if (this.activeMeasureType === MeasureType.Area) {
            this.activateDrawControl(this.drawPolygonControl);
        }
    };
    /**
     * Activate a given control
     * @param drawControl Draw control
     */
    /**
     * Activate a given control
     * @private
     * @param {?} drawControl Draw control
     * @return {?}
     */
    MeasurerComponent.prototype.activateDrawControl = /**
     * Activate a given control
     * @private
     * @param {?} drawControl Draw control
     * @return {?}
     */
    function (drawControl) {
        var _this = this;
        this.activeDrawControl = drawControl;
        this.drawStart$$ = drawControl.start$
            .subscribe((/**
         * @param {?} olGeometry
         * @return {?}
         */
        function (olGeometry) { return _this.onDrawStart(olGeometry); }));
        this.drawEnd$$ = drawControl.end$
            .subscribe((/**
         * @param {?} olGeometry
         * @return {?}
         */
        function (olGeometry) { return _this.onDrawEnd(olGeometry); }));
        this.drawChanges$$ = drawControl.changes$
            .subscribe((/**
         * @param {?} olGeometry
         * @return {?}
         */
        function (olGeometry) { return _this.onDrawChanges(olGeometry); }));
        drawControl.setOlMap(this.map.ol);
    };
    /**
     * Deactivate the active draw control
     */
    /**
     * Deactivate the active draw control
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.deactivateDrawControl = /**
     * Deactivate the active draw control
     * @private
     * @return {?}
     */
    function () {
        if (this.activeDrawControl === undefined) {
            return;
        }
        this.olDrawSource.clear();
        if (this.drawStart$$ !== undefined) {
            this.drawStart$$.unsubscribe();
        }
        if (this.drawEnd$$ !== undefined) {
            this.drawEnd$$.unsubscribe();
        }
        if (this.drawChanges$$ !== undefined) {
            this.drawChanges$$.unsubscribe();
        }
        this.clearTooltipsOfOlSource(this.olDrawSource);
        if (this.activeOlGeometry !== undefined) {
            this.clearTooltipsOfOlGeometry(this.activeOlGeometry);
        }
        this.activeDrawControl.setOlMap(undefined);
        this.activeDrawControl = undefined;
        this.activeOlGeometry = undefined;
    };
    /**
     * @private
     * @param {?} measureType
     * @return {?}
     */
    MeasurerComponent.prototype.setActiveMeasureType = /**
     * @private
     * @param {?} measureType
     * @return {?}
     */
    function (measureType) {
        this._activeMeasureType = measureType;
        this.clearMeasures();
        this.toggleDrawControl();
    };
    /**
     * Clear the draw source and track the geometry being drawn
     * @param olGeometry Ol linestring or polygon
     */
    /**
     * Clear the draw source and track the geometry being drawn
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    MeasurerComponent.prototype.onDrawStart = /**
     * Clear the draw source and track the geometry being drawn
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    function (olGeometry) {
        this.activeOlGeometry = olGeometry;
    };
    /**
     * Clear the draw source and track the geometry being draw
     * @param olGeometry Ol linestring or polygon
     */
    /**
     * Clear the draw source and track the geometry being draw
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    MeasurerComponent.prototype.onDrawEnd = /**
     * Clear the draw source and track the geometry being draw
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    function (olGeometry) {
        this.activeOlGeometry = undefined;
        this.finalizeMeasureOfOlGeometry(olGeometry);
        this.addFeatureToStore(olGeometry);
        this.clearTooltipsOfOlGeometry(olGeometry);
        this.olDrawSource.clear(true);
    };
    /**
     * Update measures observables and map tooltips
     * @param olGeometry Ol linestring or polygon
     */
    /**
     * Update measures observables and map tooltips
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    MeasurerComponent.prototype.onDrawChanges = /**
     * Update measures observables and map tooltips
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    function (olGeometry) {
        /** @type {?} */
        var measure = measureOlGeometry(olGeometry, this.projection);
        this.updateMeasureOfOlGeometry(olGeometry, Object.assign({}, measure, {
            area: undefined // We don't want to display an area tooltip while drawing.
        }));
        this.measure$.next(measure);
    };
    /**
     * Activate a given control
     * @param modifyControl Modify control
     */
    /**
     * Activate a given control
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.activateModifyControl = /**
     * Activate a given control
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var selection = (/** @type {?} */ (this.store.getStrategyOfType(FeatureStoreSelectionStrategy)));
        selection.deactivate();
        selection.clear();
        this.modifyStart$$ = this.modifyControl.start$
            .subscribe((/**
         * @param {?} olGeometry
         * @return {?}
         */
        function (olGeometry) { return _this.onModifyStart(olGeometry); }));
        this.modifyEnd$$ = this.modifyControl.end$
            .subscribe((/**
         * @param {?} olGeometry
         * @return {?}
         */
        function (olGeometry) { return _this.onModifyEnd(olGeometry); }));
        this.modifyChanges$$ = this.modifyControl.changes$
            .subscribe((/**
         * @param {?} olGeometry
         * @return {?}
         */
        function (olGeometry) { return _this.onModifyChanges(olGeometry); }));
        this.modifyControl.setOlMap(this.map.ol);
    };
    /**
     * Deactivate the active modify control
     */
    /**
     * Deactivate the active modify control
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.deactivateModifyControl = /**
     * Deactivate the active modify control
     * @private
     * @return {?}
     */
    function () {
        if (this.modifyStart$$ !== undefined) {
            this.modifyStart$$.unsubscribe();
        }
        if (this.modifyEnd$$ !== undefined) {
            this.modifyEnd$$.unsubscribe();
        }
        if (this.modifyChanges$$ !== undefined) {
            this.modifyChanges$$.unsubscribe();
        }
        if (this.activeOlGeometry !== undefined) {
            if (this.selectedFeatures$.value.length === 1) {
                /** @type {?} */
                var feature = this.selectedFeatures$.value[0];
                this.addFeatureToStore(this.activeOlGeometry, feature);
            }
            this.finalizeMeasureOfOlGeometry(this.activeOlGeometry);
        }
        this.olDrawSource.clear();
        this.store.activateStrategyOfType(FeatureStoreSelectionStrategy);
        this.activeOlGeometry = undefined;
        this.modifyControl.setOlMap(undefined);
    };
    /**
     * Clear the draw source and track the geometry being drawn
     * @param olGeometry Ol linestring or polygon
     */
    /**
     * Clear the draw source and track the geometry being drawn
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    MeasurerComponent.prototype.onModifyStart = /**
     * Clear the draw source and track the geometry being drawn
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    function (olGeometry) {
        this.onDrawStart(olGeometry);
    };
    /**
     * Update measures observables and map tooltips
     * @param olGeometry Ol linestring or polygon
     */
    /**
     * Update measures observables and map tooltips
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    MeasurerComponent.prototype.onModifyChanges = /**
     * Update measures observables and map tooltips
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    function (olGeometry) {
        this.onDrawChanges(olGeometry);
    };
    /**
     * Clear the draw source and track the geometry being draw
     * @param olGeometry Ol linestring or polygon
     */
    /**
     * Clear the draw source and track the geometry being draw
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    MeasurerComponent.prototype.onModifyEnd = /**
     * Clear the draw source and track the geometry being draw
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    function (olGeometry) {
        this.finalizeMeasureOfOlGeometry(olGeometry);
    };
    /**
     * @private
     * @param {?} olGeometry
     * @return {?}
     */
    MeasurerComponent.prototype.finalizeMeasureOfOlGeometry = /**
     * @private
     * @param {?} olGeometry
     * @return {?}
     */
    function (olGeometry) {
        /** @type {?} */
        var measure = measureOlGeometry(olGeometry, this.projection);
        if (olGeometry instanceof ol_geom_Polygon__WEBPACK_IMPORTED_MODULE_48__["default"]) {
            measure = Object.assign({}, measure, {
                lengths: [] // We don't want to display an area tooltip while drawing.
            });
        }
        this.updateMeasureOfOlGeometry(olGeometry, measure);
    };
    /**
     * Update measures observables
     * @param olGeometry Ol linestring or polygon
     * @param measure Measure
     */
    /**
     * Update measures observables
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @param {?} measure Measure
     * @return {?}
     */
    MeasurerComponent.prototype.updateMeasureOfOlGeometry = /**
     * Update measures observables
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @param {?} measure Measure
     * @return {?}
     */
    function (olGeometry, measure) {
        olGeometry.setProperties({ _measure: measure }, true);
        this.updateTooltipsOfOlGeometry(olGeometry);
    };
    /**
     * Clear the measures observables
     */
    /**
     * Clear the measures observables
     * @private
     * @return {?}
     */
    MeasurerComponent.prototype.clearMeasures = /**
     * Clear the measures observables
     * @private
     * @return {?}
     */
    function () {
        this.measure$.next({});
    };
    /**
     * Add a feature with measures to the store. The loading stragegy of the store
     * will trigger and add the feature to the map.
     * @internal
     */
    /**
     * Add a feature with measures to the store. The loading stragegy of the store
     * will trigger and add the feature to the map.
     * \@internal
     * @private
     * @param {?} olGeometry
     * @param {?=} feature
     * @return {?}
     */
    MeasurerComponent.prototype.addFeatureToStore = /**
     * Add a feature with measures to the store. The loading stragegy of the store
     * will trigger and add the feature to the map.
     * \@internal
     * @private
     * @param {?} olGeometry
     * @param {?=} feature
     * @return {?}
     */
    function (olGeometry, feature) {
        /** @type {?} */
        var featureId = feature ? feature.properties.id : Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])();
        /** @type {?} */
        var projection = this.map.ol.getView().getProjection();
        /** @type {?} */
        var geometry = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_65__["default"]().writeGeometryObject(olGeometry, {
            featureProjection: projection,
            dataProjection: projection
        });
        this.store.update({
            type: FEATURE,
            geometry: geometry,
            projection: projection.getCode(),
            properties: {
                id: featureId,
                measure: olGeometry.get('_measure')
            },
            meta: {
                id: featureId
            }
        });
    };
    /**
     * Update all the tooltips of an OL geometry
     * @param olGeometry OL Geometry
     * @param lengths Lengths of the OL geometry's segments
     * @param measureUnit Display tooltip measure in those units
     */
    /**
     * Update all the tooltips of an OL geometry
     * @private
     * @param {?} olGeometry OL Geometry
     * @return {?}
     */
    MeasurerComponent.prototype.updateTooltipsOfOlGeometry = /**
     * Update all the tooltips of an OL geometry
     * @private
     * @param {?} olGeometry OL Geometry
     * @return {?}
     */
    function (olGeometry) {
        /** @type {?} */
        var measure = olGeometry.get('_measure');
        /** @type {?} */
        var lengths = measure.lengths;
        /** @type {?} */
        var area = measure.area;
        /** @type {?} */
        var olMidpointsTooltips = updateOlTooltipsAtMidpoints(olGeometry);
        if (lengths.length === olMidpointsTooltips.length) {
            for (var i = 0; i < olMidpointsTooltips.length; i++) {
                /** @type {?} */
                var length_1 = lengths[i];
                if (length_1 !== undefined) {
                    this.updateOlTooltip(olMidpointsTooltips[i], metersToUnit(length_1, this.activeLengthUnit), this.activeLengthUnit, MeasureType.Length);
                }
            }
        }
        if (area !== undefined) {
            this.updateOlTooltip(updateOlTooltipAtCenter(olGeometry), squareMetersToUnit(area, this.activeAreaUnit), this.activeAreaUnit, MeasureType.Area);
        }
    };
    /**
     * Show the map tooltips of a geoemtry
     */
    /**
     * Show the map tooltips of a geoemtry
     * @private
     * @param {?} olGeometry
     * @return {?}
     */
    MeasurerComponent.prototype.showTooltipsOfOlGeometry = /**
     * Show the map tooltips of a geoemtry
     * @private
     * @param {?} olGeometry
     * @return {?}
     */
    function (olGeometry) {
        var _this = this;
        getTooltipsOfOlGeometry(olGeometry).forEach((/**
         * @param {?} olTooltip
         * @return {?}
         */
        function (olTooltip) {
            if (_this.shouldShowTooltip(olTooltip)) {
                _this.map.ol.addOverlay(olTooltip);
            }
        }));
    };
    /**
     * Clear the tooltips of an OL geometrys
     * @param olGeometry OL geometry with tooltips
     */
    /**
     * Clear the tooltips of an OL geometrys
     * @private
     * @param {?} olGeometry OL geometry with tooltips
     * @return {?}
     */
    MeasurerComponent.prototype.clearTooltipsOfOlGeometry = /**
     * Clear the tooltips of an OL geometrys
     * @private
     * @param {?} olGeometry OL geometry with tooltips
     * @return {?}
     */
    function (olGeometry) {
        var _this = this;
        getTooltipsOfOlGeometry(olGeometry).forEach((/**
         * @param {?} olTooltip
         * @return {?}
         */
        function (olTooltip) {
            if (olTooltip !== undefined && olTooltip.getMap() !== undefined) {
                _this.map.ol.removeOverlay(olTooltip);
            }
        }));
    };
    /**
     * Show the map tooltips of all the geometries of a source
     */
    /**
     * Show the map tooltips of all the geometries of a source
     * @private
     * @param {?} olSource
     * @return {?}
     */
    MeasurerComponent.prototype.updateTooltipsOfOlSource = /**
     * Show the map tooltips of all the geometries of a source
     * @private
     * @param {?} olSource
     * @return {?}
     */
    function (olSource) {
        var _this = this;
        olSource.forEachFeature((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            _this.updateTooltipsOfOlGeometry(olFeature.getGeometry());
        }));
    };
    /**
     * Show the map tooltips of all the geometries of a source
     */
    /**
     * Show the map tooltips of all the geometries of a source
     * @private
     * @param {?} olSource
     * @return {?}
     */
    MeasurerComponent.prototype.showTooltipsOfOlSource = /**
     * Show the map tooltips of all the geometries of a source
     * @private
     * @param {?} olSource
     * @return {?}
     */
    function (olSource) {
        var _this = this;
        olSource.forEachFeature((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            _this.showTooltipsOfOlGeometry(olFeature.getGeometry());
        }));
    };
    /**
     * Clear the map tooltips
     * @param olDrawSource OL vector source
     */
    /**
     * Clear the map tooltips
     * @private
     * @param {?} olSource
     * @return {?}
     */
    MeasurerComponent.prototype.clearTooltipsOfOlSource = /**
     * Clear the map tooltips
     * @private
     * @param {?} olSource
     * @return {?}
     */
    function (olSource) {
        var _this = this;
        olSource.forEachFeature((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            /** @type {?} */
            var olGeometry = olFeature.getGeometry();
            if (olGeometry !== undefined) {
                _this.clearTooltipsOfOlGeometry(olFeature.getGeometry());
            }
        }));
    };
    /**
     * Update an OL tooltip properties and inner HTML and add it to the map if possible
     * @param olTooltip OL tooltip
     * @param measure The measure valeu ti display
     * @param measureUnit Display tooltip measure in those units
     */
    /**
     * Update an OL tooltip properties and inner HTML and add it to the map if possible
     * @private
     * @param {?} olTooltip OL tooltip
     * @param {?} measure The measure valeu ti display
     * @param {?} unit
     * @param {?} type
     * @return {?}
     */
    MeasurerComponent.prototype.updateOlTooltip = /**
     * Update an OL tooltip properties and inner HTML and add it to the map if possible
     * @private
     * @param {?} olTooltip OL tooltip
     * @param {?} measure The measure valeu ti display
     * @param {?} unit
     * @param {?} type
     * @return {?}
     */
    function (olTooltip, measure, unit, type) {
        olTooltip.setProperties({ _measure: measure, _unit: unit, _type: type }, true);
        olTooltip.getElement().innerHTML = this.computeTooltipInnerHTML(olTooltip);
        if (this.shouldShowTooltip(olTooltip)) {
            this.map.ol.addOverlay(olTooltip);
        }
    };
    /**
     * Compute a tooltip's content
     * @param olTooltip OL overlay
     * @returns Inner HTML
     */
    /**
     * Compute a tooltip's content
     * @private
     * @param {?} olTooltip OL overlay
     * @return {?} Inner HTML
     */
    MeasurerComponent.prototype.computeTooltipInnerHTML = /**
     * Compute a tooltip's content
     * @private
     * @param {?} olTooltip OL overlay
     * @return {?} Inner HTML
     */
    function (olTooltip) {
        /** @type {?} */
        var properties = (/** @type {?} */ (olTooltip.getProperties()));
        return formatMeasure(properties._measure, {
            decimal: 1,
            unit: properties._unit,
            unitAbbr: true,
            locale: 'fr'
        });
    };
    /**
     * Whether a tooltip should be showned based on the length
     * of the segment it is bound to.
     * @param olTooltip OL overlay
     * @returns True if the tooltip should be shown
     */
    /**
     * Whether a tooltip should be showned based on the length
     * of the segment it is bound to.
     * @private
     * @param {?} olTooltip OL overlay
     * @return {?} True if the tooltip should be shown
     */
    MeasurerComponent.prototype.shouldShowTooltip = /**
     * Whether a tooltip should be showned based on the length
     * of the segment it is bound to.
     * @private
     * @param {?} olTooltip OL overlay
     * @return {?} True if the tooltip should be shown
     */
    function (olTooltip) {
        if (this.showTooltips === false) {
            return false;
        }
        /** @type {?} */
        var properties = (/** @type {?} */ (olTooltip.getProperties()));
        /** @type {?} */
        var measure = properties._measure;
        if (measure === undefined) {
            return false;
        }
        if (properties._unit === MeasureType.Length) {
            /** @type {?} */
            var minSegmentLength = metersToUnit(this.minSegmentLength, properties._unit) || 0;
            return measure > Math.max(minSegmentLength, 0);
        }
        return true;
    };
    MeasurerComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-measurer',
                    template: "<div>\r\n  <div class=\"measure-type-toggle\">\r\n    <mat-button-toggle-group\r\n      [value]=\"activeMeasureType\"\r\n      (change)=\"onMeasureTypeChange($event.value)\">\r\n      <mat-button-toggle [value]=\"measureType.Length\">\r\n        {{('igo.geo.measure.' + measureType.Length) | translate}}\r\n      </mat-button-toggle>\r\n      <mat-button-toggle [value]=\"measureType.Area\">\r\n        {{('igo.geo.measure.' + measureType.Area) | translate}}\r\n      </mat-button-toggle>\r\n    </mat-button-toggle-group>\r\n  </div>\r\n\r\n  <div class=\"measure-options\">\r\n    <mat-slide-toggle\r\n      [checked]=\"drawControlIsActive\"\r\n      [labelPosition]=\"'before'\"\r\n      (change)=\"onToggleDrawControl($event.checked)\">\r\n      {{'igo.geo.measure.toggleMeasure' | translate}}\r\n    </mat-slide-toggle>\r\n\r\n    <mat-slide-toggle\r\n      [checked]=\"showTooltips\"\r\n      [labelPosition]=\"'before'\"\r\n      (change)=\"onToggleTooltips($event.checked)\">\r\n      {{'igo.geo.measure.toggleMapTooltips' | translate}}\r\n    </mat-slide-toggle>\r\n\r\n    <mat-slide-toggle\r\n      [checked]=\"measureUnitsAuto\"\r\n      [labelPosition]=\"'before'\"\r\n      (change)=\"onToggleMeasureUnitsAuto($event.checked)\">\r\n      {{'igo.geo.measure.toggleAutoUnits' | translate}}\r\n    </mat-slide-toggle>\r\n  </div>\r\n\r\n  <ng-container *ngIf=\"measure$ | async as measure\">\r\n    <igo-measurer-item\r\n      [measureType]=\"measureType.Length\"\r\n      [measureUnit]=\"measureLengthUnit.Meters\"\r\n      [measure]=\"measure.length\"\r\n      [auto]=\"measureUnitsAuto\"\r\n      [placeholder]=\"(activeMeasureType === measureType.Area ? 'igo.geo.measure.perimeter' : 'igo.geo.measure.length') | translate\"\r\n      (measureUnitChange)=\"onLengthUnitChange($event)\">\r\n    </igo-measurer-item>\r\n\r\n    <igo-measurer-item\r\n      [measureType]=\"measureType.Area\"\r\n      [measureUnit]=\"measureAreaUnit.SquareMeters\"\r\n      [measure]=\"measure.area\"\r\n      [auto]=\"measureUnitsAuto\"\r\n      [placeholder]=\"'igo.geo.measure.area' | translate\"\r\n      (measureUnitChange)=\"onAreaUnitChange($event)\">\r\n    </igo-measurer-item>\r\n  </ng-container>\r\n\r\n  <div class=\"measure-store-buttons\">\r\n    <button\r\n      mat-icon-button\r\n      [matTooltip]=\"'igo.geo.measure.actionbar.calculate.tooltip' | translate\"\r\n      [disabled]=\"(selectedFeatures$ | async).length === 0\"\r\n      (click)=\"onCalculateClick()\">\r\n      <mat-icon svgIcon=\"calculator\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      mat-icon-button\r\n      [matTooltip]=\"'igo.geo.measure.actionbar.delete.tooltip' | translate\"\r\n      [disabled]=\"(selectedFeatures$ | async).length === 0\"\r\n      (click)=\"onDeleteClick()\">\r\n      <mat-icon svgIcon=\"delete\"></mat-icon>\r\n    </button>\r\n\r\n    <!--button\r\n      mat-icon-button\r\n      [matTooltip]=\"'igo.geo.measure.actionbar.modify.tooltip' | translate\"\r\n      [disabled]=\"(selectedFeatures$ | async).length !== 1\"\r\n      (click)=\"onModifyClick()\">\r\n      <mat-icon svgIcon=\"edit\"></mat-icon>\r\n    </button-->\r\n  </div>\r\n\r\n  <igo-entity-table\r\n    #table\r\n    class=\"table-compact\"\r\n    [store]=\"store\"\r\n    [template]=\"tableTemplate\">\r\n  </igo-entity-table>\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [".measure-type-toggle{padding:10px;text-align:center}.measure-type-toggle mat-button-toggle-group{width:100%}.measure-type-toggle mat-button-toggle-group mat-button-toggle{width:50%}.measure-options{overflow-x:hidden}.measure-options mat-slide-toggle{width:100%;margin:10px}.measure-options mat-slide-toggle ::ng-deep .mat-slide-toggle-content{width:calc(100% - 60px);font-size:16px}.measure-store-buttons{width:100%;border-top:1px solid #ddd;border-bottom:1px solid #ddd}.measure-store-buttons button:first-of-type{margin-left:14px}"]
                }] }
    ];
    /** @nocollapse */
    MeasurerComponent.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] },
        { type: _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatDialog"] }
    ]; };
    MeasurerComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        activeMeasureType: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        minSegmentLength: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        table: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ViewChild"], args: ['table',] }]
    };
    return MeasurerComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This pipe returns a measure converted from meters (or square meters)
 * to the specified unit. It also keeps a certain number of decimals.
 */
var MeasureFormatPipe = /** @class */ (function () {
    function MeasureFormatPipe() {
    }
    /**
     * @ignore
     */
    /**
     * @ignore
     * @param {?} value
     * @param {?} unit
     * @param {?=} unitAbbr
     * @param {?=} decimal
     * @return {?}
     */
    MeasureFormatPipe.prototype.transform = /**
     * @ignore
     * @param {?} value
     * @param {?} unit
     * @param {?=} unitAbbr
     * @param {?=} decimal
     * @return {?}
     */
    function (value, unit, unitAbbr, decimal) {
        if (unitAbbr === void 0) { unitAbbr = false; }
        if (decimal === void 0) { decimal = 1; }
        /** @type {?} */
        var out;
        if (Object.values(MeasureAreaUnit).indexOf(unit) >= 0) {
            out = squareMetersToUnit(value, (/** @type {?} */ (unit)));
        }
        else if (Object.values(MeasureLengthUnit).indexOf(unit) >= 0) {
            out = metersToUnit(value, (/** @type {?} */ (unit)));
        }
        return out ? formatMeasure(out, {
            decimal: 1,
            unit: unit,
            unitAbbr: unitAbbr,
            locale: 'fr'
        }) : out;
    };
    MeasureFormatPipe.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Pipe"], args: [{
                    name: 'measureFormat'
                },] }
    ];
    return MeasureFormatPipe;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This input allows a user to draw a new geometry or to edit
 * an existing one on a map. A text input is also displayed in the
 * form with some instructions.
 * This is still WIP.
 */
var GeometryFormFieldInputComponent = /** @class */ (function () {
    function GeometryFormFieldInputComponent(cdRef, ngControl) {
        this.cdRef = cdRef;
        this.ngControl = ngControl;
        this.olGeoJSON = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_65__["default"]();
        this.ready = false;
        this.olTooltip = ol_Overlay__WEBPACK_IMPORTED_MODULE_39__["default"];
        /**
         * The drawGuide around the mouse pointer to help drawing
         */
        this.drawGuide = null;
        /**
         * Whether a measure tooltip should be displayed
         */
        this.measure = false;
        this.onChange = (/**
         * @return {?}
         */
        function () { });
        this.onTouched = (/**
         * @return {?}
         */
        function () { });
        if (this.ngControl !== undefined) {
            // Setting the value accessor directly (instead of using
            // the providers) to avoid running into a circular import.
            this.ngControl.valueAccessor = this;
        }
    }
    Object.defineProperty(GeometryFormFieldInputComponent.prototype, "geometryType", {
        get: /**
         * @return {?}
         */
        function () { return this._geometryType; },
        /**
         * The geometry type
         */
        set: /**
         * The geometry type
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._geometryType = value;
            if (this.ready === false) {
                return;
            }
            this.deactivateControl();
            this.createDrawControl();
            this.toggleControl();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GeometryFormFieldInputComponent.prototype, "drawStyle", {
        get: /**
         * @return {?}
         */
        function () { return this._drawStyle; },
        /**
         * Style for the draw control (applies while the geometry is being drawn)
         */
        set: /**
         * Style for the draw control (applies while the geometry is being drawn)
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._drawStyle = value || createDrawInteractionStyle();
            if (this.isStyleWithRadius(this.drawStyle)) {
                this.defaultDrawStyleRadius = this.drawStyle.getImage().getRadius();
            }
            else {
                this.defaultDrawStyleRadius = null;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GeometryFormFieldInputComponent.prototype, "overlayStyle", {
        get: /**
         * @return {?}
         */
        function () {
            return this._overlayStyle || this.drawStyle;
        },
        /**
         * Style for the overlay layer (applies once the geometry is added to the map)
         * If not specified, drawStyle applies
         */
        set: /**
         * Style for the overlay layer (applies once the geometry is added to the map)
         * If not specified, drawStyle applies
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._overlayStyle = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GeometryFormFieldInputComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () { return this._value; },
        /**
         * The geometry value (GeoJSON)
         * Implemented as part of ControlValueAccessor.
         */
        set: /**
         * The geometry value (GeoJSON)
         * Implemented as part of ControlValueAccessor.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this.ready === false) {
                this._value = value;
                return;
            }
            if (value) {
                this.addGeoJSONToOverlay(value);
            }
            else {
                this.olOverlaySource.clear();
            }
            this._value = value;
            this.onChange(value);
            this.toggleControl();
            this.cdRef.detectChanges();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GeometryFormFieldInputComponent.prototype, "olOverlaySource", {
        /**
         * The vector source to add the geometry to
         * @internal
         */
        get: /**
         * The vector source to add the geometry to
         * \@internal
         * @return {?}
         */
        function () {
            return this.olOverlayLayer.getSource();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Create an overlay layer, add the initial geometry to it (if any)
     * and toggle the right interaction.
     * @internal
     */
    /**
     * Create an overlay layer, add the initial geometry to it (if any)
     * and toggle the right interaction.
     * \@internal
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.ngOnInit = /**
     * Create an overlay layer, add the initial geometry to it (if any)
     * and toggle the right interaction.
     * \@internal
     * @return {?}
     */
    function () {
        this.addOlOverlayLayer();
        this.createMeasureTooltip();
        this.createDrawControl();
        this.createModifyControl();
        if (this.value) {
            this.addGeoJSONToOverlay(this.value);
        }
        this.toggleControl();
        this.ready = true;
    };
    /**
     * Clear the overlay layer and any interaction added by this component.
     * @internal
     */
    /**
     * Clear the overlay layer and any interaction added by this component.
     * \@internal
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.ngOnDestroy = /**
     * Clear the overlay layer and any interaction added by this component.
     * \@internal
     * @return {?}
     */
    function () {
        this.deactivateControl();
        this.olOverlaySource.clear();
        this.map.ol.removeLayer(this.olOverlayLayer);
    };
    /**
     * Implemented as part of ControlValueAccessor.
     */
    // tslint:disable-next-line:ban-types
    /**
     * Implemented as part of ControlValueAccessor.
     * @param {?} fn
     * @return {?}
     */
    // tslint:disable-next-line:ban-types
    GeometryFormFieldInputComponent.prototype.registerOnChange = /**
     * Implemented as part of ControlValueAccessor.
     * @param {?} fn
     * @return {?}
     */
    // tslint:disable-next-line:ban-types
    function (fn) {
        this.onChange = fn;
    };
    /**
     * Implemented as part of ControlValueAccessor.
     */
    // tslint:disable-next-line:ban-types
    /**
     * Implemented as part of ControlValueAccessor.
     * @param {?} fn
     * @return {?}
     */
    // tslint:disable-next-line:ban-types
    GeometryFormFieldInputComponent.prototype.registerOnTouched = /**
     * Implemented as part of ControlValueAccessor.
     * @param {?} fn
     * @return {?}
     */
    // tslint:disable-next-line:ban-types
    function (fn) {
        this.onTouched = fn;
    };
    /**
     * Implemented as part of ControlValueAccessor.
     */
    /**
     * Implemented as part of ControlValueAccessor.
     * @param {?} value
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.writeValue = /**
     * Implemented as part of ControlValueAccessor.
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.value = value;
    };
    /**
     * Add an overlay layer to the map
     */
    /**
     * Add an overlay layer to the map
     * @private
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.addOlOverlayLayer = /**
     * Add an overlay layer to the map
     * @private
     * @return {?}
     */
    function () {
        this.olOverlayLayer = new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_52__["default"]({
            source: new ol_source_Vector__WEBPACK_IMPORTED_MODULE_51__["default"](),
            zIndex: 500,
            style: null
        });
        this.map.ol.addLayer(this.olOverlayLayer);
    };
    /**
     * Create a draw control and subscribe to it's geometry
     */
    /**
     * Create a draw control and subscribe to it's geometry
     * @private
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.createDrawControl = /**
     * Create a draw control and subscribe to it's geometry
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.drawControl = new DrawControl({
            geometryType: this.geometryType || 'Point',
            layer: this.olOverlayLayer,
            drawStyle: (/**
             * @param {?} olFeature
             * @param {?} resolution
             * @return {?}
             */
            function (olFeature, resolution) {
                /** @type {?} */
                var style$$1 = _this.drawStyle;
                _this.updateDrawStyleWithDrawGuide(style$$1, resolution);
                return style$$1;
            })
        });
    };
    /**
     * Create a modify control and subscribe to it's geometry
     */
    /**
     * Create a modify control and subscribe to it's geometry
     * @private
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.createModifyControl = /**
     * Create a modify control and subscribe to it's geometry
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.modifyControl = new ModifyControl({
            layer: this.olOverlayLayer,
            drawStyle: (/**
             * @param {?} olFeature
             * @param {?} resolution
             * @return {?}
             */
            function (olFeature, resolution) {
                /** @type {?} */
                var style$$1 = _this.drawStyle;
                _this.updateDrawStyleWithDrawGuide(style$$1, resolution);
                return style$$1;
            })
        });
    };
    /**
     * Toggle the proper control (draw or modify)
     */
    /**
     * Toggle the proper control (draw or modify)
     * @private
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.toggleControl = /**
     * Toggle the proper control (draw or modify)
     * @private
     * @return {?}
     */
    function () {
        this.deactivateControl();
        if (!this.value && this.geometryType) {
            this.activateControl(this.drawControl);
        }
        else {
            this.activateControl(this.modifyControl);
        }
    };
    /**
     * Activate a given control
     * @param control Control
     */
    /**
     * Activate a given control
     * @private
     * @param {?} control Control
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.activateControl = /**
     * Activate a given control
     * @private
     * @param {?} control Control
     * @return {?}
     */
    function (control) {
        var _this = this;
        this.activeControl = control;
        this.olGeometryEnds$$ = control.end$
            .subscribe((/**
         * @param {?} olGeometry
         * @return {?}
         */
        function (olGeometry) { return _this.onOlGeometryEnds(olGeometry); }));
        if (this.measure === true && control === this.drawControl) {
            this.olGeometryChanges$$ = control.changes$
                .subscribe((/**
             * @param {?} olGeometry
             * @return {?}
             */
            function (olGeometry) { return _this.onOlGeometryChanges(olGeometry); }));
        }
        control.setOlMap(this.map.ol);
    };
    /**
     * Deactivate the active control
     */
    /**
     * Deactivate the active control
     * @private
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.deactivateControl = /**
     * Deactivate the active control
     * @private
     * @return {?}
     */
    function () {
        this.removeMeasureTooltip();
        if (this.activeControl !== undefined) {
            this.activeControl.setOlMap(undefined);
        }
        if (this.olGeometryEnds$$ !== undefined) {
            this.olGeometryEnds$$.unsubscribe();
        }
        if (this.olGeometryChanges$$ !== undefined) {
            this.olGeometryChanges$$.unsubscribe();
        }
        this.activeControl = undefined;
    };
    /**
     * Update measures observables and map tooltips
     * @param olGeometry Ol linestring or polygon
     */
    /**
     * Update measures observables and map tooltips
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.onOlGeometryEnds = /**
     * Update measures observables and map tooltips
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    function (olGeometry) {
        this.removeMeasureTooltip();
        this.setOlGeometry(olGeometry);
    };
    /**
     * Update measures observables and map tooltips
     * @param olGeometry Ol linestring or polygon
     */
    /**
     * Update measures observables and map tooltips
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.onOlGeometryChanges = /**
     * Update measures observables and map tooltips
     * @private
     * @param {?} olGeometry Ol linestring or polygon
     * @return {?}
     */
    function (olGeometry) {
        if (olGeometry.getType() !== 'Point') {
            this.updateMeasureTooltip(olGeometry);
        }
    };
    /**
     * When drawing ends, convert the output value to GeoJSON and keep it.
     * Restore the double click interaction.
     * @param olGeometry OL geometry
     */
    /**
     * When drawing ends, convert the output value to GeoJSON and keep it.
     * Restore the double click interaction.
     * @private
     * @param {?} olGeometry OL geometry
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.setOlGeometry = /**
     * When drawing ends, convert the output value to GeoJSON and keep it.
     * Restore the double click interaction.
     * @private
     * @param {?} olGeometry OL geometry
     * @return {?}
     */
    function (olGeometry) {
        if (olGeometry === undefined) {
            return;
        }
        /** @type {?} */
        var value = this.olGeoJSON.writeGeometryObject(olGeometry, {
            featureProjection: this.map.projection,
            dataProjection: 'EPSG:4326'
        });
        this.writeValue(value);
    };
    /**
     * Add a GeoJSON geometry to the overlay
     * @param geometry GeoJSON geometry
     */
    /**
     * Add a GeoJSON geometry to the overlay
     * @private
     * @param {?} geometry GeoJSON geometry
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.addGeoJSONToOverlay = /**
     * Add a GeoJSON geometry to the overlay
     * @private
     * @param {?} geometry GeoJSON geometry
     * @return {?}
     */
    function (geometry) {
        /** @type {?} */
        var olGeometry = this.olGeoJSON.readGeometry(geometry, {
            dataProjection: 'EPSG:4326',
            featureProjection: this.map.projection
        });
        /** @type {?} */
        var olFeature = new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"]({
            geometry: olGeometry
        });
        olFeature.setStyle(this.overlayStyle);
        this.olOverlaySource.clear();
        this.olOverlaySource.addFeature(olFeature);
    };
    /**
     * Create the measure tooltip
     */
    /**
     * Create the measure tooltip
     * @private
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.createMeasureTooltip = /**
     * Create the measure tooltip
     * @private
     * @return {?}
     */
    function () {
        this.olTooltip = new ol_Overlay__WEBPACK_IMPORTED_MODULE_39__["default"]({
            element: document.createElement('div'),
            offset: [-30, -10],
            className: [
                'igo-map-tooltip',
                'igo-map-tooltip-measure'
            ].join(' '),
            stopEvent: false
        });
    };
    /**
     * Update the measure tooltip of an OL geometry
     * @param olGeometry OL Geometry
     */
    /**
     * Update the measure tooltip of an OL geometry
     * @private
     * @param {?} olGeometry OL Geometry
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.updateMeasureTooltip = /**
     * Update the measure tooltip of an OL geometry
     * @private
     * @param {?} olGeometry OL Geometry
     * @return {?}
     */
    function (olGeometry) {
        /** @type {?} */
        var measure = measureOlGeometry(olGeometry, this.map.projection);
        /** @type {?} */
        var lengths = measure.lengths;
        /** @type {?} */
        var lastIndex = olGeometry.getType() === 'Polygon' ? lengths.length - 2 : lengths.length - 1;
        /** @type {?} */
        var lastLength = lengths[lastIndex];
        /** @type {?} */
        var olMidpoints = updateOlGeometryMidpoints(olGeometry);
        /** @type {?} */
        var olLastMidpoint = olMidpoints[lastIndex];
        if (olMidpoints.length === 0 || olLastMidpoint === undefined) {
            this.removeMeasureTooltip();
            return;
        }
        this.olTooltip.setPosition(olLastMidpoint.flatCoordinates);
        /** @type {?} */
        var innerHtml = formatMeasure(lastLength, {
            decimal: 1,
            unit: MeasureLengthUnit.Meters,
            unitAbbr: true,
            locale: 'fr'
        });
        this.olTooltip.getElement().innerHTML = innerHtml;
        if (this.olTooltip.getMap() === undefined) {
            this.map.ol.addOverlay(this.olTooltip);
        }
    };
    /**
     * Remove the measure tooltip from the map
     */
    /**
     * Remove the measure tooltip from the map
     * @private
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.removeMeasureTooltip = /**
     * Remove the measure tooltip from the map
     * @private
     * @return {?}
     */
    function () {
        if (this.olTooltip.getMap && this.olTooltip.getMap() !== undefined) {
            this.map.ol.removeOverlay(this.olTooltip);
            this.olTooltip.setMap(undefined);
        }
    };
    /**
     * Adjust the draw style with the specified draw guide distance, if possible
     * @param olStyle Draw style to update
     * @param resolution Resolution (to make the screen size of symbol fit the drawGuide value)
     */
    /**
     * Adjust the draw style with the specified draw guide distance, if possible
     * @private
     * @param {?} olStyle Draw style to update
     * @param {?} resolution Resolution (to make the screen size of symbol fit the drawGuide value)
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.updateDrawStyleWithDrawGuide = /**
     * Adjust the draw style with the specified draw guide distance, if possible
     * @private
     * @param {?} olStyle Draw style to update
     * @param {?} resolution Resolution (to make the screen size of symbol fit the drawGuide value)
     * @return {?}
     */
    function (olStyle, resolution) {
        if (this.isStyleWithRadius(olStyle)) {
            /** @type {?} */
            var drawGuide = this.drawGuide;
            /** @type {?} */
            var radius = void 0;
            if (drawGuide === null || drawGuide < 0) {
                radius = this.defaultDrawStyleRadius;
            }
            else {
                radius = drawGuide > 0 ? drawGuide / resolution : drawGuide;
            }
            olStyle.getImage().setRadius(radius);
        }
    };
    /**
     * Returns wether a given Open Layers style has a radius property that can be set (used to set draw guide)
     * @param olStyle The style on which to perform the check
     */
    /**
     * Returns wether a given Open Layers style has a radius property that can be set (used to set draw guide)
     * @private
     * @param {?} olStyle The style on which to perform the check
     * @return {?}
     */
    GeometryFormFieldInputComponent.prototype.isStyleWithRadius = /**
     * Returns wether a given Open Layers style has a radius property that can be set (used to set draw guide)
     * @private
     * @param {?} olStyle The style on which to perform the check
     * @return {?}
     */
    function (olStyle) {
        return olStyle.getImage && olStyle.getImage().setRadius;
    };
    GeometryFormFieldInputComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-geometry-form-field-input',
                    template: "<ng-template></ng-template>",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    GeometryFormFieldInputComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] },
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_64__["NgControl"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Optional"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Self"] }] }
    ]; };
    GeometryFormFieldInputComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        geometryType: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        drawGuide: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        measure: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        drawStyle: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        overlayStyle: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        value: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return GeometryFormFieldInputComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoGeometryFormFieldModule = /** @class */ (function () {
    function IgoGeometryFormFieldModule() {
    }
    IgoGeometryFormFieldModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["ReactiveFormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonToggleModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"]
                    ],
                    exports: [
                        GeometryFormFieldComponent,
                        GeometryFormFieldInputComponent
                    ],
                    declarations: [
                        GeometryFormFieldComponent,
                        GeometryFormFieldInputComponent
                    ]
                },] }
    ];
    return IgoGeometryFormFieldModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoGeometryModule = /** @class */ (function () {
    function IgoGeometryModule() {
    }
    IgoGeometryModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        IgoGeometryFormFieldModule
                    ],
                    exports: [
                        IgoGeometryFormFieldModule
                    ],
                    declarations: [],
                    providers: [],
                    entryComponents: [
                        GeometryFormFieldComponent
                    ]
                },] }
    ];
    return IgoGeometryModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ExportError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ExportError, _super);
    function ExportError() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return ExportError;
}(Error));
var ExportInvalidFileError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ExportInvalidFileError, _super);
    function ExportInvalidFileError() {
        var _this = _super.call(this, 'Invalid file.') || this;
        Object.setPrototypeOf(_this, ExportInvalidFileError.prototype);
        return _this;
    }
    return ExportInvalidFileError;
}(ExportError));
var ExportNothingToExportError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ExportNothingToExportError, _super);
    function ExportNothingToExportError() {
        var _this = _super.call(this, 'Nothing to export.') || this;
        Object.setPrototypeOf(_this, ExportNothingToExportError.prototype);
        return _this;
    }
    return ExportNothingToExportError;
}(ExportError));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Export array to CSV
 *
 * @param {?} rows Array of arrays to export as CSV
 * @param {?} fileName
 * @param {?=} separator Cell separator
 * @return {?}
 */
function exportToCSV(rows, fileName, separator) {
    if (separator === void 0) { separator = ';'; }
    /** @type {?} */
    var lines = rows.map((/**
     * @param {?} row
     * @param {?} index
     * @return {?}
     */
    function (row, index) { return row.join(separator); }));
    /** @type {?} */
    var csvContent = lines.join('\n');
    downloadContent(csvContent, 'text/csv;charset=utf-8', fileName);
}
/**
 * Return an array of values from an array of entities.
 *
 * @param {?} entities Array of entities
 * @param {?} columns
 * @return {?}
 */
function entitiesToRowData(entities, columns) {
    return entities.map((/**
     * @param {?} entity
     * @return {?}
     */
    function (entity) {
        return columns.map((/**
         * @param {?} column
         * @return {?}
         */
        function (column) {
            /** @type {?} */
            var valueAccessor;
            if (column.renderer === undefined || column.renderer === _igo2_common__WEBPACK_IMPORTED_MODULE_68__["EntityTableColumnRenderer"].Default) {
                valueAccessor = column.valueAccessor;
            }
            valueAccessor = valueAccessor ? valueAccessor : _igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityProperty"];
            return valueAccessor(entity, column.name);
        }));
    }));
}
/**
 * Trigger download of a file
 *
 * @param {?} content File content
 * @param {?} mimeType File mime type
 * @param {?} fileName File name
 * @return {?}
 */
function downloadContent(content, mimeType, fileName) {
    /** @type {?} */
    var element = document.createElement('a');
    element.setAttribute('href', "data:" + mimeType + "," + encodeURIComponent(content));
    element.setAttribute('download', fileName);
    element.style.display = 'none';
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);
}
/**
 * @param {?} error
 * @param {?} messageService
 * @param {?} languageService
 * @return {?}
 */
function handleFileExportError(error, messageService, languageService) {
    if (error instanceof ExportNothingToExportError) {
        handleNothingToExportError(messageService, languageService);
        return;
    }
    /** @type {?} */
    var translate = languageService.translate;
    /** @type {?} */
    var title = translate.instant('igo.geo.export.failed.title');
    /** @type {?} */
    var message = translate.instant('igo.geo.export.failed.text');
    messageService.error(message, title);
}
/**
 * @param {?} messageService
 * @param {?} languageService
 * @return {?}
 */
function handleNothingToExportError(messageService, languageService) {
    /** @type {?} */
    var translate = languageService.translate;
    /** @type {?} */
    var title = translate.instant('igo.geo.export.nothing.title');
    /** @type {?} */
    var message = translate.instant('igo.geo.export.nothing.text');
    messageService.error(message, title);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var ExportFormat = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["strEnum"])(['GeoJSON', 'GML', 'GPX', 'KML', 'Shapefile']);

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ExportService = /** @class */ (function () {
    function ExportService(config) {
        this.config = config;
        this.ogreUrl = this.config.getConfig('importExport.url');
    }
    /**
     * @param {?} olFeatures
     * @param {?} format
     * @param {?} title
     * @param {?=} projectionIn
     * @param {?=} projectionOut
     * @return {?}
     */
    ExportService.prototype.export = /**
     * @param {?} olFeatures
     * @param {?} format
     * @param {?} title
     * @param {?=} projectionIn
     * @param {?=} projectionOut
     * @return {?}
     */
    function (olFeatures, format, title, projectionIn, projectionOut) {
        if (projectionIn === void 0) { projectionIn = 'EPSG:4326'; }
        if (projectionOut === void 0) { projectionOut = 'EPSG:4326'; }
        /** @type {?} */
        var exportOlFeatures = olFeatures.map((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            /** @type {?} */
            var keys = olFeature.getKeys().filter((/**
             * @param {?} key
             * @return {?}
             */
            function (key) { return !key.startsWith('_'); }));
            /** @type {?} */
            var properties = keys.reduce((/**
             * @param {?} acc
             * @param {?} key
             * @return {?}
             */
            function (acc, key) {
                acc[key] = olFeature.get(key);
                return acc;
            }), { geometry: olFeature.getGeometry() });
            return new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"](properties);
        }));
        return this.exportAsync(exportOlFeatures, format, title, projectionIn, projectionOut);
    };
    /**
     * @private
     * @param {?} olFeatures
     * @param {?} format
     * @param {?} title
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    ExportService.prototype.exportAsync = /**
     * @private
     * @param {?} olFeatures
     * @param {?} format
     * @param {?} title
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    function (olFeatures, format, title, projectionIn, projectionOut) {
        var _this = this;
        /** @type {?} */
        var doExport = (/**
         * @param {?} observer
         * @return {?}
         */
        function (observer) {
            /** @type {?} */
            var nothingToExport = _this.nothingToExport(olFeatures, format);
            if (nothingToExport === true) {
                observer.error(new ExportNothingToExportError());
                return;
            }
            /** @type {?} */
            var ogreFormats = Object.keys(ExportService.ogreFormats);
            if (ogreFormats.indexOf(format) >= 0) {
                if (_this.ogreUrl === undefined) {
                    if (ExportService.noOgreFallbacks.indexOf(format) >= 0) {
                        _this.exportToFile(olFeatures, observer, format, title, projectionIn, projectionOut);
                    }
                    else {
                        observer.error(new ExportInvalidFileError());
                    }
                    return;
                }
                _this.exportWithOgre(olFeatures, observer, format, title, projectionIn, projectionOut);
            }
            else {
                _this.exportToFile(olFeatures, observer, format, title, projectionIn, projectionOut);
            }
        });
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"](doExport);
    };
    /**
     * @private
     * @param {?} olFeatures
     * @param {?} observer
     * @param {?} format
     * @param {?} title
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    ExportService.prototype.exportToFile = /**
     * @private
     * @param {?} olFeatures
     * @param {?} observer
     * @param {?} format
     * @param {?} title
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    function (olFeatures, observer, format, title, projectionIn, projectionOut) {
        /** @type {?} */
        var olFormat = new ol_format__WEBPACK_IMPORTED_MODULE_70__[format]();
        /** @type {?} */
        var featuresText = olFormat.writeFeatures(olFeatures, {
            dataProjection: projectionOut,
            featureProjection: projectionIn,
            featureType: 'feature',
            featureNS: 'http://example.com/feature'
        });
        /** @type {?} */
        var fileName = title + "." + format.toLowerCase();
        downloadContent(featuresText, 'text/plain;charset=utf-8', fileName);
        observer.complete();
    };
    /**
     * @private
     * @param {?} olFeatures
     * @param {?} observer
     * @param {?} format
     * @param {?} title
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    ExportService.prototype.exportWithOgre = /**
     * @private
     * @param {?} olFeatures
     * @param {?} observer
     * @param {?} format
     * @param {?} title
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    function (olFeatures, observer, format, title, projectionIn, projectionOut) {
        /** @type {?} */
        var featuresText = new ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"]().writeFeatures(olFeatures, {
            dataProjection: projectionOut,
            featureProjection: projectionIn,
            featureType: 'feature',
            featureNS: 'http://example.com/feature'
        });
        /** @type {?} */
        var url = this.ogreUrl + "/convert";
        /** @type {?} */
        var form = document.createElement('form');
        form.setAttribute('method', 'post');
        form.setAttribute('action', url);
        /** @type {?} */
        var geojsonField = document.createElement('input');
        geojsonField.setAttribute('type', 'hidden');
        geojsonField.setAttribute('name', 'json');
        geojsonField.setAttribute('value', featuresText);
        form.appendChild(geojsonField);
        /** @type {?} */
        var outputNameField = document.createElement('input');
        /** @type {?} */
        var outputName = format === 'Shapefile' ? title + ".zip" : title;
        outputNameField.setAttribute('type', 'hidden');
        outputNameField.setAttribute('name', 'outputName');
        outputNameField.setAttribute('value', outputName);
        form.appendChild(outputNameField);
        /** @type {?} */
        var ogreFormat = ExportService.ogreFormats[format];
        /** @type {?} */
        var outputFormatField = document.createElement('input');
        outputFormatField.setAttribute('type', 'hidden');
        outputFormatField.setAttribute('name', 'formatOutput');
        outputFormatField.setAttribute('value', ogreFormat);
        form.appendChild(outputFormatField);
        document.body.appendChild(form);
        form.submit();
        document.body.removeChild(form);
        observer.complete();
    };
    /**
     * @private
     * @param {?} olFeatures
     * @param {?} format
     * @return {?}
     */
    ExportService.prototype.nothingToExport = /**
     * @private
     * @param {?} olFeatures
     * @param {?} format
     * @return {?}
     */
    function (olFeatures, format) {
        if (olFeatures.length === 0) {
            return true;
        }
        if (format === 'GPX') {
            /** @type {?} */
            var pointOrLine = olFeatures.find((/**
             * @param {?} olFeature
             * @return {?}
             */
            function (olFeature) {
                return ['Point', 'LineString'].indexOf(olFeature.getGeometry().getType()) >= 0;
            }));
            return pointOrLine === undefined;
        }
        return false;
    };
    ExportService.ogreFormats = {
        GML: 'gml',
        GPX: 'gpx',
        KML: 'kml',
        Shapefile: 'ESRI Shapefile'
    };
    ExportService.noOgreFallbacks = ['GML', 'GPX', 'KML'];
    ExportService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ExportService.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"] }
    ]; };
    /** @nocollapse */ ExportService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function ExportService_Factory() { return new ExportService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"])); }, token: ExportService, providedIn: "root" });
    return ExportService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ImportError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ImportError, _super);
    function ImportError() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return ImportError;
}(Error));
var ImportInvalidFileError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ImportInvalidFileError, _super);
    function ImportInvalidFileError() {
        var _this = _super.call(this, 'Invalid file.') || this;
        Object.setPrototypeOf(_this, ImportInvalidFileError.prototype);
        return _this;
    }
    return ImportInvalidFileError;
}(ImportError));
var ImportUnreadableFileError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ImportUnreadableFileError, _super);
    function ImportUnreadableFileError() {
        var _this = _super.call(this, 'Failed to read file.') || this;
        Object.setPrototypeOf(_this, ImportUnreadableFileError.prototype);
        return _this;
    }
    return ImportUnreadableFileError;
}(ImportError));
var ImportNothingToImportError = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ImportNothingToImportError, _super);
    function ImportNothingToImportError() {
        var _this = _super.call(this, 'Nothing to import.') || this;
        Object.setPrototypeOf(_this, ImportNothingToImportError.prototype);
        return _this;
    }
    return ImportNothingToImportError;
}(ImportError));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} features
 * @param {?} map
 * @param {?} layerTitle
 * @return {?}
 */
function addLayerAndFeaturesToMap(features, map$$1, layerTitle) {
    /** @type {?} */
    var olFeatures = features.map((/**
     * @param {?} feature
     * @return {?}
     */
    function (feature) { return featureToOl(feature, map$$1.projection); }));
    /** @type {?} */
    var r = Math.floor(Math.random() * 255);
    /** @type {?} */
    var g = Math.floor(Math.random() * 255);
    /** @type {?} */
    var b = Math.floor(Math.random() * 255);
    /** @type {?} */
    var stroke = new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({
        color: [r, g, b, 1],
        width: 2
    });
    /** @type {?} */
    var fill = new ol_style__WEBPACK_IMPORTED_MODULE_60__["Fill"]({
        color: [r, g, b, 0.4]
    });
    /** @type {?} */
    var sourceOptions = {
        queryable: true
    };
    /** @type {?} */
    var source = new FeatureDataSource(sourceOptions);
    source.ol.addFeatures(olFeatures);
    /** @type {?} */
    var layer = new VectorLayer({
        title: layerTitle,
        source: source,
        style: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
            stroke: stroke,
            fill: fill,
            image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
                radius: 5,
                stroke: stroke,
                fill: fill
            })
        })
    });
    map$$1.addLayer(layer);
    moveToOlFeatures(map$$1, olFeatures);
    return layer;
}
/**
 * @param {?} file
 * @param {?} features
 * @param {?} map
 * @param {?} messageService
 * @param {?} languageService
 * @return {?}
 */
function handleFileImportSuccess(file, features, map$$1, messageService, languageService) {
    if (features.length === 0) {
        this.handleNothingToImportError(file, messageService, languageService);
        return;
    }
    /** @type {?} */
    var layerTitle = computeLayerTitleFromFile(file);
    addLayerAndFeaturesToMap(features, map$$1, layerTitle);
    /** @type {?} */
    var translate = languageService.translate;
    /** @type {?} */
    var messageTitle = translate.instant('igo.geo.dropGeoFile.success.title');
    /** @type {?} */
    var message = translate.instant('igo.geo.dropGeoFile.success.text', {
        value: layerTitle
    });
    messageService.success(message, messageTitle);
}
/**
 * @param {?} file
 * @param {?} error
 * @param {?} messageService
 * @param {?} languageService
 * @return {?}
 */
function handleFileImportError(file, error, messageService, languageService) {
    /** @type {?} */
    var translate = languageService.translate;
    /** @type {?} */
    var title = translate.instant('igo.geo.dropGeoFile.invalid.title');
    /** @type {?} */
    var message = translate.instant('igo.geo.dropGeoFile.invalid.text', {
        value: file.name,
        mimeType: file.type
    });
    messageService.error(message, title);
}
/**
 * @param {?} file
 * @param {?} messageService
 * @param {?} languageService
 * @return {?}
 */
function handleNothingToImportError(file, messageService, languageService) {
    /** @type {?} */
    var translate = languageService.translate;
    /** @type {?} */
    var title = translate.instant('igo.geo.dropGeoFile.empty.title');
    /** @type {?} */
    var message = translate.instant('igo.geo.dropGeoFile.empty.text', {
        value: file.name,
        mimeType: file.type
    });
    messageService.error(message, title);
}
/**
 * @param {?} file
 * @return {?}
 */
function getFileExtension(file) {
    return file.name.split('.').pop().toLowerCase();
}
/**
 * @param {?} file
 * @return {?}
 */
function computeLayerTitleFromFile(file) {
    return file.name.substr(0, file.name.lastIndexOf('.'));
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ImportService = /** @class */ (function () {
    function ImportService(http, config) {
        this.http = http;
        this.config = config;
        this.ogreUrl = this.config.getConfig('importExport.url');
    }
    /**
     * @param {?} file
     * @param {?=} projectionIn
     * @param {?=} projectionOut
     * @return {?}
     */
    ImportService.prototype.import = /**
     * @param {?} file
     * @param {?=} projectionIn
     * @param {?=} projectionOut
     * @return {?}
     */
    function (file, projectionIn, projectionOut) {
        if (projectionIn === void 0) { projectionIn = 'EPSG:4326'; }
        if (projectionOut === void 0) { projectionOut = 'EPSG:4326'; }
        return this.importAsync(file, projectionIn, projectionOut);
    };
    /**
     * @private
     * @param {?} file
     * @return {?}
     */
    ImportService.prototype.getFileImporter = /**
     * @private
     * @param {?} file
     * @return {?}
     */
    function (file) {
        /** @type {?} */
        var extension = getFileExtension(file);
        /** @type {?} */
        var mimeType = file.type;
        /** @type {?} */
        var allowedMimeTypes = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(ImportService.allowedMimeTypes, ImportService.allowedZipMimeTypes);
        /** @type {?} */
        var allowedExtensions = ImportService.allowedExtensions;
        if (allowedMimeTypes.indexOf(mimeType) < 0 && allowedExtensions.indexOf(extension) < 0) {
            return undefined;
        }
        else if (mimeType === 'application/json' || ['json', 'geojson', 'kml'].indexOf(extension) >= 0) {
            return this.importFile;
        }
        else if (this.ogreUrl !== undefined) {
            return this.importFileWithOgre;
        }
        return undefined;
    };
    /**
     * @private
     * @param {?} file
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    ImportService.prototype.importAsync = /**
     * @private
     * @param {?} file
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    function (file, projectionIn, projectionOut) {
        var _this = this;
        /** @type {?} */
        var doImport = (/**
         * @param {?} observer
         * @return {?}
         */
        function (observer) {
            /** @type {?} */
            var importer = _this.getFileImporter(file);
            if (importer === undefined) {
                observer.error(new ImportInvalidFileError());
                return;
            }
            importer.call(_this, file, observer, projectionIn, projectionOut);
        });
        return new rxjs__WEBPACK_IMPORTED_MODULE_69__["Observable"](doImport);
    };
    /**
     * @private
     * @param {?} file
     * @param {?} observer
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    ImportService.prototype.importFile = /**
     * @private
     * @param {?} file
     * @param {?} observer
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    function (file, observer, projectionIn, projectionOut) {
        var _this = this;
        /** @type {?} */
        var reader = new FileReader();
        reader.onload = (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            try {
                /** @type {?} */
                var features = _this.parseFeaturesFromFile(file, event.target.result, projectionIn, projectionOut);
                observer.next(features);
            }
            catch (e) {
                observer.error(new ImportUnreadableFileError());
            }
            observer.complete();
        });
        reader.onerror = (/**
         * @param {?} evt
         * @return {?}
         */
        function (evt) {
            observer.error(new ImportUnreadableFileError());
        });
        reader.readAsText(file, 'UTF-8');
    };
    /**
     * @private
     * @param {?} file
     * @param {?} observer
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    ImportService.prototype.importFileWithOgre = /**
     * @private
     * @param {?} file
     * @param {?} observer
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    function (file, observer, projectionIn, projectionOut) {
        var _this = this;
        /** @type {?} */
        var url = this.ogreUrl + "/convert";
        /** @type {?} */
        var formData = new FormData();
        formData.append('upload', file);
        formData.append('sourceSrs', projectionIn);
        formData.append('targetSrs', projectionOut);
        formData.append('formatOutput', 'GEOJSON');
        formData.append('skipFailures', '');
        this.http
            .post(url, formData, { headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpHeaders"]() })
            .subscribe((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            if (response === null) {
                observer.error(new ImportUnreadableFileError());
                return;
            }
            /** @type {?} */
            var errors = ((/** @type {?} */ (response))).errors || [];
            if (errors.length > 0) {
                observer.error(new ImportUnreadableFileError());
            }
            else {
                /** @type {?} */
                var features = _this.parseFeaturesFromGeoJSON(file, response, projectionOut);
                observer.next(features);
                observer.complete();
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            observer.error(new ImportUnreadableFileError());
        }));
    };
    /**
     * @private
     * @param {?} file
     * @param {?} data
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    ImportService.prototype.parseFeaturesFromFile = /**
     * @private
     * @param {?} file
     * @param {?} data
     * @param {?} projectionIn
     * @param {?} projectionOut
     * @return {?}
     */
    function (file, data, projectionIn, projectionOut) {
        /** @type {?} */
        var extension = getFileExtension(file);
        /** @type {?} */
        var mimeType = file.type;
        /** @type {?} */
        var GeoJSON$$1 = new ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"]();
        /** @type {?} */
        var format;
        if (mimeType === 'application/vnd.google-earth.kml+xml') {
            format = new ol_format__WEBPACK_IMPORTED_MODULE_70__["KML"]();
        }
        else if (mimeType === 'application/gml+xml') {
            format = new ol_format__WEBPACK_IMPORTED_MODULE_70__["GML"]();
        }
        else if (mimeType === 'application/gpx+xml') {
            format = new ol_format__WEBPACK_IMPORTED_MODULE_70__["GPX"]();
        }
        else {
            switch (extension) {
                case 'kml':
                    format = new ol_format__WEBPACK_IMPORTED_MODULE_70__["KML"]();
                    break;
                case 'gpx':
                    format = new ol_format__WEBPACK_IMPORTED_MODULE_70__["GPX"]();
                    break;
                case 'gml':
                    format = new ol_format__WEBPACK_IMPORTED_MODULE_70__["GML"]();
                    break;
                default:
                    format = GeoJSON$$1;
                    break;
            }
        }
        /** @type {?} */
        var olFeatures = format.readFeatures(data, {
            dataProjection: projectionIn,
            featureProjection: projectionOut
        });
        /** @type {?} */
        var features = olFeatures.map((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            return Object.assign(GeoJSON$$1.writeFeatureObject(olFeature), {
                projection: projectionOut,
                meta: {
                    id: Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])(),
                    title: computeLayerTitleFromFile(file)
                }
            });
        }));
        return features;
    };
    /**
     * @private
     * @param {?} file
     * @param {?} data
     * @param {?} projectionOut
     * @return {?}
     */
    ImportService.prototype.parseFeaturesFromGeoJSON = /**
     * @private
     * @param {?} file
     * @param {?} data
     * @param {?} projectionOut
     * @return {?}
     */
    function (file, data, projectionOut) {
        /** @type {?} */
        var olFormat = new ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"]();
        /** @type {?} */
        var olFeatures = olFormat.readFeatures(data);
        /** @type {?} */
        var features = olFeatures.map((/**
         * @param {?} olFeature
         * @return {?}
         */
        function (olFeature) {
            return Object.assign(olFormat.writeFeatureObject(olFeature), {
                projection: projectionOut,
                meta: {
                    id: Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])(),
                    title: computeLayerTitleFromFile(file)
                }
            });
        }));
        return features;
    };
    ImportService.allowedMimeTypes = [
        'application/gml+xml',
        'application/vnd.google-earth.kml+xml',
        'application/gpx+xml',
        'application/json'
    ];
    ImportService.allowedZipMimeTypes = [
        'application/zip',
        'application/x-zip-compressed',
        'application/x-zip'
    ];
    ImportService.allowedExtensions = [
        'geojson',
        'kml',
        'gpx',
        'json',
        'gml'
    ];
    ImportService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ImportService.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"] }
    ]; };
    /** @nocollapse */ ImportService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function ImportService_Factory() { return new ImportService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"])); }, token: ImportService, providedIn: "root" });
    return ImportService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ImportExportComponent = /** @class */ (function () {
    function ImportExportComponent(importService, exportService, languageService, messageService, formBuilder) {
        this.importService = importService;
        this.exportService = exportService;
        this.languageService = languageService;
        this.messageService = messageService;
        this.formBuilder = formBuilder;
        this.formats = ExportFormat;
        this.inputProj = 'EPSG:4326';
        this.buildForm();
    }
    /**
     * @return {?}
     */
    ImportExportComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.layers$$ = this.map.layers$.subscribe((/**
         * @param {?} layers
         * @return {?}
         */
        function (layers) {
            _this.layers = (/** @type {?} */ (layers
                .filter((/**
             * @param {?} layer
             * @return {?}
             */
            function (layer) {
                return layer instanceof VectorLayer && layer.exportable === true;
            }))));
        }));
    };
    /**
     * @return {?}
     */
    ImportExportComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.layers$$.unsubscribe();
    };
    /**
     * @param {?} files
     * @return {?}
     */
    ImportExportComponent.prototype.importFiles = /**
     * @param {?} files
     * @return {?}
     */
    function (files) {
        var _this = this;
        var e_1, _a;
        var _loop_1 = function (file) {
            this_1.importService
                .import(file, this_1.inputProj)
                .subscribe((/**
             * @param {?} features
             * @return {?}
             */
            function (features) { return _this.onFileImportSuccess(file, features); }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) { return _this.onFileImportError(file, error); }));
        };
        var this_1 = this;
        try {
            for (var files_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(files), files_1_1 = files_1.next(); !files_1_1.done; files_1_1 = files_1.next()) {
                var file = files_1_1.value;
                _loop_1(file);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (files_1_1 && !files_1_1.done && (_a = files_1.return)) _a.call(files_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ImportExportComponent.prototype.handleExportFormSubmit = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var layer = this.map.getLayerById(data.layer);
        /** @type {?} */
        var olFeatures = layer.dataSource.ol.getFeatures();
        this.exportService
            .export(olFeatures, data.format, layer.title, this.map.projection)
            .subscribe((/**
         * @return {?}
         */
        function () { }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) { return _this.onFileExportError(error); }));
    };
    /**
     * @private
     * @return {?}
     */
    ImportExportComponent.prototype.buildForm = /**
     * @private
     * @return {?}
     */
    function () {
        this.form = this.formBuilder.group({
            format: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_64__["Validators"].required]],
            layer: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_64__["Validators"].required]]
        });
    };
    /**
     * @private
     * @param {?} file
     * @param {?} features
     * @return {?}
     */
    ImportExportComponent.prototype.onFileImportSuccess = /**
     * @private
     * @param {?} file
     * @param {?} features
     * @return {?}
     */
    function (file, features) {
        handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService);
    };
    /**
     * @private
     * @param {?} file
     * @param {?} error
     * @return {?}
     */
    ImportExportComponent.prototype.onFileImportError = /**
     * @private
     * @param {?} file
     * @param {?} error
     * @return {?}
     */
    function (file, error) {
        handleFileImportError(file, error, this.messageService, this.languageService);
    };
    /**
     * @private
     * @param {?} error
     * @return {?}
     */
    ImportExportComponent.prototype.onFileExportError = /**
     * @private
     * @param {?} error
     * @return {?}
     */
    function (error) {
        handleFileExportError(error, this.messageService, this.languageService);
    };
    ImportExportComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-import-export',
                    template: "<mat-tab-group>\r\n\r\n  <mat-tab [label]=\"'igo.geo.importExportForm.importTabTitle' |\u00A0translate\">\r\n    <form class=\"igo-form\">\r\n      <div class=\"igo-input-container\">\r\n        <mat-form-field>\r\n          <input\r\n            matInput\r\n            placeholder=\"{{'igo.geo.importExportForm.importProjPlaceholder' | translate}}\"\r\n            name=\"inputProj\"\r\n            [(ngModel)]=\"inputProj\">\r\n        </mat-form-field>\r\n      </div>\r\n\r\n      <div class=\"igo-form-button-group\">\r\n        <button mat-raised-button type=\"button\" (click)=\"fileInput.click()\">\r\n          {{'igo.geo.importExportForm.importButton' | translate}}\r\n        </button>\r\n        <input\r\n          #fileInput\r\n          type=\"file\"\r\n          [style.display]=\"'none'\"\r\n          (click)=\"fileInput.value = null\"\r\n          (change)=\"importFiles($event.target.files)\">\r\n      </div>\r\n    </form>\r\n  </mat-tab>\r\n\r\n  <mat-tab [label]=\"'igo.geo.importExportForm.exportTabTitle' |\u00A0translate\">\r\n    <form class=\"igo-form\" [formGroup]=\"form\">\r\n\r\n      <div class=\"igo-input-container\">\r\n        <mat-form-field>\r\n          <mat-select\r\n            formControlName=\"layer\"\r\n            placeholder=\"{{'igo.geo.importExportForm.exportLayerPlaceholder' | translate}}\">\r\n            <mat-option *ngFor=\"let layer of layers\" [value]=\"layer.id\">\r\n              {{layer.title}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n      <div class=\"igo-input-container\">\r\n        <mat-form-field>\r\n          <mat-select\r\n            formControlName=\"format\"\r\n            placeholder=\"{{'igo.geo.importExportForm.exportFormatPlaceholder' | translate}}\">\r\n            <mat-option *ngFor=\"let format of formats | keyvalue \" [value]=\"format.key\">\r\n              {{format.value}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n      <div class=\"igo-form-button-group\">\r\n        <button\r\n          mat-raised-button\r\n          type=\"button\"\r\n          [disabled]=\"!form.valid\"\r\n          (click)=\"handleExportFormSubmit(form.value)\">\r\n          {{'igo.geo.importExportForm.exportButton' | translate}}\r\n        </button>\r\n      </div>\r\n\r\n    </form>\r\n  </mat-tab>\r\n\r\n</mat-tab-group>\r\n",
                    styles: ["mat-form-field{width:100%}.igo-form{padding:5px}.igo-form-button-group{text-align:center;padding-top:10px}"]
                }] }
    ];
    /** @nocollapse */
    ImportExportComponent.ctorParameters = function () { return [
        { type: ImportService },
        { type: ExportService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["MessageService"] },
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormBuilder"] }
    ]; };
    ImportExportComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return ImportExportComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var DropGeoFileDirective = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(DropGeoFileDirective, _super);
    function DropGeoFileDirective(component, importService, languageService, messageService) {
        var _this = _super.call(this) || this;
        _this.component = component;
        _this.importService = importService;
        _this.languageService = languageService;
        _this.messageService = messageService;
        _this.filesDropped = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        _this.filesInvalid = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        return _this;
    }
    Object.defineProperty(DropGeoFileDirective.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this.component.map;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    DropGeoFileDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.filesDropped$$ = this.filesDropped.subscribe((/**
         * @param {?} files
         * @return {?}
         */
        function (files) {
            _this.onFilesDropped(files);
        }));
    };
    /**
     * @return {?}
     */
    DropGeoFileDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.filesDropped$$.unsubscribe();
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    DropGeoFileDirective.prototype.onDragOver = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        _super.prototype.onDragOver.call(this, evt);
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    DropGeoFileDirective.prototype.onDragLeave = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        _super.prototype.onDragLeave.call(this, evt);
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    DropGeoFileDirective.prototype.onDrop = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        _super.prototype.onDrop.call(this, evt);
    };
    /**
     * @private
     * @param {?} files
     * @return {?}
     */
    DropGeoFileDirective.prototype.onFilesDropped = /**
     * @private
     * @param {?} files
     * @return {?}
     */
    function (files) {
        var _this = this;
        var e_1, _a;
        var _loop_1 = function (file) {
            this_1.importService
                .import(file)
                .subscribe((/**
             * @param {?} features
             * @return {?}
             */
            function (features) { return _this.onFileImportSuccess(file, features); }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) { return _this.onFileImportError(file, error); }));
        };
        var this_1 = this;
        try {
            for (var files_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(files), files_1_1 = files_1.next(); !files_1_1.done; files_1_1 = files_1.next()) {
                var file = files_1_1.value;
                _loop_1(file);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (files_1_1 && !files_1_1.done && (_a = files_1.return)) _a.call(files_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    /**
     * @private
     * @param {?} file
     * @param {?} features
     * @return {?}
     */
    DropGeoFileDirective.prototype.onFileImportSuccess = /**
     * @private
     * @param {?} file
     * @param {?} features
     * @return {?}
     */
    function (file, features) {
        handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService);
    };
    /**
     * @private
     * @param {?} file
     * @param {?} error
     * @return {?}
     */
    DropGeoFileDirective.prototype.onFileImportError = /**
     * @private
     * @param {?} file
     * @param {?} error
     * @return {?}
     */
    function (file, error) {
        handleFileImportError(file, error, this.messageService, this.languageService);
    };
    DropGeoFileDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoDropGeoFile]'
                },] }
    ];
    /** @nocollapse */
    DropGeoFileDirective.ctorParameters = function () { return [
        { type: MapBrowserComponent },
        { type: ImportService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["MessageService"] }
    ]; };
    DropGeoFileDirective.propDecorators = {
        onDragOver: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["HostListener"], args: ['dragover', ['$event'],] }],
        onDragLeave: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["HostListener"], args: ['dragleave', ['$event'],] }],
        onDrop: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["HostListener"], args: ['drop', ['$event'],] }]
    };
    return DropGeoFileDirective;
}(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["DragAndDropDirective"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoImportExportModule = /** @class */ (function () {
    function IgoImportExportModule() {
    }
    /**
     * @return {?}
     */
    IgoImportExportModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoImportExportModule
        };
    };
    IgoImportExportModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["ReactiveFormsModule"],
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTabsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSelectModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatOptionModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatInputModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoKeyValueModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoDrapDropModule"]
                    ],
                    exports: [ImportExportComponent, DropGeoFileDirective],
                    declarations: [ImportExportComponent, DropGeoFileDirective]
                },] }
    ];
    return IgoImportExportModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoLayerModule = /** @class */ (function () {
    function IgoLayerModule() {
    }
    /**
     * @return {?}
     */
    IgoLayerModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoLayerModule,
            providers: [LayerService, StyleService, LayerListService]
        };
    };
    IgoLayerModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatFormFieldModule"],
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatListModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSliderModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatBadgeModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoListModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoCollapsibleModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoImageModule"]
                    ],
                    exports: [
                        LayerItemComponent,
                        LayerLegendComponent,
                        LayerListComponent,
                        LayerListBindingDirective
                    ],
                    declarations: [
                        LayerItemComponent,
                        LayerLegendComponent,
                        LayerListComponent,
                        LayerListBindingDirective
                    ]
                },] }
    ];
    return IgoLayerModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoMapModule = /** @class */ (function () {
    function IgoMapModule() {
    }
    IgoMapModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoConfirmDialogModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"]
                    ],
                    exports: [
                        MapBrowserComponent,
                        ZoomButtonComponent,
                        GeolocateButtonComponent,
                        RotationButtonComponent,
                        BaseLayersSwitcherComponent,
                        MiniBaseMapComponent,
                        MapOfflineDirective
                    ],
                    declarations: [
                        MapBrowserComponent,
                        ZoomButtonComponent,
                        GeolocateButtonComponent,
                        RotationButtonComponent,
                        BaseLayersSwitcherComponent,
                        MiniBaseMapComponent,
                        MapOfflineDirective
                    ]
                },] }
    ];
    return IgoMapModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Measurer item
 */
var MeasurerItemComponent = /** @class */ (function () {
    function MeasurerItemComponent() {
        /**
         * Measure observable
         * \@internal
         */
        this.measure$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"](undefined);
        this._auto = false;
        /**
         * Event emitted when the measure unit changes
         */
        this.measureUnitChange = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    Object.defineProperty(MeasurerItemComponent.prototype, "measure", {
        get: /**
         * @return {?}
         */
        function () { return this.measure$.value; },
        /**
         * Measure
         */
        set: /**
         * Measure
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.measure$.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MeasurerItemComponent.prototype, "auto", {
        get: /**
         * @return {?}
         */
        function () { return this._auto; },
        /**
         * Whther measure units should be automatically determined
         */
        set: /**
         * Whther measure units should be automatically determined
         * @param {?} value
         * @return {?}
         */
        function (value) { this.toggleAutoUnit(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MeasurerItemComponent.prototype, "measureUnits", {
        /**
         * Available measure units for the measure type given
         * @internal
         */
        get: /**
         * Available measure units for the measure type given
         * \@internal
         * @return {?}
         */
        function () {
            if (this.measureType === MeasureType.Area) {
                return Object.values(MeasureAreaUnit);
            }
            return Object.values(MeasureLengthUnit);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Toggle the auto unit off
     * @internal
     */
    /**
     * Toggle the auto unit off
     * \@internal
     * @return {?}
     */
    MeasurerItemComponent.prototype.ngOnDestroy = /**
     * Toggle the auto unit off
     * \@internal
     * @return {?}
     */
    function () {
        this.toggleAutoUnit(false);
    };
    /**
     * Set the measure unit
     * @internal
     */
    /**
     * Set the measure unit
     * \@internal
     * @param {?} unit
     * @return {?}
     */
    MeasurerItemComponent.prototype.onMeasureUnitChange = /**
     * Set the measure unit
     * \@internal
     * @param {?} unit
     * @return {?}
     */
    function (unit) {
        this.measureUnit = unit;
        this.measureUnitChange.emit(unit);
    };
    /**
     * @private
     * @param {?} toggle
     * @return {?}
     */
    MeasurerItemComponent.prototype.toggleAutoUnit = /**
     * @private
     * @param {?} toggle
     * @return {?}
     */
    function (toggle) {
        var _this = this;
        if (this.measure$$ !== undefined) {
            this.measure$$.unsubscribe();
        }
        if (toggle === true) {
            this.measure$$ = this.measure$.subscribe((/**
             * @param {?} measure
             * @return {?}
             */
            function (measure) {
                _this.computeBestMeasureUnit(measure);
            }));
        }
        this._auto = toggle;
    };
    /**
     * @private
     * @param {?} measure
     * @return {?}
     */
    MeasurerItemComponent.prototype.computeBestMeasureUnit = /**
     * @private
     * @param {?} measure
     * @return {?}
     */
    function (measure) {
        /** @type {?} */
        var measureUnit = this.measureUnit;
        if (this.measureType === MeasureType.Area) {
            measureUnit = computeBestAreaUnit(measure);
        }
        else if (this.measureType === MeasureType.Length) {
            measureUnit = computeBestLengthUnit(measure);
        }
        if (measureUnit !== this.measureUnit) {
            this.onMeasureUnitChange(measureUnit);
        }
    };
    MeasurerItemComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-measurer-item',
                    template: "<mat-form-field class=\"measure-field\">\r\n  <input\r\n    matInput\r\n    [readonly]=\"true\"\r\n    [placeholder]=\"placeholder\"\r\n    [value]=\"((measure$ | async) || 0) | measureFormat: measureUnit\">\r\n</mat-form-field>\r\n<mat-form-field class=\"unit-field\">\r\n  <mat-select\r\n    [value]=\"measureUnit\"\r\n    [disabled]=\"auto\"\r\n    (selectionChange)=\"onMeasureUnitChange($event.value)\">\r\n    <mat-option *ngFor=\"let measureUnit of measureUnits\" [value]=\"measureUnit\">\r\n      {{('igo.geo.measure.' + measureUnit) | translate}}\r\n    </mat-option>\r\n  </mat-select>\r\n</mat-form-field>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host{display:flex;width:100%;padding:5px 10px}.measure-field{display:flex;flex-flow:column nowrap;width:100%}.unit-field{width:110px;margin-left:10px}"]
                }] }
    ];
    /** @nocollapse */
    MeasurerItemComponent.ctorParameters = function () { return []; };
    MeasurerItemComponent.propDecorators = {
        measureType: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        measureUnit: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        measure: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        auto: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        placeholder: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        measureUnitChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return MeasurerItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoMeasurerModule = /** @class */ (function () {
    function IgoMeasurerModule() {
    }
    IgoMeasurerModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonToggleModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSelectModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSlideToggleModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoEntityTableModule"]
                    ],
                    declarations: [
                        MeasureFormatPipe,
                        MeasurerItemComponent,
                        MeasurerComponent,
                        MeasurerDialogComponent
                    ],
                    exports: [
                        MeasureFormatPipe,
                        MeasurerComponent
                    ],
                    entryComponents: [
                        MeasurerDialogComponent
                    ]
                },] }
    ];
    return IgoMeasurerModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoMeasureModule = /** @class */ (function () {
    function IgoMeasureModule() {
    }
    IgoMeasureModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: [
                        IgoMeasurerModule
                    ]
                },] }
    ];
    return IgoMeasureModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {number} */
var OverlayAction = {
    None: 0,
    Move: 1,
    Zoom: 2,
    ZoomIfOutMapExtent: 3,
};
OverlayAction[OverlayAction.None] = 'None';
OverlayAction[OverlayAction.Move] = 'Move';
OverlayAction[OverlayAction.Zoom] = 'Zoom';
OverlayAction[OverlayAction.ZoomIfOutMapExtent] = 'ZoomIfOutMapExtent';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OverlayService = /** @class */ (function () {
    function OverlayService() {
        this.features$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"]([
            [],
            undefined
        ]);
    }
    /**
     * @param {?} features
     * @param {?=} action
     * @return {?}
     */
    OverlayService.prototype.setFeatures = /**
     * @param {?} features
     * @param {?=} action
     * @return {?}
     */
    function (features, action) {
        if (action === void 0) { action = OverlayAction.None; }
        this.features$.next([features, action]);
    };
    /**
     * @return {?}
     */
    OverlayService.prototype.clear = /**
     * @return {?}
     */
    function () {
        this.features$.next([[], OverlayAction.None]);
    };
    OverlayService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    OverlayService.ctorParameters = function () { return []; };
    /** @nocollapse */ OverlayService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function OverlayService_Factory() { return new OverlayService(); }, token: OverlayService, providedIn: "root" });
    return OverlayService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OverlayDirective = /** @class */ (function () {
    function OverlayDirective(component, overlayService) {
        this.component = component;
        this.overlayService = overlayService;
        this.format = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_65__["default"]();
    }
    Object.defineProperty(OverlayDirective.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this.component.map;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    OverlayDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.features$$ = this.overlayService.features$.subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            return _this.handleFeatures(res[0], res[1]);
        }));
    };
    /**
     * @return {?}
     */
    OverlayDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.features$$.unsubscribe();
    };
    /**
     * @private
     * @param {?} features
     * @param {?} action
     * @return {?}
     */
    OverlayDirective.prototype.handleFeatures = /**
     * @private
     * @param {?} features
     * @param {?} action
     * @return {?}
     */
    function (features, action) { };
    OverlayDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoOverlay]'
                },] }
    ];
    /** @nocollapse */
    OverlayDirective.ctorParameters = function () { return [
        { type: MapBrowserComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Self"] }] },
        { type: OverlayService }
    ]; };
    return OverlayDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoOverlayModule = /** @class */ (function () {
    function IgoOverlayModule() {
    }
    /**
     * @return {?}
     */
    IgoOverlayModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoOverlayModule
        };
    };
    IgoOverlayModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [],
                    exports: [OverlayDirective],
                    declarations: [OverlayDirective]
                },] }
    ];
    return IgoOverlayModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var PrintOutputFormat = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["strEnum"])(['Pdf', 'Image']);
/** @type {?} */
var PrintPaperFormat = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["strEnum"])([
    'A0',
    'A1',
    'A2',
    'A3',
    'A4',
    'A5',
    'Letter',
    'Legal'
]);
/** @type {?} */
var PrintOrientation = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["strEnum"])(['landscape', 'portrait']);
/** @type {?} */
var PrintResolution = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["strEnum"])(['72', '96', '150', '300']);
/** @type {?} */
var PrintSaveImageFormat = Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["strEnum"])([
    'Bmp',
    'Gif',
    'Jpeg',
    'Png',
    'Tiff'
]);

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var html2canvas = html2canvas__WEBPACK_IMPORTED_MODULE_55__;
var PrintService = /** @class */ (function () {
    function PrintService(messageService, activityService, languageService) {
        this.messageService = messageService;
        this.activityService = activityService;
        this.languageService = languageService;
    }
    /**
     * @param {?} map
     * @param {?} options
     * @return {?}
     */
    PrintService.prototype.print = /**
     * @param {?} map
     * @param {?} options
     * @return {?}
     */
    function (map$$1, options) {
        var _this = this;
        /** @type {?} */
        var status$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /** @type {?} */
        var paperFormat = options.paperFormat;
        /** @type {?} */
        var resolution = +options.resolution;
        // Default is 96
        /** @type {?} */
        var orientation = options.orientation;
        this.activityId = this.activityService.register();
        /** @type {?} */
        var doc = new jspdf__WEBPACK_IMPORTED_MODULE_54__({
            orientation: orientation,
            format: paperFormat.toLowerCase()
        });
        /** @type {?} */
        var dimensions = [
            doc.internal.pageSize.width,
            doc.internal.pageSize.height
        ];
        /** @type {?} */
        var margins = [20, 10, 20, 10];
        /** @type {?} */
        var width = dimensions[0] - margins[3] - margins[1];
        /** @type {?} */
        var height = dimensions[1] - margins[0] - margins[2];
        /** @type {?} */
        var size = [width, height];
        if (options.title !== undefined) {
            this.addTitle(doc, options.title, dimensions[0]);
        }
        if (options.showProjection === true || options.showScale === true) {
            this.addProjScale(doc, map$$1, resolution, options.showProjection, options.showScale);
        }
        if (options.comment !== '') {
            this.addComment(doc, options.comment);
        }
        this.addMap(doc, map$$1, resolution, size, margins).subscribe((/**
         * @param {?} status
         * @return {?}
         */
        function (status) {
            if (status === _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done) {
                if (options.showLegend === true) {
                    _this.addLegend(doc, map$$1, margins, resolution);
                }
                else {
                    _this.saveDoc(doc);
                }
            }
            if (status === _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done || status === _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Error) {
                _this.activityService.unregister(_this.activityId);
                status$.next(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done);
            }
        }));
        return status$;
    };
    /**
     * Get html code for all layers legend
     * @param  map IgoMap
     * @param  width The width that the legend need to be
     * @return Html code for the legend
     */
    /**
     * Get html code for all layers legend
     * @param {?} map IgoMap
     * @param {?} width The width that the legend need to be
     * @param {?} resolution
     * @return {?} Html code for the legend
     */
    PrintService.prototype.getLayersLegendHtml = /**
     * Get html code for all layers legend
     * @param {?} map IgoMap
     * @param {?} width The width that the legend need to be
     * @param {?} resolution
     * @return {?} Html code for the legend
     */
    function (map$$1, width, resolution) {
        /** @type {?} */
        var html = '';
        /** @type {?} */
        var legends = getLayersLegends(map$$1.layers, map$$1.viewController.getScale(resolution));
        if (legends.length === 0) {
            return html;
        }
        // Define important style to be sure that all container is convert
        // to image not just visible part
        html += '<style media="screen" type="text/css">';
        html += '.html2canvas-container { width: ' + width;
        html += 'mm !important; height: 2000px !important; }';
        html += '</style>';
        html += '<font size="2" face="Courier New" >';
        html += '<div style="display:inline-block;max-width:' + width + 'mm">';
        // For each legend, define an html table cell
        legends.forEach((/**
         * @param {?} legend
         * @return {?}
         */
        function (legend) {
            html +=
                '<table border=1 style="display:inline-block;vertical-align:top">';
            html += '<tr><th width="170px">' + legend.title + '</th>';
            html += '<td><img class="printImageLegend" src="' + legend.url + '">';
            html += '</td></tr></table>';
        }));
        html += '</div>';
        return html;
    };
    /**
     * Get all the legend in a single image
     * * @param  format - Image format. default value to "png"
     * @return The image of the legend
     */
    /**
     * Get all the legend in a single image
     * * \@param  format - Image format. default value to "png"
     * @param {?} map
     * @param {?=} format
     * @param {?=} doZipFile
     * @param {?=} resolution
     * @return {?} The image of the legend
     */
    PrintService.prototype.getLayersLegendImage = /**
     * Get all the legend in a single image
     * * \@param  format - Image format. default value to "png"
     * @param {?} map
     * @param {?=} format
     * @param {?=} doZipFile
     * @param {?=} resolution
     * @return {?} The image of the legend
     */
    function (map$$1, format, doZipFile, resolution) {
        if (format === void 0) { format = 'png'; }
        /** @type {?} */
        var status$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        // Get html code for the legend
        /** @type {?} */
        var width = 200;
        // milimeters unit, originally define for document pdf
        /** @type {?} */
        var html = this.getLayersLegendHtml(map$$1, width, resolution);
        /** @type {?} */
        var that = this;
        format = format.toLowerCase();
        // If no legend show No LEGEND in an image
        if (html.length === 0) {
            html = '<font size="12" face="Courier New" >';
            html += '<div align="center"><b>NO LEGEND</b></div>';
        }
        // Create div to contain html code for legend
        /** @type {?} */
        var div = window.document.createElement('div');
        // Add html code to convert in the new window
        window.document.body.appendChild(div);
        div.innerHTML = html;
        // Define event to execute after all images are loaded to create the canvas
        setTimeout((/**
         * @return {?}
         */
        function () {
            html2canvas(div, { useCORS: true }).then((/**
             * @param {?} canvas
             * @return {?}
             */
            function (canvas) {
                /** @type {?} */
                var status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done;
                try {
                    if (!doZipFile) {
                        // Save the canvas as file
                        that.saveCanvasImageAsFile(canvas, 'legendImage', format);
                    }
                    else {
                        // Add the canvas to zip
                        that.generateCanvaFileToZip(canvas, 'legendImage' + '.' + format);
                    }
                    div.parentNode.removeChild(div); // remove temp div (IE)
                }
                catch (err) {
                    status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Error;
                }
                status$.next(status);
            }));
        }), 500);
    };
    /**
     * @private
     * @param {?} doc
     * @param {?} title
     * @param {?} pageWidth
     * @return {?}
     */
    PrintService.prototype.addTitle = /**
     * @private
     * @param {?} doc
     * @param {?} title
     * @param {?} pageWidth
     * @return {?}
     */
    function (doc, title, pageWidth) {
        /** @type {?} */
        var pdfResolution = 96;
        /** @type {?} */
        var titleSize = 32;
        /** @type {?} */
        var titleWidth = ((titleSize * 25.4) / pdfResolution) * title.length;
        /** @type {?} */
        var titleMarginLeft;
        if (titleWidth > pageWidth) {
            titleMarginLeft = 0;
        }
        else {
            titleMarginLeft = (pageWidth - titleWidth) / 2;
        }
        doc.setFont('courier');
        doc.setFontSize(32);
        doc.text(title, titleMarginLeft, 15);
    };
    /**
     * Add comment to the document
     * * @param  doc - pdf document
     * * @param  comment - Comment to add in the document
     * * @param  size - Size of the document
     */
    /**
     * Add comment to the document
     * * \@param  doc - pdf document
     * * \@param  comment - Comment to add in the document
     * * \@param  size - Size of the document
     * @private
     * @param {?} doc
     * @param {?} comment
     * @return {?}
     */
    PrintService.prototype.addComment = /**
     * Add comment to the document
     * * \@param  doc - pdf document
     * * \@param  comment - Comment to add in the document
     * * \@param  size - Size of the document
     * @private
     * @param {?} doc
     * @param {?} comment
     * @return {?}
     */
    function (doc, comment) {
        /** @type {?} */
        var commentSize = 16;
        /** @type {?} */
        var commentMarginLeft = 20;
        /** @type {?} */
        var marginBottom = 5;
        /** @type {?} */
        var heightPixels = doc.internal.pageSize.height - marginBottom;
        doc.setFont('courier');
        doc.setFontSize(commentSize);
        doc.text(comment, commentMarginLeft, heightPixels);
    };
    /**
     * Add projection and/or scale to the document
     * @param  doc - pdf document
     * @param  map - Map of the app
     * @param  dpi - DPI resolution of the document
     * @param  projection - Bool to indicate if projection need to be added
     * @param  scale - Bool to indicate if scale need to be added
     */
    /**
     * Add projection and/or scale to the document
     * @private
     * @param {?} doc - pdf document
     * @param {?} map - Map of the app
     * @param {?} dpi - DPI resolution of the document
     * @param {?} projection - Bool to indicate if projection need to be added
     * @param {?} scale - Bool to indicate if scale need to be added
     * @return {?}
     */
    PrintService.prototype.addProjScale = /**
     * Add projection and/or scale to the document
     * @private
     * @param {?} doc - pdf document
     * @param {?} map - Map of the app
     * @param {?} dpi - DPI resolution of the document
     * @param {?} projection - Bool to indicate if projection need to be added
     * @param {?} scale - Bool to indicate if scale need to be added
     * @return {?}
     */
    function (doc, map$$1, dpi, projection, scale) {
        /** @type {?} */
        var translate = this.languageService.translate;
        /** @type {?} */
        var projScaleSize = 16;
        /** @type {?} */
        var projScaleMarginLeft = 20;
        /** @type {?} */
        var marginBottom = 15;
        /** @type {?} */
        var heightPixels = doc.internal.pageSize.height - marginBottom;
        /** @type {?} */
        var textProjScale = '';
        if (projection === true) {
            /** @type {?} */
            var projText = translate.instant('igo.geo.printForm.projection');
            textProjScale += projText + ': ' + map$$1.projection;
        }
        if (scale === true) {
            if (projection === true) {
                textProjScale += '   ';
            }
            /** @type {?} */
            var scaleText = translate.instant('igo.geo.printForm.scale');
            /** @type {?} */
            var mapScale = map$$1.viewController.getScale(dpi);
            textProjScale += scaleText + ' ~ 1 ' + formatScale(mapScale);
        }
        doc.setFont('courier');
        doc.setFontSize(projScaleSize);
        doc.text(textProjScale, projScaleMarginLeft, heightPixels);
    };
    /**
     * Add the legend to the document
     * @param  doc - Pdf document where legend will be added
     * @param  map - Map of the app
     * @param  margins - Page margins
     */
    /**
     * Add the legend to the document
     * @private
     * @param {?} doc - Pdf document where legend will be added
     * @param {?} map - Map of the app
     * @param {?} margins - Page margins
     * @param {?} resolution
     * @return {?}
     */
    PrintService.prototype.addLegend = /**
     * Add the legend to the document
     * @private
     * @param {?} doc - Pdf document where legend will be added
     * @param {?} map - Map of the app
     * @param {?} margins - Page margins
     * @param {?} resolution
     * @return {?}
     */
    function (doc, map$$1, margins, resolution) {
        var _this = this;
        /** @type {?} */
        var that = this;
        // Get html code for the legend
        /** @type {?} */
        var width = doc.internal.pageSize.width;
        /** @type {?} */
        var html = this.getLayersLegendHtml(map$$1, width, resolution);
        // If no legend, save the map directly
        if (html === '') {
            this.saveDoc(doc);
            return true;
        }
        // Create div to contain html code for legend
        /** @type {?} */
        var div = window.document.createElement('div');
        html2canvas(div, { useCORS: true }).then((/**
         * @param {?} canvas
         * @return {?}
         */
        function (canvas) {
            /** @type {?} */
            var imgData;
            /** @type {?} */
            var position = 10;
            imgData = canvas.toDataURL('image/png');
            doc.addPage();
            /** @type {?} */
            var imageSize = _this.getImageSizeToFitPdf(doc, canvas, margins);
            doc.addImage(imgData, 'PNG', 10, position, imageSize[0], imageSize[1]);
            that.saveDoc(doc);
            div.parentNode.removeChild(div); // remove temp div (IE style)
        }));
        // Add html code to convert in the new window
        window.document.body.appendChild(div);
        div.innerHTML = html;
    };
    /**
     * @private
     * @param {?} doc
     * @param {?} canvas
     * @param {?} margins
     * @return {?}
     */
    PrintService.prototype.addCanvas = /**
     * @private
     * @param {?} doc
     * @param {?} canvas
     * @param {?} margins
     * @return {?}
     */
    function (doc, canvas, margins) {
        /** @type {?} */
        var image;
        image = canvas.toDataURL('image/jpeg');
        if (image !== undefined) {
            /** @type {?} */
            var imageSize = this.getImageSizeToFitPdf(doc, canvas, margins);
            doc.addImage(image, 'JPEG', margins[3], margins[0], imageSize[0], imageSize[1]);
            doc.rect(margins[3], margins[0], imageSize[0], imageSize[1]);
        }
    };
    // TODO fix printing with image resolution
    // TODO fix printing with image resolution
    /**
     * @private
     * @param {?} doc
     * @param {?} map
     * @param {?} resolution
     * @param {?} size
     * @param {?} margins
     * @return {?}
     */
    PrintService.prototype.addMap = 
    // TODO fix printing with image resolution
    /**
     * @private
     * @param {?} doc
     * @param {?} map
     * @param {?} resolution
     * @param {?} size
     * @param {?} margins
     * @return {?}
     */
    function (doc, map$$1, resolution, size, margins) {
        var _this = this;
        /** @type {?} */
        var status$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /** @type {?} */
        var mapSize = map$$1.ol.getSize();
        /** @type {?} */
        var extent = map$$1.ol.getView().calculateExtent(mapSize);
        /** @type {?} */
        var widthPixels = Math.round((size[0] * resolution) / 25.4);
        /** @type {?} */
        var heightPixels = Math.round((size[1] * resolution) / 25.4);
        /** @type {?} */
        var timeout;
        map$$1.ol.once('postcompose', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            /** @type {?} */
            var canvas = event.context.canvas;
            /** @type {?} */
            var mapStatus$$ = map$$1.status$.subscribe((/**
             * @param {?} mapStatus
             * @return {?}
             */
            function (mapStatus) {
                clearTimeout(timeout);
                if (mapStatus !== _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done) {
                    return;
                }
                mapStatus$$.unsubscribe();
                /** @type {?} */
                var status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done;
                try {
                    _this.addCanvas(doc, canvas, margins);
                }
                catch (err) {
                    status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Error;
                    _this.messageService.error(_this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), _this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'), 'print');
                }
                _this.renderMap(map$$1, mapSize, extent);
                status$.next(status);
            }));
            // If no loading as started after 200ms, then probably no loading
            // is required.
            timeout = window.setTimeout((/**
             * @return {?}
             */
            function () {
                mapStatus$$.unsubscribe();
                /** @type {?} */
                var status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done;
                try {
                    _this.addCanvas(doc, canvas, margins);
                }
                catch (err) {
                    status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Error;
                    _this.messageService.error(_this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), _this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'), 'print');
                }
                _this.renderMap(map$$1, mapSize, extent);
                status$.next(status);
            }), 200);
        }));
        this.renderMap(map$$1, [widthPixels, heightPixels], extent);
        return status$;
    };
    /**
     * @param {?} nbFileToProcess
     * @return {?}
     */
    PrintService.prototype.defineNbFileToProcess = /**
     * @param {?} nbFileToProcess
     * @return {?}
     */
    function (nbFileToProcess) {
        this.nbFileToProcess = nbFileToProcess;
    };
    /**
     * Download an image of the map with addition of informations
     * @param  map - Map of the app
     * @param  format - Image format. default value to "png"
     * @param  projection - Indicate if projection need to be add. Default to false
     * @param  scale - Indicate if scale need to be add. Default to false
     * @param  legend - Indicate if the legend of layers need to be download. Default to false
     * @param  title - Title to add for the map - Default to blank
     * @param  comment - Comment to add for the map - Default to blank
     * @param  doZipFile - Indicate if we do a zip with the file
     * @return Image file of the map with extension format given as parameter
     */
    /**
     * Download an image of the map with addition of informations
     * @param {?} map - Map of the app
     * @param {?} resolution
     * @param {?=} format - Image format. default value to "png"
     * @param {?=} projection - Indicate if projection need to be add. Default to false
     * @param {?=} scale - Indicate if scale need to be add. Default to false
     * @param {?=} legend - Indicate if the legend of layers need to be download. Default to false
     * @param {?=} title - Title to add for the map - Default to blank
     * @param {?=} comment - Comment to add for the map - Default to blank
     * @param {?=} doZipFile - Indicate if we do a zip with the file
     * @return {?} Image file of the map with extension format given as parameter
     */
    PrintService.prototype.downloadMapImage = /**
     * Download an image of the map with addition of informations
     * @param {?} map - Map of the app
     * @param {?} resolution
     * @param {?=} format - Image format. default value to "png"
     * @param {?=} projection - Indicate if projection need to be add. Default to false
     * @param {?=} scale - Indicate if scale need to be add. Default to false
     * @param {?=} legend - Indicate if the legend of layers need to be download. Default to false
     * @param {?=} title - Title to add for the map - Default to blank
     * @param {?=} comment - Comment to add for the map - Default to blank
     * @param {?=} doZipFile - Indicate if we do a zip with the file
     * @return {?} Image file of the map with extension format given as parameter
     */
    function (map$$1, resolution, format, projection, scale, legend, title, comment, doZipFile) {
        var _this = this;
        if (format === void 0) { format = 'png'; }
        if (projection === void 0) { projection = false; }
        if (scale === void 0) { scale = false; }
        if (legend === void 0) { legend = false; }
        if (title === void 0) { title = ''; }
        if (comment === void 0) { comment = ''; }
        if (doZipFile === void 0) { doZipFile = true; }
        /** @type {?} */
        var status$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        // const resolution = map.ol.getView().getResolution();
        this.activityId = this.activityService.register();
        /** @type {?} */
        var translate = this.languageService.translate;
        map$$1.ol.once('postcompose', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            format = format.toLowerCase();
            /** @type {?} */
            var context = event.context;
            /** @type {?} */
            var newCanvas = document.createElement('canvas');
            /** @type {?} */
            var newContext = newCanvas.getContext('2d');
            // Postion in height to set the canvas in new canvas
            /** @type {?} */
            var positionHCanvas = 0;
            // Position in width to set the Proj/Scale in new canvas
            /** @type {?} */
            var positionWProjScale = 10;
            // Get height/width of map canvas
            /** @type {?} */
            var width = context.canvas.width;
            /** @type {?} */
            var height = context.canvas.height;
            // Set Font to calculate comment width
            newContext.font = '20px Calibri';
            /** @type {?} */
            var commentWidth = newContext.measureText(comment).width;
            // Add height for title if defined
            height = title !== '' ? height + 30 : height;
            // Add height for projection or scale (same line) if defined
            height = projection !== false || scale !== false ? height + 30 : height;
            /** @type {?} */
            var positionHProjScale = height - 10;
            // Define number of line depending of the comment length
            /** @type {?} */
            var commentNbLine = Math.ceil(commentWidth / width);
            // Add height for multiline comment if defined
            height = comment !== '' ? height + commentNbLine * 30 : height;
            /** @type {?} */
            var positionHComment = height - commentNbLine * 20 + 5;
            // Set the new canvas with the new calculated size
            newCanvas.width = width;
            newCanvas.height = height;
            // Patch Jpeg default black background to white
            if (format === 'jpeg') {
                newContext.fillStyle = '#ffffff';
                newContext.fillRect(0, 0, width, height);
                newContext.fillStyle = '#000000';
            }
            // If a title need to be added to canvas
            if (title !== '') {
                // Set font for title
                newContext.font = '26px Calibri';
                positionHCanvas = 30;
                newContext.textAlign = 'center';
                newContext.fillText(title, width / 2, 20);
            }
            // Set font for next section
            newContext.font = '20px Calibri';
            // If projection need to be added to canvas
            if (projection !== false) {
                /** @type {?} */
                var projText = translate.instant('igo.geo.printForm.projection');
                newContext.textAlign = 'start';
                newContext.fillText(projText + ': ' + map$$1.projection, positionWProjScale, positionHProjScale);
                positionWProjScale += 200; // Width position change for scale position
            }
            // If scale need to be added to canvas
            if (scale !== false) {
                /** @type {?} */
                var scaleText = translate.instant('igo.geo.printForm.scale');
                /** @type {?} */
                var mapScale = map$$1.viewController.getScale(resolution);
                newContext.textAlign = 'start';
                newContext.fillText(scaleText + ' ~ 1 : ' + formatScale(mapScale), positionWProjScale, positionHProjScale);
            }
            // If a comment need to be added to canvas
            if (comment !== '') {
                newContext.textAlign = 'center';
                // If only one line, no need to multiline the comment
                if (commentNbLine === 1) {
                    newContext.fillText(comment, width / 2, positionHComment);
                }
                else {
                    // Separate the setenses to be approx. the same length
                    /** @type {?} */
                    var nbCommentChar = comment.length;
                    /** @type {?} */
                    var CommentLengthToCut = Math.floor(nbCommentChar / commentNbLine);
                    /** @type {?} */
                    var commentCurrentLine = '';
                    /** @type {?} */
                    var positionFirstCutChar = 0;
                    /** @type {?} */
                    var positionLastBlank = void 0;
                    // Loop for the number of line calculated
                    for (var i = 0; i < commentNbLine; i++) {
                        // For all line except last
                        if (commentNbLine - 1 > i) {
                            // Get comment current line to find the right place tu cut comment
                            commentCurrentLine = comment.substr(positionFirstCutChar, CommentLengthToCut);
                            // Cut the setence at blank
                            positionLastBlank = commentCurrentLine.lastIndexOf(' ');
                            newContext.fillText(commentCurrentLine.substr(0, positionLastBlank), width / 2, positionHComment);
                            positionFirstCutChar += positionLastBlank;
                            // Go to next line for insertion
                            positionHComment += 20;
                        }
                        else {
                            // Don't cut last part
                            newContext.fillText(comment.substr(positionFirstCutChar), width / 2, positionHComment);
                        }
                    }
                }
            }
            // Add map to new canvas
            newContext.drawImage(context.canvas, 0, positionHCanvas);
            /** @type {?} */
            var status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Done;
            try {
                // Save the canvas as file
                if (!doZipFile) {
                    _this.saveCanvasImageAsFile(newCanvas, 'map', format);
                }
                else if (format.toLowerCase() === 'tiff') {
                    // Add the canvas to zip
                    _this.generateCanvaFileToZip(newCanvas, 'map' + map$$1.projection.replace(':', '_') + '.' + format);
                }
                else {
                    // Add the canvas to zip
                    _this.generateCanvaFileToZip(newCanvas, 'map' + '.' + format);
                }
            }
            catch (err) {
                status = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["SubjectStatus"].Error;
            }
            status$.next(status);
            if (format.toLowerCase() === 'tiff') {
                /** @type {?} */
                var tiwContent = _this.getWorldFileInformation(map$$1);
                /** @type {?} */
                var blob = new Blob([tiwContent], {
                    type: 'text/plain;charset=utf-8'
                });
                if (!doZipFile) {
                    // saveAs automaticly replace ':' for '_'
                    Object(file_saver__WEBPACK_IMPORTED_MODULE_53__["saveAs"])(blob, 'map' + map$$1.projection + '.tfw');
                    _this.saveFileProcessing();
                }
                else {
                    // Add the canvas to zip
                    _this.addFileToZip('map' + map$$1.projection.replace(':', '_') + '.tfw', blob);
                }
            }
        }));
        map$$1.ol.renderSync();
    };
    /**
     * @private
     * @param {?} map
     * @param {?} size
     * @param {?} extent
     * @return {?}
     */
    PrintService.prototype.renderMap = /**
     * @private
     * @param {?} map
     * @param {?} size
     * @param {?} extent
     * @return {?}
     */
    function (map$$1, size, extent) {
        map$$1.ol.renderSync();
    };
    /**
     * Save document
     * @param  doc - Document to save
     */
    /**
     * Save document
     * @private
     * @param {?} doc - Document to save
     * @return {?}
     */
    PrintService.prototype.saveDoc = /**
     * Save document
     * @private
     * @param {?} doc - Document to save
     * @return {?}
     */
    function (doc) {
        doc.save('map.pdf');
    };
    /**
     * Calculate the best Image size to fit in pdf
     * @param doc - Pdf Document
     * @param canvas - Canvas of image
     * @param margins - Page margins
     */
    /**
     * Calculate the best Image size to fit in pdf
     * @private
     * @param {?} doc - Pdf Document
     * @param {?} canvas - Canvas of image
     * @param {?} margins - Page margins
     * @return {?}
     */
    PrintService.prototype.getImageSizeToFitPdf = /**
     * Calculate the best Image size to fit in pdf
     * @private
     * @param {?} doc - Pdf Document
     * @param {?} canvas - Canvas of image
     * @param {?} margins - Page margins
     * @return {?}
     */
    function (doc, canvas, margins) {
        // Define variable to calculate best size to fit in one page
        /** @type {?} */
        var pageHeight = doc.internal.pageSize.getHeight() - (margins[0] + margins[2]);
        /** @type {?} */
        var pageWidth = doc.internal.pageSize.getWidth() - (margins[1] + margins[3]);
        /** @type {?} */
        var canHeight = canvas.height;
        /** @type {?} */
        var canWidth = canvas.width;
        /** @type {?} */
        var heightRatio = canHeight / pageHeight;
        /** @type {?} */
        var widthRatio = canWidth / pageWidth;
        /** @type {?} */
        var maxRatio = heightRatio > widthRatio ? heightRatio : widthRatio;
        /** @type {?} */
        var imgHeigh = maxRatio > 1 ? canHeight / maxRatio : canHeight;
        /** @type {?} */
        var imgWidth = maxRatio > 1 ? canWidth / maxRatio : canWidth;
        return [imgWidth, imgHeigh];
    };
    /**
     * Get a world file information for tiff
     * @param  map - Map of the app
     */
    /**
     * Get a world file information for tiff
     * @private
     * @param {?} map - Map of the app
     * @return {?}
     */
    PrintService.prototype.getWorldFileInformation = /**
     * Get a world file information for tiff
     * @private
     * @param {?} map - Map of the app
     * @return {?}
     */
    function (map$$1) {
        /** @type {?} */
        var currentResolution = map$$1.viewController.getResolution();
        /** @type {?} */
        var currentExtent = map$$1.getExtent();
        return [
            currentResolution,
            0,
            0,
            -currentResolution,
            currentExtent[0] + currentResolution / 0.5,
            currentExtent[3] - currentResolution / 0.5
        ].join('\n');
    };
    /**
     * Save canvas image as file
     * @param canvas - Canvas to save
     * @param name - Name of the file
     * @param format - file format
     */
    /**
     * Save canvas image as file
     * @private
     * @param {?} canvas - Canvas to save
     * @param {?} name - Name of the file
     * @param {?} format - file format
     * @return {?}
     */
    PrintService.prototype.saveCanvasImageAsFile = /**
     * Save canvas image as file
     * @private
     * @param {?} canvas - Canvas to save
     * @param {?} name - Name of the file
     * @param {?} format - file format
     * @return {?}
     */
    function (canvas, name, format) {
        /** @type {?} */
        var blobFormat = 'image/' + format;
        /** @type {?} */
        var that = this;
        try {
            canvas.toDataURL(); // Just to make the catch trigger wihtout toBlob Error throw not catched
            // If navigator is Internet Explorer
            if (navigator.msSaveBlob) {
                navigator.msSaveBlob(canvas.msToBlob(), name + '.' + format);
                this.saveFileProcessing();
            }
            else {
                canvas.toBlob((/**
                 * @param {?} blob
                 * @return {?}
                 */
                function (blob) {
                    // download image
                    Object(file_saver__WEBPACK_IMPORTED_MODULE_53__["saveAs"])(blob, name + '.' + format);
                    that.saveFileProcessing();
                }), blobFormat);
            }
        }
        catch (err) {
            this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'), 'print');
        }
    };
    /**
     * Add file to a zip
     * @param canvas - File to add to the zip
     * @param  name -Name of the fileoverview
     */
    /**
     * Add file to a zip
     * @private
     * @param {?} canvas - File to add to the zip
     * @param {?} name -Name of the fileoverview
     * @return {?}
     */
    PrintService.prototype.generateCanvaFileToZip = /**
     * Add file to a zip
     * @private
     * @param {?} canvas - File to add to the zip
     * @param {?} name -Name of the fileoverview
     * @return {?}
     */
    function (canvas, name) {
        /** @type {?} */
        var blobFormat = 'image/' + 'jpeg';
        /** @type {?} */
        var that = this;
        if (!this.hasOwnProperty('zipFile') ||
            typeof this.zipFile === 'undefined') {
            this.zipFile = new jszip__WEBPACK_IMPORTED_MODULE_56__();
        }
        try {
            canvas.toDataURL(); // Just to make the catch trigger wihtout toBlob Error throw not catched
            if (navigator.msSaveBlob) {
                this.addFileToZip(name, canvas.msToBlob());
            }
            else {
                canvas.toBlob((/**
                 * @param {?} blob
                 * @return {?}
                 */
                function (blob) {
                    that.addFileToZip(name, blob);
                }), blobFormat);
            }
        }
        catch (err) {
            this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'), 'print');
        }
    };
    /**
     * Add file to zip, if all file are zipped, download
     * @param name - Name of the files
     * @param blob - Contain of file
     */
    /**
     * Add file to zip, if all file are zipped, download
     * @private
     * @param {?} name - Name of the files
     * @param {?} blob - Contain of file
     * @return {?}
     */
    PrintService.prototype.addFileToZip = /**
     * Add file to zip, if all file are zipped, download
     * @private
     * @param {?} name - Name of the files
     * @param {?} blob - Contain of file
     * @return {?}
     */
    function (name, blob) {
        // add file to zip
        this.zipFile.file(name, blob);
        this.nbFileToProcess--;
        // If all files are proccessed
        if (this.nbFileToProcess === 0) {
            // Download zip file
            this.getZipFile();
            // Stop loading
            this.activityService.unregister(this.activityId);
        }
    };
    /**
     * @private
     * @return {?}
     */
    PrintService.prototype.saveFileProcessing = /**
     * @private
     * @return {?}
     */
    function () {
        this.nbFileToProcess--;
        // If all files are proccessed
        if (this.nbFileToProcess === 0) {
            // Stop loading
            this.activityService.unregister(this.activityId);
        }
    };
    /**
     * Get the zipped file
     * @return Retun a zip file
     */
    /**
     * Get the zipped file
     * @private
     * @return {?} Retun a zip file
     */
    PrintService.prototype.getZipFile = /**
     * Get the zipped file
     * @private
     * @return {?} Retun a zip file
     */
    function () {
        /** @type {?} */
        var that = this;
        this.zipFile.generateAsync({ type: 'blob' }).then((/**
         * @param {?} blob
         * @return {?}
         */
        function (blob) {
            // 1) generate the zip file
            Object(file_saver__WEBPACK_IMPORTED_MODULE_53__["saveAs"])(blob, 'map.zip');
            delete that.zipFile;
        }));
    };
    PrintService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    PrintService.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["MessageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ActivityService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] }
    ]; };
    /** @nocollapse */ PrintService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function PrintService_Factory() { return new PrintService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["MessageService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["ActivityService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"])); }, token: PrintService, providedIn: "root" });
    return PrintService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var PrintComponent = /** @class */ (function () {
    function PrintComponent(printService) {
        this.printService = printService;
        this.disabled = false;
    }
    Object.defineProperty(PrintComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintComponent.prototype, "outputFormat", {
        get: /**
         * @return {?}
         */
        function () {
            return this._outputFormat;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._outputFormat = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintComponent.prototype, "paperFormat", {
        get: /**
         * @return {?}
         */
        function () {
            return this._paperFormat;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._paperFormat = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintComponent.prototype, "orientation", {
        get: /**
         * @return {?}
         */
        function () {
            return this._orientation;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._orientation = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintComponent.prototype, "imageFormat", {
        get: /**
         * @return {?}
         */
        function () {
            return this._imageFormat;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._imageFormat = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintComponent.prototype, "resolution", {
        get: /**
         * @return {?}
         */
        function () {
            return this._resolution;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._resolution = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} data
     * @return {?}
     */
    PrintComponent.prototype.handleFormSubmit = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.disabled = true;
        if (data.isPrintService === true) {
            this.printService
                .print(this.map, data)
                .subscribe();
        }
        else {
            /** @type {?} */
            var nbFileToProcess = 1;
            if (data.showLegend) {
                nbFileToProcess++;
            }
            if (data.imageFormat.toLowerCase() === 'tiff') {
                nbFileToProcess++;
            }
            this.printService.defineNbFileToProcess(nbFileToProcess);
            /** @type {?} */
            var resolution = +data.resolution;
            this.printService.downloadMapImage(this.map, resolution, data.imageFormat, data.showProjection, data.showScale, data.showLegend, data.title, data.comment, data.doZipFile);
            if (data.showLegend) {
                this.printService.getLayersLegendImage(this.map, data.imageFormat, data.doZipFile, +resolution);
            }
        }
        this.disabled = false;
    };
    PrintComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-print',
                    template: "<igo-print-form\r\n  [outputFormat]=\"outputFormat\"\r\n  [paperFormat]=\"paperFormat\"\r\n  [orientation]=\"orientation\"\r\n  [imageFormat]=\"imageFormat\"\r\n  [resolution]=\"resolution\"\r\n  [disabled]=\"disabled\"\r\n  (submit)=\"handleFormSubmit($event)\">\r\n</igo-print-form>\r\n"
                }] }
    ];
    /** @nocollapse */
    PrintComponent.ctorParameters = function () { return [
        { type: PrintService }
    ]; };
    PrintComponent.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        outputFormat: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        paperFormat: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        orientation: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        imageFormat: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        resolution: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return PrintComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var PrintFormComponent = /** @class */ (function () {
    function PrintFormComponent(formBuilder) {
        this.formBuilder = formBuilder;
        this.outputFormats = PrintOutputFormat;
        this.paperFormats = PrintPaperFormat;
        this.orientations = PrintOrientation;
        this.resolutions = PrintResolution;
        this.imageFormats = PrintSaveImageFormat;
        this.isPrintService = true;
        this._disabled = false;
        this.submit = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        this.form = this.formBuilder.group({
            title: ['', []],
            comment: ['', []],
            outputFormat: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_64__["Validators"].required]],
            paperFormat: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_64__["Validators"].required]],
            imageFormat: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_64__["Validators"].required]],
            resolution: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_64__["Validators"].required]],
            orientation: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_64__["Validators"].required]],
            showProjection: false,
            showScale: false,
            showLegend: false,
            doZipFile: [{ hidden: this.isPrintService }]
        });
    }
    Object.defineProperty(PrintFormComponent.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._disabled = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "imageFormat", {
        get: /**
         * @return {?}
         */
        function () {
            return this.imageFormatField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.imageFormatField.setValue(value || PrintSaveImageFormat.Jpeg, {
                onlySelf: true
            });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "outputFormat", {
        get: /**
         * @return {?}
         */
        function () {
            return this.outputFormatField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.outputFormatField.setValue(value || PrintOutputFormat.Pdf, {
                onlySelf: true
            });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "paperFormat", {
        get: /**
         * @return {?}
         */
        function () {
            return this.paperFormatField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.paperFormatField.setValue(value || PrintPaperFormat.Letter, {
                onlySelf: true
            });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "orientation", {
        get: /**
         * @return {?}
         */
        function () {
            return this.orientationField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.orientationField.setValue(value || PrintOrientation.landscape, {
                onlySelf: true
            });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "resolution", {
        get: /**
         * @return {?}
         */
        function () {
            return this.resolutionField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.resolutionField.setValue(value || PrintResolution['96'], {
                onlySelf: true
            });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "title", {
        get: /**
         * @return {?}
         */
        function () {
            return this.titleField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.titleField.setValue(value, { onlySelf: true });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "comment", {
        get: /**
         * @return {?}
         */
        function () {
            return this.commentField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.commentField.setValue(value, { onlySelf: true });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "showProjection", {
        get: /**
         * @return {?}
         */
        function () {
            return this.showProjectionField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.showProjectionField.setValue(value, { onlySelf: true });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "showScale", {
        get: /**
         * @return {?}
         */
        function () {
            return this.showScaleField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.showScaleField.setValue(value, { onlySelf: true });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "showLegend", {
        get: /**
         * @return {?}
         */
        function () {
            return this.showLegendField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.showLegendField.setValue(value, { onlySelf: true });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "doZipFile", {
        get: /**
         * @return {?}
         */
        function () {
            return this.doZipFileField.value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.doZipFileField.setValue(value, { onlySelf: true });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "outputFormatField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).outputFormat));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "paperFormatField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).paperFormat));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "imageFormatField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).imageFormat));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "orientationField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).orientation));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "resolutionField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).resolution));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "commentField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).comment));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "showProjectionField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).showProjection));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "showScaleField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).showScale));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "showLegendField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).showLegend));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "doZipFileField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).doZipFile));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrintFormComponent.prototype, "titleField", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (((/** @type {?} */ (this.form.controls))).title));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PrintFormComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.doZipFileField.setValue(false);
    };
    /**
     * @param {?} data
     * @param {?} isValid
     * @return {?}
     */
    PrintFormComponent.prototype.handleFormSubmit = /**
     * @param {?} data
     * @param {?} isValid
     * @return {?}
     */
    function (data, isValid) {
        this.submitted = true;
        data.isPrintService = this.isPrintService;
        if (isValid) {
            this.submit.emit(data);
        }
    };
    /**
     * @return {?}
     */
    PrintFormComponent.prototype.toggleImageSaveProp = /**
     * @return {?}
     */
    function () {
        if (this.outputFormatField.value === 'Image') {
            this.isPrintService = false;
        }
        else {
            this.isPrintService = true;
        }
    };
    PrintFormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-print-form',
                    template: "<form class=\"igo-form\" [formGroup]=\"form\">\r\n  <div class=\"igo-input-container\">\r\n    <mat-form-field>\r\n      <input\r\n        matInput\r\n        formControlName=\"title\"\r\n        placeholder=\"{{'igo.geo.printForm.title' | translate}}\">\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div class=\"igo-input-container\">\r\n    <mat-form-field>\r\n      <input\r\n        matInput\r\n        formControlName=\"comment\"\r\n        placeholder=\"{{'igo.geo.printForm.comment' | translate}}\">\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div class=\"igo-input-container\">\r\n    <div class=\"print-slide-toggle-container\">\r\n      <mat-slide-toggle\r\n        class=\"print-option\"\r\n        formControlName=\"showProjection\"\r\n        [labelPosition]=\"'before'\">\r\n        {{'igo.geo.printForm.showProjection' | translate}}\r\n      </mat-slide-toggle>\r\n      <mat-slide-toggle\r\n        class=\"print-option\"\r\n        formControlName=\"showScale\"\r\n        [labelPosition]=\"'before'\">\r\n        {{'igo.geo.printForm.showScale' | translate}}\r\n      </mat-slide-toggle>\r\n      <mat-slide-toggle\r\n        class=\"print-option\"\r\n        formControlName=\"showLegend\"\r\n        [labelPosition]=\"'before'\">\r\n        {{'igo.geo.printForm.showLegend' | translate}}\r\n      </mat-slide-toggle>\r\n      <mat-slide-toggle\r\n        class=\"print-option\"\r\n        formControlName=\"doZipFile\"\r\n        [labelPosition]=\"'before'\"\r\n        [style.display]=\"isPrintService ? 'none' : ''\">\r\n        {{'igo.geo.printForm.doZipFile' | translate}}\r\n      </mat-slide-toggle>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"igo-input-container\">\r\n    <mat-form-field>\r\n      <mat-select (selectionChange)=\"toggleImageSaveProp()\"\r\n        formControlName=\"outputFormat\"\r\n        placeholder=\"{{'igo.geo.printForm.outputFormat' | translate}}\">\r\n        <mat-option *ngFor=\"let outputFormat of outputFormats | keyvalue \" [value]=\"outputFormat.key\">\r\n            {{outputFormat.value}}\r\n        </mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div class=\"igo-input-container\" [style.display]=\"isPrintService ? 'block' : 'none'\">\r\n    <mat-form-field>\r\n      <mat-select\r\n        formControlName=\"paperFormat\"\r\n        placeholder=\"{{'igo.geo.printForm.paperFormat' | translate}}\">\r\n        <mat-option *ngFor=\"let paperFormat of paperFormats | keyvalue \" [value]=\"paperFormat.key\">\r\n          {{('igo.geo.printForm.paperFormats.' + paperFormat.value) | translate}}\r\n        </mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div class=\"igo-input-container\" [style.display]=\"isPrintService ? 'none' : 'block'\">\r\n    <mat-form-field>\r\n      <mat-select\r\n        formControlName=\"imageFormat\"\r\n        placeholder=\"{{'igo.geo.printForm.imageFormat' | translate}}\">\r\n        <mat-option *ngFor=\"let imageFormat of imageFormats | keyvalue \" [value]=\"imageFormat.key\">\r\n          {{imageFormat.value}}\r\n        </mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div class=\"igo-input-container\" style=\"display: none;\">\r\n    <mat-form-field>\r\n      <mat-select\r\n        formControlName=\"resolution\"\r\n        placeholder=\"{{'igo.geo.printForm.resolution' | translate}}\">\r\n        <mat-option *ngFor=\"let resolution of resolutions | keyvalue \" [value]=\"resolution.key\">\r\n          {{resolution.value + ' PPI'}}\r\n        </mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div class=\"igo-input-container\" [style.display]=\"isPrintService ? 'block' : 'none'\">\r\n    <mat-form-field>\r\n      <mat-select\r\n        formControlName=\"orientation\"\r\n        placeholder=\"{{'igo.geo.printForm.orientation' | translate}}\">\r\n        <mat-option *ngFor=\"let orientation of orientations | keyvalue \" [value]=\"orientation.key\">\r\n          {{('igo.geo.printForm.' + orientation.value) | translate}}\r\n        </mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <div class=\"igo-form-button-group print-button-top-padding\">\r\n    <button\r\n      mat-raised-button\r\n      type=\"button\"\r\n      [disabled]=\"!form.valid || disabled\"\r\n      (click)=\"handleFormSubmit(form.value, form.valid)\">\r\n      {{'igo.geo.printForm.saveBtn' | translate}}\r\n    </button>\r\n  </div>\r\n\r\n</form>\r\n",
                    styles: ["mat-form-field{width:100%}.print-slide-toggle-container{overflow-x:hidden}.print-slide-toggle-container mat-slide-toggle{width:100%;margin:10px}.print-slide-toggle-container mat-slide-toggle ::ng-deep .mat-slide-toggle-content{width:calc(100% - 60px);font-size:16px}.print-option{display:block;margin-right:10px;margin-bottom:15px}.print-button-top-padding{padding-top:25px}.igo-form{padding:10px 5px 5px}.igo-form-button-group{text-align:center}"]
                }] }
    ];
    /** @nocollapse */
    PrintFormComponent.ctorParameters = function () { return [
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormBuilder"] }
    ]; };
    PrintFormComponent.propDecorators = {
        disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        imageFormat: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        outputFormat: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        paperFormat: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        orientation: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        resolution: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        title: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        comment: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        showProjection: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        showScale: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        showLegend: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        doZipFile: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        submit: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return PrintFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoPrintModule = /** @class */ (function () {
    function IgoPrintModule() {
    }
    IgoPrintModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["ReactiveFormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSelectModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatOptionModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSlideToggleModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoKeyValueModule"]
                    ],
                    exports: [PrintComponent, PrintFormComponent],
                    declarations: [PrintComponent, PrintFormComponent]
                },] }
    ];
    return IgoPrintModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Map search source factory
 * @ignore
 * @param {?} config
 * @return {?}
 */
function querySearchSourceFactory(config) {
    return new QuerySearchSource(config.getConfig("searchSources." + QuerySearchSource.id) || {});
}
/**
 * Function that returns a provider for the map search source
 * @return {?}
 */
function provideQuerySearchSource() {
    return {
        provide: SearchSource,
        useFactory: querySearchSourceFactory,
        multi: true,
        deps: [_igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoQueryModule = /** @class */ (function () {
    function IgoQueryModule() {
    }
    /**
     * @return {?}
     */
    IgoQueryModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoQueryModule,
            providers: [provideQuerySearchSource()]
        };
    };
    IgoQueryModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"]],
                    exports: [QueryDirective],
                    declarations: [QueryDirective],
                    providers: [QueryService]
                },] }
    ];
    return IgoQueryModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service where all available search sources are registered.
 */
var  /**
 * Service where all available search sources are registered.
 */
SearchSourceService = /** @class */ (function () {
    function SearchSourceService(sources) {
        this.sources = sources;
    }
    /**
     * Return available search sources
     * @returns Search sources
     */
    /**
     * Return available search sources
     * @return {?} Search sources
     */
    SearchSourceService.prototype.getSources = /**
     * Return available search sources
     * @return {?} Search sources
     */
    function () {
        return this.sources;
    };
    /**
     * Return enabled search sources
     * @returns Search sources
     */
    /**
     * Return enabled search sources
     * @return {?} Search sources
     */
    SearchSourceService.prototype.getEnabledSources = /**
     * Return enabled search sources
     * @return {?} Search sources
     */
    function () {
        return this.getSources().filter((/**
         * @param {?} source
         * @return {?}
         */
        function (source) { return source.enabled === true; }));
    };
    /**
     * Enable search sources of given type
     * @param type Search type
     * @todo It would be better to track the enabled search sources
     *  without updating their 'enabled' property.
     */
    /**
     * Enable search sources of given type
     * \@todo It would be better to track the enabled search sources
     *  without updating their 'enabled' property.
     * @param {?} type Search type
     * @return {?}
     */
    SearchSourceService.prototype.enableSourcesByType = /**
     * Enable search sources of given type
     * \@todo It would be better to track the enabled search sources
     *  without updating their 'enabled' property.
     * @param {?} type Search type
     * @return {?}
     */
    function (type) {
        this.getSources().forEach((/**
         * @param {?} source
         * @return {?}
         */
        function (source) {
            if (((/** @type {?} */ (source.constructor))).type === type) {
                source.enabled = true;
            }
            else {
                source.enabled = false;
            }
        }));
    };
    /**
     * Set Param from the selected settings
     * @param source search-source
     * @param setting settings
     */
    /**
     * Set Param from the selected settings
     * @param {?} source search-source
     * @param {?} setting settings
     * @return {?}
     */
    SearchSourceService.prototype.setParamFromSetting = /**
     * Set Param from the selected settings
     * @param {?} source search-source
     * @param {?} setting settings
     * @return {?}
     */
    function (source, setting) {
        source.setParamFromSetting(setting);
    };
    return SearchSourceService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Function that checks whether a search source implements TextSearch
 * @param {?} source Search source
 * @return {?} True if the search source implements TextSearch
 */
function sourceCanSearch(source) {
    return ((/** @type {?} */ (source))).search !== undefined;
}
/**
 * Function that checks whether a search source implements ReverseSearch
 * @param {?} source Search source
 * @return {?} True if the search source implements ReverseSearch
 */
function sourceCanReverseSearch(source) {
    return ((/** @type {?} */ (source))).reverseSearch !== undefined;
}
/**
 * Return a search result out of an Feature. This is used to adapt
 * the IGO query module to the new Feature/SearchResult interfaces
 * @param {?} feature feature
 * @param {?} source Search source
 * @return {?} SearchResult
 */
function featureToSearchResult(feature, source) {
    return {
        source: source,
        data: feature,
        meta: {
            dataType: FEATURE,
            id: (/** @type {?} */ (feature.meta.id)),
            title: feature.meta.title,
            icon: 'map-marker'
        }
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This service perform researches in all the search sources enabled.
 * It returns Research objects who's 'request' property needs to be
 * subscribed to in order to trigger the research. This services has
 * keeps internal state of the researches it performed
 * and the results they yielded.
 */
var SearchService = /** @class */ (function () {
    function SearchService(searchSourceService, mapService) {
        this.searchSourceService = searchSourceService;
        this.mapService = mapService;
    }
    /**
     * Perform a research by text
     * @param term Any text
     * @returns Researches
     */
    /**
     * Perform a research by text
     * @param {?} term Any text
     * @param {?=} options
     * @return {?} Researches
     */
    SearchService.prototype.search = /**
     * Perform a research by text
     * @param {?} term Any text
     * @param {?=} options
     * @return {?} Researches
     */
    function (term, options) {
        if (!this.termIsValid(term)) {
            return [];
        }
        /** @type {?} */
        var response = stringToLonLat(term, this.mapService.getMap().projection);
        if (response.lonLat) {
            return this.reverseSearch(response.lonLat);
        }
        else {
            console.log(response.message);
        }
        /** @type {?} */
        var sources = this.searchSourceService.getEnabledSources()
            .filter(sourceCanSearch);
        return this.searchSources(sources, term, options || {});
    };
    /**
     * Perform a research by lon/lat
     * @param lonLat Any lon/lat coordinates
     * @returns Researches
     */
    /**
     * Perform a research by lon/lat
     * @param {?} lonLat Any lon/lat coordinates
     * @param {?=} options
     * @return {?} Researches
     */
    SearchService.prototype.reverseSearch = /**
     * Perform a research by lon/lat
     * @param {?} lonLat Any lon/lat coordinates
     * @param {?=} options
     * @return {?} Researches
     */
    function (lonLat, options) {
        /** @type {?} */
        var sources = this.searchSourceService.getEnabledSources()
            .filter(sourceCanReverseSearch);
        return this.reverseSearchSources(sources, lonLat, options || {});
    };
    /**
     * Create a text research out of all given search sources
     * @param sources Search sources that implement TextSearch
     * @param term Search term
     * @returns Observable of Researches
     */
    /**
     * Create a text research out of all given search sources
     * @private
     * @param {?} sources Search sources that implement TextSearch
     * @param {?} term Search term
     * @param {?} options
     * @return {?} Observable of Researches
     */
    SearchService.prototype.searchSources = /**
     * Create a text research out of all given search sources
     * @private
     * @param {?} sources Search sources that implement TextSearch
     * @param {?} term Search term
     * @param {?} options
     * @return {?} Observable of Researches
     */
    function (sources, term, options) {
        return sources.map((/**
         * @param {?} source
         * @return {?}
         */
        function (source) {
            return {
                request: ((/** @type {?} */ ((/** @type {?} */ (source))))).search(term, options),
                reverse: false,
                source: source
            };
        }));
    };
    /**
     * Create a reverse research out of all given search sources
     * @param sources Search sources that implement ReverseSearch
     * @param lonLat Any lon/lat coordinates
     * @returns Observable of Researches
     */
    /**
     * Create a reverse research out of all given search sources
     * @private
     * @param {?} sources Search sources that implement ReverseSearch
     * @param {?} lonLat Any lon/lat coordinates
     * @param {?} options
     * @return {?} Observable of Researches
     */
    SearchService.prototype.reverseSearchSources = /**
     * Create a reverse research out of all given search sources
     * @private
     * @param {?} sources Search sources that implement ReverseSearch
     * @param {?} lonLat Any lon/lat coordinates
     * @param {?} options
     * @return {?} Observable of Researches
     */
    function (sources, lonLat, options) {
        return sources.map((/**
         * @param {?} source
         * @return {?}
         */
        function (source) {
            return {
                request: ((/** @type {?} */ ((/** @type {?} */ (source))))).reverseSearch(lonLat, options),
                reverse: true,
                source: source
            };
        }));
    };
    /**
     * Validate that a search term is valid
     * @param term Search term
     * @returns True if the search term is valid
     */
    /**
     * Validate that a search term is valid
     * @private
     * @param {?} term Search term
     * @return {?} True if the search term is valid
     */
    SearchService.prototype.termIsValid = /**
     * Validate that a search term is valid
     * @private
     * @param {?} term Search term
     * @return {?} True if the search term is valid
     */
    function (term) {
        return typeof term === 'string' && term !== '';
    };
    SearchService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    SearchService.ctorParameters = function () { return [
        { type: SearchSourceService },
        { type: MapService }
    ]; };
    /** @nocollapse */ SearchService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function SearchService_Factory() { return new SearchService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(SearchSourceService), Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(MapService)); }, token: SearchService, providedIn: "root" });
    return SearchService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @abstract
 */
var  /**
 * @abstract
 */
RoutingSource = /** @class */ (function () {
    function RoutingSource() {
    }
    return RoutingSource;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var RoutingSourceService = /** @class */ (function () {
    function RoutingSourceService(sources) {
        this.sources = sources;
    }
    return RoutingSourceService;
}());
/**
 * @param {?} sources
 * @return {?}
 */
function routingSourceServiceFactory(sources) {
    return new RoutingSourceService(sources);
}
/**
 * @return {?}
 */
function provideRoutingSourceService() {
    return {
        provide: RoutingSourceService,
        useFactory: routingSourceServiceFactory,
        deps: [RoutingSource]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var RoutingService = /** @class */ (function () {
    function RoutingService(routingSourceService) {
        this.routingSourceService = routingSourceService;
    }
    /**
     * @param {?} coordinates
     * @return {?}
     */
    RoutingService.prototype.route = /**
     * @param {?} coordinates
     * @return {?}
     */
    function (coordinates) {
        var _this = this;
        if (coordinates.length === 0) {
            return;
        }
        return this.routingSourceService.sources
            .filter((/**
         * @param {?} source
         * @return {?}
         */
        function (source) { return source.enabled; }))
            .map((/**
         * @param {?} source
         * @return {?}
         */
        function (source) { return _this.routeSource(source, coordinates); }));
    };
    /**
     * @param {?} source
     * @param {?} coordinates
     * @return {?}
     */
    RoutingService.prototype.routeSource = /**
     * @param {?} source
     * @param {?} coordinates
     * @return {?}
     */
    function (source, coordinates) {
        /** @type {?} */
        var request = source.route(coordinates);
        return request;
    };
    RoutingService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    RoutingService.ctorParameters = function () { return [
        { type: RoutingSourceService }
    ]; };
    /** @nocollapse */ RoutingService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function RoutingService_Factory() { return new RoutingService(Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["inject"])(RoutingSourceService)); }, token: RoutingService, providedIn: "root" });
    return RoutingService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var RoutingFormService = /** @class */ (function () {
    function RoutingFormService() {
        this.mapWaitingForRoutingClick = false;
    }
    /**
     * @return {?}
     */
    RoutingFormService.prototype.getStopsCoordinates = /**
     * @return {?}
     */
    function () {
        return this.stopsCoordinates;
    };
    /**
     * @param {?} stopsCoordinates
     * @return {?}
     */
    RoutingFormService.prototype.setStopsCoordinates = /**
     * @param {?} stopsCoordinates
     * @return {?}
     */
    function (stopsCoordinates) {
        this.stopsCoordinates = stopsCoordinates;
    };
    /**
     * @return {?}
     */
    RoutingFormService.prototype.isMapWaitingForRoutingClick = /**
     * @return {?}
     */
    function () {
        return this.mapWaitingForRoutingClick;
    };
    /**
     * @return {?}
     */
    RoutingFormService.prototype.setMapWaitingForRoutingClick = /**
     * @return {?}
     */
    function () {
        this.mapWaitingForRoutingClick = true;
    };
    /**
     * @return {?}
     */
    RoutingFormService.prototype.unsetMapWaitingForRoutingClick = /**
     * @return {?}
     */
    function () {
        this.mapWaitingForRoutingClick = false;
    };
    RoutingFormService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    RoutingFormService.ctorParameters = function () { return []; };
    return RoutingFormService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var RoutingFormComponent = /** @class */ (function () {
    function RoutingFormComponent(formBuilder, routingService, languageService, messageService, searchService, queryService, routingFormService, route) {
        this.formBuilder = formBuilder;
        this.routingService = routingService;
        this.languageService = languageService;
        this.messageService = messageService;
        this.searchService = searchService;
        this.queryService = queryService;
        this.routingFormService = routingFormService;
        this.route = route;
        this.invalidKeys = ['Control', 'Shift', 'Alt'];
        this.projection = 'EPSG:4326';
        this.routesQueries$$ = [];
        this.stream$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        this.focusOnStop = false;
        this.focusKey = [];
        this._term = '';
        this._debounce = 300;
        this._length = 3;
        this.submit = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    Object.defineProperty(RoutingFormComponent.prototype, "term", {
        // https://stackoverflow.com/questions/46364852/create-input-fields-dynamically-in-angular-2
        get: 
        // https://stackoverflow.com/questions/46364852/create-input-fields-dynamically-in-angular-2
        /**
         * @return {?}
         */
        function () {
            return this._term;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._term = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RoutingFormComponent.prototype, "debounce", {
        get: /**
         * @return {?}
         */
        function () {
            return this._debounce;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._debounce = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RoutingFormComponent.prototype, "length", {
        get: /**
         * @return {?}
         */
        function () {
            return this._length;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._length = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RoutingFormComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} selectedRoute
     * @return {?}
     */
    RoutingFormComponent.prototype.changeRoute = /**
     * @param {?} selectedRoute
     * @return {?}
     */
    function (selectedRoute) {
        this.showRouteGeometry();
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.unsubscribeRoutesQueries();
        this.unlistenSingleClick();
        this.queryService.queryEnabled = true;
        /** @type {?} */
        var stopCoordinates = [];
        this.stops.value.forEach((/**
         * @param {?} stop
         * @return {?}
         */
        function (stop) {
            stopCoordinates.push(stop.stopCoordinates);
        }));
        this.routingRoutesOverlayDataSource.ol.clear();
        this.routingStopsOverlayDataSource.ol.clear();
        this.routingFormService.setStopsCoordinates(stopCoordinates);
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.browserLanguage = this.languageService.getLanguage();
        this.stopsForm = this.formBuilder.group({
            routingType: 'car',
            routingMode: 'driving',
            // loop
            stopOrderPriority: true,
            routingFixedStartEnd: false,
            stops: this.formBuilder.array([
                this.createStop('start'),
                this.createStop('end')
            ])
        });
        this.routingStopsOverlayDataSource = new FeatureDataSource({});
        this.routingRoutesOverlayDataSource = new FeatureDataSource({});
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.queryService.queryEnabled = false;
        this.focusOnStop = false;
        /** @type {?} */
        var stopsLayer = new VectorLayer({
            title: 'routingStopOverlay',
            zIndex: 999,
            id: 'routingStops',
            source: this.routingStopsOverlayDataSource,
            showInLayerList: false
        });
        /** @type {?} */
        var routesLayer = new VectorLayer({
            title: 'routingRoutesOverlay',
            zIndex: 999,
            id: 'routingRoutes',
            opacity: 0.75,
            source: this.routingRoutesOverlayDataSource,
            showInLayerList: false
        });
        this.map.addLayer(routesLayer);
        this.map.addLayer(stopsLayer);
        /** @type {?} */
        var selectedStopFeature;
        /** @type {?} */
        var selectStops = new ol_interaction__WEBPACK_IMPORTED_MODULE_62__["Select"]({
            layers: [stopsLayer.ol],
            condition: ol_events_condition__WEBPACK_IMPORTED_MODULE_61__["pointerMove"],
            hitTolerance: 7
        });
        /** @type {?} */
        var translateStop = new ol_interaction__WEBPACK_IMPORTED_MODULE_62__["Translate"]({
            layers: [stopsLayer.ol],
            features: selectedStopFeature
        });
        // TODO: Check to disable pointermove IF a stop is already selected
        /** @type {?} */
        var selectRouteHover = new ol_interaction__WEBPACK_IMPORTED_MODULE_62__["Select"]({
            layers: [routesLayer.ol],
            condition: ol_events_condition__WEBPACK_IMPORTED_MODULE_61__["pointerMove"],
            hitTolerance: 7
        });
        this.selectRoute = new ol_interaction__WEBPACK_IMPORTED_MODULE_62__["Select"]({
            layers: [routesLayer.ol],
            hitTolerance: 7
        });
        this.map.ol.on('pointermove', (/**
         * @param {?} evt
         * @return {?}
         */
        function (evt) {
            /** @type {?} */
            var selectRouteCnt = selectRouteHover.getFeatures().getLength();
            if (selectRouteCnt === 0) {
                _this.routingFormService.unsetMapWaitingForRoutingClick();
            }
            else {
                _this.routingFormService.setMapWaitingForRoutingClick();
            }
        }));
        selectStops.on('select', (/**
         * @param {?} evt
         * @return {?}
         */
        function (evt) {
            selectedStopFeature = evt.target.getFeatures()[0];
        }));
        this.selectRoute.on('select', (/**
         * @param {?} evt
         * @return {?}
         */
        function (evt) {
            if (_this.focusOnStop === false) {
                /** @type {?} */
                var selectCoordinates = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])(((/** @type {?} */ (evt))).mapBrowserEvent.coordinate, _this.map.projection, _this.projection);
                _this.addStop();
                /** @type {?} */
                var pos = _this.stops.length - 2;
                _this.stops.at(pos).patchValue({ stopCoordinates: selectCoordinates });
                _this.handleLocationProposals(selectCoordinates, pos);
                _this.addStopOverlay(selectCoordinates, pos);
                _this.selectRoute.getFeatures().clear();
            }
            _this.selectRoute.getFeatures().clear();
        }));
        this.routesQueries$$.push(this.stopsForm.statusChanges
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["debounceTime"])(this._debounce))
            .subscribe((/**
         * @param {?} val
         * @return {?}
         */
        function (val) { return _this.onFormChange(); })));
        translateStop.on('translateend', (/**
         * @param {?} evt
         * @return {?}
         */
        function (evt) {
            /** @type {?} */
            var translatedID = evt.features.getArray()[0].getId();
            /** @type {?} */
            var translatedPos = translatedID.split('_');
            /** @type {?} */
            var p;
            switch (translatedPos[1]) {
                case 'start':
                    p = 0;
                    break;
                case 'end':
                    p = _this.stops.length - 1;
                    break;
                default:
                    p = Number(translatedPos[1]);
                    break;
            }
            /** @type {?} */
            var translationEndCoordinates = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])(evt.features
                .getArray()[0]
                .getGeometry()
                .getCoordinates(), _this.map.projection, _this.projection);
            _this.stops
                .at(p)
                .patchValue({ stopCoordinates: translationEndCoordinates });
            _this.stops.at(p).patchValue({ stopProposals: [] });
            _this.handleLocationProposals(translationEndCoordinates, p);
        }));
        this.map.ol.addInteraction(selectStops);
        this.map.ol.addInteraction(selectRouteHover);
        this.map.ol.addInteraction(this.selectRoute);
        this.map.ol.addInteraction(translateStop);
        this.routesQueries$$.push(this.stream$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["debounceTime"])(this._debounce), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["distinctUntilChanged"])())
            .subscribe((/**
         * @param {?} term
         * @return {?}
         */
        function (term) { return _this.handleTermChanged(term); })));
    };
    /**
     * @param {?} coordinates
     * @param {?} stopIndex
     * @return {?}
     */
    RoutingFormComponent.prototype.handleLocationProposals = /**
     * @param {?} coordinates
     * @param {?} stopIndex
     * @return {?}
     */
    function (coordinates, stopIndex) {
        var _this = this;
        /** @type {?} */
        var groupedLocations = [];
        this.searchService
            .reverseSearch(coordinates, { zoom: this.map.getZoom() })
            .map((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            return _this.routesQueries$$.push(res.request.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} f
             * @return {?}
             */
            function (f) { return f; }))).subscribe((/**
             * @param {?} results
             * @return {?}
             */
            function (results) {
                results.forEach((/**
                 * @param {?} result
                 * @return {?}
                 */
                function (result) {
                    if (groupedLocations.filter((/**
                     * @param {?} f
                     * @return {?}
                     */
                    function (f) { return f.source === result.source; }))
                        .length === 0) {
                        groupedLocations.push({
                            source: result.source,
                            results: results.map((/**
                             * @param {?} r
                             * @return {?}
                             */
                            function (r) { return r.data; }))
                        });
                    }
                }));
                _this.stops
                    .at(stopIndex)
                    .patchValue({ stopProposals: groupedLocations });
                // TODO: Prefer another source?
                if (results[0]) {
                    if (results[0].source.getId() === 'icherchereverse') {
                        // prefer address type.
                        /** @type {?} */
                        var resultPos = 0;
                        for (var i = 0; i < results.length; i++) {
                            /** @type {?} */
                            var feature = results[i].data;
                            if (feature.properties.type === 'adresse') {
                                resultPos = i;
                                break;
                            }
                        }
                        _this.stops.at(stopIndex).patchValue({
                            stopPoint: Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityTitle"])(results[resultPos])
                        });
                        if (results[resultPos].data.geometry.type === 'Point') {
                            _this.stops.at(stopIndex).patchValue({
                                stopCoordinates: results[resultPos].data.geometry.coordinates
                            });
                        }
                    }
                }
                else {
                    _this.stops.at(stopIndex).patchValue({ stopPoint: coordinates });
                    _this.stops.at(stopIndex).patchValue({ stopProposals: [] });
                }
            })));
        }));
    };
    /**
     * @param {?} index
     * @return {?}
     */
    RoutingFormComponent.prototype.routingText = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (index === 0) {
            return 'start';
        }
        else if (index === this.stops.length - 1 || this.stops.length === 1) {
            return 'end';
        }
        else {
            return 'intermediate';
        }
    };
    /**
     * @param {?} index
     * @return {?}
     */
    RoutingFormComponent.prototype.raiseStop = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (index > 0) {
            this.moveStop(index, -1);
        }
    };
    /**
     * @param {?} index
     * @return {?}
     */
    RoutingFormComponent.prototype.lowerStop = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (index < this.stops.length - 1) {
            this.moveStop(index, 1);
        }
    };
    /**
     * @param {?} index
     * @param {?} diff
     * @return {?}
     */
    RoutingFormComponent.prototype.moveStop = /**
     * @param {?} index
     * @param {?} diff
     * @return {?}
     */
    function (index, diff) {
        /** @type {?} */
        var fromValue = this.stops.at(index);
        this.removeStop(index);
        this.stops.insert(index + diff, fromValue);
        this.stops.at(index).patchValue({ routingText: this.routingText(index) });
        this.stops
            .at(index + diff)
            .patchValue({ routingText: this.routingText(index + diff) });
        if (this.stops.at(index).value.stopCoordinates) {
            this.addStopOverlay(this.stops.at(index).value.stopCoordinates, index);
        }
        if (this.stops.at(index + diff).value.stopCoordinates) {
            this.addStopOverlay(this.stops.at(index + diff).value.stopCoordinates, index + diff);
        }
    };
    Object.defineProperty(RoutingFormComponent.prototype, "stops", {
        get: /**
         * @return {?}
         */
        function () {
            return (/** @type {?} */ (this.stopsForm.get('stops')));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.getStopsCoordinates = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var stopCoordinates = [];
        this.stops.value.forEach((/**
         * @param {?} stop
         * @return {?}
         */
        function (stop) {
            if (stop.stopCoordinates instanceof Array) {
                stopCoordinates.push(stop.stopCoordinates);
            }
        }));
        this.routingFormService.setStopsCoordinates(stopCoordinates);
        return stopCoordinates;
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.addStop = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var insertIndex = this.stops.length - 1;
        this.stops.insert(insertIndex, this.createStop());
    };
    /**
     * @param {?=} routingPos
     * @return {?}
     */
    RoutingFormComponent.prototype.createStop = /**
     * @param {?=} routingPos
     * @return {?}
     */
    function (routingPos) {
        if (routingPos === void 0) { routingPos = 'intermediate'; }
        return this.formBuilder.group({
            stopPoint: [''],
            stopProposals: [[]],
            routingText: routingPos,
            stopCoordinates: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_64__["Validators"].required]]
        });
    };
    /**
     * @param {?} index
     * @return {?}
     */
    RoutingFormComponent.prototype.removeStop = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        var _this = this;
        this.routingStopsOverlayDataSource.ol.clear();
        this.stops.removeAt(index);
        /** @type {?} */
        var cnt = 0;
        this.stops.value.forEach((/**
         * @param {?} stop
         * @return {?}
         */
        function (stop) {
            _this.stops.at(cnt).patchValue({ routingText: _this.routingText(cnt) });
            _this.addStopOverlay(_this.stops.at(cnt).value.stopCoordinates, cnt);
            cnt++;
        }));
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.resetForm = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.routesResults = undefined;
        /** @type {?} */
        var nbStops = this.stops.length;
        for (var i = 0; i < nbStops; i++) {
            this.stops.removeAt(0);
        }
        this.stops.insert(0, this.createStop('start'));
        this.stops.insert(1, this.createStop('end'));
        this.routingStopsOverlayDataSource.ol.getFeatures().forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            _this.deleteRoutingOverlaybyID(element.getId());
        }));
        this.routingRoutesOverlayDataSource.ol.clear();
        this.routingStopsOverlayDataSource.ol.clear();
        this.selectRoute.getFeatures().clear();
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.onFormChange = /**
     * @return {?}
     */
    function () {
        if (this.stopsForm.valid) {
            this.routingRoutesOverlayDataSource.ol.clear();
            /** @type {?} */
            var coords = this.getStopsCoordinates();
            if (coords.length >= 2) {
                this.getRoutes(coords);
            }
            else {
                this.routingRoutesOverlayDataSource.ol.clear();
            }
        }
    };
    /**
     * @param {?} step
     * @param {?} cnt
     * @return {?}
     */
    RoutingFormComponent.prototype.formatStep = /**
     * @param {?} step
     * @param {?} cnt
     * @return {?}
     */
    function (step, cnt) {
        return this.formatInstruction(step.maneuver.type, step.maneuver.modifier, step.name, step.maneuver.bearing_after, cnt, step.maneuver.exit, cnt === this.activeRoute.steps.length - 1);
    };
    /**
     * @param {?} type
     * @param {?} modifier
     * @param {?} route
     * @param {?} direction
     * @param {?} stepPosition
     * @param {?} exit
     * @param {?=} lastStep
     * @return {?}
     */
    RoutingFormComponent.prototype.formatInstruction = /**
     * @param {?} type
     * @param {?} modifier
     * @param {?} route
     * @param {?} direction
     * @param {?} stepPosition
     * @param {?} exit
     * @param {?=} lastStep
     * @return {?}
     */
    function (type, modifier, route, direction, stepPosition, exit, lastStep) {
        if (lastStep === void 0) { lastStep = false; }
        /** @type {?} */
        var directiveFr;
        /** @type {?} */
        var directiveEn;
        /** @type {?} */
        var image = 'arrow_forward';
        /** @type {?} */
        var cssClass = 'rotate-270';
        /** @type {?} */
        var translatedDirection = this.translateBearing(direction);
        /** @type {?} */
        var translatedModifier = this.translateModifier(modifier);
        /** @type {?} */
        var enPrefix = modifier === 'straight' ? '' : 'on the ';
        /** @type {?} */
        var frPrefix = modifier === 'straight' ? '' : 'à ';
        /** @type {?} */
        var frAggregatedDirection = frPrefix + translatedModifier;
        /** @type {?} */
        var enAggregatedDirection = enPrefix + translatedModifier;
        if (modifier && modifier.search('slight') >= 0) {
            enAggregatedDirection = translatedModifier;
        }
        if (modifier === 'uturn') {
            image = 'fast_forward';
            cssClass = 'rotate-90';
        }
        else if (modifier === 'sharp right') {
            image = 'subdirectory_arrow_right';
            cssClass = 'icon-flipped';
        }
        else if (modifier === 'right') {
            image = 'subdirectory_arrow_right';
            cssClass = 'icon-flipped';
        }
        else if (modifier === 'slight right') {
            image = 'arrow_forward';
            cssClass = 'rotate-290';
        }
        else if (modifier === 'straight') {
            image = 'arrow_forward';
        }
        else if (modifier === 'slight left') {
            image = 'arrow_forward';
            cssClass = 'rotate-250';
        }
        else if (modifier === 'left') {
            image = 'subdirectory_arrow_left';
            cssClass = 'icon-flipped';
        }
        else if (modifier === 'sharp left') {
            image = 'subdirectory_arrow_left';
            cssClass = 'icon-flipped';
        }
        if (type === 'turn') {
            if (modifier === 'straight') {
                directiveFr = 'Continuer sur ' + route;
                directiveEn = 'Continue on ' + route;
            }
            else if (modifier === 'uturn') {
                directiveFr = 'Faire demi-tour sur ' + route;
                directiveEn = 'Make u-turn on ' + route;
            }
            else {
                directiveFr = 'Tourner ' + frAggregatedDirection + ' sur ' + route;
                directiveEn = 'Turn ' + translatedModifier + ' onto ' + route;
            }
        }
        else if (type === 'new name') {
            directiveFr =
                'Continuer en direction ' + translatedDirection + ' sur ' + route;
            directiveEn = 'Head ' + translatedDirection + ' on ' + route;
            image = 'explore';
            cssClass = '';
        }
        else if (type === 'depart') {
            directiveFr =
                'Aller en direction ' + translatedDirection + ' sur ' + route;
            directiveEn = 'Head ' + translatedDirection + ' on ' + route;
            image = 'explore';
            cssClass = '';
        }
        else if (type === 'arrive') {
            if (lastStep) {
                /** @type {?} */
                var coma = ', ';
                if (!translatedModifier) {
                    frAggregatedDirection = '';
                    enAggregatedDirection = '';
                    coma = '';
                }
                directiveFr = 'Vous êtes arrivé' + coma + frAggregatedDirection;
                directiveEn =
                    'You have reached your destination' + coma + enAggregatedDirection;
            }
            else {
                directiveFr = 'Vous atteignez le point intermédiare sur ' + route;
                directiveEn = 'You have reached the intermediate stop onto ' + route;
                image = 'location_on';
                cssClass = '';
            }
        }
        else if (type === 'merge') {
            directiveFr = 'Continuer sur ' + route;
            directiveEn = 'Continue on ' + route;
            image = 'arrow_forward';
            cssClass = 'rotate-270';
        }
        else if (type === 'on ramp') {
            directiveFr = "Prendre l'entrée d'autoroute " + frAggregatedDirection;
            directiveEn = 'Take the ramp ' + enAggregatedDirection;
        }
        else if (type === 'off ramp') {
            directiveFr = "Prendre la sortie d'autoroute " + frAggregatedDirection;
            directiveEn = 'Take exit ' + enAggregatedDirection;
        }
        else if (type === 'fork') {
            if (modifier.search('left') >= 0) {
                directiveFr = 'Garder la gauche sur ' + route;
                directiveEn = 'Merge left onto ' + route;
            }
            else if (modifier.search('right') >= 0) {
                directiveFr = 'Garder la droite sur ' + route;
                directiveEn = 'Merge right onto ' + route;
            }
            else {
                directiveFr = 'Continuer sur ' + route;
                directiveEn = 'Continue on ' + route;
            }
        }
        else if (type === 'end of road') {
            directiveFr =
                'À la fin de la route, tourner ' + translatedModifier + ' sur ' + route;
            directiveEn =
                'At the end of the road, turn ' + translatedModifier + ' onto ' + route;
        }
        else if (type === 'use lane') {
            directiveFr = 'Prendre la voie de ... ';
            directiveEn = 'Take the lane ...';
        }
        else if (type === 'continue' && modifier !== 'uturn') {
            directiveFr = 'Continuer sur ' + route;
            directiveEn = 'Continue on ' + route;
            image = 'arrow_forward';
            cssClass = 'rotate-270';
        }
        else if (type === 'roundabout') {
            directiveFr = 'Au rond-point, prendre la ' + exit;
            directiveFr += exit === 1 ? 're' : 'e';
            directiveFr += ' sortie vers ' + route;
            directiveEn = 'At the roundabout, take the ' + exit;
            directiveEn += exit === 1 ? 'st' : 'rd';
            directiveEn += ' exit towards ' + route;
            image = 'donut_large';
            cssClass = '';
        }
        else if (type === 'rotary') {
            directiveFr = 'Rond-point rotary....';
            directiveEn = 'Roundabout rotary....';
            image = 'donut_large';
            cssClass = '';
        }
        else if (type === 'roundabout turn') {
            directiveFr = 'Rond-point, prendre la ...';
            directiveEn = 'Roundabout, take the ...';
            image = 'donut_large';
            cssClass = '';
        }
        else if (type === 'exit roundabout') {
            directiveFr = 'Poursuivre vers ' + route;
            directiveEn = 'Continue to ' + route;
            image = 'arrow_forward';
            cssClass = 'rotate-270';
        }
        else if (type === 'notification') {
            directiveFr = 'notification ....';
            directiveEn = 'notification ....';
        }
        else if (modifier === 'uturn') {
            directiveFr =
                'Faire demi-tour et continuer en direction ' +
                    translatedDirection +
                    ' sur ' +
                    route;
            directiveEn =
                'Make u-turn and head ' + translatedDirection + ' on ' + route;
        }
        else {
            directiveFr = '???';
            directiveEn = '???';
        }
        if (lastStep) {
            image = 'flag';
            cssClass = '';
        }
        if (stepPosition === 0) {
            image = 'explore';
            cssClass = '';
        }
        /** @type {?} */
        var directive;
        if (this.browserLanguage === 'fr') {
            directive = directiveFr;
        }
        else if (this.browserLanguage === 'en') {
            directive = directiveEn;
        }
        return { instruction: directive, image: image, cssClass: cssClass };
    };
    /**
     * @param {?} modifier
     * @return {?}
     */
    RoutingFormComponent.prototype.translateModifier = /**
     * @param {?} modifier
     * @return {?}
     */
    function (modifier) {
        if (modifier === 'uturn') {
            return this.languageService.translate.instant('igo.geo.routing.uturn');
        }
        else if (modifier === 'sharp right') {
            return this.languageService.translate.instant('igo.geo.routing.sharp right');
        }
        else if (modifier === 'right') {
            return this.languageService.translate.instant('igo.geo.routing.right');
        }
        else if (modifier === 'slight right') {
            return this.languageService.translate.instant('igo.geo.routing.slight right');
        }
        else if (modifier === 'sharp left') {
            return this.languageService.translate.instant('igo.geo.routing.sharp left');
        }
        else if (modifier === 'left') {
            return this.languageService.translate.instant('igo.geo.routing.left');
        }
        else if (modifier === 'slight left') {
            return this.languageService.translate.instant('igo.geo.routing.slight left');
        }
        else if (modifier === 'straight') {
            return this.languageService.translate.instant('igo.geo.routing.straight');
        }
        else {
            return modifier;
        }
    };
    /**
     * @param {?} bearing
     * @return {?}
     */
    RoutingFormComponent.prototype.translateBearing = /**
     * @param {?} bearing
     * @return {?}
     */
    function (bearing) {
        if (bearing >= 337 || bearing < 23) {
            return this.languageService.translate.instant('igo.geo.cardinalPoints.n');
        }
        else if (bearing < 67) {
            return this.languageService.translate.instant('igo.geo.cardinalPoints.ne');
        }
        else if (bearing < 113) {
            return this.languageService.translate.instant('igo.geo.cardinalPoints.e');
        }
        else if (bearing < 157) {
            return this.languageService.translate.instant('igo.geo.cardinalPoints.se');
        }
        else if (bearing < 203) {
            return this.languageService.translate.instant('igo.geo.cardinalPoints.s');
        }
        else if (bearing < 247) {
            return this.languageService.translate.instant('igo.geo.cardinalPoints.sw');
        }
        else if (bearing < 293) {
            return this.languageService.translate.instant('igo.geo.cardinalPoints.w');
        }
        else if (bearing < 337) {
            return this.languageService.translate.instant('igo.geo.cardinalPoints.nw');
        }
        else {
            return;
        }
    };
    /**
     * @param {?} distance
     * @return {?}
     */
    RoutingFormComponent.prototype.formatDistance = /**
     * @param {?} distance
     * @return {?}
     */
    function (distance) {
        if (distance === 0) {
            return;
        }
        if (distance >= 100000) {
            return Math.round(distance / 1000) + ' km';
        }
        if (distance >= 10000) {
            return Math.round(distance / 100) / 10 + ' km';
        }
        if (distance >= 100) {
            return Math.round(distance / 100) / 10 + ' km';
        }
        return distance + ' m';
    };
    /**
     * @param {?} duration
     * @param {?=} summary
     * @return {?}
     */
    RoutingFormComponent.prototype.formatDuration = /**
     * @param {?} duration
     * @param {?=} summary
     * @return {?}
     */
    function (duration$$1, summary) {
        if (summary === void 0) { summary = false; }
        if (duration$$1 >= 3600) {
            /** @type {?} */
            var hour = Math.floor(duration$$1 / 3600);
            /** @type {?} */
            var minute = Math.round((duration$$1 / 3600 - hour) * 60);
            if (minute === 60) {
                return hour + 1 + ' h';
            }
            return hour + ' h ' + minute + ' min';
        }
        if (duration$$1 >= 60) {
            return Math.round(duration$$1 / 60) + ' min';
        }
        return duration$$1 + ' s';
    };
    /**
     * @param {?} step
     * @param {?=} zoomToExtent
     * @return {?}
     */
    RoutingFormComponent.prototype.showSegment = /**
     * @param {?} step
     * @param {?=} zoomToExtent
     * @return {?}
     */
    function (step, zoomToExtent) {
        if (zoomToExtent === void 0) { zoomToExtent = false; }
        this.showRouteSegmentGeometry(step.geometry.coordinates, zoomToExtent);
    };
    /**
     * @param {?} coordinates
     * @param {?=} zoomToExtent
     * @return {?}
     */
    RoutingFormComponent.prototype.showRouteSegmentGeometry = /**
     * @param {?} coordinates
     * @param {?=} zoomToExtent
     * @return {?}
     */
    function (coordinates, zoomToExtent) {
        if (zoomToExtent === void 0) { zoomToExtent = false; }
        this.deleteRoutingOverlaybyID('endSegment');
        /** @type {?} */
        var geometry4326 = new ol_geom__WEBPACK_IMPORTED_MODULE_58__["LineString"](coordinates);
        /** @type {?} */
        var geometry3857 = geometry4326.transform('EPSG:4326', 'EPSG:3857');
        /** @type {?} */
        var routeSegmentCoordinates = ((/** @type {?} */ (geometry3857))).getCoordinates();
        /** @type {?} */
        var lastPoint = routeSegmentCoordinates[0];
        /** @type {?} */
        var geometry = new ol_geom__WEBPACK_IMPORTED_MODULE_58__["Point"](lastPoint);
        /** @type {?} */
        var feature = new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"]({ geometry: geometry });
        feature.setId('endSegment');
        if (geometry === null) {
            return;
        }
        if (geometry.getType() === 'Point') {
            feature.setStyle([
                new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                    geometry: geometry,
                    image: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Circle"]({
                        radius: 7,
                        stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({ color: '#FF0000', width: 3 })
                    })
                })
            ]);
        }
        if (zoomToExtent) {
            this.map.viewController.zoomToExtent(feature.getGeometry().getExtent());
        }
        this.routingRoutesOverlayDataSource.ol.addFeature(feature);
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.zoomRoute = /**
     * @return {?}
     */
    function () {
        this.map.viewController.zoomToExtent(this.routingRoutesOverlayDataSource.ol.getExtent());
    };
    /**
     * @param {?=} moveToExtent
     * @return {?}
     */
    RoutingFormComponent.prototype.showRouteGeometry = /**
     * @param {?=} moveToExtent
     * @return {?}
     */
    function (moveToExtent) {
        if (moveToExtent === void 0) { moveToExtent = false; }
        /** @type {?} */
        var geom = this.activeRoute.geometry.coordinates;
        /** @type {?} */
        var geometry4326 = new ol_geom__WEBPACK_IMPORTED_MODULE_58__["LineString"](geom);
        /** @type {?} */
        var geometry3857 = geometry4326.transform('EPSG:4326', 'EPSG:3857');
        this.routingRoutesOverlayDataSource.ol.clear();
        /** @type {?} */
        var routingFeature = new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"]({ geometry: geometry3857 });
        routingFeature.setStyle([
            new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({ color: '#6a7982', width: 10 })
            }),
            new ol_style__WEBPACK_IMPORTED_MODULE_60__["Style"]({
                stroke: new ol_style__WEBPACK_IMPORTED_MODULE_60__["Stroke"]({ color: '#4fa9dd', width: 6 })
            })
        ]);
        this.routingRoutesOverlayDataSource.ol.addFeature(routingFeature);
        if (moveToExtent) {
            this.map.viewController.zoomToExtent(this.routingRoutesOverlayDataSource.ol.getExtent());
        }
    };
    /**
     * @param {?} stopsArrayCoordinates
     * @param {?=} moveToExtent
     * @return {?}
     */
    RoutingFormComponent.prototype.getRoutes = /**
     * @param {?} stopsArrayCoordinates
     * @param {?=} moveToExtent
     * @return {?}
     */
    function (stopsArrayCoordinates, moveToExtent) {
        var _this = this;
        if (moveToExtent === void 0) { moveToExtent = false; }
        /** @type {?} */
        var routeResponse = this.routingService.route(stopsArrayCoordinates);
        if (routeResponse) {
            routeResponse.map((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                return _this.routesQueries$$.push(res.subscribe((/**
                 * @param {?} route
                 * @return {?}
                 */
                function (route) {
                    _this.routesResults = route;
                    _this.activeRoute = (/** @type {?} */ (_this.routesResults[0]));
                    _this.showRouteGeometry(moveToExtent);
                })));
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    RoutingFormComponent.prototype.unlistenSingleClick = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.focusKey.length !== 0) {
            this.focusKey.forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) {
                Object(ol_Observable__WEBPACK_IMPORTED_MODULE_63__["unByKey"])(key);
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    RoutingFormComponent.prototype.unsubscribeRoutesQueries = /**
     * @private
     * @return {?}
     */
    function () {
        this.routesQueries$$.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        function (sub) { return sub.unsubscribe(); }));
        this.routesQueries$$ = [];
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.copyLinkToClipboard = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var successful = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["Clipboard"].copy(this.getUrl());
        if (successful) {
            /** @type {?} */
            var translate = this.languageService.translate;
            /** @type {?} */
            var title = translate.instant('igo.geo.routingForm.dialog.copyTitle');
            /** @type {?} */
            var msg = translate.instant('igo.geo.routingForm.dialog.copyMsgLink');
            this.messageService.success(msg, title);
        }
    };
    /**
     * @return {?}
     */
    RoutingFormComponent.prototype.copyDirectionsToClipboard = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var indent = '\t';
        /** @type {?} */
        var activeRouteDirective = this.languageService.translate.instant('igo.geo.routingForm.instructions') + ':\n';
        /** @type {?} */
        var wayPointList = '';
        /** @type {?} */
        var summary = this.languageService.translate.instant('igo.geo.routingForm.summary') +
            ': \n' +
            indent +
            this.activeRoute.title +
            '\n' +
            indent +
            this.formatDistance(this.activeRoute.distance) +
            '\n' +
            indent +
            this.formatDuration(this.activeRoute.duration) +
            '\n\n' +
            this.languageService.translate.instant('igo.geo.routingForm.stopsList') +
            ':\n';
        /** @type {?} */
        var url = this.languageService.translate.instant('igo.geo.routingForm.link') +
            ':\n' +
            indent +
            this.getUrl();
        /** @type {?} */
        var wayPointsCnt = 1;
        this.stops.value.forEach((/**
         * @param {?} stop
         * @return {?}
         */
        function (stop) {
            /** @type {?} */
            var coord = '';
            /** @type {?} */
            var stopPoint = '';
            if (stop.stopPoint !== stop.stopCoordinates) {
                stopPoint = stop.stopPoint;
                coord =
                    ' (' +
                        [stop.stopCoordinates[1], stop.stopCoordinates[0]].join(',') +
                        ')';
            }
            else {
                stopPoint = [stop.stopCoordinates[1], stop.stopCoordinates[0]].join(',');
            }
            wayPointList =
                wayPointList +
                    indent +
                    wayPointsCnt.toLocaleString() +
                    '. ' +
                    stopPoint +
                    coord +
                    '\n';
            wayPointsCnt++;
        }));
        // Directions
        /** @type {?} */
        var localCnt = 0;
        this.activeRoute.steps.forEach((/**
         * @param {?} step
         * @return {?}
         */
        function (step) {
            /** @type {?} */
            var instruction = _this.formatStep(step, localCnt).instruction;
            /** @type {?} */
            var distance = _this.formatDistance(step.distance) === undefined
                ? ''
                : ' (' + _this.formatDistance(step.distance) + ')';
            activeRouteDirective =
                activeRouteDirective +
                    indent +
                    (localCnt + 1).toLocaleString() +
                    '. ' +
                    instruction +
                    distance +
                    '\n';
            localCnt++;
        }));
        /** @type {?} */
        var directionsBody = summary + wayPointList + '\n' + url + '\n\n' + activeRouteDirective;
        /** @type {?} */
        var successful = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["Clipboard"].copy(directionsBody);
        if (successful) {
            /** @type {?} */
            var translate = this.languageService.translate;
            /** @type {?} */
            var title = translate.instant('igo.geo.routingForm.dialog.copyTitle');
            /** @type {?} */
            var msg = translate.instant('igo.geo.routingForm.dialog.copyMsg');
            this.messageService.success(msg, title);
        }
    };
    /**
     * @private
     * @param {?} term
     * @return {?}
     */
    RoutingFormComponent.prototype.handleTermChanged = /**
     * @private
     * @param {?} term
     * @return {?}
     */
    function (term) {
        var _this = this;
        if (term !== undefined || term.length !== 0) {
            /** @type {?} */
            var searchProposals_1 = [];
            /** @type {?} */
            var researches = this.searchService.search(term);
            researches.map((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                return _this.routesQueries$$.push(res.request.subscribe((/**
                 * @param {?} results
                 * @return {?}
                 */
                function (results) {
                    results
                        .filter((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) { return r.data.geometry; }))
                        .forEach((/**
                     * @param {?} element
                     * @return {?}
                     */
                    function (element) {
                        if (searchProposals_1.filter((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) { return r.source === element.source; }))
                            .length === 0) {
                            searchProposals_1.push({
                                source: element.source,
                                results: results.map((/**
                                 * @param {?} r
                                 * @return {?}
                                 */
                                function (r) { return r.data; }))
                            });
                        }
                    }));
                    _this.stops
                        .at(_this.currentStopIndex)
                        .patchValue({ stopProposals: searchProposals_1 });
                })));
            }));
        }
    };
    /**
     * @param {?} term
     * @return {?}
     */
    RoutingFormComponent.prototype.setTerm = /**
     * @param {?} term
     * @return {?}
     */
    function (term) {
        this.term = term;
        if (this.keyIsValid(term) &&
            (term.length >= this.length || term.length === 0)) {
            this.stream$.next(term);
        }
    };
    /**
     * @private
     * @param {?} key
     * @return {?}
     */
    RoutingFormComponent.prototype.keyIsValid = /**
     * @private
     * @param {?} key
     * @return {?}
     */
    function (key) {
        return this.invalidKeys.find((/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return value === key; })) === undefined;
    };
    /**
     * @param {?} i
     * @param {?} event
     * @return {?}
     */
    RoutingFormComponent.prototype.keyup = /**
     * @param {?} i
     * @param {?} event
     * @return {?}
     */
    function (i, event) {
        var _this = this;
        /** @type {?} */
        var term = ((/** @type {?} */ (event.target))).value;
        this.setTerm(term);
        this.map.ol.un('singleclick', (/**
         * @param {?} evt
         * @return {?}
         */
        function (evt) {
            _this.handleMapClick(evt, i);
        }));
    };
    /**
     * @param {?} stopIndex
     * @return {?}
     */
    RoutingFormComponent.prototype.clearStop = /**
     * @param {?} stopIndex
     * @return {?}
     */
    function (stopIndex) {
        this.deleteRoutingOverlaybyID(this.getStopOverlayID(stopIndex));
        this.stops.removeAt(stopIndex);
        this.stops.insert(stopIndex, this.createStop(this.routingText(stopIndex)));
        this.routingRoutesOverlayDataSource.ol.clear();
    };
    /**
     * @param {?} proposal
     * @param {?} i
     * @return {?}
     */
    RoutingFormComponent.prototype.chooseProposal = /**
     * @param {?} proposal
     * @param {?} i
     * @return {?}
     */
    function (proposal, i) {
        if (proposal !== undefined) {
            /** @type {?} */
            var geomCoord = void 0;
            /** @type {?} */
            var geom = ((/** @type {?} */ (proposal))).geometry;
            if (geom.type === 'Point') {
                geomCoord = geom.coordinates;
            }
            else if (geom.type.search('Line') >= 0) {
                /** @type {?} */
                var coordArray = [];
                if (geom.coordinates instanceof Array) {
                    // Middle segment of multilinestring
                    coordArray =
                        geom.coordinates[Math.floor(geom.coordinates.length / 2)];
                }
                else {
                    coordArray = geom.coordinates;
                }
                // middle point of coords
                geomCoord = coordArray[Math.floor(coordArray.length / 2)];
            }
            else if (geom.type.search('Polygon') >= 0) {
                /** @type {?} */
                var polygonExtent = proposal.extent;
                /** @type {?} */
                var long = polygonExtent[0] + (polygonExtent[2] - polygonExtent[0]) / 2;
                /** @type {?} */
                var lat = polygonExtent[1] + (polygonExtent[3] - polygonExtent[1]) / 2;
                geomCoord = [long, lat];
            }
            if (geomCoord !== undefined) {
                this.stops.at(i).patchValue({ stopCoordinates: geomCoord });
                this.addStopOverlay(geomCoord, i);
                /** @type {?} */
                var proposalExtent = this.routingStopsOverlayDataSource.ol
                    .getFeatureById(this.getStopOverlayID(i))
                    .getGeometry()
                    .getExtent();
                if (!Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["intersects"])(proposalExtent, this.map.getExtent())) {
                    this.map.viewController.moveToExtent(proposalExtent);
                }
            }
        }
    };
    /**
     * @param {?} i
     * @return {?}
     */
    RoutingFormComponent.prototype.focus = /**
     * @param {?} i
     * @return {?}
     */
    function (i) {
        var _this = this;
        this.unlistenSingleClick();
        this.currentStopIndex = i;
        this.focusOnStop = true;
        this.routingFormService.setMapWaitingForRoutingClick();
        this.focusKey.push(this.map.ol.once('singleclick', (/**
         * @param {?} evt
         * @return {?}
         */
        function (evt) {
            _this.handleMapClick(evt, i);
        })));
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} indexPos
     * @return {?}
     */
    RoutingFormComponent.prototype.handleMapClick = /**
     * @private
     * @param {?} event
     * @param {?=} indexPos
     * @return {?}
     */
    function (event, indexPos) {
        var _this = this;
        this.stops.at(indexPos).patchValue({ stopProposals: [] });
        if (this.currentStopIndex === undefined) {
            this.addStop();
            indexPos = this.stops.length - 2;
            this.stops.at(indexPos).value.stopProposals = [];
        }
        else {
            indexPos = this.currentStopIndex;
        }
        /** @type {?} */
        var clickCoordinates = Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])(event.coordinate, this.map.projection, this.projection);
        this.stops.at(indexPos).patchValue({ stopCoordinates: clickCoordinates });
        this.handleLocationProposals(clickCoordinates, indexPos);
        this.addStopOverlay(clickCoordinates, indexPos);
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.focusOnStop = false; // prevent to trigger map click and Select on routes at same time.
        }), 500);
        this.routingFormService.unsetMapWaitingForRoutingClick();
    };
    /**
     * @param {?} index
     * @return {?}
     */
    RoutingFormComponent.prototype.geolocateStop = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        moveToOlFeatures(this.map, [this.map.geolocationFeature], FeatureMotion.Move);
        /** @type {?} */
        var geolocateCoordinates = this.map.getCenter(this.projection);
        this.stops.at(index).patchValue({ stopCoordinates: geolocateCoordinates });
        this.addStopOverlay(geolocateCoordinates, index);
        this.handleLocationProposals(geolocateCoordinates, index);
    };
    /**
     * @param {?} coordinates
     * @param {?} index
     * @return {?}
     */
    RoutingFormComponent.prototype.addStopOverlay = /**
     * @param {?} coordinates
     * @param {?} index
     * @return {?}
     */
    function (coordinates, index) {
        /** @type {?} */
        var routingText = this.routingText(index);
        /** @type {?} */
        var stopColor;
        /** @type {?} */
        var stopText;
        if (routingText === 'start') {
            stopColor = 'green';
            stopText = this.languageService.translate.instant('igo.geo.routingForm.start');
        }
        else if (routingText === 'end') {
            stopColor = 'red';
            stopText = this.languageService.translate.instant('igo.geo.routingForm.end');
        }
        else {
            stopColor = 'yellow';
            stopText =
                this.languageService.translate.instant('igo.geo.routingForm.intermediate') +
                    ' #' +
                    index;
        }
        /** @type {?} */
        var geometry = new ol_geom__WEBPACK_IMPORTED_MODULE_58__["Point"](Object(ol_proj__WEBPACK_IMPORTED_MODULE_59__["transform"])(coordinates, this.projection, this.map.projection));
        /** @type {?} */
        var feature = new ol_Feature__WEBPACK_IMPORTED_MODULE_57__["default"]({ geometry: geometry });
        /** @type {?} */
        var stopID = this.getStopOverlayID(index);
        this.deleteRoutingOverlaybyID(stopID);
        feature.setId(stopID);
        if (geometry === null) {
            return;
        }
        if (geometry.getType() === 'Point') {
            /** @type {?} */
            var olStyle = createOverlayMarkerStyle(stopColor);
            // stopText
            feature.setStyle(olStyle);
        }
        this.routingStopsOverlayDataSource.ol.addFeature(feature);
    };
    /**
     * @param {?} index
     * @return {?}
     */
    RoutingFormComponent.prototype.getStopOverlayID = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        /** @type {?} */
        var txt;
        if (index === 0) {
            txt = 'start';
        }
        else if (index === this.stops.length - 1) {
            txt = 'end';
        }
        else {
            txt = index;
        }
        return 'routingStop_' + txt;
    };
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    RoutingFormComponent.prototype.deleteRoutingOverlaybyID = /**
     * @private
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (this.routingStopsOverlayDataSource.ol.getFeatureById(id)) {
            this.routingStopsOverlayDataSource.ol.removeFeature(this.routingStopsOverlayDataSource.ol.getFeatureById(id));
        }
        if (this.routingRoutesOverlayDataSource.ol.getFeatureById(id)) {
            this.routingRoutesOverlayDataSource.ol.removeFeature(this.routingRoutesOverlayDataSource.ol.getFeatureById(id));
        }
    };
    /**
     * @private
     * @return {?}
     */
    RoutingFormComponent.prototype.getUrl = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.route) {
            return;
        }
        /** @type {?} */
        var routingKey = this.route.options.routingCoordKey;
        /** @type {?} */
        var stopsCoordinates = [];
        if (this.routingFormService &&
            this.routingFormService.getStopsCoordinates() &&
            this.routingFormService.getStopsCoordinates().length !== 0) {
            this.routingFormService.getStopsCoordinates().forEach((/**
             * @param {?} coord
             * @return {?}
             */
            function (coord) {
                stopsCoordinates.push(coord);
            }));
        }
        /** @type {?} */
        var routingUrl = '';
        if (stopsCoordinates.length >= 2) {
            routingUrl = routingKey + "=" + stopsCoordinates.join(';');
        }
        return "" + location.origin + location.pathname + "?tool=directions&" + routingUrl;
    };
    RoutingFormComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-routing-form',
                    template: "<form class=\"igo-form\" [formGroup]=\"stopsForm\">\r\n  <!-- <div class=\"igo-form-button-group\">\r\n\r\n  </div> -->\r\n  <div #inputs formArrayName=\"stops\" *ngFor=\"let stop of stops.controls; let i = index;\">\r\n    <mat-list-item [formGroupName]=\"i\">\r\n\r\n      <div class=\"igo-input-container\">\r\n        <button *ngIf=\"map.geolocationFeature\" mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.routingForm.geolocate' | translate\" (click)=\"geolocateStop(i)\">\r\n          <mat-icon svgIcon=\"crosshairs-gps\"></mat-icon>\r\n        </button>\r\n        <mat-form-field>\r\n          <input matInput formControlName=\"stopPoint\" [matAutocomplete]=\"auto\" placeholder=\"{{'igo.geo.routingForm.'+stop.value.routingText | translate}}\"\r\n            (focus)=\"focus(i)\" (keyup)=\"keyup(i,$event)\">\r\n\r\n          <mat-autocomplete #auto=\"matAutocomplete\">\r\n            <mat-optgroup *ngFor=\"let source of stop.value.stopProposals\" [label]=\"source.source\" [disabled]=\"source.disabled\">\r\n              <mat-option *ngFor=\"let result of source.results\" [value]=\"result.title\" (onSelectionChange)=\"chooseProposal(result,i)\">\r\n                {{ result.title }}\r\n              </mat-option>\r\n            </mat-optgroup>\r\n          </mat-autocomplete>\r\n        </mat-form-field>\r\n        <button mat-button *ngIf=\"stop.value && (stop.value.stopPoint.length>0 || stop.value.stopProposals.length>0)\" matSuffix mat-icon-button\r\n          aria-label=\"Clear\" (click)=\"clearStop(i)\">\r\n          <mat-icon svgIcon=\"close\"></mat-icon>\r\n        </button>\r\n        <!-- <div class=\"igo-form-button-group\"> -->\r\n\r\n\r\n          <!-- <button *ngIf=\"i !== 0\" mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.routingForm.raiseStop' | translate\"\r\n            [color]=\"color\" (click)=\"raiseStop(i)\">\r\n            <mat-icon svgIcon=\"arrow-upward\"></mat-icon>\r\n          </button>\r\n          <button *ngIf=\"i !== stops.length - 1\" mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.routingForm.lowerStop' | translate\"\r\n            [color]=\"color\" (click)=\"lowerStop(i)\">\r\n            <mat-icon svgIcon=\"arrow-downward\"></mat-icon>\r\n          </button> -->\r\n\r\n          <button *ngIf=\"i !== 0 && i !== stops.length - 1\" mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.routingForm.removeStop' | translate\"\r\n            color=\"warn\" (click)=\"removeStop(i)\">\r\n            <mat-icon svgIcon=\"delete\"></mat-icon>\r\n          </button>\r\n        <!-- </div> -->\r\n      </div>\r\n\r\n    </mat-list-item>\r\n  </div>\r\n  <div class=\"igo-form-button-group\">\r\n    <button mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\"\r\n      [matTooltip]=\"'igo.geo.routingForm.zoomRoute' | translate\"\r\n      *ngIf=\"routesResults\" color=\"primary\" (click)=\"zoomRoute()\">\r\n      <mat-icon svgIcon=\"zoom-in\"></mat-icon>\r\n    </button>\r\n      <button mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.routingForm.addStop' | translate\"\r\n      color=\"primary\" (click)=\"addStop()\">\r\n      <mat-icon svgIcon=\"map-marker-plus\"></mat-icon>\r\n    </button>\r\n    <button mat-icon-button tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.routingForm.resetRoutingBtn' | translate\"\r\n      *ngIf=\"routesResults\" color=\"warn\" (click)=\"resetForm()\">\r\n      <mat-icon svgIcon=\"restore-page\"></mat-icon>\r\n    </button>\r\n    <button mat-icon-button *ngIf=\"routesResults\" tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.routingForm.copy' | translate\"\r\n      color=\"primary\" (click)=\"copyDirectionsToClipboard()\">\r\n      <mat-icon svgIcon=\"content-copy\"></mat-icon>\r\n    </button>\r\n    <button mat-icon-button *ngIf=\"routesResults\" tooltip-position=\"below\" matTooltipShowDelay=\"500\" [matTooltip]=\"'igo.geo.routingForm.link' | translate\"\r\n    color=\"primary\" (click)=\"copyLinkToClipboard()\">\r\n    <mat-icon svgIcon=\"link\"></mat-icon>\r\n  </button>\r\n  </div>\r\n\r\n</form>\r\n\r\n<div class=\"igo-input-container\" *ngIf=\"routesResults\">\r\n  <mat-form-field *ngIf=\"routesResults && routesResults.length > 1\">\r\n    <mat-select placeholder=\"{{'igo.geo.routingForm.drivingOptions' | translate}}\" (selectionChange)=\"changeRoute($event)\" [(ngModel)]=\"activeRoute\">\r\n      <mat-option *ngFor=\"let pathRouting of routesResults; let cnt = index;\" [value]=\"pathRouting\">\r\n        Option {{cnt + 1}} : {{this.formatDistance(pathRouting.distance)}} ({{this.formatDuration(pathRouting.duration)}})\r\n      </mat-option>\r\n    </mat-select>\r\n  </mat-form-field>\r\n\r\n  <mat-divider *ngIf=\"routesResults && routesResults.length === 0\"></mat-divider>\r\n\r\n  <mat-list>\r\n    <h3 mat-header>{{activeRoute.title}}</h3>\r\n    <h3 mat-subheader>{{this.formatDistance(activeRoute.distance)}}, {{this.formatDuration(activeRoute.duration)}}</h3>\r\n\r\n    <mat-list-item (mouseenter)=\"showSegment(step)\" (click)=\"showSegment(step,true)\" *ngFor=\"let step of activeRoute.steps; let cnt = index;\"\r\n      igoListItem>\r\n      <mat-icon [ngClass]=\"this.formatStep(step,cnt).cssClass\" mat-list-icon svgIcon=\"{{this.formatStep(step,cnt).image}}\"></mat-icon>\r\n\r\n      <h4 mat-line (click)=\"showSegment(step,true)\">{{cnt +1}}. {{this.formatStep(step,cnt).instruction}}</h4>\r\n      <h4 mat-line class=\"right\">{{this.formatDistance(step.distance)}}</h4>\r\n    </mat-list-item>\r\n\r\n    <mat-divider></mat-divider>\r\n\r\n  </mat-list>\r\n\r\n</div>\r\n",
                    styles: ["mat-form-field{width:70%}.mat-list-item{height:auto}.mat-line{word-wrap:break-word!important;white-space:pre-wrap!important}.mat-line.right{text-align:right}.rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.rotate-45{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.rotate-250{-webkit-transform:rotate(250deg);transform:rotate(250deg)}.rotate-290{-webkit-transform:rotate(290deg);transform:rotate(290deg)}.icon-flipped{-webkit-transform:scaleY(-1);transform:scaleY(-1)}"]
                }] }
    ];
    /** @nocollapse */
    RoutingFormComponent.ctorParameters = function () { return [
        { type: _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormBuilder"] },
        { type: RoutingService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["MessageService"] },
        { type: SearchService },
        { type: QueryService },
        { type: RoutingFormService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["RouteService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Optional"] }] }
    ]; };
    RoutingFormComponent.propDecorators = {
        term: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        length: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        submit: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return RoutingFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var RoutingFormBindingDirective = /** @class */ (function () {
    function RoutingFormBindingDirective(component, routingFormService, route) {
        this.component = component;
        this.routingFormService = routingFormService;
        this.route = route;
    }
    /**
     * @return {?}
     */
    RoutingFormBindingDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var storedStopsCoordinates = this.routingFormService.getStopsCoordinates();
        if (!storedStopsCoordinates &&
            this.route &&
            this.route.options.routingCoordKey) {
            this.route.queryParams.subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                /** @type {?} */
                var routingParams = params[(/** @type {?} */ (_this.route.options.routingCoordKey))];
                /** @type {?} */
                var stopsCoordinatesFromURL = [];
                if (routingParams) {
                    /** @type {?} */
                    var routingCoordUrl_1 = routingParams.split(';');
                    if (routingCoordUrl_1.length >= 2) {
                        /** @type {?} */
                        var cnt_1 = 0;
                        routingCoordUrl_1.forEach((/**
                         * @param {?} coord
                         * @return {?}
                         */
                        function (coord) {
                            if (cnt_1 !== 0 && cnt_1 !== routingCoordUrl_1.length - 1) {
                                _this.component.stops.insert(cnt_1, _this.component.createStop());
                            }
                            /** @type {?} */
                            var stopCoordinatesFromURL = JSON.parse('[' + coord + ']');
                            _this.component.stops
                                .at(cnt_1)
                                .patchValue({ stopCoordinates: stopCoordinatesFromURL });
                            _this.component.stops
                                .at(cnt_1)
                                .patchValue({ stopPoint: stopCoordinatesFromURL });
                            _this.component.handleLocationProposals(stopCoordinatesFromURL, cnt_1);
                            stopsCoordinatesFromURL.push(stopCoordinatesFromURL);
                            _this.component.addStopOverlay(stopCoordinatesFromURL, cnt_1);
                            cnt_1++;
                        }));
                        _this.component.getRoutes(stopsCoordinatesFromURL, true);
                    }
                }
            }));
        }
        else if (storedStopsCoordinates) {
            for (var i = 0; i < storedStopsCoordinates.length; i++) {
                if (i !== 0 && i !== storedStopsCoordinates.length - 1) {
                    this.component.stops.insert(i, this.component.createStop());
                }
                if (storedStopsCoordinates[i] instanceof Array) {
                    this.component.addStopOverlay(storedStopsCoordinates[i], i);
                    this.component.stops
                        .at(i)
                        .patchValue({ stopCoordinates: storedStopsCoordinates[i] });
                    this.component.stops
                        .at(i)
                        .patchValue({ stopPoint: storedStopsCoordinates[i] });
                    this.component.handleLocationProposals(storedStopsCoordinates[i], i);
                }
            }
        }
    };
    RoutingFormBindingDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoRoutingFormBinding]'
                },] }
    ];
    /** @nocollapse */
    RoutingFormBindingDirective.ctorParameters = function () { return [
        { type: RoutingFormComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Self"] }] },
        { type: RoutingFormService },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["RouteService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Optional"] }] }
    ]; };
    return RoutingFormBindingDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoRoutingModule = /** @class */ (function () {
    function IgoRoutingModule() {
    }
    /**
     * @return {?}
     */
    IgoRoutingModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoRoutingModule
        };
    };
    IgoRoutingModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormsModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["ReactiveFormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatListModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatDividerModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatInputModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatOptionModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatSelectModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatAutocompleteModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"]
                    ],
                    exports: [RoutingFormComponent, RoutingFormBindingDirective],
                    declarations: [RoutingFormComponent, RoutingFormBindingDirective],
                    providers: [RoutingFormService, provideRoutingSourceService()]
                },] }
    ];
    return IgoRoutingModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Search source factory
 * @ignore
 * @param {?} sources
 * @return {?}
 */
function searchSourceServiceFactory(sources) {
    return new SearchSourceService(sources);
}
/**
 * Function that returns a provider for the SearchSource service
 * @return {?}
 */
function provideSearchSourceService() {
    return {
        provide: SearchSourceService,
        useFactory: searchSourceServiceFactory,
        deps: [SearchSource]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IChercheSearchResultFormatter = /** @class */ (function () {
    function IChercheSearchResultFormatter(languageService) {
        this.languageService = languageService;
    }
    /**
     * @param {?} result
     * @return {?}
     */
    IChercheSearchResultFormatter.prototype.formatResult = /**
     * @param {?} result
     * @return {?}
     */
    function (result) {
        return result;
    };
    IChercheSearchResultFormatter.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    IChercheSearchResultFormatter.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] }
    ]; };
    return IChercheSearchResultFormatter;
}());
/**
 * ICherche search source
 */
var IChercheSearchSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(IChercheSearchSource, _super);
    function IChercheSearchSource(http, options, formatter) {
        var _this = _super.call(this, options) || this;
        _this.http = http;
        _this.formatter = formatter;
        return _this;
    }
    /**
     * @return {?}
     */
    IChercheSearchSource.prototype.getId = /**
     * @return {?}
     */
    function () {
        return IChercheSearchSource.id;
    };
    /**
     * @protected
     * @return {?}
     */
    IChercheSearchSource.prototype.getDefaultOptions = /**
     * @protected
     * @return {?}
     */
    function () {
        return {
            title: 'ICherche Québec',
            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche/geocode',
            settings: [
                {
                    type: 'checkbox',
                    title: 'results type',
                    name: 'type',
                    values: [
                        {
                            title: 'Adresse',
                            value: 'adresses',
                            enabled: true
                        },
                        // {
                        //   title: 'Ancienne adresse',
                        //   value: 'ancienne_adresse',
                        //   enabled: true
                        // },
                        {
                            title: 'Code Postal',
                            value: 'codes-postaux',
                            enabled: true
                        },
                        {
                            title: 'Route',
                            value: 'routes',
                            enabled: false
                        },
                        {
                            title: 'Municipalité',
                            value: 'municipalites',
                            enabled: true
                        },
                        // {
                        //   title: 'Ancienne municipalité',
                        //   value: 'ancienne_municipalite',
                        //   enabled: true
                        // },
                        {
                            title: 'mrc',
                            value: 'mrc',
                            enabled: true
                        },
                        {
                            title: 'Région administrative',
                            value: 'regadmin',
                            enabled: true
                        },
                        {
                            title: 'Lieu',
                            value: 'lieux',
                            enabled: true
                        },
                        {
                            title: 'Borne',
                            value: 'bornes',
                            enabled: false
                        },
                        {
                            title: 'Entreprise',
                            value: 'entreprises',
                            enabled: false
                        }
                    ]
                },
                {
                    type: 'radiobutton',
                    title: 'results limit',
                    name: 'limit',
                    values: [
                        {
                            title: '1',
                            value: 1,
                            enabled: false
                        },
                        {
                            title: '5',
                            value: 5,
                            enabled: true
                        },
                        {
                            title: '10',
                            value: 10,
                            enabled: false
                        },
                        {
                            title: '25',
                            value: 25,
                            enabled: false
                        },
                        {
                            title: '50',
                            value: 50,
                            enabled: false
                        }
                    ]
                },
                {
                    type: 'radiobutton',
                    title: 'trust level',
                    name: 'ecmax',
                    values: [
                        {
                            title: '10',
                            value: 10,
                            enabled: false
                        },
                        {
                            title: '30',
                            value: 30,
                            enabled: true
                        },
                        {
                            title: '50',
                            value: 50,
                            enabled: false
                        },
                        {
                            title: '75',
                            value: 75,
                            enabled: false
                        },
                        {
                            title: '100',
                            value: 100,
                            enabled: false
                        }
                    ]
                }
            ]
        };
    };
    /**
     * Search a location by name or keyword
     * @param term Location name or keyword
     * @returns Observable of <SearchResult<Feature>[]
     */
    /**
     * Search a location by name or keyword
     * @param {?} term Location name or keyword
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    IChercheSearchSource.prototype.search = /**
     * Search a location by name or keyword
     * @param {?} term Location name or keyword
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    function (term, options) {
        var _this = this;
        /** @type {?} */
        var params = this.computeRequestParams(term, options || {});
        return this.http
            .get(this.searchUrl, { params: params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} response
         * @return {?}
         */
        function (response) { return _this.extractResults(response); })));
    };
    /**
     * @private
     * @param {?} term
     * @param {?} options
     * @return {?}
     */
    IChercheSearchSource.prototype.computeRequestParams = /**
     * @private
     * @param {?} term
     * @param {?} options
     * @return {?}
     */
    function (term, options) {
        return new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpParams"]({
            fromObject: Object.assign({
                q: this.computeTerm(term),
                geometry: true,
                type: 'adresses,codes-postaux,municipalites,mrc,regadmin,lieux,entreprises,bornes'
            }, this.params, this.computeOptionsParam(term, options || {}).params)
        });
    };
    /**
     * @private
     * @param {?} response
     * @return {?}
     */
    IChercheSearchSource.prototype.extractResults = /**
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        return response.features.map((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            return _this.formatter.formatResult(_this.dataToResult(data));
        }));
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    IChercheSearchSource.prototype.dataToResult = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = this.computeProperties(data);
        /** @type {?} */
        var id = [this.getId(), properties.type, properties.code].join('.');
        /** @type {?} */
        var subtitleHtml = data.highlight.title2
            ? ' <small> ' + data.highlight.title2 + '</small>'
            : '';
        return {
            source: this,
            data: {
                type: FEATURE,
                projection: 'EPSG:4326',
                geometry: data.geometry,
                extent: data.bbox,
                properties: properties,
                meta: {
                    id: id,
                    title: data.properties.nom
                }
            },
            meta: {
                dataType: FEATURE,
                id: id,
                title: data.properties.nom,
                titleHtml: data.highlight.title + subtitleHtml,
                icon: 'map-marker'
            }
        };
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    IChercheSearchSource.prototype.computeProperties = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].removeKeys(data.properties, IChercheSearchSource.propertiesBlacklist);
        return Object.assign(properties, { type: data.index });
    };
    /**
     * Remove hashtag from query
     * @param term Query with hashtag
     */
    /**
     * Remove hashtag from query
     * @private
     * @param {?} term Query with hashtag
     * @return {?}
     */
    IChercheSearchSource.prototype.computeTerm = /**
     * Remove hashtag from query
     * @private
     * @param {?} term Query with hashtag
     * @return {?}
     */
    function (term) {
        return term.replace(/(#[^\s]*)/g, '');
    };
    /**
     * Add hashtag to param if valid
     * @param term Query with hashtag
     * @param options TextSearchOptions
     */
    /**
     * Add hashtag to param if valid
     * @private
     * @param {?} term Query with hashtag
     * @param {?} options TextSearchOptions
     * @return {?}
     */
    IChercheSearchSource.prototype.computeOptionsParam = /**
     * Add hashtag to param if valid
     * @private
     * @param {?} term Query with hashtag
     * @param {?} options TextSearchOptions
     * @return {?}
     */
    function (term, options) {
        var _this = this;
        /** @type {?} */
        var tags = term.match(/(#[^\s]+)/g);
        if (tags) {
            /** @type {?} */
            var typeValue_1 = '';
            /** @type {?} */
            var hashtagToAdd_1 = false;
            tags.forEach((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (_super.prototype.hashtagValid.call(_this, _super.prototype.getSettingsValues.call(_this, 'type'), value, true)) {
                    typeValue_1 += value.substring(1) + ',';
                    hashtagToAdd_1 = true;
                }
            }));
            if (hashtagToAdd_1) {
                options.params = Object.assign(options.params || {}, {
                    type: typeValue_1.slice(0, -1)
                });
            }
        }
        return options;
    };
    IChercheSearchSource.id = 'icherche';
    IChercheSearchSource.type = FEATURE;
    IChercheSearchSource.propertiesBlacklist = [];
    IChercheSearchSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    IChercheSearchSource.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: ['options',] }] },
        { type: IChercheSearchResultFormatter, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: [IChercheSearchResultFormatter,] }] }
    ]; };
    return IChercheSearchSource;
}(SearchSource));
/**
 * IChercheReverse search source
 */
var IChercheReverseSearchSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(IChercheReverseSearchSource, _super);
    function IChercheReverseSearchSource(http, options) {
        var _this = _super.call(this, options) || this;
        _this.http = http;
        return _this;
    }
    /**
     * @return {?}
     */
    IChercheReverseSearchSource.prototype.getId = /**
     * @return {?}
     */
    function () {
        return IChercheReverseSearchSource.id;
    };
    /**
     * @protected
     * @return {?}
     */
    IChercheReverseSearchSource.prototype.getDefaultOptions = /**
     * @protected
     * @return {?}
     */
    function () {
        return {
            title: 'Territoire (Géocodage inversé)',
            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/territoires/locate',
            settings: [
                {
                    type: 'checkbox',
                    title: 'results type',
                    name: 'type',
                    values: [
                        {
                            title: 'Adresse',
                            value: 'adresses',
                            enabled: true
                        },
                        {
                            title: 'Route',
                            value: 'routes',
                            enabled: false
                        },
                        {
                            title: 'Arrondissement',
                            value: 'arrondissements',
                            enabled: false
                        },
                        {
                            title: 'Municipalité',
                            value: 'municipalites',
                            enabled: true
                        },
                        {
                            title: 'mrc',
                            value: 'mrc',
                            enabled: true
                        },
                        {
                            title: 'Région administrative',
                            value: 'regadmin',
                            enabled: true
                        }
                    ]
                }
            ]
        };
    };
    /**
     * Search a location by coordinates
     * @param lonLat Location coordinates
     * @param distance Search raidus around lonLat
     * @returns Observable of <SearchResult<Feature>[]
     */
    /**
     * Search a location by coordinates
     * @param {?} lonLat Location coordinates
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    IChercheReverseSearchSource.prototype.reverseSearch = /**
     * Search a location by coordinates
     * @param {?} lonLat Location coordinates
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    function (lonLat, options) {
        var _this = this;
        /** @type {?} */
        var params = this.computeRequestParams(lonLat, options || {});
        return this.http.get(this.searchUrl, { params: params }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            return _this.extractResults(response);
        })));
    };
    /**
     * @private
     * @param {?} lonLat
     * @param {?=} options
     * @return {?}
     */
    IChercheReverseSearchSource.prototype.computeRequestParams = /**
     * @private
     * @param {?} lonLat
     * @param {?=} options
     * @return {?}
     */
    function (lonLat, options) {
        /** @type {?} */
        var distance = options.distance;
        return new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpParams"]({
            fromObject: Object.assign({
                loc: lonLat.join(','),
                buffer: distance ? String(distance) : '100',
                geometry: true
            }, this.params, options.params || {})
        });
    };
    /**
     * @private
     * @param {?} response
     * @return {?}
     */
    IChercheReverseSearchSource.prototype.extractResults = /**
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        return response.features.map((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            return _this.dataToResult(data);
        }));
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    IChercheReverseSearchSource.prototype.dataToResult = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = this.computeProperties(data);
        /** @type {?} */
        var extent = this.computeExtent(data);
        /** @type {?} */
        var id = [this.getId(), properties.type, properties.code].join('.');
        return {
            source: this,
            data: {
                type: FEATURE,
                projection: 'EPSG:4326',
                geometry: data.geometry,
                extent: extent,
                properties: properties,
                meta: {
                    id: id,
                    title: data.properties.nom
                }
            },
            meta: {
                dataType: FEATURE,
                id: id,
                title: data.properties.nom,
                icon: 'map-marker'
            }
        };
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    IChercheReverseSearchSource.prototype.computeProperties = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].removeKeys(data.properties, IChercheReverseSearchSource.propertiesBlacklist);
        return properties;
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    IChercheReverseSearchSource.prototype.computeExtent = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        return data.bbox
            ? [data.bbox[0], data.bbox[2], data.bbox[1], data.bbox[3]]
            : undefined;
    };
    IChercheReverseSearchSource.id = 'icherchereverse';
    IChercheReverseSearchSource.type = FEATURE;
    IChercheReverseSearchSource.propertiesBlacklist = ['doc_type'];
    IChercheReverseSearchSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    IChercheReverseSearchSource.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: ['options',] }] }
    ]; };
    return IChercheReverseSearchSource;
}(SearchSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * ICherche search result formatter factory
 * @ignore
 * @param {?} languageService
 * @return {?}
 */
function defaultIChercheSearchResultFormatterFactory(languageService) {
    return new IChercheSearchResultFormatter(languageService);
}
/**
 * Function that returns a provider for the ICherche search result formatter
 * @return {?}
 */
function provideDefaultIChercheSearchResultFormatter() {
    return {
        provide: IChercheSearchResultFormatter,
        useFactory: defaultIChercheSearchResultFormatterFactory,
        deps: [_igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"]]
    };
}
/**
 * ICherche search source factory
 * @ignore
 * @param {?} http
 * @param {?} config
 * @param {?} formatter
 * @return {?}
 */
function ichercheSearchSourceFactory(http, config, formatter) {
    return new IChercheSearchSource(http, config.getConfig("searchSources." + IChercheSearchSource.id), formatter);
}
/**
 * Function that returns a provider for the ICherche search source
 * @return {?}
 */
function provideIChercheSearchSource() {
    return {
        provide: SearchSource,
        useFactory: ichercheSearchSourceFactory,
        multi: true,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"], _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"], IChercheSearchResultFormatter]
    };
}
/**
 * IChercheReverse search source factory
 * @ignore
 * @param {?} http
 * @param {?} config
 * @return {?}
 */
function ichercheReverseSearchSourceFactory(http, config) {
    return new IChercheReverseSearchSource(http, config.getConfig("searchSources." + IChercheReverseSearchSource.id));
}
/**
 * Function that returns a provider for the IChercheReverse search source
 * @return {?}
 */
function provideIChercheReverseSearchSource() {
    return {
        provide: SearchSource,
        useFactory: ichercheReverseSearchSourceFactory,
        multi: true,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"], _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var GoogleLinks = /** @class */ (function () {
    function GoogleLinks() {
    }
    /**
     * @param {?} lon
     * @param {?} lat
     * @return {?}
     */
    GoogleLinks.getGoogleMapsLink = /**
     * @param {?} lon
     * @param {?} lat
     * @return {?}
     */
    function (lon, lat) {
        return 'https://www.google.com/maps?q=' + lat + ',' + lon;
    };
    /**
     * @param {?} lon
     * @param {?} lat
     * @return {?}
     */
    GoogleLinks.getGoogleStreetViewLink = /**
     * @param {?} lon
     * @param {?} lat
     * @return {?}
     */
    function (lon, lat) {
        return 'https://www.google.com/maps?q=&layer=c&cbll=' + lat + ',' + lon;
    };
    return GoogleLinks;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var CoordinatesSearchResultFormatter = /** @class */ (function () {
    function CoordinatesSearchResultFormatter(languageService) {
        this.languageService = languageService;
    }
    /**
     * @param {?} result
     * @return {?}
     */
    CoordinatesSearchResultFormatter.prototype.formatResult = /**
     * @param {?} result
     * @return {?}
     */
    function (result) {
        return result;
    };
    CoordinatesSearchResultFormatter.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    CoordinatesSearchResultFormatter.ctorParameters = function () { return [
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] }
    ]; };
    return CoordinatesSearchResultFormatter;
}());
/**
 * CoordinatesReverse search source
 */
var CoordinatesReverseSearchSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(CoordinatesReverseSearchSource, _super);
    function CoordinatesReverseSearchSource(options) {
        return _super.call(this, options) || this;
    }
    /**
     * @return {?}
     */
    CoordinatesReverseSearchSource.prototype.getId = /**
     * @return {?}
     */
    function () {
        return CoordinatesReverseSearchSource.id;
    };
    /**
     * @protected
     * @return {?}
     */
    CoordinatesReverseSearchSource.prototype.getDefaultOptions = /**
     * @protected
     * @return {?}
     */
    function () {
        return {
            title: 'Coordinates'
        };
    };
    /**
     * Search a location by coordinates
     * @param lonLat Location coordinates
     * @param distance Search raidus around lonLat
     * @returns Observable of <SearchResult<Feature>[]
     */
    /**
     * Search a location by coordinates
     * @param {?} lonLat Location coordinates
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    CoordinatesReverseSearchSource.prototype.reverseSearch = /**
     * Search a location by coordinates
     * @param {?} lonLat Location coordinates
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    function (lonLat, options) {
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["of"])([this.dataToResult(lonLat)]);
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    CoordinatesReverseSearchSource.prototype.dataToResult = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        return {
            source: this,
            data: {
                type: FEATURE,
                projection: 'EPSG:4326',
                geometry: {
                    type: 'Point',
                    coordinates: [data[0], data[1]]
                },
                extent: undefined,
                properties: {
                    type: 'point',
                    coordonnees: String(data[0]) + ', ' + String(data[1]),
                    format: 'degrés decimaux',
                    systemeCoordonnees: 'WGS84',
                    GoogleMaps: GoogleLinks.getGoogleMapsLink(data[0], data[1]),
                    GoogleStreetView: GoogleLinks.getGoogleStreetViewLink(data[0], data[1])
                }
            },
            meta: {
                dataType: FEATURE,
                id: '1',
                title: String(data[0]) + ', ' + String(data[1]),
                icon: 'map-marker'
            }
        };
    };
    CoordinatesReverseSearchSource.id = 'coordinatesreverse';
    CoordinatesReverseSearchSource.type = FEATURE;
    CoordinatesReverseSearchSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    CoordinatesReverseSearchSource.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: ['options',] }] }
    ]; };
    return CoordinatesReverseSearchSource;
}(SearchSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * ICherche search result formatter factory
 * @ignore
 * @param {?} languageService
 * @return {?}
 */
function defaultCoordinatesSearchResultFormatterFactory(languageService) {
    return new CoordinatesSearchResultFormatter(languageService);
}
/**
 * Function that returns a provider for the ICherche search result formatter
 * @return {?}
 */
function provideDefaultCoordinatesSearchResultFormatter() {
    return {
        provide: CoordinatesSearchResultFormatter,
        useFactory: defaultCoordinatesSearchResultFormatterFactory,
        deps: [_igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"]]
    };
}
/**
 * CoordinatesReverse search source factory
 * @ignore
 * @param {?} config
 * @return {?}
 */
function CoordinatesReverseSearchSourceFactory(config) {
    return new CoordinatesReverseSearchSource(config.getConfig("searchSources." + CoordinatesReverseSearchSource.id));
}
/**
 * Function that returns a provider for the IChercheReverse search source
 * @return {?}
 */
function provideCoordinatesReverseSearchSource() {
    return {
        provide: SearchSource,
        useFactory: CoordinatesReverseSearchSourceFactory,
        multi: true,
        deps: [_igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var SEARCH_TYPES = [FEATURE, LAYER];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This component allows a user to select a search type yo enable. In it's
 * current version, only one search type can be selected at once (radio). If
 * this component were to support more than one search source enabled (checkbox),
 * the searchbar component would require a small change to it's
 * placeholder getter. The search source service already supports having
 * more than one search source enabled.
 */
var SearchSelectorComponent = /** @class */ (function () {
    function SearchSelectorComponent(searchSourceService) {
        this.searchSourceService = searchSourceService;
        /**
         * List of available search types
         */
        this.searchTypes = SEARCH_TYPES;
        /**
         * Event emitted when the enabled search type changes
         */
        this.change = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    /**
     * Enable the first search type if the enabled input is not defined
     * @internal
     */
    /**
     * Enable the first search type if the enabled input is not defined
     * \@internal
     * @return {?}
     */
    SearchSelectorComponent.prototype.ngOnInit = /**
     * Enable the first search type if the enabled input is not defined
     * \@internal
     * @return {?}
     */
    function () {
        /** @type {?} */
        var initial = this.enabled || this.searchTypes[0];
        this.enableSearchType(initial);
    };
    /**
     * Enable the selected search type
     * @param searchType Search type
     * @internal
     */
    /**
     * Enable the selected search type
     * \@internal
     * @param {?} searchType Search type
     * @return {?}
     */
    SearchSelectorComponent.prototype.onSearchTypeChange = /**
     * Enable the selected search type
     * \@internal
     * @param {?} searchType Search type
     * @return {?}
     */
    function (searchType) {
        this.enableSearchType(searchType);
    };
    /**
     * Get a search type's title. The title
     * for all availables search typers needs to be defined in the locale
     * files or an error will be thrown.
     * @param searchType Search type
     * @internal
     */
    /**
     * Get a search type's title. The title
     * for all availables search typers needs to be defined in the locale
     * files or an error will be thrown.
     * \@internal
     * @param {?} searchType Search type
     * @return {?}
     */
    SearchSelectorComponent.prototype.getSearchTypeTitle = /**
     * Get a search type's title. The title
     * for all availables search typers needs to be defined in the locale
     * files or an error will be thrown.
     * \@internal
     * @param {?} searchType Search type
     * @return {?}
     */
    function (searchType) {
        return "search." + searchType.toLowerCase() + ".title";
    };
    /**
     * Emit an event and enable the search sources of the given type.
     * @param searchType Search type
     */
    /**
     * Emit an event and enable the search sources of the given type.
     * @private
     * @param {?} searchType Search type
     * @return {?}
     */
    SearchSelectorComponent.prototype.enableSearchType = /**
     * Emit an event and enable the search sources of the given type.
     * @private
     * @param {?} searchType Search type
     * @return {?}
     */
    function (searchType) {
        this.enabled = searchType;
        this.searchSourceService.enableSourcesByType(searchType);
        this.change.emit(searchType);
    };
    SearchSelectorComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-search-selector',
                    template: "<div class=\"igo-search-selector\">\r\n  <button\r\n    mat-icon-button\r\n    class=\"igo-search-selector-button\"\r\n    color=\"primary\"\r\n    tooltip-position=\"below\"\r\n    matTooltipShowDelay=\"500\"\r\n    [matTooltip]=\"'igo.geo.search.menu.tooltip' | translate\"\r\n    [matMenuTriggerFor]=\"searchSelectorMenu\">\r\n    <mat-icon svgIcon=\"menu-down\"></mat-icon>\r\n  </button>\r\n\r\n  <mat-menu\r\n    #searchSelectorMenu=\"matMenu\"\r\n    class=\"no-border-radius\"\r\n    xPosition=\"before\"\r\n    yPosition=\"above\">\r\n    <mat-radio-group\r\n      class=\"igo-search-selector-radio-group\"\r\n      [value]=\"enabled\"\r\n      (change)=\"onSearchTypeChange($event.value)\">\r\n      <mat-radio-button *ngFor=\"let searchType of searchTypes\" [value]=\"searchType\">\r\n        {{getSearchTypeTitle(searchType) | translate}}\r\n      </mat-radio-button>\r\n    </mat-radio-group>\r\n  </mat-menu>\r\n\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [".igo-search-selector-button ::ng-deep div.mat-button-ripple-round{border-radius:0}.igo-search-selector-radio-group{display:inline-flex;flex-direction:column}.igo-search-selector-radio-group mat-radio-button{margin:5px}"]
                }] }
    ];
    /** @nocollapse */
    SearchSelectorComponent.ctorParameters = function () { return [
        { type: SearchSourceService }
    ]; };
    SearchSelectorComponent.propDecorators = {
        searchTypes: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        enabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        change: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return SearchSelectorComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoSearchSelectorModule = /** @class */ (function () {
    function IgoSearchSelectorModule() {
    }
    IgoSearchSelectorModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatMenuModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatRadioModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTabsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatCheckboxModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"]
                    ],
                    exports: [SearchSelectorComponent],
                    declarations: [SearchSelectorComponent]
                },] }
    ];
    return IgoSearchSelectorModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This component allows a user to select a search type yo enable. In it's
 * current version, only one search type can be selected at once (radio). If
 * this component were to support more than one search source enabled (checkbox),
 * the searchbar component would require a small change to it's
 * placeholder getter. The search source service already supports having
 * more than one search source enabled.
 */
var SearchSettingsComponent = /** @class */ (function () {
    function SearchSettingsComponent(searchSourceService) {
        this.searchSourceService = searchSourceService;
        /**
         * Event emitted when the enabled search type changes
         */
        this.change = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    /**
     * Get all search sources
     * @internal
     */
    /**
     * Get all search sources
     * \@internal
     * @return {?}
     */
    SearchSettingsComponent.prototype.getSearchSources = /**
     * Get all search sources
     * \@internal
     * @return {?}
     */
    function () {
        return this.searchSourceService.getSources();
    };
    /**
     * Triggered when a setting is checked (checkbox style)
     * @internal
     */
    /**
     * Triggered when a setting is checked (checkbox style)
     * \@internal
     * @param {?} event
     * @param {?} source
     * @param {?} setting
     * @param {?} settingValue
     * @return {?}
     */
    SearchSettingsComponent.prototype.settingsValueCheckedCheckbox = /**
     * Triggered when a setting is checked (checkbox style)
     * \@internal
     * @param {?} event
     * @param {?} source
     * @param {?} setting
     * @param {?} settingValue
     * @return {?}
     */
    function (event, source, setting, settingValue) {
        settingValue.enabled = event.checked;
        source.setParamFromSetting(setting);
    };
    /**
     * Triggered when a setting is checked (radiobutton style)
     * @internal
     */
    /**
     * Triggered when a setting is checked (radiobutton style)
     * \@internal
     * @param {?} event
     * @param {?} source
     * @param {?} setting
     * @param {?} settingValue
     * @return {?}
     */
    SearchSettingsComponent.prototype.settingsValueCheckedRadioButton = /**
     * Triggered when a setting is checked (radiobutton style)
     * \@internal
     * @param {?} event
     * @param {?} source
     * @param {?} setting
     * @param {?} settingValue
     * @return {?}
     */
    function (event, source, setting, settingValue) {
        setting.values.forEach((/**
         * @param {?} conf
         * @return {?}
         */
        function (conf) {
            if (conf.value !== settingValue.value) {
                conf.enabled = !event.source.checked;
            }
            else {
                conf.enabled = event.source.checked;
            }
        }));
        source.setParamFromSetting(setting);
    };
    /**
     * @param {?} event
     * @param {?} source
     * @return {?}
     */
    SearchSettingsComponent.prototype.onCheckSearchSource = /**
     * @param {?} event
     * @param {?} source
     * @return {?}
     */
    function (event, source) {
        source.enabled = event.checked;
    };
    SearchSettingsComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-search-settings',
                    template: "<div class=\"igo-search-settings\">\r\n\r\n  <button\r\n    mat-icon-button\r\n    class=\"igo-search-settings-button\"\r\n    color=\"primary\"\r\n    tooltip-position=\"below\"\r\n    matTooltipShowDelay=\"500\"\r\n    [matTooltip]=\"'igo.geo.search.menu.tooltip' | translate\"\r\n    [matMenuTriggerFor]=\"searchSettingsMenu\">\r\n    <mat-icon svgIcon=\"settings\"></mat-icon>\r\n  </button>\r\n  <mat-menu\r\n    #searchSettingsMenu=\"matMenu\"\r\n    class=\"no-border-radius\">\r\n      <ng-container *ngFor=\"let source of getSearchSources()\">\r\n        <span class=\"igo-search-settings-search-source\">\r\n          <mat-checkbox\r\n            class=\"igo-search-settings-checkbox\"\r\n            [checked]=\"source.enabled\"\r\n            [value]=\"source\"\r\n            (click)=\"$event.stopPropagation()\"\r\n            (change)=\"onCheckSearchSource($event, source)\">\r\n          </mat-checkbox>\r\n          <button *ngIf=\"source.settings.length\u00A0>\u00A00\"\r\n            [matMenuTriggerFor]=\"sub_menu\"\r\n            mat-menu-item>{{source.title}}\r\n          </button>\r\n          <button\r\n            mat-menu-item\r\n            *ngIf=\"source.settings.length\u00A0===\u00A00\">\r\n            {{source.title}}\r\n          </button>\r\n        </span>\r\n          <mat-menu #sub_menu=\"matMenu\">\r\n            <ng-container *ngFor=\"let setting of source.settings\">\r\n              <button\r\n                  mat-menu-item\r\n                  [matMenuTriggerFor]=\"test_sub_menu\">\r\n                {{'igo.geo.search.searchSources.settings.'+ setting.title | translate}}\r\n              </button>\r\n              <mat-menu #test_sub_menu=\"matMenu\"\r\n                [ngSwitch]=\"setting.type\"\r\n                yPosition=\"above\">\r\n                <span *ngSwitchCase=\"'radiobutton'\">\r\n                  <mat-radio-group\r\n                    class=\"igo-search-settings-radio-group\"\r\n                    [value]=\"setting\">\r\n                    <mat-radio-button *ngFor=\"let settingValue of setting.values\"\r\n                      [value]=\"settingValue\"\r\n                      [checked]=\"settingValue.enabled\"\r\n                      (click)=\"$event.stopPropagation()\"\r\n                      (change)=\"settingsValueCheckedRadioButton($event, source, setting, settingValue)\">\r\n                      {{settingValue.title}}\r\n                    </mat-radio-button>\r\n                  </mat-radio-group>\r\n                </span>\r\n                <span *ngSwitchCase=\"'checkbox'\">\r\n                  <mat-checkbox class=\"igo-search-settings-radio-group\"\r\n                    class=\"mat-menu-item\"\r\n                    [checked]=\"settingValue.enabled\"\r\n                    [value]=\"setting\"\r\n                    (click)=\"$event.stopPropagation()\"\r\n                    (change)=\"settingsValueCheckedCheckbox($event, source, setting, settingValue)\"\r\n                    *ngFor=\"let settingValue of setting.values\">{{settingValue.title}}\r\n                  </mat-checkbox>\r\n                </span>\r\n              </mat-menu>\r\n            </ng-container>\r\n          </mat-menu>\r\n      </ng-container>\r\n  </mat-menu>\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [".igo-search-settings-button ::ng-deep div.mat-button-ripple-round{border-radius:0}.igo-search-settings-radio-group{display:inline-flex;flex-direction:column}.igo-search-settings-radio-group mat-radio-button{margin:5px}.igo-search-settings-checkbox mat-radio-button{display:inline-flex}.igo-search-settings-search-source{display:inline-flex;width:100%}.igo-search-settings-search-source mat-checkbox{display:inline-flex;margin-left:5px;margin-right:5px}"]
                }] }
    ];
    /** @nocollapse */
    SearchSettingsComponent.ctorParameters = function () { return [
        { type: SearchSourceService }
    ]; };
    SearchSettingsComponent.propDecorators = {
        change: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return SearchSettingsComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoSearchSettingsModule = /** @class */ (function () {
    function IgoSearchSettingsModule() {
    }
    IgoSearchSettingsModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    declarations: [SearchSettingsComponent],
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatMenuModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatRadioModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatCheckboxModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"]
                    ],
                    exports: [SearchSettingsComponent]
                },] }
    ];
    return IgoSearchSettingsModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Searchbar that triggers a research in all search sources enabled.
 * If the store input is defined, the search results will be loaded
 * into that store. An event is always emitted when a research is completed.
 */
var SearchBarComponent = /** @class */ (function () {
    function SearchBarComponent(searchService) {
        this.searchService = searchService;
        /**
         * Invalid keys
         */
        this.invalidKeys = ['Control', 'Shift', 'Alt'];
        /**
         * Search term stream
         */
        this.stream$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["Subject"]();
        /**
         * Search term
         */
        this.term = '';
        /**
         * Whether a float label should be displayed
         */
        this.floatLabel = 'never';
        /**
         * Whether this component is disabled
         */
        this.disabled = false;
        /**
         * Icons color (search and clear)
         */
        this.color = 'primary';
        /**
         * Debounce time between each keystroke
         */
        this.debounce = 300;
        /**
         * Minimum term length required to trigger a research
         */
        this.minLength = 2;
        /**
         * List of available search types
         */
        this.searchTypes = SEARCH_TYPES;
        /**
         * Event emitted when the search term changes
         */
        this.change = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        /**
         * Event emitted when a research is completed
         */
        this.search = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        /**
         * Event emitted when the search type changes
         */
        this.searchTypeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        this._placeholder = '';
    }
    Object.defineProperty(SearchBarComponent.prototype, "emptyClass", {
        /**
         * Host's empty class
         * @internal
         */
        get: /**
         * Host's empty class
         * \@internal
         * @return {?}
         */
        function () {
            return this.empty;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchBarComponent.prototype, "empty", {
        /**
         * Whether the search bar is empty
         * @internal
         */
        get: /**
         * Whether the search bar is empty
         * \@internal
         * @return {?}
         */
        function () {
            return this.term.length === 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchBarComponent.prototype, "placeholder", {
        get: /**
         * @return {?}
         */
        function () {
            return this.empty ? this._placeholder : '';
        },
        /**
         * Search bar palceholder
         * @internal
         */
        set: /**
         * Search bar palceholder
         * \@internal
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._placeholder = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Subscribe to the search term stream and trigger researches
     * @internal
     */
    /**
     * Subscribe to the search term stream and trigger researches
     * \@internal
     * @return {?}
     */
    SearchBarComponent.prototype.ngOnInit = /**
     * Subscribe to the search term stream and trigger researches
     * \@internal
     * @return {?}
     */
    function () {
        var _this = this;
        this.stream$$ = this.stream$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["debounce"])((/**
         * @param {?} term
         * @return {?}
         */
        function (term) {
            return term === '' ? rxjs__WEBPACK_IMPORTED_MODULE_69__["EMPTY"] : Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["timer"])(300);
        })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["distinctUntilChanged"])())
            .subscribe((/**
         * @param {?} term
         * @return {?}
         */
        function (term) { return _this.onTermChange(term); }));
    };
    /**
     * Unsubscribe to the search term stream
     * @internal
     */
    /**
     * Unsubscribe to the search term stream
     * \@internal
     * @return {?}
     */
    SearchBarComponent.prototype.ngOnDestroy = /**
     * Unsubscribe to the search term stream
     * \@internal
     * @return {?}
     */
    function () {
        this.stream$$.unsubscribe();
    };
    /**
     * When a user types, validates the key and send it into the
     * stream if it's valid
     * @param event Keyboard event
     * @internal
     */
    /**
     * When a user types, validates the key and send it into the
     * stream if it's valid
     * \@internal
     * @param {?} event Keyboard event
     * @return {?}
     */
    SearchBarComponent.prototype.onKeyup = /**
     * When a user types, validates the key and send it into the
     * stream if it's valid
     * \@internal
     * @param {?} event Keyboard event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var key = ((/** @type {?} */ (event.target))).value;
        if (!this.keyIsValid(key)) {
            return;
        }
        this.setTerm(key);
    };
    /**
     * Clear the stream and the input
     * @internal
     */
    /**
     * Clear the stream and the input
     * \@internal
     * @return {?}
     */
    SearchBarComponent.prototype.onClearButtonClick = /**
     * Clear the stream and the input
     * \@internal
     * @return {?}
     */
    function () {
        this.clear();
    };
    /**
     * Update the placeholder with the enabled search type. The placeholder
     * for all availables search typers needs to be defined in the locale
     * files or an error will be thrown.
     * @param searchType Enabled search type
     * @internal
     */
    /**
     * Update the placeholder with the enabled search type. The placeholder
     * for all availables search typers needs to be defined in the locale
     * files or an error will be thrown.
     * \@internal
     * @param {?} searchType Enabled search type
     * @return {?}
     */
    SearchBarComponent.prototype.onSearchTypeChange = /**
     * Update the placeholder with the enabled search type. The placeholder
     * for all availables search typers needs to be defined in the locale
     * files or an error will be thrown.
     * \@internal
     * @param {?} searchType Enabled search type
     * @return {?}
     */
    function (searchType) {
        this.searchTypeChange.emit(searchType);
        this.placeholder = "search." + searchType.toLowerCase() + ".placeholder";
        this.doSearch(this.term);
    };
    /**
     * Send the term into the stream only if this component is not disabled
     * @param term Search term
     */
    /**
     * Send the term into the stream only if this component is not disabled
     * @param {?} term Search term
     * @return {?}
     */
    SearchBarComponent.prototype.setTerm = /**
     * Send the term into the stream only if this component is not disabled
     * @param {?} term Search term
     * @return {?}
     */
    function (term) {
        if (this.disabled) {
            return;
        }
        this.term = term;
        if (term.replace(/(#[^\s]*)/g, '').trim().length >= this.minLength ||
            term.replace(/(#[^\s]*)/g, '').trim().length === 0) {
            this.stream$.next(term);
        }
    };
    /**
     * Clear the stream and the input
     */
    /**
     * Clear the stream and the input
     * @private
     * @return {?}
     */
    SearchBarComponent.prototype.clear = /**
     * Clear the stream and the input
     * @private
     * @return {?}
     */
    function () {
        this.term = '';
        this.stream$.next(this.term);
        this.input.nativeElement.focus();
    };
    /**
     * Validate if a given key stroke is a valid input
     */
    /**
     * Validate if a given key stroke is a valid input
     * @private
     * @param {?} key
     * @return {?}
     */
    SearchBarComponent.prototype.keyIsValid = /**
     * Validate if a given key stroke is a valid input
     * @private
     * @param {?} key
     * @return {?}
     */
    function (key) {
        return this.invalidKeys.indexOf(key) === -1;
    };
    /**
     * When the search term changes, emit an event and trigger a
     * research in every enabled search sources.
     * @param term Search term
     */
    /**
     * When the search term changes, emit an event and trigger a
     * research in every enabled search sources.
     * @private
     * @param {?} term Search term
     * @return {?}
     */
    SearchBarComponent.prototype.onTermChange = /**
     * When the search term changes, emit an event and trigger a
     * research in every enabled search sources.
     * @private
     * @param {?} term Search term
     * @return {?}
     */
    function (term) {
        this.change.emit(term);
        this.doSearch(term);
    };
    /**
     * Execute the search
     * @param term Search term
     */
    /**
     * Execute the search
     * @private
     * @param {?} term Search term
     * @return {?}
     */
    SearchBarComponent.prototype.doSearch = /**
     * Execute the search
     * @private
     * @param {?} term Search term
     * @return {?}
     */
    function (term) {
        var _this = this;
        if (term === undefined || term.replace(/(#[^\s]*)/g, '').trim() === '') {
            if (this.store !== undefined) {
                this.store.clear();
            }
            return;
        }
        if (this.store !== undefined) {
            this.store.softClear();
        }
        /** @type {?} */
        var researches = this.searchService.search(term);
        researches.map((/**
         * @param {?} research
         * @return {?}
         */
        function (research) {
            research.request.subscribe((/**
             * @param {?} results
             * @return {?}
             */
            function (results) {
                _this.onResearchCompleted(research, results);
            }));
        }));
    };
    /**
     * When a research  is completed, emit an event and update
     * the store's items.
     * @param research Research
     * @param results Research results
     */
    /**
     * When a research  is completed, emit an event and update
     * the store's items.
     * @private
     * @param {?} research Research
     * @param {?} results Research results
     * @return {?}
     */
    SearchBarComponent.prototype.onResearchCompleted = /**
     * When a research  is completed, emit an event and update
     * the store's items.
     * @private
     * @param {?} research Research
     * @param {?} results Research results
     * @return {?}
     */
    function (research, results) {
        this.search.emit({ research: research, results: results });
        if (this.store !== undefined) {
            /** @type {?} */
            var newResults = this.store.entities$.value
                .filter((/**
             * @param {?} result
             * @return {?}
             */
            function (result) { return result.source !== research.source; }))
                .concat(results);
            this.store.load(newResults);
        }
    };
    SearchBarComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-search-bar',
                    template: "<div class=\"igo-search-bar-container\">\r\n  <mat-form-field [floatLabel]=\"floatLabel\">\r\n    <input\r\n      #input\r\n      matInput\r\n      autocomplete=\"off\"\r\n      [ngClass]=\"{'hasSearchIcon': searchIcon}\"\r\n      [disabled]=\"disabled\"\r\n      [placeholder]=\"placeholder | translate\"\r\n      [ngModel]=\"term\"\r\n      (keyup)=\"onKeyup($event)\"\r\n      (touchend)=\"onKeyup($event)\">\r\n  </mat-form-field>\r\n\r\n  <div class=\"search-bar-buttons\">\r\n    <button\r\n      mat-icon-button\r\n      [color]=\"color\"\r\n      *ngIf=\"searchIcon !== undefined\">\r\n      <mat-icon svgIcon=\"{{searchIcon}}\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      mat-icon-button\r\n      [color]=\"color\"\r\n      (click)=\"onClearButtonClick()\"\r\n      *ngIf=\"!empty\">\r\n      <mat-icon svgIcon=\"close\"></mat-icon>\r\n    </button>\r\n\r\n    <igo-search-selector\r\n      [searchTypes]=\"searchTypes\"\r\n      (change)=\"onSearchTypeChange($event)\">\r\n    </igo-search-selector>\r\n\r\n    <igo-search-settings></igo-search-settings>\r\n  </div>\r\n\r\n\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [":host ::ng-deep .mat-form-field{padding:0 5px}:host ::ng-deep .mat-form-field-wrapper{margin-bottom:-1.5em}:host ::ng-deep span.mat-form-field-label-wrapper{top:-20px}:host ::ng-deep div.mat-form-field-infix{left:5px;right:5px;padding:0 0 12px!important}:host ::ng-deep div.mat-form-field-underline{display:none}.igo-search-bar-container{position:relative;width:100%;display:inline-flex;overflow:hidden}.igo-search-bar-container>mat-form-field{width:calc(100% - (2 * 40px))}:host.empty .igo-search-bar-container>mat-form-field{width:calc(100% - 40px)}.search-bar-buttons{position:relative;right:0;display:inline-flex;top:0}.search-bar-buttons>button:nth-child(2)::before{content:'';left:0;top:5px;border-right:1px solid #ddd;height:28px}igo-search-selector,igo-search-settings{background-color:#fff;top:0;border-radius:0}"]
                }] }
    ];
    /** @nocollapse */
    SearchBarComponent.ctorParameters = function () { return [
        { type: SearchService }
    ]; };
    SearchBarComponent.propDecorators = {
        term: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        floatLabel: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        disabled: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        color: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        debounce: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        minLength: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        searchIcon: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        searchTypes: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        change: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }],
        search: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }],
        searchTypeChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }],
        input: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ViewChild"], args: ['input',] }],
        emptyClass: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["HostBinding"], args: ['class.empty',] }]
    };
    return SearchBarComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var SearchUrlParamDirective = /** @class */ (function () {
    function SearchUrlParamDirective(component, ref, route) {
        this.component = component;
        this.ref = ref;
        this.route = route;
    }
    /**
     * @return {?}
     */
    SearchUrlParamDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.route && this.route.options.searchKey) {
            this.route.queryParams.subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                /** @type {?} */
                var searchParams = params[(/** @type {?} */ (_this.route.options.searchKey))];
                if (searchParams) {
                    _this.component.setTerm(searchParams);
                    _this.ref.detectChanges();
                }
            }));
        }
    };
    SearchUrlParamDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoSearchUrlParam]'
                },] }
    ];
    /** @nocollapse */
    SearchUrlParamDirective.ctorParameters = function () { return [
        { type: SearchBarComponent, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Self"] }] },
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["RouteService"], decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Optional"] }] }
    ]; };
    return SearchUrlParamDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoSearchBarModule = /** @class */ (function () {
    function IgoSearchBarModule() {
    }
    IgoSearchBarModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_forms__WEBPACK_IMPORTED_MODULE_64__["FormsModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatMenuModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatRadioModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatFormFieldModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatInputModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        IgoSearchSelectorModule,
                        IgoSearchSettingsModule
                    ],
                    exports: [
                        SearchBarComponent,
                    ],
                    declarations: [
                        SearchBarComponent,
                        SearchUrlParamDirective
                    ]
                },] }
    ];
    return IgoSearchBarModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var SearchResultMode = {
    Grouped: 'grouped',
    Flat: 'flat',
};
/**
 * List of search results with focus and selection capabilities.
 * This component is dumb and only emits events.
 */
var SearchResultsComponent = /** @class */ (function () {
    function SearchResultsComponent(cdRef) {
        this.cdRef = cdRef;
        /**
         * Reference to the SearchResultMode enum
         * \@internal
         */
        this.searchResultMode = SearchResultMode;
        /**
         * Search results display mode
         */
        this.mode = SearchResultMode.Grouped;
        /**
         * Event emitted when a result is focused
         */
        this.resultFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        /**
         * Event emitted when a result is selected
         */
        this.resultSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    Object.defineProperty(SearchResultsComponent.prototype, "results$", {
        get: /**
         * @return {?}
         */
        function () {
            if (this._results$ === undefined) {
                this._results$ = this.liftResults();
            }
            return this._results$;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Bind the search results store to the watcher
     * @internal
     */
    /**
     * Bind the search results store to the watcher
     * \@internal
     * @return {?}
     */
    SearchResultsComponent.prototype.ngOnInit = /**
     * Bind the search results store to the watcher
     * \@internal
     * @return {?}
     */
    function () {
        this.watcher = new _igo2_common__WEBPACK_IMPORTED_MODULE_68__["EntityStoreWatcher"](this.store, this.cdRef);
    };
    /**
     * Unbind the search results store from the watcher
     * @internal
     */
    /**
     * Unbind the search results store from the watcher
     * \@internal
     * @return {?}
     */
    SearchResultsComponent.prototype.ngOnDestroy = /**
     * Unbind the search results store from the watcher
     * \@internal
     * @return {?}
     */
    function () {
        this.watcher.destroy();
    };
    /**
     * When a result is focused, update it's state in the store and emit
     * an event.
     * @param result Search result
     * @internal
     */
    /**
     * When a result is focused, update it's state in the store and emit
     * an event.
     * \@internal
     * @param {?} result Search result
     * @return {?}
     */
    SearchResultsComponent.prototype.onResultFocus = /**
     * When a result is focused, update it's state in the store and emit
     * an event.
     * \@internal
     * @param {?} result Search result
     * @return {?}
     */
    function (result) {
        this.store.state.update(result, { focused: true }, true);
        this.resultFocus.emit(result);
    };
    /**
     * Compute a group title
     * @param group Search results group
     * @returns Group title
     * @internal
     */
    /**
     * Compute a group title
     * \@internal
     * @param {?} group Search results group
     * @return {?} Group title
     */
    SearchResultsComponent.prototype.computeGroupTitle = /**
     * Compute a group title
     * \@internal
     * @param {?} group Search results group
     * @return {?} Group title
     */
    function (group) {
        /** @type {?} */
        var parts = [group.source.title];
        /** @type {?} */
        var count = group.results.length;
        if (count > 1) {
            parts.push("(" + count + ")");
        }
        return parts.join(' ');
    };
    /**
     * When a result is selected, update it's state in the store and emit
     * an event. A selected result is also considered focused
     * @param result Search result
     * @internal
     */
    /**
     * When a result is selected, update it's state in the store and emit
     * an event. A selected result is also considered focused
     * \@internal
     * @param {?} result Search result
     * @return {?}
     */
    SearchResultsComponent.prototype.onResultSelect = /**
     * When a result is selected, update it's state in the store and emit
     * an event. A selected result is also considered focused
     * \@internal
     * @param {?} result Search result
     * @return {?}
     */
    function (result) {
        this.store.state.update(result, {
            focused: true,
            selected: true
        }, true);
        this.resultSelect.emit(result);
    };
    /**
     * Return an observable of the search results, grouped by search source
     * @returns Observable of grouped search results
     * @internal
     */
    /**
     * Return an observable of the search results, grouped by search source
     * \@internal
     * @private
     * @return {?} Observable of grouped search results
     */
    SearchResultsComponent.prototype.liftResults = /**
     * Return an observable of the search results, grouped by search source
     * \@internal
     * @private
     * @return {?} Observable of grouped search results
     */
    function () {
        var _this = this;
        return this.store.view.all$().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["debounce"])((/**
         * @param {?} results
         * @return {?}
         */
        function (results) {
            return results.length === 0 ? rxjs__WEBPACK_IMPORTED_MODULE_69__["EMPTY"] : Object(rxjs__WEBPACK_IMPORTED_MODULE_69__["timer"])(200);
        })), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} results
         * @return {?}
         */
        function (results) {
            return _this.groupResults(results.sort(_this.sortByOrder));
        })));
    };
    /**
     * Sort the results by display order.
     * @param r1 First result
     * @param r2 Second result
     */
    /**
     * Sort the results by display order.
     * @private
     * @param {?} r1 First result
     * @param {?} r2 Second result
     * @return {?}
     */
    SearchResultsComponent.prototype.sortByOrder = /**
     * Sort the results by display order.
     * @private
     * @param {?} r1 First result
     * @param {?} r2 Second result
     * @return {?}
     */
    function (r1, r2) {
        return r1.source.displayOrder - r2.source.displayOrder;
    };
    /**
     * Group results by search source
     * @param results Search results from all sources
     * @returns Search results grouped by source
     */
    /**
     * Group results by search source
     * @private
     * @param {?} results Search results from all sources
     * @return {?} Search results grouped by source
     */
    SearchResultsComponent.prototype.groupResults = /**
     * Group results by search source
     * @private
     * @param {?} results Search results from all sources
     * @return {?} Search results grouped by source
     */
    function (results) {
        /** @type {?} */
        var grouped = new Map();
        results.forEach((/**
         * @param {?} result
         * @return {?}
         */
        function (result) {
            /** @type {?} */
            var source = result.source;
            /** @type {?} */
            var sourceResults = grouped.get(source);
            if (sourceResults === undefined) {
                sourceResults = [];
                grouped.set(source, sourceResults);
            }
            sourceResults.push(result);
        }));
        return Array.from(grouped.keys()).map((/**
         * @param {?} source
         * @return {?}
         */
        function (source) {
            return { source: source, results: grouped.get(source) };
        }));
    };
    SearchResultsComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-search-results',
                    template: "<igo-list [navigation]=\"true\">\r\n  <ng-template\r\n    #groupTemplate\r\n    ngFor let-group\r\n    [ngForOf]=\"results$ | async\">\r\n\r\n    <igo-collapsible\r\n      *ngIf=\"mode === searchResultMode.Grouped; else flatTemplate\"\r\n      [title]=\"computeGroupTitle(group)\">\r\n      <ng-container *ngTemplateOutlet=\"storeItemTemplate; context: {results: group.results}\"></ng-container>\r\n    </igo-collapsible>\r\n\r\n    <ng-template #flatTemplate>\r\n      <ng-container *ngTemplateOutlet=\"storeItemTemplate; context: {results: group.results}\"></ng-container>\r\n    </ng-template>\r\n\r\n    <ng-template #storeItemTemplate let-results=\"results\">\r\n      <ng-template ngFor let-result [ngForOf]=\"results\">\r\n        <igo-search-results-item\r\n          igoListItem\r\n          color=\"accent\"\r\n          [result]=\"result\"\r\n          [focused]=\"store.state.get(result).focused\"\r\n          [selected]=\"store.state.get(result).selected\"\r\n          (focus)=\"onResultFocus(result)\"\r\n          (select)=\"onResultSelect(result)\">\r\n        </igo-search-results-item>\r\n      </ng-template>\r\n    </ng-template>\r\n\r\n  </ng-template>\r\n</igo-list>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    SearchResultsComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] }
    ]; };
    SearchResultsComponent.propDecorators = {
        store: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        mode: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        resultFocus: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }],
        resultSelect: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return SearchResultsComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Search results list item
 */
var SearchResultsItemComponent = /** @class */ (function () {
    function SearchResultsItemComponent() {
    }
    Object.defineProperty(SearchResultsItemComponent.prototype, "title", {
        /**
         * Search result title
         * @internal
         */
        get: /**
         * Search result title
         * \@internal
         * @return {?}
         */
        function () {
            return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityTitle"])(this.result);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchResultsItemComponent.prototype, "titleHtml", {
        /**
         * Search result HTML title
         * @internal
         */
        get: /**
         * Search result HTML title
         * \@internal
         * @return {?}
         */
        function () {
            return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityTitleHtml"])(this.result);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchResultsItemComponent.prototype, "icon", {
        /**
         * Search result icon
         * @internal
         */
        get: /**
         * Search result icon
         * \@internal
         * @return {?}
         */
        function () {
            return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityIcon"])(this.result);
        },
        enumerable: true,
        configurable: true
    });
    SearchResultsItemComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-search-results-item',
                    template: "<mat-list-item>\r\n  <mat-icon *ngIf=\"icon\" mat-list-avatar svgIcon=\"{{icon}}\"></mat-icon>\r\n  <h4 matLine *ngIf=\"titleHtml\" [innerHtml]=\"titleHtml\"></h4>\r\n  <h4 matLine *ngIf=\"!titleHtml\">{{title}}</h4>\r\n</mat-list-item>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: ["h4 :ng-deep small{color:\"#8C8C8C\"}"]
                }] }
    ];
    /** @nocollapse */
    SearchResultsItemComponent.ctorParameters = function () { return []; };
    SearchResultsItemComponent.propDecorators = {
        result: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return SearchResultsItemComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoSearchResultsModule = /** @class */ (function () {
    function IgoSearchResultsModule() {
    }
    IgoSearchResultsModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatTooltipModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatListModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoCollapsibleModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoListModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"]
                    ],
                    exports: [
                        SearchResultsComponent
                    ],
                    declarations: [
                        SearchResultsComponent,
                        SearchResultsItemComponent
                    ]
                },] }
    ];
    return IgoSearchResultsModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoSearchModule = /** @class */ (function () {
    function IgoSearchModule() {
    }
    /**
     * @return {?}
     */
    IgoSearchModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoSearchModule,
            providers: [
                provideSearchSourceService(),
                provideDefaultIChercheSearchResultFormatter(),
                provideDefaultCoordinatesSearchResultFormatter()
            ]
        };
    };
    IgoSearchModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        IgoSearchBarModule,
                        IgoSearchSelectorModule,
                        IgoSearchResultsModule,
                        IgoSearchSettingsModule
                    ],
                    exports: [
                        IgoSearchBarModule,
                        IgoSearchSelectorModule,
                        IgoSearchResultsModule,
                        IgoSearchSettingsModule
                    ],
                    declarations: []
                },] }
    ];
    return IgoSearchModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ToastComponent = /** @class */ (function () {
    function ToastComponent() {
        this.format = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_65__["default"]();
        this.opened = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    Object.defineProperty(ToastComponent.prototype, "expanded", {
        get: /**
         * @return {?}
         */
        function () {
            return this._expanded;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.state = value ? 'expanded' : 'collapsed';
            this._expanded = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToastComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this._map;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToastComponent.prototype, "feature", {
        get: /**
         * @return {?}
         */
        function () {
            return this._feature;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._feature = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToastComponent.prototype, "title", {
        /**
         * @internal
         */
        get: /**
         * \@internal
         * @return {?}
         */
        function () { return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["getEntityTitle"])(this.feature); },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ToastComponent.prototype.toggle = /**
     * @return {?}
     */
    function () {
        this.expanded = !this.expanded;
        this.opened.emit(this.expanded);
    };
    /**
     * @return {?}
     */
    ToastComponent.prototype.zoomToFeatureExtent = /**
     * @return {?}
     */
    function () {
        if (this.feature.geometry) {
            /** @type {?} */
            var olFeature = this.format.readFeature(this.feature, {
                dataProjection: this.feature.projection,
                featureProjection: this.map.projection
            });
            moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);
        }
    };
    /**
     * @param {?} action
     * @return {?}
     */
    ToastComponent.prototype.swipe = /**
     * @param {?} action
     * @return {?}
     */
    function (action) {
        if (action === ToastComponent.SWIPE_ACTION.UP) {
            if (!this.expanded) {
                this.toggle();
            }
        }
        else if (action === ToastComponent.SWIPE_ACTION.DOWN) {
            if (this.expanded) {
                this.toggle();
            }
        }
    };
    ToastComponent.SWIPE_ACTION = {
        UP: 'swipeup',
        DOWN: 'swipedown'
    };
    ToastComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-toast',
                    template: "<igo-flexible #flex\r\n  collapsedMobile=\"51px\"\r\n  expandedMobile=\"300px\"\r\n  [state]=\"state\"\r\n  (swipeup)=\"swipe($event.type)\"\r\n  (swipedown)=\"swipe($event.type)\">\r\n\r\n  <igo-panel [title]=\"title\">\r\n    <button\r\n      mat-icon-button\r\n      panelLeftButton\r\n      (click)=\"toggle()\">\r\n      <mat-icon [svgIcon]=\"['collapsed', 'initial'].indexOf(flex.state) >= 0 ? 'arrow_upward' : 'arrow_downward'\"></mat-icon>\r\n    </button>\r\n\r\n    <button mat-icon-button panelRightButton class=\"igo-icon-button\" (click)=\"zoomToFeatureExtent()\" *ngIf=\"feature.geometry\">\r\n      <mat-icon svgIcon=\"zoom-in\"></mat-icon>\r\n    </button>\r\n\r\n    <igo-feature-details [feature]=\"feature\"></igo-feature-details>\r\n  </igo-panel>\r\n\r\n</igo-flexible>\r\n",
                    styles: [":host{position:absolute;bottom:0;width:100%;max-height:calc(100% - 50px);background-color:#fff}igo-feature-details ::ng-deep table{width:100%}"]
                }] }
    ];
    /** @nocollapse */
    ToastComponent.ctorParameters = function () { return []; };
    ToastComponent.propDecorators = {
        expanded: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        feature: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        opened: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return ToastComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoToastModule = /** @class */ (function () {
    function IgoToastModule() {
    }
    /**
     * @return {?}
     */
    IgoToastModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoToastModule
        };
    };
    IgoToastModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoPanelModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoFlexibleModule"],
                        IgoFeatureModule
                    ],
                    exports: [ToastComponent],
                    declarations: [ToastComponent]
                },] }
    ];
    return IgoToastModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterComponent = /** @class */ (function () {
    function OgcFilterComponent(cdRef) {
        this.cdRef = cdRef;
        /**
         * Event emitted on complete
         */
        this.complete = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
        /**
         * Event emitted on cancel
         */
        this.cancel = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["EventEmitter"]();
    }
    /**
     * Implemented as part of OnUpdateInputs
     */
    /**
     * Implemented as part of OnUpdateInputs
     * @return {?}
     */
    OgcFilterComponent.prototype.onUpdateInputs = /**
     * Implemented as part of OnUpdateInputs
     * @return {?}
     */
    function () {
        this.cdRef.detectChanges();
    };
    /**
     * On close, emit the cancel event
     */
    /**
     * On close, emit the cancel event
     * @return {?}
     */
    OgcFilterComponent.prototype.onClose = /**
     * On close, emit the cancel event
     * @return {?}
     */
    function () {
        this.cancel.emit();
    };
    OgcFilterComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Component"], args: [{
                    selector: 'igo-ogc-filter',
                    template: "<igo-ogc-filterable-item\r\n  [layer]=\"layer\" \r\n  [map]=\"map\" >\r\n</igo-ogc-filterable-item>\r\n\r\n<div>\r\n  <button\r\n    mat-button\r\n    type=\"button\"\r\n    (click)=\"onClose()\">\r\n    {{ 'igo.geo.workspace.ogcFilter.close' | translate }}\r\n  </button>\r\n</div>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectionStrategy"].OnPush,
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    OgcFilterComponent.ctorParameters = function () { return [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["ChangeDetectorRef"] }
    ]; };
    OgcFilterComponent.propDecorators = {
        layer: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }],
        complete: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }],
        cancel: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Output"] }]
    };
    return OgcFilterComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var OgcFilterWidget = new _angular_core__WEBPACK_IMPORTED_MODULE_72__["InjectionToken"]('OgcFilterWidget');
/**
 * @param {?} widgetService
 * @return {?}
 */
function ogcFilterWidgetFactory(widgetService) {
    return widgetService.create(OgcFilterComponent);
}
/**
 * @return {?}
 */
function provideOgcFilterWidget() {
    return {
        provide: OgcFilterWidget,
        useFactory: ogcFilterWidgetFactory,
        deps: [_igo2_common__WEBPACK_IMPORTED_MODULE_68__["WidgetService"]]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoOgcFilterModule = /** @class */ (function () {
    function IgoOgcFilterModule() {
    }
    IgoOgcFilterModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_66__["MatButtonModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_76__["IgoLanguageModule"],
                        IgoFilterModule
                    ],
                    exports: [OgcFilterComponent],
                    declarations: [OgcFilterComponent],
                    entryComponents: [OgcFilterComponent]
                },] }
    ];
    return IgoOgcFilterModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WfsWorkspace = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(WfsWorkspace, _super);
    function WfsWorkspace(options) {
        var _this = _super.call(this, options) || this;
        _this.options = options;
        return _this;
    }
    Object.defineProperty(WfsWorkspace.prototype, "layer", {
        get: /**
         * @return {?}
         */
        function () { return this.options.layer; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WfsWorkspace.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () { return this.options.map; },
        enumerable: true,
        configurable: true
    });
    return WfsWorkspace;
}(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["Workspace"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WfsWorkspaceService = /** @class */ (function () {
    function WfsWorkspaceService() {
    }
    /**
     * @param {?} layer
     * @param {?} map
     * @return {?}
     */
    WfsWorkspaceService.prototype.createWorkspace = /**
     * @param {?} layer
     * @param {?} map
     * @return {?}
     */
    function (layer, map$$1) {
        return new WfsWorkspace({
            id: layer.id,
            title: layer.title,
            layer: layer,
            map: map$$1,
            entityStore: this.createFeatureStore(layer, map$$1),
            actionStore: new _igo2_common__WEBPACK_IMPORTED_MODULE_68__["ActionStore"]([]),
            meta: {
                tableTemplate: this.createTableTemplate(layer)
            }
        });
    };
    /**
     * @private
     * @param {?} layer
     * @param {?} map
     * @return {?}
     */
    WfsWorkspaceService.prototype.createFeatureStore = /**
     * @private
     * @param {?} layer
     * @param {?} map
     * @return {?}
     */
    function (layer, map$$1) {
        /** @type {?} */
        var store = new FeatureStore([], { map: map$$1 });
        store.bindLayer(layer);
        /** @type {?} */
        var loadingStrategy = new FeatureStoreLoadingLayerStrategy({});
        /** @type {?} */
        var selectionStrategy = new FeatureStoreSelectionStrategy({
            map: map$$1,
            hitTolerance: 5
        });
        store.addStrategy(loadingStrategy, true);
        store.addStrategy(selectionStrategy, true);
        return store;
    };
    /**
     * @private
     * @param {?} layer
     * @return {?}
     */
    WfsWorkspaceService.prototype.createTableTemplate = /**
     * @private
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var fields = layer.dataSource.options.sourceFields || [];
        /** @type {?} */
        var columns = fields.map((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            return {
                name: "properties." + field.name,
                title: field.alias ? field.alias : field.name
            };
        }));
        return {
            selection: true,
            sort: true,
            columns: columns
        };
    };
    WfsWorkspaceService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    WfsWorkspaceService.ctorParameters = function () { return []; };
    /** @nocollapse */ WfsWorkspaceService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function WfsWorkspaceService_Factory() { return new WfsWorkspaceService(); }, token: WfsWorkspaceService, providedIn: "root" });
    return WfsWorkspaceService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WmsWorkspace = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(WmsWorkspace, _super);
    function WmsWorkspace(options) {
        var _this = _super.call(this, options) || this;
        _this.options = options;
        return _this;
    }
    Object.defineProperty(WmsWorkspace.prototype, "layer", {
        get: /**
         * @return {?}
         */
        function () { return this.options.layer; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WmsWorkspace.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () { return this.options.map; },
        enumerable: true,
        configurable: true
    });
    return WmsWorkspace;
}(_igo2_common__WEBPACK_IMPORTED_MODULE_68__["Workspace"]));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WmsWorkspaceService = /** @class */ (function () {
    function WmsWorkspaceService() {
    }
    /**
     * @param {?} layer
     * @param {?} map
     * @return {?}
     */
    WmsWorkspaceService.prototype.createWorkspace = /**
     * @param {?} layer
     * @param {?} map
     * @return {?}
     */
    function (layer, map$$1) {
        return new WmsWorkspace({
            id: layer.id,
            title: layer.title,
            layer: layer,
            map: map$$1,
            actionStore: new _igo2_common__WEBPACK_IMPORTED_MODULE_68__["ActionStore"]([])
        });
    };
    WmsWorkspaceService.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    WmsWorkspaceService.ctorParameters = function () { return []; };
    /** @nocollapse */ WmsWorkspaceService.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_72__["defineInjectable"])({ factory: function WmsWorkspaceService_Factory() { return new WmsWorkspaceService(); }, token: WmsWorkspaceService, providedIn: "root" });
    return WmsWorkspaceService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var WorkspaceSelectorDirective = /** @class */ (function () {
    function WorkspaceSelectorDirective(component, wfsWorkspaceService, wmsWorkspaceService) {
        this.component = component;
        this.wfsWorkspaceService = wfsWorkspaceService;
        this.wmsWorkspaceService = wmsWorkspaceService;
    }
    Object.defineProperty(WorkspaceSelectorDirective.prototype, "workspaceStore", {
        get: /**
         * @return {?}
         */
        function () {
            return this.component.store;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    WorkspaceSelectorDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.layers$$ = this.map.layers$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["debounceTime"])(50))
            .subscribe((/**
         * @param {?} layers
         * @return {?}
         */
        function (layers) {
            return _this.onLayersChange(layers);
        }));
    };
    /**
     * @return {?}
     */
    WorkspaceSelectorDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.layers$$.unsubscribe();
    };
    /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    WorkspaceSelectorDirective.prototype.onLayersChange = /**
     * @private
     * @param {?} layers
     * @return {?}
     */
    function (layers) {
        var _this = this;
        /** @type {?} */
        var editableLayers = layers.filter((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) {
            return _this.layerIsEditable(layer);
        }));
        /** @type {?} */
        var editableLayersIds = editableLayers.map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return layer.id; }));
        /** @type {?} */
        var workspacesToAdd = editableLayers
            .map((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return _this.getOrCreateWorkspace(layer); }))
            .filter((/**
         * @param {?} workspace
         * @return {?}
         */
        function (workspace) { return workspace !== undefined; }));
        /** @type {?} */
        var workspacesToRemove = this.workspaceStore.all()
            .filter((/**
         * @param {?} workspace
         * @return {?}
         */
        function (workspace) {
            return editableLayersIds.indexOf(workspace.id) < 0;
        }));
        if (workspacesToRemove.length > 0) {
            workspacesToRemove.forEach((/**
             * @param {?} workspace
             * @return {?}
             */
            function (workspace) {
                workspace.deactivate();
            }));
            this.workspaceStore.state.updateMany(workspacesToRemove, { active: false, selected: false });
            this.workspaceStore.deleteMany(workspacesToRemove);
        }
        if (workspacesToAdd.length > 0) {
            this.workspaceStore.insertMany(workspacesToAdd);
        }
    };
    /**
     * @private
     * @param {?} layer
     * @return {?}
     */
    WorkspaceSelectorDirective.prototype.getOrCreateWorkspace = /**
     * @private
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var workspace = this.workspaceStore.get(layer.id);
        if (workspace !== undefined) {
            return;
        }
        if (layer.dataSource instanceof WFSDataSource) {
            return this.wfsWorkspaceService.createWorkspace((/** @type {?} */ (layer)), this.map);
        }
        else if (layer.dataSource instanceof WMSDataSource) {
            return this.wmsWorkspaceService.createWorkspace((/** @type {?} */ (layer)), this.map);
        }
        return;
    };
    /**
     * @private
     * @param {?} layer
     * @return {?}
     */
    WorkspaceSelectorDirective.prototype.layerIsEditable = /**
     * @private
     * @param {?} layer
     * @return {?}
     */
    function (layer) {
        /** @type {?} */
        var dataSource = layer.dataSource;
        if (dataSource instanceof WFSDataSource) {
            return true;
        }
        if (dataSource instanceof WMSDataSource) {
            /** @type {?} */
            var dataSourceOptions = (/** @type {?} */ ((dataSource.options ||
                {})));
            return (dataSourceOptions.ogcFilters && dataSourceOptions.ogcFilters.enabled);
        }
        return false;
    };
    WorkspaceSelectorDirective.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Directive"], args: [{
                    selector: '[igoWorkspaceSelector]'
                },] }
    ];
    /** @nocollapse */
    WorkspaceSelectorDirective.ctorParameters = function () { return [
        { type: _igo2_common__WEBPACK_IMPORTED_MODULE_68__["WorkspaceSelectorComponent"] },
        { type: WfsWorkspaceService },
        { type: WmsWorkspaceService }
    ]; };
    WorkspaceSelectorDirective.propDecorators = {
        map: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Input"] }]
    };
    return WorkspaceSelectorDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoWorkspaceSelectorModule = /** @class */ (function () {
    function IgoWorkspaceSelectorModule() {
    }
    IgoWorkspaceSelectorModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"]
                    ],
                    exports: [
                        WorkspaceSelectorDirective
                    ],
                    declarations: [
                        WorkspaceSelectorDirective
                    ]
                },] }
    ];
    return IgoWorkspaceSelectorModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoGeoWorkspaceModule = /** @class */ (function () {
    function IgoGeoWorkspaceModule() {
    }
    IgoGeoWorkspaceModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_67__["CommonModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_68__["IgoWidgetModule"],
                        IgoWorkspaceSelectorModule,
                        IgoOgcFilterModule
                    ],
                    exports: [
                        IgoWorkspaceSelectorModule,
                        IgoOgcFilterModule
                    ],
                    declarations: [],
                    providers: [
                        provideOgcFilterWidget()
                    ]
                },] }
    ];
    return IgoGeoWorkspaceModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoWktModule = /** @class */ (function () {
    function IgoWktModule() {
    }
    /**
     * @return {?}
     */
    IgoWktModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoWktModule,
            providers: []
        };
    };
    IgoWktModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [],
                    exports: [],
                    declarations: []
                },] }
    ];
    return IgoWktModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoGeoModule = /** @class */ (function () {
    function IgoGeoModule() {
    }
    /**
     * @return {?}
     */
    IgoGeoModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoGeoModule,
            providers: []
        };
    };
    IgoGeoModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: [
                        IgoCatalogModule,
                        IgoDataSourceModule,
                        IgoDownloadModule,
                        IgoFeatureModule,
                        IgoFilterModule,
                        IgoGeometryModule,
                        IgoImportExportModule,
                        IgoLayerModule,
                        IgoMapModule,
                        IgoMeasureModule,
                        IgoMetadataModule,
                        IgoOverlayModule,
                        IgoPrintModule,
                        IgoQueryModule,
                        IgoRoutingModule,
                        IgoSearchModule,
                        IgoToastModule,
                        IgoGeoWorkspaceModule,
                        IgoWktModule
                    ]
                },] }
    ];
    return IgoGeoModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * ILayer search source
 */
var ILayerSearchSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(ILayerSearchSource, _super);
    function ILayerSearchSource(http, languageService, options) {
        var _this = _super.call(this, options) || this;
        _this.http = http;
        _this.languageService = languageService;
        _this.title$ = new rxjs__WEBPACK_IMPORTED_MODULE_69__["BehaviorSubject"]('');
        _this.languageService.translate.get(_this.options.title).subscribe((/**
         * @param {?} title
         * @return {?}
         */
        function (title) { return _this.title$.next(title); }));
        return _this;
    }
    Object.defineProperty(ILayerSearchSource.prototype, "title", {
        get: /**
         * @return {?}
         */
        function () {
            return this.title$.getValue();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ILayerSearchSource.prototype.getId = /**
     * @return {?}
     */
    function () {
        return ILayerSearchSource.id;
    };
    /**
     * @protected
     * @return {?}
     */
    ILayerSearchSource.prototype.getDefaultOptions = /**
     * @protected
     * @return {?}
     */
    function () {
        return {
            title: 'igo.geo.search.dataSources.name',
            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/layers/search'
        };
    };
    /**
     * Search a layer by name or keyword
     * @param term Layer name or keyword
     * @returns Observable of <SearchResult<LayerOptions>[]
     */
    /**
     * Search a layer by name or keyword
     * @param {?} term Layer name or keyword
     * @param {?=} options
     * @return {?} Observable of <SearchResult<LayerOptions>[]
     */
    ILayerSearchSource.prototype.search = /**
     * Search a layer by name or keyword
     * @param {?} term Layer name or keyword
     * @param {?=} options
     * @return {?} Observable of <SearchResult<LayerOptions>[]
     */
    function (term, options) {
        var _this = this;
        /** @type {?} */
        var params = this.computeSearchRequestParams(term, options || {});
        return this.http
            .get(this.searchUrl, { params: params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} response
         * @return {?}
         */
        function (response) { return _this.extractResults(response); })));
    };
    /**
     * @private
     * @param {?} term
     * @param {?} options
     * @return {?}
     */
    ILayerSearchSource.prototype.computeSearchRequestParams = /**
     * @private
     * @param {?} term
     * @param {?} options
     * @return {?}
     */
    function (term, options) {
        return new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpParams"]({
            fromObject: Object.assign({
                q: term
            }, this.params, options.params || {})
        });
    };
    /**
     * @private
     * @param {?} response
     * @return {?}
     */
    ILayerSearchSource.prototype.extractResults = /**
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        return response.items.map((/**
         * @param {?} data
         * @return {?}
         */
        function (data) { return _this.dataToResult(data); }));
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    ILayerSearchSource.prototype.dataToResult = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var layerOptions = this.computeLayerOptions(data);
        return {
            source: this,
            meta: {
                dataType: LAYER,
                id: [this.getId(), data.id].join('.'),
                title: data.source.title,
                titleHtml: data.highlight.title,
                icon: data.source.type === 'Layer' ? 'layers' : 'map'
            },
            data: layerOptions
        };
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    ILayerSearchSource.prototype.computeLayerOptions = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var url = data.source.url;
        /** @type {?} */
        var queryParams = this.extractQueryParamsFromSourceUrl(url);
        return {
            title: data.source.title,
            sourceOptions: {
                crossOrigin: 'anonymous',
                type: data.source.format,
                url: url,
                queryable: ((/** @type {?} */ (data.source))).queryable,
                queryFormat: queryParams.format,
                queryHtmlTarget: queryParams.htmlTarget,
                params: {
                    layers: data.source.name
                }
            }
        };
    };
    /**
     * @private
     * @param {?} url
     * @return {?}
     */
    ILayerSearchSource.prototype.extractQueryParamsFromSourceUrl = /**
     * @private
     * @param {?} url
     * @return {?}
     */
    function (url) {
        var e_1, _a;
        /** @type {?} */
        var queryFormat = QueryFormat.GML2;
        /** @type {?} */
        var htmlTarget;
        /** @type {?} */
        var formatOpt = ((/** @type {?} */ (this.options))).queryFormat;
        if (formatOpt) {
            var _loop_1 = function (key) {
                /** @type {?} */
                var value = formatOpt[key];
                if (value === '*') {
                    queryFormat = QueryFormat[key.toUpperCase()];
                    return "break";
                }
                /** @type {?} */
                var urls = ((/** @type {?} */ ((/** @type {?} */ (value))))).urls;
                if (Array.isArray(urls)) {
                    urls.forEach((/**
                     * @param {?} urlOpt
                     * @return {?}
                     */
                    function (urlOpt) {
                        if (url.indexOf(urlOpt) !== -1) {
                            queryFormat = QueryFormat[key.toUpperCase()];
                        }
                    }));
                    return "break";
                }
            };
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__values"])(Object.keys(formatOpt)), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var key = _c.value;
                    var state_1 = _loop_1(key);
                    if (state_1 === "break")
                        break;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        if (queryFormat === QueryFormat.HTML) {
            htmlTarget = 'iframe';
        }
        return {
            format: queryFormat,
            htmlTarget: htmlTarget
        };
    };
    ILayerSearchSource.id = 'ilayer';
    ILayerSearchSource.type = LAYER;
    ILayerSearchSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    ILayerSearchSource.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"] },
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: ['options',] }] }
    ]; };
    return ILayerSearchSource;
}(SearchSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * ILayer search source factory
 * @ignore
 * @param {?} http
 * @param {?} languageService
 * @param {?} config
 * @return {?}
 */
function ilayerSearchSourceFactory(http, languageService, config) {
    return new ILayerSearchSource(http, languageService, config.getConfig("searchSources." + ILayerSearchSource.id));
}
/**
 * Function that returns a provider for the ILayer search source
 * @return {?}
 */
function provideILayerSearchSource() {
    return {
        provide: SearchSource,
        useFactory: ilayerSearchSourceFactory,
        multi: true,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"], _igo2_core__WEBPACK_IMPORTED_MODULE_76__["LanguageService"], _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Nominatim search source
 */
var NominatimSearchSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(NominatimSearchSource, _super);
    function NominatimSearchSource(http, options) {
        var _this = _super.call(this, options) || this;
        _this.http = http;
        return _this;
    }
    /**
     * @return {?}
     */
    NominatimSearchSource.prototype.getId = /**
     * @return {?}
     */
    function () {
        return NominatimSearchSource.id;
    };
    /*
     * Source : https://wiki.openstreetmap.org/wiki/Key:amenity
    */
    /*
       * Source : https://wiki.openstreetmap.org/wiki/Key:amenity
      */
    /**
     * @protected
     * @return {?}
     */
    NominatimSearchSource.prototype.getDefaultOptions = /*
       * Source : https://wiki.openstreetmap.org/wiki/Key:amenity
      */
    /**
     * @protected
     * @return {?}
     */
    function () {
        return {
            title: 'Nominatim (OSM)',
            searchUrl: 'https://nominatim.openstreetmap.org/search',
            settings: [
                {
                    type: 'checkbox',
                    title: 'results type',
                    name: 'amenity',
                    values: [
                        {
                            title: 'Restauration',
                            value: 'bar,bbq,biergaten,cafe,drinking_water,fast_food,food_court,ice_cream,pub,restaurant',
                            enabled: false
                        },
                        {
                            title: 'Santé',
                            value: 'baby_hatch,clinic,dentist,doctors,hospital,nursing_home,pharmacy,social_facility,veterinary',
                            enabled: false
                        },
                        {
                            title: 'Divertissement',
                            value: 'arts_centre,brothel,casino,cinema,community_center_fountain,gambling,nightclub,planetarium \
                          ,public_bookcase,social_centre,stripclub,studio,swingerclub,theatre,internet_cafe',
                            enabled: false
                        },
                        {
                            title: 'Finance',
                            value: 'atm,bank,bureau_de_change',
                            enabled: false
                        }
                    ]
                },
                {
                    type: 'radiobutton',
                    title: 'results limit',
                    name: 'limit',
                    values: [
                        {
                            title: '10',
                            value: 10,
                            enabled: true
                        },
                        {
                            title: '20',
                            value: 20,
                            enabled: false
                        },
                        {
                            title: '50',
                            value: 50,
                            enabled: false
                        }
                    ]
                },
                {
                    type: 'radiobutton',
                    title: 'country limitation',
                    name: 'countrycodes',
                    values: [
                        {
                            title: 'Canada',
                            value: 'CA',
                            enabled: true
                        },
                        {
                            title: 'Le monde',
                            value: null,
                            enabled: false
                        }
                    ]
                },
                {
                    type: 'radiobutton',
                    title: 'multiple object',
                    name: 'dedupe',
                    values: [
                        {
                            title: 'Oui',
                            value: 0,
                            enabled: false
                        },
                        {
                            title: 'Non',
                            value: 1,
                            enabled: true
                        }
                    ]
                }
            ]
        };
    };
    /**
     * Search a place by name
     * @param term Place name
     * @returns Observable of <SearchResult<Feature>[]
     */
    /**
     * Search a place by name
     * @param {?} term Place name
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    NominatimSearchSource.prototype.search = /**
     * Search a place by name
     * @param {?} term Place name
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    function (term, options) {
        var _this = this;
        /** @type {?} */
        var params = this.computeSearchRequestParams(term, options || {});
        return this.http
            .get(this.searchUrl, { params: params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} response
         * @return {?}
         */
        function (response) { return _this.extractResults(response); })));
    };
    /**
     * @private
     * @param {?} term
     * @param {?} options
     * @return {?}
     */
    NominatimSearchSource.prototype.computeSearchRequestParams = /**
     * @private
     * @param {?} term
     * @param {?} options
     * @return {?}
     */
    function (term, options) {
        return new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpParams"]({
            fromObject: Object.assign({
                q: this.computeTerm(term),
                format: 'json'
            }, this.params, options.params || {})
        });
    };
    /**
     * @private
     * @param {?} response
     * @return {?}
     */
    NominatimSearchSource.prototype.extractResults = /**
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        return response.map((/**
         * @param {?} data
         * @return {?}
         */
        function (data) { return _this.dataToResult(data); }));
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    NominatimSearchSource.prototype.dataToResult = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = this.computeProperties(data);
        /** @type {?} */
        var geometry = this.computeGeometry(data);
        /** @type {?} */
        var extent = this.computeExtent(data);
        /** @type {?} */
        var id = [this.getId(), 'place', data.place_id].join('.');
        return {
            source: this,
            meta: {
                dataType: FEATURE,
                id: id,
                title: data.display_name,
                icon: 'map-marker'
            },
            data: {
                type: FEATURE,
                projection: 'EPSG:4326',
                geometry: geometry,
                extent: extent,
                properties: properties,
                meta: {
                    id: id,
                    title: data.display_name
                }
            }
        };
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    NominatimSearchSource.prototype.computeProperties = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        return {
            display_name: data.display_name,
            place_id: data.place_id,
            osm_type: data.osm_type,
            class: data.class,
            type: data.type
        };
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    NominatimSearchSource.prototype.computeGeometry = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        return {
            type: 'Point',
            coordinates: [parseFloat(data.lon), parseFloat(data.lat)]
        };
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    NominatimSearchSource.prototype.computeExtent = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        return [
            parseFloat(data.boundingbox[2]),
            parseFloat(data.boundingbox[0]),
            parseFloat(data.boundingbox[3]),
            parseFloat(data.boundingbox[1])
        ];
    };
    /**
     * @private
     * @param {?} term
     * @return {?}
     */
    NominatimSearchSource.prototype.computeTerm = /**
     * @private
     * @param {?} term
     * @return {?}
     */
    function (term) {
        term = this.computeTermTags(term);
        return term;
    };
    /**
     * Add hashtag from query in Nominatim's format (+[])
     * @param term Query with hashtag
     */
    /**
     * Add hashtag from query in Nominatim's format (+[])
     * @private
     * @param {?} term Query with hashtag
     * @return {?}
     */
    NominatimSearchSource.prototype.computeTermTags = /**
     * Add hashtag from query in Nominatim's format (+[])
     * @private
     * @param {?} term Query with hashtag
     * @return {?}
     */
    function (term) {
        var _this = this;
        /** @type {?} */
        var tags = term.match(/(#[^\s]+)/g);
        /** @type {?} */
        var addTagsFromSettings = true;
        if (tags) {
            tags.forEach((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                term = term.replace(value, '');
                if (_super.prototype.hashtagValid.call(_this, _super.prototype.getSettingsValues.call(_this, 'amenity'), value)) {
                    term += '+[' + value.substring(1) + ']';
                    addTagsFromSettings = false;
                }
            }));
            addTagsFromSettings = false;
        }
        if (addTagsFromSettings) {
            term = this.computeTermSettings(term);
        }
        return term;
    };
    /**
     * Add hashtag from settings in Nominatim's format (+[])
     * @param term Query
     */
    /**
     * Add hashtag from settings in Nominatim's format (+[])
     * @private
     * @param {?} term Query
     * @return {?}
     */
    NominatimSearchSource.prototype.computeTermSettings = /**
     * Add hashtag from settings in Nominatim's format (+[])
     * @private
     * @param {?} term Query
     * @return {?}
     */
    function (term) {
        this.options.settings.forEach((/**
         * @param {?} settings
         * @return {?}
         */
        function (settings) {
            if (settings.name === 'amenity') {
                settings.values.forEach((/**
                 * @param {?} conf
                 * @return {?}
                 */
                function (conf) {
                    if (conf.enabled && typeof conf.value === 'string') {
                        /** @type {?} */
                        var splitted = conf.value.split(',');
                        splitted.forEach((/**
                         * @param {?} value
                         * @return {?}
                         */
                        function (value) {
                            term += '+[' + value + ']';
                        }));
                    }
                }));
            }
        }));
        return term;
    };
    NominatimSearchSource.id = 'nominatim';
    NominatimSearchSource.type = FEATURE;
    NominatimSearchSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    NominatimSearchSource.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: ['options',] }] }
    ]; };
    return NominatimSearchSource;
}(SearchSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Nominatim search source factory
 * @ignore
 * @param {?} http
 * @param {?} config
 * @return {?}
 */
function nominatimSearchSourceFactory(http, config) {
    return new NominatimSearchSource(http, config.getConfig("searchSources." + NominatimSearchSource.id));
}
/**
 * Function that returns a provider for the Nominatim search source
 * @return {?}
 */
function provideNominatimSearchSource() {
    return {
        provide: SearchSource,
        useFactory: nominatimSearchSourceFactory,
        multi: true,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"], _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * StoredQueries search source
 */
var StoredQueriesSearchSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(StoredQueriesSearchSource, _super);
    function StoredQueriesSearchSource(http, options) {
        var _this = _super.call(this, options) || this;
        _this.http = http;
        _this.storedQueriesOptions = (/** @type {?} */ (options));
        if (!_this.storedQueriesOptions.storedquery_id) {
            /** @type {?} */
            var err = 'Stored Queries :You have to set "storedquery_id" into StoredQueries options. ex: storedquery_id: "nameofstoredquerie"';
            throw new Error(err);
        }
        if (!_this.storedQueriesOptions.fields) {
            throw new Error('Stored Queries :You have to set "fields" into options. ex: fields: {"name": "rtss", "defaultValue": "-99"}');
        }
        _this.storedQueriesOptions.outputformat = _this.storedQueriesOptions.outputformat || 'text/xml; subtype=gml/3.1.1';
        _this.storedQueriesOptions.srsname = _this.storedQueriesOptions.srsname || 'EPSG:4326';
        /** @type {?} */
        var storedQueryId = _this.storedQueriesOptions.storedquery_id.toLowerCase();
        if (storedQueryId.includes('getfeaturebyid') && _this.storedQueriesOptions.outputformat.toLowerCase().includes('getfeaturebyid')) {
            /** @type {?} */
            var err = 'You must set a geojson format for your stored query. This is due to an openlayers issue)';
            err += ' (wfs 1.1.0 & gml 3.1.1 limitation)';
            throw new Error(err);
        }
        if (!_this.storedQueriesOptions.fields) {
            throw new Error('Stored Queries :You must set a fields definition for your stored query');
        }
        if (!(_this.storedQueriesOptions.fields instanceof Array)) {
            _this.storedQueriesOptions.fields = [_this.storedQueriesOptions.fields];
        }
        _this.multipleFieldsQuery = _this.storedQueriesOptions.fields.length > 1 ? true : false;
        _this.storedQueriesOptions.fields.forEach((/**
         * @param {?} field
         * @param {?} index
         * @return {?}
         */
        function (field, index) {
            if (_this.multipleFieldsQuery && !field.splitPrefix && index !== 0) {
                throw new Error('Stored Queries :You must set a field spliter into your field definition (optional for the first one!)');
            }
            if (!field.defaultValue) {
                throw new Error('Stored Queries :You must set a field default value into your field definition');
            }
        }));
        _this.storedQueriesOptions.resultTitle = _this.storedQueriesOptions.resultTitle || _this.resultTitle;
        return _this;
    }
    /**
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.getId = /**
     * @return {?}
     */
    function () {
        return StoredQueriesSearchSource.id;
    };
    /**
     * @protected
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.getDefaultOptions = /**
     * @protected
     * @return {?}
     */
    function () {
        return {
            title: 'Stored Queries',
            searchUrl: 'https://ws.mapserver.transports.gouv.qc.ca/swtq'
        };
    };
    // URL CALL EXAMPLES:
    //  GetFeatureById (mandatory storedquery for wfs server) (outputformat must be in geojson)
    //  tslint:disable-next-line:max-line-length
    //  https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=2.0.0&request=GetFeature&storedquery_id=urn:ogc:def:query:OGC-WFS::GetFeatureById&srsname=epsg:4326&outputformat=geojson&ID=a_num_route.132
    //  Custom StoredQuery
    //  tslint:disable-next-line:max-line-length
    //  https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=1.1.0&request=GetFeature&storedquery_id=rtss&srsname=epsg:4326&outputformat=text/xml;%20subtype=gml/3.1.1&rtss=0013801110000c&chainage=12
    /**
     * Search a location by name or keyword
     * @param term Location name or keyword
     * @returns Observable of <SearchResult<Feature>[]
     */
    // URL CALL EXAMPLES:
    //  GetFeatureById (mandatory storedquery for wfs server) (outputformat must be in geojson)
    //  tslint:disable-next-line:max-line-length
    //  https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=2.0.0&request=GetFeature&storedquery_id=urn:ogc:def:query:OGC-WFS::GetFeatureById&srsname=epsg:4326&outputformat=geojson&ID=a_num_route.132
    //  Custom StoredQuery
    //  tslint:disable-next-line:max-line-length
    //  https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=1.1.0&request=GetFeature&storedquery_id=rtss&srsname=epsg:4326&outputformat=text/xml;%20subtype=gml/3.1.1&rtss=0013801110000c&chainage=12
    /**
     * Search a location by name or keyword
     * @param {?} term Location name or keyword
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    StoredQueriesSearchSource.prototype.search = 
    // URL CALL EXAMPLES:
    //  GetFeatureById (mandatory storedquery for wfs server) (outputformat must be in geojson)
    //  tslint:disable-next-line:max-line-length
    //  https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=2.0.0&request=GetFeature&storedquery_id=urn:ogc:def:query:OGC-WFS::GetFeatureById&srsname=epsg:4326&outputformat=geojson&ID=a_num_route.132
    //  Custom StoredQuery
    //  tslint:disable-next-line:max-line-length
    //  https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=1.1.0&request=GetFeature&storedquery_id=rtss&srsname=epsg:4326&outputformat=text/xml;%20subtype=gml/3.1.1&rtss=0013801110000c&chainage=12
    /**
     * Search a location by name or keyword
     * @param {?} term Location name or keyword
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    function (term, options) {
        var _this = this;
        /** @type {?} */
        var storedqueriesParams = this.termSplitter(term, this.storedQueriesOptions.fields);
        /** @type {?} */
        var params = this.computeRequestParams(options || {}, storedqueriesParams);
        if (new RegExp('.*?gml.*?', 'i').test(this.storedQueriesOptions.outputformat)) {
            return this.http
                .get(this.searchUrl, { params: params, responseType: 'text' })
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                return _this.extractResults(_this.extractWFSData(response));
            })));
        }
        else {
            return this.http
                .get(this.searchUrl, { params: params })
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                return _this.extractResults(_this.extractWFSData(response));
            })));
        }
    };
    /**
     * @private
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.getFormatFromOptions = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var olFormatCls;
        /** @type {?} */
        var outputFormat = this.storedQueriesOptions.outputformat;
        /** @type {?} */
        var patternGml3 = new RegExp('.*?gml.*?', 'i');
        /** @type {?} */
        var patternGeojson = new RegExp('.*?json.*?', 'i');
        if (patternGeojson.test(outputFormat)) {
            olFormatCls = ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"];
        }
        if (patternGml3.test(outputFormat)) {
            olFormatCls = ol_format__WEBPACK_IMPORTED_MODULE_70__["WFS"];
        }
        return new olFormatCls();
    };
    /**
     * @private
     * @param {?} res
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.extractWFSData = /**
     * @private
     * @param {?} res
     * @return {?}
     */
    function (res) {
        /** @type {?} */
        var olFormat = this.getFormatFromOptions();
        /** @type {?} */
        var geojson = ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"];
        /** @type {?} */
        var wfsfeatures = olFormat.readFeatures(res);
        /** @type {?} */
        var features = JSON.parse(new geojson().writeFeatures(wfsfeatures));
        return features;
    };
    /**
     * @private
     * @param {?} term
     * @param {?} fields
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.termSplitter = /**
     * @private
     * @param {?} term
     * @param {?} fields
     * @return {?}
     */
    function (term, fields) {
        /** @type {?} */
        var splittedTerm = {};
        /** @type {?} */
        var remainingTerm = term;
        /** @type {?} */
        var cnt = 0;
        // Used to build the default values
        fields.forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            splittedTerm[field.name] = field.defaultValue;
            /** @type {?} */
            var splitterRegex = new RegExp(field.splitPrefix + '(.+)', 'i');
            if (splitterRegex.test(remainingTerm)) {
                cnt = field.splitPrefix ? cnt += 1 : cnt;
                remainingTerm = remainingTerm.split(splitterRegex)[1];
            }
        }));
        if (cnt === 0) {
            splittedTerm[fields[0].name] = term;
            return splittedTerm;
        }
        remainingTerm = term;
        /** @type {?} */
        var localFields = Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__spread"])(fields).reverse();
        localFields.forEach((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            /** @type {?} */
            var splitterRegex = new RegExp(field.splitPrefix || '' + '(.+)', 'i');
            if (remainingTerm || remainingTerm !== '') {
                /** @type {?} */
                var values = remainingTerm.split(splitterRegex);
                remainingTerm = values[0];
                if (values[1]) {
                    splittedTerm[field.name] = values[1].trim();
                }
            }
        }));
        return splittedTerm;
    };
    /**
     * @private
     * @param {?} options
     * @param {?} queryParams
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.computeRequestParams = /**
     * @private
     * @param {?} options
     * @param {?} queryParams
     * @return {?}
     */
    function (options, queryParams) {
        /** @type {?} */
        var wfsversion = this.storedQueriesOptions.storedquery_id.toLowerCase().includes('getfeaturebyid') ? '2.0.0' : '1.1.0';
        return new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpParams"]({
            fromObject: Object.assign({
                service: 'wfs',
                version: wfsversion,
                request: 'GetFeature',
                storedquery_id: this.storedQueriesOptions.storedquery_id,
                srsname: this.storedQueriesOptions.srsname,
                outputformat: this.storedQueriesOptions.outputformat
            }, queryParams, this.params, options.params || {})
        });
    };
    /**
     * @private
     * @param {?} response
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.extractResults = /**
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        return response.features.map((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            return _this.dataToResult(data);
        }));
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.dataToResult = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = this.computeProperties(data);
        /** @type {?} */
        var id = [this.getId(), properties.type, data.id].join('.');
        /** @type {?} */
        var title = data.properties[this.storedQueriesOptions.resultTitle] ? this.storedQueriesOptions.resultTitle : this.resultTitle;
        return {
            source: this,
            data: {
                type: FEATURE,
                projection: 'EPSG:4326',
                geometry: data.geometry,
                // extent: data.bbox,
                properties: properties,
                meta: {
                    id: id,
                    title: data.properties[title]
                }
            },
            meta: {
                dataType: FEATURE,
                id: id,
                title: data.properties.title,
                titleHtml: data.properties[title],
                icon: 'map-marker'
            }
        };
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    StoredQueriesSearchSource.prototype.computeProperties = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].removeKeys(data.properties, StoredQueriesSearchSource.propertiesBlacklist);
        return properties;
    };
    StoredQueriesSearchSource.id = 'storedqueries';
    StoredQueriesSearchSource.type = FEATURE;
    StoredQueriesSearchSource.propertiesBlacklist = [];
    StoredQueriesSearchSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    StoredQueriesSearchSource.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: ['options',] }] }
    ]; };
    return StoredQueriesSearchSource;
}(SearchSource));
/**
 * StoredQueriesReverse search source
 */
// EXAMPLE CALLS
// tslint:disable-next-line:max-line-length
// https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=1.1.0&request=GetFeature&storedquery_id=lim_adm&srsname=epsg:4326&outputformat=text/xml;%20subtype=gml/3.1.1&long=-71.292469&lat=46.748107
//
var StoredQueriesReverseSearchSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(StoredQueriesReverseSearchSource, _super);
    function StoredQueriesReverseSearchSource(http, options) {
        var _this = _super.call(this, options) || this;
        _this.http = http;
        _this.storedQueriesOptions = (/** @type {?} */ (options));
        if (!_this.storedQueriesOptions.storedquery_id) {
            /** @type {?} */
            var err = 'Stored Queries :You have to set "storedquery_id" into StoredQueries options. ex: storedquery_id: "nameofstoredquerie"';
            throw new Error(err);
        }
        if (!_this.storedQueriesOptions.longField) {
            throw new Error('Stored Queries :You have to set "longField" to map the longitude coordinate to the query params.');
        }
        if (!_this.storedQueriesOptions.latField) {
            throw new Error('Stored Queries :You have to set "latField" to map the latitude coordinate to the query params.');
        }
        _this.storedQueriesOptions.outputformat = _this.storedQueriesOptions.outputformat || 'text/xml; subtype=gml/3.1.1';
        _this.storedQueriesOptions.srsname = _this.storedQueriesOptions.srsname || 'EPSG:4326';
        _this.storedQueriesOptions.resultTitle = _this.storedQueriesOptions.resultTitle || _this.resultTitle;
        return _this;
    }
    /**
     * @return {?}
     */
    StoredQueriesReverseSearchSource.prototype.getId = /**
     * @return {?}
     */
    function () {
        return StoredQueriesReverseSearchSource.id;
    };
    /**
     * @protected
     * @return {?}
     */
    StoredQueriesReverseSearchSource.prototype.getDefaultOptions = /**
     * @protected
     * @return {?}
     */
    function () {
        return {
            title: 'Stored Queries (reverse)',
            searchUrl: 'https://ws.mapserver.transports.gouv.qc.ca/swtq'
        };
    };
    /**
     * Search a location by coordinates
     * @param lonLat Location coordinates
     * @param distance Search raidus around lonLat
     * @returns Observable of <SearchResult<Feature>[]
     */
    /**
     * Search a location by coordinates
     * @param {?} lonLat Location coordinates
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    StoredQueriesReverseSearchSource.prototype.reverseSearch = /**
     * Search a location by coordinates
     * @param {?} lonLat Location coordinates
     * @param {?=} options
     * @return {?} Observable of <SearchResult<Feature>[]
     */
    function (lonLat, options) {
        var _this = this;
        /** @type {?} */
        var params = this.computeRequestParams(lonLat, options || {});
        if (new RegExp('.*?gml.*?', 'i').test(this.storedQueriesOptions.outputformat)) {
            return this.http
                .get(this.searchUrl, { params: params, responseType: 'text' })
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                return _this.extractResults(_this.extractWFSData(response));
            })));
        }
        else {
            return this.http
                .get(this.searchUrl, { params: params })
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                return _this.extractResults(_this.extractWFSData(response));
            })));
        }
    };
    /**
     * @private
     * @return {?}
     */
    StoredQueriesReverseSearchSource.prototype.getFormatFromOptions = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var olFormatCls;
        /** @type {?} */
        var outputFormat = this.storedQueriesOptions.outputformat;
        /** @type {?} */
        var patternGml3 = new RegExp('.*?gml.*?', 'i');
        /** @type {?} */
        var patternGeojson = new RegExp('.*?json.*?', 'i');
        if (patternGeojson.test(outputFormat)) {
            olFormatCls = ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"];
        }
        if (patternGml3.test(outputFormat)) {
            olFormatCls = ol_format__WEBPACK_IMPORTED_MODULE_70__["WFS"];
        }
        return new olFormatCls();
    };
    /**
     * @private
     * @param {?} res
     * @return {?}
     */
    StoredQueriesReverseSearchSource.prototype.extractWFSData = /**
     * @private
     * @param {?} res
     * @return {?}
     */
    function (res) {
        /** @type {?} */
        var olFormat = this.getFormatFromOptions();
        /** @type {?} */
        var geojson = ol_format__WEBPACK_IMPORTED_MODULE_70__["GeoJSON"];
        /** @type {?} */
        var wfsfeatures = olFormat.readFeatures(res);
        /** @type {?} */
        var features = JSON.parse(new geojson().writeFeatures(wfsfeatures));
        return features;
    };
    /**
     * @private
     * @param {?} lonLat
     * @param {?=} options
     * @return {?}
     */
    StoredQueriesReverseSearchSource.prototype.computeRequestParams = /**
     * @private
     * @param {?} lonLat
     * @param {?=} options
     * @return {?}
     */
    function (lonLat, options) {
        /** @type {?} */
        var longLatParams = {};
        longLatParams[this.storedQueriesOptions.longField] = lonLat[0];
        longLatParams[this.storedQueriesOptions.latField] = lonLat[1];
        return new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpParams"]({
            fromObject: Object.assign({
                service: 'wfs',
                version: '1.1.0',
                request: 'GetFeature',
                storedquery_id: this.storedQueriesOptions.storedquery_id,
                srsname: this.storedQueriesOptions.srsname,
                outputformat: this.storedQueriesOptions.outputformat,
            }, longLatParams, this.params, options.params || {})
        });
    };
    /**
     * @private
     * @param {?} response
     * @return {?}
     */
    StoredQueriesReverseSearchSource.prototype.extractResults = /**
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        return response.features.map((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            return _this.dataToResult(data);
        }));
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    StoredQueriesReverseSearchSource.prototype.dataToResult = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = this.computeProperties(data);
        /** @type {?} */
        var id = [this.getId(), properties.type, data.id].join('.');
        /** @type {?} */
        var title = data.properties[this.storedQueriesOptions.resultTitle] ? this.storedQueriesOptions.resultTitle : this.resultTitle;
        return {
            source: this,
            data: {
                type: FEATURE,
                projection: 'EPSG:4326',
                geometry: data.geometry,
                properties: properties,
                meta: {
                    id: id,
                    title: data.properties[title]
                }
            },
            meta: {
                dataType: FEATURE,
                id: id,
                title: data.properties[title],
                icon: 'map-marker'
            }
        };
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    StoredQueriesReverseSearchSource.prototype.computeProperties = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var properties = _igo2_utils__WEBPACK_IMPORTED_MODULE_75__["ObjectUtils"].removeKeys(data.properties, StoredQueriesReverseSearchSource.propertiesBlacklist);
        return Object.assign(properties, { type: data.properties.doc_type });
    };
    StoredQueriesReverseSearchSource.id = 'storedqueriesreverse';
    StoredQueriesReverseSearchSource.type = FEATURE;
    StoredQueriesReverseSearchSource.propertiesBlacklist = [];
    StoredQueriesReverseSearchSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    StoredQueriesReverseSearchSource.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: undefined, decorators: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Inject"], args: ['options',] }] }
    ]; };
    return StoredQueriesReverseSearchSource;
}(SearchSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * StoredQueries search source factory
 * @ignore
 * @param {?} http
 * @param {?} config
 * @return {?}
 */
function storedqueriesSearchSourceFactory(http, config) {
    return new StoredQueriesSearchSource(http, config.getConfig("searchSources." + StoredQueriesSearchSource.id));
}
/**
 * Function that returns a provider for the StoredQueries search source
 * @return {?}
 */
function provideStoredQueriesSearchSource() {
    return {
        provide: SearchSource,
        useFactory: storedqueriesSearchSourceFactory,
        multi: true,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"], _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]]
    };
}
/**
 * StoredQueriesReverse search source factory
 * @ignore
 * @param {?} http
 * @param {?} config
 * @return {?}
 */
function storedqueriesReverseSearchSourceFactory(http, config) {
    return new StoredQueriesReverseSearchSource(http, config.getConfig("searchSources." + StoredQueriesReverseSearchSource.id));
}
/**
 * Function that returns a provider for the StoredQueriesReverse search source
 * @return {?}
 */
function provideStoredQueriesReverseSearchSource() {
    return {
        provide: SearchSource,
        useFactory: storedqueriesReverseSearchSourceFactory,
        multi: true,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"], _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {number} */
var RoutingFormat = {
    GeoJSON: 0,
    JSON: 1,
};
RoutingFormat[RoutingFormat.GeoJSON] = 'GeoJSON';
RoutingFormat[RoutingFormat.JSON] = 'JSON';
/** @enum {string} */
var SourceRoutingType = {
    Route: 'Route',
    Trip: 'Trip',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OsrmRoutingSource = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_71__["__extends"])(OsrmRoutingSource, _super);
    function OsrmRoutingSource(http, config) {
        var _this = _super.call(this) || this;
        _this.http = http;
        _this.config = config;
        _this.routingUrl = 'https://geoegl.msp.gouv.qc.ca/services/itineraire/route/v1/driving/';
        _this.options = _this.config.getConfig('routingSources.osrm') || {};
        _this.routingUrl = _this.options.url || _this.routingUrl;
        return _this;
    }
    Object.defineProperty(OsrmRoutingSource.prototype, "enabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this.options.enabled !== false;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.options.enabled = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    OsrmRoutingSource.prototype.getName = /**
     * @return {?}
     */
    function () {
        return OsrmRoutingSource._name;
    };
    /**
     * @param {?} coordinates
     * @return {?}
     */
    OsrmRoutingSource.prototype.route = /**
     * @param {?} coordinates
     * @return {?}
     */
    function (coordinates) {
        var _this = this;
        /** @type {?} */
        var routingParams = this.getRouteParams();
        return this.http
            .get(this.routingUrl + coordinates.join(';'), {
            params: routingParams
        })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_74__["map"])((/**
         * @param {?} res
         * @return {?}
         */
        function (res) { return _this.extractRoutesData(res); })));
    };
    /**
     * @private
     * @param {?} response
     * @return {?}
     */
    OsrmRoutingSource.prototype.extractRoutesData = /**
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        /** @type {?} */
        var routeResponse = [];
        response.routes.forEach((/**
         * @param {?} route
         * @return {?}
         */
        function (route) {
            routeResponse.push(_this.formatRoute(route, response.waypoints));
        }));
        return routeResponse;
    };
    /**
     * @private
     * @return {?}
     */
    OsrmRoutingSource.prototype.getRouteParams = /**
     * @private
     * @return {?}
     */
    function () {
        return new _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpParams"]({
            fromObject: {
                overview: 'full',
                steps: 'true',
                geometries: 'geojson',
                alternatives: 'true'
            }
        });
    };
    /**
     * @private
     * @param {?} roadNetworkRoute
     * @param {?} waypoints
     * @return {?}
     */
    OsrmRoutingSource.prototype.formatRoute = /**
     * @private
     * @param {?} roadNetworkRoute
     * @param {?} waypoints
     * @return {?}
     */
    function (roadNetworkRoute, waypoints) {
        /** @type {?} */
        var stepsUI = [];
        roadNetworkRoute.legs.forEach((/**
         * @param {?} leg
         * @return {?}
         */
        function (leg) {
            leg.steps.forEach((/**
             * @param {?} step
             * @return {?}
             */
            function (step) {
                stepsUI.push(step);
            }));
        }));
        return {
            id: Object(_igo2_utils__WEBPACK_IMPORTED_MODULE_75__["uuid"])(),
            title: roadNetworkRoute.legs[0].summary,
            source: OsrmRoutingSource._name,
            sourceType: SourceRoutingType.Route,
            order: 1,
            format: RoutingFormat.GeoJSON,
            icon: 'directions',
            projection: 'EPSG:4326',
            waypoints: waypoints,
            distance: roadNetworkRoute.distance,
            duration: roadNetworkRoute.duration,
            geometry: roadNetworkRoute.geometry,
            legs: roadNetworkRoute.legs,
            steps: stepsUI,
            weight: roadNetworkRoute.weight,
            weight_name: roadNetworkRoute.weight_name
        };
    };
    OsrmRoutingSource._name = 'OSRM Québec';
    OsrmRoutingSource.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_72__["Injectable"] }
    ];
    /** @nocollapse */
    OsrmRoutingSource.ctorParameters = function () { return [
        { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"] },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"] }
    ]; };
    return OsrmRoutingSource;
}(RoutingSource));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} http
 * @param {?} config
 * @return {?}
 */
function osrmRoutingSourcesFactory(http, config) {
    return new OsrmRoutingSource(http, config);
}
/**
 * @return {?}
 */
function provideOsrmRoutingSource() {
    return {
        provide: RoutingSource,
        useFactory: osrmRoutingSourcesFactory,
        multi: true,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_73__["HttpClient"], _igo2_core__WEBPACK_IMPORTED_MODULE_76__["ConfigService"]]
    };
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */



//# sourceMappingURL=igo2-geo.js.map

/***/ }),

/***/ "./dist/igo-lib/integration/fesm5/igo2-integration.js":
/*!************************************************************!*\
  !*** ./dist/igo-lib/integration/fesm5/igo2-integration.js ***!
  \************************************************************/
/*! exports provided: IgoIntegrationModule, IgoAppAboutModule, IgoAppContextModule, IgoAppCatalogModule, IgoAppCatalogBrowserToolModule, IgoAppCatalogLibraryToolModule, IgoAppDirectionsModule, IgoAppWorkspaceModule, IgoAppFilterModule, IgoAppImportExportModule, IgoAppMapModule, IgoAppMeasureModule, IgoAppPrintModule, IgoAppSearchModule, IgoAppToolModule, AboutToolComponent, ContextManagerToolComponent, ContextEditorToolComponent, ContextPermissionManagerToolComponent, ContextShareToolComponent, ContextState, CatalogState, CatalogBrowserToolComponent, CatalogLibraryToolComponent, DirectionsToolComponent, WorkspaceState, OgcFilterToolComponent, TimeAnalysisToolComponent, ImportExportToolComponent, MapDetailsToolComponent, MapToolComponent, MapState, MeasureState, MeasurerToolComponent, PrintToolComponent, QueryState, SearchState, SearchResultsToolComponent, ToolState, ɵv, ɵi, ɵg, ɵh, ɵa, ɵb, ɵd, ɵe, ɵj, ɵt, ɵu, ɵk, ɵm, ɵl, ɵf, ɵp, ɵo, ɵn, ɵq, ɵr, ɵs, ɵc */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoIntegrationModule", function() { return IgoIntegrationModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppAboutModule", function() { return IgoAppAboutModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppContextModule", function() { return IgoAppContextModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppCatalogModule", function() { return IgoAppCatalogModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppCatalogBrowserToolModule", function() { return IgoAppCatalogBrowserToolModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppCatalogLibraryToolModule", function() { return IgoAppCatalogLibraryToolModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppDirectionsModule", function() { return IgoAppDirectionsModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppWorkspaceModule", function() { return IgoAppWorkspaceModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppFilterModule", function() { return IgoAppFilterModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppImportExportModule", function() { return IgoAppImportExportModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppMapModule", function() { return IgoAppMapModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppMeasureModule", function() { return IgoAppMeasureModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppPrintModule", function() { return IgoAppPrintModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppSearchModule", function() { return IgoAppSearchModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IgoAppToolModule", function() { return IgoAppToolModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AboutToolComponent", function() { return AboutToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextManagerToolComponent", function() { return ContextManagerToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextEditorToolComponent", function() { return ContextEditorToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextPermissionManagerToolComponent", function() { return ContextPermissionManagerToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextShareToolComponent", function() { return ContextShareToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextState", function() { return ContextState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogState", function() { return CatalogState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogBrowserToolComponent", function() { return CatalogBrowserToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CatalogLibraryToolComponent", function() { return CatalogLibraryToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DirectionsToolComponent", function() { return DirectionsToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkspaceState", function() { return WorkspaceState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OgcFilterToolComponent", function() { return OgcFilterToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeAnalysisToolComponent", function() { return TimeAnalysisToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportExportToolComponent", function() { return ImportExportToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapDetailsToolComponent", function() { return MapDetailsToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapToolComponent", function() { return MapToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapState", function() { return MapState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasureState", function() { return MeasureState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasurerToolComponent", function() { return MeasurerToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintToolComponent", function() { return PrintToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryState", function() { return QueryState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchState", function() { return SearchState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchResultsToolComponent", function() { return SearchResultsToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToolState", function() { return ToolState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵv", function() { return AboutToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵi", function() { return CatalogBrowserToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵg", function() { return CatalogLibraryToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵh", function() { return CatalogState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵa", function() { return ContextEditorToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵb", function() { return ContextManagerToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵd", function() { return ContextPermissionManagerToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵe", function() { return ContextShareToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵj", function() { return DirectionsToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵt", function() { return OgcFilterToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵu", function() { return TimeAnalysisToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵk", function() { return ImportExportToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵm", function() { return MapDetailsToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵl", function() { return MapToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵf", function() { return MapState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵp", function() { return MeasureState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵo", function() { return MeasurerToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵn", function() { return IgoAppMeasurerToolModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵq", function() { return PrintToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵr", function() { return SearchResultsToolComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵs", function() { return SearchState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ɵc", function() { return ToolState; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/format/GeoJSON */ "./node_modules/ol/format/GeoJSON.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @igo2/context */ "./dist/igo-lib/context/fesm5/igo2-context.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");












/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextEditorToolComponent = /** @class */ (function () {
    function ContextEditorToolComponent() {
    }
    ContextEditorToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-context-editor-tool',
                    template: "<igo-context-edit igoContextEditBinding></igo-context-edit>\r\n"
                }] }
    ];
    ContextEditorToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'contextEditor',
            title: 'igo.integration.tools.contexts',
            icon: 'star'
        })
    ], ContextEditorToolComponent);
    return ContextEditorToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service that holds the state of the search module
 */
var ToolState = /** @class */ (function () {
    function ToolState(toolService) {
        this.toolService = toolService;
        /**
         * Toolbox that holds main tools
         */
        this.toolbox = new _igo2_common__WEBPACK_IMPORTED_MODULE_10__["Toolbox"]();
        this.toolbox.setTools(this.toolService.getTools());
    }
    ToolState.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ToolState.ctorParameters = function () { return [
        { type: _igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolService"] }
    ]; };
    /** @nocollapse */ ToolState.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["defineInjectable"])({ factory: function ToolState_Factory() { return new ToolState(Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolService"])); }, token: ToolState, providedIn: "root" });
    return ToolState;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextManagerToolComponent = /** @class */ (function () {
    function ContextManagerToolComponent(toolState) {
        this.toolState = toolState;
    }
    /**
     * @return {?}
     */
    ContextManagerToolComponent.prototype.editContext = /**
     * @return {?}
     */
    function () {
        this.toolState.toolbox.activateTool('contextEditor');
    };
    /**
     * @return {?}
     */
    ContextManagerToolComponent.prototype.managePermissions = /**
     * @return {?}
     */
    function () {
        this.toolState.toolbox.activateTool('contextPermissionManager');
    };
    ContextManagerToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-context-manager-tool',
                    template: "<igo-context-list\r\n  igoContextListBinding\r\n  (edit)=\"editContext()\"\r\n  (managePermissions)=\"managePermissions()\">\r\n</igo-context-list>\r\n"
                }] }
    ];
    /** @nocollapse */
    ContextManagerToolComponent.ctorParameters = function () { return [
        { type: ToolState }
    ]; };
    ContextManagerToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'contextManager',
            title: 'igo.integration.tools.contexts',
            icon: 'star'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [ToolState])
    ], ContextManagerToolComponent);
    return ContextManagerToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextPermissionManagerToolComponent = /** @class */ (function () {
    function ContextPermissionManagerToolComponent() {
    }
    ContextPermissionManagerToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-context-permission-manager-tool',
                    template: "<igo-context-permissions igoContextPermissionsBinding></igo-context-permissions>\r\n"
                }] }
    ];
    ContextPermissionManagerToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'contextPermissionManager',
            title: 'igo.integration.tools.contexts',
            icon: 'star'
        })
    ], ContextPermissionManagerToolComponent);
    return ContextPermissionManagerToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service that holds the state of the map module
 */
var MapState = /** @class */ (function () {
    function MapState(mapService, projectionService // Don't remove this or it'll never be injected
    ) {
        this.mapService = mapService;
        this.projectionService = projectionService;
        this._map = new _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoMap"]({
            controls: {
                scaleLine: true,
                attribution: {
                    collapsed: false
                }
            }
        });
        this.mapService.setMap(this.map);
    }
    Object.defineProperty(MapState.prototype, "map", {
        /**
         * Active map
         */
        get: /**
         * Active map
         * @return {?}
         */
        function () { return this._map; },
        enumerable: true,
        configurable: true
    });
    MapState.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    MapState.ctorParameters = function () { return [
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["MapService"] },
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["ProjectionService"] }
    ]; };
    /** @nocollapse */ MapState.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["defineInjectable"])({ factory: function MapState_Factory() { return new MapState(Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["MapService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["ProjectionService"])); }, token: MapState, providedIn: "root" });
    return MapState;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ContextShareToolComponent = /** @class */ (function () {
    function ContextShareToolComponent(mapState) {
        this.mapState = mapState;
        this.hasCopyLinkButton = false;
        this.hasShareMapButton = true;
    }
    Object.defineProperty(ContextShareToolComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () { return this.mapState.map; },
        enumerable: true,
        configurable: true
    });
    ContextShareToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-context-share-tool',
                    template: "<igo-share-map\r\n  igoShareMapBinding\r\n  [map]=\"map\"\r\n  [hasCopyLinkButton]=\"hasCopyLinkButton\"\r\n  [hasShareMapButton]=\"hasShareMapButton\"\r\n></igo-share-map>\r\n"
                }] }
    ];
    /** @nocollapse */
    ContextShareToolComponent.ctorParameters = function () { return [
        { type: MapState }
    ]; };
    ContextShareToolComponent.propDecorators = {
        hasCopyLinkButton: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        hasShareMapButton: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }]
    };
    ContextShareToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'shareMap',
            title: 'igo.integration.tools.shareMap',
            icon: 'share-variant'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [MapState])
    ], ContextShareToolComponent);
    return ContextShareToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppContextModule = /** @class */ (function () {
    function IgoAppContextModule() {
    }
    IgoAppContextModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [_igo2_context__WEBPACK_IMPORTED_MODULE_7__["IgoContextModule"]],
                    declarations: [
                        ContextEditorToolComponent,
                        ContextManagerToolComponent,
                        ContextPermissionManagerToolComponent,
                        ContextShareToolComponent
                    ],
                    exports: [
                        ContextEditorToolComponent,
                        ContextManagerToolComponent,
                        ContextPermissionManagerToolComponent,
                        ContextShareToolComponent
                    ],
                    entryComponents: [
                        ContextEditorToolComponent,
                        ContextManagerToolComponent,
                        ContextPermissionManagerToolComponent,
                        ContextShareToolComponent
                    ],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppContextModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service that holds the state of the catalog module
 */
var CatalogState = /** @class */ (function () {
    function CatalogState() {
        /**
         * Catalog -> Catalog items store mapping
         */
        this.catalogItemsStores = new Map();
        this._catalogStore = new _igo2_common__WEBPACK_IMPORTED_MODULE_10__["EntityStore"]([]);
    }
    Object.defineProperty(CatalogState.prototype, "catalogStore", {
        /**
         * Store that contains all the catalogs
         */
        get: /**
         * Store that contains all the catalogs
         * @return {?}
         */
        function () { return this._catalogStore; },
        enumerable: true,
        configurable: true
    });
    /**
     * Get a catalog's items store
     * @param catalog Catalog
     * @returns Store that contains the catalog items
     */
    /**
     * Get a catalog's items store
     * @param {?} catalog Catalog
     * @return {?} Store that contains the catalog items
     */
    CatalogState.prototype.getCatalogItemsStore = /**
     * Get a catalog's items store
     * @param {?} catalog Catalog
     * @return {?} Store that contains the catalog items
     */
    function (catalog) {
        return this.catalogItemsStores.get((/** @type {?} */ (catalog.id)));
    };
    /**
     * Bind a catalog items store to a catalog
     * @param catalog Catalog
     * @param store Catalog items store
     */
    /**
     * Bind a catalog items store to a catalog
     * @param {?} catalog Catalog
     * @param {?} store Catalog items store
     * @return {?}
     */
    CatalogState.prototype.setCatalogItemsStore = /**
     * Bind a catalog items store to a catalog
     * @param {?} catalog Catalog
     * @param {?} store Catalog items store
     * @return {?}
     */
    function (catalog, store) {
        this.catalogItemsStores.set((/** @type {?} */ (catalog.id)), store);
    };
    CatalogState.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    CatalogState.ctorParameters = function () { return []; };
    /** @nocollapse */ CatalogState.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["defineInjectable"])({ factory: function CatalogState_Factory() { return new CatalogState(); }, token: CatalogState, providedIn: "root" });
    return CatalogState;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Tool to browse the list of available catalogs.
 */
var CatalogLibraryToolComponent = /** @class */ (function () {
    function CatalogLibraryToolComponent(catalogService, catalogState, toolState) {
        this.catalogService = catalogService;
        this.catalogState = catalogState;
        this.toolState = toolState;
    }
    Object.defineProperty(CatalogLibraryToolComponent.prototype, "store", {
        /**
         * Store that contains the catalogs
         * @internal
         */
        get: /**
         * Store that contains the catalogs
         * \@internal
         * @return {?}
         */
        function () {
            return this.catalogState.catalogStore;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @internal
     */
    /**
     * \@internal
     * @return {?}
     */
    CatalogLibraryToolComponent.prototype.ngOnInit = /**
     * \@internal
     * @return {?}
     */
    function () {
        if (this.store.entities$.value.length === 0) {
            this.loadCatalogs();
        }
    };
    /**
     * When the selected catalog changes, toggle the the CatalogBrowser tool.
     * @internal
     * @param event Select event
     */
    /**
     * When the selected catalog changes, toggle the the CatalogBrowser tool.
     * \@internal
     * @param {?} event Select event
     * @return {?}
     */
    CatalogLibraryToolComponent.prototype.onCatalogSelectChange = /**
     * When the selected catalog changes, toggle the the CatalogBrowser tool.
     * \@internal
     * @param {?} event Select event
     * @return {?}
     */
    function (event) {
        if (event.selected === false) {
            return;
        }
        this.toolState.toolbox.activateTool('catalogBrowser');
    };
    /**
     * Get all the available catalogs from the CatalogService and
     * load them into the store.
     */
    /**
     * Get all the available catalogs from the CatalogService and
     * load them into the store.
     * @private
     * @return {?}
     */
    CatalogLibraryToolComponent.prototype.loadCatalogs = /**
     * Get all the available catalogs from the CatalogService and
     * load them into the store.
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.catalogService.loadCatalogs().subscribe((/**
         * @param {?} catalogs
         * @return {?}
         */
        function (catalogs) {
            _this.store.clear();
            _this.store.load(catalogs);
        }));
    };
    CatalogLibraryToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-catalog-library-tool',
                    template: "<igo-catalog-library\r\n  [store]=\"store\"\r\n  (catalogSelectChange)=\"onCatalogSelectChange($event)\">\r\n</igo-catalog-library>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_9__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    CatalogLibraryToolComponent.ctorParameters = function () { return [
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["CatalogService"] },
        { type: CatalogState },
        { type: ToolState }
    ]; };
    /**
     * Tool to browse the list of available catalogs.
     */
    CatalogLibraryToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'catalog',
            title: 'igo.integration.tools.catalog',
            icon: 'layers-plus'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["CatalogService"],
            CatalogState,
            ToolState])
    ], CatalogLibraryToolComponent);
    return CatalogLibraryToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoAppCatalogLibraryToolModule = /** @class */ (function () {
    function IgoAppCatalogLibraryToolModule() {
    }
    IgoAppCatalogLibraryToolModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoCatalogLibraryModule"]
                    ],
                    declarations: [CatalogLibraryToolComponent],
                    exports: [CatalogLibraryToolComponent],
                    entryComponents: [CatalogLibraryToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppCatalogLibraryToolModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Tool to browse a catalog's groups and layers and display them to a map.
 */
var CatalogBrowserToolComponent = /** @class */ (function () {
    function CatalogBrowserToolComponent(catalogService, catalogState, mapState) {
        this.catalogService = catalogService;
        this.catalogState = catalogState;
        this.mapState = mapState;
        /**
         * Store that contains the catalog items
         * \@internal
         */
        this.store$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["BehaviorSubject"](undefined);
        /**
         * Whether a group can be toggled when it's collapsed
         */
        this.toggleCollapsedGroup = true;
    }
    Object.defineProperty(CatalogBrowserToolComponent.prototype, "map", {
        /**
         * Map to add layers to
         * @internal
         */
        get: /**
         * Map to add layers to
         * \@internal
         * @return {?}
         */
        function () {
            return this.mapState.map;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @internal
     */
    /**
     * \@internal
     * @return {?}
     */
    CatalogBrowserToolComponent.prototype.ngOnInit = /**
     * \@internal
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var catalogStore = this.catalogState.catalogStore;
        this.catalog$$ = catalogStore.stateView
            .firstBy$((/**
         * @param {?} record
         * @return {?}
         */
        function (record) { return record.state.selected === true; }))
            .subscribe((/**
         * @param {?} record
         * @return {?}
         */
        function (record) {
            if (record && record.entity) {
                /** @type {?} */
                var catalog = record.entity;
                _this.catalog = catalog;
                _this.loadCatalogItems(catalog);
            }
        }));
    };
    /**
     * @internal
     */
    /**
     * \@internal
     * @return {?}
     */
    CatalogBrowserToolComponent.prototype.ngOnDestroy = /**
     * \@internal
     * @return {?}
     */
    function () {
        this.catalog$$.unsubscribe();
    };
    /**
     * Get the selected catalog's items from the CatalogService and
     * load them into the store.
     * @param catalog Selected catalog
     */
    /**
     * Get the selected catalog's items from the CatalogService and
     * load them into the store.
     * @private
     * @param {?} catalog Selected catalog
     * @return {?}
     */
    CatalogBrowserToolComponent.prototype.loadCatalogItems = /**
     * Get the selected catalog's items from the CatalogService and
     * load them into the store.
     * @private
     * @param {?} catalog Selected catalog
     * @return {?}
     */
    function (catalog) {
        var _this = this;
        /** @type {?} */
        var store = this.catalogState.getCatalogItemsStore(catalog);
        if (store !== undefined) {
            this.store$.next(store);
            return;
        }
        store = new _igo2_common__WEBPACK_IMPORTED_MODULE_10__["EntityStore"]([]);
        this.catalogState.setCatalogItemsStore(catalog, store);
        this.catalogService
            .loadCatalogItems(catalog)
            .subscribe((/**
         * @param {?} items
         * @return {?}
         */
        function (items) {
            store.load(items);
            _this.store$.next(store);
        }));
    };
    CatalogBrowserToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-catalog-browser-tool',
                    template: "<igo-catalog-browser\r\n  *ngIf=\"store$ | async as store\"\r\n  [catalog]=\"catalog\"\r\n  [store]=\"store\"\r\n  [map]=\"map\"\r\n  [toggleCollapsedGroup]=\"toggleCollapsedGroup\">\r\n</igo-catalog-browser>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_9__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    CatalogBrowserToolComponent.ctorParameters = function () { return [
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["CatalogService"] },
        { type: CatalogState },
        { type: MapState }
    ]; };
    CatalogBrowserToolComponent.propDecorators = {
        toggleCollapsedGroup: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }]
    };
    /**
     * Tool to browse a catalog's groups and layers and display them to a map.
     */
    CatalogBrowserToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'catalogBrowser',
            title: 'igo.integration.tools.catalog',
            icon: 'photo-browser'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["CatalogService"],
            CatalogState,
            MapState])
    ], CatalogBrowserToolComponent);
    return CatalogBrowserToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoAppCatalogBrowserToolModule = /** @class */ (function () {
    function IgoAppCatalogBrowserToolModule() {
    }
    IgoAppCatalogBrowserToolModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoCatalogBrowserModule"]
                    ],
                    declarations: [CatalogBrowserToolComponent],
                    exports: [CatalogBrowserToolComponent],
                    entryComponents: [CatalogBrowserToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppCatalogBrowserToolModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppCatalogModule = /** @class */ (function () {
    function IgoAppCatalogModule() {
    }
    IgoAppCatalogModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [],
                    exports: [
                        IgoAppCatalogLibraryToolModule,
                        IgoAppCatalogBrowserToolModule
                    ],
                    declarations: []
                },] }
    ];
    return IgoAppCatalogModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var DirectionsToolComponent = /** @class */ (function () {
    function DirectionsToolComponent(mapState) {
        this.mapState = mapState;
    }
    Object.defineProperty(DirectionsToolComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this.mapState.map;
        },
        enumerable: true,
        configurable: true
    });
    DirectionsToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-directions-tool',
                    template: "<igo-routing-form igoRoutingFormBinding></igo-routing-form>\r\n"
                }] }
    ];
    /** @nocollapse */
    DirectionsToolComponent.ctorParameters = function () { return [
        { type: MapState }
    ]; };
    DirectionsToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'directions',
            title: 'igo.integration.tools.directions',
            icon: 'directions'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [MapState])
    ], DirectionsToolComponent);
    return DirectionsToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppDirectionsModule = /** @class */ (function () {
    function IgoAppDirectionsModule() {
    }
    /**
     * @return {?}
     */
    IgoAppDirectionsModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoAppDirectionsModule,
            providers: []
        };
    };
    IgoAppDirectionsModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoRoutingModule"]],
                    declarations: [DirectionsToolComponent],
                    exports: [DirectionsToolComponent],
                    entryComponents: [DirectionsToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppDirectionsModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppWorkspaceModule = /** @class */ (function () {
    function IgoAppWorkspaceModule() {
    }
    IgoAppWorkspaceModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: []
                },] }
    ];
    return IgoAppWorkspaceModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ImportExportToolComponent = /** @class */ (function () {
    function ImportExportToolComponent(mapState) {
        this.mapState = mapState;
    }
    Object.defineProperty(ImportExportToolComponent.prototype, "map", {
        /**
         * Map to measure on
         * @internal
         */
        get: /**
         * Map to measure on
         * \@internal
         * @return {?}
         */
        function () { return this.mapState.map; },
        enumerable: true,
        configurable: true
    });
    ImportExportToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-import-export-tool',
                    template: "<igo-import-export [map]=\"map\"></igo-import-export>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_9__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    ImportExportToolComponent.ctorParameters = function () { return [
        { type: MapState }
    ]; };
    ImportExportToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'importExport',
            title: 'igo.integration.tools.importExport',
            icon: 'file-move'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [MapState])
    ], ImportExportToolComponent);
    return ImportExportToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppImportExportModule = /** @class */ (function () {
    function IgoAppImportExportModule() {
    }
    /**
     * @return {?}
     */
    IgoAppImportExportModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoAppImportExportModule,
            providers: []
        };
    };
    IgoAppImportExportModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoImportExportModule"]],
                    declarations: [ImportExportToolComponent],
                    exports: [ImportExportToolComponent],
                    entryComponents: [ImportExportToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppImportExportModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var MapDetailsToolComponent = /** @class */ (function () {
    function MapDetailsToolComponent() {
        this.toggleLegendOnVisibilityChange = false;
        this.expandLegendOfVisibleLayers = false;
        this.updateLegendOnResolutionChange = false;
        this.ogcFiltersInLayers = true;
        this.layerListControls = {};
        this.queryBadge = false;
    }
    Object.defineProperty(MapDetailsToolComponent.prototype, "excludeBaseLayers", {
        get: /**
         * @return {?}
         */
        function () {
            return this.layerListControls.excludeBaseLayers || false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MapDetailsToolComponent.prototype, "layerFilterAndSortOptions", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var filterSortOptions = Object.assign({
                showToolbar: _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].default
            }, this.layerListControls);
            switch (this.layerListControls.showToolbar) {
                case _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].always:
                    filterSortOptions.showToolbar = _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].always;
                    filterSortOptions.toolbarThreshold = undefined;
                    break;
                case _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].never:
                    filterSortOptions.showToolbar = _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].never;
                    filterSortOptions.toolbarThreshold = undefined;
                    break;
                default:
                    break;
            }
            return filterSortOptions;
        },
        enumerable: true,
        configurable: true
    });
    MapDetailsToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-map-details-tool',
                    template: "<igo-layer-list\r\n  igoLayerListBinding\r\n  [excludeBaseLayers]=\"excludeBaseLayers\"\r\n  [layerFilterAndSortOptions]=\"layerFilterAndSortOptions\"\r\n  [expandLegendOfVisibleLayers]=\"expandLegendOfVisibleLayers\"\r\n  [toggleLegendOnVisibilityChange]=\"toggleLegendOnVisibilityChange\"\r\n  [updateLegendOnResolutionChange]=\"updateLegendOnResolutionChange\"\r\n  [queryBadge]=\"queryBadge\">\r\n\r\n  <ng-template #igoLayerItemToolbar let-layer=\"layer\">\r\n    <igo-download-button [layer]=\"layer\"></igo-download-button>\r\n    <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\r\n    <igo-ogc-filter-button [ogcFiltersInLayers]=\"ogcFiltersInLayers\" [layer]=\"layer\"></igo-ogc-filter-button>\r\n  </ng-template>\r\n\r\n</igo-layer-list>\r\n"
                }] }
    ];
    MapDetailsToolComponent.propDecorators = {
        toggleLegendOnVisibilityChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        expandLegendOfVisibleLayers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        updateLegendOnResolutionChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        ogcFiltersInLayers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        layerListControls: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        queryBadge: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }]
    };
    MapDetailsToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'mapDetails',
            title: 'igo.integration.tools.map',
            icon: 'map'
        })
    ], MapDetailsToolComponent);
    return MapDetailsToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Tool to browse a map's layers or to choose a different map
 */
var MapToolComponent = /** @class */ (function () {
    function MapToolComponent() {
        this.toggleLegendOnVisibilityChange = false;
        this.expandLegendOfVisibleLayers = false;
        this.updateLegendOnResolutionChange = false;
        this.ogcFiltersInLayers = true;
        this.layerListControls = {};
        this.queryBadge = false;
    }
    Object.defineProperty(MapToolComponent.prototype, "excludeBaseLayers", {
        get: /**
         * @return {?}
         */
        function () {
            return this.layerListControls.excludeBaseLayers || false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MapToolComponent.prototype, "layerFilterAndSortOptions", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var filterSortOptions = Object.assign({
                showToolbar: _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].default
            }, this.layerListControls);
            switch (this.layerListControls.showToolbar) {
                case _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].always:
                    filterSortOptions.showToolbar = _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].always;
                    filterSortOptions.toolbarThreshold = undefined;
                    break;
                case _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].never:
                    filterSortOptions.showToolbar = _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerListControlsEnum"].never;
                    filterSortOptions.toolbarThreshold = undefined;
                    break;
                default:
                    break;
            }
            return filterSortOptions;
        },
        enumerable: true,
        configurable: true
    });
    MapToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-map-tool',
                    template: "<mat-tab-group>\r\n\r\n  <mat-tab [label]=\"'igo.integration.tools.map' |\u00A0translate\">\r\n    <igo-layer-list\r\n      igoLayerListBinding\r\n      [excludeBaseLayers]=\"excludeBaseLayers\"\r\n      [layerFilterAndSortOptions]=\"layerFilterAndSortOptions\"\r\n      [expandLegendOfVisibleLayers]=\"expandLegendOfVisibleLayers\"\r\n      [toggleLegendOnVisibilityChange]=\"toggleLegendOnVisibilityChange\"\r\n      [updateLegendOnResolutionChange]=\"updateLegendOnResolutionChange\"\r\n      [queryBadge]=\"queryBadge\">\r\n\r\n      <ng-template #igoLayerItemToolbar let-layer=\"layer\">\r\n        <igo-download-button [layer]=\"layer\"></igo-download-button>\r\n        <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\r\n        <igo-ogc-filter-button [ogcFiltersInLayers]=\"ogcFiltersInLayers\" [layer]=\"layer\"></igo-ogc-filter-button>\r\n      </ng-template>\r\n\r\n    </igo-layer-list>\r\n  </mat-tab>\r\n\r\n  <mat-tab [label]=\"'igo.integration.tools.contexts' |\u00A0translate\">\r\n    <igo-context-list igoContextListBinding></igo-context-list>\r\n  </mat-tab>\r\n\r\n</mat-tab-group>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_9__["ChangeDetectionStrategy"].OnPush,
                    styles: ["mat-tab-group,mat-tab-group ::ng-deep .mat-tab-body-wrapper{height:100%}"]
                }] }
    ];
    MapToolComponent.propDecorators = {
        toggleLegendOnVisibilityChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        expandLegendOfVisibleLayers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        updateLegendOnResolutionChange: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        ogcFiltersInLayers: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        layerListControls: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }],
        queryBadge: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }]
    };
    /**
     * Tool to browse a map's layers or to choose a different map
     */
    MapToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'map',
            title: 'igo.integration.tools.map',
            icon: 'map'
        })
    ], MapToolComponent);
    return MapToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppMapModule = /** @class */ (function () {
    function IgoAppMapModule() {
    }
    /**
     * @return {?}
     */
    IgoAppMapModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoAppMapModule,
            providers: []
        };
    };
    IgoAppMapModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [
                        _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatTabsModule"],
                        _igo2_core__WEBPACK_IMPORTED_MODULE_6__["IgoLanguageModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoLayerModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoMetadataModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoDownloadModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoFilterModule"],
                        _igo2_context__WEBPACK_IMPORTED_MODULE_7__["IgoContextModule"]
                    ],
                    declarations: [MapToolComponent, MapDetailsToolComponent],
                    exports: [MapToolComponent, MapDetailsToolComponent],
                    entryComponents: [MapToolComponent, MapDetailsToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppMapModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service that holds the state of the measure module
 */
var MeasureState = /** @class */ (function () {
    function MeasureState(mapState) {
        this.mapState = mapState;
        /**
         * Store that holds the measures
         */
        this.store = new _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["FeatureStore"]([], {
            map: this.mapState.map
        });
    }
    MeasureState.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    MeasureState.ctorParameters = function () { return [
        { type: MapState }
    ]; };
    /** @nocollapse */ MeasureState.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["defineInjectable"])({ factory: function MeasureState_Factory() { return new MeasureState(Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(MapState)); }, token: MeasureState, providedIn: "root" });
    return MeasureState;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Tool to measure lengths and areas
 */
var MeasurerToolComponent = /** @class */ (function () {
    function MeasurerToolComponent(measureState, mapState) {
        this.measureState = measureState;
        this.mapState = mapState;
    }
    Object.defineProperty(MeasurerToolComponent.prototype, "store", {
        /**
         * Map to measure on
         * @internal
         */
        get: /**
         * Map to measure on
         * \@internal
         * @return {?}
         */
        function () { return this.measureState.store; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MeasurerToolComponent.prototype, "map", {
        /**
         * Map to measure on
         * @internal
         */
        get: /**
         * Map to measure on
         * \@internal
         * @return {?}
         */
        function () { return this.mapState.map; },
        enumerable: true,
        configurable: true
    });
    MeasurerToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-measurer-tool',
                    template: "<igo-measurer [store]=\"store\" [map]=\"map\"></igo-measurer>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_9__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    MeasurerToolComponent.ctorParameters = function () { return [
        { type: MeasureState },
        { type: MapState }
    ]; };
    /**
     * Tool to measure lengths and areas
     */
    MeasurerToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'measurer',
            title: 'igo.integration.tools.measurer',
            icon: 'ruler'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [MeasureState,
            MapState])
    ], MeasurerToolComponent);
    return MeasurerToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @ignore
 */
var IgoAppMeasurerToolModule = /** @class */ (function () {
    function IgoAppMeasurerToolModule() {
    }
    IgoAppMeasurerToolModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoMeasurerModule"]
                    ],
                    declarations: [MeasurerToolComponent],
                    exports: [MeasurerToolComponent],
                    entryComponents: [MeasurerToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppMeasurerToolModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppMeasureModule = /** @class */ (function () {
    function IgoAppMeasureModule() {
    }
    IgoAppMeasureModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: [
                        IgoAppMeasurerToolModule
                    ]
                },] }
    ];
    return IgoAppMeasureModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var PrintToolComponent = /** @class */ (function () {
    function PrintToolComponent(mapState) {
        this.mapState = mapState;
    }
    Object.defineProperty(PrintToolComponent.prototype, "map", {
        get: /**
         * @return {?}
         */
        function () {
            return this.mapState.map;
        },
        enumerable: true,
        configurable: true
    });
    PrintToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-print-tool',
                    template: "<igo-print [map]=\"map\"></igo-print>\r\n"
                }] }
    ];
    /** @nocollapse */
    PrintToolComponent.ctorParameters = function () { return [
        { type: MapState }
    ]; };
    PrintToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'print',
            title: 'igo.integration.tools.print',
            icon: 'printer'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [MapState])
    ], PrintToolComponent);
    return PrintToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppPrintModule = /** @class */ (function () {
    function IgoAppPrintModule() {
    }
    /**
     * @return {?}
     */
    IgoAppPrintModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoAppPrintModule,
            providers: []
        };
    };
    IgoAppPrintModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoPrintModule"]],
                    declarations: [PrintToolComponent],
                    exports: [PrintToolComponent],
                    entryComponents: [PrintToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppPrintModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service that holds the state of the search module
 */
var SearchState = /** @class */ (function () {
    function SearchState(searchSourceService) {
        this.searchSourceService = searchSourceService;
        /**
         * Store that holds the search results
         */
        this.store = new _igo2_common__WEBPACK_IMPORTED_MODULE_10__["EntityStore"]([]);
    }
    Object.defineProperty(SearchState.prototype, "searchTypes", {
        /**
         * Search types currently enabled in the search source service
         */
        get: /**
         * Search types currently enabled in the search source service
         * @return {?}
         */
        function () {
            return this.searchSourceService
                .getEnabledSources()
                .map((/**
             * @param {?} source
             * @return {?}
             */
            function (source) { return ((/** @type {?} */ (source.constructor))).type; }));
        },
        enumerable: true,
        configurable: true
    });
    SearchState.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    SearchState.ctorParameters = function () { return [
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["SearchSourceService"] }
    ]; };
    /** @nocollapse */ SearchState.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["defineInjectable"])({ factory: function SearchState_Factory() { return new SearchState(Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["SearchSourceService"])); }, token: SearchState, providedIn: "root" });
    return SearchState;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Tool to browse the search results
 */
var SearchResultsToolComponent = /** @class */ (function () {
    function SearchResultsToolComponent(mapState, layerService, searchState // private cdRef: ChangeDetectorRef
    ) {
        this.mapState = mapState;
        this.layerService = layerService;
        this.searchState = searchState;
        this.topPanelState = 'initial';
        this.format = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_3__["default"]();
    }
    Object.defineProperty(SearchResultsToolComponent.prototype, "store", {
        /**
         * Store holding the search results
         * @internal
         */
        get: /**
         * Store holding the search results
         * \@internal
         * @return {?}
         */
        function () {
            return this.searchState.store;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchResultsToolComponent.prototype, "map", {
        /**
         * Map to display the results on
         * @internal
         */
        get: /**
         * Map to display the results on
         * \@internal
         * @return {?}
         */
        function () {
            return this.mapState.map;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchResultsToolComponent.prototype, "featureTitle", {
        get: /**
         * @return {?}
         */
        function () {
            return this.feature ? Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["getEntityTitle"])(this.feature) : undefined;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SearchResultsToolComponent.prototype, "feature$", {
        get: /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.store.stateView
                .firstBy$((/**
             * @param {?} e
             * @return {?}
             */
            function (e) { return e.state.focused; }))
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                _this.feature = element ? ((/** @type {?} */ (element.entity.data))) : undefined;
                return _this.feature;
            })));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Try to add a feature to the map when it's being focused
     * @internal
     * @param result A search result that could be a feature
     */
    /**
     * Try to add a feature to the map when it's being focused
     * \@internal
     * @param {?} result A search result that could be a feature
     * @return {?}
     */
    SearchResultsToolComponent.prototype.onResultFocus = /**
     * Try to add a feature to the map when it's being focused
     * \@internal
     * @param {?} result A search result that could be a feature
     * @return {?}
     */
    function (result) {
        if (this.topPanelState === 'initial') {
            this.toggleTopPanel();
        }
        this.tryAddFeatureToMap(result);
    };
    /**
     * Try to add a feature or a layer to the map when it's being selected
     * @internal
     * @param result A search result that could be a feature or some layer options
     */
    /**
     * Try to add a feature or a layer to the map when it's being selected
     * \@internal
     * @param {?} result A search result that could be a feature or some layer options
     * @return {?}
     */
    SearchResultsToolComponent.prototype.onResultSelect = /**
     * Try to add a feature or a layer to the map when it's being selected
     * \@internal
     * @param {?} result A search result that could be a feature or some layer options
     * @return {?}
     */
    function (result) {
        if (this.topPanelState === 'initial') {
            this.toggleTopPanel();
        }
        this.tryAddFeatureToMap(result);
        this.tryAddLayerToMap(result);
    };
    /**
     * @return {?}
     */
    SearchResultsToolComponent.prototype.toggleTopPanel = /**
     * @return {?}
     */
    function () {
        if (this.topPanelState === 'collapsed') {
            this.topPanelState = 'expanded';
        }
        else {
            this.topPanelState = 'collapsed';
        }
    };
    /**
     * @return {?}
     */
    SearchResultsToolComponent.prototype.zoomToFeatureExtent = /**
     * @return {?}
     */
    function () {
        if (this.feature.geometry) {
            /** @type {?} */
            var olFeature = this.format.readFeature(this.feature, {
                dataProjection: this.feature.projection,
                featureProjection: this.map.projection
            });
            Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["moveToOlFeatures"])(this.map, [olFeature], _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["FeatureMotion"].Zoom);
        }
    };
    /**
     * Try to add a feature to the map overlay
     * @param result A search result that could be a feature
     */
    /**
     * Try to add a feature to the map overlay
     * @private
     * @param {?} result A search result that could be a feature
     * @return {?}
     */
    SearchResultsToolComponent.prototype.tryAddFeatureToMap = /**
     * Try to add a feature to the map overlay
     * @private
     * @param {?} result A search result that could be a feature
     * @return {?}
     */
    function (result) {
        if (result.meta.dataType !== _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["FEATURE"]) {
            return undefined;
        }
        /** @type {?} */
        var feature = ((/** @type {?} */ (result))).data;
        // Somethimes features have no geometry. It happens with some GetFeatureInfo
        if (feature.geometry === undefined) {
            return;
        }
        this.map.overlay.setFeatures([feature], _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["FeatureMotion"].Default);
    };
    /**
     * Try to add a layer to the map
     * @param result A search result that could be some layer options
     */
    /**
     * Try to add a layer to the map
     * @private
     * @param {?} result A search result that could be some layer options
     * @return {?}
     */
    SearchResultsToolComponent.prototype.tryAddLayerToMap = /**
     * Try to add a layer to the map
     * @private
     * @param {?} result A search result that could be some layer options
     * @return {?}
     */
    function (result) {
        var _this = this;
        if (this.map === undefined) {
            return;
        }
        if (result.meta.dataType !== _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LAYER"]) {
            return undefined;
        }
        /** @type {?} */
        var layerOptions = ((/** @type {?} */ (result))).data;
        this.layerService
            .createAsyncLayer(layerOptions)
            .subscribe((/**
         * @param {?} layer
         * @return {?}
         */
        function (layer) { return _this.map.addLayer(layer); }));
    };
    SearchResultsToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-search-results-tool',
                    template: "<igo-flexible\r\n  #topPanel\r\n  initial=\"100%\"\r\n  initialMobile=\"100%\"\r\n  collapsed=\"60%\"\r\n  expanded=\"calc(100% - 58px)\"\r\n  [state]=\"topPanelState\">\r\n\r\n  <div class=\"igo-content\">\r\n    <igo-search-results\r\n      [store]=\"store\"\r\n      (resultFocus)=\"onResultFocus($event)\"\r\n      (resultSelect)=\"onResultSelect($event)\">\r\n    </igo-search-results>\r\n  </div>\r\n\r\n  <div igoFlexibleFill class=\"igo-content\">\r\n    <igo-panel [title]=\"featureTitle\" *ngIf=\"feature$ |\u00A0async\">\r\n\r\n      <button\r\n        mat-icon-button\r\n        panelLeftButton\r\n        class=\"igo-icon-button\"\r\n        (click)=\"toggleTopPanel()\">\r\n        <mat-icon [svgIcon]=\"topPanel.state === 'collapsed'? 'arrow-down' : 'arrow-up'\"></mat-icon>\r\n      </button>\r\n\r\n      <button\r\n        mat-icon-button\r\n        panelRightButton\r\n        class=\"igo-icon-button\"\r\n        (click)=\"zoomToFeatureExtent()\"\r\n        *ngIf=\"feature.geometry\">\r\n        <mat-icon svgIcon=\"magnify-plus-outline\"></mat-icon>\r\n      </button>\r\n\r\n      <igo-feature-details\r\n        [feature]=\"feature$ | async\">\r\n      </igo-feature-details>\r\n    </igo-panel>\r\n  </div>\r\n\r\n</igo-flexible>\r\n",
                    changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_9__["ChangeDetectionStrategy"].OnPush
                }] }
    ];
    /** @nocollapse */
    SearchResultsToolComponent.ctorParameters = function () { return [
        { type: MapState },
        { type: _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerService"] },
        { type: SearchState }
    ]; };
    /**
     * Tool to browse the search results
     */
    SearchResultsToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'searchResults',
            title: 'igo.integration.tools.searchResults',
            icon: 'magnify'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [MapState,
            _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["LayerService"],
            SearchState // private cdRef: ChangeDetectorRef
        ])
    ], SearchResultsToolComponent);
    return SearchResultsToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppSearchModule = /** @class */ (function () {
    function IgoAppSearchModule() {
    }
    IgoAppSearchModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [
                        _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatIconModule"],
                        _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatButtonModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoFeatureModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoSearchModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_10__["IgoFlexibleModule"],
                        _igo2_common__WEBPACK_IMPORTED_MODULE_10__["IgoPanelModule"],
                        _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoFeatureDetailsModule"]
                    ],
                    declarations: [SearchResultsToolComponent],
                    exports: [SearchResultsToolComponent],
                    entryComponents: [SearchResultsToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppSearchModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var OgcFilterToolComponent = /** @class */ (function () {
    function OgcFilterToolComponent() {
    }
    OgcFilterToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-ogc-filter-tool',
                    template: "<igo-ogc-filterable-list igoOgcFilterableListBinding></igo-ogc-filterable-list>\r\n\r\n\r\n"
                }] }
    ];
    /** @nocollapse */
    OgcFilterToolComponent.ctorParameters = function () { return []; };
    OgcFilterToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'ogcFilter',
            title: 'igo.integration.tools.ogcFilter',
            icon: 'filter'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [])
    ], OgcFilterToolComponent);
    return OgcFilterToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var TimeAnalysisToolComponent = /** @class */ (function () {
    function TimeAnalysisToolComponent() {
    }
    TimeAnalysisToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-time-analysis-tool',
                    template: "<igo-time-filter-list igoTimeFilterListBinding></igo-time-filter-list>\r\n"
                }] }
    ];
    /** @nocollapse */
    TimeAnalysisToolComponent.ctorParameters = function () { return []; };
    TimeAnalysisToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'timeAnalysis',
            title: 'igo.integration.tools.timeAnalysis',
            icon: 'history'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [])
    ], TimeAnalysisToolComponent);
    return TimeAnalysisToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppFilterModule = /** @class */ (function () {
    function IgoAppFilterModule() {
    }
    /**
     * @return {?}
     */
    IgoAppFilterModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoAppFilterModule,
            providers: []
        };
    };
    IgoAppFilterModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoFilterModule"]],
                    declarations: [OgcFilterToolComponent, TimeAnalysisToolComponent],
                    exports: [OgcFilterToolComponent, TimeAnalysisToolComponent],
                    entryComponents: [OgcFilterToolComponent, TimeAnalysisToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppFilterModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var AboutToolComponent = /** @class */ (function () {
    function AboutToolComponent() {
        this.html = "\n    <h1>About IGO</h1>\n    <p>IGO (for Open GIS Infrastructure) is a Free Open Source Software\n    for Geospatial (FOSS4G) developed by organisations in the government\n    of Quebec in Canada. The objective is to make it open, common,\n    modular, based on open governance model supported by multiple\n    organisations. IGO is a Web GIS software with a client & server\n    component to manage and publish massive amount of Geospatial data.\n    </p>\n    </hr>\n    <a href='mailto:info@igouverte.org' target='_top'>info[@]igouverte.org</a>\n    </br>\n    <a href='http://www.igouverte.org' target='_blank'>www.igouverte.org</A>";
    }
    AboutToolComponent.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Component"], args: [{
                    selector: 'igo-about-tool',
                    template: "<igo-custom-html\r\n[html]=\"html\">\r\n</igo-custom-html>\r\n"
                }] }
    ];
    /** @nocollapse */
    AboutToolComponent.ctorParameters = function () { return []; };
    AboutToolComponent.propDecorators = {
        html: [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Input"] }]
    };
    AboutToolComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__decorate"])([
        Object(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolComponent"])({
            name: 'about',
            title: 'igo.integration.tools.about',
            icon: 'help-circle'
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_5__["__metadata"])("design:paramtypes", [])
    ], AboutToolComponent);
    return AboutToolComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppAboutModule = /** @class */ (function () {
    function IgoAppAboutModule() {
    }
    /**
     * @return {?}
     */
    IgoAppAboutModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: IgoAppAboutModule,
            providers: []
        };
    };
    IgoAppAboutModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [_igo2_common__WEBPACK_IMPORTED_MODULE_10__["IgoCustomHtmlModule"]],
                    declarations: [AboutToolComponent],
                    exports: [AboutToolComponent],
                    entryComponents: [AboutToolComponent],
                    schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["CUSTOM_ELEMENTS_SCHEMA"]]
                },] }
    ];
    return IgoAppAboutModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoIntegrationModule = /** @class */ (function () {
    function IgoIntegrationModule() {
    }
    IgoIntegrationModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: [
                        IgoAppContextModule,
                        IgoAppCatalogModule,
                        IgoAppDirectionsModule,
                        IgoAppWorkspaceModule,
                        IgoAppImportExportModule,
                        IgoAppMapModule,
                        IgoAppMeasureModule,
                        IgoAppPrintModule,
                        IgoAppSearchModule,
                        IgoAppFilterModule,
                        IgoAppAboutModule
                    ]
                },] }
    ];
    return IgoIntegrationModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var IgoAppToolModule = /** @class */ (function () {
    function IgoAppToolModule() {
    }
    IgoAppToolModule.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["NgModule"], args: [{
                    imports: [],
                    declarations: [],
                    exports: []
                },] }
    ];
    return IgoAppToolModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service that holds the state of the context module
 */
var ContextState = /** @class */ (function () {
    function ContextState(contextService, toolService, toolState, languageService) {
        var _this = this;
        this.contextService = contextService;
        this.toolService = toolService;
        this.toolState = toolState;
        this.languageService = languageService;
        /**
         * Observable of the active context
         */
        this.context$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["BehaviorSubject"](undefined);
        this.contextService.context$.subscribe((/**
         * @param {?} context
         * @return {?}
         */
        function (context) {
            _this.onContextChange(context);
        }));
    }
    /**
     * Set the active context
     * @param context Detailed context
     */
    /**
     * Set the active context
     * @private
     * @param {?} context Detailed context
     * @return {?}
     */
    ContextState.prototype.setContext = /**
     * Set the active context
     * @private
     * @param {?} context Detailed context
     * @return {?}
     */
    function (context) {
        this.updateTools(context);
        this.context$.next(context);
    };
    /**
     * Update the tool state with the context's tools
     * @param context Detailed context
     */
    /**
     * Update the tool state with the context's tools
     * @private
     * @param {?} context Detailed context
     * @return {?}
     */
    ContextState.prototype.updateTools = /**
     * Update the tool state with the context's tools
     * @private
     * @param {?} context Detailed context
     * @return {?}
     */
    function (context) {
        var _this = this;
        /** @type {?} */
        var toolbox = this.toolState.toolbox;
        /** @type {?} */
        var tools = [];
        /** @type {?} */
        var contextTools = context.tools || [];
        contextTools.forEach((/**
         * @param {?} contextTool
         * @return {?}
         */
        function (contextTool) {
            /** @type {?} */
            var baseTool = _this.toolService.getTool(contextTool.name);
            if (baseTool === undefined) {
                return;
            }
            /** @type {?} */
            var options = Object.assign({}, baseTool.options || {}, contextTool.options || {});
            /** @type {?} */
            var tool = Object.assign({}, baseTool, contextTool, { options: options });
            tools.push(tool);
        }));
        toolbox.setTools(tools);
        toolbox.setToolbar(context.toolbar || []);
        // TODO: This is a patch so the context service can work without
        // injecting the ToolState or without being completely refactored
        this.contextService.setTools([].concat(tools));
    };
    /**
     * Set a new context and update the tool state
     * @param context Detailed context
     */
    /**
     * Set a new context and update the tool state
     * @private
     * @param {?} context Detailed context
     * @return {?}
     */
    ContextState.prototype.onContextChange = /**
     * Set a new context and update the tool state
     * @private
     * @param {?} context Detailed context
     * @return {?}
     */
    function (context) {
        if (context === undefined) {
            return;
        }
        this.setContext(context);
    };
    ContextState.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    ContextState.ctorParameters = function () { return [
        { type: _igo2_context__WEBPACK_IMPORTED_MODULE_7__["ContextService"] },
        { type: _igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolService"] },
        { type: ToolState },
        { type: _igo2_core__WEBPACK_IMPORTED_MODULE_6__["LanguageService"] }
    ]; };
    /** @nocollapse */ ContextState.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["defineInjectable"])({ factory: function ContextState_Factory() { return new ContextState(Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(_igo2_context__WEBPACK_IMPORTED_MODULE_7__["ContextService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(_igo2_common__WEBPACK_IMPORTED_MODULE_10__["ToolService"]), Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(ToolState), Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["inject"])(_igo2_core__WEBPACK_IMPORTED_MODULE_6__["LanguageService"])); }, token: ContextState, providedIn: "root" });
    return ContextState;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service that holds the state of the workspace module
 */
var WorkspaceState = /** @class */ (function () {
    function WorkspaceState() {
        var _this = this;
        /**
         * Observable of the active workspace
         */
        this.workspace$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["BehaviorSubject"](undefined);
        this._store = new _igo2_common__WEBPACK_IMPORTED_MODULE_10__["WorkspaceStore"]([]);
        this._store.stateView
            .firstBy$((/**
         * @param {?} record
         * @return {?}
         */
        function (record) { return record.state.active === true; }))
            .subscribe((/**
         * @param {?} record
         * @return {?}
         */
        function (record) {
            /** @type {?} */
            var workspace = record ? record.entity : undefined;
            _this.workspace$.next(workspace);
        }));
    }
    Object.defineProperty(WorkspaceState.prototype, "store", {
        /**
         * Store that holds all the available workspaces
         */
        get: /**
         * Store that holds all the available workspaces
         * @return {?}
         */
        function () { return this._store; },
        enumerable: true,
        configurable: true
    });
    WorkspaceState.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    WorkspaceState.ctorParameters = function () { return []; };
    /** @nocollapse */ WorkspaceState.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["defineInjectable"])({ factory: function WorkspaceState_Factory() { return new WorkspaceState(); }, token: WorkspaceState, providedIn: "root" });
    return WorkspaceState;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Service that holds the state of the query module
 */
var QueryState = /** @class */ (function () {
    function QueryState() {
        /**
         * Store that holds the query results
         */
        this.store = new _igo2_common__WEBPACK_IMPORTED_MODULE_10__["EntityStore"]([]);
    }
    QueryState.decorators = [
        { type: _angular_core__WEBPACK_IMPORTED_MODULE_9__["Injectable"], args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    QueryState.ctorParameters = function () { return []; };
    /** @nocollapse */ QueryState.ngInjectableDef = Object(_angular_core__WEBPACK_IMPORTED_MODULE_9__["defineInjectable"])({ factory: function QueryState_Factory() { return new QueryState(); }, token: QueryState, providedIn: "root" });
    return QueryState;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */



//# sourceMappingURL=igo2-integration.js.map

/***/ }),

/***/ "./dist/igo-lib/utils/fesm5/igo2-utils.js":
/*!************************************************!*\
  !*** ./dist/igo-lib/utils/fesm5/igo2-utils.js ***!
  \************************************************/
/*! exports provided: Base64, Clipboard, ChangeUtils, ChangeType, ObjectUtils, strEnum, StringUtils, S4, uuid, SubjectStatus, Watcher */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Base64", function() { return Base64; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Clipboard", function() { return Clipboard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChangeUtils", function() { return ChangeUtils; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChangeType", function() { return ChangeType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectUtils", function() { return ObjectUtils; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strEnum", function() { return strEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StringUtils", function() { return StringUtils; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "S4", function() { return S4; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uuid", function() { return uuid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubjectStatus", function() { return SubjectStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Watcher", function() { return Watcher; });
/* harmony import */ var bowser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bowser */ "./node_modules/bowser/src/bowser.js");
/* harmony import */ var bowser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bowser__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");





/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/* tslint:disable */
/** @type {?} */
var ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
var Base64 = /** @class */ (function () {
    function Base64() {
    }
    /**
     * @private
     * @param {?} s
     * @param {?} i
     * @return {?}
     */
    Base64.getByte = /**
     * @private
     * @param {?} s
     * @param {?} i
     * @return {?}
     */
    function (s, i) {
        /** @type {?} */
        var x = s.charCodeAt(i);
        return x;
    };
    /**
     * @private
     * @param {?} s
     * @param {?} i
     * @return {?}
     */
    Base64.getByte64 = /**
     * @private
     * @param {?} s
     * @param {?} i
     * @return {?}
     */
    function (s, i) {
        /** @type {?} */
        var idx = this.ALPHA.indexOf(s.charAt(i));
        return idx;
    };
    /**
     * @param {?} s
     * @return {?}
     */
    Base64.decode = /**
     * @param {?} s
     * @return {?}
     */
    function (s) {
        /** @type {?} */
        var pads = 0;
        /** @type {?} */
        var i;
        /** @type {?} */
        var b10;
        /** @type {?} */
        var imax = s.length;
        /** @type {?} */
        var x = [];
        s = String(s);
        if (imax === 0) {
            return s;
        }
        if (s.charAt(imax - 1) === this.PADCHAR) {
            pads = 1;
            if (s.charAt(imax - 2) === this.PADCHAR) {
                pads = 2;
            }
            imax -= 4;
        }
        for (i = 0; i < imax; i += 4) {
            b10 =
                (this.getByte64(s, i) << 18) |
                    (this.getByte64(s, i + 1) << 12) |
                    (this.getByte64(s, i + 2) << 6) |
                    this.getByte64(s, i + 3);
            x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 255, b10 & 255));
        }
        switch (pads) {
            case 1:
                b10 =
                    (this.getByte64(s, i) << 18) |
                        (this.getByte64(s, i + 1) << 12) |
                        (this.getByte64(s, i + 2) << 6);
                x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 255));
                break;
            case 2:
                b10 = (this.getByte64(s, i) << 18) | (this.getByte64(s, i + 1) << 12);
                x.push(String.fromCharCode(b10 >> 16));
                break;
        }
        return x.join('');
    };
    /**
     * @param {?} s
     * @return {?}
     */
    Base64.encode = /**
     * @param {?} s
     * @return {?}
     */
    function (s) {
        s = String(s);
        /** @type {?} */
        var i;
        /** @type {?} */
        var b10;
        /** @type {?} */
        var x = [];
        /** @type {?} */
        var imax = s.length - s.length % 3;
        if (s.length === 0) {
            return s;
        }
        for (i = 0; i < imax; i += 3) {
            b10 =
                (this.getByte(s, i) << 16) |
                    (this.getByte(s, i + 1) << 8) |
                    this.getByte(s, i + 2);
            x.push(this.ALPHA.charAt(b10 >> 18));
            x.push(this.ALPHA.charAt((b10 >> 12) & 63));
            x.push(this.ALPHA.charAt((b10 >> 6) & 63));
            x.push(this.ALPHA.charAt(b10 & 63));
        }
        switch (s.length - imax) {
            case 1:
                b10 = this.getByte(s, i) << 16;
                x.push(this.ALPHA.charAt(b10 >> 18) +
                    this.ALPHA.charAt((b10 >> 12) & 63) +
                    this.PADCHAR +
                    this.PADCHAR);
                break;
            case 2:
                b10 = (this.getByte(s, i) << 16) | (this.getByte(s, i + 1) << 8);
                x.push(this.ALPHA.charAt(b10 >> 18) +
                    this.ALPHA.charAt((b10 >> 12) & 63) +
                    this.ALPHA.charAt((b10 >> 6) & 63) +
                    this.PADCHAR);
                break;
        }
        return x.join('');
    };
    Base64.PADCHAR = '=';
    Base64.ALPHA = ALPHA;
    return Base64;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var Clipboard = /** @class */ (function () {
    function Clipboard() {
    }
    /**
     * @param {?} element
     * @return {?}
     */
    Clipboard.copy = /**
     * @param {?} element
     * @return {?}
     */
    function (element) {
        /** @type {?} */
        var successful = false;
        if (typeof element === 'string') {
            /** @type {?} */
            var textArea = Clipboard.createTextArea(element);
            Clipboard.selectText(textArea);
            successful = Clipboard.copyTextToClipboard();
            Clipboard.destroyTextArea(textArea);
        }
        else {
            Clipboard.selectText(element);
            successful = Clipboard.copyTextToClipboard();
        }
        return successful;
    };
    /**
     * @private
     * @param {?} text
     * @return {?}
     */
    Clipboard.createTextArea = /**
     * @private
     * @param {?} text
     * @return {?}
     */
    function (text) {
        /** @type {?} */
        var textArea = (/** @type {?} */ (document.createElement('textArea')));
        textArea.value = text;
        document.body.appendChild(textArea);
        return textArea;
    };
    /**
     * @private
     * @param {?} textArea
     * @return {?}
     */
    Clipboard.destroyTextArea = /**
     * @private
     * @param {?} textArea
     * @return {?}
     */
    function (textArea) {
        document.body.removeChild(textArea);
    };
    /**
     * @private
     * @param {?} textArea
     * @return {?}
     */
    Clipboard.selectText = /**
     * @private
     * @param {?} textArea
     * @return {?}
     */
    function (textArea) {
        if (bowser__WEBPACK_IMPORTED_MODULE_0__["ios"]) {
            /** @type {?} */
            var oldContentEditable = textArea.contentEditable;
            /** @type {?} */
            var oldReadOnly = textArea.readOnly;
            /** @type {?} */
            var range = document.createRange();
            /** @type {?} */
            var selection = window.getSelection();
            textArea.contenteditable = true;
            textArea.readonly = false;
            range.selectNodeContents(textArea);
            selection.removeAllRanges();
            selection.addRange(range);
            textArea.setSelectionRange(0, 999999);
            textArea.contentEditable = oldContentEditable;
            textArea.readOnly = oldReadOnly;
        }
        else {
            textArea.select();
        }
    };
    /**
     * @private
     * @return {?}
     */
    Clipboard.copyTextToClipboard = /**
     * @private
     * @return {?}
     */
    function () {
        if (!(bowser__WEBPACK_IMPORTED_MODULE_0__["ios"] && bowser__WEBPACK_IMPORTED_MODULE_0__["version"] < 10)) {
            return document.execCommand('copy');
        }
        return false;
    };
    return Clipboard;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var StringUtils = /** @class */ (function () {
    function StringUtils() {
    }
    /**
     * @param {?} s1
     * @param {?} s2
     * @param {?=} p
     * @return {?}
     */
    StringUtils.diff = /**
     * @param {?} s1
     * @param {?} s2
     * @param {?=} p
     * @return {?}
     */
    function (s1, s2, p) {
        if (p === void 0) { p = 4; }
        if (!s1 && !s2) {
            return '';
        }
        if (!s1) {
            return '<span class="inserted">' + s2 + '</span>';
        }
        if (!s2) {
            return '<span class="deleted">' + s1 + '</span>';
        }
        s1 = s1.toString();
        s2 = s2.toString();
        /** @type {?} */
        var changeData = StringUtils.getChanges(s1, s2, '', p);
        /** @type {?} */
        var nextS = s2.slice(changeData.mtc.length + changeData.ins.length + changeData.sbs.length);
        // remaining part of "s"
        /** @type {?} */
        var nextThis = s1.slice(changeData.mtc.length + changeData.del.length + changeData.sbs.length);
        // remaining part of "this"
        /** @type {?} */
        var result = '';
        if (changeData.del.length > 0) {
            changeData.del = '<span class="deleted">' + changeData.del + '</span>';
        }
        if (changeData.ins.length > 0) {
            changeData.ins = '<span class="inserted">' + changeData.ins + '</span>';
        }
        result = changeData.mtc + changeData.del + changeData.ins + changeData.sbs;
        result +=
            nextThis !== '' || nextS !== ''
                ? StringUtils.diff(nextThis, nextS, p)
                : '';
        return result;
    };
    /**
     * @private
     * @param {?} s
     * @param {?} l
     * @param {?} m
     * @return {?}
     */
    StringUtils.getMatchingSubstring = /**
     * @private
     * @param {?} s
     * @param {?} l
     * @param {?} m
     * @return {?}
     */
    function (s, l, m) {
        // returns the first matching substring in-between the two strings
        /** @type {?} */
        var i = 0;
        /** @type {?} */
        var match = false;
        /** @type {?} */
        var slen = s.length;
        /** @type {?} */
        var o = { fis: slen, mtc: m, sbs: '' };
        while (i < slen) {
            l[i] === s[i]
                ? match
                    ? (o.sbs += s[i]) // o.sbs holds the matching substring itsef
                    : ((match = true), (o.fis = i), (o.sbs = s[i]))
                : match
                    ? (i = slen) // stop after the first found substring
                    : (i = i);
            ++i;
        }
        return o;
    };
    /**
     * @private
     * @param {?} s1
     * @param {?} s2
     * @param {?} m
     * @param {?} p
     * @return {?}
     */
    StringUtils.getChanges = /**
     * @private
     * @param {?} s1
     * @param {?} s2
     * @param {?} m
     * @param {?} p
     * @return {?}
     */
    function (s1, s2, m, p) {
        var _a;
        /** @type {?} */
        var isThisLonger = s1.length >= s1.length ? true : false;
        var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_1__["__read"])(isThisLonger ? [s1, s2] : [s2, s1], 2), longer = _b[0], shorter = _b[1];
        // assignment of longer and shorter by es6 destructuring
        /** @type {?} */
        var bi = 0;
        while (shorter[bi] === longer[bi] && bi < shorter.length) {
            ++bi;
        } // make bi the index of first mismatching character
        longer = longer.split('').slice(bi); // as the longer string will be rotated it is converted into array
        shorter = shorter.slice(bi); // shorter and longer now starts from the first mismatching character
        // shorter and longer now starts from the first mismatching character
        /** @type {?} */
        var len = longer.length;
        // length of the longer string
        /** @type {?} */
        var cd = {
            fis: shorter.length,
            // the index of matching string in the shorter string
            fil: len,
            // the index of matching string in the longer string
            sbs: '',
            // the matching substring itself
            mtc: m + s2.slice(0, bi)
        };
        // if exists mtc holds the matching string at the front
        /** @type {?} */
        var sub = { sbs: '' };
        if (shorter !== '') {
            for (var rc = 0; rc < len && sub.sbs.length < p; rc++) {
                // rc -> rotate count, p -> precision factor
                sub = StringUtils.getMatchingSubstring(shorter, StringUtils.rotateArray(longer, rc), cd.mtc); // rotate longer string 1 char and get substring
                sub.fil =
                    rc < len - sub.fis
                        ? sub.fis + rc // mismatch is longer than the mismatch in short
                        : sub.fis - len + rc; // mismatch is shorter than the mismatch in short
                if (sub.sbs.length > cd.sbs.length) {
                    cd = sub; // only keep the one with the longest substring.
                }
            }
        }
        // insert the mismatching delete subsrt and insert substr to the cd object and attach the previous substring
        _a = Object(tslib__WEBPACK_IMPORTED_MODULE_1__["__read"])(isThisLonger
            ? [longer.slice(0, cd.fil).join(''), shorter.slice(0, cd.fis)]
            : [shorter.slice(0, cd.fis), longer.slice(0, cd.fil).join('')], 2), cd.del = _a[0], cd.ins = _a[1];
        return cd.del.indexOf(' ') === -1 ||
            cd.ins.indexOf(' ') === -1 ||
            cd.del === '' ||
            cd.ins === '' ||
            cd.sbs === ''
            ? cd
            : StringUtils.getChanges(cd.del, cd.ins, cd.mtc, p);
    };
    /**
     * @private
     * @param {?} array
     * @param {?} n
     * @return {?}
     */
    StringUtils.rotateArray = /**
     * @private
     * @param {?} array
     * @param {?} n
     * @return {?}
     */
    function (array, n) {
        /** @type {?} */
        var len = array.length;
        /** @type {?} */
        var res = new Array(array.length);
        if (n % len === 0) {
            return array.slice();
        }
        else {
            for (var i = 0; i < len; i++) {
                res[i] = array[(i + (len + (n % len))) % len];
            }
        }
        return res;
    };
    return StringUtils;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var ChangeType = {
    ADDED: 'added',
    DELETED: 'deleted',
    MODIFIED: 'modified',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ChangeUtils = /** @class */ (function () {
    function ChangeUtils() {
    }
    /**
     * @param {?} obj1
     * @param {?} obj2
     * @param {?=} ignoreKeys
     * @return {?}
     */
    ChangeUtils.findChanges = /**
     * @param {?} obj1
     * @param {?} obj2
     * @param {?=} ignoreKeys
     * @return {?}
     */
    function (obj1, obj2, ignoreKeys) {
        if (ignoreKeys === void 0) { ignoreKeys = []; }
        var e_1, _a;
        /** @type {?} */
        var items = {
            added: [],
            deleted: [],
            modified: []
        };
        if (!obj1 || !obj2) {
            return items;
        }
        /** @type {?} */
        var obj1Clone = Object(tslib__WEBPACK_IMPORTED_MODULE_1__["__spread"])(obj1);
        /** @type {?} */
        var obj2Clone = Object(tslib__WEBPACK_IMPORTED_MODULE_1__["__spread"])(obj2);
        var _loop_1 = function (fromItem) {
            /** @type {?} */
            var index = obj2Clone.findIndex((/**
             * @param {?} s
             * @return {?}
             */
            function (s) { return s.id === fromItem.id; }));
            if (index === -1) {
                items.deleted.push({
                    change: { type: ChangeType.DELETED },
                    value: fromItem
                });
                return "continue";
            }
            /** @type {?} */
            var toItem = obj2Clone.splice(index, 1)[0];
            /** @type {?} */
            var fromItemClone = JSON.parse(JSON.stringify(fromItem));
            /** @type {?} */
            var toItemClone = JSON.parse(JSON.stringify(toItem));
            /** @type {?} */
            var keysChanged = ChangeUtils.compareObject(fromItemClone, toItemClone, undefined, ignoreKeys);
            if (keysChanged.length) {
                items.modified.push({
                    change: {
                        type: ChangeType.MODIFIED,
                        keysChanged: keysChanged
                    },
                    value: fromItemClone,
                    oldValue: fromItem,
                    newValue: toItem
                });
            }
        };
        try {
            for (var obj1Clone_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_1__["__values"])(obj1Clone), obj1Clone_1_1 = obj1Clone_1.next(); !obj1Clone_1_1.done; obj1Clone_1_1 = obj1Clone_1.next()) {
                var fromItem = obj1Clone_1_1.value;
                _loop_1(fromItem);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (obj1Clone_1_1 && !obj1Clone_1_1.done && (_a = obj1Clone_1.return)) _a.call(obj1Clone_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        items.added = obj2Clone.map((/**
         * @param {?} itemAdded
         * @return {?}
         */
        function (itemAdded) {
            return {
                change: { type: ChangeType.ADDED },
                value: itemAdded
            };
        }));
        return items;
    };
    /**
     * @private
     * @param {?} fromItem
     * @param {?} toItem
     * @param {?=} baseKey
     * @param {?=} ignoreKeys
     * @return {?}
     */
    ChangeUtils.compareObject = /**
     * @private
     * @param {?} fromItem
     * @param {?} toItem
     * @param {?=} baseKey
     * @param {?=} ignoreKeys
     * @return {?}
     */
    function (fromItem, toItem, baseKey, ignoreKeys) {
        var _this = this;
        if (ignoreKeys === void 0) { ignoreKeys = []; }
        /** @type {?} */
        var fromItemClone = JSON.parse(JSON.stringify(fromItem));
        /** @type {?} */
        var toItemClone = JSON.parse(JSON.stringify(toItem));
        /** @type {?} */
        var keys = new Set(Object(tslib__WEBPACK_IMPORTED_MODULE_1__["__spread"])(Object.keys(fromItem), Object.keys(toItem)));
        /** @type {?} */
        var keysChanged = [];
        keys.forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            /** @type {?} */
            var keyString = baseKey ? baseKey + "." + key : key;
            if (ignoreKeys.indexOf(keyString) !== -1) {
                return;
            }
            if (Array.isArray(fromItem[key])) {
                fromItem[key] = fromItem[key].join(',<br>');
            }
            if (Array.isArray(toItem[key])) {
                toItem[key] = toItem[key].join(',<br>');
            }
            if (typeof fromItem[key] === 'object' &&
                typeof toItem[key] === 'object' &&
                fromItem[key] !== null &&
                toItem[key] !== null) {
                keysChanged = keysChanged.concat(_this.compareObject(fromItem[key], toItem[key], keyString));
            }
            else {
                if (fromItem[key] !== toItem[key]) {
                    keysChanged.push({
                        key: keyString,
                        oldValue: fromItemClone[key],
                        newValue: toItemClone[key]
                    });
                    fromItem[key] = StringUtils.diff(fromItem[key], toItem[key]);
                }
            }
        }));
        return keysChanged;
    };
    return ChangeUtils;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ObjectUtils = /** @class */ (function () {
    function ObjectUtils() {
    }
    /**
     * @param {?} obj
     * @param {?} key
     * @return {?}
     */
    ObjectUtils.resolve = /**
     * @param {?} obj
     * @param {?} key
     * @return {?}
     */
    function (obj, key) {
        /** @type {?} */
        var keysArray = key
            .replace(/\[/g, '.')
            .replace(/\]/g, '')
            .split('.');
        /** @type {?} */
        var current = obj;
        while (keysArray.length) {
            if (typeof current !== 'object') {
                return undefined;
            }
            current = current[keysArray.shift()];
        }
        return current;
    };
    /**
     * @param {?} item
     * @return {?}
     */
    ObjectUtils.isObject = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        return (item &&
            typeof item === 'object' &&
            !Array.isArray(item) &&
            item !== null &&
            !(item instanceof Date));
    };
    /**
     * @param {?} target
     * @param {?} source
     * @param {?=} ignoreUndefined
     * @return {?}
     */
    ObjectUtils.mergeDeep = /**
     * @param {?} target
     * @param {?} source
     * @param {?=} ignoreUndefined
     * @return {?}
     */
    function (target, source, ignoreUndefined) {
        if (ignoreUndefined === void 0) { ignoreUndefined = false; }
        /** @type {?} */
        var output = Object.assign({}, target);
        if (ObjectUtils.isObject(target) && ObjectUtils.isObject(source)) {
            Object.keys(source)
                .filter((/**
             * @param {?} key
             * @return {?}
             */
            function (key) { return !ignoreUndefined || source[key] !== undefined; }))
                .forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) {
                var _a, _b;
                if (ObjectUtils.isObject(source[key])) {
                    if (!(key in target)) {
                        Object.assign(output, (_a = {}, _a[key] = source[key], _a));
                    }
                    else {
                        output[key] = ObjectUtils.mergeDeep(target[key], source[key], ignoreUndefined);
                    }
                }
                else {
                    Object.assign(output, (_b = {}, _b[key] = source[key], _b));
                }
            }));
        }
        return output;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    ObjectUtils.removeUndefined = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        /** @type {?} */
        var output = {};
        if (ObjectUtils.isObject(obj)) {
            Object.keys(obj)
                .filter((/**
             * @param {?} key
             * @return {?}
             */
            function (key) { return obj[key] !== undefined; }))
                .forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) {
                if (ObjectUtils.isObject(obj[key]) || Array.isArray(obj[key])) {
                    output[key] = ObjectUtils.removeUndefined(obj[key]);
                }
                else {
                    output[key] = obj[key];
                }
            }));
            return output;
        }
        if (Array.isArray(obj)) {
            return obj.map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return ObjectUtils.removeUndefined(o); }));
        }
        return obj;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    ObjectUtils.removeNull = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        /** @type {?} */
        var output = {};
        if (ObjectUtils.isObject(obj)) {
            Object.keys(obj)
                .filter((/**
             * @param {?} key
             * @return {?}
             */
            function (key) { return obj[key] !== null; }))
                .forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) {
                if (ObjectUtils.isObject(obj[key]) || Array.isArray(obj[key])) {
                    output[key] = ObjectUtils.removeNull(obj[key]);
                }
                else {
                    output[key] = obj[key];
                }
            }));
            return output;
        }
        if (Array.isArray(obj)) {
            return obj.map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return ObjectUtils.removeNull(o); }));
        }
        return obj;
    };
    /**
     * @param {?} a
     * @param {?} b
     * @param {?=} direction
     * @param {?=} nullFirst
     * @return {?}
     */
    ObjectUtils.naturalCompare = /**
     * @param {?} a
     * @param {?} b
     * @param {?=} direction
     * @param {?=} nullFirst
     * @return {?}
     */
    function (a, b, direction, nullFirst) {
        if (direction === void 0) { direction = 'asc'; }
        if (nullFirst === void 0) { nullFirst = false; }
        if (direction === 'desc') {
            b = [a, (a = b)][0];
        }
        if (a === undefined || a === null || a === '') {
            if (direction === 'desc') {
                return nullFirst ? -1 : 1;
            }
            return nullFirst ? 1 : -1;
        }
        if (b === undefined || b === null || b === '') {
            if (direction === 'desc') {
                return nullFirst ? 1 : -1;
            }
            return nullFirst ? -1 : 1;
        }
        /** @type {?} */
        var ax = [];
        /** @type {?} */
        var bx = [];
        a = '' + a;
        b = '' + b;
        a.replace(/(\d+)|(\D+)/g, (/**
         * @param {?} _
         * @param {?} $1
         * @param {?} $2
         * @return {?}
         */
        function (_, $1, $2) {
            ax.push([$1 || Infinity, $2 || '']);
        }));
        b.replace(/(\d+)|(\D+)/g, (/**
         * @param {?} _
         * @param {?} $1
         * @param {?} $2
         * @return {?}
         */
        function (_, $1, $2) {
            bx.push([$1 || Infinity, $2 || '']);
        }));
        while (ax.length && bx.length) {
            /** @type {?} */
            var an = ax.shift();
            /** @type {?} */
            var bn = bx.shift();
            /** @type {?} */
            var nn = an[0] - bn[0] || an[1].localeCompare(bn[1]);
            if (nn) {
                return nn;
            }
        }
        return ax.length - bx.length;
    };
    /**
     * Return true if two object are equivalent.
     * Objects are considered equivalent if they have the same properties and
     * if all of their properties (first-level only) share the same value.
     * @param obj1 First object
     * @param obj2 Second object
     * @returns Whether two objects arer equivalent
     */
    /**
     * Return true if two object are equivalent.
     * Objects are considered equivalent if they have the same properties and
     * if all of their properties (first-level only) share the same value.
     * @param {?} obj1 First object
     * @param {?} obj2 Second object
     * @return {?} Whether two objects arer equivalent
     */
    ObjectUtils.objectsAreEquivalent = /**
     * Return true if two object are equivalent.
     * Objects are considered equivalent if they have the same properties and
     * if all of their properties (first-level only) share the same value.
     * @param {?} obj1 First object
     * @param {?} obj2 Second object
     * @return {?} Whether two objects arer equivalent
     */
    function (obj1, obj2) {
        var e_1, _a;
        if (obj1 === obj2) {
            return true;
        }
        /** @type {?} */
        var obj1Props = Object.getOwnPropertyNames(obj1);
        /** @type {?} */
        var obj2Props = Object.getOwnPropertyNames(obj2);
        if (obj1Props.length !== obj2Props.length) {
            return false;
        }
        try {
            for (var obj1Props_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_1__["__values"])(obj1Props), obj1Props_1_1 = obj1Props_1.next(); !obj1Props_1_1.done; obj1Props_1_1 = obj1Props_1.next()) {
                var prop = obj1Props_1_1.value;
                if (obj1[prop] !== obj2[prop]) {
                    return false;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (obj1Props_1_1 && !obj1Props_1_1.done && (_a = obj1Props_1.return)) _a.call(obj1Props_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return true;
    };
    /**
     * Return a new object with an array of keys removed
     * @param obj Source object
     * @param keys Keys to remove
     * @returns A new object
     */
    /**
     * Return a new object with an array of keys removed
     * @param {?} obj Source object
     * @param {?} keys Keys to remove
     * @return {?} A new object
     */
    ObjectUtils.removeKeys = /**
     * Return a new object with an array of keys removed
     * @param {?} obj Source object
     * @param {?} keys Keys to remove
     * @return {?} A new object
     */
    function (obj, keys) {
        /** @type {?} */
        var newObj = Object.keys(obj)
            .filter((/**
         * @param {?} key
         * @return {?}
         */
        function (key) { return keys.indexOf(key) < 0; }))
            .reduce((/**
         * @param {?} _obj
         * @param {?} key
         * @return {?}
         */
        function (_obj, key) {
            _obj[key] = obj[key];
            return _obj;
        }), {});
        return newObj;
    };
    return ObjectUtils;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Utility function to create a K:V from a list of strings
 * @template T
 * @param {?} o
 * @return {?}
 */
function strEnum(o) {
    return o.reduce((/**
     * @param {?} res
     * @param {?} key
     * @return {?}
     */
    function (res, key) {
        res[key] = key;
        return res;
    }), Object.create(null));
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @return {?}
 */
function S4() {
    // tslint:disable-next-line: no-bitwise
    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
}
/**
 * @return {?}
 */
function uuid() {
    /** @type {?} */
    var id = "" + S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4();
    return id.toLowerCase();
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {number} */
var SubjectStatus = {
    Error: 0,
    Done: 1,
    Working: 2,
    Waiting: 3,
};
SubjectStatus[SubjectStatus.Error] = 'Error';
SubjectStatus[SubjectStatus.Done] = 'Done';
SubjectStatus[SubjectStatus.Working] = 'Working';
SubjectStatus[SubjectStatus.Waiting] = 'Waiting';
/**
 * @abstract
 */
var  /**
 * @abstract
 */
Watcher = /** @class */ (function () {
    function Watcher() {
        this.status$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__["Subject"]();
    }
    Object.defineProperty(Watcher.prototype, "status", {
        get: /**
         * @return {?}
         */
        function () {
            return this._status;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._status = value;
            this.status$.next(value);
        },
        enumerable: true,
        configurable: true
    });
    // tslint:disable-next-line:ban-types
    // tslint:disable-next-line:ban-types
    /**
     * @param {?} callback
     * @param {?=} scope
     * @return {?}
     */
    Watcher.prototype.subscribe = 
    // tslint:disable-next-line:ban-types
    /**
     * @param {?} callback
     * @param {?=} scope
     * @return {?}
     */
    function (callback, scope) {
        var _this = this;
        this.watch();
        this.status$$ = this.status$
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["distinctUntilChanged"])())
            .subscribe((/**
         * @param {?} status
         * @return {?}
         */
        function (status) {
            _this.handleStatusChange(status);
            callback.call(scope, _this);
        }));
    };
    /**
     * @return {?}
     */
    Watcher.prototype.unsubscribe = /**
     * @return {?}
     */
    function () {
        this.unwatch();
        if (this.status$$ !== undefined) {
            this.status$$.unsubscribe();
            this.status$$ = undefined;
        }
        this.status = SubjectStatus.Waiting;
    };
    /**
     * @protected
     * @param {?} status
     * @return {?}
     */
    Watcher.prototype.handleStatusChange = /**
     * @protected
     * @param {?} status
     * @return {?}
     */
    function (status) { };
    return Watcher;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */



//# sourceMappingURL=igo2-utils.js.map

/***/ }),

/***/ "./node_modules/@ionic/core/dist/esm-es5 lazy recursive ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm-es5 lazy ^\.\/.*\.entry\.js$ include: \.entry\.js$ exclude: \.system\.entry\.js$ namespace object ***!
  \*********************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./ion-action-sheet-controller_8.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-action-sheet-controller_8.entry.js",
		"common",
		13
	],
	"./ion-action-sheet-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-action-sheet-ios.entry.js",
		"common",
		14
	],
	"./ion-action-sheet-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-action-sheet-md.entry.js",
		"common",
		15
	],
	"./ion-alert-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-alert-ios.entry.js",
		"common",
		16
	],
	"./ion-alert-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-alert-md.entry.js",
		"common",
		17
	],
	"./ion-app_8-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-app_8-ios.entry.js",
		1,
		"common",
		18
	],
	"./ion-app_8-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-app_8-md.entry.js",
		1,
		"common",
		19
	],
	"./ion-avatar_3-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-avatar_3-ios.entry.js",
		"common",
		20
	],
	"./ion-avatar_3-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-avatar_3-md.entry.js",
		"common",
		21
	],
	"./ion-back-button-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-back-button-ios.entry.js",
		"common",
		22
	],
	"./ion-back-button-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-back-button-md.entry.js",
		"common",
		23
	],
	"./ion-backdrop-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-backdrop-ios.entry.js",
		0,
		"common",
		24
	],
	"./ion-backdrop-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-backdrop-md.entry.js",
		0,
		"common",
		25
	],
	"./ion-button_2-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-button_2-ios.entry.js",
		"common",
		26
	],
	"./ion-button_2-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-button_2-md.entry.js",
		"common",
		27
	],
	"./ion-card_5-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-card_5-ios.entry.js",
		"common",
		28
	],
	"./ion-card_5-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-card_5-md.entry.js",
		"common",
		29
	],
	"./ion-checkbox-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-checkbox-ios.entry.js",
		"common",
		30
	],
	"./ion-checkbox-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-checkbox-md.entry.js",
		"common",
		31
	],
	"./ion-chip-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-chip-ios.entry.js",
		"common",
		32
	],
	"./ion-chip-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-chip-md.entry.js",
		"common",
		33
	],
	"./ion-col_3.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-col_3.entry.js",
		34
	],
	"./ion-datetime_3-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-datetime_3-ios.entry.js",
		"common",
		35
	],
	"./ion-datetime_3-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-datetime_3-md.entry.js",
		"common",
		36
	],
	"./ion-fab_3-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-fab_3-ios.entry.js",
		"common",
		37
	],
	"./ion-fab_3-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-fab_3-md.entry.js",
		"common",
		38
	],
	"./ion-img.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-img.entry.js",
		39
	],
	"./ion-infinite-scroll_2-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-infinite-scroll_2-ios.entry.js",
		"common",
		40
	],
	"./ion-infinite-scroll_2-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-infinite-scroll_2-md.entry.js",
		"common",
		41
	],
	"./ion-input-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-input-ios.entry.js",
		"common",
		42
	],
	"./ion-input-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-input-md.entry.js",
		"common",
		43
	],
	"./ion-item-option_3-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-item-option_3-ios.entry.js",
		"common",
		44
	],
	"./ion-item-option_3-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-item-option_3-md.entry.js",
		"common",
		45
	],
	"./ion-item_8-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-item_8-ios.entry.js",
		"common",
		46
	],
	"./ion-item_8-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-item_8-md.entry.js",
		"common",
		47
	],
	"./ion-loading-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-loading-ios.entry.js",
		"common",
		48
	],
	"./ion-loading-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-loading-md.entry.js",
		"common",
		49
	],
	"./ion-menu_4-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-menu_4-ios.entry.js",
		0,
		"common",
		50
	],
	"./ion-menu_4-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-menu_4-md.entry.js",
		0,
		"common",
		51
	],
	"./ion-modal-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-modal-ios.entry.js",
		1,
		"common",
		52
	],
	"./ion-modal-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-modal-md.entry.js",
		1,
		"common",
		53
	],
	"./ion-nav_4.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-nav_4.entry.js",
		1,
		"common",
		54
	],
	"./ion-popover-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-popover-ios.entry.js",
		1,
		"common",
		55
	],
	"./ion-popover-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-popover-md.entry.js",
		1,
		"common",
		56
	],
	"./ion-progress-bar-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-progress-bar-ios.entry.js",
		"common",
		57
	],
	"./ion-progress-bar-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-progress-bar-md.entry.js",
		"common",
		58
	],
	"./ion-radio_2-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-radio_2-ios.entry.js",
		"common",
		59
	],
	"./ion-radio_2-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-radio_2-md.entry.js",
		"common",
		60
	],
	"./ion-range-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-range-ios.entry.js",
		"common",
		61
	],
	"./ion-range-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-range-md.entry.js",
		"common",
		62
	],
	"./ion-refresher_2-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-refresher_2-ios.entry.js",
		"common",
		63
	],
	"./ion-refresher_2-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-refresher_2-md.entry.js",
		"common",
		64
	],
	"./ion-reorder_2-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-reorder_2-ios.entry.js",
		"common",
		65
	],
	"./ion-reorder_2-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-reorder_2-md.entry.js",
		"common",
		66
	],
	"./ion-ripple-effect.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-ripple-effect.entry.js",
		67
	],
	"./ion-route_4.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-route_4.entry.js",
		"common",
		68
	],
	"./ion-searchbar-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-searchbar-ios.entry.js",
		"common",
		69
	],
	"./ion-searchbar-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-searchbar-md.entry.js",
		"common",
		70
	],
	"./ion-segment_2-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-segment_2-ios.entry.js",
		"common",
		71
	],
	"./ion-segment_2-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-segment_2-md.entry.js",
		"common",
		72
	],
	"./ion-select_3-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-select_3-ios.entry.js",
		"common",
		73
	],
	"./ion-select_3-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-select_3-md.entry.js",
		"common",
		74
	],
	"./ion-slide_2-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-slide_2-ios.entry.js",
		"common",
		75
	],
	"./ion-slide_2-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-slide_2-md.entry.js",
		"common",
		76
	],
	"./ion-spinner.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-spinner.entry.js",
		"common",
		77
	],
	"./ion-split-pane-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-split-pane-ios.entry.js",
		78
	],
	"./ion-split-pane-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-split-pane-md.entry.js",
		79
	],
	"./ion-tab-bar_2-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-tab-bar_2-ios.entry.js",
		"common",
		80
	],
	"./ion-tab-bar_2-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-tab-bar_2-md.entry.js",
		"common",
		81
	],
	"./ion-tab_2.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-tab_2.entry.js",
		"common",
		10
	],
	"./ion-text.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-text.entry.js",
		"common",
		82
	],
	"./ion-textarea-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-textarea-ios.entry.js",
		"common",
		83
	],
	"./ion-textarea-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-textarea-md.entry.js",
		"common",
		84
	],
	"./ion-toast-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-toast-ios.entry.js",
		"common",
		85
	],
	"./ion-toast-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-toast-md.entry.js",
		"common",
		86
	],
	"./ion-toggle-ios.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-toggle-ios.entry.js",
		"common",
		87
	],
	"./ion-toggle-md.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-toggle-md.entry.js",
		"common",
		88
	],
	"./ion-virtual-scroll.entry.js": [
		"./node_modules/@ionic/core/dist/esm-es5/ion-virtual-scroll.entry.js",
		89
	]
};
function webpackAsyncContext(req) {
	var ids = map[req];
	if(!ids) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}
	return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {
		var id = ids[0];
		return __webpack_require__(id);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./node_modules/@ionic/core/dist/esm-es5 lazy recursive ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./ga": "./node_modules/moment/locale/ga.js",
	"./ga.js": "./node_modules/moment/locale/ga.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it-ch": "./node_modules/moment/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/locale/it-ch.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ku": "./node_modules/moment/locale/ku.js",
	"./ku.js": "./node_modules/moment/locale/ku.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) { // check for number or string
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return id;
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/*!**********************************************************!*\
  !*** ./src/$$_lazy_route_resource lazy namespace object ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./src/app/app.component.html":
/*!************************************!*\
  !*** ./src/app/app.component.html ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<igo-spinner igoSpinnerBinding></igo-spinner>\r\n<igo-message-center></igo-message-center>\r\n<igo-auth-form *ngIf=\"authConfig\"></igo-auth-form>\r\n\r\n<app-portal igoStopDropPropagation></app-portal>\r\n<!-- <app-zone-selection></app-zone-selection> -->\r\n\r\n<!-- <app-feature-viewer [feature]=feature1></app-feature-viewer> -->"

/***/ }),

/***/ "./src/app/app.component.scss":
/*!************************************!*\
  !*** ./src/app/app.component.scss ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n  position: relative;\n  display: block;\n  font-family: Roboto, 'Helvetica Neue', sans-serif;\n  font-size: 14px; }\n\n:host ::ng-deep h3 {\n  font-size: 1.17em;\n  font-weight: bold; }\n\n:host ::ng-deep h4 {\n  font-weigth: 400; }\n\n/*** Spinner ***/\n\nigo-spinner {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  z-index: 5; }\n\n/*** Message-center ***/\n\nigo-message-center ::ng-deep simple-notifications ::ng-deep div.simple-notification-wrapper {\n  right: 10px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvQzpcXE1ybm1pY3JvXFxkZXZcXGlvblxcaWdvMi9zcmNcXGFwcFxcYXBwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxjb3JlLnZhcmlhYmxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVdBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixTQUFTO0VBQ1QsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixjQUFjO0VBRWQsaURBQWlEO0VBQ2pELGVBQWUsRUFBQTs7QUFHakI7RUFFSSxpQkFBaUI7RUFDakIsaUJBQWlCLEVBQUE7O0FBSHJCO0VBT0ksZ0JBQWdCLEVBQUE7O0FBSXBCLGdCQUFBOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFDdENjO0VEdUNkLFVDdkNjO0VEd0NkLFVBQVUsRUFBQTs7QUFHWix1QkFBQTs7QUFDQTtFQUNFLFdBQVcsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJ35AaWdvMi9jb3JlL3N0eWxlL3BhcnRpYWwvY29yZS52YXJpYWJsZXMnO1xyXG5cclxuYXBwLXBvcnRhbCB7XHJcbiAvLyBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbmFwcC16b25lLXNlbGVjdGlvbiwgYXBwLWZlYXR1cmUtdmlld2VyIHtcclxuIC8vIGhlaWdodDogOTAlO1xyXG59XHJcblxyXG5cclxuOmhvc3Qge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBtYXJnaW46IDA7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcblxyXG4gIGZvbnQtZmFtaWx5OiBSb2JvdG8sICdIZWx2ZXRpY2EgTmV1ZScsIHNhbnMtc2VyaWY7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcblxyXG46aG9zdCA6Om5nLWRlZXAge1xyXG4gIGgzIHtcclxuICAgIGZvbnQtc2l6ZTogMS4xN2VtO1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgfVxyXG5cclxuICBoNCB7XHJcbiAgICBmb250LXdlaWd0aDogNDAwO1xyXG4gIH1cclxufVxyXG5cclxuLyoqKiBTcGlubmVyICoqKi9cclxuXHJcbmlnby1zcGlubmVyIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAkaWdvLW1hcmdpbjtcclxuICByaWdodDogJGlnby1tYXJnaW47XHJcbiAgei1pbmRleDogNTtcclxufVxyXG5cclxuLyoqKiBNZXNzYWdlLWNlbnRlciAqKiovXHJcbmlnby1tZXNzYWdlLWNlbnRlciA6Om5nLWRlZXAgc2ltcGxlLW5vdGlmaWNhdGlvbnMgOjpuZy1kZWVwIGRpdi5zaW1wbGUtbm90aWZpY2F0aW9uLXdyYXBwZXIge1xyXG4gIHJpZ2h0OiAxMHB4O1xyXG59XHJcbiIsIiRpZ28tbWFyZ2luOiA1cHg7XHJcbiRpZ28tcGFkZGluZzogNXB4O1xyXG4kaWdvLWljb24tc2l6ZTogNDBweDtcclxuIl19 */"

/***/ }),

/***/ "./src/app/app.component.ts":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _ionic_native_android_permissions_ngx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic-native/android-permissions/ngx */ "./node_modules/@ionic-native/android-permissions/ngx/index.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var AppComponent = /** @class */ (function () {
    function AppComponent(languageService, configService, analyticsService, renderer, titleService, platform, androidPermissions) {
        this.languageService = languageService;
        this.configService = configService;
        this.analyticsService = analyticsService;
        this.renderer = renderer;
        this.titleService = titleService;
        this.platform = platform;
        this.androidPermissions = androidPermissions;
        this.themeClass = 'blue-theme';
        this.checkPermissions();
        this.authConfig = this.configService.getConfig('auth');
        var title = this.configService.getConfig('title');
        if (title) {
            this.titleService.setTitle(title);
        }
        var theme = this.configService.getConfig('theme') || this.themeClass;
        if (theme) {
            this.renderer.addClass(document.body, theme);
        }
    }
    AppComponent.prototype.checkPermissions = function () {
        var _this = this;
        this.platform.ready().then(function () {
            if (_this.platform.is('cordova')) {
                if (_this.platform.is('android')) {
                    var locationPermissions_1 = false;
                    var storagePermissions_1 = false;
                    _this.androidPermissions.checkPermission('android.permission.ACCESS_FINE_LOCATION').then(function (result) { return (locationPermissions_1 = result.hasPermission); }, function (err) { return (locationPermissions_1 = false); });
                    _this.androidPermissions.checkPermission('android.permission.ACCESS_COARSE_LOCATION').then(function (result) { return (locationPermissions_1 = result.hasPermission); }, function (err) { return (locationPermissions_1 = false); });
                    _this.androidPermissions.checkPermission('android.permission.ACCESS_BACKGROUND_LOCATION').then(function (result) { return (locationPermissions_1 = result.hasPermission); }, function (err) { return (locationPermissions_1 = false); });
                    _this.androidPermissions.checkPermission('android.permission.WRITE_EXTERNAL_STORAGE').then(function (result) { return (storagePermissions_1 = result.hasPermission); }, function (err) { return (storagePermissions_1 = false); });
                    _this.androidPermissions.checkPermission('android.permission.READ_EXTERNAL_STORAGE').then(function (result) { return (storagePermissions_1 = result.hasPermission); }, function (err) { return (storagePermissions_1 = false); });
                    if (!locationPermissions_1) {
                        _this.androidPermissions.requestPermissions([
                            'android.permission.ACCESS_COARSE_LOCATION',
                            'android.permission.ACCESS_FINE_LOCATION',
                            'android.permission.ACCESS_BACKGROUND_LOCATION'
                        ]);
                    }
                    if (storagePermissions_1 === false) {
                        _this.androidPermissions.requestPermissions([
                            'android.permission.WRITE_EXTERNAL_STORAGE',
                            'android.permission.READ_EXTERNAL_STORAGE'
                        ]);
                    }
                }
            }
        });
    };
    AppComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-root',
            template: __webpack_require__(/*! ./app.component.html */ "./src/app/app.component.html"),
            styles: [__webpack_require__(/*! ./app.component.scss */ "./src/app/app.component.scss")]
        }),
        __metadata("design:paramtypes", [_igo2_core__WEBPACK_IMPORTED_MODULE_2__["LanguageService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["ConfigService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["AnalyticsService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"],
            _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["Title"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["Platform"],
            _ionic_native_android_permissions_ngx__WEBPACK_IMPORTED_MODULE_3__["AndroidPermissions"]])
    ], AppComponent);
    return AppComponent;
}());



/***/ }),

/***/ "./src/app/app.module.ts":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/platform-browser/animations */ "./node_modules/@angular/platform-browser/fesm5/animations.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @igo2/auth */ "./dist/igo-lib/auth/fesm5/igo2-auth.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _ionic_native_network_ngx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ionic-native/network/ngx */ "./node_modules/@ionic-native/network/ngx/index.js");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var _pages_portal_portal_module__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./pages/portal/portal.module */ "./src/app/pages/portal/portal.module.ts");
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./app.component */ "./src/app/app.component.ts");
/* harmony import */ var _services_bbox_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./services/bbox.service */ "./src/app/services/bbox.service.ts");
/* harmony import */ var _components_feature_viewer_feature_viewer_module__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/feature-viewer/feature-viewer.module */ "./src/app/components/feature-viewer/feature-viewer.module.ts");
/* harmony import */ var _components_zone_selection_zone_selection_module__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/zone-selection/zone-selection.module */ "./src/app/components/zone-selection/zone-selection.module.ts");
/* harmony import */ var _services_map_image_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./services/map-image.service */ "./src/app/services/map-image.service.ts");
/* harmony import */ var _ionic_native_android_permissions_ngx__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ionic-native/android-permissions/ngx */ "./node_modules/@ionic-native/android-permissions/ngx/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

















var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
            declarations: [_app_component__WEBPACK_IMPORTED_MODULE_11__["AppComponent"]],
            imports: [
                _angular_platform_browser__WEBPACK_IMPORTED_MODULE_0__["BrowserModule"],
                _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_3__["BrowserAnimationsModule"],
                _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"].forRoot([]),
                _igo2_auth__WEBPACK_IMPORTED_MODULE_6__["IgoAuthModule"].forRoot(),
                _igo2_core__WEBPACK_IMPORTED_MODULE_4__["IgoMessageModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_5__["IgoSpinnerModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_5__["IgoStopPropagationModule"],
                _pages_portal_portal_module__WEBPACK_IMPORTED_MODULE_10__["PortalModule"],
                _components_feature_viewer_feature_viewer_module__WEBPACK_IMPORTED_MODULE_13__["FeatureViewerModule"],
                _components_zone_selection_zone_selection_module__WEBPACK_IMPORTED_MODULE_14__["ZoneSelectionModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["IgoQueryModule"]
            ],
            providers: [
                Object(_igo2_core__WEBPACK_IMPORTED_MODULE_4__["provideConfigOptions"])({
                    default: _environments_environment__WEBPACK_IMPORTED_MODULE_9__["environment"].igo,
                    path: './config/config.json'
                }),
                _igo2_core__WEBPACK_IMPORTED_MODULE_4__["RouteService"],
                _services_bbox_service__WEBPACK_IMPORTED_MODULE_12__["BboxService"],
                _services_map_image_service__WEBPACK_IMPORTED_MODULE_15__["MapImageService"],
                Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["provideNominatimSearchSource"])(),
                Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["provideIChercheSearchSource"])(),
                Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["provideIChercheReverseSearchSource"])(),
                Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["provideCoordinatesReverseSearchSource"])(),
                Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["provideILayerSearchSource"])(),
                Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["provideOsrmRoutingSource"])(),
                _ionic_native_android_permissions_ngx__WEBPACK_IMPORTED_MODULE_16__["AndroidPermissions"],
                _ionic_native_network_ngx__WEBPACK_IMPORTED_MODULE_8__["Network"]
            ],
            bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_11__["AppComponent"]]
        })
    ], AppModule);
    return AppModule;
}());



/***/ }),

/***/ "./src/app/components/feature-viewer/feature-viewer.component.html":
/*!*************************************************************************!*\
  !*** ./src/app/components/feature-viewer/feature-viewer.component.html ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-sidenav-container>\r\n  <!--\r\n    <igo-backdrop\r\n      [shown]=\"sidenavOpened\"\r\n      (click)=\"closeSidenav()\">\r\n    </igo-backdrop>\r\n\r\n    <button\r\n      mat-icon-button\r\n      id=\"menu-button\"\r\n      class=\"menu-button\"\r\n      color=\"primary\"\r\n      tooltip-position=\"below\"\r\n      matTooltipShowDelay=\"500\"\r\n      [matTooltip]=\"(sidenavOpened ? 'Close Menu' : 'Open Menu') | translate\"\r\n      (click)=\"toggleSidenav()\">\r\n      <mat-icon>\r\n        <ng-container *ngIf=\"!sidenavOpened\">menu</ng-container>\r\n        <ng-container *ngIf=\"sidenavOpened\">keyboard_arrow_left</ng-container>\r\n      </mat-icon>\r\n    </button>\r\n\r\n    <igo-search-bar\r\n      igoSearchUrlParam\r\n      [placeholder]=\"'Search for an address or a place' | translate\"\r\n      floatLabel=\"never\">\r\n    </igo-search-bar>\r\n\r\n    <igo-sidenav\r\n      [opened]=\"sidenavOpened\"\r\n      [feature]=\"featureService.focusedFeature$ | async\"\r\n      [tool]=\"toolService.selectedTool$ | async\"\r\n      [map]=\"map\"\r\n      [title]=\"sidenavTitle\"\r\n      [media]=\"mediaService.media$ | async\">\r\n    </igo-sidenav>\r\n-->\r\n  <igo-map-browser [map]=\"map\" [view]=\"view\" igoOverlay></igo-map-browser>\r\n\r\n\r\n</mat-sidenav-container>"

/***/ }),

/***/ "./src/app/components/feature-viewer/feature-viewer.component.scss":
/*!*************************************************************************!*\
  !*** ./src/app/components/feature-viewer/feature-viewer.component.scss ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/*** Generic ***/\n/*** Generic ***/\n/*** Main ***/\n:host {\n  width: 100%;\n  height: 100%;\n  display: block; }\n/*** Menu button ***/\n.menu-button {\n  background-color: white;\n  position: absolute;\n  left: 5px;\n  top: 5px;\n  z-index: 4;\n  border-radius: 0; }\n.menu-button ::ng-deep div.mat-button-ripple-round {\n  border-radius: 0; }\n/*** Map browser ***/\nigo-map-browser {\n  width: 100%;\n  height: 100%; }\nigo-map-browser ::ng-deep .ol-overlaycontainer-stopevent {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  bottom: 0; }\nigo-map-browser.sidenav-offset ::ng-deep .ol-overlaycontainer-stopevent {\n  left: 380px;\n  width: calc(100% - 380px); }\nigo-map-browser.expansion-offset ::ng-deep .ol-overlaycontainer-stopevent {\n  bottom: 279px; }\n/*** Search bar ***/\nigo-search-bar {\n  background-color: white;\n  font-size: 16px;\n  position: absolute;\n  left: calc(40px + 5px);\n  top: 5px;\n  z-index: 4;\n  width: calc(400px - calc(40px + 5px) - (2 * 5px));\n  height: 40px;\n  margin: 0 5px; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    igo-search-bar {\n      width: calc(100% - 40px - calc(40px + 5px) - (3 * 5px)); } }\n/*** Sidenav ***/\nmat-sidenav-container {\n  height: 100%;\n  width: 100%;\n  background-color: #efefef;\n  z-index: 5;\n  display: unset; }\n/*** Expansion Panel ***/\napp-expansion-panel {\n  position: absolute;\n  bottom: 0;\n  z-index: 4;\n  overflow: hidden; }\n/*** Toast Panel ***/\napp-toast-panel {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  margin-left: -300px;\n  width: 600px;\n  z-index: 4; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    app-toast-panel {\n      width: calc(100% - 48px);\n      left: 48px;\n      margin-left: 0; } }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n  app-toast-panel.expansion-panel-expanded,\n  app-toast-panel:not(.has-expansion-panel),\n  app-toast-panel.app-toast-panel-opened {\n    width: 100%;\n    left: 0; } }\nigo-geolocate-button {\n  margin-bottom: 90px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9mZWF0dXJlLXZpZXdlci9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL3NyY1xcc3R5bGVcXHBhcnRpYWxcXHZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL2ZlYXR1cmUtdmlld2VyL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxhcHBcXGNvbXBvbmVudHNcXGZlYXR1cmUtdmlld2VyXFxmZWF0dXJlLXZpZXdlci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50cy9mZWF0dXJlLXZpZXdlci9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxjb3JlLnZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL2ZlYXR1cmUtdmlld2VyL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxhcHBcXHBhZ2VzXFxwb3J0YWxcXHBvcnRhbC52YXJpYWJsZXMuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50cy9mZWF0dXJlLXZpZXdlci9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxtZWRpYS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLGdCQUFBO0FBQUEsZ0JBQUE7QUNFQSxhQUFBO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGNBQWMsRUFBQTtBQUdoQixvQkFBQTtBQUVBO0VBQ0UsdUJEWHVDO0VDWXZDLGtCQUFrQjtFQUNsQixTQ2hCYztFRGlCZCxRQ2pCYztFRGtCZCxVQUFVO0VBQ1YsZ0JBQWdCLEVBQUE7QUFHbEI7RUFDRSxnQkFBZ0IsRUFBQTtBQUdsQixvQkFBQTtBQUNBO0VBQ0UsV0FBVztFQUNYLFlBQVksRUFBQTtBQUdkO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxPQUFPO0VBQ1AsU0FBUyxFQUFBO0FBR1g7RUFDRSxXQUFXO0VBQ1gseUJBQXlCLEVBQUE7QUFHM0I7RUFDRSxhQUFhLEVBQUE7QUFHZixtQkFBQTtBQUNBO0VBQ0UsdUJEL0N1QztFQ2dEdkMsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixzQkU3QndEO0VGOEJ4RCxRQ3REYztFRHVEZCxVQUFVO0VBQ1YsaURFL0J5RjtFRmdDekYsWUN2RGtCO0VEd0RsQixhQzFEYyxFQUFBO0FFU2Q7SUh3Q0Y7TUFZSSx1REVuQzhHLEVBQUEsRUZxQ2pIO0FBRUQsZ0JBQUE7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gseUJBQXlCO0VBQ3pCLFVBQVU7RUFDVixjQUFjLEVBQUE7QUFHaEIsd0JBQUE7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsVUFBVTtFQUNWLGdCQUFnQixFQUFBO0FBR2xCLG9CQUFBO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFNBQVM7RUFDVCxtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLFVBQVUsRUFBQTtBR2hGVjtJSDBFRjtNQVNJLHdCQUF5QztNQUN6QyxVRTFGb0I7TUYyRnBCLGNBQWMsRUFBQSxFQUVqQjtBR3ZGQztFSHlGRjs7O0lBSUksV0FBVztJQUNYLE9BQU8sRUFBQSxFQUVWO0FBRUQ7RUFDRSxtQkFBbUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZmVhdHVyZS12aWV3ZXIvZmVhdHVyZS12aWV3ZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICd+QGlnbzIvY29yZS9zdHlsZS9wYXJ0aWFsL2NvcmUudmFyaWFibGVzJztcclxuXHJcbi8qKiogR2VuZXJpYyAqKiovXHJcbiRhcHAtYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpO1xyXG4kYXBwLWljb24tYnV0dG9uLXdpZHRoOiA0MHB4O1xyXG5cclxuJGFwcC1ib3JkZXItd2lkdGg6IDFweDtcclxuJGFwcC1ib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4kYXBwLWJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAuMik7XHJcblxyXG4lYm9yZGVyLWJveCB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG4lYm9yZGVyZWQtdG9wIHtcclxuICBib3JkZXItdG9wOiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJvcmRlcmVkLWJvdHRvbSB7XHJcbiAgYm9yZGVyLWJvdHRvbTogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1sZWZ0IHtcclxuICBib3JkZXItbGVmdDogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1yaWdodCB7XHJcbiAgYm9yZGVyLXJpZ2h0OiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJveC1zaGFkb3dlZCB7XHJcbiAgLW1vei1ib3gtc2hhZG93OiAwcHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC1vLWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIGJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG59XHJcblxyXG4lYm94LXNoYWRvd2VkLWJvdHRvbS1yaWdodCB7XHJcbiAgLW1vei1ib3gtc2hhZG93OiAycHggMnB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtd2Via2l0LWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC1vLWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIGJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG59XHJcbiIsIkBpbXBvcnQgJ35AaWdvMi9jb3JlL3N0eWxlL3BhcnRpYWwvbWVkaWEnO1xyXG5AaW1wb3J0ICcuLi8uLi8uLi9zdHlsZS9wYXJ0aWFsL3ZhcmlhYmxlcyc7XHJcbkBpbXBvcnQgJy4uLy4uL3BhZ2VzL3BvcnRhbC9wb3J0YWwudmFyaWFibGVzLnNjc3MnO1xyXG5cclxuLyoqKiBNYWluICoqKi9cclxuOmhvc3Qge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5cclxuLyoqKiBNZW51IGJ1dHRvbiAqKiovXHJcblxyXG4ubWVudS1idXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICRhcHAtYmFja2dyb3VuZC1jb2xvcjtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdDogJGlnby1tYXJnaW47XHJcbiAgdG9wOiAkaWdvLW1hcmdpbjtcclxuICB6LWluZGV4OiA0O1xyXG4gIGJvcmRlci1yYWRpdXM6IDA7XHJcbn1cclxuXHJcbi5tZW51LWJ1dHRvbiA6Om5nLWRlZXAgZGl2Lm1hdC1idXR0b24tcmlwcGxlLXJvdW5kIHtcclxuICBib3JkZXItcmFkaXVzOiAwO1xyXG59XHJcblxyXG4vKioqIE1hcCBicm93c2VyICoqKi9cclxuaWdvLW1hcC1icm93c2VyIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbmlnby1tYXAtYnJvd3NlciA6Om5nLWRlZXAgLm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50IHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbGVmdDogMDtcclxuICBib3R0b206IDA7XHJcbn1cclxuXHJcbmlnby1tYXAtYnJvd3Nlci5zaWRlbmF2LW9mZnNldCA6Om5nLWRlZXAgLm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50IHtcclxuICBsZWZ0OiAzODBweDtcclxuICB3aWR0aDogY2FsYygxMDAlIC0gMzgwcHgpO1xyXG59XHJcblxyXG5pZ28tbWFwLWJyb3dzZXIuZXhwYW5zaW9uLW9mZnNldCA6Om5nLWRlZXAgLm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50IHtcclxuICBib3R0b206IDI3OXB4O1xyXG59XHJcblxyXG4vKioqIFNlYXJjaCBiYXIgKioqL1xyXG5pZ28tc2VhcmNoLWJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogJGFwcC1iYWNrZ3JvdW5kLWNvbG9yO1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdDogJHNlYXJjaC1iYXItbGVmdDtcclxuICB0b3A6ICRpZ28tbWFyZ2luO1xyXG4gIHotaW5kZXg6IDQ7XHJcbiAgd2lkdGg6ICRzZWFyY2gtYmFyLXdpZHRoO1xyXG4gIGhlaWdodDogJGlnby1pY29uLXNpemU7XHJcbiAgbWFyZ2luOiAwICRpZ28tbWFyZ2luO1xyXG5cclxuICBAaW5jbHVkZSBtb2JpbGUge1xyXG4gICAgd2lkdGg6ICRzZWFyY2gtYmFyLXdpZHRoLW1vYmlsZTtcclxuICB9XHJcbn1cclxuXHJcbi8qKiogU2lkZW5hdiAqKiovXHJcbm1hdC1zaWRlbmF2LWNvbnRhaW5lciB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZmVmZWY7XHJcbiAgei1pbmRleDogNTtcclxuICBkaXNwbGF5OiB1bnNldDtcclxufVxyXG5cclxuLyoqKiBFeHBhbnNpb24gUGFuZWwgKioqL1xyXG5hcHAtZXhwYW5zaW9uLXBhbmVsIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgYm90dG9tOiAwO1xyXG4gIHotaW5kZXg6IDQ7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLyoqKiBUb2FzdCBQYW5lbCAqKiovXHJcbmFwcC10b2FzdC1wYW5lbCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC0zMDBweDtcclxuICB3aWR0aDogNjAwcHg7XHJcbiAgei1pbmRleDogNDtcclxuXHJcbiAgQGluY2x1ZGUgbW9iaWxlIHtcclxuICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAjeyRhcHAtZm9vdGVyLWhlaWdodH0pO1xyXG4gICAgbGVmdDogJGFwcC1mb290ZXItaGVpZ2h0O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDA7XHJcbiAgfVxyXG59XHJcblxyXG5hcHAtdG9hc3QtcGFuZWwuZXhwYW5zaW9uLXBhbmVsLWV4cGFuZGVkLFxyXG5hcHAtdG9hc3QtcGFuZWw6bm90KC5oYXMtZXhwYW5zaW9uLXBhbmVsKSxcclxuYXBwLXRvYXN0LXBhbmVsLmFwcC10b2FzdC1wYW5lbC1vcGVuZWQge1xyXG4gIEBpbmNsdWRlIG1vYmlsZSB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGxlZnQ6IDA7XHJcbiAgfVxyXG59XHJcblxyXG5pZ28tZ2VvbG9jYXRlLWJ1dHRvbiB7XHJcbiAgbWFyZ2luLWJvdHRvbTogOTBweDtcclxufVxyXG4iLCIkaWdvLW1hcmdpbjogNXB4O1xyXG4kaWdvLXBhZGRpbmc6IDVweDtcclxuJGlnby1pY29uLXNpemU6IDQwcHg7XHJcbiIsIkBpbXBvcnQgJ35AaWdvMi9jb3JlL3N0eWxlL3BhcnRpYWwvbWVkaWEnO1xyXG5AaW1wb3J0ICd2YXJpYWJsZXMnO1xyXG5cclxuJGFwcC1mb290ZXItaGVpZ2h0OiA0OHB4O1xyXG4kYXBwLW1vYmlsZS1taW4tc3BhY2UtcmlnaHQ6IDQwcHg7XHJcblxyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0OiA0OHB4O1xyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtd2lkdGg6IDUycHg7XHJcbiRhcHAtZXhwYW5zaW9uLXBhbmVsLWhlaWdodDogMjgxcHg7XHJcbiRhcHAtZXhwYW5zaW9uLXBhbmVsLWhlYWRlci1oZWlnaHQ6ICRhcHAtZXhwYW5zaW9uLXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ7XHJcblxyXG4kYXBwLXRvYXN0LXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ6IDQ4cHg7XHJcbiRhcHAtdG9hc3QtcGFuZWwtbWF4LWhlaWdodDogMjgxcHg7XHJcbiRhcHAtdG9hc3QtcGFuZWwtd2lkdGg6IDMwJTtcclxuXHJcbiRhcHAtc2lkZW5hdi1tYXJnaW4tdG9wOiA1MHB4O1xyXG4kYXBwLXNpZGVuYXYtaGVpZ2h0OiBjYWxjKDEwMCUgLSAjeyRhcHAtc2lkZW5hdi1tYXJnaW4tdG9wfSk7XHJcbiRhcHAtc2lkZW5hdi13aWR0aDogNDAwcHg7XHJcbiRhcHAtc2lkZW5hdi13aWR0aC1tb2JpbGU6IGNhbGMoMTAwJSAtICN7JGFwcC1tb2JpbGUtbWluLXNwYWNlLXJpZ2h0fSAtICN7JGlnby1tYXJnaW59KTtcclxuXHJcbiRpZ28tdG9hc3QtcGFuZWwtY29sbGFwc2VkLWhlaWdodDogNDhweDtcclxuJGlnby10b2FzdC1wYW5lbC1tYXgtaGVpZ2h0OiAzMDBweDtcclxuJGlnby10b2FzdC1wYW5lbC13aWR0aDogMzAlO1xyXG5cclxuJHNlYXJjaC1iYXItbGVmdDogY2FsYygjeyRpZ28taWNvbi1zaXplfSArICN7JGlnby1tYXJnaW59KTtcclxuJHNlYXJjaC1iYXItd2lkdGg6IGNhbGMoI3skYXBwLXNpZGVuYXYtd2lkdGh9IC0gI3skc2VhcmNoLWJhci1sZWZ0fSAtICgyICogI3skaWdvLW1hcmdpbn0pKTtcclxuJHNlYXJjaC1iYXItd2lkdGgtbW9iaWxlOiBjYWxjKDEwMCUgLSAjeyRhcHAtbW9iaWxlLW1pbi1zcGFjZS1yaWdodH0gLSAjeyRzZWFyY2gtYmFyLWxlZnR9IC0gKDMgKiAjeyRpZ28tbWFyZ2lufSkpO1xyXG4iLCIkbW9iaWxlOiAnb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQ1MHB4KSwgb25seSBzY3JlZW4gYW5kIChtYXgtaGVpZ2h0OiA0NTBweCknO1xyXG4kdGFibGV0OiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDQ1MXB4KSBhbmQgKG1pbi1oZWlnaHQ6IDQ1MXB4KSBhbmQgKG1heC13aWR0aDogODAwcHgpJztcclxuJGRlc2t0b3A6ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogODAxcHgpJztcclxuXHJcbiRzbWFsbC1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogODAxcHgpIGFuZCAobWF4LXdpZHRoOiAxMjc5cHgpJztcclxuJG1lZGl1bS1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTI4MHB4KSBhbmQgKG1heC13aWR0aDogMTkxOXB4KSc7XHJcbiRsYXJnZS1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMHB4KSc7XHJcblxyXG5AbWl4aW4gbW9iaWxlIHtcclxuICBAbWVkaWEgI3skbW9iaWxlfSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiB0YWJsZXQge1xyXG4gIEBtZWRpYSAjeyR0YWJsZXR9IHtcclxuICAgIEBjb250ZW50O1xyXG4gIH1cclxufVxyXG5cclxuQG1peGluIGRlc2t0b3Age1xyXG4gIEBtZWRpYSAjeyRkZXNrdG9wfSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiBzbWFsbC1zY3JlZW4ge1xyXG4gICAgQG1lZGlhICN7JHNtYWxsLXNjcmVlbn0ge1xyXG4gICAgICBAY29udGVudDtcclxuICAgIH1cclxufVxyXG5cclxuQG1peGluIG1lZGl1bS1zY3JlZW4ge1xyXG4gIEBtZWRpYSAjeyRtZWRpdW0tc2NyZWVufSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiBsYXJnZS1zY3JlZW4ge1xyXG4gICAgQG1lZGlhICN7JGxhcmdlLXNjcmVlbn0ge1xyXG4gICAgICBAY29udGVudDtcclxuICAgIH1cclxufVxyXG4iXX0= */"

/***/ }),

/***/ "./src/app/components/feature-viewer/feature-viewer.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/components/feature-viewer/feature-viewer.component.ts ***!
  \***********************************************************************/
/*! exports provided: FeatureViewerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureViewerComponent", function() { return FeatureViewerComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/auth */ "./dist/igo-lib/auth/fesm5/igo2-auth.js");
/* harmony import */ var _igo2_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/context */ "./dist/igo-lib/context/fesm5/igo2-context.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../pages/portal/portal.animation */ "./src/app/pages/portal/portal.animation.ts");
/* harmony import */ var _services_map_image_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../services/map-image.service */ "./src/app/services/map-image.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var FeatureViewerComponent = /** @class */ (function () {
    function FeatureViewerComponent(mapImageService, route, configService, authService, mediaService, searchService, overlayService, mapService, layerService, dataSourceService, contextService, cdRef, capabilitiesService, messageService) {
        var _this = this;
        this.mapImageService = mapImageService;
        this.route = route;
        this.configService = configService;
        this.authService = authService;
        this.mediaService = mediaService;
        this.searchService = searchService;
        this.overlayService = overlayService;
        this.mapService = mapService;
        this.layerService = layerService;
        this.dataSourceService = dataSourceService;
        this.contextService = contextService;
        this.cdRef = cdRef;
        this.capabilitiesService = capabilitiesService;
        this.messageService = messageService;
        this.map = new _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoMap"]({
            controls: {
                scaleLine: true,
                attribution: {
                    collapsed: true
                }
            }
        });
        this.view = {
            center: [-73, 47.2],
            zoom: 15
        };
        /*  super(
            route,
            configService,
            authService,
            featureService,
            mediaService,
            toolService,
            searchService,
            overlayService,
            mapService,
            layerService,
            dataSourceService,
            contextService,
            cdRef,
            capabilitiesService,
            messageService);*/
        this.dataSourceService
            .createAsyncDataSource({
            type: 'osm'
        })
            .subscribe(function (dataSource) {
            _this.map.addLayer(_this.layerService.createLayer({
                title: 'OSM',
                source: dataSource
            }));
        });
    }
    FeatureViewerComponent.prototype.ngOnChanges = function (changes) {
        for (var propName in changes) {
            if (propName === 'feature') {
                if (this.feature !== undefined &&
                    this.feature !== null) {
                    this.addFeature(this.feature);
                }
            }
        }
    };
    FeatureViewerComponent.prototype.ngOnInit = function () {
        if (this.feature !== undefined && this.feature !== null) {
            //this.map = this.mapService.getMap();
            //this.updateMap();
            this.addFeature(this.feature);
        }
    };
    FeatureViewerComponent.prototype.updateMap = function () {
        var _this = this;
        // Sans cela la carte n'affichait pas
        setTimeout(function () {
            _this.map.ol.updateSize();
            _this.view.zoom = 30;
            //this.mapService.getMap().ol.updateSize();
        }, 600);
    };
    FeatureViewerComponent.prototype.addFeature = function (feature) {
        var _this = this;
        setTimeout(function () {
            //this.featureService.setFeatures([feature]);
            _this.overlayService.clear();
            _this.overlayService.setFeatures([feature], _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["OverlayAction"].ZoomIfOutMapExtent);
            _this.map.setView({ center: _this.feature.geometry.coordinates, zoom: _this.view.zoom });
            _this.mapService.getMap().setView({ center: _this.feature.geometry.coordinates, zoom: _this.view.zoom });
            _this.mapImageService.setMap(_this.map);
            _this.updateMap();
        }, 1000);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], FeatureViewerComponent.prototype, "feature", void 0);
    FeatureViewerComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-feature-viewer',
            template: __webpack_require__(/*! ./feature-viewer.component.html */ "./src/app/components/feature-viewer/feature-viewer.component.html"),
            animations: [Object(_pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__["controlSlideX"])(), Object(_pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__["controlSlideY"])(), Object(_pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__["mapSlideX"])(), Object(_pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__["mapSlideY"])()],
            styles: [__webpack_require__(/*! ./feature-viewer.component.scss */ "./src/app/components/feature-viewer/feature-viewer.component.scss")]
        }),
        __metadata("design:paramtypes", [_services_map_image_service__WEBPACK_IMPORTED_MODULE_7__["MapImageService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["ConfigService"],
            _igo2_auth__WEBPACK_IMPORTED_MODULE_3__["AuthService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["MediaService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["SearchService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["OverlayService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["MapService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["LayerService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["DataSourceService"],
            _igo2_context__WEBPACK_IMPORTED_MODULE_4__["ContextService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["CapabilitiesService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["MessageService"]])
    ], FeatureViewerComponent);
    return FeatureViewerComponent;
}());



/***/ }),

/***/ "./src/app/components/feature-viewer/feature-viewer.module.ts":
/*!********************************************************************!*\
  !*** ./src/app/components/feature-viewer/feature-viewer.module.ts ***!
  \********************************************************************/
/*! exports provided: FeatureViewerModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureViewerModule", function() { return FeatureViewerModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _igo2_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @igo2/context */ "./dist/igo-lib/context/fesm5/igo2-context.js");
/* harmony import */ var _feature_viewer_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./feature-viewer.component */ "./src/app/components/feature-viewer/feature-viewer.component.ts");
/* harmony import */ var _pages_portal_map_overlay_map_overlay_module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../pages/portal/map-overlay/map-overlay.module */ "./src/app/pages/portal/map-overlay/map-overlay.module.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};









var FeatureViewerModule = /** @class */ (function () {
    function FeatureViewerModule() {
    }
    FeatureViewerModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatTooltipModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatButtonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSidenavModule"],
                _igo2_core__WEBPACK_IMPORTED_MODULE_3__["IgoCoreModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoPanelModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoBackdropModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoFlexibleModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoGeoModule"],
                _igo2_context__WEBPACK_IMPORTED_MODULE_6__["IgoContextModule"],
                _pages_portal_map_overlay_map_overlay_module__WEBPACK_IMPORTED_MODULE_8__["MapOverlayModule"]
            ],
            exports: [_feature_viewer_component__WEBPACK_IMPORTED_MODULE_7__["FeatureViewerComponent"]],
            declarations: [_feature_viewer_component__WEBPACK_IMPORTED_MODULE_7__["FeatureViewerComponent"]],
            entryComponents: [_feature_viewer_component__WEBPACK_IMPORTED_MODULE_7__["FeatureViewerComponent"]]
        })
    ], FeatureViewerModule);
    return FeatureViewerModule;
}());



/***/ }),

/***/ "./src/app/components/zone-selection/zone-selection.component.html":
/*!*************************************************************************!*\
  !*** ./src/app/components/zone-selection/zone-selection.component.html ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!--<mat-toolbar class=\"md-padding\">\r\n  <div class=\"md-toolbar-tools\">\r\n    <h3 flex>\r\n      Sélectionner la zone de recherche\r\n    </h3>\r\n  </div>\r\n</mat-toolbar> -->\r\n\r\n\r\n<igo-backdrop [shown]=\"backdropShown\" (click)=\"onBackdropClick()\">\r\n</igo-backdrop>\r\n\r\n<button mat-icon-button id=\"menu-button\" class=\"menu-button\" color=\"primary\" tooltip-position=\"below\"\r\n  matTooltipShowDelay=\"500\" [matTooltip]=\"(sidenavOpened ? 'menu.close' : 'menu.open') | translate\" (click)=\"onToggleSidenavClick()\">\r\n  <mat-icon svgIcon=\"menu\">\r\n  </mat-icon>\r\n</button>\r\n\r\n<igo-search-bar [term]=\"searchBarTerm\" [minLength]=\"minSearchTermLength\" (change)=\"onSearchTermChange($event)\" (search)=\"onSearch($event)\">\r\n</igo-search-bar>\r\n\r\n<app-sidenav [map]=\"map\" [(opened)]=\"sidenavOpened\">\r\n</app-sidenav>\r\n\r\n<igo-map-browser #mapBrowser igoQuery [waitForAllQueries]=\"true\" igoMapContext igoLayerContext igoDropGeoFile (query)=\"onMapQuery($event)\"\r\n  [map]=\"map\" [igoContextMenu]=actionbarMenu (menuPosition)=\"onContextMenuOpen($event)\" [ngClass]=\"{'igo-attribution-offset': map.getBaseLayers().length > 1}\"\r\n  [@mapStateX]=\"sidenavOpened ? 'right' : 'left'\" (@mapStateX.start)=\"removeMapBrowserClass($event)\" (@mapStateX.done)=\"updateMapBrowserClass($event)\"\r\n  [@mapStateY]=\"expansionPanelExpanded ? 'up' : 'down'\" (@mapStateY.start)=\"removeMapBrowserClass($event)\"\r\n  (@mapStateY.done)=\"updateMapBrowserClass($event)\">\r\n\r\n  <igo-zoom-button [map]=\"map\" color=\"primary\" [@controlsOffsetY]=\"expansionPanelExpanded\">\r\n  </igo-zoom-button>\r\n  <igo-geolocate-button [map]=\"map\" color=\"primary\" [@controlsOffsetY]=\"expansionPanelExpanded\">\r\n  </igo-geolocate-button>\r\n  <igo-rotation-button [map]=\"map\" color=\"primary\"></igo-rotation-button>\r\n  <igo-user-button [map]=\"map\" color=\"primary\" [@controlsOffsetY]=\"expansionPanelExpanded\">\r\n  </igo-user-button>\r\n  <igo-baselayers-switcher [map]=\"map\" [@baselayersStateY]=\"expansionPanelExpanded ? 'up' : 'down'\" [@baselayersStateX]=\"(mediaService.media$ | async) !== 'mobile' && sidenavOpened ? 'right' : 'left'\">\r\n  </igo-baselayers-switcher>\r\n</igo-map-browser>\r\n\r\n\r\n\r\n<app-expansion-panel *ngIf=\"hasExpansionPanel\" [(expanded)]=\"expansionPanelExpanded\" [@expansionPanelSize]=\"sidenavOpened ? 'reduced' : 'full'\">\r\n\r\n  <ng-container expansionPanelHeader>\r\n    <!-- <igo-workspace-selector igoWorkspaceSelector [store]=\"workspaceStore\" [map]=\"map\"></igo-workspace-selector> -->\r\n    <!-- <igo-actionbar\r\n  *ngIf=\"workspace\"\r\n  [store]=\"workspace.actionStore\"\r\n  [horizontal]=\"true\"\r\n  [xPosition]=\"'after'\"\r\n  [yPosition]=\"'above'\"\r\n  [withToggleButton]=\"true\"\r\n  [withTitle]=\"actionbarWithTitle\"\r\n  [mode]=\"actionbarMode\">\r\n</igo-actionbar> \r\n</ng-container>\r\n\r\n<igo-entity-table [store]=\"tableStore\" [template]=\"tableTemplate\">\r\n</igo-entity-table>\r\n</app-expansion-panel>\r\n\r\n<app-toast-panel [store]=\"queryStore\" [@toastPanelOffsetX]=\"sidenavOpened\" [@toastPanelOffsetY]=\"expansionPanelExpanded\"\r\n  (resultSelect)=\"addFeatureToMap($event)\">\r\n</app-toast-panel>\r\n\r\n<ng-template #actionbarMenu>\r\n  <igo-actionbar [store]=\"contextMenuStore\" [withIcon]=\"false\" [horizontal]=\"true\" mode=\"context\">\r\n  </igo-actionbar>\r\n</ng-template> \r\n\r\n\r\n<!--\r\n<mat-toolbar>\r\n  <button class=\"footer-button\" id='btmFooter' mat-stroked-button color=\"primary\">Annuler</button>\r\n  <button class=\"footer-button \" id='btmFooter' mat-stroked-button color=\"primary\">Sélectionner</button>\r\n</mat-toolbar> -->\r\n\r\n\r\n\r\n\r\n    <!--\r\n<ion-footer>\r\n  <ion-grid>\r\n    <ion-row>\r\n      <ion-col col-6>\r\n        <ion-button fill=\"outline\" expand=\"block\" color=\"primary\" (click)=\"close()\">Annuler</ion-button>\r\n      </ion-col>\r\n      <ion-col col-6>\r\n        <ion-button fill=\"outline\" expand=\"block\" color=\"primary\" (click)=\"selectZone()\">Sélectionner</ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</ion-footer> -->"

/***/ }),

/***/ "./src/app/components/zone-selection/zone-selection.component.scss":
/*!*************************************************************************!*\
  !*** ./src/app/components/zone-selection/zone-selection.component.scss ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/*** Generic ***/\n/*** Generic ***/\n/*** Main ***/\n:host {\n  width: 100%;\n  height: 100%;\n  display: block; }\n/*** Menu button ***/\n.menu-button {\n  background-color: white;\n  position: absolute;\n  left: 5px;\n  top: 5px;\n  z-index: 4;\n  border-radius: 0; }\n.menu-button ::ng-deep div.mat-button-ripple-round {\n  border-radius: 0; }\n/*** Map browser ***/\nigo-map-browser {\n  width: 100%;\n  height: 100%; }\nigo-map-browser ::ng-deep .ol-overlaycontainer-stopevent {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  bottom: 0; }\nigo-map-browser.sidenav-offset ::ng-deep .ol-overlaycontainer-stopevent {\n  left: 380px;\n  width: calc(100% - 380px); }\nigo-map-browser.expansion-offset ::ng-deep .ol-overlaycontainer-stopevent {\n  bottom: 279px; }\n/*** Search bar ***/\nigo-search-bar {\n  background-color: white;\n  font-size: 16px;\n  position: absolute;\n  left: calc(40px + 5px);\n  top: 5px;\n  z-index: 4;\n  width: calc(400px - calc(40px + 5px) - (2 * 5px));\n  height: 40px;\n  margin: 0 5px; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    igo-search-bar {\n      width: calc(100% - 40px - calc(40px + 5px) - (3 * 5px)); } }\n/*** Sidenav ***/\nmat-sidenav-container {\n  height: 100%;\n  width: 100%;\n  background-color: #efefef;\n  z-index: 5;\n  display: unset; }\n/*** Expansion Panel ***/\napp-expansion-panel {\n  position: absolute;\n  bottom: 0;\n  z-index: 4;\n  overflow: hidden; }\n/*** Toast Panel ***/\napp-toast-panel {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  margin-left: -300px;\n  width: 600px;\n  z-index: 4; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    app-toast-panel {\n      width: calc(100% - 48px);\n      left: 48px;\n      margin-left: 0; } }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n  app-toast-panel.expansion-panel-expanded,\n  app-toast-panel:not(.has-expansion-panel),\n  app-toast-panel.app-toast-panel-opened {\n    width: 100%;\n    left: 0; } }\nigo-geolocate-button {\n  margin-bottom: 90px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy96b25lLXNlbGVjdGlvbi9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL3NyY1xcc3R5bGVcXHBhcnRpYWxcXHZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3pvbmUtc2VsZWN0aW9uL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxhcHBcXGNvbXBvbmVudHNcXHpvbmUtc2VsZWN0aW9uXFx6b25lLXNlbGVjdGlvbi5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50cy96b25lLXNlbGVjdGlvbi9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxjb3JlLnZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3pvbmUtc2VsZWN0aW9uL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxhcHBcXHBhZ2VzXFxwb3J0YWxcXHBvcnRhbC52YXJpYWJsZXMuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50cy96b25lLXNlbGVjdGlvbi9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxtZWRpYS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLGdCQUFBO0FBQUEsZ0JBQUE7QUNLQSxhQUFBO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGNBQWMsRUFBQTtBQUdoQixvQkFBQTtBQUVBO0VBQ0UsdUJEZHVDO0VDZXZDLGtCQUFrQjtFQUNsQixTQ25CYztFRG9CZCxRQ3BCYztFRHFCZCxVQUFVO0VBQ1YsZ0JBQWdCLEVBQUE7QUFHbEI7RUFDRSxnQkFBZ0IsRUFBQTtBQUdsQixvQkFBQTtBQUNBO0VBQ0UsV0FBVztFQUNYLFlBQVksRUFBQTtBQUdkO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxPQUFPO0VBQ1AsU0FBUyxFQUFBO0FBR1g7RUFDRSxXQUFXO0VBQ1gseUJBQXlCLEVBQUE7QUFHM0I7RUFDRSxhQUFhLEVBQUE7QUFHZixtQkFBQTtBQUNBO0VBQ0UsdUJEbER1QztFQ21EdkMsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixzQkVoQ3dEO0VGaUN4RCxRQ3pEYztFRDBEZCxVQUFVO0VBQ1YsaURFbEN5RjtFRm1DekYsWUMxRGtCO0VEMkRsQixhQzdEYyxFQUFBO0FFU2Q7SUgyQ0Y7TUFZSSx1REV0QzhHLEVBQUEsRUZ3Q2pIO0FBRUQsZ0JBQUE7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gseUJBQXlCO0VBQ3pCLFVBQVU7RUFDVixjQUFjLEVBQUE7QUFHaEIsd0JBQUE7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsVUFBVTtFQUNWLGdCQUFnQixFQUFBO0FBR2xCLG9CQUFBO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFNBQVM7RUFDVCxtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLFVBQVUsRUFBQTtBR25GVjtJSDZFRjtNQVNJLHdCQUF5QztNQUN6QyxVRTdGb0I7TUY4RnBCLGNBQWMsRUFBQSxFQUVqQjtBRzFGQztFSDRGRjs7O0lBSUksV0FBVztJQUNYLE9BQU8sRUFBQSxFQUVWO0FBRUQ7RUFDRSxtQkFBbUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvem9uZS1zZWxlY3Rpb24vem9uZS1zZWxlY3Rpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICd+QGlnbzIvY29yZS9zdHlsZS9wYXJ0aWFsL2NvcmUudmFyaWFibGVzJztcclxuXHJcbi8qKiogR2VuZXJpYyAqKiovXHJcbiRhcHAtYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpO1xyXG4kYXBwLWljb24tYnV0dG9uLXdpZHRoOiA0MHB4O1xyXG5cclxuJGFwcC1ib3JkZXItd2lkdGg6IDFweDtcclxuJGFwcC1ib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4kYXBwLWJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAuMik7XHJcblxyXG4lYm9yZGVyLWJveCB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG4lYm9yZGVyZWQtdG9wIHtcclxuICBib3JkZXItdG9wOiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJvcmRlcmVkLWJvdHRvbSB7XHJcbiAgYm9yZGVyLWJvdHRvbTogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1sZWZ0IHtcclxuICBib3JkZXItbGVmdDogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1yaWdodCB7XHJcbiAgYm9yZGVyLXJpZ2h0OiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJveC1zaGFkb3dlZCB7XHJcbiAgLW1vei1ib3gtc2hhZG93OiAwcHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC1vLWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIGJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG59XHJcblxyXG4lYm94LXNoYWRvd2VkLWJvdHRvbS1yaWdodCB7XHJcbiAgLW1vei1ib3gtc2hhZG93OiAycHggMnB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtd2Via2l0LWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC1vLWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIGJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG59XHJcbiIsIlxyXG5AaW1wb3J0ICd+QGlnbzIvY29yZS9zdHlsZS9wYXJ0aWFsL21lZGlhJztcclxuQGltcG9ydCAnLi4vLi4vLi4vc3R5bGUvcGFydGlhbC92YXJpYWJsZXMnO1xyXG5AaW1wb3J0ICcuLi8uLi9wYWdlcy9wb3J0YWwvcG9ydGFsLnZhcmlhYmxlcy5zY3NzJztcclxuXHJcblxyXG5cclxuLyoqKiBNYWluICoqKi9cclxuOmhvc3Qge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5cclxuLyoqKiBNZW51IGJ1dHRvbiAqKiovXHJcblxyXG4ubWVudS1idXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICRhcHAtYmFja2dyb3VuZC1jb2xvcjtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdDogJGlnby1tYXJnaW47XHJcbiAgdG9wOiAkaWdvLW1hcmdpbjtcclxuICB6LWluZGV4OiA0O1xyXG4gIGJvcmRlci1yYWRpdXM6IDA7XHJcbn1cclxuXHJcbi5tZW51LWJ1dHRvbiA6Om5nLWRlZXAgZGl2Lm1hdC1idXR0b24tcmlwcGxlLXJvdW5kIHtcclxuICBib3JkZXItcmFkaXVzOiAwO1xyXG59XHJcblxyXG4vKioqIE1hcCBicm93c2VyICoqKi9cclxuaWdvLW1hcC1icm93c2VyIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbmlnby1tYXAtYnJvd3NlciA6Om5nLWRlZXAgLm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50IHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbGVmdDogMDtcclxuICBib3R0b206IDA7XHJcbn1cclxuXHJcbmlnby1tYXAtYnJvd3Nlci5zaWRlbmF2LW9mZnNldCA6Om5nLWRlZXAgLm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50IHtcclxuICBsZWZ0OiAzODBweDtcclxuICB3aWR0aDogY2FsYygxMDAlIC0gMzgwcHgpO1xyXG59XHJcblxyXG5pZ28tbWFwLWJyb3dzZXIuZXhwYW5zaW9uLW9mZnNldCA6Om5nLWRlZXAgLm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50IHtcclxuICBib3R0b206IDI3OXB4O1xyXG59XHJcblxyXG4vKioqIFNlYXJjaCBiYXIgKioqL1xyXG5pZ28tc2VhcmNoLWJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogJGFwcC1iYWNrZ3JvdW5kLWNvbG9yO1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdDogJHNlYXJjaC1iYXItbGVmdDtcclxuICB0b3A6ICRpZ28tbWFyZ2luO1xyXG4gIHotaW5kZXg6IDQ7XHJcbiAgd2lkdGg6ICRzZWFyY2gtYmFyLXdpZHRoO1xyXG4gIGhlaWdodDogJGlnby1pY29uLXNpemU7XHJcbiAgbWFyZ2luOiAwICRpZ28tbWFyZ2luO1xyXG5cclxuICBAaW5jbHVkZSBtb2JpbGUge1xyXG4gICAgd2lkdGg6ICRzZWFyY2gtYmFyLXdpZHRoLW1vYmlsZTtcclxuICB9XHJcbn1cclxuXHJcbi8qKiogU2lkZW5hdiAqKiovXHJcbm1hdC1zaWRlbmF2LWNvbnRhaW5lciB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZmVmZWY7XHJcbiAgei1pbmRleDogNTtcclxuICBkaXNwbGF5OiB1bnNldDtcclxufVxyXG5cclxuLyoqKiBFeHBhbnNpb24gUGFuZWwgKioqL1xyXG5hcHAtZXhwYW5zaW9uLXBhbmVsIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgYm90dG9tOiAwO1xyXG4gIHotaW5kZXg6IDQ7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLyoqKiBUb2FzdCBQYW5lbCAqKiovXHJcbmFwcC10b2FzdC1wYW5lbCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC0zMDBweDtcclxuICB3aWR0aDogNjAwcHg7XHJcbiAgei1pbmRleDogNDtcclxuXHJcbiAgQGluY2x1ZGUgbW9iaWxlIHtcclxuICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAjeyRhcHAtZm9vdGVyLWhlaWdodH0pO1xyXG4gICAgbGVmdDogJGFwcC1mb290ZXItaGVpZ2h0O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDA7XHJcbiAgfVxyXG59XHJcblxyXG5hcHAtdG9hc3QtcGFuZWwuZXhwYW5zaW9uLXBhbmVsLWV4cGFuZGVkLFxyXG5hcHAtdG9hc3QtcGFuZWw6bm90KC5oYXMtZXhwYW5zaW9uLXBhbmVsKSxcclxuYXBwLXRvYXN0LXBhbmVsLmFwcC10b2FzdC1wYW5lbC1vcGVuZWQge1xyXG4gIEBpbmNsdWRlIG1vYmlsZSB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGxlZnQ6IDA7XHJcbiAgfVxyXG59XHJcblxyXG5pZ28tZ2VvbG9jYXRlLWJ1dHRvbiB7XHJcbiAgbWFyZ2luLWJvdHRvbTogOTBweDtcclxufVxyXG4iLCIkaWdvLW1hcmdpbjogNXB4O1xyXG4kaWdvLXBhZGRpbmc6IDVweDtcclxuJGlnby1pY29uLXNpemU6IDQwcHg7XHJcbiIsIkBpbXBvcnQgJ35AaWdvMi9jb3JlL3N0eWxlL3BhcnRpYWwvbWVkaWEnO1xyXG5AaW1wb3J0ICd2YXJpYWJsZXMnO1xyXG5cclxuJGFwcC1mb290ZXItaGVpZ2h0OiA0OHB4O1xyXG4kYXBwLW1vYmlsZS1taW4tc3BhY2UtcmlnaHQ6IDQwcHg7XHJcblxyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0OiA0OHB4O1xyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtd2lkdGg6IDUycHg7XHJcbiRhcHAtZXhwYW5zaW9uLXBhbmVsLWhlaWdodDogMjgxcHg7XHJcbiRhcHAtZXhwYW5zaW9uLXBhbmVsLWhlYWRlci1oZWlnaHQ6ICRhcHAtZXhwYW5zaW9uLXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ7XHJcblxyXG4kYXBwLXRvYXN0LXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ6IDQ4cHg7XHJcbiRhcHAtdG9hc3QtcGFuZWwtbWF4LWhlaWdodDogMjgxcHg7XHJcbiRhcHAtdG9hc3QtcGFuZWwtd2lkdGg6IDMwJTtcclxuXHJcbiRhcHAtc2lkZW5hdi1tYXJnaW4tdG9wOiA1MHB4O1xyXG4kYXBwLXNpZGVuYXYtaGVpZ2h0OiBjYWxjKDEwMCUgLSAjeyRhcHAtc2lkZW5hdi1tYXJnaW4tdG9wfSk7XHJcbiRhcHAtc2lkZW5hdi13aWR0aDogNDAwcHg7XHJcbiRhcHAtc2lkZW5hdi13aWR0aC1tb2JpbGU6IGNhbGMoMTAwJSAtICN7JGFwcC1tb2JpbGUtbWluLXNwYWNlLXJpZ2h0fSAtICN7JGlnby1tYXJnaW59KTtcclxuXHJcbiRpZ28tdG9hc3QtcGFuZWwtY29sbGFwc2VkLWhlaWdodDogNDhweDtcclxuJGlnby10b2FzdC1wYW5lbC1tYXgtaGVpZ2h0OiAzMDBweDtcclxuJGlnby10b2FzdC1wYW5lbC13aWR0aDogMzAlO1xyXG5cclxuJHNlYXJjaC1iYXItbGVmdDogY2FsYygjeyRpZ28taWNvbi1zaXplfSArICN7JGlnby1tYXJnaW59KTtcclxuJHNlYXJjaC1iYXItd2lkdGg6IGNhbGMoI3skYXBwLXNpZGVuYXYtd2lkdGh9IC0gI3skc2VhcmNoLWJhci1sZWZ0fSAtICgyICogI3skaWdvLW1hcmdpbn0pKTtcclxuJHNlYXJjaC1iYXItd2lkdGgtbW9iaWxlOiBjYWxjKDEwMCUgLSAjeyRhcHAtbW9iaWxlLW1pbi1zcGFjZS1yaWdodH0gLSAjeyRzZWFyY2gtYmFyLWxlZnR9IC0gKDMgKiAjeyRpZ28tbWFyZ2lufSkpO1xyXG4iLCIkbW9iaWxlOiAnb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQ1MHB4KSwgb25seSBzY3JlZW4gYW5kIChtYXgtaGVpZ2h0OiA0NTBweCknO1xyXG4kdGFibGV0OiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDQ1MXB4KSBhbmQgKG1pbi1oZWlnaHQ6IDQ1MXB4KSBhbmQgKG1heC13aWR0aDogODAwcHgpJztcclxuJGRlc2t0b3A6ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogODAxcHgpJztcclxuXHJcbiRzbWFsbC1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogODAxcHgpIGFuZCAobWF4LXdpZHRoOiAxMjc5cHgpJztcclxuJG1lZGl1bS1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTI4MHB4KSBhbmQgKG1heC13aWR0aDogMTkxOXB4KSc7XHJcbiRsYXJnZS1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMHB4KSc7XHJcblxyXG5AbWl4aW4gbW9iaWxlIHtcclxuICBAbWVkaWEgI3skbW9iaWxlfSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiB0YWJsZXQge1xyXG4gIEBtZWRpYSAjeyR0YWJsZXR9IHtcclxuICAgIEBjb250ZW50O1xyXG4gIH1cclxufVxyXG5cclxuQG1peGluIGRlc2t0b3Age1xyXG4gIEBtZWRpYSAjeyRkZXNrdG9wfSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiBzbWFsbC1zY3JlZW4ge1xyXG4gICAgQG1lZGlhICN7JHNtYWxsLXNjcmVlbn0ge1xyXG4gICAgICBAY29udGVudDtcclxuICAgIH1cclxufVxyXG5cclxuQG1peGluIG1lZGl1bS1zY3JlZW4ge1xyXG4gIEBtZWRpYSAjeyRtZWRpdW0tc2NyZWVufSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiBsYXJnZS1zY3JlZW4ge1xyXG4gICAgQG1lZGlhICN7JGxhcmdlLXNjcmVlbn0ge1xyXG4gICAgICBAY29udGVudDtcclxuICAgIH1cclxufVxyXG4iXX0= */"

/***/ }),

/***/ "./src/app/components/zone-selection/zone-selection.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/components/zone-selection/zone-selection.component.ts ***!
  \***********************************************************************/
/*! exports provided: ZoneSelectionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZoneSelectionComponent", function() { return ZoneSelectionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/auth */ "./dist/igo-lib/auth/fesm5/igo2-auth.js");
/* harmony import */ var _igo2_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/context */ "./dist/igo-lib/context/fesm5/igo2-context.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../pages/portal/portal.animation */ "./src/app/pages/portal/portal.animation.ts");
/* harmony import */ var _services_bbox_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../services/bbox.service */ "./src/app/services/bbox.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var ZoneSelectionComponent = /** @class */ (function () {
    function ZoneSelectionComponent(bboxService, route, configService, authService, mediaService, searchService, overlayService, mapService, layerService, dataSourceService, contextService, cdRef, capabilitiesService, messageService) {
        this.bboxService = bboxService;
        this.route = route;
        this.configService = configService;
        this.authService = authService;
        this.mediaService = mediaService;
        this.searchService = searchService;
        this.overlayService = overlayService;
        this.mapService = mapService;
        this.layerService = layerService;
        this.dataSourceService = dataSourceService;
        this.contextService = contextService;
        this.cdRef = cdRef;
        this.capabilitiesService = capabilitiesService;
        this.messageService = messageService;
    }
    ZoneSelectionComponent.prototype.updateMap = function () {
        var _this = this;
        // Sans cela la carte n'affichait pas
        setTimeout(function () {
            _this.mapService.getMap().ol.updateSize();
        }, 600);
    };
    ZoneSelectionComponent.prototype.close = function () {
        // this.modalController.dismiss();
    };
    ZoneSelectionComponent.prototype.selectZone = function () {
        this.bbox = this.mapService.getMap().ol.getView().calculateExtent(this.mapService.getMap().ol.getSize());
        this.bboxService.setBBOX(this.bbox);
        this.close();
    };
    ZoneSelectionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-zone-selection',
            template: __webpack_require__(/*! ./zone-selection.component.html */ "./src/app/components/zone-selection/zone-selection.component.html"),
            animations: [Object(_pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__["controlSlideX"])(), Object(_pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__["controlSlideY"])(), Object(_pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__["mapSlideX"])(), Object(_pages_portal_portal_animation__WEBPACK_IMPORTED_MODULE_6__["mapSlideY"])()],
            styles: [__webpack_require__(/*! ./zone-selection.component.scss */ "./src/app/components/zone-selection/zone-selection.component.scss")]
        }),
        __metadata("design:paramtypes", [_services_bbox_service__WEBPACK_IMPORTED_MODULE_7__["BboxService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["ConfigService"],
            _igo2_auth__WEBPACK_IMPORTED_MODULE_3__["AuthService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["MediaService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["SearchService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["OverlayService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["MapService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["LayerService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["DataSourceService"],
            _igo2_context__WEBPACK_IMPORTED_MODULE_4__["ContextService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["CapabilitiesService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["MessageService"]])
    ], ZoneSelectionComponent);
    return ZoneSelectionComponent;
}());



/***/ }),

/***/ "./src/app/components/zone-selection/zone-selection.module.ts":
/*!********************************************************************!*\
  !*** ./src/app/components/zone-selection/zone-selection.module.ts ***!
  \********************************************************************/
/*! exports provided: ZoneSelectionModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZoneSelectionModule", function() { return ZoneSelectionModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _igo2_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @igo2/context */ "./dist/igo-lib/context/fesm5/igo2-context.js");
/* harmony import */ var _igo2_integration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @igo2/integration */ "./dist/igo-lib/integration/fesm5/igo2-integration.js");
/* harmony import */ var _pages_portal_expansion_panel_expansion_panel_module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../pages/portal/expansion-panel/expansion-panel.module */ "./src/app/pages/portal/expansion-panel/expansion-panel.module.ts");
/* harmony import */ var _pages_portal_toast_panel_toast_panel_module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../pages/portal/toast-panel/toast-panel.module */ "./src/app/pages/portal/toast-panel/toast-panel.module.ts");
/* harmony import */ var _pages_portal_sidenav_sidenav_module__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../pages/portal/sidenav/sidenav.module */ "./src/app/pages/portal/sidenav/sidenav.module.ts");
/* harmony import */ var _zone_selection_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./zone-selection.component */ "./src/app/components/zone-selection/zone-selection.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};












var ZoneSelectionModule = /** @class */ (function () {
    function ZoneSelectionModule() {
    }
    ZoneSelectionModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatTooltipModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatButtonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSidenavModule"],
                _igo2_core__WEBPACK_IMPORTED_MODULE_3__["IgoCoreModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoFeatureModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoImportExportModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoMapModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoQueryModule"].forRoot(),
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoSearchModule"].forRoot(),
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoActionModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoWorkspaceModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoEntityModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoGeoWorkspaceModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoPanelModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoToolModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoContextMenuModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoBackdropModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoFlexibleModule"],
                _igo2_integration__WEBPACK_IMPORTED_MODULE_7__["IgoIntegrationModule"],
                _pages_portal_expansion_panel_expansion_panel_module__WEBPACK_IMPORTED_MODULE_8__["AppExpansionPanelModule"],
                _pages_portal_toast_panel_toast_panel_module__WEBPACK_IMPORTED_MODULE_9__["AppToastPanelModule"],
                _pages_portal_sidenav_sidenav_module__WEBPACK_IMPORTED_MODULE_10__["AppSidenavModule"],
                _igo2_context__WEBPACK_IMPORTED_MODULE_6__["IgoContextManagerModule"],
                _igo2_context__WEBPACK_IMPORTED_MODULE_6__["IgoContextMapButtonModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoEntityTableModule"]
            ],
            exports: [_zone_selection_component__WEBPACK_IMPORTED_MODULE_11__["ZoneSelectionComponent"]],
            declarations: [_zone_selection_component__WEBPACK_IMPORTED_MODULE_11__["ZoneSelectionComponent"]],
            entryComponents: [_zone_selection_component__WEBPACK_IMPORTED_MODULE_11__["ZoneSelectionComponent"]]
        })
    ], ZoneSelectionModule);
    return ZoneSelectionModule;
}());



/***/ }),

/***/ "./src/app/pages/portal/expansion-panel/expansion-panel-header.component.html":
/*!************************************************************************************!*\
  !*** ./src/app/pages/portal/expansion-panel/expansion-panel-header.component.html ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div>\r\n  <div class=\"app-expansion-panel-trigger-container\">\r\n    <button mat-icon-button (click)=\"onToggleClick()\">\r\n      <mat-icon *ngIf=\"!expanded\" svgIcon=\"launch\"></mat-icon>\r\n      <mat-icon *ngIf=\"expanded\" style=\"transform: rotate(180deg)\" svgIcon=\"launch\"></mat-icon>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"app-expansion-panel-content\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/pages/portal/expansion-panel/expansion-panel-header.component.scss":
/*!************************************************************************************!*\
  !*** ./src/app/pages/portal/expansion-panel/expansion-panel-header.component.scss ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/*** Generic ***/\n:host {\n  display: block;\n  height: 48px; }\n:host > div {\n  display: flex; }\n.app-expansion-panel-trigger-container,\n.app-expansion-panel-content {\n  display: inline-flex; }\nbutton {\n  margin: 4px 6px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcG9ydGFsL2V4cGFuc2lvbi1wYW5lbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL3NyY1xcc3R5bGVcXHBhcnRpYWxcXHZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9wYWdlcy9wb3J0YWwvZXhwYW5zaW9uLXBhbmVsL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxhcHBcXHBhZ2VzXFxwb3J0YWxcXGV4cGFuc2lvbi1wYW5lbFxcZXhwYW5zaW9uLXBhbmVsLWhlYWRlci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvcG9ydGFsL2V4cGFuc2lvbi1wYW5lbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL3NyY1xcYXBwXFxwYWdlc1xccG9ydGFsXFxwb3J0YWwudmFyaWFibGVzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsZ0JBQUE7QUNBQTtFQUNFLGNBQWM7RUFDZCxZQ0V5QyxFQUFBO0FEQzNDO0VBQ0UsYUFBYSxFQUFBO0FBR2Y7O0VBRUUsb0JBQW9CLEVBQUE7QUFHdEI7RUFDRSxlQUFlLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wb3J0YWwvZXhwYW5zaW9uLXBhbmVsL2V4cGFuc2lvbi1wYW5lbC1oZWFkZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICd+QGlnbzIvY29yZS9zdHlsZS9wYXJ0aWFsL2NvcmUudmFyaWFibGVzJztcclxuXHJcbi8qKiogR2VuZXJpYyAqKiovXHJcbiRhcHAtYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpO1xyXG4kYXBwLWljb24tYnV0dG9uLXdpZHRoOiA0MHB4O1xyXG5cclxuJGFwcC1ib3JkZXItd2lkdGg6IDFweDtcclxuJGFwcC1ib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4kYXBwLWJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAuMik7XHJcblxyXG4lYm9yZGVyLWJveCB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG4lYm9yZGVyZWQtdG9wIHtcclxuICBib3JkZXItdG9wOiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJvcmRlcmVkLWJvdHRvbSB7XHJcbiAgYm9yZGVyLWJvdHRvbTogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1sZWZ0IHtcclxuICBib3JkZXItbGVmdDogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1yaWdodCB7XHJcbiAgYm9yZGVyLXJpZ2h0OiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJveC1zaGFkb3dlZCB7XHJcbiAgLW1vei1ib3gtc2hhZG93OiAwcHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC1vLWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIGJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG59XHJcblxyXG4lYm94LXNoYWRvd2VkLWJvdHRvbS1yaWdodCB7XHJcbiAgLW1vei1ib3gtc2hhZG93OiAycHggMnB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtd2Via2l0LWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC1vLWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIGJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG59XHJcbiIsIkBpbXBvcnQgJy4uL3BvcnRhbC52YXJpYWJsZXMnO1xyXG5cclxuOmhvc3Qge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIGhlaWdodDogJGFwcC1leHBhbnNpb24tcGFuZWwtaGVhZGVyLWhlaWdodDtcclxufVxyXG5cclxuOmhvc3QgPiBkaXYge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbn1cclxuXHJcbi5hcHAtZXhwYW5zaW9uLXBhbmVsLXRyaWdnZXItY29udGFpbmVyLFxyXG4uYXBwLWV4cGFuc2lvbi1wYW5lbC1jb250ZW50IHtcclxuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcclxufVxyXG5cclxuYnV0dG9uIHtcclxuICBtYXJnaW46IDRweCA2cHg7XHJcbn1cclxuIiwiQGltcG9ydCAnfkBpZ28yL2NvcmUvc3R5bGUvcGFydGlhbC9tZWRpYSc7XHJcbkBpbXBvcnQgJ3ZhcmlhYmxlcyc7XHJcblxyXG4kYXBwLWZvb3Rlci1oZWlnaHQ6IDQ4cHg7XHJcbiRhcHAtbW9iaWxlLW1pbi1zcGFjZS1yaWdodDogNDBweDtcclxuXHJcbiRhcHAtZXhwYW5zaW9uLXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ6IDQ4cHg7XHJcbiRhcHAtZXhwYW5zaW9uLXBhbmVsLWNvbGxhcHNlZC13aWR0aDogNTJweDtcclxuJGFwcC1leHBhbnNpb24tcGFuZWwtaGVpZ2h0OiAyODFweDtcclxuJGFwcC1leHBhbnNpb24tcGFuZWwtaGVhZGVyLWhlaWdodDogJGFwcC1leHBhbnNpb24tcGFuZWwtY29sbGFwc2VkLWhlaWdodDtcclxuXHJcbiRhcHAtdG9hc3QtcGFuZWwtY29sbGFwc2VkLWhlaWdodDogNDhweDtcclxuJGFwcC10b2FzdC1wYW5lbC1tYXgtaGVpZ2h0OiAyODFweDtcclxuJGFwcC10b2FzdC1wYW5lbC13aWR0aDogMzAlO1xyXG5cclxuJGFwcC1zaWRlbmF2LW1hcmdpbi10b3A6IDUwcHg7XHJcbiRhcHAtc2lkZW5hdi1oZWlnaHQ6IGNhbGMoMTAwJSAtICN7JGFwcC1zaWRlbmF2LW1hcmdpbi10b3B9KTtcclxuJGFwcC1zaWRlbmF2LXdpZHRoOiA0MDBweDtcclxuJGFwcC1zaWRlbmF2LXdpZHRoLW1vYmlsZTogY2FsYygxMDAlIC0gI3skYXBwLW1vYmlsZS1taW4tc3BhY2UtcmlnaHR9IC0gI3skaWdvLW1hcmdpbn0pO1xyXG5cclxuJGlnby10b2FzdC1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0OiA0OHB4O1xyXG4kaWdvLXRvYXN0LXBhbmVsLW1heC1oZWlnaHQ6IDMwMHB4O1xyXG4kaWdvLXRvYXN0LXBhbmVsLXdpZHRoOiAzMCU7XHJcblxyXG4kc2VhcmNoLWJhci1sZWZ0OiBjYWxjKCN7JGlnby1pY29uLXNpemV9ICsgI3skaWdvLW1hcmdpbn0pO1xyXG4kc2VhcmNoLWJhci13aWR0aDogY2FsYygjeyRhcHAtc2lkZW5hdi13aWR0aH0gLSAjeyRzZWFyY2gtYmFyLWxlZnR9IC0gKDIgKiAjeyRpZ28tbWFyZ2lufSkpO1xyXG4kc2VhcmNoLWJhci13aWR0aC1tb2JpbGU6IGNhbGMoMTAwJSAtICN7JGFwcC1tb2JpbGUtbWluLXNwYWNlLXJpZ2h0fSAtICN7JHNlYXJjaC1iYXItbGVmdH0gLSAoMyAqICN7JGlnby1tYXJnaW59KSk7XHJcbiJdfQ== */"

/***/ }),

/***/ "./src/app/pages/portal/expansion-panel/expansion-panel-header.component.ts":
/*!**********************************************************************************!*\
  !*** ./src/app/pages/portal/expansion-panel/expansion-panel-header.component.ts ***!
  \**********************************************************************************/
/*! exports provided: ExpansionPanelHeaderComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpansionPanelHeaderComponent", function() { return ExpansionPanelHeaderComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var ExpansionPanelHeaderComponent = /** @class */ (function () {
    function ExpansionPanelHeaderComponent() {
        this.expandedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    Object.defineProperty(ExpansionPanelHeaderComponent.prototype, "expanded", {
        get: function () {
            return this._expanded;
        },
        set: function (value) {
            if (value === this._expanded) {
                return;
            }
            this._expanded = value;
            this.expandedChange.emit(this._expanded);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ExpansionPanelHeaderComponent.prototype, "hasExpandedClass", {
        get: function () {
            return this.expanded;
        },
        enumerable: true,
        configurable: true
    });
    ExpansionPanelHeaderComponent.prototype.onToggleClick = function () {
        this.expanded = !this.expanded;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], ExpansionPanelHeaderComponent.prototype, "expanded", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ExpansionPanelHeaderComponent.prototype, "expandedChange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"])('class.app-expansion-panel-header-expanded'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], ExpansionPanelHeaderComponent.prototype, "hasExpandedClass", null);
    ExpansionPanelHeaderComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-expansion-panel-header',
            template: __webpack_require__(/*! ./expansion-panel-header.component.html */ "./src/app/pages/portal/expansion-panel/expansion-panel-header.component.html"),
            changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            styles: [__webpack_require__(/*! ./expansion-panel-header.component.scss */ "./src/app/pages/portal/expansion-panel/expansion-panel-header.component.scss")]
        }),
        __metadata("design:paramtypes", [])
    ], ExpansionPanelHeaderComponent);
    return ExpansionPanelHeaderComponent;
}());



/***/ }),

/***/ "./src/app/pages/portal/expansion-panel/expansion-panel.animations.ts":
/*!****************************************************************************!*\
  !*** ./src/app/pages/portal/expansion-panel/expansion-panel.animations.ts ***!
  \****************************************************************************/
/*! exports provided: showContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showContent", function() { return showContent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "./node_modules/@angular/animations/fesm5/animations.js");

function showContent(duration, delay, easing) {
    if (duration === void 0) { duration = '150ms'; }
    if (delay === void 0) { delay = '300ms'; }
    if (easing === void 0) { easing = 'ease-in-out'; }
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('showContent', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('true', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            opacity: 1,
            display: 'block'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('false', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            opacity: 0,
            display: 'none'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('false => true', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(duration + " " + delay + " " + easing)),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('true => false', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('0ms'))
    ]);
}


/***/ }),

/***/ "./src/app/pages/portal/expansion-panel/expansion-panel.component.html":
/*!*****************************************************************************!*\
  !*** ./src/app/pages/portal/expansion-panel/expansion-panel.component.html ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div>\r\n\r\n  <div class=\"app-expansion-panel-container\">\r\n    <app-expansion-panel-header [(expanded)]=\"expanded\">\r\n      <ng-content select=\"[expansionPanelHeader]\"></ng-content>\r\n    </app-expansion-panel-header>\r\n\r\n    <div\r\n      class=\"app-expansion-panel-content mat-elevation-z4\"\r\n      [@showContent]=\"expanded\">\r\n      <ng-content></ng-content>\r\n    </div>\r\n\r\n    <igo-backdrop\r\n      [shown]=\"backdropShown\"\r\n      (click)=\"onBackdropClick()\">\r\n    </igo-backdrop>\r\n  </div>\r\n\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/pages/portal/expansion-panel/expansion-panel.component.scss":
/*!*****************************************************************************!*\
  !*** ./src/app/pages/portal/expansion-panel/expansion-panel.component.scss ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/*** Generic ***/\n:host {\n  -o-box-shadow: 0px 0px 2px 0px #dddddd;\n  box-shadow: 0px 0px 2px 0px #dddddd; }\n:host {\n  display: block;\n  background-color: white;\n  height: 48px;\n  width: 52px;\n  transition: height 200ms cubic-bezier(0.4, 0, 0.2, 1), width 200ms cubic-bezier(0.4, 0, 0.2, 1); }\n.app-expansion-panel-container {\n  height: 100%;\n  width: 100%; }\n:host.app-expansion-panel-expanded {\n  height: 281px;\n  width: 100%; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    :host.app-expansion-panel-expanded.footer {\n      margin-bottom: 48px; } }\n:host > div {\n  height: 100%;\n  width: 100%; }\n.app-expansion-panel-content {\n  height: calc(100% - 48px);\n  overflow: auto;\n  padding: 5px; }\nigo-backdrop ::ng-deep > div {\n  z-index: initial !important; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcG9ydGFsL2V4cGFuc2lvbi1wYW5lbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL3NyY1xcc3R5bGVcXHBhcnRpYWxcXHZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9wYWdlcy9wb3J0YWwvZXhwYW5zaW9uLXBhbmVsL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxhcHBcXHBhZ2VzXFxwb3J0YWxcXGV4cGFuc2lvbi1wYW5lbFxcZXhwYW5zaW9uLXBhbmVsLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9wb3J0YWwvZXhwYW5zaW9uLXBhbmVsL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxhcHBcXHBhZ2VzXFxwb3J0YWxcXHBvcnRhbC52YXJpYWJsZXMuc2NzcyIsInNyYy9hcHAvcGFnZXMvcG9ydGFsL2V4cGFuc2lvbi1wYW5lbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxtZWRpYS5zY3NzIiwic3JjL2FwcC9wYWdlcy9wb3J0YWwvZXhwYW5zaW9uLXBhbmVsL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvZGlzdFxcaWdvLWxpYlxcY29yZVxcc3R5bGVcXHBhcnRpYWxcXGNvcmUudmFyaWFibGVzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsZ0JBQUE7QUNDQTtFRGdDRSxzQ0FBc0M7RUFDdEMsbUNBQW1DLEVBQUE7QUNqQ3JDO0VBR0UsY0FBYztFQUNkLHVCQUF1QjtFQUV2QixZQ0h5QztFREl6QyxXQ0h3QztFREt4QywrRkFFd0MsRUFBQTtBQUcxQztFQUNFLFlBQVk7RUFDWixXQUFXLEVBQUE7QUFHYjtFQUNFLGFDZmdDO0VEZ0JoQyxXQUFXLEVBQUE7QUVmWDtJRmFGO01BTU0sbUJBQW1CLEVBQUEsRUFDcEI7QUFJTDtFQUNFLFlBQVk7RUFDWixXQUFXLEVBQUE7QUFHYjtFQUNFLHlCQUEwRDtFQUMxRCxjQUFjO0VBQ2QsWUd4Q2UsRUFBQTtBSDJDakI7RUFDRSwyQkFBMkIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3BvcnRhbC9leHBhbnNpb24tcGFuZWwvZXhwYW5zaW9uLXBhbmVsLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnfkBpZ28yL2NvcmUvc3R5bGUvcGFydGlhbC9jb3JlLnZhcmlhYmxlcyc7XHJcblxyXG4vKioqIEdlbmVyaWMgKioqL1xyXG4kYXBwLWJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTtcclxuJGFwcC1pY29uLWJ1dHRvbi13aWR0aDogNDBweDtcclxuXHJcbiRhcHAtYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiRhcHAtYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuJGFwcC1ib3JkZXItY29sb3I6IHJnYmEoMCwgMCwgMCwgLjIpO1xyXG5cclxuJWJvcmRlci1ib3gge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtcclxufVxyXG5cclxuJWJvcmRlcmVkLXRvcCB7XHJcbiAgYm9yZGVyLXRvcDogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1ib3R0b20ge1xyXG4gIGJvcmRlci1ib3R0b206ICRhcHAtYm9yZGVyLXdpZHRoICRhcHAtYm9yZGVyLXN0eWxlICRhcHAtYm9yZGVyLWNvbG9yO1xyXG59XHJcblxyXG4lYm9yZGVyZWQtbGVmdCB7XHJcbiAgYm9yZGVyLWxlZnQ6ICRhcHAtYm9yZGVyLXdpZHRoICRhcHAtYm9yZGVyLXN0eWxlICRhcHAtYm9yZGVyLWNvbG9yO1xyXG59XHJcblxyXG4lYm9yZGVyZWQtcmlnaHQge1xyXG4gIGJvcmRlci1yaWdodDogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3gtc2hhZG93ZWQge1xyXG4gIC1tb3otYm94LXNoYWRvdzogMHB4IDBweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtby1ib3gtc2hhZG93OiAwcHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxuICBib3gtc2hhZG93OiAwcHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxufVxyXG5cclxuJWJveC1zaGFkb3dlZC1ib3R0b20tcmlnaHQge1xyXG4gIC1tb3otYm94LXNoYWRvdzogMnB4IDJweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiAycHggMnB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtby1ib3gtc2hhZG93OiAycHggMnB4IDJweCAwcHggI2RkZGRkZDtcclxuICBib3gtc2hhZG93OiAycHggMnB4IDJweCAwcHggI2RkZGRkZDtcclxufVxyXG4iLCJAaW1wb3J0ICcuLi9wb3J0YWwudmFyaWFibGVzJztcclxuXHJcblxyXG46aG9zdCB7XHJcbiAgQGV4dGVuZCAlYm94LXNoYWRvd2VkO1xyXG5cclxuICBkaXNwbGF5OiBibG9jaztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuXHJcbiAgaGVpZ2h0OiAkYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0O1xyXG4gIHdpZHRoOiAkYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtd2lkdGg7XHJcblxyXG4gIHRyYW5zaXRpb246XHJcbiAgICBoZWlnaHQgMjAwbXMgY3ViaWMtYmV6aWVyKC40LCAwLCAuMiwgMSksXHJcbiAgICB3aWR0aCAyMDBtcyBjdWJpYy1iZXppZXIoLjQsIDAsIC4yLCAxKTtcclxufVxyXG5cclxuLmFwcC1leHBhbnNpb24tcGFuZWwtY29udGFpbmVyIHtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbjpob3N0LmFwcC1leHBhbnNpb24tcGFuZWwtZXhwYW5kZWQge1xyXG4gIGhlaWdodDogJGFwcC1leHBhbnNpb24tcGFuZWwtaGVpZ2h0O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG5cclxuICBAaW5jbHVkZSBtb2JpbGUge1xyXG4gICAgJi5mb290ZXIge1xyXG4gICAgICBtYXJnaW4tYm90dG9tOiA0OHB4O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuOmhvc3QgPiBkaXYge1xyXG4gIGhlaWdodDogMTAwJTtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmFwcC1leHBhbnNpb24tcGFuZWwtY29udGVudCB7XHJcbiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAjeyRhcHAtZXhwYW5zaW9uLXBhbmVsLWhlYWRlci1oZWlnaHR9KTtcclxuICBvdmVyZmxvdzogYXV0bztcclxuICBwYWRkaW5nOiAkaWdvLXBhZGRpbmc7XHJcbn1cclxuXHJcbmlnby1iYWNrZHJvcCA6Om5nLWRlZXAgPiBkaXYge1xyXG4gIHotaW5kZXg6IGluaXRpYWwgIWltcG9ydGFudDtcclxufVxyXG4iLCJAaW1wb3J0ICd+QGlnbzIvY29yZS9zdHlsZS9wYXJ0aWFsL21lZGlhJztcclxuQGltcG9ydCAndmFyaWFibGVzJztcclxuXHJcbiRhcHAtZm9vdGVyLWhlaWdodDogNDhweDtcclxuJGFwcC1tb2JpbGUtbWluLXNwYWNlLXJpZ2h0OiA0MHB4O1xyXG5cclxuJGFwcC1leHBhbnNpb24tcGFuZWwtY29sbGFwc2VkLWhlaWdodDogNDhweDtcclxuJGFwcC1leHBhbnNpb24tcGFuZWwtY29sbGFwc2VkLXdpZHRoOiA1MnB4O1xyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1oZWlnaHQ6IDI4MXB4O1xyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1oZWFkZXItaGVpZ2h0OiAkYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0O1xyXG5cclxuJGFwcC10b2FzdC1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0OiA0OHB4O1xyXG4kYXBwLXRvYXN0LXBhbmVsLW1heC1oZWlnaHQ6IDI4MXB4O1xyXG4kYXBwLXRvYXN0LXBhbmVsLXdpZHRoOiAzMCU7XHJcblxyXG4kYXBwLXNpZGVuYXYtbWFyZ2luLXRvcDogNTBweDtcclxuJGFwcC1zaWRlbmF2LWhlaWdodDogY2FsYygxMDAlIC0gI3skYXBwLXNpZGVuYXYtbWFyZ2luLXRvcH0pO1xyXG4kYXBwLXNpZGVuYXYtd2lkdGg6IDQwMHB4O1xyXG4kYXBwLXNpZGVuYXYtd2lkdGgtbW9iaWxlOiBjYWxjKDEwMCUgLSAjeyRhcHAtbW9iaWxlLW1pbi1zcGFjZS1yaWdodH0gLSAjeyRpZ28tbWFyZ2lufSk7XHJcblxyXG4kaWdvLXRvYXN0LXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ6IDQ4cHg7XHJcbiRpZ28tdG9hc3QtcGFuZWwtbWF4LWhlaWdodDogMzAwcHg7XHJcbiRpZ28tdG9hc3QtcGFuZWwtd2lkdGg6IDMwJTtcclxuXHJcbiRzZWFyY2gtYmFyLWxlZnQ6IGNhbGMoI3skaWdvLWljb24tc2l6ZX0gKyAjeyRpZ28tbWFyZ2lufSk7XHJcbiRzZWFyY2gtYmFyLXdpZHRoOiBjYWxjKCN7JGFwcC1zaWRlbmF2LXdpZHRofSAtICN7JHNlYXJjaC1iYXItbGVmdH0gLSAoMiAqICN7JGlnby1tYXJnaW59KSk7XHJcbiRzZWFyY2gtYmFyLXdpZHRoLW1vYmlsZTogY2FsYygxMDAlIC0gI3skYXBwLW1vYmlsZS1taW4tc3BhY2UtcmlnaHR9IC0gI3skc2VhcmNoLWJhci1sZWZ0fSAtICgzICogI3skaWdvLW1hcmdpbn0pKTtcclxuIiwiJG1vYmlsZTogJ29ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0NTBweCksIG9ubHkgc2NyZWVuIGFuZCAobWF4LWhlaWdodDogNDUwcHgpJztcclxuJHRhYmxldDogJ29ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA0NTFweCkgYW5kIChtaW4taGVpZ2h0OiA0NTFweCkgYW5kIChtYXgtd2lkdGg6IDgwMHB4KSc7XHJcbiRkZXNrdG9wOiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDgwMXB4KSc7XHJcblxyXG4kc21hbGwtc2NyZWVuOiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDgwMXB4KSBhbmQgKG1heC13aWR0aDogMTI3OXB4KSc7XHJcbiRtZWRpdW0tc2NyZWVuOiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEyODBweCkgYW5kIChtYXgtd2lkdGg6IDE5MTlweCknO1xyXG4kbGFyZ2Utc2NyZWVuOiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDE5MjBweCknO1xyXG5cclxuQG1peGluIG1vYmlsZSB7XHJcbiAgQG1lZGlhICN7JG1vYmlsZX0ge1xyXG4gICAgQGNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5AbWl4aW4gdGFibGV0IHtcclxuICBAbWVkaWEgI3skdGFibGV0fSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiBkZXNrdG9wIHtcclxuICBAbWVkaWEgI3skZGVza3RvcH0ge1xyXG4gICAgQGNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5AbWl4aW4gc21hbGwtc2NyZWVuIHtcclxuICAgIEBtZWRpYSAjeyRzbWFsbC1zY3JlZW59IHtcclxuICAgICAgQGNvbnRlbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbkBtaXhpbiBtZWRpdW0tc2NyZWVuIHtcclxuICBAbWVkaWEgI3skbWVkaXVtLXNjcmVlbn0ge1xyXG4gICAgQGNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5AbWl4aW4gbGFyZ2Utc2NyZWVuIHtcclxuICAgIEBtZWRpYSAjeyRsYXJnZS1zY3JlZW59IHtcclxuICAgICAgQGNvbnRlbnQ7XHJcbiAgICB9XHJcbn1cclxuIiwiJGlnby1tYXJnaW46IDVweDtcclxuJGlnby1wYWRkaW5nOiA1cHg7XHJcbiRpZ28taWNvbi1zaXplOiA0MHB4O1xyXG4iXX0= */"

/***/ }),

/***/ "./src/app/pages/portal/expansion-panel/expansion-panel.component.ts":
/*!***************************************************************************!*\
  !*** ./src/app/pages/portal/expansion-panel/expansion-panel.component.ts ***!
  \***************************************************************************/
/*! exports provided: ExpansionPanelComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpansionPanelComponent", function() { return ExpansionPanelComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _expansion_panel_animations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./expansion-panel.animations */ "./src/app/pages/portal/expansion-panel/expansion-panel.animations.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ExpansionPanelComponent = /** @class */ (function () {
    function ExpansionPanelComponent() {
        this.expandedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    Object.defineProperty(ExpansionPanelComponent.prototype, "expanded", {
        get: function () {
            return this._expanded;
        },
        set: function (value) {
            if (value === this._expanded) {
                return;
            }
            this._expanded = value;
            this.expandedChange.emit(this._expanded);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ExpansionPanelComponent.prototype, "backdropShown", {
        get: function () {
            return this._backdropShown;
        },
        set: function (value) {
            this._backdropShown = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ExpansionPanelComponent.prototype, "hasExpandedClass", {
        get: function () {
            return this.expanded;
        },
        enumerable: true,
        configurable: true
    });
    ExpansionPanelComponent.prototype.onBackdropClick = function () {
        this.expanded = false;
        this.backdropShown = false;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], ExpansionPanelComponent.prototype, "expanded", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], ExpansionPanelComponent.prototype, "backdropShown", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ExpansionPanelComponent.prototype, "expandedChange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"])('class.app-expansion-panel-expanded'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], ExpansionPanelComponent.prototype, "hasExpandedClass", null);
    ExpansionPanelComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-expansion-panel',
            template: __webpack_require__(/*! ./expansion-panel.component.html */ "./src/app/pages/portal/expansion-panel/expansion-panel.component.html"),
            animations: [Object(_expansion_panel_animations__WEBPACK_IMPORTED_MODULE_1__["showContent"])()],
            changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            styles: [__webpack_require__(/*! ./expansion-panel.component.scss */ "./src/app/pages/portal/expansion-panel/expansion-panel.component.scss")]
        }),
        __metadata("design:paramtypes", [])
    ], ExpansionPanelComponent);
    return ExpansionPanelComponent;
}());



/***/ }),

/***/ "./src/app/pages/portal/expansion-panel/expansion-panel.module.ts":
/*!************************************************************************!*\
  !*** ./src/app/pages/portal/expansion-panel/expansion-panel.module.ts ***!
  \************************************************************************/
/*! exports provided: AppExpansionPanelModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppExpansionPanelModule", function() { return AppExpansionPanelModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _expansion_panel_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./expansion-panel.component */ "./src/app/pages/portal/expansion-panel/expansion-panel.component.ts");
/* harmony import */ var _expansion_panel_header_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./expansion-panel-header.component */ "./src/app/pages/portal/expansion-panel/expansion-panel-header.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};







var AppExpansionPanelModule = /** @class */ (function () {
    function AppExpansionPanelModule() {
    }
    AppExpansionPanelModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatButtonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatMenuModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatListModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSelectModule"],
                _igo2_core__WEBPACK_IMPORTED_MODULE_3__["IgoLanguageModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoBackdropModule"]
            ],
            exports: [_expansion_panel_component__WEBPACK_IMPORTED_MODULE_5__["ExpansionPanelComponent"]],
            declarations: [_expansion_panel_component__WEBPACK_IMPORTED_MODULE_5__["ExpansionPanelComponent"], _expansion_panel_header_component__WEBPACK_IMPORTED_MODULE_6__["ExpansionPanelHeaderComponent"]]
        })
    ], AppExpansionPanelModule);
    return AppExpansionPanelModule;
}());



/***/ }),

/***/ "./src/app/pages/portal/map-overlay/map-overlay.component.html":
/*!*********************************************************************!*\
  !*** ./src/app/pages/portal/map-overlay/map-overlay.component.html ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-container *ngFor=\"let element of mapOverlay; let i = index\">\r\n  <div class=\"mapOverlayDefault\" [ngClass]=\"element.cssClass\"\r\n       [style.position]=\"element.fixed ? 'fixed' : 'absolute'\"\r\n       [style.marginLeft]=\"element.marginLeft\"\r\n       [style.marginRight]=\"element.marginRight\"\r\n       [style.marginTop]=\"element.marginTop\"\r\n       [style.marginBottom]=\"element.marginBottom\"\r\n       [style.fontSize]=\"element.fontSize\">\r\n    <a *ngIf=\"element.link; else templateNoLink\"\r\n        target=\"_blank\" [href]='element.link'>\r\n        {{ element.text }}\r\n        <ng-container *ngIf=\"element.imgSrc\">\r\n          <img [src]=\"element.imgSrc\"\r\n               [alt]=\"element.alt\"\r\n               [ngStyle]=\"{ 'width': element.imgSize }\">\r\n        </ng-container>\r\n    </a>\r\n\r\n\r\n  <ng-template #templateNoLink>\r\n    {{ element.text }}\r\n    <ng-container *ngIf=\"element.imgSrc\">\r\n      <img [src]=\"element.imgSrc\" [alt]=\"element.alt\" [ngStyle]=\"{ 'width': element.imgSize }\">\r\n    </ng-container>\r\n\r\n  </ng-template>\r\n  </div>\r\n</ng-container>\r\n"

/***/ }),

/***/ "./src/app/pages/portal/map-overlay/map-overlay.component.scss":
/*!*********************************************************************!*\
  !*** ./src/app/pages/portal/map-overlay/map-overlay.component.scss ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host {\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  position: fixed;\n  pointer-events: none; }\n\n.mapOverlayDefault {\n  position: absolute;\n  white-space: nowrap;\n  pointer-events: auto; }\n\n.bottom-right {\n  bottom: 0;\n  right: 0; }\n\n.top-right {\n  top: 0;\n  right: 0; }\n\n.bottom-left {\n  bottom: 0;\n  left: 0; }\n\n.top-left {\n  top: 0;\n  left: 0; }\n\n.bottom-center {\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 0); }\n\n.top-center {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, 0); }\n\n.center-center {\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, 0); }\n\n.center-right {\n  top: 50%;\n  right: 0; }\n\n.center-left {\n  top: 50%;\n  left: 0; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcG9ydGFsL21hcC1vdmVybGF5L0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxhcHBcXHBhZ2VzXFxwb3J0YWxcXG1hcC1vdmVybGF5XFxtYXAtb3ZlcmxheS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7RUFDWixNQUFNO0VBQ04sT0FBTztFQUNQLFFBQVE7RUFDUixlQUFlO0VBQ2Ysb0JBQW9CLEVBQUE7O0FBR3RCO0VBQ0Usa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixvQkFBbUIsRUFBQTs7QUFHckI7RUFDRSxTQUFTO0VBQ1QsUUFBUSxFQUFBOztBQUdWO0VBQ0UsTUFBTTtFQUNOLFFBQVEsRUFBQTs7QUFHVjtFQUNFLFNBQVM7RUFDVCxPQUFPLEVBQUE7O0FBR1Q7RUFDRSxNQUFNO0VBQ04sT0FBTyxFQUFBOztBQUdUO0VBQ0UsU0FBUztFQUNULFNBQVM7RUFDVCw2QkFBNkIsRUFBQTs7QUFHL0I7RUFDRSxNQUFNO0VBQ04sU0FBUztFQUNULDZCQUE2QixFQUFBOztBQUcvQjtFQUNFLFFBQVE7RUFDUixTQUFTO0VBQ1QsNkJBQTZCLEVBQUE7O0FBRy9CO0VBQ0UsUUFBUTtFQUNSLFFBQVEsRUFBQTs7QUFHVjtFQUNFLFFBQVE7RUFDUixPQUFPLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wb3J0YWwvbWFwLW92ZXJsYXkvbWFwLW92ZXJsYXkuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHRvcDogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIHBvc2l0aW9uOiBmaXhlZDtcclxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxufVxyXG5cclxuLm1hcE92ZXJsYXlEZWZhdWx0IHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICBwb2ludGVyLWV2ZW50czphdXRvO1xyXG59XHJcblxyXG4uYm90dG9tLXJpZ2h0IHtcclxuICBib3R0b206IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbn1cclxuXHJcbi50b3AtcmlnaHQge1xyXG4gIHRvcDogMDtcclxuICByaWdodDogMDtcclxufVxyXG5cclxuLmJvdHRvbS1sZWZ0IHtcclxuICBib3R0b206IDA7XHJcbiAgbGVmdDogMDtcclxufVxyXG5cclxuLnRvcC1sZWZ0IHtcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogMDtcclxufVxyXG5cclxuLmJvdHRvbS1jZW50ZXIge1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiA1MCU7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMCk7XHJcbn1cclxuXHJcbi50b3AtY2VudGVyIHtcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogNTAlO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIDApO1xyXG59XHJcblxyXG4uY2VudGVyLWNlbnRlciB7XHJcbiAgdG9wOiA1MCU7XHJcbiAgbGVmdDogNTAlO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIDApO1xyXG59XHJcblxyXG4uY2VudGVyLXJpZ2h0IHtcclxuICB0b3A6IDUwJTtcclxuICByaWdodDogMDtcclxufVxyXG5cclxuLmNlbnRlci1sZWZ0IHtcclxuICB0b3A6IDUwJTtcclxuICBsZWZ0OiAwO1xyXG59XHJcbiJdfQ== */"

/***/ }),

/***/ "./src/app/pages/portal/map-overlay/map-overlay.component.ts":
/*!*******************************************************************!*\
  !*** ./src/app/pages/portal/map-overlay/map-overlay.component.ts ***!
  \*******************************************************************/
/*! exports provided: MapOverlayComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapOverlayComponent", function() { return MapOverlayComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _igo2_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @igo2/context */ "./dist/igo-lib/context/fesm5/igo2-context.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var MapOverlayComponent = /** @class */ (function () {
    function MapOverlayComponent(contextService, mediaService, configService) {
        this.contextService = contextService;
        this.mediaService = mediaService;
        this.configService = configService;
        this.mapOverlay = [];
    }
    MapOverlayComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.context$$ = this.contextService.context$.subscribe(function (context) {
            _this.handleContextChange(context);
            _this.context = context;
        });
        this.media$$ = this.mediaService.media$.subscribe(function (media) {
            return _this.handleContextChange(_this.context);
        });
    };
    MapOverlayComponent.prototype.ngOnDestroy = function () {
        this.context$$.unsubscribe();
        this.media$$.unsubscribe();
    };
    MapOverlayComponent.prototype.handleContextChange = function (context) {
        var mapOverlay = [];
        if (context !== undefined) {
            this.mapOverlay = [];
            if (context['mapOverlay']) {
                mapOverlay = context['mapOverlay'];
            }
            else if (this.configService.getConfig('mapOverlay')) {
                mapOverlay = this.configService.getConfig('mapOverlay');
            }
            for (var _i = 0, mapOverlay_1 = mapOverlay; _i < mapOverlay_1.length; _i++) {
                var overlay = mapOverlay_1[_i];
                // If no media define use default to desktop, display only if current media is on context definition
                if ((!overlay.media && this.mediaService.getMedia() === 'desktop') ||
                    (overlay.media && overlay.media.includes(this.mediaService.getMedia()))) {
                    this.mapOverlay.push(overlay);
                }
            }
        }
    };
    MapOverlayComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-map-overlay',
            template: __webpack_require__(/*! ./map-overlay.component.html */ "./src/app/pages/portal/map-overlay/map-overlay.component.html"),
            styles: [__webpack_require__(/*! ./map-overlay.component.scss */ "./src/app/pages/portal/map-overlay/map-overlay.component.scss")]
        }),
        __metadata("design:paramtypes", [_igo2_context__WEBPACK_IMPORTED_MODULE_1__["ContextService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["MediaService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_2__["ConfigService"]])
    ], MapOverlayComponent);
    return MapOverlayComponent;
}());



/***/ }),

/***/ "./src/app/pages/portal/map-overlay/map-overlay.module.ts":
/*!****************************************************************!*\
  !*** ./src/app/pages/portal/map-overlay/map-overlay.module.ts ***!
  \****************************************************************/
/*! exports provided: MapOverlayModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapOverlayModule", function() { return MapOverlayModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _map_overlay_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map-overlay.component */ "./src/app/pages/portal/map-overlay/map-overlay.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var MapOverlayModule = /** @class */ (function () {
    function MapOverlayModule() {
    }
    MapOverlayModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"]
            ],
            exports: [_map_overlay_component__WEBPACK_IMPORTED_MODULE_2__["MapOverlayComponent"]],
            declarations: [_map_overlay_component__WEBPACK_IMPORTED_MODULE_2__["MapOverlayComponent"]],
            entryComponents: [_map_overlay_component__WEBPACK_IMPORTED_MODULE_2__["MapOverlayComponent"]]
        })
    ], MapOverlayModule);
    return MapOverlayModule;
}());



/***/ }),

/***/ "./src/app/pages/portal/portal.animation.ts":
/*!**************************************************!*\
  !*** ./src/app/pages/portal/portal.animation.ts ***!
  \**************************************************/
/*! exports provided: expansionPanelAnimation, toastPanelAnimation, baselayersAnimation, controlsAnimations, controlSlideX, controlSlideY, mapSlideX, mapSlideY */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "expansionPanelAnimation", function() { return expansionPanelAnimation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toastPanelAnimation", function() { return toastPanelAnimation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "baselayersAnimation", function() { return baselayersAnimation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "controlsAnimations", function() { return controlsAnimations; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "controlSlideX", function() { return controlSlideX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "controlSlideY", function() { return controlSlideY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapSlideX", function() { return mapSlideX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapSlideY", function() { return mapSlideY; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "./node_modules/@angular/animations/fesm5/animations.js");

function expansionPanelAnimation() {
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('expansionPanelSize', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('full', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            left: '0px',
            'max-width': '100%'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('reduced', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            left: '405px',
            'max-width': 'calc(100% - 405px)'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
    ]);
}
function toastPanelAnimation() {
    return [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('toastPanelOffsetX', [
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('false', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                left: '50%'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('true', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                left: 'calc(50% + 202px)'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
        ]),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('toastPanelOffsetY', [
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('false', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                bottom: '0'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('true', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                bottom: '285px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
        ])
    ];
}
function baselayersAnimation() {
    return [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('baselayersStateX', [
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('left', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                left: '5px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('right', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                left: '405px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
        ]),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('baselayersStateY', [
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('close', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({})),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('down', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                bottom: '55px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('up', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                bottom: '285px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
        ])
    ];
}
function controlsAnimations() {
    return [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('controlsOffsetX', [
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('false', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                left: '5px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('true', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                left: '405px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
        ]),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('controlsOffsetY', [
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('close', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({})),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('false', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                bottom: '5px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('true', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
                bottom: '285px'
            })),
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
        ])
    ];
}
function controlSlideX() {
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('controlStateX', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('left', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            left: '60px'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('right', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            left: '465px'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
    ]);
}
function controlSlideY() {
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('controlStateY', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('close', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({})),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('down', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            bottom: '2px',
            'margin-left': '0px'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('up', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            bottom: '285px',
            'margin-left': '-55px'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms'))
    ]);
}
function mapSlideX() {
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('mapStateX', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('left', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            left: '0'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('right', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            left: '0'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('250ms'))
    ]);
}
function mapSlideY() {
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('mapStateY', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('close', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            bottom: '0'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('down', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            bottom: '0'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('up', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            bottom: '0'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => *', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('250ms'))
    ]);
}


/***/ }),

/***/ "./src/app/pages/portal/portal.component.html":
/*!****************************************************!*\
  !*** ./src/app/pages/portal/portal.component.html ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-sidenav-container class=\"app-main-container\">\r\n\r\n  <igo-backdrop [shown]=\"backdropShown\" (click)=\"onBackdropClick()\">\r\n  </igo-backdrop>\r\n\r\n  <button mat-icon-button id=\"menu-button\" class=\"menu-button\" color=\"primary\" tooltip-position=\"below\"\r\n    matTooltipShowDelay=\"500\" [matTooltip]=\"(sidenavOpened ? 'menu.close' : 'menu.open') | translate\" (click)=\"onToggleSidenavClick()\">\r\n    <mat-icon svgIcon=\"menu\">\r\n    </mat-icon>\r\n  </button>\r\n\r\n  <igo-search-bar [term]=\"searchBarTerm\" [minLength]=\"minSearchTermLength\" (change)=\"onSearchTermChange($event)\"\r\n    (search)=\"onSearch($event)\">\r\n  </igo-search-bar>\r\n\r\n  <app-sidenav [map]=\"map\" [(opened)]=\"sidenavOpened\">\r\n  </app-sidenav>\r\n\r\n  <igo-map-browser #mapBrowser igoQuery [waitForAllQueries]=\"true\" [queryFeatures]=\"true\" igoMapContext igoLayerContext\r\n    igoMapOffline igoDropGeoFile (query)=\"onMapQuery($event)\" [map]=\"map\" [igoContextMenu]=actionbarMenu (menuPosition)=\"onContextMenuOpen($event)\"\r\n    [ngClass]=\"{'igo-attribution-offset': map.getBaseLayers().length > 1}\" [@mapStateX]=\"sidenavOpened ? 'right' : 'left'\"\r\n    (@mapStateX.start)=\"removeMapBrowserClass($event)\" (@mapStateX.done)=\"updateMapBrowserClass($event)\" [@mapStateY]=\"expansionPanelExpanded ? 'up' : 'down'\"\r\n    (@mapStateY.start)=\"removeMapBrowserClass($event)\" (@mapStateY.done)=\"updateMapBrowserClass($event)\">\r\n\r\n    <igo-zoom-button [map]=\"map\" color=\"primary\" [@controlsOffsetY]=\"expansionPanelExpanded\">\r\n    </igo-zoom-button>\r\n    <igo-geolocate-button [map]=\"map\" color=\"primary\" [@controlsOffsetY]=\"expansionPanelExpanded\">\r\n    </igo-geolocate-button>\r\n    <igo-rotation-button [map]=\"map\" color=\"primary\"></igo-rotation-button>\r\n    <igo-baselayers-switcher [map]=\"map\" [@baselayersStateY]=\"expansionPanelExpanded ? 'up' : 'down'\"\r\n      [@baselayersStateX]=\"(mediaService.media$ | async) !== 'mobile' && sidenavOpened ? 'right' : 'left'\">\r\n    </igo-baselayers-switcher>\r\n  </igo-map-browser>\r\n\r\n</mat-sidenav-container>\r\n\r\n<app-expansion-panel *ngIf=\"hasExpansionPanel\" [(expanded)]=\"expansionPanelExpanded\" [@expansionPanelSize]=\"sidenavOpened ? 'reduced' : 'full'\">\r\n\r\n  <ng-container expansionPanelHeader>\r\n    <!-- <igo-workspace-selector igoWorkspaceSelector [store]=\"workspaceStore\" [map]=\"map\"></igo-workspace-selector> -->\r\n    <!-- <igo-actionbar\r\n      *ngIf=\"workspace\"\r\n      [store]=\"workspace.actionStore\"\r\n      [horizontal]=\"true\"\r\n      [xPosition]=\"'after'\"\r\n      [yPosition]=\"'above'\"\r\n      [withToggleButton]=\"true\"\r\n      [withTitle]=\"actionbarWithTitle\"\r\n      [mode]=\"actionbarMode\">\r\n    </igo-actionbar> -->\r\n  </ng-container>\r\n\r\n  <igo-entity-table [store]=\"tableStore\" [template]=\"tableTemplate\">\r\n  </igo-entity-table>\r\n</app-expansion-panel>\r\n\r\n<app-toast-panel [store]=\"queryStore\" [@toastPanelOffsetX]=\"sidenavOpened\" [@toastPanelOffsetY]=\"expansionPanelExpanded\"\r\n  (resultSelect)=\"addFeatureToMap($event)\">\r\n</app-toast-panel>\r\n\r\n<ng-template #actionbarMenu>\r\n  <igo-actionbar [store]=\"contextMenuStore\" [withIcon]=\"false\" [horizontal]=\"true\" mode=\"context\">\r\n  </igo-actionbar>\r\n</ng-template>"

/***/ }),

/***/ "./src/app/pages/portal/portal.component.scss":
/*!****************************************************!*\
  !*** ./src/app/pages/portal/portal.component.scss ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/*** Generic ***/\n/*** Main ***/\n:host {\n  width: 100%;\n  height: 100%;\n  display: block; }\n/*** Menu button ***/\n.menu-button {\n  background-color: white;\n  position: absolute;\n  left: 5px;\n  top: 5px;\n  z-index: 4;\n  border-radius: 0; }\n.menu-button ::ng-deep div.mat-button-ripple-round {\n  border-radius: 0; }\n/*** Map browser ***/\nigo-map-browser {\n  width: 100%;\n  height: 100%; }\nigo-map-browser ::ng-deep .ol-overlaycontainer-stopevent {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  bottom: 0; }\nigo-map-browser.sidenav-offset ::ng-deep .ol-overlaycontainer-stopevent {\n  left: 380px;\n  width: calc(100% - 380px); }\nigo-map-browser.expansion-offset ::ng-deep .ol-overlaycontainer-stopevent {\n  bottom: 279px; }\n/*** Search bar ***/\nigo-search-bar {\n  background-color: white;\n  font-size: 16px;\n  position: absolute;\n  left: calc(40px + 5px);\n  top: 5px;\n  z-index: 4;\n  width: calc(400px - calc(40px + 5px) - (2 * 5px));\n  height: 40px;\n  margin: 0 5px; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    igo-search-bar {\n      width: calc(100% - 40px - calc(40px + 5px) - (3 * 5px)); } }\n/*** Sidenav ***/\nmat-sidenav-container {\n  height: 100%;\n  width: 100%;\n  background-color: #efefef;\n  z-index: 5;\n  display: unset; }\n/*** Expansion Panel ***/\napp-expansion-panel {\n  position: absolute;\n  bottom: 0;\n  z-index: 4;\n  overflow: hidden; }\n/*** Toast Panel ***/\napp-toast-panel {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  margin-left: -300px;\n  width: 600px;\n  z-index: 4; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    app-toast-panel {\n      width: calc(100% - 48px);\n      left: 48px;\n      margin-left: 0; } }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n  app-toast-panel.expansion-panel-expanded,\n  app-toast-panel:not(.has-expansion-panel),\n  app-toast-panel.app-toast-panel-opened {\n    width: 100%;\n    left: 0; } }\nigo-geolocate-button {\n  margin-bottom: 90px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcG9ydGFsL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxzdHlsZVxccGFydGlhbFxcdmFyaWFibGVzLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3BvcnRhbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL3NyY1xcYXBwXFxwYWdlc1xccG9ydGFsXFxwb3J0YWwuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3BvcnRhbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxjb3JlLnZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9wYWdlcy9wb3J0YWwvQzpcXE1ybm1pY3JvXFxkZXZcXGlvblxcaWdvMi9zcmNcXGFwcFxccGFnZXNcXHBvcnRhbFxccG9ydGFsLnZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9wYWdlcy9wb3J0YWwvQzpcXE1ybm1pY3JvXFxkZXZcXGlvblxcaWdvMi9kaXN0XFxpZ28tbGliXFxjb3JlXFxzdHlsZVxccGFydGlhbFxcbWVkaWEuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxnQkFBQTtBQ0FBLGFBQUE7QUFDQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osY0FBYyxFQUFBO0FBR2hCLG9CQUFBO0FBRUE7RUFDRSx1QkRUdUM7RUNVdkMsa0JBQWtCO0VBQ2xCLFNDZGM7RURlZCxRQ2ZjO0VEZ0JkLFVBQVU7RUFDVixnQkFBZ0IsRUFBQTtBQUdsQjtFQUNFLGdCQUFnQixFQUFBO0FBR2xCLG9CQUFBO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsWUFBWSxFQUFBO0FBR2Q7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLE9BQU87RUFDUCxTQUFTLEVBQUE7QUFHWDtFQUNFLFdBQVc7RUFDWCx5QkFBeUIsRUFBQTtBQUczQjtFQUNFLGFBQWEsRUFBQTtBQUdmLG1CQUFBO0FBQ0E7RUFDRSx1QkQ3Q3VDO0VDOEN2QyxlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLHNCRTNCd0Q7RUY0QnhELFFDcERjO0VEcURkLFVBQVU7RUFDVixpREU3QnlGO0VGOEJ6RixZQ3JEa0I7RURzRGxCLGFDeERjLEVBQUE7QUVTZDtJSHNDRjtNQVlJLHVERWpDOEcsRUFBQSxFRm1Dakg7QUFFRCxnQkFBQTtBQUNBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7RUFDWCx5QkFBeUI7RUFDekIsVUFBVTtFQUNWLGNBQWMsRUFBQTtBQUdoQix3QkFBQTtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxVQUFVO0VBQ1YsZ0JBQWdCLEVBQUE7QUFHbEIsb0JBQUE7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsU0FBUztFQUNULG1CQUFtQjtFQUNuQixZQUFZO0VBQ1osVUFBVSxFQUFBO0FHOUVWO0lId0VGO01BU0ksd0JBQXlDO01BQ3pDLFVFeEZvQjtNRnlGcEIsY0FBYyxFQUFBLEVBRWpCO0FHckZDO0VIdUZGOzs7SUFJSSxXQUFXO0lBQ1gsT0FBTyxFQUFBLEVBRVY7QUFFRDtFQUNFLG1CQUFtQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcG9ydGFsL3BvcnRhbC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJ35AaWdvMi9jb3JlL3N0eWxlL3BhcnRpYWwvY29yZS52YXJpYWJsZXMnO1xyXG5cclxuLyoqKiBHZW5lcmljICoqKi9cclxuJGFwcC1iYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7XHJcbiRhcHAtaWNvbi1idXR0b24td2lkdGg6IDQwcHg7XHJcblxyXG4kYXBwLWJvcmRlci13aWR0aDogMXB4O1xyXG4kYXBwLWJvcmRlci1zdHlsZTogc29saWQ7XHJcbiRhcHAtYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIC4yKTtcclxuXHJcbiVib3JkZXItYm94IHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbiVib3JkZXJlZC10b3Age1xyXG4gIGJvcmRlci10b3A6ICRhcHAtYm9yZGVyLXdpZHRoICRhcHAtYm9yZGVyLXN0eWxlICRhcHAtYm9yZGVyLWNvbG9yO1xyXG59XHJcblxyXG4lYm9yZGVyZWQtYm90dG9tIHtcclxuICBib3JkZXItYm90dG9tOiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJvcmRlcmVkLWxlZnQge1xyXG4gIGJvcmRlci1sZWZ0OiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJvcmRlcmVkLXJpZ2h0IHtcclxuICBib3JkZXItcmlnaHQ6ICRhcHAtYm9yZGVyLXdpZHRoICRhcHAtYm9yZGVyLXN0eWxlICRhcHAtYm9yZGVyLWNvbG9yO1xyXG59XHJcblxyXG4lYm94LXNoYWRvd2VkIHtcclxuICAtbW96LWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDBweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgLW8tYm94LXNoYWRvdzogMHB4IDBweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgYm94LXNoYWRvdzogMHB4IDBweCAycHggMHB4ICNkZGRkZGQ7XHJcbn1cclxuXHJcbiVib3gtc2hhZG93ZWQtYm90dG9tLXJpZ2h0IHtcclxuICAtbW96LWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC13ZWJraXQtYm94LXNoYWRvdzogMnB4IDJweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgLW8tYm94LXNoYWRvdzogMnB4IDJweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgYm94LXNoYWRvdzogMnB4IDJweCAycHggMHB4ICNkZGRkZGQ7XHJcbn1cclxuIiwiQGltcG9ydCAnLi9wb3J0YWwudmFyaWFibGVzJztcclxuXHJcbi8qKiogTWFpbiAqKiovXHJcbjpob3N0IHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuXHJcbi8qKiogTWVudSBidXR0b24gKioqL1xyXG5cclxuLm1lbnUtYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAkYXBwLWJhY2tncm91bmQtY29sb3I7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGxlZnQ6ICRpZ28tbWFyZ2luO1xyXG4gIHRvcDogJGlnby1tYXJnaW47XHJcbiAgei1pbmRleDogNDtcclxuICBib3JkZXItcmFkaXVzOiAwO1xyXG59XHJcblxyXG4ubWVudS1idXR0b24gOjpuZy1kZWVwIGRpdi5tYXQtYnV0dG9uLXJpcHBsZS1yb3VuZCB7XHJcbiAgYm9yZGVyLXJhZGl1czogMDtcclxufVxyXG5cclxuLyoqKiBNYXAgYnJvd3NlciAqKiovXHJcbmlnby1tYXAtYnJvd3NlciB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG5pZ28tbWFwLWJyb3dzZXIgOjpuZy1kZWVwIC5vbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGxlZnQ6IDA7XHJcbiAgYm90dG9tOiAwO1xyXG59XHJcblxyXG5pZ28tbWFwLWJyb3dzZXIuc2lkZW5hdi1vZmZzZXQgOjpuZy1kZWVwIC5vbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCB7XHJcbiAgbGVmdDogMzgwcHg7XHJcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDM4MHB4KTtcclxufVxyXG5cclxuaWdvLW1hcC1icm93c2VyLmV4cGFuc2lvbi1vZmZzZXQgOjpuZy1kZWVwIC5vbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCB7XHJcbiAgYm90dG9tOiAyNzlweDtcclxufVxyXG5cclxuLyoqKiBTZWFyY2ggYmFyICoqKi9cclxuaWdvLXNlYXJjaC1iYXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICRhcHAtYmFja2dyb3VuZC1jb2xvcjtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGxlZnQ6ICRzZWFyY2gtYmFyLWxlZnQ7XHJcbiAgdG9wOiAkaWdvLW1hcmdpbjtcclxuICB6LWluZGV4OiA0O1xyXG4gIHdpZHRoOiAkc2VhcmNoLWJhci13aWR0aDtcclxuICBoZWlnaHQ6ICRpZ28taWNvbi1zaXplO1xyXG4gIG1hcmdpbjogMCAkaWdvLW1hcmdpbjtcclxuXHJcbiAgQGluY2x1ZGUgbW9iaWxlIHtcclxuICAgIHdpZHRoOiAkc2VhcmNoLWJhci13aWR0aC1tb2JpbGU7XHJcbiAgfVxyXG59XHJcblxyXG4vKioqIFNpZGVuYXYgKioqL1xyXG5tYXQtc2lkZW5hdi1jb250YWluZXIge1xyXG4gIGhlaWdodDogMTAwJTtcclxuICB3aWR0aDogMTAwJTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWZlZmVmO1xyXG4gIHotaW5kZXg6IDU7XHJcbiAgZGlzcGxheTogdW5zZXQ7XHJcbn1cclxuXHJcbi8qKiogRXhwYW5zaW9uIFBhbmVsICoqKi9cclxuYXBwLWV4cGFuc2lvbi1wYW5lbCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvdHRvbTogMDtcclxuICB6LWluZGV4OiA0O1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbn1cclxuXHJcbi8qKiogVG9hc3QgUGFuZWwgKioqL1xyXG5hcHAtdG9hc3QtcGFuZWwge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBib3R0b206IDA7XHJcbiAgbGVmdDogNTAlO1xyXG4gIG1hcmdpbi1sZWZ0OiAtMzAwcHg7XHJcbiAgd2lkdGg6IDYwMHB4O1xyXG4gIHotaW5kZXg6IDQ7XHJcblxyXG4gIEBpbmNsdWRlIG1vYmlsZSB7XHJcbiAgICB3aWR0aDogY2FsYygxMDAlIC0gI3skYXBwLWZvb3Rlci1oZWlnaHR9KTtcclxuICAgIGxlZnQ6ICRhcHAtZm9vdGVyLWhlaWdodDtcclxuICAgIG1hcmdpbi1sZWZ0OiAwO1xyXG4gIH1cclxufVxyXG5cclxuYXBwLXRvYXN0LXBhbmVsLmV4cGFuc2lvbi1wYW5lbC1leHBhbmRlZCxcclxuYXBwLXRvYXN0LXBhbmVsOm5vdCguaGFzLWV4cGFuc2lvbi1wYW5lbCksXHJcbmFwcC10b2FzdC1wYW5lbC5hcHAtdG9hc3QtcGFuZWwtb3BlbmVkIHtcclxuICBAaW5jbHVkZSBtb2JpbGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBsZWZ0OiAwO1xyXG4gIH1cclxufVxyXG5cclxuaWdvLWdlb2xvY2F0ZS1idXR0b24ge1xyXG4gIG1hcmdpbi1ib3R0b206IDkwcHg7XHJcbn1cclxuIiwiJGlnby1tYXJnaW46IDVweDtcclxuJGlnby1wYWRkaW5nOiA1cHg7XHJcbiRpZ28taWNvbi1zaXplOiA0MHB4O1xyXG4iLCJAaW1wb3J0ICd+QGlnbzIvY29yZS9zdHlsZS9wYXJ0aWFsL21lZGlhJztcclxuQGltcG9ydCAndmFyaWFibGVzJztcclxuXHJcbiRhcHAtZm9vdGVyLWhlaWdodDogNDhweDtcclxuJGFwcC1tb2JpbGUtbWluLXNwYWNlLXJpZ2h0OiA0MHB4O1xyXG5cclxuJGFwcC1leHBhbnNpb24tcGFuZWwtY29sbGFwc2VkLWhlaWdodDogNDhweDtcclxuJGFwcC1leHBhbnNpb24tcGFuZWwtY29sbGFwc2VkLXdpZHRoOiA1MnB4O1xyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1oZWlnaHQ6IDI4MXB4O1xyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1oZWFkZXItaGVpZ2h0OiAkYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0O1xyXG5cclxuJGFwcC10b2FzdC1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0OiA0OHB4O1xyXG4kYXBwLXRvYXN0LXBhbmVsLW1heC1oZWlnaHQ6IDI4MXB4O1xyXG4kYXBwLXRvYXN0LXBhbmVsLXdpZHRoOiAzMCU7XHJcblxyXG4kYXBwLXNpZGVuYXYtbWFyZ2luLXRvcDogNTBweDtcclxuJGFwcC1zaWRlbmF2LWhlaWdodDogY2FsYygxMDAlIC0gI3skYXBwLXNpZGVuYXYtbWFyZ2luLXRvcH0pO1xyXG4kYXBwLXNpZGVuYXYtd2lkdGg6IDQwMHB4O1xyXG4kYXBwLXNpZGVuYXYtd2lkdGgtbW9iaWxlOiBjYWxjKDEwMCUgLSAjeyRhcHAtbW9iaWxlLW1pbi1zcGFjZS1yaWdodH0gLSAjeyRpZ28tbWFyZ2lufSk7XHJcblxyXG4kaWdvLXRvYXN0LXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ6IDQ4cHg7XHJcbiRpZ28tdG9hc3QtcGFuZWwtbWF4LWhlaWdodDogMzAwcHg7XHJcbiRpZ28tdG9hc3QtcGFuZWwtd2lkdGg6IDMwJTtcclxuXHJcbiRzZWFyY2gtYmFyLWxlZnQ6IGNhbGMoI3skaWdvLWljb24tc2l6ZX0gKyAjeyRpZ28tbWFyZ2lufSk7XHJcbiRzZWFyY2gtYmFyLXdpZHRoOiBjYWxjKCN7JGFwcC1zaWRlbmF2LXdpZHRofSAtICN7JHNlYXJjaC1iYXItbGVmdH0gLSAoMiAqICN7JGlnby1tYXJnaW59KSk7XHJcbiRzZWFyY2gtYmFyLXdpZHRoLW1vYmlsZTogY2FsYygxMDAlIC0gI3skYXBwLW1vYmlsZS1taW4tc3BhY2UtcmlnaHR9IC0gI3skc2VhcmNoLWJhci1sZWZ0fSAtICgzICogI3skaWdvLW1hcmdpbn0pKTtcclxuIiwiJG1vYmlsZTogJ29ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0NTBweCksIG9ubHkgc2NyZWVuIGFuZCAobWF4LWhlaWdodDogNDUwcHgpJztcclxuJHRhYmxldDogJ29ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA0NTFweCkgYW5kIChtaW4taGVpZ2h0OiA0NTFweCkgYW5kIChtYXgtd2lkdGg6IDgwMHB4KSc7XHJcbiRkZXNrdG9wOiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDgwMXB4KSc7XHJcblxyXG4kc21hbGwtc2NyZWVuOiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDgwMXB4KSBhbmQgKG1heC13aWR0aDogMTI3OXB4KSc7XHJcbiRtZWRpdW0tc2NyZWVuOiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEyODBweCkgYW5kIChtYXgtd2lkdGg6IDE5MTlweCknO1xyXG4kbGFyZ2Utc2NyZWVuOiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDE5MjBweCknO1xyXG5cclxuQG1peGluIG1vYmlsZSB7XHJcbiAgQG1lZGlhICN7JG1vYmlsZX0ge1xyXG4gICAgQGNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5AbWl4aW4gdGFibGV0IHtcclxuICBAbWVkaWEgI3skdGFibGV0fSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiBkZXNrdG9wIHtcclxuICBAbWVkaWEgI3skZGVza3RvcH0ge1xyXG4gICAgQGNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5AbWl4aW4gc21hbGwtc2NyZWVuIHtcclxuICAgIEBtZWRpYSAjeyRzbWFsbC1zY3JlZW59IHtcclxuICAgICAgQGNvbnRlbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbkBtaXhpbiBtZWRpdW0tc2NyZWVuIHtcclxuICBAbWVkaWEgI3skbWVkaXVtLXNjcmVlbn0ge1xyXG4gICAgQGNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5AbWl4aW4gbGFyZ2Utc2NyZWVuIHtcclxuICAgIEBtZWRpYSAjeyRsYXJnZS1zY3JlZW59IHtcclxuICAgICAgQGNvbnRlbnQ7XHJcbiAgICB9XHJcbn1cclxuIl19 */"

/***/ }),

/***/ "./src/app/pages/portal/portal.component.ts":
/*!**************************************************!*\
  !*** ./src/app/pages/portal/portal.component.ts ***!
  \**************************************************/
/*! exports provided: PortalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PortalComponent", function() { return PortalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var ol_proj__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/proj */ "./node_modules/ol/proj.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @igo2/auth */ "./dist/igo-lib/auth/fesm5/igo2-auth.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _igo2_integration__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @igo2/integration */ "./dist/igo-lib/integration/fesm5/igo2-integration.js");
/* harmony import */ var _portal_animation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./portal.animation */ "./src/app/pages/portal/portal.animation.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PortalComponent = /** @class */ (function () {
    function PortalComponent(route, configService, 
    // private workspaceState: WorkspaceState,
    authService, mediaService, layerService, dataSourceService, cdRef, capabilitiesService, contextState, mapState, searchState, queryState, toolState, searchSourceService, searchService) {
        this.route = route;
        this.configService = configService;
        this.authService = authService;
        this.mediaService = mediaService;
        this.layerService = layerService;
        this.dataSourceService = dataSourceService;
        this.cdRef = cdRef;
        this.capabilitiesService = capabilitiesService;
        this.contextState = contextState;
        this.mapState = mapState;
        this.searchState = searchState;
        this.queryState = queryState;
        this.toolState = toolState;
        this.searchSourceService = searchSourceService;
        this.searchService = searchService;
        this.minSearchTermLength = 2;
        this.expansionPanelExpanded = false;
        this.hasExpansionPanel = true;
        this.sidenavOpened = false;
        this.searchBarTerm = '';
        this.contextMenuStore = new _igo2_common__WEBPACK_IMPORTED_MODULE_5__["ActionStore"]([]);
        this.contextLoaded = false;
        // True after the initial tool is loaded
        // private toolLoaded = false;
        this.tableStore = new _igo2_common__WEBPACK_IMPORTED_MODULE_5__["EntityStore"]([]);
        this.tableTemplate = {
            selection: true,
            sort: true,
            columns: [
                {
                    name: 'id',
                    title: 'ID'
                },
                {
                    name: 'name',
                    title: 'Name'
                },
                {
                    name: 'description',
                    title: 'Description'
                }
            ]
        };
    }
    Object.defineProperty(PortalComponent.prototype, "map", {
        get: function () {
            return this.mapState.map;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PortalComponent.prototype, "backdropShown", {
        get: function () {
            return (this.mediaService.media$.value === _igo2_core__WEBPACK_IMPORTED_MODULE_4__["Media"].Mobile && this.sidenavOpened);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PortalComponent.prototype, "toastPanelShown", {
        get: function () {
            return true;
            // return (
            //   this.mediaService.media$.value === Media.Mobile && !this.sidenavOpened
            // );
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PortalComponent.prototype, "expansionPanelBackdropShown", {
        get: function () {
            return false;
            // return (
            //   this.expansionPanelExpanded &&
            //   this.toastPanelOpened &&
            //   this.mediaService.media$.value !== Media.Mobile
            // );
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PortalComponent.prototype, "searchStore", {
        // get actionbarMode(): ActionbarMode {
        //   if (this.mediaService.media$.value === Media.Mobile) {
        //     return ActionbarMode.Overlay;
        //   }
        //   return this.expansionPanelExpanded
        //     ? ActionbarMode.Dock
        //     : ActionbarMode.Overlay;
        // }
        //
        // get actionbarWithTitle(): boolean {
        //   return this.actionbarMode === ActionbarMode.Overlay;
        // }
        get: function () {
            return this.searchState.store;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PortalComponent.prototype, "queryStore", {
        get: function () {
            return this.queryState.store;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PortalComponent.prototype, "toolbox", {
        get: function () {
            return this.toolState.toolbox;
        },
        enumerable: true,
        configurable: true
    });
    PortalComponent.prototype.ngOnInit = function () {
        var _this = this;
        window['IGO'] = this;
        // this.sidenavTitle = this.configService.getConfig('sidenavTitle');
        this.authService.authenticate$.subscribe(function () { return (_this.contextLoaded = false); });
        this.context$$ = this.contextState.context$.subscribe(function (context) { return _this.onChangeContext(context); });
        this.contextMenuStore.load([
            {
                id: 'coordinates',
                title: 'coordinates',
                handler: function () { return _this.searchCoordinate(_this.contextMenuCoord); }
            },
            {
                id: 'googleMaps',
                title: 'googleMap',
                handler: function () { return _this.openGoogleMaps(_this.contextMenuCoord); }
            },
            {
                id: 'googleStreetView',
                title: 'googleStreetView',
                handler: function () { return _this.openGoogleStreetView(_this.contextMenuCoord); }
            }
        ]);
        // this.focusedSearchResult$$ = this.searchStore.stateView
        //   .firstBy$(
        //     (record: EntityRecord<SearchResult>) => record.state.focused === true
        //   )
        //   .subscribe((record: EntityRecord<SearchResult>) => {
        //     const result = record ? record.entity : undefined;
        //     this.onFocusSearchResult(result);
        //   });
        // this.route.queryParams.pipe(debounceTime(500)).subscribe(params => {
        //   if (params['sidenav'] === '1') {
        //     this.openSidenav();
        //   }
        // });
        this.tableStore.load([
            { id: '2', name: 'Name 2', description: 'Description 2' },
            { id: '1', name: 'Name 1', description: 'Description 1' },
            { id: '3', name: 'Name 3', description: 'Description 3' },
            { id: '4', name: 'Name 4', description: 'Description 4' },
            { id: '5', name: 'Name 5', description: 'Description 5' }
        ]);
    };
    PortalComponent.prototype.ngOnDestroy = function () {
        this.context$$.unsubscribe();
        this.searchResults$$.unsubscribe();
        this.focusedSearchResult$$.unsubscribe();
    };
    PortalComponent.prototype.onBackdropClick = function () {
        this.closeSidenav();
    };
    PortalComponent.prototype.onToggleSidenavClick = function () {
        this.toggleSidenav();
    };
    PortalComponent.prototype.onMapQuery = function (event) {
        var _this = this;
        var baseQuerySearchSource = this.getQuerySearchSource();
        var querySearchSourceArray = [];
        var results = event.features.map(function (feature) {
            var querySearchSource = querySearchSourceArray.find(function (s) { return s.title === feature.meta.sourceTitle; });
            if (!querySearchSource) {
                querySearchSource = new _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["QuerySearchSource"]({
                    title: feature.meta.sourceTitle
                });
                querySearchSourceArray.push(querySearchSource);
            }
            return Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["featureToSearchResult"])(feature, querySearchSource);
        });
        var research = {
            request: Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["of"])(results),
            reverse: false,
            source: baseQuerySearchSource
        };
        research.request.subscribe(function (queryResults) {
            _this.queryStore.load(queryResults);
        });
    };
    PortalComponent.prototype.onSearchTermChange = function (term) {
        if (term === undefined || term === '') {
            this.onClearSearch();
            return;
        }
        this.onBeforeSearch();
    };
    PortalComponent.prototype.onSearch = function (event) {
        var results = event.results;
        // TODO: add property in searchSource
        var reverseSearch = event.research.source.getId().indexOf('reverse') !== -1;
        var enabledSources = this.searchSourceService
            .getEnabledSources()
            .filter(function (s) { return (s.getId().indexOf('reverse') !== -1) === reverseSearch; });
        var newResults = this.searchStore.entities$.value
            .filter(function (result) {
            return result.source !== event.research.source &&
                enabledSources.includes(result.source);
        })
            .concat(results);
        this.searchStore.load(newResults);
    };
    PortalComponent.prototype.closeSidenav = function () {
        this.sidenavOpened = false;
    };
    PortalComponent.prototype.openSidenav = function () {
        this.sidenavOpened = true;
    };
    PortalComponent.prototype.toggleSidenav = function () {
        this.sidenavOpened ? this.closeSidenav() : this.openSidenav();
    };
    PortalComponent.prototype.onChangeContext = function (context) {
        if (context === undefined) {
            return;
        }
        if (this.contextLoaded) {
            this.toolState.toolbox.activateTool('mapDetails');
        }
        this.contextLoaded = true;
    };
    PortalComponent.prototype.onBeforeSearch = function () {
        // if (this.mediaService.media$.value === Media.Mobile) {
        //   this.closeToastPanel();
        // }
        this.toolState.toolbox.activateTool('searchResults');
        this.openSidenav();
    };
    // private onSearchMap(results: SearchResult<Feature>[]) {
    // if (results.length > 0) {
    //   this.onBeforeSearch();
    //   this.searchStore.state.update(results[0], { selected: true }, true);
    // }
    // }
    // private onFocusSearchResult(result: SearchResult) {
    // if (result === undefined) {
    //   this.closeToastPanel();
    //   this.searchResult = undefined;
    //   return;
    // }
    //
    // if (result.meta.dataType === FEATURE) {
    //   if (this.mediaService.media$.value === Media.Mobile) {
    //     this.closeSidenav();
    //   }
    //
    //   this.searchResult = result;
    //   this.openToastPanel();
    // } else {
    //   this.searchResult = undefined;
    // }
    // }
    PortalComponent.prototype.addFeatureToMap = function (result) {
        var feature = result.data;
        // Somethimes features have no geometry. It happens with some GetFeatureInfo
        if (feature.geometry === undefined) {
            return;
        }
        this.map.overlay.setFeatures([feature], _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["FeatureMotion"].Default);
    };
    PortalComponent.prototype.onClearSearch = function () {
        this.searchStore.clear();
        // this.closeToastPanel();
    };
    PortalComponent.prototype.getQuerySearchSource = function () {
        return this.searchSourceService
            .getSources()
            .find(function (searchSource) {
            return searchSource instanceof _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["QuerySearchSource"];
        });
    };
    PortalComponent.prototype.onContextMenuOpen = function (event) {
        this.contextMenuCoord = this.getClickCoordinate(event);
    };
    PortalComponent.prototype.getClickCoordinate = function (event) {
        var contextmenuPoint = event;
        var boundingMapBrowser = this.mapBrowser.nativeElement.getBoundingClientRect();
        contextmenuPoint.y =
            contextmenuPoint.y - boundingMapBrowser.top + window.scrollY;
        contextmenuPoint.x =
            contextmenuPoint.x - boundingMapBrowser.left + window.scrollX;
        var pixel = [contextmenuPoint.x, contextmenuPoint.y];
        var coord = this.map.ol.getCoordinateFromPixel(pixel);
        var proj = this.map.projection;
        return ol_proj__WEBPACK_IMPORTED_MODULE_3__["transform"](coord, proj, 'EPSG:4326');
    };
    PortalComponent.prototype.openGoogleMaps = function (coord) {
        window.open(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["GoogleLinks"].getGoogleMapsLink(coord[0], coord[1]));
    };
    PortalComponent.prototype.openGoogleStreetView = function (coord) {
        window.open(_igo2_geo__WEBPACK_IMPORTED_MODULE_7__["GoogleLinks"].getGoogleStreetViewLink(coord[0], coord[1]));
    };
    PortalComponent.prototype.searchCoordinate = function (coord) {
        var _this = this;
        this.searchBarTerm = coord.join(', ');
        var results = this.searchService.reverseSearch(coord);
        this.onBeforeSearch();
        var _loop_1 = function (i) {
            results[i].request.subscribe(function (_results) {
                _this.onSearch({ research: results[i], results: _results });
            });
        };
        for (var i in results) {
            _loop_1(i);
        }
    };
    PortalComponent.prototype.removeMapBrowserClass = function (e) {
        e.element.classList.remove('expansion-offset');
        e.element.classList.remove('sidenav-offset');
    };
    PortalComponent.prototype.updateMapBrowserClass = function (e) {
        if (this.expansionPanelExpanded) {
            e.element.classList.add('expansion-offset');
        }
        if (this.sidenavOpened) {
            e.element.classList.add('sidenav-offset');
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('mapBrowser', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], PortalComponent.prototype, "mapBrowser", void 0);
    PortalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-portal',
            template: __webpack_require__(/*! ./portal.component.html */ "./src/app/pages/portal/portal.component.html"),
            animations: [
                Object(_portal_animation__WEBPACK_IMPORTED_MODULE_9__["expansionPanelAnimation"])(),
                Object(_portal_animation__WEBPACK_IMPORTED_MODULE_9__["toastPanelAnimation"])(),
                Object(_portal_animation__WEBPACK_IMPORTED_MODULE_9__["baselayersAnimation"])(),
                Object(_portal_animation__WEBPACK_IMPORTED_MODULE_9__["controlsAnimations"])(),
                Object(_portal_animation__WEBPACK_IMPORTED_MODULE_9__["controlSlideX"])(),
                Object(_portal_animation__WEBPACK_IMPORTED_MODULE_9__["controlSlideY"])(),
                Object(_portal_animation__WEBPACK_IMPORTED_MODULE_9__["mapSlideX"])(),
                Object(_portal_animation__WEBPACK_IMPORTED_MODULE_9__["mapSlideY"])()
            ],
            styles: [__webpack_require__(/*! ./portal.component.scss */ "./src/app/pages/portal/portal.component.scss")]
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_4__["ConfigService"],
            _igo2_auth__WEBPACK_IMPORTED_MODULE_6__["AuthService"],
            _igo2_core__WEBPACK_IMPORTED_MODULE_4__["MediaService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["LayerService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["DataSourceService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["CapabilitiesService"],
            _igo2_integration__WEBPACK_IMPORTED_MODULE_8__["ContextState"],
            _igo2_integration__WEBPACK_IMPORTED_MODULE_8__["MapState"],
            _igo2_integration__WEBPACK_IMPORTED_MODULE_8__["SearchState"],
            _igo2_integration__WEBPACK_IMPORTED_MODULE_8__["QueryState"],
            _igo2_integration__WEBPACK_IMPORTED_MODULE_8__["ToolState"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["SearchSourceService"],
            _igo2_geo__WEBPACK_IMPORTED_MODULE_7__["SearchService"]])
    ], PortalComponent);
    return PortalComponent;
}());



/***/ }),

/***/ "./src/app/pages/portal/portal.module.ts":
/*!***********************************************!*\
  !*** ./src/app/pages/portal/portal.module.ts ***!
  \***********************************************/
/*! exports provided: PortalModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PortalModule", function() { return PortalModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _igo2_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @igo2/context */ "./dist/igo-lib/context/fesm5/igo2-context.js");
/* harmony import */ var _igo2_integration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @igo2/integration */ "./dist/igo-lib/integration/fesm5/igo2-integration.js");
/* harmony import */ var _expansion_panel_expansion_panel_module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./expansion-panel/expansion-panel.module */ "./src/app/pages/portal/expansion-panel/expansion-panel.module.ts");
/* harmony import */ var _toast_panel_toast_panel_module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./toast-panel/toast-panel.module */ "./src/app/pages/portal/toast-panel/toast-panel.module.ts");
/* harmony import */ var _sidenav_sidenav_module__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./sidenav/sidenav.module */ "./src/app/pages/portal/sidenav/sidenav.module.ts");
/* harmony import */ var _portal_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./portal.component */ "./src/app/pages/portal/portal.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};












var PortalModule = /** @class */ (function () {
    function PortalModule() {
    }
    PortalModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatTooltipModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatButtonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSidenavModule"],
                _igo2_core__WEBPACK_IMPORTED_MODULE_3__["IgoCoreModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoFeatureModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoImportExportModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoMapModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoQueryModule"].forRoot(),
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoSearchModule"].forRoot(),
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoActionModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoWorkspaceModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoEntityModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoGeoWorkspaceModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoPanelModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoToolModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoContextMenuModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoBackdropModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoFlexibleModule"],
                _igo2_integration__WEBPACK_IMPORTED_MODULE_7__["IgoIntegrationModule"],
                _expansion_panel_expansion_panel_module__WEBPACK_IMPORTED_MODULE_8__["AppExpansionPanelModule"],
                _toast_panel_toast_panel_module__WEBPACK_IMPORTED_MODULE_9__["AppToastPanelModule"],
                _sidenav_sidenav_module__WEBPACK_IMPORTED_MODULE_10__["AppSidenavModule"],
                _igo2_context__WEBPACK_IMPORTED_MODULE_6__["IgoContextManagerModule"],
                _igo2_context__WEBPACK_IMPORTED_MODULE_6__["IgoContextMapButtonModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoEntityTableModule"]
            ],
            exports: [_portal_component__WEBPACK_IMPORTED_MODULE_11__["PortalComponent"]],
            declarations: [_portal_component__WEBPACK_IMPORTED_MODULE_11__["PortalComponent"]]
        })
    ], PortalModule);
    return PortalModule;
}());



/***/ }),

/***/ "./src/app/pages/portal/sidenav/sidenav.component.html":
/*!*************************************************************!*\
  !*** ./src/app/pages/portal/sidenav/sidenav.component.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-sidenav\r\n  mode=\"side\"\r\n  [autoFocus]=\"false\"\r\n  [(opened)]=\"opened\">\r\n\r\n  <div class=\"app-sidenav-content\">\r\n\r\n      <div class=\"app-content\" [ngClass]=\"{toolActived: toolbox.activeTool$ | async}\">\r\n\r\n        <button *ngIf=\"toolbox.activeTool$ | async\"\r\n          id=\"homeButton\"\r\n          mat-icon-button\r\n          tooltip-position=\"below\"\r\n          matTooltipShowDelay=\"500\"\r\n          [matTooltip]=\"'igo.context.sidenav.mainMenu' | translate\"\r\n          (click)=\"onUnselectButtonClick()\">\r\n          <mat-icon svgIcon=\"home\"></mat-icon>\r\n        </button>\r\n\r\n        <igo-panel [title]=\"title$ | async | translate\">\r\n          <button *ngIf=\"toolbox.activeTool$ | async\"\r\n            mat-icon-button\r\n            panelLeftButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'igo.context.sidenav.goBack' | translate\"\r\n            (click)=\"onPreviousButtonClick()\">\r\n            <mat-icon svgIcon=\"arrow-left\"></mat-icon>\r\n          </button>\r\n\r\n          <!-- <button *ngIf=\"toolbox.activeTool$ | async\"\r\n            mat-icon-button\r\n            panelRightButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'igo.context.sidenav.mainMenu' | translate\"\r\n            (click)=\"onUnselectButtonClick()\">\r\n            <mat-icon svgIcon=\"close\"></mat-icon>\r\n          </button> -->\r\n\r\n          <igo-toolbox\r\n            [animate]=\"true\"\r\n            [toolbox]=\"toolbox\">\r\n          </igo-toolbox>\r\n\r\n        </igo-panel>\r\n      </div>\r\n  </div>\r\n</mat-sidenav>\r\n"

/***/ }),

/***/ "./src/app/pages/portal/sidenav/sidenav.component.scss":
/*!*************************************************************!*\
  !*** ./src/app/pages/portal/sidenav/sidenav.component.scss ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/*** Generic ***/\nmat-sidenav {\n  -o-box-shadow: 2px 2px 2px 0px #dddddd;\n  box-shadow: 2px 2px 2px 0px #dddddd; }\n:host {\n  background-color: white; }\n:host ::ng-deep mat-sidenav {\n  z-index: 3 !important; }\nmat-sidenav {\n  height: 100%;\n  width: 400px; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    mat-sidenav {\n      width: calc(100% - 40px - 5px); } }\n.app-content, igo-panel {\n  height: 100%; }\n.app-sidenav-content {\n  margin-top: 50px;\n  height: calc(100% - 50px); }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    .app-sidenav-content {\n      height: calc(100% - 50px); } }\nigo-panel ::ng-deep .igo-panel-content {\n  position: relative; }\ndiv.toolActived > igo-panel ::ng-deep > div.igo-panel-header {\n  left: 48px;\n  position: relative;\n  width: 350px; }\n#homeButton {\n  position: absolute;\n  top: 50px;\n  left: 3px;\n  background-color: #1976d2;\n  color: white;\n  border-radius: 0;\n  height: 46px;\n  width: 44px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcG9ydGFsL3NpZGVuYXYvQzpcXE1ybm1pY3JvXFxkZXZcXGlvblxcaWdvMi9zcmNcXHN0eWxlXFxwYXJ0aWFsXFx2YXJpYWJsZXMuc2NzcyIsInNyYy9hcHAvcGFnZXMvcG9ydGFsL3NpZGVuYXYvQzpcXE1ybm1pY3JvXFxkZXZcXGlvblxcaWdvMi9zcmNcXGFwcFxccGFnZXNcXHBvcnRhbFxcc2lkZW5hdlxcc2lkZW5hdi5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvcG9ydGFsL3NpZGVuYXYvQzpcXE1ybm1pY3JvXFxkZXZcXGlvblxcaWdvMi9zcmNcXGFwcFxccGFnZXNcXHBvcnRhbFxccG9ydGFsLnZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9wYWdlcy9wb3J0YWwvc2lkZW5hdi9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxtZWRpYS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLGdCQUFBO0FDYUE7RUQyQkUsc0NBQXNDO0VBQ3RDLG1DQUFtQyxFQUFBO0FDekNyQztFQUNFLHVCQUFvQyxFQUFBO0FBUXRDO0VBQ0UscUJBQXFCLEVBQUE7QUFHdkI7RUFHRSxZQUFZO0VBQ1osWUNGdUIsRUFBQTtBQ1J2QjtJRk1GO01BT0ksOEJDSm1GLEVBQUEsRURNdEY7QUFFRDtFQUNJLFlBQVksRUFBQTtBQUdoQjtFQUNFLGdCQ2hCMkI7RURpQjNCLHlCQ2hCMEQsRUFBQTtBQ1AxRDtJRnFCRjtNQUlJLHlCQUErQyxFQUFBLEVBRWxEO0FBRUQ7RUFDRSxrQkFBa0IsRUFBQTtBQUlwQjtFQUNFLFVBQVU7RUFDVixrQkFBa0I7RUFDbEIsWUFBWSxFQUFBO0FBR2Q7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFNBQVM7RUFDVCx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osV0FBVyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcG9ydGFsL3NpZGVuYXYvc2lkZW5hdi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJ35AaWdvMi9jb3JlL3N0eWxlL3BhcnRpYWwvY29yZS52YXJpYWJsZXMnO1xyXG5cclxuLyoqKiBHZW5lcmljICoqKi9cclxuJGFwcC1iYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7XHJcbiRhcHAtaWNvbi1idXR0b24td2lkdGg6IDQwcHg7XHJcblxyXG4kYXBwLWJvcmRlci13aWR0aDogMXB4O1xyXG4kYXBwLWJvcmRlci1zdHlsZTogc29saWQ7XHJcbiRhcHAtYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIC4yKTtcclxuXHJcbiVib3JkZXItYm94IHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbiVib3JkZXJlZC10b3Age1xyXG4gIGJvcmRlci10b3A6ICRhcHAtYm9yZGVyLXdpZHRoICRhcHAtYm9yZGVyLXN0eWxlICRhcHAtYm9yZGVyLWNvbG9yO1xyXG59XHJcblxyXG4lYm9yZGVyZWQtYm90dG9tIHtcclxuICBib3JkZXItYm90dG9tOiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJvcmRlcmVkLWxlZnQge1xyXG4gIGJvcmRlci1sZWZ0OiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJvcmRlcmVkLXJpZ2h0IHtcclxuICBib3JkZXItcmlnaHQ6ICRhcHAtYm9yZGVyLXdpZHRoICRhcHAtYm9yZGVyLXN0eWxlICRhcHAtYm9yZGVyLWNvbG9yO1xyXG59XHJcblxyXG4lYm94LXNoYWRvd2VkIHtcclxuICAtbW96LWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDBweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgLW8tYm94LXNoYWRvdzogMHB4IDBweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgYm94LXNoYWRvdzogMHB4IDBweCAycHggMHB4ICNkZGRkZGQ7XHJcbn1cclxuXHJcbiVib3gtc2hhZG93ZWQtYm90dG9tLXJpZ2h0IHtcclxuICAtbW96LWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC13ZWJraXQtYm94LXNoYWRvdzogMnB4IDJweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgLW8tYm94LXNoYWRvdzogMnB4IDJweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgYm94LXNoYWRvdzogMnB4IDJweCAycHggMHB4ICNkZGRkZGQ7XHJcbn1cclxuIiwiQGltcG9ydCAnLi4vcG9ydGFsLnZhcmlhYmxlcyc7XHJcblxyXG46aG9zdCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpO1xyXG59XHJcblxyXG4vLyBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHdoZSB1c2luZyB0aGVcclxuLy8gc2lkZW5hdiBcInNpZGVcIiBtb2RlLCB0aGUgei1pbmRleCBpcyAxXHJcbi8vIGFuZCB0aGUgc2lkZW5hdiBhcHBlYXJzIGJlbG93IG91ciBiYWNrZHJvcC5cclxuLy8gVGhlIFwic2lkZVwiIG1vZGUgaXMgcmVxdWlyZWQgdG8gcHJldmVudFxyXG4vLyB0aGUgc2lkZW5hdiBmcm9tIGZvY3VzaW5nIGEgcmFuZG9tIGJ1dHRvbiBvbiBvcGVuLlxyXG46aG9zdCA6Om5nLWRlZXAgbWF0LXNpZGVuYXYge1xyXG4gIHotaW5kZXg6IDMgIWltcG9ydGFudDtcclxufVxyXG5cclxubWF0LXNpZGVuYXYge1xyXG4gIEBleHRlbmQgJWJveC1zaGFkb3dlZC1ib3R0b20tcmlnaHQ7XHJcblxyXG4gIGhlaWdodDogMTAwJTtcclxuICB3aWR0aDogJGFwcC1zaWRlbmF2LXdpZHRoO1xyXG5cclxuICBAaW5jbHVkZSBtb2JpbGUge1xyXG4gICAgd2lkdGg6ICRhcHAtc2lkZW5hdi13aWR0aC1tb2JpbGU7XHJcbiAgfVxyXG59XHJcblxyXG4uYXBwLWNvbnRlbnQsIGlnby1wYW5lbCB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbi5hcHAtc2lkZW5hdi1jb250ZW50IHtcclxuICBtYXJnaW4tdG9wOiAkYXBwLXNpZGVuYXYtbWFyZ2luLXRvcDtcclxuICBoZWlnaHQ6ICRhcHAtc2lkZW5hdi1oZWlnaHQ7XHJcbiAgQGluY2x1ZGUgbW9iaWxlIHtcclxuICAgIGhlaWdodDogY2FsYygxMDAlIC0gI3skYXBwLXNpZGVuYXYtbWFyZ2luLXRvcH0pO1xyXG4gIH1cclxufVxyXG5cclxuaWdvLXBhbmVsIDo6bmctZGVlcCAuaWdvLXBhbmVsLWNvbnRlbnQge1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuXHJcbmRpdi50b29sQWN0aXZlZCA+IGlnby1wYW5lbCA6Om5nLWRlZXAgPiBkaXYuaWdvLXBhbmVsLWhlYWRlciB7XHJcbiAgbGVmdDogNDhweDtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgd2lkdGg6IDM1MHB4O1xyXG59XHJcblxyXG4jaG9tZUJ1dHRvbiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogNTBweDtcclxuICBsZWZ0OiAzcHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzE5NzZkMjtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLXJhZGl1czogMDtcclxuICBoZWlnaHQ6IDQ2cHg7XHJcbiAgd2lkdGg6IDQ0cHg7XHJcbn1cclxuIiwiQGltcG9ydCAnfkBpZ28yL2NvcmUvc3R5bGUvcGFydGlhbC9tZWRpYSc7XHJcbkBpbXBvcnQgJ3ZhcmlhYmxlcyc7XHJcblxyXG4kYXBwLWZvb3Rlci1oZWlnaHQ6IDQ4cHg7XHJcbiRhcHAtbW9iaWxlLW1pbi1zcGFjZS1yaWdodDogNDBweDtcclxuXHJcbiRhcHAtZXhwYW5zaW9uLXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ6IDQ4cHg7XHJcbiRhcHAtZXhwYW5zaW9uLXBhbmVsLWNvbGxhcHNlZC13aWR0aDogNTJweDtcclxuJGFwcC1leHBhbnNpb24tcGFuZWwtaGVpZ2h0OiAyODFweDtcclxuJGFwcC1leHBhbnNpb24tcGFuZWwtaGVhZGVyLWhlaWdodDogJGFwcC1leHBhbnNpb24tcGFuZWwtY29sbGFwc2VkLWhlaWdodDtcclxuXHJcbiRhcHAtdG9hc3QtcGFuZWwtY29sbGFwc2VkLWhlaWdodDogNDhweDtcclxuJGFwcC10b2FzdC1wYW5lbC1tYXgtaGVpZ2h0OiAyODFweDtcclxuJGFwcC10b2FzdC1wYW5lbC13aWR0aDogMzAlO1xyXG5cclxuJGFwcC1zaWRlbmF2LW1hcmdpbi10b3A6IDUwcHg7XHJcbiRhcHAtc2lkZW5hdi1oZWlnaHQ6IGNhbGMoMTAwJSAtICN7JGFwcC1zaWRlbmF2LW1hcmdpbi10b3B9KTtcclxuJGFwcC1zaWRlbmF2LXdpZHRoOiA0MDBweDtcclxuJGFwcC1zaWRlbmF2LXdpZHRoLW1vYmlsZTogY2FsYygxMDAlIC0gI3skYXBwLW1vYmlsZS1taW4tc3BhY2UtcmlnaHR9IC0gI3skaWdvLW1hcmdpbn0pO1xyXG5cclxuJGlnby10b2FzdC1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0OiA0OHB4O1xyXG4kaWdvLXRvYXN0LXBhbmVsLW1heC1oZWlnaHQ6IDMwMHB4O1xyXG4kaWdvLXRvYXN0LXBhbmVsLXdpZHRoOiAzMCU7XHJcblxyXG4kc2VhcmNoLWJhci1sZWZ0OiBjYWxjKCN7JGlnby1pY29uLXNpemV9ICsgI3skaWdvLW1hcmdpbn0pO1xyXG4kc2VhcmNoLWJhci13aWR0aDogY2FsYygjeyRhcHAtc2lkZW5hdi13aWR0aH0gLSAjeyRzZWFyY2gtYmFyLWxlZnR9IC0gKDIgKiAjeyRpZ28tbWFyZ2lufSkpO1xyXG4kc2VhcmNoLWJhci13aWR0aC1tb2JpbGU6IGNhbGMoMTAwJSAtICN7JGFwcC1tb2JpbGUtbWluLXNwYWNlLXJpZ2h0fSAtICN7JHNlYXJjaC1iYXItbGVmdH0gLSAoMyAqICN7JGlnby1tYXJnaW59KSk7XHJcbiIsIiRtb2JpbGU6ICdvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDUwcHgpLCBvbmx5IHNjcmVlbiBhbmQgKG1heC1oZWlnaHQ6IDQ1MHB4KSc7XHJcbiR0YWJsZXQ6ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNDUxcHgpIGFuZCAobWluLWhlaWdodDogNDUxcHgpIGFuZCAobWF4LXdpZHRoOiA4MDBweCknO1xyXG4kZGVza3RvcDogJ29ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA4MDFweCknO1xyXG5cclxuJHNtYWxsLXNjcmVlbjogJ29ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA4MDFweCkgYW5kIChtYXgtd2lkdGg6IDEyNzlweCknO1xyXG4kbWVkaXVtLXNjcmVlbjogJ29ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMjgwcHgpIGFuZCAobWF4LXdpZHRoOiAxOTE5cHgpJztcclxuJGxhcmdlLXNjcmVlbjogJ29ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxOTIwcHgpJztcclxuXHJcbkBtaXhpbiBtb2JpbGUge1xyXG4gIEBtZWRpYSAjeyRtb2JpbGV9IHtcclxuICAgIEBjb250ZW50O1xyXG4gIH1cclxufVxyXG5cclxuQG1peGluIHRhYmxldCB7XHJcbiAgQG1lZGlhICN7JHRhYmxldH0ge1xyXG4gICAgQGNvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5AbWl4aW4gZGVza3RvcCB7XHJcbiAgQG1lZGlhICN7JGRlc2t0b3B9IHtcclxuICAgIEBjb250ZW50O1xyXG4gIH1cclxufVxyXG5cclxuQG1peGluIHNtYWxsLXNjcmVlbiB7XHJcbiAgICBAbWVkaWEgI3skc21hbGwtc2NyZWVufSB7XHJcbiAgICAgIEBjb250ZW50O1xyXG4gICAgfVxyXG59XHJcblxyXG5AbWl4aW4gbWVkaXVtLXNjcmVlbiB7XHJcbiAgQG1lZGlhICN7JG1lZGl1bS1zY3JlZW59IHtcclxuICAgIEBjb250ZW50O1xyXG4gIH1cclxufVxyXG5cclxuQG1peGluIGxhcmdlLXNjcmVlbiB7XHJcbiAgICBAbWVkaWEgI3skbGFyZ2Utc2NyZWVufSB7XHJcbiAgICAgIEBjb250ZW50O1xyXG4gICAgfVxyXG59XHJcbiJdfQ== */"

/***/ }),

/***/ "./src/app/pages/portal/sidenav/sidenav.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/pages/portal/sidenav/sidenav.component.ts ***!
  \***********************************************************/
/*! exports provided: SidenavComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SidenavComponent", function() { return SidenavComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/format/GeoJSON */ "./node_modules/ol/format/GeoJSON.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _igo2_integration__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/integration */ "./dist/igo-lib/integration/fesm5/igo2-integration.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var SidenavComponent = /** @class */ (function () {
    function SidenavComponent(toolState) {
        this.toolState = toolState;
        this.title$ = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"](undefined);
        this.topPanelState = 'initial';
        this.format = new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_2__["default"]();
        this.openedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    Object.defineProperty(SidenavComponent.prototype, "map", {
        get: function () {
            return this._map;
        },
        set: function (value) {
            this._map = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "searchResult", {
        get: function () {
            return this._searchResult;
        },
        set: function (value) {
            this._searchResult = value;
            if (!value) {
                this.topPanelState = 'initial';
            }
            else if (this.topPanelState === 'initial') {
                this.topPanelState = 'collapsed';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "opened", {
        get: function () {
            return this._opened;
        },
        set: function (value) {
            if (value === this._opened) {
                return;
            }
            this._opened = value;
            this.openedChange.emit(this._opened);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "toolbox", {
        get: function () {
            return this.toolState.toolbox;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavComponent.prototype, "panelTitle", {
        get: function () {
            var title;
            if (this.searchResult !== undefined) {
                title = Object(_igo2_common__WEBPACK_IMPORTED_MODULE_3__["getEntityTitle"])(this.searchResult);
            }
            return title;
        },
        enumerable: true,
        configurable: true
    });
    SidenavComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.activeTool$$ = this.toolbox.activeTool$.subscribe(function (tool) {
            _this.title$.next(tool ? tool.title : 'IGO');
        });
    };
    SidenavComponent.prototype.ngOnDestroy = function () {
        this.activeTool$$.unsubscribe();
    };
    SidenavComponent.prototype.onPreviousButtonClick = function () {
        this.toolbox.activatePreviousTool();
    };
    SidenavComponent.prototype.onUnselectButtonClick = function () {
        this.toolbox.deactivateTool();
    };
    SidenavComponent.prototype.zoomToFeatureExtent = function () {
        if (this.searchResult.data.geometry) {
            var olFeature = this.format.readFeature(this.searchResult.data, {
                dataProjection: this.searchResult.data.geometry.projection,
                featureProjection: this.map.projection
            });
            Object(_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["moveToOlFeatures"])(this.map, olFeature);
        }
    };
    SidenavComponent.prototype.toggleTopPanel = function () {
        if (this.topPanelState === 'collapsed') {
            this.topPanelState = 'expanded';
        }
        else {
            this.topPanelState = 'collapsed';
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoMap"]),
        __metadata("design:paramtypes", [_igo2_geo__WEBPACK_IMPORTED_MODULE_4__["IgoMap"]])
    ], SidenavComponent.prototype, "map", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], SidenavComponent.prototype, "searchResult", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], SidenavComponent.prototype, "opened", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], SidenavComponent.prototype, "openedChange", void 0);
    SidenavComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-sidenav',
            template: __webpack_require__(/*! ./sidenav.component.html */ "./src/app/pages/portal/sidenav/sidenav.component.html"),
            changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            styles: [__webpack_require__(/*! ./sidenav.component.scss */ "./src/app/pages/portal/sidenav/sidenav.component.scss")]
        }),
        __metadata("design:paramtypes", [_igo2_integration__WEBPACK_IMPORTED_MODULE_5__["ToolState"]])
    ], SidenavComponent);
    return SidenavComponent;
}());



/***/ }),

/***/ "./src/app/pages/portal/sidenav/sidenav.module.ts":
/*!********************************************************!*\
  !*** ./src/app/pages/portal/sidenav/sidenav.module.ts ***!
  \********************************************************/
/*! exports provided: AppSidenavModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppSidenavModule", function() { return AppSidenavModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _igo2_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @igo2/context */ "./dist/igo-lib/context/fesm5/igo2-context.js");
/* harmony import */ var _toolbox_toolbox_module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../toolbox/toolbox.module */ "./src/app/pages/portal/toolbox/toolbox.module.ts");
/* harmony import */ var _sidenav_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sidenav.component */ "./src/app/pages/portal/sidenav/sidenav.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};









var AppSidenavModule = /** @class */ (function () {
    function AppSidenavModule() {
    }
    AppSidenavModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatButtonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatSidenavModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatTooltipModule"],
                _igo2_core__WEBPACK_IMPORTED_MODULE_3__["IgoLanguageModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoPanelModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoFlexibleModule"],
                _igo2_context__WEBPACK_IMPORTED_MODULE_6__["IgoContextManagerModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_4__["IgoToolModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoFeatureModule"],
                _toolbox_toolbox_module__WEBPACK_IMPORTED_MODULE_7__["ToolboxModule"]
            ],
            exports: [_sidenav_component__WEBPACK_IMPORTED_MODULE_8__["SidenavComponent"]],
            declarations: [_sidenav_component__WEBPACK_IMPORTED_MODULE_8__["SidenavComponent"]]
        })
    ], AppSidenavModule);
    return AppSidenavModule;
}());



/***/ }),

/***/ "./src/app/pages/portal/toast-panel/toast-panel.component.html":
/*!*********************************************************************!*\
  !*** ./src/app/pages/portal/toast-panel/toast-panel.component.html ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<igo-panel\r\n  *ngIf=\"store.entities$ | async\"\r\n  [title]=\"resultSelected$.value ? getTitle(resultSelected$.value) : 'Liste des résultats'\"\r\n  (click)=\"onToggleClick($event)\"\r\n  (swipeleft)=\"swipe($event.type)\"\r\n  (swiperight)=\"swipe($event.type)\"\r\n  (swipeup)=\"swipe($event.type)\"\r\n  (swipedown)=\"swipe($event.type)\">\r\n\r\n  <button\r\n    *ngIf=\"resultSelected$.value\"\r\n    mat-icon-button\r\n    igoStopPropagation\r\n    panelLeftButton\r\n    (click)=\"unselectResult()\">\r\n    <mat-icon svgIcon=\"format-list-bulleted-square\"></mat-icon>\r\n  </button>\r\n\r\n  <button\r\n    *ngIf=\"resultSelected$.value\"\r\n    [disabled]=\"results[0].meta.id === resultSelected$.value.meta.id\"\r\n    mat-icon-button\r\n    igoStopPropagation\r\n    panelLeftButton\r\n    (click)=\"previousResult()\">\r\n    <mat-icon svgIcon=\"chevron-left\"></mat-icon>\r\n  </button>\r\n\r\n  <button\r\n    *ngIf=\"resultSelected$.value\"\r\n    [disabled]=\"results[results.length-1].meta.id === resultSelected$.value.meta.id\"\r\n    mat-icon-button\r\n    igoStopPropagation\r\n    panelRightButton\r\n    (click)=\"nextResult()\">\r\n    <mat-icon svgIcon=\"chevron-right\"></mat-icon>\r\n  </button>\r\n\r\n  <button\r\n    mat-icon-button\r\n    igoStopPropagation\r\n    panelRightButton\r\n    (click)=\"clear()\">\r\n    <mat-icon svgIcon=\"close\"></mat-icon>\r\n  </button>\r\n\r\n  <div\r\n    #content\r\n    igoStopPropagation>\r\n\r\n    <igo-feature-details\r\n      *ngIf=\"resultSelected$.value\"\r\n      [feature]=\"resultSelected$.value.data\">\r\n    </igo-feature-details>\r\n\r\n    <igo-search-results\r\n      *ngIf=\"!resultSelected$.value\"\r\n      [store]=\"store\"\r\n      (resultFocus)=\"focusResult($event)\"\r\n      (resultSelect)=\"selectResult($event)\">\r\n    </igo-search-results>\r\n\r\n  </div>\r\n</igo-panel>\r\n"

/***/ }),

/***/ "./src/app/pages/portal/toast-panel/toast-panel.component.scss":
/*!*********************************************************************!*\
  !*** ./src/app/pages/portal/toast-panel/toast-panel.component.scss ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/*** Generic ***/\n:host {\n  -o-box-shadow: 0px 0px 2px 0px #dddddd;\n  box-shadow: 0px 0px 2px 0px #dddddd; }\n:host {\n  background-color: white;\n  height: 48px;\n  max-height: 281px;\n  transition: height 280ms cubic-bezier(0.4, 0, 0.2, 1);\n  padding: 5px; }\n:host.app-toast-panel-opened {\n  height: auto;\n  max-height: 281px; }\n@media only screen and (max-width: 450px), only screen and (max-height: 450px) {\n    :host.app-toast-panel-opened {\n      height: 40%; } }\nigo-panel ::ng-deep .igo-panel-header:hover {\n  cursor: pointer; }\ndiv[igostoppropagation] {\n  height: 100%;\n  width: 100%; }\nigo-panel {\n  height: 100%; }\nigo-panel ::ng-deep h3 {\n  display: flex; }\nigo-panel ::ng-deep .igo-panel-title {\n  flex-grow: 2;\n  margin: 0; }\nigo-panel ::ng-deep .igo-panel-header ::ng-deep [panelleftbutton],\nigo-panel ::ng-deep .igo-panel-header ::ng-deep [panelrightbutton] {\n  margin: 0; }\nigo-panel ::ng-deep .igo-panel-content {\n  max-height: 230px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcG9ydGFsL3RvYXN0LXBhbmVsL0M6XFxNcm5taWNyb1xcZGV2XFxpb25cXGlnbzIvc3JjXFxzdHlsZVxccGFydGlhbFxcdmFyaWFibGVzLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3BvcnRhbC90b2FzdC1wYW5lbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL3NyY1xcYXBwXFxwYWdlc1xccG9ydGFsXFx0b2FzdC1wYW5lbFxcdG9hc3QtcGFuZWwuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3BvcnRhbC90b2FzdC1wYW5lbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL3NyY1xcYXBwXFxwYWdlc1xccG9ydGFsXFxwb3J0YWwudmFyaWFibGVzLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3BvcnRhbC90b2FzdC1wYW5lbC9DOlxcTXJubWljcm9cXGRldlxcaW9uXFxpZ28yL2Rpc3RcXGlnby1saWJcXGNvcmVcXHN0eWxlXFxwYXJ0aWFsXFxjb3JlLnZhcmlhYmxlcy5zY3NzIiwic3JjL2FwcC9wYWdlcy9wb3J0YWwvdG9hc3QtcGFuZWwvQzpcXE1ybm1pY3JvXFxkZXZcXGlvblxcaWdvMi9kaXN0XFxpZ28tbGliXFxjb3JlXFxzdHlsZVxccGFydGlhbFxcbWVkaWEuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxnQkFBQTtBQ0FBO0VEaUNFLHNDQUFzQztFQUN0QyxtQ0FBbUMsRUFBQTtBQ2xDckM7RUFHRSx1QkFBdUI7RUFFdkIsWUNJcUM7RURIckMsaUJDSWdDO0VERmhDLHFEQUFnRDtFQUNoRCxZRVZlLEVBQUE7QUZhakI7RUFDRSxZQUFZO0VBQ1osaUJDSmdDLEVBQUE7QUVIaEM7SUhLRjtNQUtJLFdBQVcsRUFBQSxFQUVkO0FBRUQ7RUFDRSxlQUFlLEVBQUE7QUFHakI7RUFDRSxZQUFZO0VBQ1osV0FBVyxFQUFBO0FBR2I7RUFDRSxZQUFZLEVBQUE7QUFHZDtFQUNFLGFBQWEsRUFBQTtBQUdmO0VBQ0UsWUFBWTtFQUNaLFNBQVMsRUFBQTtBQUdYOztFQUVFLFNBQVMsRUFBQTtBQUdYO0VBQ0UsaUJBQWlCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wb3J0YWwvdG9hc3QtcGFuZWwvdG9hc3QtcGFuZWwuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICd+QGlnbzIvY29yZS9zdHlsZS9wYXJ0aWFsL2NvcmUudmFyaWFibGVzJztcclxuXHJcbi8qKiogR2VuZXJpYyAqKiovXHJcbiRhcHAtYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpO1xyXG4kYXBwLWljb24tYnV0dG9uLXdpZHRoOiA0MHB4O1xyXG5cclxuJGFwcC1ib3JkZXItd2lkdGg6IDFweDtcclxuJGFwcC1ib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4kYXBwLWJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAuMik7XHJcblxyXG4lYm9yZGVyLWJveCB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG4lYm9yZGVyZWQtdG9wIHtcclxuICBib3JkZXItdG9wOiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJvcmRlcmVkLWJvdHRvbSB7XHJcbiAgYm9yZGVyLWJvdHRvbTogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1sZWZ0IHtcclxuICBib3JkZXItbGVmdDogJGFwcC1ib3JkZXItd2lkdGggJGFwcC1ib3JkZXItc3R5bGUgJGFwcC1ib3JkZXItY29sb3I7XHJcbn1cclxuXHJcbiVib3JkZXJlZC1yaWdodCB7XHJcbiAgYm9yZGVyLXJpZ2h0OiAkYXBwLWJvcmRlci13aWR0aCAkYXBwLWJvcmRlci1zdHlsZSAkYXBwLWJvcmRlci1jb2xvcjtcclxufVxyXG5cclxuJWJveC1zaGFkb3dlZCB7XHJcbiAgLW1vei1ib3gtc2hhZG93OiAwcHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC1vLWJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIGJveC1zaGFkb3c6IDBweCAwcHggMnB4IDBweCAjZGRkZGRkO1xyXG59XHJcblxyXG4lYm94LXNoYWRvd2VkLWJvdHRvbS1yaWdodCB7XHJcbiAgLW1vei1ib3gtc2hhZG93OiAycHggMnB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtd2Via2l0LWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIC1vLWJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG4gIGJveC1zaGFkb3c6IDJweCAycHggMnB4IDBweCAjZGRkZGRkO1xyXG59XHJcbiIsIkBpbXBvcnQgJy4uL3BvcnRhbC52YXJpYWJsZXMnO1xyXG5cclxuOmhvc3Qge1xyXG4gIEBleHRlbmQgJWJveC1zaGFkb3dlZDtcclxuXHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcblxyXG4gIGhlaWdodDogJGFwcC10b2FzdC1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0O1xyXG4gIG1heC1oZWlnaHQ6ICRhcHAtdG9hc3QtcGFuZWwtbWF4LWhlaWdodDtcclxuXHJcbiAgdHJhbnNpdGlvbjogaGVpZ2h0IDI4MG1zIGN1YmljLWJlemllciguNCwwLC4yLDEpO1xyXG4gIHBhZGRpbmc6ICRpZ28tcGFkZGluZztcclxufVxyXG5cclxuOmhvc3QuYXBwLXRvYXN0LXBhbmVsLW9wZW5lZCB7XHJcbiAgaGVpZ2h0OiBhdXRvO1xyXG4gIG1heC1oZWlnaHQ6ICRhcHAtdG9hc3QtcGFuZWwtbWF4LWhlaWdodDtcclxuXHJcbiAgQGluY2x1ZGUgbW9iaWxlIHtcclxuICAgIGhlaWdodDogNDAlO1xyXG4gIH1cclxufVxyXG5cclxuaWdvLXBhbmVsIDo6bmctZGVlcCAuaWdvLXBhbmVsLWhlYWRlcjpob3ZlciB7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5kaXZbaWdvc3RvcHByb3BhZ2F0aW9uXSB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG5pZ28tcGFuZWwge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuaWdvLXBhbmVsIDo6bmctZGVlcCBoMyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG5cclxuaWdvLXBhbmVsIDo6bmctZGVlcCAuaWdvLXBhbmVsLXRpdGxlIHtcclxuICBmbGV4LWdyb3c6IDI7XHJcbiAgbWFyZ2luOiAwO1xyXG59XHJcblxyXG5pZ28tcGFuZWwgOjpuZy1kZWVwIC5pZ28tcGFuZWwtaGVhZGVyIDo6bmctZGVlcCBbcGFuZWxsZWZ0YnV0dG9uXSxcclxuaWdvLXBhbmVsIDo6bmctZGVlcCAuaWdvLXBhbmVsLWhlYWRlciA6Om5nLWRlZXAgW3BhbmVscmlnaHRidXR0b25dIHtcclxuICBtYXJnaW46IDA7XHJcbn1cclxuXHJcbmlnby1wYW5lbCA6Om5nLWRlZXAgLmlnby1wYW5lbC1jb250ZW50IHtcclxuICBtYXgtaGVpZ2h0OiAyMzBweDtcclxufVxyXG4iLCJAaW1wb3J0ICd+QGlnbzIvY29yZS9zdHlsZS9wYXJ0aWFsL21lZGlhJztcclxuQGltcG9ydCAndmFyaWFibGVzJztcclxuXHJcbiRhcHAtZm9vdGVyLWhlaWdodDogNDhweDtcclxuJGFwcC1tb2JpbGUtbWluLXNwYWNlLXJpZ2h0OiA0MHB4O1xyXG5cclxuJGFwcC1leHBhbnNpb24tcGFuZWwtY29sbGFwc2VkLWhlaWdodDogNDhweDtcclxuJGFwcC1leHBhbnNpb24tcGFuZWwtY29sbGFwc2VkLXdpZHRoOiA1MnB4O1xyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1oZWlnaHQ6IDI4MXB4O1xyXG4kYXBwLWV4cGFuc2lvbi1wYW5lbC1oZWFkZXItaGVpZ2h0OiAkYXBwLWV4cGFuc2lvbi1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0O1xyXG5cclxuJGFwcC10b2FzdC1wYW5lbC1jb2xsYXBzZWQtaGVpZ2h0OiA0OHB4O1xyXG4kYXBwLXRvYXN0LXBhbmVsLW1heC1oZWlnaHQ6IDI4MXB4O1xyXG4kYXBwLXRvYXN0LXBhbmVsLXdpZHRoOiAzMCU7XHJcblxyXG4kYXBwLXNpZGVuYXYtbWFyZ2luLXRvcDogNTBweDtcclxuJGFwcC1zaWRlbmF2LWhlaWdodDogY2FsYygxMDAlIC0gI3skYXBwLXNpZGVuYXYtbWFyZ2luLXRvcH0pO1xyXG4kYXBwLXNpZGVuYXYtd2lkdGg6IDQwMHB4O1xyXG4kYXBwLXNpZGVuYXYtd2lkdGgtbW9iaWxlOiBjYWxjKDEwMCUgLSAjeyRhcHAtbW9iaWxlLW1pbi1zcGFjZS1yaWdodH0gLSAjeyRpZ28tbWFyZ2lufSk7XHJcblxyXG4kaWdvLXRvYXN0LXBhbmVsLWNvbGxhcHNlZC1oZWlnaHQ6IDQ4cHg7XHJcbiRpZ28tdG9hc3QtcGFuZWwtbWF4LWhlaWdodDogMzAwcHg7XHJcbiRpZ28tdG9hc3QtcGFuZWwtd2lkdGg6IDMwJTtcclxuXHJcbiRzZWFyY2gtYmFyLWxlZnQ6IGNhbGMoI3skaWdvLWljb24tc2l6ZX0gKyAjeyRpZ28tbWFyZ2lufSk7XHJcbiRzZWFyY2gtYmFyLXdpZHRoOiBjYWxjKCN7JGFwcC1zaWRlbmF2LXdpZHRofSAtICN7JHNlYXJjaC1iYXItbGVmdH0gLSAoMiAqICN7JGlnby1tYXJnaW59KSk7XHJcbiRzZWFyY2gtYmFyLXdpZHRoLW1vYmlsZTogY2FsYygxMDAlIC0gI3skYXBwLW1vYmlsZS1taW4tc3BhY2UtcmlnaHR9IC0gI3skc2VhcmNoLWJhci1sZWZ0fSAtICgzICogI3skaWdvLW1hcmdpbn0pKTtcclxuIiwiJGlnby1tYXJnaW46IDVweDtcclxuJGlnby1wYWRkaW5nOiA1cHg7XHJcbiRpZ28taWNvbi1zaXplOiA0MHB4O1xyXG4iLCIkbW9iaWxlOiAnb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQ1MHB4KSwgb25seSBzY3JlZW4gYW5kIChtYXgtaGVpZ2h0OiA0NTBweCknO1xyXG4kdGFibGV0OiAnb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDQ1MXB4KSBhbmQgKG1pbi1oZWlnaHQ6IDQ1MXB4KSBhbmQgKG1heC13aWR0aDogODAwcHgpJztcclxuJGRlc2t0b3A6ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogODAxcHgpJztcclxuXHJcbiRzbWFsbC1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogODAxcHgpIGFuZCAobWF4LXdpZHRoOiAxMjc5cHgpJztcclxuJG1lZGl1bS1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTI4MHB4KSBhbmQgKG1heC13aWR0aDogMTkxOXB4KSc7XHJcbiRsYXJnZS1zY3JlZW46ICdvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMHB4KSc7XHJcblxyXG5AbWl4aW4gbW9iaWxlIHtcclxuICBAbWVkaWEgI3skbW9iaWxlfSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiB0YWJsZXQge1xyXG4gIEBtZWRpYSAjeyR0YWJsZXR9IHtcclxuICAgIEBjb250ZW50O1xyXG4gIH1cclxufVxyXG5cclxuQG1peGluIGRlc2t0b3Age1xyXG4gIEBtZWRpYSAjeyRkZXNrdG9wfSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiBzbWFsbC1zY3JlZW4ge1xyXG4gICAgQG1lZGlhICN7JHNtYWxsLXNjcmVlbn0ge1xyXG4gICAgICBAY29udGVudDtcclxuICAgIH1cclxufVxyXG5cclxuQG1peGluIG1lZGl1bS1zY3JlZW4ge1xyXG4gIEBtZWRpYSAjeyRtZWRpdW0tc2NyZWVufSB7XHJcbiAgICBAY29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbkBtaXhpbiBsYXJnZS1zY3JlZW4ge1xyXG4gICAgQG1lZGlhICN7JGxhcmdlLXNjcmVlbn0ge1xyXG4gICAgICBAY29udGVudDtcclxuICAgIH1cclxufVxyXG4iXX0= */"

/***/ }),

/***/ "./src/app/pages/portal/toast-panel/toast-panel.component.ts":
/*!*******************************************************************!*\
  !*** ./src/app/pages/portal/toast-panel/toast-panel.component.ts ***!
  \*******************************************************************/
/*! exports provided: ToastPanelComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToastPanelComponent", function() { return ToastPanelComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ToastPanelComponent = /** @class */ (function () {
    function ToastPanelComponent() {
        this.resultSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.resultFocus = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.resultSelected$ = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"](undefined);
        this.opened = true;
    }
    ToastPanelComponent_1 = ToastPanelComponent;
    Object.defineProperty(ToastPanelComponent.prototype, "store", {
        get: function () {
            return this._store;
        },
        set: function (value) {
            var _this = this;
            this._store = value;
            this.store.entities$.subscribe(function (_entities) {
                _this.unselectResult();
            });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToastPanelComponent.prototype, "hasOpenedClass", {
        get: function () {
            return this.opened;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToastPanelComponent.prototype, "displayStyle", {
        get: function () {
            return this.results.length ? 'visible' : 'hidden';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToastPanelComponent.prototype, "results", {
        get: function () {
            // return this.store.view.filter((e) => e.meta.dataType === FEATURE).all();
            return this.store.all();
        },
        enumerable: true,
        configurable: true
    });
    ToastPanelComponent.prototype.getTitle = function (result) {
        return Object(_igo2_common__WEBPACK_IMPORTED_MODULE_2__["getEntityTitle"])(result);
    };
    ToastPanelComponent.prototype.focusResult = function (result) {
        this.resultFocus.emit(result);
    };
    ToastPanelComponent.prototype.selectResult = function (result) {
        this.store.state.update(result, {
            focused: true,
            selected: true
        }, true);
        this.resultSelected$.next(result);
        this.resultSelect.emit(result);
    };
    ToastPanelComponent.prototype.unselectResult = function () {
        this.resultSelected$.next(undefined);
        this.store.state.clear();
    };
    ToastPanelComponent.prototype.clear = function () {
        this.store.clear();
        this.unselectResult();
    };
    ToastPanelComponent.prototype.previousResult = function () {
        if (!this.resultSelected$.value) {
            return;
        }
        var i = this.results.indexOf(this.resultSelected$.value);
        var previousResult = this.results[--i];
        if (previousResult) {
            this.selectResult(previousResult);
        }
    };
    ToastPanelComponent.prototype.nextResult = function () {
        if (!this.resultSelected$.value) {
            return;
        }
        var i = this.results.indexOf(this.resultSelected$.value);
        var nextResult = this.results[++i];
        if (nextResult) {
            this.selectResult(nextResult);
        }
    };
    ToastPanelComponent.prototype.swipe = function (action) {
        if (action === ToastPanelComponent_1.SWIPE_ACTION.LEFT) {
            this.previousResult();
        }
        else if (action === ToastPanelComponent_1.SWIPE_ACTION.RIGHT) {
            this.nextResult();
        }
        else if (action === ToastPanelComponent_1.SWIPE_ACTION.UP) {
            this.opened = true;
        }
        else if (action === ToastPanelComponent_1.SWIPE_ACTION.DOWN) {
            this.opened = false;
        }
    };
    ToastPanelComponent.prototype.onToggleClick = function (e) {
        if (e.srcElement.className !== 'igo-panel-title') {
            return;
        }
        this.opened = !this.opened;
    };
    var ToastPanelComponent_1;
    ToastPanelComponent.SWIPE_ACTION = {
        RIGHT: 'swiperight',
        LEFT: 'swipeleft',
        UP: 'swipeup',
        DOWN: 'swipedown'
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _igo2_common__WEBPACK_IMPORTED_MODULE_2__["EntityStore"]),
        __metadata("design:paramtypes", [_igo2_common__WEBPACK_IMPORTED_MODULE_2__["EntityStore"]])
    ], ToastPanelComponent.prototype, "store", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ToastPanelComponent.prototype, "resultSelect", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], ToastPanelComponent.prototype, "resultFocus", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"])('class.app-toast-panel-opened'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], ToastPanelComponent.prototype, "hasOpenedClass", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostBinding"])('style.visibility'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], ToastPanelComponent.prototype, "displayStyle", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('document:keydown.ArrowLeft'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], ToastPanelComponent.prototype, "previousResult", null);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"])('document:keydown.ArrowRight'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], ToastPanelComponent.prototype, "nextResult", null);
    ToastPanelComponent = ToastPanelComponent_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-toast-panel',
            template: __webpack_require__(/*! ./toast-panel.component.html */ "./src/app/pages/portal/toast-panel/toast-panel.component.html"),
            changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            styles: [__webpack_require__(/*! ./toast-panel.component.scss */ "./src/app/pages/portal/toast-panel/toast-panel.component.scss")]
        }),
        __metadata("design:paramtypes", [])
    ], ToastPanelComponent);
    return ToastPanelComponent;
}());



/***/ }),

/***/ "./src/app/pages/portal/toast-panel/toast-panel.module.ts":
/*!****************************************************************!*\
  !*** ./src/app/pages/portal/toast-panel/toast-panel.module.ts ***!
  \****************************************************************/
/*! exports provided: AppToastPanelModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppToastPanelModule", function() { return AppToastPanelModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _igo2_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @igo2/core */ "./dist/igo-lib/core/fesm5/igo2-core.js");
/* harmony import */ var _igo2_geo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @igo2/geo */ "./dist/igo-lib/geo/fesm5/igo2-geo.js");
/* harmony import */ var _toast_panel_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./toast-panel.component */ "./src/app/pages/portal/toast-panel/toast-panel.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};







var AppToastPanelModule = /** @class */ (function () {
    function AppToastPanelModule() {
    }
    AppToastPanelModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatButtonModule"],
                _igo2_core__WEBPACK_IMPORTED_MODULE_4__["IgoLanguageModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_3__["IgoPanelModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_3__["IgoStopPropagationModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoFeatureModule"],
                _igo2_geo__WEBPACK_IMPORTED_MODULE_5__["IgoSearchResultsModule"]
            ],
            exports: [_toast_panel_component__WEBPACK_IMPORTED_MODULE_6__["ToastPanelComponent"]],
            declarations: [_toast_panel_component__WEBPACK_IMPORTED_MODULE_6__["ToastPanelComponent"]]
        })
    ], AppToastPanelModule);
    return AppToastPanelModule;
}());



/***/ }),

/***/ "./src/app/pages/portal/toolbox/toolbox.animation.ts":
/*!***********************************************************!*\
  !*** ./src/app/pages/portal/toolbox/toolbox.animation.ts ***!
  \***********************************************************/
/*! exports provided: toolSlideInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toolSlideInOut", function() { return toolSlideInOut; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "./node_modules/@angular/animations/fesm5/animations.js");

function toolSlideInOut(speed, type) {
    if (speed === void 0) { speed = '300ms'; }
    if (type === void 0) { type = 'ease-in-out'; }
    return Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('toolSlideInOut', [
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('enter', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
            transform: 'translate3d(0, 0, 0)'
        })),
        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => enter', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(speed + ' ' + type))
    ]);
}


/***/ }),

/***/ "./src/app/pages/portal/toolbox/toolbox.component.html":
/*!*************************************************************!*\
  !*** ./src/app/pages/portal/toolbox/toolbox.component.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<igo-actionbar\r\n  *ngIf=\"(toolbar$ | async).length > 0\"\r\n  [store]=\"actionStore\"\r\n  [withIcon]=\"true\"\r\n  [withTitle]=\"toolbarWithTitle\"\r\n  [horizontal]=\"false\">\r\n</igo-actionbar>\r\n\r\n<div\r\n  *ngIf=\"activeTool$ | async as tool\"\r\n  class=\"igo-tool-container\"\r\n  [ngClass]=\"{'igo-tool-container-with-toolbar': !actionStore.empty, 'igo-tool-container-with-animation': animate}\"\r\n  [@toolSlideInOut]=\"animation$ | async\"\r\n  (@toolSlideInOut.start)=\"onAnimationStart()\"\r\n  (@toolSlideInOut.done)=\"onAnimationComplete()\">\r\n\r\n  <igo-dynamic-outlet\r\n    [component]=\"tool.component\"\r\n    [inputs]=\"getToolInputs(tool)\">\r\n  </igo-dynamic-outlet>\r\n\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/pages/portal/toolbox/toolbox.component.scss":
/*!*************************************************************!*\
  !*** ./src/app/pages/portal/toolbox/toolbox.component.scss ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host {\n  display: block;\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n  height: 100%; }\n\n/*** Actionbar and toolbox ***/\n\n.igo-tool-container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0; }\n\n.igo-tool-container-with-animation {\n  transform: translate3d(100%, 0, 0); }\n\n.igo-tool-container-with-toolbar {\n  left: 51px; }\n\nigo-actionbar {\n  height: 100%; }\n\nigo-actionbar.with-title {\n  width: 100%;\n  overflow: auto; }\n\nigo-actionbar:not(.with-title) {\n  width: 46px;\n  overflow: hidden;\n  -o-box-shadow: 2px 0px 2px 0px #dddddd;\n  box-shadow: 2px 0px 2px 0px #dddddd; }\n\nigo-actionbar ::ng-deep igo-list {\n  overflow: inherit; }\n\nigo-dynamic-outlet {\n  overflow: auto; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcG9ydGFsL3Rvb2xib3gvQzpcXE1ybm1pY3JvXFxkZXZcXGlvblxcaWdvMi9zcmNcXGFwcFxccGFnZXNcXHBvcnRhbFxcdG9vbGJveFxcdG9vbGJveC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxZQUFZLEVBQUE7O0FBR2QsOEJBQUE7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUSxFQUFBOztBQUdWO0VBQ0Usa0NBQWtDLEVBQUE7O0FBR3BDO0VBQ0UsVUFBVSxFQUFBOztBQUdaO0VBQ0UsWUFBWSxFQUFBOztBQUdkO0VBQ0UsV0FBVztFQUNYLGNBQWMsRUFBQTs7QUFHaEI7RUFDRSxXQUFXO0VBQ1gsZ0JBQWdCO0VBR2hCLHNDQUFzQztFQUN0QyxtQ0FBbUMsRUFBQTs7QUFHckM7RUFDRSxpQkFBaUIsRUFBQTs7QUFHbkI7RUFDRSxjQUFjLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wb3J0YWwvdG9vbGJveC90b29sYm94LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLyoqKiBBY3Rpb25iYXIgYW5kIHRvb2xib3ggKioqL1xyXG5cclxuLmlnby10b29sLWNvbnRhaW5lciB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogMDtcclxuICBib3R0b206IDA7XHJcbiAgbGVmdDogMDtcclxuICByaWdodDogMDtcclxufVxyXG5cclxuLmlnby10b29sLWNvbnRhaW5lci13aXRoLWFuaW1hdGlvbiB7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgxMDAlLCAwLCAwKTtcclxufVxyXG5cclxuLmlnby10b29sLWNvbnRhaW5lci13aXRoLXRvb2xiYXIge1xyXG4gIGxlZnQ6IDUxcHg7XHJcbn1cclxuXHJcbmlnby1hY3Rpb25iYXIge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuaWdvLWFjdGlvbmJhci53aXRoLXRpdGxlIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBvdmVyZmxvdzogYXV0bztcclxufVxyXG5cclxuaWdvLWFjdGlvbmJhcjpub3QoLndpdGgtdGl0bGUpIHtcclxuICB3aWR0aDogNDZweDtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIC1tb3otYm94LXNoYWRvdzogMnB4IDBweCAycHggMHB4ICNkZGRkZGQ7XHJcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiAycHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxuICAtby1ib3gtc2hhZG93OiAycHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxuICBib3gtc2hhZG93OiAycHggMHB4IDJweCAwcHggI2RkZGRkZDtcclxufVxyXG5cclxuaWdvLWFjdGlvbmJhciA6Om5nLWRlZXAgaWdvLWxpc3Qge1xyXG4gIG92ZXJmbG93OiBpbmhlcml0O1xyXG59XHJcblxyXG5pZ28tZHluYW1pYy1vdXRsZXQge1xyXG4gIG92ZXJmbG93OiBhdXRvO1xyXG59XHJcbiJdfQ== */"

/***/ }),

/***/ "./src/app/pages/portal/toolbox/toolbox.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/pages/portal/toolbox/toolbox.component.ts ***!
  \***********************************************************/
/*! exports provided: ToolboxComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToolboxComponent", function() { return ToolboxComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _toolbox_animation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toolbox.animation */ "./src/app/pages/portal/toolbox/toolbox.animation.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var ToolboxComponent = /** @class */ (function () {
    function ToolboxComponent() {
        /**
         * Observable of the active tool
         */
        this.activeTool$ = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"](undefined);
        /**
         * Store of actions that toggle tools
         */
        this.actionStore = new _igo2_common__WEBPACK_IMPORTED_MODULE_2__["ActionStore"]([]);
        /**
         * Observable of he anmation state
         */
        this.animation$ = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"]('none');
        /**
         * Observable of the toolbar
         */
        this.toolbar$ = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"]([]);
        /**
         * Observable of the ongoing animation. This is useful when
         * multiple animations are triggered at once i.e. when the user clicks
         * too fast on different actions
         */
        this.animating$ = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"](false);
        /**
         * Whether the toolbox should animate the first tool entering
         */
        this.animate = false;
    }
    Object.defineProperty(ToolboxComponent.prototype, "toolbarWithTitle", {
        /**
         * Whether the Toolbar should display actions' titles
         */
        get: function () {
            return this.activeTool$.value === undefined;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Initialize the toolbar and subscribe to the active tool
     * @internal
     */
    ToolboxComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.toolbar$$ = this.toolbox.toolbar$.subscribe(function (toolbar) {
            return _this.onToolbarChange(toolbar);
        });
        this.activeTool$$ = this.toolbox.activeTool$.subscribe(function (tool) {
            return _this.onActiveToolChange(tool);
        });
    };
    /**
     * Unsubscribe to the active tool and destroy the action store
     * @internal
     */
    ToolboxComponent.prototype.ngOnDestroy = function () {
        this.toolbar$$.unsubscribe();
        this.activeTool$$.unsubscribe();
        this.actionStore.destroy();
    };
    /**
     * Track the starting animation
     * @internal
     */
    ToolboxComponent.prototype.onAnimationStart = function () {
        this.animating$.next(true);
    };
    /**
     * Untrack the completed animation
     * @internal
     */
    ToolboxComponent.prototype.onAnimationComplete = function () {
        this.animating$.next(false);
    };
    /**
     * Return a tool's inputs
     * @param tool Tool
     * @returns Tool inputs
     * @internal
     */
    ToolboxComponent.prototype.getToolInputs = function (tool) {
        return tool.options || {};
    };
    /**
     * Initialize an action store
     * @param toolbar Toolbar
     */
    ToolboxComponent.prototype.onToolbarChange = function (toolbar) {
        this.setToolbar(toolbar);
    };
    /**
     * Activate a tool and trigger an animation or not
     * @param tool Tool to activate
     */
    ToolboxComponent.prototype.onActiveToolChange = function (tool) {
        var _this = this;
        if (!this.animate) {
            this.setActiveTool(tool);
            return;
        }
        this.onAnimate(function () { return _this.setActiveTool(tool); });
    };
    /**
     * Set the active tool
     * @param tool Tool to activate
     */
    ToolboxComponent.prototype.setActiveTool = function (tool) {
        if (tool === undefined) {
            this.actionStore.state.updateAll({ active: false });
        }
        else {
            var action = this.actionStore.get(tool.name);
            if (action !== undefined) {
                this.actionStore.state.update(action, { active: true }, true);
            }
        }
        this.activeTool$.next(tool);
        if (this.animate) {
            this.animation$.next('enter');
        }
    };
    /**
     * Initialize the toolbar
     */
    ToolboxComponent.prototype.setToolbar = function (toolbar) {
        var _this = this;
        var actions = toolbar.reduce(function (acc, toolName) {
            var tool = _this.toolbox.getTool(toolName);
            if (tool === undefined) {
                return acc;
            }
            acc.push({
                id: tool.name,
                title: tool.title,
                icon: tool.icon,
                // iconImage: tool.iconImage,
                tooltip: tool.tooltip,
                args: [tool, _this.toolbox],
                handler: function (_tool, _toolbox) {
                    _toolbox.activateTool(_tool.name);
                }
            });
            return acc;
        }, []);
        this.actionStore.load(actions);
        this.toolbar$.next(toolbar);
    };
    /**
     * Observe the ongoing animation and ignore any incoming animation
     * while one is still ongoing.
     * @param callback Callback to execute when the animation completes
     */
    ToolboxComponent.prototype.onAnimate = function (callback) {
        var _this = this;
        this.unAnimate();
        this.animating$$ = this.animating$.subscribe(function (animation) {
            if (!animation) {
                callback.call(_this);
                _this.unAnimate();
            }
        });
    };
    /**
     * Stop observing an animation when it's complete
     */
    ToolboxComponent.prototype.unAnimate = function () {
        if (this.animating$$) {
            this.animating$$.unsubscribe();
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _igo2_common__WEBPACK_IMPORTED_MODULE_2__["Toolbox"])
    ], ToolboxComponent.prototype, "toolbox", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], ToolboxComponent.prototype, "animate", void 0);
    ToolboxComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-toolbox',
            template: __webpack_require__(/*! ./toolbox.component.html */ "./src/app/pages/portal/toolbox/toolbox.component.html"),
            animations: [Object(_toolbox_animation__WEBPACK_IMPORTED_MODULE_3__["toolSlideInOut"])()],
            changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush,
            styles: [__webpack_require__(/*! ./toolbox.component.scss */ "./src/app/pages/portal/toolbox/toolbox.component.scss")]
        })
    ], ToolboxComponent);
    return ToolboxComponent;
}());



/***/ }),

/***/ "./src/app/pages/portal/toolbox/toolbox.module.ts":
/*!********************************************************!*\
  !*** ./src/app/pages/portal/toolbox/toolbox.module.ts ***!
  \********************************************************/
/*! exports provided: ToolboxModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToolboxModule", function() { return ToolboxModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _igo2_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @igo2/common */ "./dist/igo-lib/common/fesm5/igo2-common.js");
/* harmony import */ var _toolbox_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toolbox.component */ "./src/app/pages/portal/toolbox/toolbox.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




/**
 * @ignore
 */
var ToolboxModule = /** @class */ (function () {
    function ToolboxModule() {
    }
    ToolboxModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_2__["IgoActionModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_2__["IgoDynamicComponentModule"],
                _igo2_common__WEBPACK_IMPORTED_MODULE_2__["IgoPanelModule"]
            ],
            exports: [_toolbox_component__WEBPACK_IMPORTED_MODULE_3__["ToolboxComponent"]],
            declarations: [_toolbox_component__WEBPACK_IMPORTED_MODULE_3__["ToolboxComponent"]]
        })
    ], ToolboxModule);
    return ToolboxModule;
}());



/***/ }),

/***/ "./src/app/services/bbox.service.ts":
/*!******************************************!*\
  !*** ./src/app/services/bbox.service.ts ***!
  \******************************************/
/*! exports provided: BboxService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BboxService", function() { return BboxService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var BboxService = /** @class */ (function () {
    function BboxService() {
        this.bbox = null;
        this.observableBbox = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"](this.bbox);
    }
    BboxService.prototype.eventChange = function () {
        this.observableBbox.next(this.bbox);
    };
    BboxService.prototype.setBBOX = function (bbox) {
        this.bbox = bbox;
        this.eventChange();
    };
    BboxService.prototype.getBBOX = function () {
        return this.bbox;
    };
    BboxService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        }),
        __metadata("design:paramtypes", [])
    ], BboxService);
    return BboxService;
}());



/***/ }),

/***/ "./src/app/services/map-image.service.ts":
/*!***********************************************!*\
  !*** ./src/app/services/map-image.service.ts ***!
  \***********************************************/
/*! exports provided: MapImageService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapImageService", function() { return MapImageService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var MapImageService = /** @class */ (function () {
    function MapImageService() {
    }
    MapImageService.prototype.setMap = function (map) {
        this.map = map;
    };
    MapImageService.prototype.getMap = function () {
        return this.map;
    };
    MapImageService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        }),
        __metadata("design:paramtypes", [])
    ], MapImageService);
    return MapImageService;
}());



/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
// The file contents for the current environment will overwrite these during build.
// The build system defaults to the dev environment which uses `environment.ts`, but if you do
// `ng build --env=prod` then `environment.prod.ts` will be used instead.
// The list of which env maps to which file can be found in `.angular-cli.json`.
var environment = {
    production: false,
    igo: {
        auth: {
            url: '/apis/users',
            tokenKey: 'id_token_igo',
            allowAnonymous: true
        },
        searchSources: {
            nominatim: {
                available: false
            },
            icherche: {
                searchUrl: '/icherche/geocode',
                params: {
                    limit: '8'
                }
            },
            icherchereverse: {
                searchUrl: '/icherche/xy',
                params: {
                    limit: '5'
                }
            },
            ilayer: {
                searchUrl: '/apis/layers/search',
                params: {
                    limit: '5'
                }
            }
        },
        language: {
            prefix: './locale/'
        }
    }
};


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/fesm5/platform-browser-dynamic.js");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/app.module */ "./src/app/app.module.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hammerjs */ "./node_modules/hammerjs/hammer.js");
/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hammerjs__WEBPACK_IMPORTED_MODULE_4__);





if (_environments_environment__WEBPACK_IMPORTED_MODULE_3__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["enableProdMode"])();
}
Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__["platformBrowserDynamic"])()
    .bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_2__["AppModule"])
    .catch(function (err) { return console.log(err); });


/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\Mrnmicro\dev\ion\igo2\src\main.ts */"./src/main.ts");


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map