{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@igo2/integration/lib/context/context-editor-tool/context-editor-tool.component.ts","ng://@igo2/integration/lib/tool/tool.state.ts","ng://@igo2/integration/lib/context/context-manager-tool/context-manager-tool.component.ts","ng://@igo2/integration/lib/context/context-permission-manager-tool/context-permission-manager-tool.component.ts","ng://@igo2/integration/lib/map/map.state.ts","ng://@igo2/integration/lib/context/context-share-tool/context-share-tool.component.ts","ng://@igo2/integration/lib/context/context.module.ts","ng://@igo2/integration/lib/catalog/catalog.state.ts","ng://@igo2/integration/lib/catalog/catalog-library-tool/catalog-library-tool.component.ts","ng://@igo2/integration/lib/catalog/catalog-library-tool/catalog-library-tool.module.ts","ng://@igo2/integration/lib/catalog/catalog-browser-tool/catalog-browser-tool.component.ts","ng://@igo2/integration/lib/catalog/catalog-browser-tool/catalog-browser-tool.module.ts","ng://@igo2/integration/lib/catalog/catalog.module.ts","ng://@igo2/integration/lib/directions/directions-tool/directions-tool.component.ts","ng://@igo2/integration/lib/directions/directions.module.ts","ng://@igo2/integration/lib/workspace/workspace.module.ts","ng://@igo2/integration/lib/import-export/import-export-tool/import-export-tool.component.ts","ng://@igo2/integration/lib/import-export/import-export.module.ts","ng://@igo2/integration/lib/map/map-details-tool/map-details-tool.component.ts","ng://@igo2/integration/lib/map/map-tool/map-tool.component.ts","ng://@igo2/integration/lib/map/map.module.ts","ng://@igo2/integration/lib/measure/measure.state.ts","ng://@igo2/integration/lib/measure/measurer-tool/measurer-tool.component.ts","ng://@igo2/integration/lib/measure/measurer-tool/measurer-tool.module.ts","ng://@igo2/integration/lib/measure/measure.module.ts","ng://@igo2/integration/lib/print/print-tool/print-tool.component.ts","ng://@igo2/integration/lib/print/print.module.ts","ng://@igo2/integration/lib/search/search.state.ts","ng://@igo2/integration/lib/search/search-results-tool/search-results-tool.component.ts","ng://@igo2/integration/lib/search/search.module.ts","ng://@igo2/integration/lib/filter/ogc-filter-tool/ogc-filter-tool.component.ts","ng://@igo2/integration/lib/filter/time-analysis-tool/time-analysis-tool.component.ts","ng://@igo2/integration/lib/filter/filter.module.ts","ng://@igo2/integration/lib/about/about-tool/about-tool.component.ts","ng://@igo2/integration/lib/about/about.module.ts","ng://@igo2/integration/lib/integration.module.ts","ng://@igo2/integration/lib/tool/tool.module.ts","ng://@igo2/integration/lib/context/context.state.ts","ng://@igo2/integration/lib/workspace/workspace.state.ts","ng://@igo2/integration/lib/search/query.state.ts"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","metadataKey","metadataValue","metadata","ContextEditorToolComponent","Component","args","selector","template","ToolComponent","name","title","icon","ToolState","toolService","this","toolbox","Toolbox","setTools","getTools","Injectable","providedIn","ToolService","ContextManagerToolComponent","toolState","prototype","editContext","activateTool","managePermissions","ContextPermissionManagerToolComponent","MapState","mapService","projectionService","_map","IgoMap","controls","scaleLine","attribution","collapsed","setMap","map","MapService","ProjectionService","ContextShareToolComponent","mapState","hasCopyLinkButton","hasShareMapButton","Input","IgoAppContextModule","NgModule","imports","IgoContextModule","declarations","exports","entryComponents","schemas","CUSTOM_ELEMENTS_SCHEMA","CatalogState","catalogItemsStores","Map","_catalogStore","EntityStore","getCatalogItemsStore","catalog","get","setCatalogItemsStore","store","set","CatalogLibraryToolComponent","catalogService","catalogState","catalogStore","ngOnInit","entities$","value","loadCatalogs","onCatalogSelectChange","event","selected","_this","subscribe","catalogs","clear","load","changeDetection","ChangeDetectionStrategy","OnPush","CatalogService","IgoAppCatalogLibraryToolModule","CommonModule","IgoCatalogLibraryModule","CatalogBrowserToolComponent","store$","BehaviorSubject","undefined","catalog$$","stateView","firstBy$","record","state","entity","loadCatalogItems","ngOnDestroy","unsubscribe","items","next","IgoAppCatalogBrowserToolModule","IgoCatalogBrowserModule","IgoAppCatalogModule","DirectionsToolComponent","IgoAppDirectionsModule","forRoot","ngModule","providers","IgoCatalogModule","IgoAppWorkspaceModule","ImportExportToolComponent","IgoAppImportExportModule","IgoImportExportModule","MapDetailsToolComponent","toggleLegendOnVisibilityChange","expandLegendOfVisibleLayers","updateLegendOnResolutionChange","ogcFiltersInLayers","layerListControls","excludeBaseLayers","filterSortOptions","assign","showToolbar","LayerListControlsEnum","default","always","toolbarThreshold","never","MapToolComponent","IgoAppMapModule","MatTabsModule","IgoLanguageModule","IgoLayerModule","IgoMetadataModule","IgoDownloadModule","IgoFilterModule","MeasureState","FeatureStore","MeasurerToolComponent","measureState","IgoAppMeasurerToolModule","IgoMeasurerModule","IgoAppMeasureModule","PrintToolComponent","IgoAppPrintModule","IgoPrintModule","SearchState","searchSourceService","getEnabledSources","source","type","SearchSourceService","SearchResultsToolComponent","layerService","searchState","topPanelState","format","olFormatGeoJSON","feature","getEntityTitle","e","focused","pipe","element","onResultFocus","result","toggleTopPanel","tryAddFeatureToMap","onResultSelect","tryAddLayerToMap","zoomToFeatureExtent","geometry","olFeature","readFeature","dataProjection","projection","featureProjection","moveToOlFeatures","FeatureMotion","Zoom","meta","dataType","FEATURE","data","overlay","setFeatures","Default","LAYER","layerOptions","createAsyncLayer","layer","addLayer","LayerService","IgoAppSearchModule","MatIconModule","MatButtonModule","IgoFeatureModule","IgoSearchModule","IgoFlexibleModule","IgoPanelModule","IgoFeatureDetailsModule","OgcFilterToolComponent","TimeAnalysisToolComponent","IgoAppFilterModule","AboutToolComponent","html","IgoAppAboutModule","IgoCustomHtmlModule","IgoIntegrationModule","IgoAppToolModule","ContextState","contextService","languageService","context$","context","onContextChange","setContext","updateTools","tools","forEach","contextTool","baseTool","getTool","options","tool","push","setToolbar","toolbar","concat","ContextService","LanguageService","WorkspaceState","workspace$","_store","WorkspaceStore","active","workspace","QueryState"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\n\r\n@ToolComponent({\r\n  name: 'contextEditor',\r\n  title: 'igo.integration.tools.contexts',\r\n  icon: 'settings'\r\n})\r\n@Component({\r\n  selector: 'igo-context-editor-tool',\r\n  templateUrl: './context-editor-tool.component.html'\r\n})\r\nexport class ContextEditorToolComponent {\r\n  constructor() {}\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { Toolbox, ToolService } from '@igo2/common';\r\n\r\n/**\r\n * Service that holds the state of the search module\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ToolState {\r\n  /**\r\n   * Toolbox that holds main tools\r\n   */\r\n  toolbox: Toolbox = new Toolbox();\r\n\r\n  constructor(private toolService: ToolService) {\r\n    this.toolbox.setTools(this.toolService.getTools());\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\n\r\nimport { ToolState } from '../../tool/tool.state';\r\n\r\n@ToolComponent({\r\n  name: 'contextManager',\r\n  title: 'igo.integration.tools.contexts',\r\n  icon: 'tune'\r\n})\r\n@Component({\r\n  selector: 'igo-context-manager-tool',\r\n  templateUrl: './context-manager-tool.component.html'\r\n})\r\nexport class ContextManagerToolComponent {\r\n\r\n  constructor(private toolState: ToolState) {}\r\n\r\n  editContext() {\r\n    this.toolState.toolbox.activateTool('contextEditor');\r\n  }\r\n\r\n  managePermissions() {\r\n    this.toolState.toolbox.activateTool('permissionsContextManager');\r\n  }\r\n}\r\n","import { Component, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\n\r\n@ToolComponent({\r\n  name: 'contextPermissionManager',\r\n  title: 'igo.integration.tools.contexts',\r\n  icon: 'settings'\r\n})\r\n@Component({\r\n  selector: 'igo-context-permission-manager-tool',\r\n  templateUrl: './context-permission-manager-tool.component.html'\r\n})\r\nexport class ContextPermissionManagerToolComponent {\r\n  constructor() {}\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { IgoMap, MapService, ProjectionService } from '@igo2/geo';\r\n\r\n/**\r\n * Service that holds the state of the map module\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MapState {\r\n\r\n  /**\r\n   * Active map\r\n   */\r\n  get map(): IgoMap { return this._map; }\r\n  private _map: IgoMap;\r\n\r\n  constructor(\r\n    private mapService: MapService,\r\n    private projectionService: ProjectionService  // Don't remove this or it'll never be injected\r\n  ) {\r\n    this._map = new IgoMap({\r\n      controls: {\r\n        scaleLine: true,\r\n        attribution: {\r\n          collapsed: false\r\n        }\r\n      }\r\n    });\r\n\r\n    this.mapService.setMap(this.map);\r\n  }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\nimport { IgoMap } from '@igo2/geo';\r\n\r\nimport { MapState } from '../../map/map.state';\r\n\r\n@ToolComponent({\r\n  name: 'shareMap',\r\n  title: 'igo.integration.tools.shareMap',\r\n  icon: 'share-variant'\r\n})\r\n@Component({\r\n  selector: 'igo-context-share-tool',\r\n  templateUrl: './context-share-tool.component.html'\r\n})\r\nexport class ContextShareToolComponent {\r\n  @Input() hasCopyLinkButton: boolean = false;\r\n\r\n  @Input() hasShareMapButton: boolean = true;\r\n\r\n  get map(): IgoMap { return this.mapState.map; }\r\n\r\n  constructor(\r\n    private mapState: MapState\r\n  ) {}\r\n}\r\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\nimport { IgoContextModule } from '@igo2/context';\r\n\r\nimport { ContextEditorToolComponent } from './context-editor-tool/context-editor-tool.component';\r\nimport { ContextManagerToolComponent } from './context-manager-tool/context-manager-tool.component';\r\nimport { ContextPermissionManagerToolComponent } from './context-permission-manager-tool/context-permission-manager-tool.component';\r\nimport { ContextShareToolComponent } from './context-share-tool/context-share-tool.component';\r\n\r\n@NgModule({\r\n  imports: [IgoContextModule],\r\n  declarations: [\r\n    ContextEditorToolComponent,\r\n    ContextManagerToolComponent,\r\n    ContextPermissionManagerToolComponent,\r\n    ContextShareToolComponent\r\n  ],\r\n  exports: [\r\n    ContextEditorToolComponent,\r\n    ContextManagerToolComponent,\r\n    ContextPermissionManagerToolComponent,\r\n    ContextShareToolComponent\r\n  ],\r\n  entryComponents: [\r\n    ContextEditorToolComponent,\r\n    ContextManagerToolComponent,\r\n    ContextPermissionManagerToolComponent,\r\n    ContextShareToolComponent\r\n  ],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppContextModule {}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { EntityStore } from '@igo2/common';\r\nimport { Catalog, CatalogItem } from '@igo2/geo';\r\n\r\n/**\r\n * Service that holds the state of the catalog module\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CatalogState {\r\n\r\n  /**\r\n   * Store that contains all the catalogs\r\n   */\r\n  get catalogStore(): EntityStore<Catalog> { return this._catalogStore; }\r\n  private _catalogStore: EntityStore<Catalog>;\r\n\r\n  /**\r\n   * Catalog -> Catalog items store mapping\r\n   */\r\n  private catalogItemsStores = new Map<string, EntityStore<CatalogItem>>();\r\n\r\n  constructor() {\r\n    this._catalogStore = new EntityStore([]);\r\n  }\r\n\r\n  /**\r\n   * Get a catalog's items store\r\n   * @param catalog Catalog\r\n   * @returns Store that contains the catalog items\r\n   */\r\n  getCatalogItemsStore(catalog: Catalog): EntityStore<CatalogItem> {\r\n    return this.catalogItemsStores.get(catalog.id as string);\r\n  }\r\n\r\n  /**\r\n   * Bind a catalog items store to a catalog\r\n   * @param catalog Catalog\r\n   * @param store Catalog items store\r\n   */\r\n  setCatalogItemsStore(catalog: Catalog, store: EntityStore<CatalogItem>) {\r\n    this.catalogItemsStores.set(catalog.id as string, store);\r\n  }\r\n}\r\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\n\r\nimport { EntityStore } from '@igo2/common';\r\nimport { Catalog, CatalogService } from '@igo2/geo';\r\n\r\nimport { ToolState } from '../../tool/tool.state';\r\nimport { CatalogState } from '../catalog.state';\r\n\r\n/**\r\n * Tool to browse the list of available catalogs.\r\n */\r\n@ToolComponent({\r\n  name: 'catalog',\r\n  title: 'igo.integration.tools.catalog',\r\n  icon: 'layers-plus'\r\n})\r\n@Component({\r\n  selector: 'igo-catalog-library-tool',\r\n  templateUrl: './catalog-library-tool.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CatalogLibraryToolComponent implements OnInit {\r\n  /**\r\n   * Store that contains the catalogs\r\n   * @internal\r\n   */\r\n  get store(): EntityStore<Catalog> {\r\n    return this.catalogState.catalogStore;\r\n  }\r\n\r\n  constructor(\r\n    private catalogService: CatalogService,\r\n    private catalogState: CatalogState,\r\n    private toolState: ToolState\r\n  ) {}\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  ngOnInit() {\r\n    if (this.store.entities$.value.length === 0) {\r\n      this.loadCatalogs();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * When the selected catalog changes, toggle the the CatalogBrowser tool.\r\n   * @internal\r\n   * @param event Select event\r\n   */\r\n  onCatalogSelectChange(event: { selected: boolean; catalog: Catalog }) {\r\n    if (event.selected === false) {\r\n      return;\r\n    }\r\n    this.toolState.toolbox.activateTool('catalogBrowser');\r\n  }\r\n\r\n  /**\r\n   * Get all the available catalogs from the CatalogService and\r\n   * load them into the store.\r\n   */\r\n  private loadCatalogs() {\r\n    this.catalogService.loadCatalogs().subscribe((catalogs: Catalog[]) => {\r\n      this.store.clear();\r\n      this.store.load(catalogs);\r\n    });\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\nimport { IgoCatalogLibraryModule } from '@igo2/geo';\r\nimport { CatalogLibraryToolComponent } from './catalog-library-tool.component';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IgoCatalogLibraryModule\r\n  ],\r\n  declarations: [CatalogLibraryToolComponent],\r\n  exports: [CatalogLibraryToolComponent],\r\n  entryComponents: [CatalogLibraryToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppCatalogLibraryToolModule {}\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  OnDestroy,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\n\r\nimport { EntityRecord, EntityStore, ToolComponent } from '@igo2/common';\r\n\r\nimport {\r\n  IgoMap,\r\n  Catalog,\r\n  CatalogItem,\r\n  CatalogItemState,\r\n  CatalogService\r\n} from '@igo2/geo';\r\n\r\nimport { MapState } from '../../map/map.state';\r\nimport { CatalogState } from '../catalog.state';\r\n\r\n/**\r\n * Tool to browse a catalog's groups and layers and display them to a map.\r\n */\r\n@ToolComponent({\r\n  name: 'catalogBrowser',\r\n  title: 'igo.integration.tools.catalog',\r\n  icon: 'photo-browser'\r\n})\r\n@Component({\r\n  selector: 'igo-catalog-browser-tool',\r\n  templateUrl: './catalog-browser-tool.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CatalogBrowserToolComponent implements OnInit, OnDestroy {\r\n\r\n  catalog: Catalog;\r\n\r\n  /**\r\n   * Store that contains the catalog items\r\n   * @internal\r\n   */\r\n  store$ = new BehaviorSubject<EntityStore<CatalogItem, CatalogItemState>>(undefined);\r\n\r\n  /**\r\n   * Subscription to the selected catalog\r\n   */\r\n  private catalog$$: Subscription;\r\n\r\n  /**\r\n   * Map to add layers to\r\n   * @internal\r\n   */\r\n  get map(): IgoMap {\r\n    return this.mapState.map;\r\n  }\r\n\r\n  constructor(\r\n    private catalogService: CatalogService,\r\n    private catalogState: CatalogState,\r\n    private mapState: MapState\r\n  ) {}\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  ngOnInit() {\r\n    const catalogStore = this.catalogState.catalogStore;\r\n    this.catalog$$ = catalogStore.stateView\r\n      .firstBy$(\r\n        (record: EntityRecord<Catalog>) => record.state.selected === true\r\n      )\r\n      .subscribe((record: EntityRecord<Catalog>) => {\r\n        if (record && record.entity) {\r\n          const catalog = record.entity;\r\n          this.catalog = catalog;\r\n          this.loadCatalogItems(catalog);\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  ngOnDestroy() {\r\n    this.catalog$$.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Get the selected catalog's items from the CatalogService and\r\n   * load them into the store.\r\n   * @param catalog Selected catalog\r\n   */\r\n  private loadCatalogItems(catalog: Catalog) {\r\n    let store = this.catalogState.getCatalogItemsStore(catalog);\r\n    if (store !== undefined) {\r\n      this.store$.next(store);\r\n      return;\r\n    }\r\n\r\n    store = new EntityStore<CatalogItem>([]);\r\n    this.catalogState.setCatalogItemsStore(catalog, store);\r\n    this.catalogService\r\n      .loadCatalogItems(catalog)\r\n      .subscribe((items: CatalogItem[]) => {\r\n        store.load(items);\r\n        this.store$.next(store);\r\n      });\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\nimport { IgoCatalogBrowserModule } from '@igo2/geo';\r\nimport { CatalogBrowserToolComponent } from './catalog-browser-tool.component';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IgoCatalogBrowserModule\r\n  ],\r\n  declarations: [CatalogBrowserToolComponent],\r\n  exports: [CatalogBrowserToolComponent],\r\n  entryComponents: [CatalogBrowserToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppCatalogBrowserToolModule {}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { IgoAppCatalogLibraryToolModule } from './catalog-library-tool/catalog-library-tool.module';\r\nimport { IgoAppCatalogBrowserToolModule } from './catalog-browser-tool/catalog-browser-tool.module';\r\n\r\n@NgModule({\r\n  imports: [],\r\n  exports: [\r\n    IgoAppCatalogLibraryToolModule,\r\n    IgoAppCatalogBrowserToolModule\r\n  ],\r\n  declarations: []\r\n})\r\nexport class IgoAppCatalogModule {}\r\n","import { Component } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\nimport { IgoMap } from '@igo2/geo';\r\n\r\nimport { MapState } from '../../map/map.state';\r\n\r\n@ToolComponent({\r\n  name: 'directions',\r\n  title: 'igo.integration.tools.directions',\r\n  icon: 'directions'\r\n})\r\n@Component({\r\n  selector: 'igo-directions-tool',\r\n  templateUrl: './directions-tool.component.html'\r\n})\r\nexport class DirectionsToolComponent {\r\n  get map(): IgoMap {\r\n    return this.mapState.map;\r\n  }\r\n\r\n  constructor(private mapState: MapState) {}\r\n}\r\n","import {\r\n  NgModule,\r\n  ModuleWithProviders,\r\n  CUSTOM_ELEMENTS_SCHEMA\r\n} from '@angular/core';\r\n\r\nimport { IgoCatalogModule } from '@igo2/geo';\r\nimport { DirectionsToolComponent } from './directions-tool/directions-tool.component';\r\n\r\n@NgModule({\r\n  imports: [IgoCatalogModule],\r\n  declarations: [DirectionsToolComponent],\r\n  exports: [DirectionsToolComponent],\r\n  entryComponents: [DirectionsToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppDirectionsModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: IgoAppDirectionsModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\n@NgModule({\r\n  imports: [],\r\n  declarations: [],\r\n  exports: []\r\n})\r\nexport class IgoAppWorkspaceModule {}\r\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\nimport { IgoMap } from '@igo2/geo';\r\n\r\nimport { MapState } from '../../map/map.state';\r\n\r\n@ToolComponent({\r\n  name: 'importExport',\r\n  title: 'igo.integration.tools.importExport',\r\n  icon: 'file-move'\r\n})\r\n@Component({\r\n  selector: 'igo-import-export-tool',\r\n  templateUrl: './import-export-tool.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ImportExportToolComponent {\r\n  /**\r\n   * Map to measure on\r\n   * @internal\r\n   */\r\n  get map(): IgoMap { return this.mapState.map; }\r\n\r\n  constructor(\r\n    private mapState: MapState\r\n  ) {}\r\n\r\n}\r\n","import {\r\n  NgModule,\r\n  ModuleWithProviders,\r\n  CUSTOM_ELEMENTS_SCHEMA\r\n} from '@angular/core';\r\n\r\nimport { IgoImportExportModule } from '@igo2/geo';\r\nimport { ImportExportToolComponent } from './import-export-tool/import-export-tool.component';\r\n\r\n@NgModule({\r\n  imports: [IgoImportExportModule],\r\n  declarations: [ImportExportToolComponent],\r\n  exports: [ImportExportToolComponent],\r\n  entryComponents: [ImportExportToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppImportExportModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: IgoAppImportExportModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\nimport { LayerListControlsEnum } from '@igo2/geo';\r\n\r\nimport { LayerListControlsOptions } from '../shared/map-details-tool.interface';\r\n\r\n@ToolComponent({\r\n  name: 'mapDetails',\r\n  title: 'igo.integration.tools.map',\r\n  icon: 'map'\r\n})\r\n@Component({\r\n  selector: 'igo-map-details-tool',\r\n  templateUrl: './map-details-tool.component.html'\r\n})\r\nexport class MapDetailsToolComponent {\r\n  @Input() toggleLegendOnVisibilityChange: boolean = false;\r\n\r\n  @Input() expandLegendOfVisibleLayers: boolean = false;\r\n\r\n  @Input() updateLegendOnResolutionChange: boolean = false;\r\n\r\n  @Input() ogcFiltersInLayers: boolean = true;\r\n\r\n  @Input() layerListControls: LayerListControlsOptions = {};\r\n\r\n  get excludeBaseLayers(): boolean {\r\n    return this.layerListControls.excludeBaseLayers || false;\r\n  }\r\n\r\n  get layerFilterAndSortOptions(): any {\r\n    const filterSortOptions = Object.assign({\r\n      showToolbar: LayerListControlsEnum.default\r\n    }, this.layerListControls);\r\n\r\n    switch (this.layerListControls.showToolbar) {\r\n      case LayerListControlsEnum.always:\r\n        filterSortOptions.showToolbar = LayerListControlsEnum.always;\r\n        filterSortOptions.toolbarThreshold = undefined;\r\n        break;\r\n      case LayerListControlsEnum.never:\r\n        filterSortOptions.showToolbar = LayerListControlsEnum.never;\r\n        filterSortOptions.toolbarThreshold = undefined;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return filterSortOptions;\r\n  }\r\n}\r\n","import { Component, ChangeDetectionStrategy, Input } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\nimport { LayerListControlsEnum } from '@igo2/geo';\r\n\r\nimport { LayerListControlsOptions } from '../shared/map-details-tool.interface';\r\n/**\r\n * Tool to browse a map's layers or to choose a different map\r\n */\r\n@ToolComponent({\r\n  name: 'map',\r\n  title: 'igo.integration.tools.map',\r\n  icon: 'map'\r\n})\r\n@Component({\r\n  selector: 'igo-map-tool',\r\n  templateUrl: './map-tool.component.html',\r\n  styleUrls: ['./map-tool.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class MapToolComponent {\r\n\r\n  @Input() toggleLegendOnVisibilityChange: boolean = false;\r\n\r\n  @Input() expandLegendOfVisibleLayers: boolean = false;\r\n\r\n  @Input() updateLegendOnResolutionChange: boolean = false;\r\n\r\n  @Input() ogcFiltersInLayers: boolean = true;\r\n\r\n  @Input() layerListControls: LayerListControlsOptions = {};\r\n\r\n  get excludeBaseLayers(): boolean {\r\n    return this.layerListControls.excludeBaseLayers || false;\r\n  }\r\n\r\n  get layerFilterAndSortOptions(): any {\r\n    const filterSortOptions = Object.assign({\r\n      showToolbar: LayerListControlsEnum.default\r\n    }, this.layerListControls);\r\n\r\n    switch (this.layerListControls.showToolbar) {\r\n      case LayerListControlsEnum.always:\r\n        filterSortOptions.showToolbar = LayerListControlsEnum.always;\r\n        filterSortOptions.toolbarThreshold = undefined;\r\n        break;\r\n      case LayerListControlsEnum.never:\r\n        filterSortOptions.showToolbar = LayerListControlsEnum.never;\r\n        filterSortOptions.toolbarThreshold = undefined;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return filterSortOptions;\r\n  }\r\n\r\n}\r\n","import {\r\n  NgModule,\r\n  ModuleWithProviders,\r\n  CUSTOM_ELEMENTS_SCHEMA\r\n} from '@angular/core';\r\n\r\nimport { MatTabsModule } from '@angular/material';\r\n\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport {\r\n  IgoLayerModule,\r\n  IgoMetadataModule,\r\n  IgoDownloadModule,\r\n  IgoFilterModule\r\n} from '@igo2/geo';\r\n\r\nimport { IgoContextModule } from '@igo2/context';\r\n\r\nimport { MapDetailsToolComponent } from './map-details-tool/map-details-tool.component';\r\nimport { MapToolComponent } from './map-tool/map-tool.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    MatTabsModule,\r\n    IgoLanguageModule,\r\n    IgoLayerModule,\r\n    IgoMetadataModule,\r\n    IgoDownloadModule,\r\n    IgoFilterModule,\r\n    IgoContextModule\r\n  ],\r\n  declarations: [MapToolComponent, MapDetailsToolComponent],\r\n  exports: [MapToolComponent, MapDetailsToolComponent],\r\n  entryComponents: [MapToolComponent, MapDetailsToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppMapModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: IgoAppMapModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { FeatureStore, FeatureWithMeasure } from '@igo2/geo';\r\nimport { MapState } from '../map/map.state';\r\n\r\n/**\r\n * Service that holds the state of the measure module\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MeasureState {\r\n\r\n  /**\r\n   * Store that holds the measures\r\n   */\r\n  public store: FeatureStore<FeatureWithMeasure> = new FeatureStore<FeatureWithMeasure>([], {\r\n    map: this.mapState.map\r\n  });\r\n\r\n  constructor(private mapState: MapState) {}\r\n\r\n}\r\n","import {\r\n  Component,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\nimport { FeatureStore, FeatureWithMeasure, IgoMap } from '@igo2/geo';\r\nimport { MapState } from '../../map/map.state';\r\nimport { MeasureState } from '../measure.state';\r\n\r\n/**\r\n * Tool to measure lengths and areas\r\n */\r\n@ToolComponent({\r\n  name: 'measurer',\r\n  title: 'igo.integration.tools.measurer',\r\n  icon: 'ruler'\r\n})\r\n@Component({\r\n  selector: 'igo-measurer-tool',\r\n  templateUrl: './measurer-tool.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class MeasurerToolComponent {\r\n\r\n  /**\r\n   * Map to measure on\r\n   * @internal\r\n   */\r\n  get store(): FeatureStore<FeatureWithMeasure> { return this.measureState.store; }\r\n\r\n  /**\r\n   * Map to measure on\r\n   * @internal\r\n   */\r\n  get map(): IgoMap { return this.mapState.map; }\r\n\r\n  constructor(\r\n    private measureState: MeasureState,\r\n    private mapState: MapState\r\n  ) {}\r\n\r\n}\r\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\nimport { IgoMeasurerModule } from '@igo2/geo';\r\n\r\nimport { MeasurerToolComponent } from './measurer-tool.component';\r\n\r\n/**\r\n * @ignore\r\n */\r\n@NgModule({\r\n  imports: [\r\n    IgoMeasurerModule\r\n  ],\r\n  declarations: [MeasurerToolComponent],\r\n  exports: [MeasurerToolComponent],\r\n  entryComponents: [MeasurerToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppMeasurerToolModule {}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { IgoAppMeasurerToolModule } from './measurer-tool/measurer-tool.module';\r\n\r\n@NgModule({\r\n  imports: [],\r\n  declarations: [],\r\n  exports: [\r\n    IgoAppMeasurerToolModule\r\n  ]\r\n})\r\nexport class IgoAppMeasureModule {}\r\n","import { Component } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\nimport { IgoMap } from '@igo2/geo';\r\n\r\nimport { MapState } from '../../map/map.state';\r\n\r\n@ToolComponent({\r\n  name: 'print',\r\n  title: 'igo.integration.tools.print',\r\n  icon: 'printer'\r\n})\r\n@Component({\r\n  selector: 'igo-print-tool',\r\n  templateUrl: './print-tool.component.html'\r\n})\r\nexport class PrintToolComponent {\r\n  get map(): IgoMap {\r\n    return this.mapState.map;\r\n  }\r\n\r\n  constructor(private mapState: MapState) {}\r\n}\r\n","import {\r\n  NgModule,\r\n  ModuleWithProviders,\r\n  CUSTOM_ELEMENTS_SCHEMA\r\n} from '@angular/core';\r\n\r\nimport { IgoPrintModule } from '@igo2/geo';\r\nimport { PrintToolComponent } from './print-tool/print-tool.component';\r\n\r\n@NgModule({\r\n  imports: [IgoPrintModule],\r\n  declarations: [PrintToolComponent],\r\n  exports: [PrintToolComponent],\r\n  entryComponents: [PrintToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppPrintModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: IgoAppPrintModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { EntityStore } from '@igo2/common';\r\nimport { SearchResult, SearchSourceService, SearchSource } from '@igo2/geo';\r\n\r\n/**\r\n * Service that holds the state of the search module\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchState {\r\n  /**\r\n   * Store that holds the search results\r\n   */\r\n  public store: EntityStore<SearchResult> = new EntityStore<SearchResult>([]);\r\n\r\n  /**\r\n   * Search types currently enabled in the search source service\r\n   */\r\n  get searchTypes(): string[] {\r\n    return this.searchSourceService\r\n      .getEnabledSources()\r\n      .map((source: SearchSource) => (source.constructor as any).type);\r\n  }\r\n\r\n  constructor(private searchSourceService: SearchSourceService) {}\r\n}\r\n","import {\r\n  Component,\r\n  ChangeDetectionStrategy\r\n  // ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\r\n\r\nimport {\r\n  EntityStore,\r\n  ToolComponent,\r\n  FlexibleState,\r\n  getEntityTitle\r\n} from '@igo2/common';\r\n\r\nimport {\r\n  LayerService,\r\n  LayerOptions,\r\n  FEATURE,\r\n  Feature,\r\n  FeatureMotion,\r\n  LAYER,\r\n  SearchResult,\r\n  IgoMap,\r\n  moveToOlFeatures\r\n} from '@igo2/geo';\r\n\r\nimport { MapState } from '../../map/map.state';\r\n\r\nimport { SearchState } from '../search.state';\r\n\r\n/**\r\n * Tool to browse the search results\r\n */\r\n@ToolComponent({\r\n  name: 'searchResults',\r\n  title: 'igo.integration.tools.searchResults',\r\n  icon: 'magnify'\r\n})\r\n@Component({\r\n  selector: 'igo-search-results-tool',\r\n  templateUrl: './search-results-tool.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class SearchResultsToolComponent {\r\n  /**\r\n   * Store holding the search results\r\n   * @internal\r\n   */\r\n  get store(): EntityStore<SearchResult> {\r\n    return this.searchState.store;\r\n  }\r\n\r\n  /**\r\n   * Map to display the results on\r\n   * @internal\r\n   */\r\n  get map(): IgoMap {\r\n    return this.mapState.map;\r\n  }\r\n\r\n  get featureTitle(): string {\r\n    return this.feature ? getEntityTitle(this.feature) : undefined;\r\n  }\r\n\r\n  get feature$(): Observable<Feature> {\r\n    return this.store.stateView\r\n      .firstBy$(e => e.state.focused)\r\n      .pipe(\r\n        map(element => {\r\n          this.feature = element ? (element.entity.data as Feature) : undefined;\r\n          return this.feature;\r\n        })\r\n      );\r\n  }\r\n\r\n  public feature: Feature;\r\n\r\n  public topPanelState: FlexibleState = 'initial';\r\n  private format = new olFormatGeoJSON();\r\n\r\n  constructor(\r\n    private mapState: MapState,\r\n    private layerService: LayerService,\r\n    private searchState: SearchState // private cdRef: ChangeDetectorRef\r\n  ) {}\r\n\r\n  /**\r\n   * Try to add a feature to the map when it's being focused\r\n   * @internal\r\n   * @param result A search result that could be a feature\r\n   */\r\n  onResultFocus(result: SearchResult) {\r\n    if (this.topPanelState === 'initial') {\r\n      this.toggleTopPanel();\r\n    }\r\n    this.tryAddFeatureToMap(result);\r\n  }\r\n\r\n  /**\r\n   * Try to add a feature or a layer to the map when it's being selected\r\n   * @internal\r\n   * @param result A search result that could be a feature or some layer options\r\n   */\r\n  onResultSelect(result: SearchResult) {\r\n    if (this.topPanelState === 'initial') {\r\n      this.toggleTopPanel();\r\n    }\r\n    this.tryAddFeatureToMap(result);\r\n    this.tryAddLayerToMap(result);\r\n  }\r\n\r\n  toggleTopPanel() {\r\n    if (this.topPanelState === 'collapsed') {\r\n      this.topPanelState = 'expanded';\r\n    } else {\r\n      this.topPanelState = 'collapsed';\r\n    }\r\n  }\r\n\r\n  zoomToFeatureExtent() {\r\n    if (this.feature.geometry) {\r\n      const olFeature = this.format.readFeature(this.feature, {\r\n        dataProjection: this.feature.projection,\r\n        featureProjection: this.map.projection\r\n      });\r\n      moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Try to add a feature to the map overlay\r\n   * @param result A search result that could be a feature\r\n   */\r\n  private tryAddFeatureToMap(result: SearchResult) {\r\n    if (result.meta.dataType !== FEATURE) {\r\n      return undefined;\r\n    }\r\n    const feature = (result as SearchResult<Feature>).data;\r\n\r\n    // Somethimes features have no geometry. It happens with some GetFeatureInfo\r\n    if (feature.geometry === undefined) {\r\n      return;\r\n    }\r\n\r\n    this.map.overlay.setFeatures([feature], FeatureMotion.Default);\r\n  }\r\n\r\n  /**\r\n   * Try to add a layer to the map\r\n   * @param result A search result that could be some layer options\r\n   */\r\n  private tryAddLayerToMap(result: SearchResult) {\r\n    if (this.map === undefined) {\r\n      return;\r\n    }\r\n\r\n    if (result.meta.dataType !== LAYER) {\r\n      return undefined;\r\n    }\r\n    const layerOptions = (result as SearchResult<LayerOptions>).data;\r\n    this.layerService\r\n      .createAsyncLayer(layerOptions)\r\n      .subscribe(layer => this.map.addLayer(layer));\r\n  }\r\n}\r\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MatIconModule, MatButtonModule } from '@angular/material';\r\n\r\nimport { IgoFlexibleModule, IgoPanelModule } from '@igo2/common';\r\nimport {\r\n  IgoFeatureModule,\r\n  IgoSearchModule,\r\n  IgoFeatureDetailsModule\r\n} from '@igo2/geo';\r\nimport { SearchResultsToolComponent } from './search-results-tool/search-results-tool.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    IgoFeatureModule,\r\n    IgoSearchModule,\r\n    IgoFlexibleModule,\r\n    IgoPanelModule,\r\n    IgoFeatureDetailsModule\r\n  ],\r\n  declarations: [SearchResultsToolComponent],\r\n  exports: [SearchResultsToolComponent],\r\n  entryComponents: [SearchResultsToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppSearchModule {}\r\n","import { Component, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\n\r\n@ToolComponent({\r\n  name: 'ogcFilter',\r\n  title: 'igo.integration.tools.ogcFilter',\r\n  icon: 'filter-list'\r\n})\r\n@Component({\r\n  selector: 'igo-ogc-filter-tool',\r\n  templateUrl: './ogc-filter-tool.component.html'\r\n})\r\nexport class OgcFilterToolComponent {\r\n  constructor() {}\r\n}\r\n","import { Component, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\n\r\n@ToolComponent({\r\n  name: 'timeAnalysis',\r\n  title: 'igo.integration.tools.timeAnalysis',\r\n  icon: 'history'\r\n})\r\n@Component({\r\n  selector: 'igo-time-analysis-tool',\r\n  templateUrl: './time-analysis-tool.component.html'\r\n})\r\nexport class TimeAnalysisToolComponent {\r\n  constructor() {}\r\n}\r\n","import {\r\n  NgModule,\r\n  ModuleWithProviders,\r\n  CUSTOM_ELEMENTS_SCHEMA\r\n} from '@angular/core';\r\n\r\nimport { IgoFilterModule } from '@igo2/geo';\r\nimport { OgcFilterToolComponent } from './ogc-filter-tool/ogc-filter-tool.component';\r\nimport { TimeAnalysisToolComponent } from './time-analysis-tool/time-analysis-tool.component';\r\n\r\n@NgModule({\r\n  imports: [IgoFilterModule],\r\n  declarations: [OgcFilterToolComponent, TimeAnalysisToolComponent],\r\n  exports: [OgcFilterToolComponent, TimeAnalysisToolComponent],\r\n  entryComponents: [OgcFilterToolComponent, TimeAnalysisToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppFilterModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: IgoAppFilterModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\n\r\nimport { ToolComponent } from '@igo2/common';\r\n\r\n@ToolComponent({\r\n  name: 'about',\r\n  title: 'igo.integration.tools.about',\r\n  icon: 'help-circle'\r\n})\r\n@Component({\r\n  selector: 'igo-about-tool',\r\n  templateUrl: './about-tool.component.html'\r\n})\r\nexport class AboutToolComponent {\r\n  @Input() html: string = `\r\n    <h1>About IGO</h1>\r\n    <p>IGO (for Open GIS Infrastructure) is a Free Open Source Software\r\n    for Geospatial (FOSS4G) developed by organisations in the government\r\n    of Quebec in Canada. The objective is to make it open, common,\r\n    modular, based on open governance model supported by multiple\r\n    organisations. IGO is a Web GIS software with a client & server\r\n    component to manage and publish massive amount of Geospatial data.\r\n    </p>\r\n    </hr>\r\n    <a href='mailto:info@igouverte.org' target='_top'>info[@]igouverte.org</a>\r\n    </br>\r\n    <a href='http://www.igouverte.org' target='_blank'>www.igouverte.org</A>`;\r\n\r\n  constructor() {}\r\n}\r\n","import {\r\n  NgModule,\r\n  ModuleWithProviders,\r\n  CUSTOM_ELEMENTS_SCHEMA\r\n} from '@angular/core';\r\n\r\nimport { IgoCustomHtmlModule } from '@igo2/common';\r\n\r\nimport { AboutToolComponent } from './about-tool/about-tool.component';\r\n\r\n@NgModule({\r\n  imports: [IgoCustomHtmlModule],\r\n  declarations: [AboutToolComponent],\r\n  exports: [AboutToolComponent],\r\n  entryComponents: [AboutToolComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class IgoAppAboutModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: IgoAppAboutModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { IgoAppContextModule } from './context/context.module';\r\nimport { IgoAppCatalogModule } from './catalog/catalog.module';\r\nimport { IgoAppDirectionsModule } from './directions/directions.module';\r\nimport { IgoAppWorkspaceModule } from './workspace/workspace.module';\r\nimport { IgoAppImportExportModule } from './import-export/import-export.module';\r\nimport { IgoAppMapModule } from './map/map.module';\r\nimport { IgoAppMeasureModule } from './measure/measure.module';\r\nimport { IgoAppPrintModule } from './print/print.module';\r\nimport { IgoAppSearchModule } from './search/search.module';\r\nimport { IgoAppFilterModule } from './filter/filter.module';\r\nimport { IgoAppAboutModule } from './about/about.module';\r\n\r\n@NgModule({\r\n  imports: [],\r\n  declarations: [],\r\n  exports: [\r\n    IgoAppContextModule,\r\n    IgoAppCatalogModule,\r\n    IgoAppDirectionsModule,\r\n    IgoAppWorkspaceModule,\r\n    IgoAppImportExportModule,\r\n    IgoAppMapModule,\r\n    IgoAppMeasureModule,\r\n    IgoAppPrintModule,\r\n    IgoAppSearchModule,\r\n    IgoAppFilterModule,\r\n    IgoAppAboutModule\r\n  ]\r\n})\r\nexport class IgoIntegrationModule {}\r\n","import { NgModule } from '@angular/core';\r\n\r\n@NgModule({\r\n  imports: [],\r\n  declarations: [],\r\n  exports: []\r\n})\r\nexport class IgoAppToolModule {}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nimport { LanguageService } from '@igo2/core';\r\nimport { Tool, ToolService } from '@igo2/common';\r\nimport { ContextService, DetailedContext } from '@igo2/context';\r\n\r\nimport { ToolState } from '../tool/tool.state';\r\n\r\n/**\r\n * Service that holds the state of the context module\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ContextState {\r\n  /**\r\n   * Observable of the active context\r\n   */\r\n  context$: BehaviorSubject<DetailedContext> = new BehaviorSubject(undefined);\r\n\r\n  constructor(\r\n    private contextService: ContextService,\r\n    private toolService: ToolService,\r\n    private toolState: ToolState,\r\n    private languageService: LanguageService\r\n  ) {\r\n    this.contextService.context$.subscribe((context: DetailedContext) => {\r\n      this.onContextChange(context);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set the active context\r\n   * @param context Detailed context\r\n   */\r\n  private setContext(context: DetailedContext) {\r\n    this.updateTools(context);\r\n    this.context$.next(context);\r\n  }\r\n\r\n  /**\r\n   * Update the tool state with the context's tools\r\n   * @param context Detailed context\r\n   */\r\n  private updateTools(context: DetailedContext) {\r\n    const toolbox = this.toolState.toolbox;\r\n\r\n    const tools = [];\r\n    const contextTools = context.tools || [];\r\n    contextTools.forEach((contextTool: Tool) => {\r\n      const baseTool = this.toolService.getTool(contextTool.name);\r\n      if (baseTool === undefined) {\r\n        return;\r\n      }\r\n\r\n      const options = Object.assign(\r\n        {},\r\n        baseTool.options || {},\r\n        contextTool.options || {}\r\n      );\r\n      const tool = Object.assign({}, baseTool, contextTool, { options });\r\n      tools.push(tool);\r\n    });\r\n\r\n    toolbox.setTools(tools);\r\n    toolbox.setToolbar(context.toolbar || []);\r\n\r\n    // TODO: This is a patch so the context service can work without\r\n    // injecting the ToolState or without being completely refactored\r\n    this.contextService.setTools([].concat(tools));\r\n  }\r\n\r\n  /**\r\n   * Set a new context and update the tool state\r\n   * @param context Detailed context\r\n   */\r\n  private onContextChange(context: DetailedContext) {\r\n    if (context === undefined) {\r\n      return;\r\n    }\r\n    this.setContext(context);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nimport { EntityRecord, Workspace, WorkspaceStore } from '@igo2/common';\r\n\r\n/**\r\n * Service that holds the state of the workspace module\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WorkspaceState {\r\n\r\n  /**\r\n   * Observable of the active workspace\r\n   */\r\n  public workspace$ = new BehaviorSubject<Workspace>(undefined);\r\n\r\n  /**\r\n   * Store that holds all the available workspaces\r\n   */\r\n  get store(): WorkspaceStore { return this._store; }\r\n  private _store: WorkspaceStore;\r\n\r\n  constructor() {\r\n    this._store = new WorkspaceStore([]);\r\n    this._store.stateView\r\n      .firstBy$((record: EntityRecord<Workspace>) => record.state.active === true)\r\n      .subscribe((record: EntityRecord<Workspace>) => {\r\n        const workspace = record ? record.entity : undefined;\r\n        this.workspace$.next(workspace);\r\n      });\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { EntityStore } from '@igo2/common';\r\nimport { SearchResult } from '@igo2/geo';\r\n\r\n/**\r\n * Service that holds the state of the query module\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class QueryState {\r\n  /**\r\n   * Store that holds the query results\r\n   */\r\n  public store: EntityStore<SearchResult> = new EntityStore<SearchResult>([]);\r\n\r\n  constructor() {}\r\n}\r\n"]}