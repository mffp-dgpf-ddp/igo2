!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/material"),require("rxjs/operators"),require("ol/format/GeoJSON"),require("@igo2/geo"),require("@igo2/core"),require("@igo2/context"),require("rxjs"),require("@angular/core"),require("@igo2/common")):"function"==typeof define&&define.amd?define("@igo2/integration",["exports","@angular/common","@angular/material","rxjs/operators","ol/format/GeoJSON","@igo2/geo","@igo2/core","@igo2/context","rxjs","@angular/core","@igo2/common"],t):t((e.igo2=e.igo2||{},e.igo2.integration={}),e.ng.common,e.ng.material,e.rxjs.operators,e.olFormatGeoJSON,e.i1,e.i4,e.i1$1,e.rxjs,e.ng.core,e.i1$2)}(this,function(e,t,o,n,r,a,i,s,l,c,u){"use strict";function p(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(i=(a<3?r(i):3<a?r(t,o,i):r(t,o))||i);return 3<a&&i&&Object.defineProperty(t,o,i),i}function g(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}r=r&&r.hasOwnProperty("default")?r["default"]:r;var d=function(){function e(){}return e.decorators=[{type:c.Component,args:[{selector:"igo-context-editor-tool",template:"<igo-context-edit igoContextEditBinding></igo-context-edit>\r\n"}]}],e=p([u.ToolComponent({name:"contextEditor",title:"igo.integration.tools.contexts",icon:"star"})],e)}(),m=function(){function e(e){this.toolService=e,this.toolbox=new u.Toolbox,this.toolbox.setTools(this.toolService.getTools())}return e.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:u.ToolService}]},e.ngInjectableDef=c.defineInjectable({factory:function(){return new e(c.inject(u.ToolService))},token:e,providedIn:"root"}),e}(),f=function(){function e(e){this.toolState=e}return e.prototype.editContext=function(){this.toolState.toolbox.activateTool("contextEditor")},e.prototype.managePermissions=function(){this.toolState.toolbox.activateTool("contextPermissionManager")},e.decorators=[{type:c.Component,args:[{selector:"igo-context-manager-tool",template:'<igo-context-list\r\n  igoContextListBinding\r\n  (edit)="editContext()"\r\n  (managePermissions)="managePermissions()">\r\n</igo-context-list>\r\n'}]}],e.ctorParameters=function(){return[{type:m}]},e=p([u.ToolComponent({name:"contextManager",title:"igo.integration.tools.contexts",icon:"star"}),g("design:paramtypes",[m])],e)}(),y=function(){function e(){}return e.decorators=[{type:c.Component,args:[{selector:"igo-context-permission-manager-tool",template:"<igo-context-permissions igoContextPermissionsBinding></igo-context-permissions>\r\n"}]}],e=p([u.ToolComponent({name:"contextPermissionManager",title:"igo.integration.tools.contexts",icon:"star"})],e)}(),h=function(){function e(e,t){this.mapService=e,this.projectionService=t,this._map=new a.IgoMap({controls:{scaleLine:!0,attribution:{collapsed:!1}}}),this.mapService.setMap(this.map)}return Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:a.MapService},{type:a.ProjectionService}]},e.ngInjectableDef=c.defineInjectable({factory:function(){return new e(c.inject(a.MapService),c.inject(a.ProjectionService))},token:e,providedIn:"root"}),e}(),b=function(){function e(e){this.mapState=e,this.hasCopyLinkButton=!1,this.hasShareMapButton=!0}return Object.defineProperty(e.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Component,args:[{selector:"igo-context-share-tool",template:'<igo-share-map\r\n  igoShareMapBinding\r\n  [map]="map"\r\n  [hasCopyLinkButton]="hasCopyLinkButton"\r\n  [hasShareMapButton]="hasShareMapButton"\r\n></igo-share-map>\r\n'}]}],e.ctorParameters=function(){return[{type:h}]},e.propDecorators={hasCopyLinkButton:[{type:c.Input}],hasShareMapButton:[{type:c.Input}]},e=p([u.ToolComponent({name:"shareMap",title:"igo.integration.tools.shareMap",icon:"share-variant"}),g("design:paramtypes",[h])],e)}(),C=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[s.IgoContextModule],declarations:[d,f,y,b],exports:[d,f,y,b],entryComponents:[d,f,y,b],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),S=function(){function e(){this.catalogItemsStores=new Map,this._catalogStore=new u.EntityStore([])}return Object.defineProperty(e.prototype,"catalogStore",{get:function(){return this._catalogStore},enumerable:!0,configurable:!0}),e.prototype.getCatalogItemsStore=function(e){return this.catalogItemsStores.get(e.id)},e.prototype.setCatalogItemsStore=function(e,t){this.catalogItemsStores.set(e.id,t)},e.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=c.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),M=function(){function e(e,t,o){this.catalogService=e,this.catalogState=t,this.toolState=o}return Object.defineProperty(e.prototype,"store",{get:function(){return this.catalogState.catalogStore},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){0===this.store.entities$.value.length&&this.loadCatalogs()},e.prototype.onCatalogSelectChange=function(e){!1!==e.selected&&this.toolState.toolbox.activateTool("catalogBrowser")},e.prototype.loadCatalogs=function(){var t=this;this.catalogService.loadCatalogs().subscribe(function(e){t.store.clear(),t.store.load(e)})},e.decorators=[{type:c.Component,args:[{selector:"igo-catalog-library-tool",template:'<igo-catalog-library\r\n  [store]="store"\r\n  (catalogSelectChange)="onCatalogSelectChange($event)">\r\n</igo-catalog-library>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:a.CatalogService},{type:S},{type:m}]},e=p([u.ToolComponent({name:"catalog",title:"igo.integration.tools.catalog",icon:"layers-plus"}),g("design:paramtypes",[a.CatalogService,S,m])],e)}(),I=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[t.CommonModule,a.IgoCatalogLibraryModule],declarations:[M],exports:[M],entryComponents:[M],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),L=function(){function e(e,t,o){this.catalogService=e,this.catalogState=t,this.mapState=o,this.store$=new l.BehaviorSubject(undefined),this.toggleCollapsedGroup=!0}return Object.defineProperty(e.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var o=this,e=this.catalogState.catalogStore;this.catalog$$=e.stateView.firstBy$(function(e){return!0===e.state.selected}).subscribe(function(e){if(e&&e.entity){var t=e.entity;o.catalog=t,o.loadCatalogItems(t)}})},e.prototype.ngOnDestroy=function(){this.catalog$$.unsubscribe()},e.prototype.loadCatalogItems=function(e){var t=this,o=this.catalogState.getCatalogItemsStore(e);o===undefined?(o=new u.EntityStore([]),this.catalogState.setCatalogItemsStore(e,o),this.catalogService.loadCatalogItems(e).subscribe(function(e){o.load(e),t.store$.next(o)})):this.store$.next(o)},e.decorators=[{type:c.Component,args:[{selector:"igo-catalog-browser-tool",template:'<igo-catalog-browser\r\n  *ngIf="store$ | async as store"\r\n  [catalog]="catalog"\r\n  [store]="store"\r\n  [map]="map"\r\n  [toggleCollapsedGroup]="toggleCollapsedGroup">\r\n</igo-catalog-browser>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:a.CatalogService},{type:S},{type:h}]},e.propDecorators={toggleCollapsedGroup:[{type:c.Input}]},e=p([u.ToolComponent({name:"catalogBrowser",title:"igo.integration.tools.catalog",icon:"photo-browser"}),g("design:paramtypes",[a.CatalogService,S,h])],e)}(),v=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[t.CommonModule,a.IgoCatalogBrowserModule],declarations:[L],exports:[L],entryComponents:[L],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),x=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[],exports:[I,v],declarations:[]}]}],e}(),T=function(){function e(e){this.mapState=e}return Object.defineProperty(e.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Component,args:[{selector:"igo-directions-tool",template:"<igo-routing-form igoRoutingFormBinding></igo-routing-form>\r\n"}]}],e.ctorParameters=function(){return[{type:h}]},e=p([u.ToolComponent({name:"directions",title:"igo.integration.tools.directions",icon:"directions"}),g("design:paramtypes",[h])],e)}(),O=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:c.NgModule,args:[{imports:[a.IgoRoutingModule],declarations:[T],exports:[T],entryComponents:[T],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),j=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[],declarations:[],exports:[]}]}],e}(),P=function(){function e(e){this.mapState=e}return Object.defineProperty(e.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Component,args:[{selector:"igo-import-export-tool",template:'<igo-import-export [map]="map"></igo-import-export>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:h}]},e=p([u.ToolComponent({name:"importExport",title:"igo.integration.tools.importExport",icon:"file-move"}),g("design:paramtypes",[h])],e)}(),E=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:c.NgModule,args:[{imports:[a.IgoImportExportModule],declarations:[P],exports:[P],entryComponents:[P],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),w=function(){function e(){this.toggleLegendOnVisibilityChange=!1,this.expandLegendOfVisibleLayers=!1,this.updateLegendOnResolutionChange=!1,this.ogcFiltersInLayers=!0,this.layerListControls={},this.queryBadge=!1}return Object.defineProperty(e.prototype,"excludeBaseLayers",{get:function(){return this.layerListControls.excludeBaseLayers||!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerFilterAndSortOptions",{get:function(){var e=Object.assign({showToolbar:a.LayerListControlsEnum["default"]},this.layerListControls);switch(this.layerListControls.showToolbar){case a.LayerListControlsEnum.always:e.showToolbar=a.LayerListControlsEnum.always,e.toolbarThreshold=undefined;break;case a.LayerListControlsEnum.never:e.showToolbar=a.LayerListControlsEnum.never,e.toolbarThreshold=undefined}return e},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Component,args:[{selector:"igo-map-details-tool",template:'<igo-layer-list\r\n  igoLayerListBinding\r\n  [excludeBaseLayers]="excludeBaseLayers"\r\n  [layerFilterAndSortOptions]="layerFilterAndSortOptions"\r\n  [expandLegendOfVisibleLayers]="expandLegendOfVisibleLayers"\r\n  [toggleLegendOnVisibilityChange]="toggleLegendOnVisibilityChange"\r\n  [updateLegendOnResolutionChange]="updateLegendOnResolutionChange"\r\n  [queryBadge]="queryBadge">\r\n\r\n  <ng-template #igoLayerItemToolbar let-layer="layer">\r\n    <igo-download-button [layer]="layer"></igo-download-button>\r\n    <igo-metadata-button [layer]="layer"></igo-metadata-button>\r\n    <igo-ogc-filter-button [ogcFiltersInLayers]="ogcFiltersInLayers" [layer]="layer"></igo-ogc-filter-button>\r\n  </ng-template>\r\n\r\n</igo-layer-list>\r\n'}]}],e.propDecorators={toggleLegendOnVisibilityChange:[{type:c.Input}],expandLegendOfVisibleLayers:[{type:c.Input}],updateLegendOnResolutionChange:[{type:c.Input}],ogcFiltersInLayers:[{type:c.Input}],layerListControls:[{type:c.Input}],queryBadge:[{type:c.Input}]},e=p([u.ToolComponent({name:"mapDetails",title:"igo.integration.tools.map",icon:"map"})],e)}(),B=function(){function e(){this.toggleLegendOnVisibilityChange=!1,this.expandLegendOfVisibleLayers=!1,this.updateLegendOnResolutionChange=!1,this.ogcFiltersInLayers=!0,this.layerListControls={},this.queryBadge=!1}return Object.defineProperty(e.prototype,"excludeBaseLayers",{get:function(){return this.layerListControls.excludeBaseLayers||!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerFilterAndSortOptions",{get:function(){var e=Object.assign({showToolbar:a.LayerListControlsEnum["default"]},this.layerListControls);switch(this.layerListControls.showToolbar){case a.LayerListControlsEnum.always:e.showToolbar=a.LayerListControlsEnum.always,e.toolbarThreshold=undefined;break;case a.LayerListControlsEnum.never:e.showToolbar=a.LayerListControlsEnum.never,e.toolbarThreshold=undefined}return e},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Component,args:[{selector:"igo-map-tool",template:'<mat-tab-group>\r\n\r\n  <mat-tab [label]="\'igo.integration.tools.map\' | translate">\r\n    <igo-layer-list\r\n      igoLayerListBinding\r\n      [excludeBaseLayers]="excludeBaseLayers"\r\n      [layerFilterAndSortOptions]="layerFilterAndSortOptions"\r\n      [expandLegendOfVisibleLayers]="expandLegendOfVisibleLayers"\r\n      [toggleLegendOnVisibilityChange]="toggleLegendOnVisibilityChange"\r\n      [updateLegendOnResolutionChange]="updateLegendOnResolutionChange"\r\n      [queryBadge]="queryBadge">\r\n\r\n      <ng-template #igoLayerItemToolbar let-layer="layer">\r\n        <igo-download-button [layer]="layer"></igo-download-button>\r\n        <igo-metadata-button [layer]="layer"></igo-metadata-button>\r\n        <igo-ogc-filter-button [ogcFiltersInLayers]="ogcFiltersInLayers" [layer]="layer"></igo-ogc-filter-button>\r\n      </ng-template>\r\n\r\n    </igo-layer-list>\r\n  </mat-tab>\r\n\r\n  <mat-tab [label]="\'igo.integration.tools.contexts\' | translate">\r\n    <igo-context-list igoContextListBinding></igo-context-list>\r\n  </mat-tab>\r\n\r\n</mat-tab-group>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush,styles:["mat-tab-group,mat-tab-group ::ng-deep .mat-tab-body-wrapper{height:100%}"]}]}],e.propDecorators={toggleLegendOnVisibilityChange:[{type:c.Input}],expandLegendOfVisibleLayers:[{type:c.Input}],updateLegendOnResolutionChange:[{type:c.Input}],ogcFiltersInLayers:[{type:c.Input}],layerListControls:[{type:c.Input}],queryBadge:[{type:c.Input}]},e=p([u.ToolComponent({name:"map",title:"igo.integration.tools.map",icon:"map"})],e)}(),A=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:c.NgModule,args:[{imports:[o.MatTabsModule,i.IgoLanguageModule,a.IgoLayerModule,a.IgoMetadataModule,a.IgoDownloadModule,a.IgoFilterModule,s.IgoContextModule],declarations:[B,w],exports:[B,w],entryComponents:[B,w],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),F=function(){function e(e){this.mapState=e,this.store=new a.FeatureStore([],{map:this.mapState.map})}return e.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:h}]},e.ngInjectableDef=c.defineInjectable({factory:function(){return new e(c.inject(h))},token:e,providedIn:"root"}),e}(),D=function(){function e(e,t){this.measureState=e,this.mapState=t}return Object.defineProperty(e.prototype,"store",{get:function(){return this.measureState.store},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Component,args:[{selector:"igo-measurer-tool",template:'<igo-measurer [store]="store" [map]="map"></igo-measurer>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:F},{type:h}]},e=p([u.ToolComponent({name:"measurer",title:"igo.integration.tools.measurer",icon:"ruler"}),g("design:paramtypes",[F,h])],e)}(),_=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[a.IgoMeasurerModule],declarations:[D],exports:[D],entryComponents:[D],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),R=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[],declarations:[],exports:[_]}]}],e}(),N=function(){function e(e){this.mapState=e}return Object.defineProperty(e.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Component,args:[{selector:"igo-print-tool",template:'<igo-print [map]="map"></igo-print>\r\n'}]}],e.ctorParameters=function(){return[{type:h}]},e=p([u.ToolComponent({name:"print",title:"igo.integration.tools.print",icon:"printer"}),g("design:paramtypes",[h])],e)}(),$=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:c.NgModule,args:[{imports:[a.IgoPrintModule],declarations:[N],exports:[N],entryComponents:[N],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),k=function(){function e(e){this.searchSourceService=e,this.store=new u.EntityStore([])}return Object.defineProperty(e.prototype,"searchTypes",{get:function(){return this.searchSourceService.getEnabledSources().map(function(e){return e.constructor.type})},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:a.SearchSourceService}]},e.ngInjectableDef=c.defineInjectable({factory:function(){return new e(c.inject(a.SearchSourceService))},token:e,providedIn:"root"}),e}(),q=function(){function e(e,t,o){this.mapState=e,this.layerService=t,this.searchState=o,this.topPanelState="initial",this.format=new r}return Object.defineProperty(e.prototype,"store",{get:function(){return this.searchState.store},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featureTitle",{get:function(){return this.feature?u.getEntityTitle(this.feature):undefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"feature$",{get:function(){var t=this;return this.store.stateView.firstBy$(function(e){return e.state.focused}).pipe(n.map(function(e){return t.feature=e?e.entity.data:undefined,t.feature}))},enumerable:!0,configurable:!0}),e.prototype.onResultFocus=function(e){"initial"===this.topPanelState&&this.toggleTopPanel(),this.tryAddFeatureToMap(e)},e.prototype.onResultSelect=function(e){"initial"===this.topPanelState&&this.toggleTopPanel(),this.tryAddFeatureToMap(e),this.tryAddLayerToMap(e)},e.prototype.toggleTopPanel=function(){"collapsed"===this.topPanelState?this.topPanelState="expanded":this.topPanelState="collapsed"},e.prototype.zoomToFeatureExtent=function(){if(this.feature.geometry){var e=this.format.readFeature(this.feature,{dataProjection:this.feature.projection,featureProjection:this.map.projection});a.moveToOlFeatures(this.map,[e],a.FeatureMotion.Zoom)}},e.prototype.tryAddFeatureToMap=function(e){if(e.meta.dataType!==a.FEATURE)return undefined;var t=e.data;t.geometry!==undefined&&this.map.overlay.setFeatures([t],a.FeatureMotion.Default)},e.prototype.tryAddLayerToMap=function(e){var t=this;if(this.map!==undefined){if(e.meta.dataType!==a.LAYER)return undefined;var o=e.data;this.layerService.createAsyncLayer(o).subscribe(function(e){return t.map.addLayer(e)})}},e.decorators=[{type:c.Component,args:[{selector:"igo-search-results-tool",template:'<igo-flexible\r\n  #topPanel\r\n  initial="100%"\r\n  initialMobile="100%"\r\n  collapsed="60%"\r\n  expanded="calc(100% - 58px)"\r\n  [state]="topPanelState">\r\n\r\n  <div class="igo-content">\r\n    <igo-search-results\r\n      [store]="store"\r\n      (resultFocus)="onResultFocus($event)"\r\n      (resultSelect)="onResultSelect($event)">\r\n    </igo-search-results>\r\n  </div>\r\n\r\n  <div igoFlexibleFill class="igo-content">\r\n    <igo-panel [title]="featureTitle" *ngIf="feature$ | async">\r\n\r\n      <button\r\n        mat-icon-button\r\n        panelLeftButton\r\n        class="igo-icon-button"\r\n        (click)="toggleTopPanel()">\r\n        <mat-icon [svgIcon]="topPanel.state === \'collapsed\'? \'arrow-down\' : \'arrow-up\'"></mat-icon>\r\n      </button>\r\n\r\n      <button\r\n        mat-icon-button\r\n        panelRightButton\r\n        class="igo-icon-button"\r\n        (click)="zoomToFeatureExtent()"\r\n        *ngIf="feature.geometry">\r\n        <mat-icon svgIcon="magnify-plus-outline"></mat-icon>\r\n      </button>\r\n\r\n      <igo-feature-details\r\n        [feature]="feature$ | async">\r\n      </igo-feature-details>\r\n    </igo-panel>\r\n  </div>\r\n\r\n</igo-flexible>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:h},{type:a.LayerService},{type:k}]},e=p([u.ToolComponent({name:"searchResults",title:"igo.integration.tools.searchResults",icon:"magnify"}),g("design:paramtypes",[h,a.LayerService,k])],e)}(),V=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[t.CommonModule,o.MatIconModule,o.MatButtonModule,a.IgoFeatureModule,a.IgoSearchModule,u.IgoFlexibleModule,u.IgoPanelModule,a.IgoFeatureDetailsModule],declarations:[q],exports:[q],entryComponents:[q],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),G=function(){function e(){}return e.decorators=[{type:c.Component,args:[{selector:"igo-ogc-filter-tool",template:"<igo-ogc-filterable-list igoOgcFilterableListBinding></igo-ogc-filterable-list>\r\n\r\n\r\n"}]}],e.ctorParameters=function(){return[]},e=p([u.ToolComponent({name:"ogcFilter",title:"igo.integration.tools.ogcFilter",icon:"filter"}),g("design:paramtypes",[])],e)}(),H=function(){function e(){}return e.decorators=[{type:c.Component,args:[{selector:"igo-time-analysis-tool",template:"<igo-time-filter-list igoTimeFilterListBinding></igo-time-filter-list>\r\n"}]}],e.ctorParameters=function(){return[]},e=p([u.ToolComponent({name:"timeAnalysis",title:"igo.integration.tools.timeAnalysis",icon:"history"}),g("design:paramtypes",[])],e)}(),U=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:c.NgModule,args:[{imports:[a.IgoFilterModule],declarations:[G,H],exports:[G,H],entryComponents:[G,H],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),W=function(){function e(){this.html="\n    <h1>About IGO</h1>\n    <p>IGO (for Open GIS Infrastructure) is a Free Open Source Software\n    for Geospatial (FOSS4G) developed by organisations in the government\n    of Quebec in Canada. The objective is to make it open, common,\n    modular, based on open governance model supported by multiple\n    organisations. IGO is a Web GIS software with a client & server\n    component to manage and publish massive amount of Geospatial data.\n    </p>\n    </hr>\n    <a href='mailto:info@igouverte.org' target='_top'>info[@]igouverte.org</a>\n    </br>\n    <a href='http://www.igouverte.org' target='_blank'>www.igouverte.org</A>"}return e.decorators=[{type:c.Component,args:[{selector:"igo-about-tool",template:'<igo-custom-html\r\n[html]="html">\r\n</igo-custom-html>\r\n'}]}],e.ctorParameters=function(){return[]},e.propDecorators={html:[{type:c.Input}]},e=p([u.ToolComponent({name:"about",title:"igo.integration.tools.about",icon:"help-circle"}),g("design:paramtypes",[])],e)}(),J=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:c.NgModule,args:[{imports:[u.IgoCustomHtmlModule],declarations:[W],exports:[W],entryComponents:[W],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),z=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[],declarations:[],exports:[C,x,O,j,E,A,R,$,V,U,J]}]}],e}(),Q=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[],declarations:[],exports:[]}]}],e}(),Y=function(){function e(e,t,o,n){var r=this;this.contextService=e,this.toolService=t,this.toolState=o,this.languageService=n,this.context$=new l.BehaviorSubject(undefined),this.contextService.context$.subscribe(function(e){r.onContextChange(e)})}return e.prototype.setContext=function(e){this.updateTools(e),this.context$.next(e)},e.prototype.updateTools=function(e){var r=this,t=this.toolState.toolbox,a=[];(e.tools||[]).forEach(function(e){var t=r.toolService.getTool(e.name);if(t!==undefined){var o=Object.assign({},t.options||{},e.options||{}),n=Object.assign({},t,e,{options:o});a.push(n)}}),t.setTools(a),t.setToolbar(e.toolbar||[]),this.contextService.setTools([].concat(a))},e.prototype.onContextChange=function(e){e!==undefined&&this.setContext(e)},e.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.ContextService},{type:u.ToolService},{type:m},{type:i.LanguageService}]},e.ngInjectableDef=c.defineInjectable({factory:function(){return new e(c.inject(s.ContextService),c.inject(u.ToolService),c.inject(m),c.inject(i.LanguageService))},token:e,providedIn:"root"}),e}(),Z=function(){function e(){var o=this;this.workspace$=new l.BehaviorSubject(undefined),this._store=new u.WorkspaceStore([]),this._store.stateView.firstBy$(function(e){return!0===e.state.active}).subscribe(function(e){var t=e?e.entity:undefined;o.workspace$.next(t)})}return Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=c.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),K=function(){function e(){this.store=new u.EntityStore([])}return e.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=c.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();e.IgoIntegrationModule=z,e.IgoAppAboutModule=J,e.IgoAppContextModule=C,e.IgoAppCatalogModule=x,e.IgoAppCatalogBrowserToolModule=v,e.IgoAppCatalogLibraryToolModule=I,e.IgoAppDirectionsModule=O,e.IgoAppWorkspaceModule=j,e.IgoAppFilterModule=U,e.IgoAppImportExportModule=E,e.IgoAppMapModule=A,e.IgoAppMeasureModule=R,e.IgoAppPrintModule=$,e.IgoAppSearchModule=V,e.IgoAppToolModule=Q,e.AboutToolComponent=W,e.ContextManagerToolComponent=f,e.ContextEditorToolComponent=d,e.ContextPermissionManagerToolComponent=y,e.ContextShareToolComponent=b,e.ContextState=Y,e.CatalogState=S,e.CatalogBrowserToolComponent=L,e.CatalogLibraryToolComponent=M,e.DirectionsToolComponent=T,e.WorkspaceState=Z,e.OgcFilterToolComponent=G,e.TimeAnalysisToolComponent=H,e.ImportExportToolComponent=P,e.MapDetailsToolComponent=w,e.MapToolComponent=B,e.MapState=h,e.MeasureState=F,e.MeasurerToolComponent=D,e.PrintToolComponent=N,e.QueryState=K,e.SearchState=k,e.SearchResultsToolComponent=q,e.ToolState=m,e.ɵv=W,e.ɵi=L,e.ɵg=M,e.ɵh=S,e.ɵa=d,e.ɵb=f,e.ɵd=y,e.ɵe=b,e.ɵj=T,e.ɵt=G,e.ɵu=H,e.ɵk=P,e.ɵm=w,e.ɵl=B,e.ɵf=h,e.ɵp=F,e.ɵo=D,e.ɵn=_,e.ɵq=N,e.ɵr=q,e.ɵs=k,e.ɵc=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=igo2-integration.umd.min.js.map