!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/material"),require("rxjs/operators"),require("ol/format/GeoJSON"),require("@igo2/geo"),require("@igo2/core"),require("@igo2/context"),require("rxjs"),require("@angular/core"),require("@igo2/common")):"function"==typeof define&&define.amd?define("@igo2/integration",["exports","@angular/common","@angular/material","rxjs/operators","ol/format/GeoJSON","@igo2/geo","@igo2/core","@igo2/context","rxjs","@angular/core","@igo2/common"],e):e((t.igo2=t.igo2||{},t.igo2.integration={}),t.ng.common,t.ng.material,t.rxjs.operators,t.olFormatGeoJSON,t.i1,t.i4,t.i1$1,t.rxjs,t.ng.core,t.i1$2)}(this,function(t,e,o,n,r,a,i,s,l,c,u){"use strict";function p(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(i=(a<3?r(i):3<a?r(e,o,i):r(e,o))||i);return 3<a&&i&&Object.defineProperty(e,o,i),i}function g(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}r=r&&r.hasOwnProperty("default")?r["default"]:r;var d=function(){function t(){}return t.decorators=[{type:c.Component,args:[{selector:"igo-context-editor-tool",template:"<igo-context-edit igoContextEditBinding></igo-context-edit>\r\n"}]}],t.ctorParameters=function(){return[]},t=p([u.ToolComponent({name:"contextEditor",title:"igo.integration.tools.contexts",icon:"settings"}),g("design:paramtypes",[])],t)}(),m=function(){function t(t){this.toolService=t,this.toolbox=new u.Toolbox,this.toolbox.setTools(this.toolService.getTools())}return t.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:u.ToolService}]},t.ngInjectableDef=c.defineInjectable({factory:function(){return new t(c.inject(u.ToolService))},token:t,providedIn:"root"}),t}(),f=function(){function t(t){this.toolState=t}return t.prototype.editContext=function(){this.toolState.toolbox.activateTool("contextEditor")},t.prototype.managePermissions=function(){this.toolState.toolbox.activateTool("permissionsContextManager")},t.decorators=[{type:c.Component,args:[{selector:"igo-context-manager-tool",template:'<igo-context-list\r\n  igoContextListBinding\r\n  (edit)="editContext()"\r\n  (managePermissions)="managePermissions()">\r\n</igo-context-list>\r\n'}]}],t.ctorParameters=function(){return[{type:m}]},t=p([u.ToolComponent({name:"contextManager",title:"igo.integration.tools.contexts",icon:"tune"}),g("design:paramtypes",[m])],t)}(),y=function(){function t(){}return t.decorators=[{type:c.Component,args:[{selector:"igo-context-permission-manager-tool",template:"<igo-context-permissions igoContextPermissionsBinding></igo-context-permissions>\r\n"}]}],t.ctorParameters=function(){return[]},t=p([u.ToolComponent({name:"contextPermissionManager",title:"igo.integration.tools.contexts",icon:"settings"}),g("design:paramtypes",[])],t)}(),h=function(){function t(t,e){this.mapService=t,this.projectionService=e,this._map=new a.IgoMap({controls:{scaleLine:!0,attribution:{collapsed:!1}}}),this.mapService.setMap(this.map)}return Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:a.MapService},{type:a.ProjectionService}]},t.ngInjectableDef=c.defineInjectable({factory:function(){return new t(c.inject(a.MapService),c.inject(a.ProjectionService))},token:t,providedIn:"root"}),t}(),b=function(){function t(t){this.mapState=t,this.hasCopyLinkButton=!1,this.hasShareMapButton=!0}return Object.defineProperty(t.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Component,args:[{selector:"igo-context-share-tool",template:'<igo-share-map\r\n  igoShareMapBinding\r\n  [map]="map"\r\n  [hasCopyLinkButton]="hasCopyLinkButton"\r\n  [hasShareMapButton]="hasShareMapButton"\r\n></igo-share-map>\r\n'}]}],t.ctorParameters=function(){return[{type:h}]},t.propDecorators={hasCopyLinkButton:[{type:c.Input}],hasShareMapButton:[{type:c.Input}]},t=p([u.ToolComponent({name:"shareMap",title:"igo.integration.tools.shareMap",icon:"share-variant"}),g("design:paramtypes",[h])],t)}(),S=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[s.IgoContextModule],declarations:[d,f,y,b],exports:[d,f,y,b],entryComponents:[d,f,y,b],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),C=function(){function t(){this.catalogItemsStores=new Map,this._catalogStore=new u.EntityStore([])}return Object.defineProperty(t.prototype,"catalogStore",{get:function(){return this._catalogStore},enumerable:!0,configurable:!0}),t.prototype.getCatalogItemsStore=function(t){return this.catalogItemsStores.get(t.id)},t.prototype.setCatalogItemsStore=function(t,e){this.catalogItemsStores.set(t.id,e)},t.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=c.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),M=function(){function t(t,e,o){this.catalogService=t,this.catalogState=e,this.toolState=o}return Object.defineProperty(t.prototype,"store",{get:function(){return this.catalogState.catalogStore},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){0===this.store.entities$.value.length&&this.loadCatalogs()},t.prototype.onCatalogSelectChange=function(t){!1!==t.selected&&this.toolState.toolbox.activateTool("catalogBrowser")},t.prototype.loadCatalogs=function(){var e=this;this.catalogService.loadCatalogs().subscribe(function(t){e.store.clear(),e.store.load(t)})},t.decorators=[{type:c.Component,args:[{selector:"igo-catalog-library-tool",template:'<igo-catalog-library\r\n  [store]="store"\r\n  (catalogSelectChange)="onCatalogSelectChange($event)">\r\n</igo-catalog-library>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:a.CatalogService},{type:C},{type:m}]},t=p([u.ToolComponent({name:"catalog",title:"igo.integration.tools.catalog",icon:"layers-plus"}),g("design:paramtypes",[a.CatalogService,C,m])],t)}(),I=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[e.CommonModule,a.IgoCatalogLibraryModule],declarations:[M],exports:[M],entryComponents:[M],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),L=function(){function t(t,e,o){this.catalogService=t,this.catalogState=e,this.mapState=o,this.store$=new l.BehaviorSubject(undefined)}return Object.defineProperty(t.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var o=this,t=this.catalogState.catalogStore;this.catalog$$=t.stateView.firstBy$(function(t){return!0===t.state.selected}).subscribe(function(t){if(t&&t.entity){var e=t.entity;o.catalog=e,o.loadCatalogItems(e)}})},t.prototype.ngOnDestroy=function(){this.catalog$$.unsubscribe()},t.prototype.loadCatalogItems=function(t){var e=this,o=this.catalogState.getCatalogItemsStore(t);o===undefined?(o=new u.EntityStore([]),this.catalogState.setCatalogItemsStore(t,o),this.catalogService.loadCatalogItems(t).subscribe(function(t){o.load(t),e.store$.next(o)})):this.store$.next(o)},t.decorators=[{type:c.Component,args:[{selector:"igo-catalog-browser-tool",template:'<igo-catalog-browser\r\n  *ngIf="store$ | async as store"\r\n  [catalog]="catalog"\r\n  [store]="store"\r\n  [map]="map">\r\n</igo-catalog-browser>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:a.CatalogService},{type:C},{type:h}]},t=p([u.ToolComponent({name:"catalogBrowser",title:"igo.integration.tools.catalog",icon:"photo-browser"}),g("design:paramtypes",[a.CatalogService,C,h])],t)}(),v=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[e.CommonModule,a.IgoCatalogBrowserModule],declarations:[L],exports:[L],entryComponents:[L],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),x=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[],exports:[I,v],declarations:[]}]}],t}(),T=function(){function t(t){this.mapState=t}return Object.defineProperty(t.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Component,args:[{selector:"igo-directions-tool",template:"<igo-routing-form igoRoutingFormBinding></igo-routing-form>\r\n"}]}],t.ctorParameters=function(){return[{type:h}]},t=p([u.ToolComponent({name:"directions",title:"igo.integration.tools.directions",icon:"directions"}),g("design:paramtypes",[h])],t)}(),O=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:c.NgModule,args:[{imports:[a.IgoCatalogModule],declarations:[T],exports:[T],entryComponents:[T],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),j=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[],declarations:[],exports:[]}]}],t}(),P=function(){function t(t){this.mapState=t}return Object.defineProperty(t.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Component,args:[{selector:"igo-import-export-tool",template:'<igo-import-export [map]="map"></igo-import-export>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:h}]},t=p([u.ToolComponent({name:"importExport",title:"igo.integration.tools.importExport",icon:"file-move"}),g("design:paramtypes",[h])],t)}(),E=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:c.NgModule,args:[{imports:[a.IgoImportExportModule],declarations:[P],exports:[P],entryComponents:[P],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),w=function(){function t(){this.toggleLegendOnVisibilityChange=!1,this.expandLegendOfVisibleLayers=!1,this.updateLegendOnResolutionChange=!1,this.ogcFiltersInLayers=!0,this.layerListControls={}}return Object.defineProperty(t.prototype,"excludeBaseLayers",{get:function(){return this.layerListControls.excludeBaseLayers||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layerFilterAndSortOptions",{get:function(){var t=Object.assign({showToolbar:a.LayerListControlsEnum["default"]},this.layerListControls);switch(this.layerListControls.showToolbar){case a.LayerListControlsEnum.always:t.showToolbar=a.LayerListControlsEnum.always,t.toolbarThreshold=undefined;break;case a.LayerListControlsEnum.never:t.showToolbar=a.LayerListControlsEnum.never,t.toolbarThreshold=undefined}return t},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Component,args:[{selector:"igo-map-details-tool",template:'<igo-layer-list\r\n  igoLayerListBinding\r\n  [excludeBaseLayers]="excludeBaseLayers"\r\n  [layerFilterAndSortOptions]="layerFilterAndSortOptions"\r\n  [expandLegendOfVisibleLayers]="expandLegendOfVisibleLayers"\r\n  [toggleLegendOnVisibilityChange]="toggleLegendOnVisibilityChange"\r\n  [updateLegendOnResolutionChange]="updateLegendOnResolutionChange">\r\n\r\n  <ng-template #igoLayerItemToolbar let-layer="layer">\r\n    <igo-download-button [layer]="layer"></igo-download-button>\r\n    <igo-metadata-button [layer]="layer"></igo-metadata-button>\r\n    <igo-ogc-filter-button [ogcFiltersInLayers]="ogcFiltersInLayers" [layer]="layer"></igo-ogc-filter-button>\r\n  </ng-template>\r\n\r\n</igo-layer-list>\r\n'}]}],t.propDecorators={toggleLegendOnVisibilityChange:[{type:c.Input}],expandLegendOfVisibleLayers:[{type:c.Input}],updateLegendOnResolutionChange:[{type:c.Input}],ogcFiltersInLayers:[{type:c.Input}],layerListControls:[{type:c.Input}]},t=p([u.ToolComponent({name:"mapDetails",title:"igo.integration.tools.map",icon:"map"})],t)}(),A=function(){function t(){this.toggleLegendOnVisibilityChange=!1,this.expandLegendOfVisibleLayers=!1,this.updateLegendOnResolutionChange=!1,this.ogcFiltersInLayers=!0,this.layerListControls={}}return Object.defineProperty(t.prototype,"excludeBaseLayers",{get:function(){return this.layerListControls.excludeBaseLayers||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layerFilterAndSortOptions",{get:function(){var t=Object.assign({showToolbar:a.LayerListControlsEnum["default"]},this.layerListControls);switch(this.layerListControls.showToolbar){case a.LayerListControlsEnum.always:t.showToolbar=a.LayerListControlsEnum.always,t.toolbarThreshold=undefined;break;case a.LayerListControlsEnum.never:t.showToolbar=a.LayerListControlsEnum.never,t.toolbarThreshold=undefined}return t},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Component,args:[{selector:"igo-map-tool",template:'<mat-tab-group>\r\n\r\n  <mat-tab [label]="\'igo.integration.tools.map\' | translate">\r\n    <igo-layer-list\r\n      igoLayerListBinding\r\n      [excludeBaseLayers]="excludeBaseLayers"\r\n      [layerFilterAndSortOptions]="layerFilterAndSortOptions"\r\n      [expandLegendOfVisibleLayers]="expandLegendOfVisibleLayers"\r\n      [toggleLegendOnVisibilityChange]="toggleLegendOnVisibilityChange"\r\n      [updateLegendOnResolutionChange]="updateLegendOnResolutionChange">\r\n\r\n      <ng-template #igoLayerItemToolbar let-layer="layer">\r\n        <igo-download-button [layer]="layer"></igo-download-button>\r\n        <igo-metadata-button [layer]="layer"></igo-metadata-button>\r\n        <igo-ogc-filter-button [ogcFiltersInLayers]="ogcFiltersInLayers" [layer]="layer"></igo-ogc-filter-button>\r\n      </ng-template>\r\n\r\n    </igo-layer-list>\r\n  </mat-tab>\r\n\r\n  <mat-tab [label]="\'igo.integration.tools.contexts\' | translate">\r\n    <igo-context-list igoContextListBinding></igo-context-list>\r\n  </mat-tab>\r\n\r\n</mat-tab-group>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush,styles:["mat-tab-group,mat-tab-group ::ng-deep .mat-tab-body-wrapper{height:100%}"]}]}],t.propDecorators={toggleLegendOnVisibilityChange:[{type:c.Input}],expandLegendOfVisibleLayers:[{type:c.Input}],updateLegendOnResolutionChange:[{type:c.Input}],ogcFiltersInLayers:[{type:c.Input}],layerListControls:[{type:c.Input}]},t=p([u.ToolComponent({name:"map",title:"igo.integration.tools.map",icon:"map"})],t)}(),F=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:c.NgModule,args:[{imports:[o.MatTabsModule,i.IgoLanguageModule,a.IgoLayerModule,a.IgoMetadataModule,a.IgoDownloadModule,a.IgoFilterModule,s.IgoContextModule],declarations:[A,w],exports:[A,w],entryComponents:[A,w],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),B=function(){function t(t){this.mapState=t,this.store=new a.FeatureStore([],{map:this.mapState.map})}return t.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:h}]},t.ngInjectableDef=c.defineInjectable({factory:function(){return new t(c.inject(h))},token:t,providedIn:"root"}),t}(),D=function(){function t(t,e){this.measureState=t,this.mapState=e}return Object.defineProperty(t.prototype,"store",{get:function(){return this.measureState.store},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Component,args:[{selector:"igo-measurer-tool",template:'<igo-measurer [store]="store" [map]="map"></igo-measurer>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:B},{type:h}]},t=p([u.ToolComponent({name:"measurer",title:"igo.integration.tools.measurer",icon:"ruler"}),g("design:paramtypes",[B,h])],t)}(),_=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[a.IgoMeasurerModule],declarations:[D],exports:[D],entryComponents:[D],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),R=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[],declarations:[],exports:[_]}]}],t}(),N=function(){function t(t){this.mapState=t}return Object.defineProperty(t.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Component,args:[{selector:"igo-print-tool",template:'<igo-print [map]="map"></igo-print>\r\n'}]}],t.ctorParameters=function(){return[{type:h}]},t=p([u.ToolComponent({name:"print",title:"igo.integration.tools.print",icon:"printer"}),g("design:paramtypes",[h])],t)}(),$=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:c.NgModule,args:[{imports:[a.IgoPrintModule],declarations:[N],exports:[N],entryComponents:[N],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),k=function(){function t(t){this.searchSourceService=t,this.store=new u.EntityStore([])}return Object.defineProperty(t.prototype,"searchTypes",{get:function(){return this.searchSourceService.getEnabledSources().map(function(t){return t.constructor.type})},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:a.SearchSourceService}]},t.ngInjectableDef=c.defineInjectable({factory:function(){return new t(c.inject(a.SearchSourceService))},token:t,providedIn:"root"}),t}(),V=function(){function t(t,e,o){this.mapState=t,this.layerService=e,this.searchState=o,this.topPanelState="initial",this.format=new r}return Object.defineProperty(t.prototype,"store",{get:function(){return this.searchState.store},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this.mapState.map},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"featureTitle",{get:function(){return this.feature?u.getEntityTitle(this.feature):undefined},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"feature$",{get:function(){var e=this;return this.store.stateView.firstBy$(function(t){return t.state.focused}).pipe(n.map(function(t){return e.feature=t?t.entity.data:undefined,e.feature}))},enumerable:!0,configurable:!0}),t.prototype.onResultFocus=function(t){"initial"===this.topPanelState&&this.toggleTopPanel(),this.tryAddFeatureToMap(t)},t.prototype.onResultSelect=function(t){"initial"===this.topPanelState&&this.toggleTopPanel(),this.tryAddFeatureToMap(t),this.tryAddLayerToMap(t)},t.prototype.toggleTopPanel=function(){"collapsed"===this.topPanelState?this.topPanelState="expanded":this.topPanelState="collapsed"},t.prototype.zoomToFeatureExtent=function(){if(this.feature.geometry){var t=this.format.readFeature(this.feature,{dataProjection:this.feature.projection,featureProjection:this.map.projection});a.moveToOlFeatures(this.map,[t],a.FeatureMotion.Zoom)}},t.prototype.tryAddFeatureToMap=function(t){if(t.meta.dataType!==a.FEATURE)return undefined;var e=t.data;e.geometry!==undefined&&this.map.overlay.setFeatures([e],a.FeatureMotion.Default)},t.prototype.tryAddLayerToMap=function(t){var e=this;if(this.map!==undefined){if(t.meta.dataType!==a.LAYER)return undefined;var o=t.data;this.layerService.createAsyncLayer(o).subscribe(function(t){return e.map.addLayer(t)})}},t.decorators=[{type:c.Component,args:[{selector:"igo-search-results-tool",template:'<igo-flexible\r\n  #topPanel\r\n  initial="100%"\r\n  initialMobile="100%"\r\n  collapsed="60%"\r\n  expanded="calc(100% - 58px)"\r\n  [state]="topPanelState">\r\n\r\n  <div class="igo-content">\r\n    <igo-search-results\r\n      [store]="store"\r\n      (resultFocus)="onResultFocus($event)"\r\n      (resultSelect)="onResultSelect($event)">\r\n    </igo-search-results>\r\n  </div>\r\n\r\n  <div igoFlexibleFill class="igo-content">\r\n    <igo-panel [title]="featureTitle" *ngIf="feature$ | async">\r\n\r\n      <button\r\n        mat-icon-button\r\n        panelLeftButton\r\n        class="igo-icon-button"\r\n        (click)="toggleTopPanel()">\r\n        <mat-icon [svgIcon]="topPanel.state === \'collapsed\'? \'arrow-down\' : \'arrow-up\'"></mat-icon>\r\n      </button>\r\n\r\n      <button\r\n        mat-icon-button\r\n        panelRightButton\r\n        class="igo-icon-button"\r\n        (click)="zoomToFeatureExtent()"\r\n        *ngIf="feature.geometry">\r\n        <mat-icon svgIcon="magnify-plus-outline"></mat-icon>\r\n      </button>\r\n\r\n      <igo-feature-details\r\n        [feature]="feature$ | async">\r\n      </igo-feature-details>\r\n    </igo-panel>\r\n  </div>\r\n\r\n</igo-flexible>\r\n',changeDetection:c.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:h},{type:a.LayerService},{type:k}]},t=p([u.ToolComponent({name:"searchResults",title:"igo.integration.tools.searchResults",icon:"magnify"}),g("design:paramtypes",[h,a.LayerService,k])],t)}(),H=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[e.CommonModule,o.MatIconModule,o.MatButtonModule,a.IgoFeatureModule,a.IgoSearchModule,u.IgoFlexibleModule,u.IgoPanelModule,a.IgoFeatureDetailsModule],declarations:[V],exports:[V],entryComponents:[V],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),U=function(){function t(){}return t.decorators=[{type:c.Component,args:[{selector:"igo-ogc-filter-tool",template:"<igo-ogc-filterable-list igoOgcFilterableListBinding></igo-ogc-filterable-list>\r\n\r\n\r\n"}]}],t.ctorParameters=function(){return[]},t=p([u.ToolComponent({name:"ogcFilter",title:"igo.integration.tools.ogcFilter",icon:"filter-list"}),g("design:paramtypes",[])],t)}(),q=function(){function t(){}return t.decorators=[{type:c.Component,args:[{selector:"igo-time-analysis-tool",template:"<igo-time-filter-list igoTimeFilterListBinding></igo-time-filter-list>\r\n"}]}],t.ctorParameters=function(){return[]},t=p([u.ToolComponent({name:"timeAnalysis",title:"igo.integration.tools.timeAnalysis",icon:"history"}),g("design:paramtypes",[])],t)}(),G=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:c.NgModule,args:[{imports:[a.IgoFilterModule],declarations:[U,q],exports:[U,q],entryComponents:[U,q],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),W=function(){function t(){this.html="\n    <h1>About IGO</h1>\n    <p>IGO (for Open GIS Infrastructure) is a Free Open Source Software\n    for Geospatial (FOSS4G) developed by organisations in the government\n    of Quebec in Canada. The objective is to make it open, common,\n    modular, based on open governance model supported by multiple\n    organisations. IGO is a Web GIS software with a client & server\n    component to manage and publish massive amount of Geospatial data.\n    </p>\n    </hr>\n    <a href='mailto:info@igouverte.org' target='_top'>info[@]igouverte.org</a>\n    </br>\n    <a href='http://www.igouverte.org' target='_blank'>www.igouverte.org</A>"}return t.decorators=[{type:c.Component,args:[{selector:"igo-about-tool",template:'<igo-custom-html\r\n[html]="html">\r\n</igo-custom-html>\r\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={html:[{type:c.Input}]},t=p([u.ToolComponent({name:"about",title:"igo.integration.tools.about",icon:"help-circle"}),g("design:paramtypes",[])],t)}(),J=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:c.NgModule,args:[{imports:[u.IgoCustomHtmlModule],declarations:[W],exports:[W],entryComponents:[W],schemas:[c.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),z=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[],declarations:[],exports:[S,x,O,j,E,F,R,$,H,G,J]}]}],t}(),Q=function(){function t(){}return t.decorators=[{type:c.NgModule,args:[{imports:[],declarations:[],exports:[]}]}],t}(),Y=function(){function t(t,e,o,n){var r=this;this.contextService=t,this.toolService=e,this.toolState=o,this.languageService=n,this.context$=new l.BehaviorSubject(undefined),this.contextService.context$.subscribe(function(t){r.onContextChange(t)})}return t.prototype.setContext=function(t){this.updateTools(t),this.context$.next(t)},t.prototype.updateTools=function(t){var r=this,e=this.toolState.toolbox,a=[];(t.tools||[]).forEach(function(t){var e=r.toolService.getTool(t.name);if(e!==undefined){var o=Object.assign({},e.options||{},t.options||{}),n=Object.assign({},e,t,{options:o});a.push(n)}}),e.setTools(a),e.setToolbar(t.toolbar||[]),this.contextService.setTools([].concat(a))},t.prototype.onContextChange=function(t){t!==undefined&&this.setContext(t)},t.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:s.ContextService},{type:u.ToolService},{type:m},{type:i.LanguageService}]},t.ngInjectableDef=c.defineInjectable({factory:function(){return new t(c.inject(s.ContextService),c.inject(u.ToolService),c.inject(m),c.inject(i.LanguageService))},token:t,providedIn:"root"}),t}(),Z=function(){function t(){var o=this;this.workspace$=new l.BehaviorSubject(undefined),this._store=new u.WorkspaceStore([]),this._store.stateView.firstBy$(function(t){return!0===t.state.active}).subscribe(function(t){var e=t?t.entity:undefined;o.workspace$.next(e)})}return Object.defineProperty(t.prototype,"store",{get:function(){return this._store},enumerable:!0,configurable:!0}),t.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=c.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),K=function(){function t(){this.store=new u.EntityStore([])}return t.decorators=[{type:c.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=c.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();t.IgoIntegrationModule=z,t.IgoAppAboutModule=J,t.IgoAppContextModule=S,t.IgoAppCatalogModule=x,t.IgoAppCatalogBrowserToolModule=v,t.IgoAppCatalogLibraryToolModule=I,t.IgoAppDirectionsModule=O,t.IgoAppWorkspaceModule=j,t.IgoAppFilterModule=G,t.IgoAppImportExportModule=E,t.IgoAppMapModule=F,t.IgoAppMeasureModule=R,t.IgoAppPrintModule=$,t.IgoAppSearchModule=H,t.IgoAppToolModule=Q,t.AboutToolComponent=W,t.ContextManagerToolComponent=f,t.ContextEditorToolComponent=d,t.ContextPermissionManagerToolComponent=y,t.ContextShareToolComponent=b,t.ContextState=Y,t.CatalogState=C,t.CatalogBrowserToolComponent=L,t.CatalogLibraryToolComponent=M,t.DirectionsToolComponent=T,t.WorkspaceState=Z,t.OgcFilterToolComponent=U,t.TimeAnalysisToolComponent=q,t.ImportExportToolComponent=P,t.MapDetailsToolComponent=w,t.MapToolComponent=A,t.MapState=h,t.MeasureState=B,t.MeasurerToolComponent=D,t.PrintToolComponent=N,t.QueryState=K,t.SearchState=k,t.SearchResultsToolComponent=V,t.ToolState=m,t.ɵv=W,t.ɵi=L,t.ɵg=M,t.ɵh=C,t.ɵa=d,t.ɵb=f,t.ɵd=y,t.ɵe=b,t.ɵj=T,t.ɵt=U,t.ɵu=q,t.ɵk=P,t.ɵm=w,t.ɵl=A,t.ɵf=h,t.ɵp=B,t.ɵo=D,t.ɵn=_,t.ɵq=N,t.ɵr=V,t.ɵs=k,t.ɵc=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=igo2-integration.umd.min.js.map