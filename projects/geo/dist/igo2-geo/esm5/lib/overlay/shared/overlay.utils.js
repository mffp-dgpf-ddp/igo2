/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as olstyle from 'ol/style';
import { FeatureDataSource } from '../../datasource';
import { VectorLayer, StyleService } from '../../layer';
/**
 * Create an overlay layer and it's source
 * @return {?} Overlay layer
 */
export function createOverlayLayer() {
    /** @type {?} */
    var overlayDataSource = new FeatureDataSource();
    return new VectorLayer({
        title: 'Overlay',
        zIndex: 300,
        source: overlayDataSource,
        style: createOverlayLayerStyle()
    });
}
/**
 * Create an overlay style with markers for points and a basic stroke/fill
 * combination for lines and polygons
 * @return {?} Style function
 */
function createOverlayLayerStyle() {
    /** @type {?} */
    var defaultStyle = createOverlayDefaultStyle();
    /** @type {?} */
    var markerStyle = createOverlayMarkerStyle();
    /** @type {?} */
    var style;
    return (/**
     * @param {?} olFeature
     * @return {?}
     */
    function (olFeature) {
        if (olFeature.getId() === 'bufferFeature') {
            style = createBufferStyle(olFeature.get('bufferStroke'), 2, olFeature.get('bufferFill'), olFeature.get('bufferText'));
            return style;
        }
        else {
            /** @type {?} */
            var customStyle = olFeature.get('_style');
            if (customStyle) {
                /** @type {?} */
                var styleService = new StyleService();
                return styleService.createStyle(customStyle);
            }
            /** @type {?} */
            var geometryType = olFeature.getGeometry().getType();
            style = geometryType === 'Point' ? markerStyle : defaultStyle;
            style.getText().setText(olFeature.get('_mapTitle'));
            return style;
        }
    });
}
/**
 * Create a basic style for lines and polygons
 * @param {?=} __0
 * @return {?} Style
 */
export function createOverlayDefaultStyle(_a) {
    var _b = _a === void 0 ? {} : _a, text = _b.text, fillOpacity = _b.fillOpacity, _c = _b.strokeWidth, strokeWidth = _c === void 0 ? 2 : _c, strokeOpacity = _b.strokeOpacity, _d = _b.color, color = _d === void 0 ? [0, 161, 222, 0.3] : _d, strokeColor = _b.strokeColor;
    /** @type {?} */
    var fillWithOpacity = color.slice(0);
    /** @type {?} */
    var strokeWithOpacity = color.slice(0);
    strokeWithOpacity[3] = 1;
    if (fillOpacity) {
        fillWithOpacity[3] = fillOpacity;
    }
    if (strokeOpacity) {
        strokeWithOpacity[3] = strokeOpacity;
    }
    if (strokeColor) {
        strokeWithOpacity[0] = strokeColor[0];
        strokeWithOpacity[1] = strokeColor[1];
        strokeWithOpacity[2] = strokeColor[2];
    }
    /** @type {?} */
    var stroke = new olstyle.Stroke({
        width: strokeWidth,
        color: strokeWithOpacity
    });
    /** @type {?} */
    var fill = new olstyle.Fill({
        color: fillWithOpacity
    });
    return new olstyle.Style({
        stroke: stroke,
        fill: fill,
        image: new olstyle.Circle({
            radius: 5,
            stroke: stroke,
            fill: fill
        }),
        text: new olstyle.Text({
            text: text,
            font: '12px Calibri,sans-serif',
            fill: new olstyle.Fill({ color: '#000' }),
            stroke: new olstyle.Stroke({ color: '#fff', width: 3 }),
            overflow: true
        })
    });
}
/**
 * Create a marker style for points
 * @param {?=} __0
 * @return {?} Style
 */
export function createOverlayMarkerStyle(_a) {
    var _b = _a === void 0 ? {} : _a, text = _b.text, _c = _b.opacity, opacity = _c === void 0 ? 1 : _c, _d = _b.color, color = _d === void 0 ? 'blue' : _d, outlineColor = _b.outlineColor;
    /** @type {?} */
    var iconColor;
    /** @type {?} */
    var svgIconColor;
    /** @type {?} */
    var svgOutlineColor;
    /** @type {?} */
    var svg;
    /** @type {?} */
    var isIE = /msie\s|trident\/|edge\//i.test(window.navigator.userAgent);
    switch (color) {
        case 'blue':
            svgIconColor = '"rgb(0,161,222)"';
            iconColor = color;
            break;
        case 'red':
            svgIconColor = '"rgb(246,65,57)"';
            iconColor = color;
            break;
        case 'yellow':
            svgIconColor = '"rgb(255,215,0)"';
            iconColor = color;
            break;
        case 'green':
            svgIconColor = '"rgb(0,128,0)"';
            iconColor = color;
            break;
        default:
            svgIconColor = '"rgb(0,161,222)"';
            iconColor = 'blue';
            break;
    }
    if (outlineColor) {
        if (outlineColor instanceof Array) {
            svgOutlineColor = 'rgb(' + outlineColor[0] + ',' + outlineColor[1] + ',' + outlineColor[2] + ')';
        }
        switch (outlineColor) {
            case 'blue':
                svgOutlineColor = 'rgb(0,161,222)';
                break;
            case 'red':
                svgOutlineColor = 'rgb(246,65,57)';
                break;
            case 'yellow':
                svgOutlineColor = 'rgb(255,215,0)';
                break;
            case 'green':
                svgOutlineColor = 'rgb(0,128,0)';
                break;
        }
        svg = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36">' +
            '<path fill=' + svgIconColor + ' stroke="' + svgOutlineColor + '" stroke-width="2" d="M 17.692635,32.565644 C 15.71852,30.330584 13.290925,27.058065 11.6766,24.455732 9.3398623,20.688851 7.8905694,17.205334 7.6297492,14.728733 7.5616025,14.081649 7.5739557,12.528552 7.6513363,12.014724 8.1013861,9.0262716 9.8047068,6.3655569 12.310675,4.7364878 c 1.113691,-0.7239832 2.508083,-1.2834131 3.776687,-1.5152052 0.242945,-0.044389 0.451656,-0.09393 0.463804,-0.1100911 0.01215,-0.016161 0.638282,-0.025502 1.391411,-0.02076 1.088235,0.00685 1.450932,0.024316 1.766871,0.085071 2.650763,0.5097353 4.947142,1.8701891 6.498786,3.8501033 0.628018,0.8013587 1.297046,2.0200608 1.640967,2.9891872 0.191065,0.538399 0.427644,1.447408 0.477391,1.834287 0.0164,0.127546 0.0434,0.231902 0.06,0.231902 0.0166,0 0.03122,0.626135 0.03249,1.391411 0.0013,0.765276 -0.011,1.391411 -0.02726,1.391411 -0.01626,0 -0.05449,0.154049 -0.08495,0.342331 -0.08815,0.544879 -0.387235,1.721449 -0.604837,2.379406 -1.209421,3.656888 -4.014463,8.349762 -7.849521,13.132357 -0.790496,0.985807 -1.795217,2.167992 -1.842543,2.167992 -0.01896,0 -0.161766,-0.144111 -0.317336,-0.320246 z m 1.066937,-15.36525 c 0.133519,-0.02121 0.248766,-0.05657 0.256105,-0.07859 0.0073,-0.02202 0.04918,-0.03066 0.09298,-0.0192 0.0438,0.01145 0.107628,-0.0072 0.141834,-0.04137 0.03421,-0.03421 0.08456,-0.05474 0.111888,-0.04563 0.02733,0.0091 0.07703,-0.01077 0.110429,-0.04417 0.03341,-0.03341 0.08416,-0.05293 0.112796,-0.04338 0.02863,0.0095 0.08974,-0.01867 0.135802,-0.06271 0.04606,-0.04403 0.111902,-0.08625 0.146319,-0.09381 0.204084,-0.04483 0.762371,-0.519108 1.079463,-0.917027 0.26749,-0.335672 0.570987,-0.878795 0.529019,-0.946701 -0.01496,-0.0242 -0.0067,-0.044 0.01835,-0.044 0.05645,0 0.196809,-0.467982 0.158801,-0.529481 -0.01521,-0.02461 -0.0043,-0.04475 0.02427,-0.04475 0.03157,0 0.04365,-0.04329 0.03082,-0.11043 -0.01161,-0.06074 -0.0066,-0.110429 0.01124,-0.110429 0.01779,0 0.03235,-0.258405 0.03235,-0.574233 0,-0.315829 -0.01545,-0.574234 -0.03434,-0.574234 -0.01889,0 -0.02437,-0.03811 -0.01219,-0.08469 0.04412,-0.168712 -0.336329,-1.152668 -0.481536,-1.245401 -0.02327,-0.01486 -0.04022,-0.03992 -0.03765,-0.05568 0.01222,-0.07498 -0.156557,-0.318365 -0.406379,-0.586027 -0.295921,-0.317054 -0.773059,-0.690104 -0.83427,-0.652274 -0.0206,0.01273 -0.03745,0.0024 -0.03745,-0.02289 0,-0.06107 -0.433076,-0.2789369 -0.487546,-0.245273 -0.02338,0.01445 -0.04251,0.0068 -0.04251,-0.01695 0,-0.056281 -0.393995,-0.1865457 -0.613804,-0.2029397 -0.0943,-0.00703 -0.188579,-0.023183 -0.209503,-0.035888 -0.02092,-0.012705 -0.276571,-0.023337 -0.568105,-0.023627 -0.534044,-5.301e-4 -1.12638,0.091025 -1.12638,0.1741017 0,0.023781 -0.01713,0.032648 -0.03808,0.019705 -0.05054,-0.031232 -0.403641,0.1088602 -0.403641,0.1601422 0,0.02204 -0.01988,0.02779 -0.04417,0.01278 -0.0243,-0.01501 -0.04417,-0.0051 -0.04417,0.02209 0,0.02716 -0.01988,0.0371 -0.04417,0.02209 -0.0243,-0.01501 -0.04417,-0.0051 -0.04417,0.02209 0,0.02716 -0.01915,0.03755 -0.04256,0.02308 -0.02341,-0.01447 -0.08138,0.01252 -0.128834,0.05997 -0.04745,0.04745 -0.0974,0.07515 -0.111001,0.06155 -0.0136,-0.0136 -0.03722,0.0078 -0.05248,0.0476 -0.01526,0.03978 -0.0411,0.06408 -0.0574,0.054 -0.03277,-0.02025 -0.462299,0.323995 -0.491977,0.394291 -0.01026,0.02429 -0.07454,0.0912 -0.142856,0.148686 -0.248033,0.208705 -0.730279,0.974169 -0.672565,1.067553 0.0145,0.02346 0.0059,0.04266 -0.01914,0.04266 -0.05907,0 -0.241471,0.599428 -0.208527,0.685278 0.01385,0.0361 0.0044,0.06564 -0.02098,0.06564 -0.02539,0 -0.04169,0.0646 -0.03622,0.143558 0.0055,0.07896 -0.0042,0.213129 -0.02144,0.29816 -0.04741,0.233576 0.0511,1.055502 0.167516,1.397721 0.126048,0.370516 0.310099,0.740163 0.426484,0.856548 0.04776,0.04776 0.07554,0.08684 0.06174,0.08684 -0.0138,0 0.01516,0.05653 0.06436,0.125632 0.131301,0.184396 0.499365,0.587266 0.518785,0.567846 0.0092,-0.0092 0.09821,0.06081 0.197812,0.155562 0.09961,0.09475 0.190589,0.162786 0.202187,0.151188 0.0116,-0.0116 0.05991,0.01774 0.107361,0.06519 0.04745,0.04745 0.105426,0.07444 0.128834,0.05997 0.02341,-0.01447 0.04256,-0.0057 0.04256,0.01958 0,0.06106 0.344664,0.23496 0.399061,0.201341 0.02346,-0.0145 0.04266,-0.0059 0.04266,0.01914 0,0.05907 0.599429,0.241471 0.685279,0.208527 0.0361,-0.01385 0.06564,-0.0065 0.06564,0.01645 0,0.05196 1.079115,0.04833 1.413314,-0.0048 z"></path>'
            + '</svg>';
    }
    if (!isIE) {
        return new olstyle.Style({
            image: new olstyle.Icon({
                src: svg ? 'data:image/svg+xml;utf8,' + svg : './assets/igo2/geo/icons/place_' + iconColor + '_36px.svg',
                opacity: opacity,
                imgSize: [36, 36],
                // for ie
                anchor: [0.5, 0.92]
            }),
            text: new olstyle.Text({
                text: text,
                font: '12px Calibri,sans-serif',
                fill: new olstyle.Fill({ color: '#000' }),
                stroke: new olstyle.Stroke({ color: '#fff', width: 3 }),
                overflow: true
            })
        });
    }
    else {
        return new olstyle.Style({
            image: new olstyle.Icon({
                src: './assets/igo2/geo/icons/place_' + iconColor + '_36px.svg',
                opacity: opacity,
                imgSize: [36, 36],
                // for ie
                anchor: [0.5, 0.92]
            }),
            text: new olstyle.Text({
                text: text,
                font: '12px Calibri,sans-serif',
                fill: new olstyle.Fill({ color: '#000' }),
                stroke: new olstyle.Stroke({ color: '#fff', width: 3 }),
                overflow: true
            })
        });
    }
}
/**
 * @param {?=} strokeRGBA
 * @param {?=} strokeWidth
 * @param {?=} fillRGBA
 * @param {?=} bufferRadius
 * @return {?}
 */
function createBufferStyle(strokeRGBA, strokeWidth, fillRGBA, bufferRadius) {
    if (strokeRGBA === void 0) { strokeRGBA = [0, 161, 222, 1]; }
    if (strokeWidth === void 0) { strokeWidth = 2; }
    if (fillRGBA === void 0) { fillRGBA = [0, 161, 222, 0.15]; }
    /** @type {?} */
    var stroke = new olstyle.Stroke({
        width: strokeWidth,
        color: strokeRGBA
    });
    /** @type {?} */
    var fill = new olstyle.Stroke({
        color: fillRGBA
    });
    return new olstyle.Style({
        stroke: stroke,
        fill: fill,
        image: new olstyle.Circle({
            radius: 5,
            stroke: stroke,
            fill: fill
        }),
        text: new olstyle.Text({
            font: '12px Calibri,sans-serif',
            text: bufferRadius,
            fill: new olstyle.Fill({ color: '#000' }),
            stroke: new olstyle.Stroke({ color: '#fff', width: 3 }),
            overflow: true
        })
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3ZlcmxheS51dGlscy5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BpZ28yL2dlby8iLCJzb3VyY2VzIjpbImxpYi9vdmVybGF5L3NoYXJlZC9vdmVybGF5LnV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEtBQUssT0FBTyxNQUFNLFVBQVUsQ0FBQztBQUdwQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNyRCxPQUFPLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxNQUFNLGFBQWEsQ0FBQzs7Ozs7QUFNeEQsTUFBTSxVQUFVLGtCQUFrQjs7UUFDMUIsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsRUFBRTtJQUNqRCxPQUFPLElBQUksV0FBVyxDQUFDO1FBQ3JCLEtBQUssRUFBRSxTQUFTO1FBQ2hCLE1BQU0sRUFBRSxHQUFHO1FBQ1gsTUFBTSxFQUFFLGlCQUFpQjtRQUN6QixLQUFLLEVBQUUsdUJBQXVCLEVBQUU7S0FDakMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQzs7Ozs7O0FBT0QsU0FBUyx1QkFBdUI7O1FBQ3hCLFlBQVksR0FBRyx5QkFBeUIsRUFBRTs7UUFDMUMsV0FBVyxHQUFHLHdCQUF3QixFQUFFOztRQUUxQyxLQUFLO0lBRVQ7Ozs7SUFBTyxVQUFDLFNBQW9CO1FBQzFCLElBQUksU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLGVBQWUsRUFBRTtZQUN6QyxLQUFLLEdBQUcsaUJBQWlCLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsRUFBRSxTQUFTLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7WUFDdEgsT0FBTyxLQUFLLENBQUM7U0FDZDthQUFNOztnQkFDQyxXQUFXLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7WUFDM0MsSUFBSSxXQUFXLEVBQUU7O29CQUNU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O1lBQ3JCLElBQUksRUFBRSx5QkFBeUI7WUFDL0IsSUFBSSxFQUFFLFlBQVk7WUFDbEIsSUFBSSxFQUFFLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQztZQUN6QyxNQUFNLEVBQUUsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDdkQsUUFBUSxFQUFFLElBQUk7U0FDZixDQUFDO0tBQ0gsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG9sc3R5bGUgZnJvbSAnb2wvc3R5bGUnO1xyXG5pbXBvcnQgT2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUnO1xyXG5cclxuaW1wb3J0IHsgRmVhdHVyZURhdGFTb3VyY2UgfSBmcm9tICcuLi8uLi9kYXRhc291cmNlJztcclxuaW1wb3J0IHsgVmVjdG9yTGF5ZXIsIFN0eWxlU2VydmljZSB9IGZyb20gJy4uLy4uL2xheWVyJztcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYW4gb3ZlcmxheSBsYXllciBhbmQgaXQncyBzb3VyY2VcclxuICogQHJldHVybnMgT3ZlcmxheSBsYXllclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXlMYXllcigpOiBWZWN0b3JMYXllciB7XHJcbiAgY29uc3Qgb3ZlcmxheURhdGFTb3VyY2UgPSBuZXcgRmVhdHVyZURhdGFTb3VyY2UoKTtcclxuICByZXR1cm4gbmV3IFZlY3RvckxheWVyKHtcclxuICAgIHRpdGxlOiAnT3ZlcmxheScsXHJcbiAgICB6SW5kZXg6IDMwMCxcclxuICAgIHNvdXJjZTogb3ZlcmxheURhdGFTb3VyY2UsXHJcbiAgICBzdHlsZTogY3JlYXRlT3ZlcmxheUxheWVyU3R5bGUoKVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFuIG92ZXJsYXkgc3R5bGUgd2l0aCBtYXJrZXJzIGZvciBwb2ludHMgYW5kIGEgYmFzaWMgc3Ryb2tlL2ZpbGxcclxuICogY29tYmluYXRpb24gZm9yIGxpbmVzIGFuZCBwb2x5Z29uc1xyXG4gKiBAcmV0dXJucyBTdHlsZSBmdW5jdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlT3ZlcmxheUxheWVyU3R5bGUoKTogKG9sRmVhdHVyZTogT2xGZWF0dXJlKSA9PiBvbHN0eWxlLlN0eWxlIHtcclxuICBjb25zdCBkZWZhdWx0U3R5bGUgPSBjcmVhdGVPdmVybGF5RGVmYXVsdFN0eWxlKCk7XHJcbiAgY29uc3QgbWFya2VyU3R5bGUgPSBjcmVhdGVPdmVybGF5TWFya2VyU3R5bGUoKTtcclxuXHJcbiAgbGV0IHN0eWxlO1xyXG5cclxuICByZXR1cm4gKG9sRmVhdHVyZTogT2xGZWF0dXJlKSA9PiB7XHJcbiAgICBpZiAob2xGZWF0dXJlLmdldElkKCkgPT09ICdidWZmZXJGZWF0dXJlJykge1xyXG4gICAgICBzdHlsZSA9IGNyZWF0ZUJ1ZmZlclN0eWxlKG9sRmVhdHVyZS5nZXQoJ2J1ZmZlclN0cm9rZScpLCAyLCBvbEZlYXR1cmUuZ2V0KCdidWZmZXJGaWxsJyksIG9sRmVhdHVyZS5nZXQoJ2J1ZmZlclRleHQnKSk7XHJcbiAgICAgIHJldHVybiBzdHlsZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGN1c3RvbVN0eWxlID0gb2xGZWF0dXJlLmdldCgnX3N0eWxlJyk7XHJcbiAgICAgIGlmIChjdXN0b21TdHlsZSkge1xyXG4gICAgICAgIGNvbnN0IHN0eWxlU2VydmljZSA9IG5ldyBTdHlsZVNlcnZpY2UoKTtcclxuICAgICAgICByZXR1cm4gc3R5bGVTZXJ2aWNlLmNyZWF0ZVN0eWxlKGN1c3RvbVN0eWxlKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBnZW9tZXRyeVR5cGUgPSBvbEZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCk7XHJcbiAgICAgIHN0eWxlID0gZ2VvbWV0cnlUeXBlID09PSAnUG9pbnQnID8gbWFya2VyU3R5bGUgOiBkZWZhdWx0U3R5bGU7XHJcbiAgICAgIHN0eWxlLmdldFRleHQoKS5zZXRUZXh0KG9sRmVhdHVyZS5nZXQoJ19tYXBUaXRsZScpKTtcclxuICAgICAgcmV0dXJuIHN0eWxlO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSBiYXNpYyBzdHlsZSBmb3IgbGluZXMgYW5kIHBvbHlnb25zXHJcbiAqIEByZXR1cm5zIFN0eWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3ZlcmxheURlZmF1bHRTdHlsZShcclxuICB7dGV4dCwgZmlsbE9wYWNpdHksIHN0cm9rZVdpZHRoID0gMiwgc3Ryb2tlT3BhY2l0eSwgY29sb3IgPSBbMCwgMTYxLCAyMjIsIDAuM10sIHN0cm9rZUNvbG9yfTpcclxuICAgIHt0ZXh0Pzogc3RyaW5nLCBmaWxsT3BhY2l0eT86IG51bWJlciwgc3Ryb2tlV2lkdGg/OiBudW1iZXIsIHN0cm9rZU9wYWNpdHk/OiBudW1iZXIsIGNvbG9yPzogbnVtYmVyW10sIHN0cm9rZUNvbG9yPzogbnVtYmVyW119ICA9IHt9XHJcbiAgKTogb2xzdHlsZS5TdHlsZSB7XHJcbiAgY29uc3QgZmlsbFdpdGhPcGFjaXR5ID0gY29sb3Iuc2xpY2UoMCk7XHJcbiAgY29uc3Qgc3Ryb2tlV2l0aE9wYWNpdHkgPSBjb2xvci5zbGljZSgwKTtcclxuICBzdHJva2VXaXRoT3BhY2l0eVszXSA9IDE7XHJcbiAgaWYgKGZpbGxPcGFjaXR5KSB7XHJcbiAgICBmaWxsV2l0aE9wYWNpdHlbM10gPSBmaWxsT3BhY2l0eTtcclxuICB9XHJcbiAgaWYgKHN0cm9rZU9wYWNpdHkpIHtcclxuICAgIHN0cm9rZVdpdGhPcGFjaXR5WzNdID0gc3Ryb2tlT3BhY2l0eTtcclxuICB9XHJcbiAgaWYgKHN0cm9rZUNvbG9yKSB7XHJcbiAgICBzdHJva2VXaXRoT3BhY2l0eVswXSA9IHN0cm9rZUNvbG9yWzBdO1xyXG4gICAgc3Ryb2tlV2l0aE9wYWNpdHlbMV0gPSBzdHJva2VDb2xvclsxXTtcclxuICAgIHN0cm9rZVdpdGhPcGFjaXR5WzJdID0gc3Ryb2tlQ29sb3JbMl07XHJcbiAgfVxyXG5cclxuICBjb25zdCBzdHJva2UgPSBuZXcgb2xzdHlsZS5TdHJva2Uoe1xyXG4gICAgd2lkdGg6IHN0cm9rZVdpZHRoLFxyXG4gICAgY29sb3I6IHN0cm9rZVdpdGhPcGFjaXR5XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGZpbGwgPSBuZXcgb2xzdHlsZS5GaWxsKHtcclxuICAgIGNvbG9yOiBmaWxsV2l0aE9wYWNpdHlcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIG5ldyBvbHN0eWxlLlN0eWxlKHtcclxuICAgIHN0cm9rZSxcclxuICAgIGZpbGwsXHJcbiAgICBpbWFnZTogbmV3IG9sc3R5bGUuQ2lyY2xlKHtcclxuICAgICAgcmFkaXVzOiA1LFxyXG4gICAgICBzdHJva2UsXHJcbiAgICAgIGZpbGxcclxuICAgIH0pLFxyXG4gICAgdGV4dDogbmV3IG9sc3R5bGUuVGV4dCh7XHJcbiAgICAgIHRleHQsXHJcbiAgICAgIGZvbnQ6ICcxMnB4IENhbGlicmksc2Fucy1zZXJpZicsXHJcbiAgICAgIGZpbGw6IG5ldyBvbHN0eWxlLkZpbGwoeyBjb2xvcjogJyMwMDAnIH0pLFxyXG4gICAgICBzdHJva2U6IG5ldyBvbHN0eWxlLlN0cm9rZSh7IGNvbG9yOiAnI2ZmZicsIHdpZHRoOiAzIH0pLFxyXG4gICAgICBvdmVyZmxvdzogdHJ1ZVxyXG4gICAgfSlcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIG1hcmtlciBzdHlsZSBmb3IgcG9pbnRzXHJcbiAqIEByZXR1cm5zIFN0eWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3ZlcmxheU1hcmtlclN0eWxlKFxyXG4gIHt0ZXh0LCBvcGFjaXR5ID0gMSwgY29sb3IgPSAnYmx1ZScsIG91dGxpbmVDb2xvcn06XHJcbiAgICB7dGV4dD86IHN0cmluZywgb3BhY2l0eT86IG51bWJlciwgY29sb3I/OiBzdHJpbmcsIG91dGxpbmVDb2xvcj86IHN0cmluZyB8IG51bWJlcltdfSAgPSB7fVxyXG4gICk6IG9sc3R5bGUuU3R5bGUge1xyXG4gIGxldCBpY29uQ29sb3I7XHJcbiAgbGV0IHN2Z0ljb25Db2xvcjtcclxuICBsZXQgc3ZnT3V0bGluZUNvbG9yO1xyXG4gIGxldCBzdmc7XHJcblxyXG4gIGNvbnN0IGlzSUUgPSAvbXNpZVxcc3x0cmlkZW50XFwvfGVkZ2VcXC8vaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTsgLy8gVG8gZml4IElFMTEgc3ZnIGJ1ZyAodGVtcG9yYXJseSlcclxuXHJcbiAgc3dpdGNoIChjb2xvcikge1xyXG4gICAgY2FzZSAnYmx1ZSc6XHJcbiAgICAgIHN2Z0ljb25Db2xvciA9ICdcInJnYigwLDE2MSwyMjIpXCInO1xyXG4gICAgICBpY29uQ29sb3IgPSBjb2xvcjtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdyZWQnOlxyXG4gICAgICBzdmdJY29uQ29sb3IgPSAnXCJyZ2IoMjQ2LDY1LDU3KVwiJztcclxuICAgICAgaWNvbkNvbG9yID0gY29sb3I7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAneWVsbG93JzpcclxuICAgICAgc3ZnSWNvbkNvbG9yID0gJ1wicmdiKDI1NSwyMTUsMClcIic7XHJcbiAgICAgIGljb25Db2xvciA9IGNvbG9yO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2dyZWVuJzpcclxuICAgICAgc3ZnSWNvbkNvbG9yID0gJ1wicmdiKDAsMTI4LDApXCInO1xyXG4gICAgICBpY29uQ29sb3IgPSBjb2xvcjtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBzdmdJY29uQ29sb3IgPSAnXCJyZ2IoMCwxNjEsMjIyKVwiJztcclxuICAgICAgaWNvbkNvbG9yID0gJ2JsdWUnO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcblxyXG4gIGlmIChvdXRsaW5lQ29sb3IpIHtcclxuICAgIGlmIChvdXRsaW5lQ29sb3IgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICBzdmdPdXRsaW5lQ29sb3IgPSAncmdiKCcgKyBvdXRsaW5lQ29sb3JbMF0gKyAnLCcgKyBvdXRsaW5lQ29sb3JbMV0gKyAnLCcgKyBvdXRsaW5lQ29sb3JbMl0gKyAnKSc7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKG91dGxpbmVDb2xvcikge1xyXG4gICAgICBjYXNlICdibHVlJzpcclxuICAgICAgICBzdmdPdXRsaW5lQ29sb3IgPSAncmdiKDAsMTYxLDIyMiknO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdyZWQnOlxyXG4gICAgICAgIHN2Z091dGxpbmVDb2xvciA9ICdyZ2IoMjQ2LDY1LDU3KSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3llbGxvdyc6XHJcbiAgICAgICAgc3ZnT3V0bGluZUNvbG9yID0gJ3JnYigyNTUsMjE1LDApJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZ3JlZW4nOlxyXG4gICAgICAgIHN2Z091dGxpbmVDb2xvciA9ICdyZ2IoMCwxMjgsMCknO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgc3ZnID0gJzxzdmcgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIzNlwiIHdpZHRoPVwiMzZcIiB2aWV3Qm94PVwiMCAwIDM2IDM2XCI+JyArXHJcbiAgICAgICAgICAnPHBhdGggZmlsbD0nICsgc3ZnSWNvbkNvbG9yICsgJyBzdHJva2U9XCInICsgc3ZnT3V0bGluZUNvbG9yICsgJ1wiIHN0cm9rZS13aWR0aD1cIjJcIiBkPVwiTSAxNy42OTI2MzUsMzIuNTY1NjQ0IEMgMTUuNzE4NTIsMzAuMzMwNTg0IDEzLjI5MDkyNSwyNy4wNTgwNjUgMTEuNjc2NiwyNC40NTU3MzIgOS4zMzk4NjIzLDIwLjY4ODg1MSA3Ljg5MDU2OTQsMTcuMjA1MzM0IDcuNjI5NzQ5MiwxNC43Mjg3MzMgNy41NjE2MDI1LDE0LjA4MTY0OSA3LjU3Mzk1NTcsMTIuNTI4NTUyIDcuNjUxMzM2MywxMi4wMTQ3MjQgOC4xMDEzODYxLDkuMDI2MjcxNiA5LjgwNDcwNjgsNi4zNjU1NTY5IDEyLjMxMDY3NSw0LjczNjQ4NzggYyAxLjExMzY5MSwtMC43MjM5ODMyIDIuNTA4MDgzLC0xLjI4MzQxMzEgMy43NzY2ODcsLTEuNTE1MjA1MiAwLjI0Mjk0NSwtMC4wNDQzODkgMC40NTE2NTYsLTAuMDkzOTMgMC40NjM4MDQsLTAuMTEwMDkxMSAwLjAxMjE1LC0wLjAxNjE2MSAwLjYzODI4MiwtMC4wMjU1MDIgMS4zOTE0MTEsLTAuMDIwNzYgMS4wODgyMzUsMC4wMDY4NSAxLjQ1MDkzMiwwLjAyNDMxNiAxLjc2Njg3MSwwLjA4NTA3MSAyLjY1MDc2MywwLjUwOTczNTMgNC45NDcxNDIsMS44NzAxODkxIDYuNDk4Nzg2LDMuODUwMTAzMyAwLjYyODAxOCwwLjgwMTM1ODcgMS4yOTcwNDYsMi4wMjAwNjA4IDEuNjQwOTY3LDIuOTg5MTg3MiAwLjE5MTA2NSwwLjUzODM5OSAwLjQyNzY0NCwxLjQ0NzQwOCAwLjQ3NzM5MSwxLjgzNDI4NyAwLjAxNjQsMC4xMjc1NDYgMC4wNDM0LDAuMjMxOTAyIDAuMDYsMC4yMzE5MDIgMC4wMTY2LDAgMC4wMzEyMiwwLjYyNjEzNSAwLjAzMjQ5LDEuMzkxNDExIDAuMDAxMywwLjc2NTI3NiAtMC4wMTEsMS4zOTE0MTEgLTAuMDI3MjYsMS4zOTE0MTEgLTAuMDE2MjYsMCAtMC4wNTQ0OSwwLjE1NDA0OSAtMC4wODQ5NSwwLjM0MjMzMSAtMC4wODgxNSwwLjU0NDg3OSAtMC4zODcyMzUsMS43MjE0NDkgLTAuNjA0ODM3LDIuMzc5NDA2IC0xLjIwOTQyMSwzLjY1Njg4OCAtNC4wMTQ0NjMsOC4zNDk3NjIgLTcuODQ5NTIxLDEzLjEzMjM1NyAtMC43OTA0OTYsMC45ODU4MDcgLTEuNzk1MjE3LDIuMTY3OTkyIC0xLjg0MjU0MywyLjE2Nzk5MiAtMC4wMTg5NiwwIC0wLjE2MTc2NiwtMC4xNDQxMTEgLTAuMzE3MzM2LC0wLjMyMDI0NiB6IG0gMS4wNjY5MzcsLTE1LjM2NTI1IGMgMC4xMzM1MTksLTAuMDIxMjEgMC4yNDg3NjYsLTAuMDU2NTcgMC4yNTYxMDUsLTAuMDc4NTkgMC4wMDczLC0wLjAyMjAyIDAuMDQ5MTgsLTAuMDMwNjYgMC4wOTI5OCwtMC4wMTkyIDAuMDQzOCwwLjAxMTQ1IDAuMTA3NjI4LC0wLjAwNzIgMC4xNDE4MzQsLTAuMDQxMzcgMC4wMzQyMSwtMC4wMzQyMSAwLjA4NDU2LC0wLjA1NDc0IDAuMTExODg4LC0wLjA0NTYzIDAuMDI3MzMsMC4wMDkxIDAuMDc3MDMsLTAuMDEwNzcgMC4xMTA0MjksLTAuMDQ0MTcgMC4wMzM0MSwtMC4wMzM0MSAwLjA4NDE2LC0wLjA1MjkzIDAuMTEyNzk2LC0wLjA0MzM4IDAuMDI4NjMsMC4wMDk1IDAuMDg5NzQsLTAuMDE4NjcgMC4xMzU4MDIsLTAuMDYyNzEgMC4wNDYwNiwtMC4wNDQwMyAwLjExMTkwMiwtMC4wODYyNSAwLjE0NjMxOSwtMC4wOTM4MSAwLjIwNDA4NCwtMC4wNDQ4MyAwLjc2MjM3MSwtMC41MTkxMDggMS4wNzk0NjMsLTAuOTE3MDI3IDAuMjY3NDksLTAuMzM1NjcyIDAuNTcwOTg3LC0wLjg3ODc5NSAwLjUyOTAxOSwtMC45NDY3MDEgLTAuMDE0OTYsLTAuMDI0MiAtMC4wMDY3LC0wLjA0NCAwLjAxODM1LC0wLjA0NCAwLjA1NjQ1LDAgMC4xOTY4MDksLTAuNDY3OTgyIDAuMTU4ODAxLC0wLjUyOTQ4MSAtMC4wMTUyMSwtMC4wMjQ2MSAtMC4wMDQzLC0wLjA0NDc1IDAuMDI0MjcsLTAuMDQ0NzUgMC4wMzE1NywwIDAuMDQzNjUsLTAuMDQzMjkgMC4wMzA4MiwtMC4xMTA0MyAtMC4wMTE2MSwtMC4wNjA3NCAtMC4wMDY2LC0wLjExMDQyOSAwLjAxMTI0LC0wLjExMDQyOSAwLjAxNzc5LDAgMC4wMzIzNSwtMC4yNTg0MDUgMC4wMzIzNSwtMC41NzQyMzMgMCwtMC4zMTU4MjkgLTAuMDE1NDUsLTAuNTc0MjM0IC0wLjAzNDM0LC0wLjU3NDIzNCAtMC4wMTg4OSwwIC0wLjAyNDM3LC0wLjAzODExIC0wLjAxMjE5LC0wLjA4NDY5IDAuMDQ0MTIsLTAuMTY4NzEyIC0wLjMzNjMyOSwtMS4xNTI2NjggLTAuNDgxNTM2LC0xLjI0NTQwMSAtMC4wMjMyNywtMC4wMTQ4NiAtMC4wNDAyMiwtMC4wMzk5MiAtMC4wMzc2NSwtMC4wNTU2OCAwLjAxMjIyLC0wLjA3NDk4IC0wLjE1NjU1NywtMC4zMTgzNjUgLTAuNDA2Mzc5LC0wLjU4NjAyNyAtMC4yOTU5MjEsLTAuMzE3MDU0IC0wLjc3MzA1OSwtMC42OTAxMDQgLTAuODM0MjcsLTAuNjUyMjc0IC0wLjAyMDYsMC4wMTI3MyAtMC4wMzc0NSwwLjAwMjQgLTAuMDM3NDUsLTAuMDIyODkgMCwtMC4wNjEwNyAtMC40MzMwNzYsLTAuMjc4OTM2OSAtMC40ODc1NDYsLTAuMjQ1MjczIC0wLjAyMzM4LDAuMDE0NDUgLTAuMDQyNTEsMC4wMDY4IC0wLjA0MjUxLC0wLjAxNjk1IDAsLTAuMDU2MjgxIC0wLjM5Mzk5NSwtMC4xODY1NDU3IC0wLjYxMzgwNCwtMC4yMDI5Mzk3IC0wLjA5NDMsLTAuMDA3MDMgLTAuMTg4NTc5LC0wLjAyMzE4MyAtMC4yMDk1MDMsLTAuMDM1ODg4IC0wLjAyMDkyLC0wLjAxMjcwNSAtMC4yNzY1NzEsLTAuMDIzMzM3IC0wLjU2ODEwNSwtMC4wMjM2MjcgLTAuNTM0MDQ0LC01LjMwMWUtNCAtMS4xMjYzOCwwLjA5MTAyNSAtMS4xMjYzOCwwLjE3NDEwMTcgMCwwLjAyMzc4MSAtMC4wMTcxMywwLjAzMjY0OCAtMC4wMzgwOCwwLjAxOTcwNSAtMC4wNTA1NCwtMC4wMzEyMzIgLTAuNDAzNjQxLDAuMTA4ODYwMiAtMC40MDM2NDEsMC4xNjAxNDIyIDAsMC4wMjIwNCAtMC4wMTk4OCwwLjAyNzc5IC0wLjA0NDE3LDAuMDEyNzggLTAuMDI0MywtMC4wMTUwMSAtMC4wNDQxNywtMC4wMDUxIC0wLjA0NDE3LDAuMDIyMDkgMCwwLjAyNzE2IC0wLjAxOTg4LDAuMDM3MSAtMC4wNDQxNywwLjAyMjA5IC0wLjAyNDMsLTAuMDE1MDEgLTAuMDQ0MTcsLTAuMDA1MSAtMC4wNDQxNywwLjAyMjA5IDAsMC4wMjcxNiAtMC4wMTkxNSwwLjAzNzU1IC0wLjA0MjU2LDAuMDIzMDggLTAuMDIzNDEsLTAuMDE0NDcgLTAuMDgxMzgsMC4wMTI1MiAtMC4xMjg4MzQsMC4wNTk5NyAtMC4wNDc0NSwwLjA0NzQ1IC0wLjA5NzQsMC4wNzUxNSAtMC4xMTEwMDEsMC4wNjE1NSAtMC4wMTM2LC0wLjAxMzYgLTAuMDM3MjIsMC4wMDc4IC0wLjA1MjQ4LDAuMDQ3NiAtMC4wMTUyNiwwLjAzOTc4IC0wLjA0MTEsMC4wNjQwOCAtMC4wNTc0LDAuMDU0IC0wLjAzMjc3LC0wLjAyMDI1IC0wLjQ2MjI5OSwwLjMyMzk5NSAtMC40OTE5NzcsMC4zOTQyOTEgLTAuMDEwMjYsMC4wMjQyOSAtMC4wNzQ1NCwwLjA5MTIgLTAuMTQyODU2LDAuMTQ4Njg2IC0wLjI0ODAzMywwLjIwODcwNSAtMC43MzAyNzksMC45NzQxNjkgLTAuNjcyNTY1LDEuMDY3NTUzIDAuMDE0NSwwLjAyMzQ2IDAuMDA1OSwwLjA0MjY2IC0wLjAxOTE0LDAuMDQyNjYgLTAuMDU5MDcsMCAtMC4yNDE0NzEsMC41OTk0MjggLTAuMjA4NTI3LDAuNjg1Mjc4IDAuMDEzODUsMC4wMzYxIDAuMDA0NCwwLjA2NTY0IC0wLjAyMDk4LDAuMDY1NjQgLTAuMDI1MzksMCAtMC4wNDE2OSwwLjA2NDYgLTAuMDM2MjIsMC4xNDM1NTggMC4wMDU1LDAuMDc4OTYgLTAuMDA0MiwwLjIxMzEyOSAtMC4wMjE0NCwwLjI5ODE2IC0wLjA0NzQxLDAuMjMzNTc2IDAuMDUxMSwxLjA1NTUwMiAwLjE2NzUxNiwxLjM5NzcyMSAwLjEyNjA0OCwwLjM3MDUxNiAwLjMxMDA5OSwwLjc0MDE2MyAwLjQyNjQ4NCwwLjg1NjU0OCAwLjA0Nzc2LDAuMDQ3NzYgMC4wNzU1NCwwLjA4Njg0IDAuMDYxNzQsMC4wODY4NCAtMC4wMTM4LDAgMC4wMTUxNiwwLjA1NjUzIDAuMDY0MzYsMC4xMjU2MzIgMC4xMzEzMDEsMC4xODQzOTYgMC40OTkzNjUsMC41ODcyNjYgMC41MTg3ODUsMC41Njc4NDYgMC4wMDkyLC0wLjAwOTIgMC4wOTgyMSwwLjA2MDgxIDAuMTk3ODEyLDAuMTU1NTYyIDAuMDk5NjEsMC4wOTQ3NSAwLjE5MDU4OSwwLjE2Mjc4NiAwLjIwMjE4NywwLjE1MTE4OCAwLjAxMTYsLTAuMDExNiAwLjA1OTkxLDAuMDE3NzQgMC4xMDczNjEsMC4wNjUxOSAwLjA0NzQ1LDAuMDQ3NDUgMC4xMDU0MjYsMC4wNzQ0NCAwLjEyODgzNCwwLjA1OTk3IDAuMDIzNDEsLTAuMDE0NDcgMC4wNDI1NiwtMC4wMDU3IDAuMDQyNTYsMC4wMTk1OCAwLDAuMDYxMDYgMC4zNDQ2NjQsMC4yMzQ5NiAwLjM5OTA2MSwwLjIwMTM0MSAwLjAyMzQ2LC0wLjAxNDUgMC4wNDI2NiwtMC4wMDU5IDAuMDQyNjYsMC4wMTkxNCAwLDAuMDU5MDcgMC41OTk0MjksMC4yNDE0NzEgMC42ODUyNzksMC4yMDg1MjcgMC4wMzYxLC0wLjAxMzg1IDAuMDY1NjQsLTAuMDA2NSAwLjA2NTY0LDAuMDE2NDUgMCwwLjA1MTk2IDEuMDc5MTE1LDAuMDQ4MzMgMS40MTMzMTQsLTAuMDA0OCB6XCI+PC9wYXRoPidcclxuICAgICAgICAgICsgJzwvc3ZnPic7XHJcbiAgfVxyXG5cclxuICBpZiAoIWlzSUUpIHtcclxuICAgIHJldHVybiBuZXcgb2xzdHlsZS5TdHlsZSh7XHJcbiAgICAgIGltYWdlOiBuZXcgb2xzdHlsZS5JY29uKHtcclxuICAgICAgICBzcmM6IHN2ZyA/ICdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwnICsgc3ZnIDogJy4vYXNzZXRzL2lnbzIvZ2VvL2ljb25zL3BsYWNlXycgKyBpY29uQ29sb3IgKyAnXzM2cHguc3ZnJyxcclxuICAgICAgICBvcGFjaXR5LFxyXG4gICAgICAgIGltZ1NpemU6IFszNiwgMzZdLCAvLyBmb3IgaWVcclxuICAgICAgICBhbmNob3I6IFswLjUsIDAuOTJdXHJcbiAgICAgIH0pLFxyXG4gICAgICB0ZXh0OiBuZXcgb2xzdHlsZS5UZXh0KHtcclxuICAgICAgICB0ZXh0LFxyXG4gICAgICAgIGZvbnQ6ICcxMnB4IENhbGlicmksc2Fucy1zZXJpZicsXHJcbiAgICAgICAgZmlsbDogbmV3IG9sc3R5bGUuRmlsbCh7IGNvbG9yOiAnIzAwMCcgfSksXHJcbiAgICAgICAgc3Ryb2tlOiBuZXcgb2xzdHlsZS5TdHJva2UoeyBjb2xvcjogJyNmZmYnLCB3aWR0aDogMyB9KSxcclxuICAgICAgICBvdmVyZmxvdzogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBuZXcgb2xzdHlsZS5TdHlsZSh7XHJcbiAgICAgIGltYWdlOiBuZXcgb2xzdHlsZS5JY29uKHtcclxuICAgICAgICBzcmM6ICcuL2Fzc2V0cy9pZ28yL2dlby9pY29ucy9wbGFjZV8nICsgaWNvbkNvbG9yICsgJ18zNnB4LnN2ZycsXHJcbiAgICAgICAgb3BhY2l0eSxcclxuICAgICAgICBpbWdTaXplOiBbMzYsIDM2XSwgLy8gZm9yIGllXHJcbiAgICAgICAgYW5jaG9yOiBbMC41LCAwLjkyXVxyXG4gICAgICB9KSxcclxuICAgICAgdGV4dDogbmV3IG9sc3R5bGUuVGV4dCh7XHJcbiAgICAgICAgdGV4dCxcclxuICAgICAgICBmb250OiAnMTJweCBDYWxpYnJpLHNhbnMtc2VyaWYnLFxyXG4gICAgICAgIGZpbGw6IG5ldyBvbHN0eWxlLkZpbGwoeyBjb2xvcjogJyMwMDAnIH0pLFxyXG4gICAgICAgIHN0cm9rZTogbmV3IG9sc3R5bGUuU3Ryb2tlKHsgY29sb3I6ICcjZmZmJywgd2lkdGg6IDMgfSksXHJcbiAgICAgICAgb3ZlcmZsb3c6IHRydWVcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyU3R5bGUoXHJcbiAgc3Ryb2tlUkdCQTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbMCwgMTYxLCAyMjIsIDFdLFxyXG4gIHN0cm9rZVdpZHRoOiBudW1iZXIgPSAyLFxyXG4gIGZpbGxSR0JBOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFswLCAxNjEsIDIyMiwgMC4xNV0sXHJcbiAgYnVmZmVyUmFkaXVzP1xyXG4pOiBvbHN0eWxlLlN0eWxlIHtcclxuICBjb25zdCBzdHJva2UgPSBuZXcgb2xzdHlsZS5TdHJva2Uoe1xyXG4gICAgd2lkdGg6IHN0cm9rZVdpZHRoLFxyXG4gICAgY29sb3I6IHN0cm9rZVJHQkFcclxuICB9KTtcclxuXHJcbiAgY29uc3QgZmlsbCA9IG5ldyBvbHN0eWxlLlN0cm9rZSh7XHJcbiAgICBjb2xvcjogZmlsbFJHQkFcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIG5ldyBvbHN0eWxlLlN0eWxlKHtcclxuICAgIHN0cm9rZSxcclxuICAgIGZpbGwsXHJcbiAgICBpbWFnZTogbmV3IG9sc3R5bGUuQ2lyY2xlKHtcclxuICAgICAgcmFkaXVzOiA1LFxyXG4gICAgICBzdHJva2UsXHJcbiAgICAgIGZpbGxcclxuICAgIH0pLFxyXG4gICAgdGV4dDogbmV3IG9sc3R5bGUuVGV4dCh7XHJcbiAgICAgIGZvbnQ6ICcxMnB4IENhbGlicmksc2Fucy1zZXJpZicsXHJcbiAgICAgIHRleHQ6IGJ1ZmZlclJhZGl1cyxcclxuICAgICAgZmlsbDogbmV3IG9sc3R5bGUuRmlsbCh7IGNvbG9yOiAnIzAwMCcgfSksXHJcbiAgICAgIHN0cm9rZTogbmV3IG9sc3R5bGUuU3Ryb2tlKHsgY29sb3I6ICcjZmZmJywgd2lkdGg6IDMgfSksXHJcbiAgICAgIG92ZXJmbG93OiB0cnVlXHJcbiAgICB9KVxyXG4gIH0pO1xyXG59XHJcbiJdfQ==